(self.webpackChunk=self.webpackChunk||[]).push([[1427],{41427:(e,t,i)=>{i.r(t),i.d(t,{activate:()=>Se});var o=i(84714),s=i(50750),r=i(90572),n=i(20161),a=i(29416),c=i(63532),d=i(90023),l=i(58303),u=i(32103),p=i(13391),g=i(32876),h=i(88012),v=i(59179),m=i(24666),S=i(78129),b=i(64443),V=i(67177),_=i(20232),y=i(84178),k=i(12518),f=i(20498),C=i(46068),I=i(45676),P=i(12496),w=i(61171),A=i(21034),x=i(86399),L=i(22414),M=Object.defineProperty,E=Object.defineProperties,K=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,T=(e,t,i)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,B=(e,t)=>{for(var i in t||(t={}))z.call(t,i)&&T(e,i,t[i]);if(O)for(var i of O(t))Z.call(t,i)&&T(e,i,t[i]);return e},G=(e,t)=>E(e,K(t));var U=Object.defineProperty,F=Object.defineProperties,R=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,D=(e,t,i)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,q=(e,t)=>{for(var i in t||(t={}))N.call(t,i)&&D(e,i,t[i]);if(j)for(var i of j(t))Q.call(t,i)&&D(e,i,t[i]);return e},H=(e,t)=>F(e,R(t));class W{constructor(e){this._params=e,this.title=p.h.create("Humanizer"),this._state=p.h.create({kind:g.ZM.Kind.Initial}),this._subs=new h.w.Keeper,this._logger=b.C8.Logging.getLogger("Humanizer.AgentPanelViewModel"),this._selectedVoice=this._state.view((e=>e.kind===g.ZM.Kind.Loaded?(0,d.zG)(e.selectedVoiceId,l.tS((t=>(0,d.zG)(e.voices.find((e=>e.id===t)),l.ij)))):l.YP)),this.saveCustomVoice=(e,t,i)=>{var o,s;return this.context.tracking.trackEvent(P.s.ComponentClicked,{componentId:P.O.SaveButton,detail:{agentId:w.k,capiSessionId:null!=(o=this.context.capiSessionId.get())?o:null,textLength:null!=(s=this.context.textLength.get())?s:null,voiceName:e,sampleLength:t.length}}),this._state.modify((i=>H(q({},i),{kind:g.ZM.Kind.CreateCustomVoiceProcessing,voiceName:e,sampleLength:t.length}))),(0,d.zG)(this._customVoiceService.createCustomVoice({toneName:e,content:t,description:i}),_.UI(k.g_((e=>{this._logger.error("Failed to create custom voice",e),this._state.set({kind:g.ZM.Kind.Error})}),(()=>d.Q1))))()},this.context=this._initializeContext(),this._subscribeToVbarsCount(),this._subscribeToVbarsAutoFocus(),this._subscribeToRemovePersistentDataStarted(),this._subscribeToUploadTextFinished(),this._loadModesWhenTextBecomesLongEnoughAfterEmptyState(),this._listenToTextSizeChanges(),this._initializeCustomVoiceService(),this.featureFlags=this._params.featureFlags}_initializeCustomVoiceService(){this._customVoiceService=(0,A.XW)({fileUploadService:this._params.fileUploadService,agentId:w.k})}_initializeContext(){const e=p.h.create(void 0);return this._subs.push(this._params.capiSession.events.pipe((0,r.h)(I.hX.is("session_started")),(0,v.U)((e=>e.sessionUuid))).subscribe((t=>e.set(t)))),{capiSessionId:e,tracking:this._params.trackingServiceProvider.getTrackingService(),textLength:this._params.textInfo.view((0,d.ls)(l.UI((e=>e.charsCount)),l.fS((()=>0)))),selectedMode:this._selectedVoice.view(l.UI((e=>e.label))).view(l.FS)}}_subscribeToUploadTextFinished(){this._subs.push(this._params.fileUploadService.on("uploadTextFinished",(e=>this.reload())))}_subscribeToRemovePersistentDataStarted(){this._subs.push(this._params.fileUploadService.on("removePersistentDataStarted",(e=>{const t=e.useCaseParameters;if("customTone"===(null==t?void 0:t.kind)&&t.name){const e=t.name;this._logger.debug("Removing custom voice mode from state",{voiceName:e});const i=this._state.get();if(i.kind===g.ZM.Kind.Loaded){const t=i.voices.find((t=>t.label===e&&t.isCustom));if(t){const e=(0,d.zG)(i.selectedVoiceId,l.tS((e=>e===t.id?l.YP:l.G(e))));this._state.set(H(q({},i),{selectedVoiceId:e,voices:i.voices.filter((e=>e.id!==t.id)),applyVoiceState:i.applyVoiceState.kind===g._Q.Kind.Loading&&i.applyVoiceState.voiceId===t.id?{kind:g._Q.Kind.Idle}:i.applyVoiceState}))}}}})))}_subscribeToVbarsAutoFocus(){this._subs.push((0,A.bH)(function(e){const{agenticService:t}=e;return G(B({},e),{findFirstVBarForAction:e=>t.currentVBars.pipe((0,v.U)((t=>(0,L.Nf)(e,t))),(0,v.U)((e=>x.YM(e)))),getSelectedAction:e=>(0,d.zG)(e.selectedVoiceId,l.tS((t=>(0,d.zG)(e.voices,x.Ew((e=>e.id===t)),l.UI((t=>G(B({},t),{applyVoiceState:e.applyVoiceState}))))))),equals:(e,t)=>g.ZM.VoiceId.optionalEqById.equals(e,t)&&!(0,d.zG)(t,l.Gg((e=>g._Q.isLoadingAfterReload(e.applyVoiceState)))),filterAllowedStates:e=>e.kind===g.ZM.Kind.Loaded})}({state:this.state,isPanelOpen:this._params.isPanelOpen,agenticService:this._params.agenticService,decorationService:this._params.decorationService,logger:this._logger,agentId:w.k})).subscribe())}_subscribeToVbarsCount(){this._subs.push(this._params.agenticService.currentVBars.subscribe((()=>{var e;const t=this._state.get();if(t.kind===g.ZM.Kind.Loaded&&t.applyVoiceState.kind===g._Q.Kind.Loaded){const i=this._params.agenticService.getCurrentVBarsForVoice({sourceAction:null!=(e=(0,d.zG)(t.selectedVoiceSourceAction,l.FS))?e:""}).length;this._state.set(H(q({},t),{applyVoiceState:H(q({},t.applyVoiceState),{vBarsCount:i})}))}}))),this._subs.push(this._params.agenticService.currentVBars.pipe(v.U((e=>e.length)),m.x(),S.G(),c.b((([e,t])=>{this._logger.debug("VBars count changed",{prevCount:e,currCount:t})})),r.h((([e,t])=>0!==e&&0===t))).subscribe((()=>{var e,t,i;const o=this._state.get();o.kind===g.ZM.Kind.Loaded&&o.applyVoiceState.kind===g._Q.Kind.Loaded&&this._params.trackingServiceProvider.getTrackingService().trackEvent(P.s.ComponentImpression,{componentId:P.O.ModeCompleted,detail:{agentId:w.k,capiSessionId:null!=(e=this.context.capiSessionId.get())?e:null,textLength:null!=(t=this.context.textLength.get())?t:null,modeName:this.context.selectedMode.get(),trackingSourceAction:null!=(i=this._selectedVoice.view((0,d.ls)(l.UI((e=>e.trackingSourceAction)),l.FS)).get())?i:""}})})))}_loadModesWhenTextBecomesLongEnoughAfterEmptyState(){const{editor:e,isPanelOpen:t}=this._params;this._subs.push(this._state.pipe((0,r.h)((e=>e.kind===g.ZM.Kind.Empty)),(0,n.w)((()=>e.changes.pipe((0,r.h)((()=>!0===t.get())),(0,a.b)(f.k),(0,r.h)((()=>!this.isTextTooShort())),(0,y.q)(1),(0,r.h)((()=>this._state.get().kind===g.ZM.Kind.Empty)),(0,n.w)((()=>(this._logger.debug("Editor has enough text in Empty state, try loading modes"),(0,o.of)(this.getVoices()())))))))).subscribe())}_listenToTextSizeChanges(){this._subs.push(this._params.editor.changes.pipe((0,r.h)((()=>this._state.get().kind===g.ZM.Kind.Loaded)),(0,a.b)(f.k),(0,r.h)((()=>this.isTextTooShort())),(0,c.b)((()=>{this._logger.debug("Text size changed, setting Empty state"),this._state.set({kind:g.ZM.Kind.Empty})}))).subscribe())}isTextTooShort(){return(0,d.zG)(this._params.editor.getContents().text,k.UI(C.iD),k.UI((e=>e<f.R)),k.fS((()=>!1)))}openCustomVoice(){this._state.modify((e=>H(q({},e),{kind:g.ZM.Kind.CreateCustomVoice})))}reload(){return((e,t,i)=>new Promise(((o,s)=>{var r=e=>{try{a(i.next(e))}catch(e){s(e)}},n=e=>{try{a(i.throw(e))}catch(e){s(e)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,n);a((i=i.apply(e,t)).next())})))(this,null,(function*(){let e,t;const i=this._state.get(),o=i.kind===g.ZM.Kind.CreateCustomVoice||i.kind===g.ZM.Kind.CreateCustomVoiceProcessing;(i.kind===g.ZM.Kind.Loaded||i.kind===g.ZM.Kind.CreateCustomVoice||i.kind===g.ZM.Kind.CreateCustomVoiceProcessing)&&(e=(0,d.zG)(i.selectedVoiceId,l.FS),t=(0,d.zG)(i.selectedVoiceSourceAction,l.FS)),o||this._params.agenticService.clearVbars(),yield this.getVoices()(),e&&t&&this._state.get().kind===g.ZM.Kind.Loaded&&!o?this.applyVoice(e,t,!0):e&&t&&o&&this._state.modify((i=>H(q({},i),{selectedVoiceId:l.G(e),selectedVoiceSourceAction:l.G(t),applyVoiceState:{kind:g._Q.Kind.Loaded,vBarsCount:this._params.agenticService.getCurrentVBarsForVoice({sourceAction:t}).length}})))}))}backToLoadedState(){this._state.modify((e=>H(q({},e),{kind:g.ZM.Kind.Loaded,lastClickedVoiceId:null})))}getVoices(){return this.isTextTooShort()?(this._logger.debug("Text is too short, setting Empty state"),this._state.set({kind:g.ZM.Kind.Empty}),V.t$(new Error("Text is too short"))):(this._state.set({kind:g.ZM.Kind.Loading}),(0,d.zG)(this._params.agenticService.getVoices(),V.Vn((e=>(this._logger.error("getVoices error",e),this._state.set({kind:g.ZM.Kind.Error}),e))),V.UI((e=>(this._logger.debug("getVoices result",e),0===e.length?this._state.set({kind:g.ZM.Kind.Empty}):this._state.set({kind:g.ZM.Kind.Loaded,voices:e,selectedVoiceId:l.YP,selectedVoiceSourceAction:l.YP,applyVoiceState:{kind:g._Q.Kind.Idle},lastClickedVoiceId:null}),e)))))}removeCustomVoice(e){return(0,d.zG)(this._customVoiceService.removeCustomVoice({toneName:e}),V.Vn((e=>(this._logger.error("Failed to remove custom voice",e),this._state.set({kind:g.ZM.Kind.Error}),e))))()}applyVoice(e,t,i=!1){this._logger.debug("applyVoice",e);const o=this._state.get();if(o.kind!==g.ZM.Kind.Loaded)return this._logger.error("Not possible to apply voice in this state"),Promise.resolve();const s=this._params.agenticService.getCurrentVBarsForVoice({sourceAction:t});return s.length>0?(this._state.set(H(q({},o),{selectedVoiceId:l.G(e),selectedVoiceSourceAction:l.G(t),applyVoiceState:{kind:g._Q.Kind.Loaded,vBarsCount:s.length}})),Promise.resolve()):(this._state.set(H(q({},o),{selectedVoiceId:l.G(e),selectedVoiceSourceAction:l.G(t),applyVoiceState:{kind:g._Q.Kind.Loading,voiceId:e,isAfterReload:i},lastClickedVoiceId:e})),this._params.agenticService.applyVoice(e).then((i=>{var s,r,n;if(!i)return this._logger.error("applyVoice failed"),void this._state.set(H(q({},o),{selectedVoiceId:l.YP,selectedVoiceSourceAction:l.YP,applyVoiceState:{kind:g._Q.Kind.Error}}));{this._logger.debug("applyVoice success");const i=this._params.agenticService.getCurrentVBarsForVoice({sourceAction:t}).length,o=this._state.get();if(o.kind===g.ZM.Kind.CreateCustomVoice||o.kind===g.ZM.Kind.CreateCustomVoiceProcessing||o.kind===g.ZM.Kind.Loaded&&o.lastClickedVoiceId===e)return 0===i?void this._state.set(H(q({},o),{selectedVoiceId:l.G(e),selectedVoiceSourceAction:l.G(t),applyVoiceState:{kind:g._Q.Kind.Empty}})):(this._params.trackingServiceProvider.getTrackingService().trackEvent(P.s.ComponentImpression,{componentId:P.O.PushedContentReceived,detail:{agentId:w.k,capiSessionId:null!=(s=this.context.capiSessionId.get())?s:null,textLength:null!=(r=this.context.textLength.get())?r:null,modeName:this.context.selectedMode.get(),trackingSourceAction:null!=(n=this._selectedVoice.view((0,d.ls)(l.UI((e=>e.trackingSourceAction)),l.FS)).get())?n:"",suggestionsCount:i}}),void this._state.set(H(q({},o),{selectedVoiceId:l.G(e),selectedVoiceSourceAction:l.G(t),applyVoiceState:{kind:g._Q.Kind.Loaded,vBarsCount:i}})))}})).catch((e=>{this._logger.error("applyVoice error",e),this._state.set(H(q({},o),{selectedVoiceId:l.YP,applyVoiceState:{kind:g._Q.Kind.Error}}))})))}get state(){return this._state.view()}[Symbol.dispose](){this._subs.dispose()}}var Y=i(96333),X=i(2099),$=i(57899),J=i(704),ee=i(81600),te=i(74170),ie=i(32073),oe=i(2187),se=i(13566),re=Object.defineProperty,ne=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ue=(e,t,i)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var pe,ge;(ge=pe||(pe={})).Id=w.k,ge.create=e=>{const t=b.C8.Logging.getLogger(ge.Id),i=e.experimentationBridge.isAssigned(te.AIEditorParaphraserAllUnderlines),{isPanelOpen:o}=e.initNavigation(ge.Id,i?X.r.Regular:X.r.SingleThread),l=e.decorationService.createDecorationFactory(ge.Id),u=new W({agenticService:he({agentGenericService:e.agentGenericService,pushedContentService:e.pushedContentService}),fileUploadService:e.fileUploadService,capiSession:e.capiSession,decorationService:e.decorationService,isPanelOpen:o,editor:e.editor,trackingServiceProvider:e.trackingServiceProvider,textInfo:e.sessionChecksState.textInfo,featureFlags:{aiChat:e.experimentationBridge.isAssigned(te.HumanizerAgentAIChat)}}),m=ee.pS.create({agentId:ge.Id,pushedContentService:e.pushedContentService,vbarFeedbackService:e.vbarFeedbackService,trackingServiceProvider:e.trackingServiceProvider,uphookHubClient:e.uphookHubClient,decorationsFactory:l,decorationService:e.decorationService,isActive:o,getDecorationFactory:J.p,experimentationBridge:e.experimentationBridge,userService:e.userService,itemsFilter:(0,L.Ox)(u.state),vbarRenderOverrides:{getCardIcon:()=>({icon:se.i}),getCardTitle:L.yV,getVBarProps:(e,t)=>((e,t)=>ne(e,ae(t)))(((e,t)=>{for(var i in t||(t={}))de.call(t,i)&&ue(e,i,t[i]);if(ce)for(var i of ce(t))le.call(t,i)&&ue(e,i,t[i]);return e})({},e),{primaryText:(0,L.yV)(t)})},highlightRenderOverrides:void 0,trustedRewrite:d.W8,overlapsResolver:void 0}),S=e.capiSession.events.pipe((0,r.h)(I.hX.is("session_started")),(0,c.b)((()=>t.debug("WebSocket session started")))),V=new h.w.Keeper;V.push(S.pipe((0,n.w)((()=>o.pipe((0,r.h)((e=>{const t=u.state.get();return e&&t.kind!==g.ZM.Kind.Loading&&t.kind!==g.ZM.Kind.Loaded})),(0,a.b)(100),(0,c.b)((()=>t.debug("Panel opened, loading voices"))),(0,n.w)((()=>(0,s.D)(u.getVoices()()))))))).subscribe({error:e=>t.error("Error loading voices",e)}));const _=p.h.create(!1),k=new ie.w0;return k.add(e.capiSession.events.pipe(r.h(I.hX.is("session_started")),y.q(1),v.U((e=>e.allowedFeatures.includes("HUMANIZER")))).subscribe(oe.wW(_))),{agent:{id:ge.Id,decorations:$.dX.Collection.create(ge.Id,{pushedContent:m}),viewModel:u,dispose:()=>{u[Symbol.dispose](),V.dispose(),k.unsubscribe()}},isAvailable:_}};const he=e=>{const{agentGenericService:t,pushedContentService:i}=e,o=b.C8.Logging.getLogger("createHumanizerAgenticService"),s=new Map,r=i.getCollection(L.hA),n=()=>Y.$.values(r.get()),a=r.view((()=>n()));return{getVoices:()=>(0,d.zG)(t.request({agentId:pe.Id,commandId:"start",payload:""}),V.Vn((e=>(o.error("Error starting session",e),e))),V.tS((e=>(0,d.zG)(V.Uo(g.OB.decode(e.payload)),V.Vn((e=>(o.error("Error decoding Start Response",e),e))),V.UI((e=>(o.info("Successfully decoded Start Response",e),e))))))),applyVoice:e=>{const i=s.get(e);if(i)return o.debug("Request for voiceId already in progress, returning existing promise",{voiceId:e}),i;const r=t.requestWithStreaming({agentId:pe.Id,commandId:"triggerMode",payload:JSON.stringify({modeId:e})})().then((e=>(0,d.zG)(e,k.pF((e=>{throw e}))))).then((t=>new Promise((i=>{t.subscribe((t=>{(0,d.zG)(t,k.g_((e=>{o.error("Error applying voice:",e),i(!1)}),(t=>{o.debug("Received voice application response",t),"final"===t.kind&&(o.info("Successfully applied voice",{voiceId:e}),i(!0))})))}))})))).catch((e=>(o.error("Error applying voice:",e),!1))).finally((()=>{s.delete(e),o.debug("Cleaned up request for voiceId",{voiceId:e})}));return s.set(e,r),o.debug("Started new request for voiceId",{voiceId:e}),r},clearVbars:()=>{o.debug("Clearing the Humanizer VBars"),i.clear(L.hA)},getCurrentVBars:n,getCurrentVBarsForVoice:e=>(0,L.Nf)(e,n()),currentVBars:a}};var ve=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),me=e=>{throw TypeError(e)};const Se=e=>{return t=void 0,i=[e],p=function*({bus:e,document:t,agentGenericService:i,pushedContentService:p,capiCheckingState:h,capiEvents:v,fileUploadService:m,trackingServiceProvider:S,experimentation:V,navigation:_}){var y=[];try{const C=b.C8.Logging.getLogger("Humanizer.DocumentIntegrationActivate"),P=((e,t,i)=>{var o;return null!=t?("object"!=typeof t&&"function"!=typeof t&&me("Object expected"),i&&(o=t[ve("asyncDispose")]),void 0===o&&(o=t[ve("dispose")]),"function"!=typeof o&&me("Object not disposable"),e.push([i,o,t])):i&&e.push([i]),t})(y,new DisposableStack),w=P.use(e.state.agentState.create(t.id,{kind:g.ZM.Kind.Initial})),A=P.use(e.state.capiSessionId.create(t.id,null)),x=P.use(e.state.textLength.create(t.id,0)),L=P.adopt(new W({agenticService:he({agentGenericService:i,pushedContentService:p}),fileUploadService:m,capiSession:{events:v},decorationService:{setFocusMode:d.Q1,focusModeDecorationType:o.of(l.YP),removeAgentDecorations:d.Q1},isPanelOpen:_.isPanelOpen,editor:{changes:t.textChanges,getContents:()=>t.getText()},textInfo:h.textInfo.view((0,d.ls)(l.ij,l.UI((e=>({charsCount:e.charCount}))))),trackingServiceProvider:S,featureFlags:{aiChat:V.isAssigned(te.HumanizerAgentAIChat)}}),(e=>e[Symbol.dispose]()));P.adopt(L.state.subscribe((e=>{w.set(e)})),(e=>e.unsubscribe()));const M=v.pipe((0,r.h)(I.hX.is("session_started")));return P.adopt(M.subscribe((e=>A.set(e.sessionUuid))),(e=>e.unsubscribe())),P.adopt(L.context.textLength.subscribe((e=>x.set(e||0))),(e=>e.unsubscribe())),P.adopt(e.events.trackingEvent.view(t.id).subscribe((e=>L.context.tracking.trackEvent(e.event,e.detail))),(e=>e.unsubscribe())),P.adopt(e.events.panelUIAction.view(t.id).subscribe((e=>{switch(e.kind){case"applyVoiceAction":L.applyVoice(e.voiceId,e.sourceAction);break;case"saveCustomVoiceAction":L.saveCustomVoice(e.voiceName,e.content,e.description);break;case"openCustomVoiceAction":L.openCustomVoice();break;case"removeCustomVoiceAction":L.removeCustomVoice(e.voiceName);break;case"backToLoadedStateAction":L.backToLoadedState();break;case"reloadAction":L.reload();break;default:(0,u.L0)(e)}})),(e=>e.unsubscribe())),P.adopt(M.pipe((0,n.w)((()=>_.isPanelOpen.pipe((0,r.h)((e=>{const t=w.get();return e&&t.kind!==g.ZM.Kind.Loading&&t.kind!==g.ZM.Kind.Loaded})),(0,a.b)(100),(0,c.b)((()=>C.debug("Panel opened, loading voices"))),(0,n.w)((()=>(0,s.D)(L.getVoices()()))))))).subscribe({error:e=>C.error("Error loading voices",e)}),(e=>e.unsubscribe())),P.move()}catch(e){var k=e,f=!0}finally{((e,t,i)=>{var o="function"==typeof SuppressedError?SuppressedError:function(e,t,i,o){return(o=Error(i)).name="SuppressedError",o.error=e,o.suppressed=t,o},s=e=>t=i?new o(e,t,"An error was suppressed during disposal"):(i=!0,e),r=o=>{for(;o=e.pop();)try{var n=o[1]&&o[1].call(o[2]);if(o[0])return Promise.resolve(n).then(r,(e=>(s(e),r())))}catch(e){s(e)}if(i)throw t};r()})(y,k,f)}},new Promise(((e,o)=>{var s=e=>{try{n(p.next(e))}catch(e){o(e)}},r=e=>{try{n(p.throw(e))}catch(e){o(e)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,r);n((p=p.apply(t,i)).next())}));var t,i,p}},20498:(e,t,i)=>{i.d(t,{R:()=>o,k:()=>s});const o=8,s=1e3},32876:(e,t,i)=>{i.d(t,{OB:()=>o,ZM:()=>s,_Q:()=>a});var o,s,r,n,a,c=i(11633),d=i(43351),l=i(12518),u=i(59833),p=i(90023),g=i(58303),h=i(21147),v=i(9141);(e=>{const t=c.jV([c.dt({id:c.Z_,label:c.Z_,sourceAction:c.Z_,trackingSourceAction:c.Z_,isCustom:c.O7}),c.r$({description:c.Z_,imgSrc:c.Z_})]),i=c.dt({modes:c.IX(t)});e.decode=e=>(0,p.zG)(l.Y3((()=>JSON.parse(e)),u.of),l.tS(i.decode),l.Vn(d.Rn),l.Vn((e=>new Error(`Failed to parse voices:\n${e.join("\n")}`))),l.UI((e=>e.modes)))})(o||(o={})),r=s||(s={}),(n=r.Kind||(r.Kind={})).Initial="initial",n.Loading="loading",n.Loaded="loaded",n.Empty="empty",n.Error="error",n.CreateCustomVoice="createCustomVoice",n.CreateCustomVoiceProcessing="createCustomVoiceProcessing",(e=>{e.optionalEqById=g.Eh((0,h.n_)({sourceAction:v.Eq}))})(r.VoiceId||(r.VoiceId={})),(e=>{(e=>{e.Idle="idle",e.Loading="loading",e.Loaded="loaded",e.Error="error",e.Empty="empty"})(e.Kind||(e.Kind={})),e.isLoadingAfterReload=e=>"loading"===e.kind&&e.isAfterReload})(a||(a={}))},12496:(e,t,i)=>{i.d(t,{O:()=>s,s:()=>o});var o=(e=>(e.ComponentImpression="componentImpression",e.ComponentClicked="componentClicked",e))(o||{}),s=(e=>(e.LoadingView="agentPanel/humanizer/loadingView",e.LoadedView="agentPanel/humanizer/loadedView",e.ReloadButton="agentPanel/humanizer/reloadButton",e.ModeButton="agentPanel/humanizer/modeButton",e.PushedContentReceived="agentPanel/humanizer/pushedContentReceived",e.ModeCompleted="agentPanel/humanizer/modeCompleted",e.ModeNoSuggestions="agentPanel/humanizer/modeNoSuggestions",e.ErrorView="agentPanel/humanizer/errorView",e.NotificationPanel="agentPanel/humanizer/notificationPanel",e.CustomVoiceButton="agentPanel/humanizer/customVoiceButton",e.EditingView="agentPanel/humanizer/editingView",e.SaveButton="agentPanel/humanizer/saveButton",e.SavingView="agentPanel/humanizer/savingView",e.RemoveButton="agentPanel/humanizer/removeButton",e))(s||{})},22414:(e,t,i)=>{i.d(t,{Nf:()=>c,Ox:()=>d,hA:()=>a,yV:()=>l});var o=i(5749),s=i(32876),r=i(90023),n=i(58303);function a(e){return o.z.isVBar(e)&&o.h.isWithRewrite(e)&&"humanizer"===e.surface.sourceAgent}const c=(e,t)=>t.filter((t=>o.h.isWithRewrite(t)&&t.surface.sourceAction===e.sourceAction)),d=e=>e.view((e=>t=>!(!a(t)||e.kind!==s.ZM.Kind.Loaded)&&(0,r.zG)(e.selectedVoiceId,n.UI((t=>e.voices.find((e=>e.id===t)))),n.UI((e=>null==e?void 0:e.sourceAction)),n.UI((e=>e===t.surface.sourceAction)),n.fS((()=>!1))))),l=e=>{var t;return o.h.isWithRewrite(e)?null!=(t=e.surface.explanation)?t:e.surface.title:void 0}}}]);