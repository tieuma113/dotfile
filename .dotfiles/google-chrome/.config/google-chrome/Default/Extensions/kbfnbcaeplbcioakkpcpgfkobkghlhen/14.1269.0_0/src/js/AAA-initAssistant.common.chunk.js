(self.webpackChunk=self.webpackChunk||[]).push([[9513],{17993:(e,t,n)=>{n.d(t,{I:()=>i,a:()=>s});const i="aiDetector",s="plagiarismChecker"},89449:(e,t,n)=>{n.d(t,{w:()=>m});var i=n(90023),s=n(35547),r=n(20154),o=n(25077),a=n(90572),l=n(59179),c=n(31603),u=n(58303),d=n(67177),h=n(46189),g=n(68822),p=n(40594);class m{constructor(e){this._checkingService=e,this._handlers=[],this._log=p.Y.create("AgentsCapiClient"),this._subscription=this._checkingService.pipe(a.h(u.pC),l.U((e=>e.value.capiMessages)),c.J(),a.h((e=>(0,s.rE)(e)||(0,r.eJ)(e)||(0,o.Xl)(e)||(0,o.Dl)(e)||(0,o.oy)(e)||(0,o.ps)(e))),l.U((e=>e))).subscribe((e=>{this._handlers.forEach((t=>(this._log.debug("Handling CAPI Message",e),t(e),h._.Result.STOP_HANDLING)))}))}enqueueExternalCommand(e){this._log.debug("Enqueueing External Command",e);const t=(0,i.zG)(this._checkingService.get(),u.g_((()=>""),(e=>e.sessionUuid||""))),{action:n,...s}=e({sessionId:t,id:1,currentRevision:0,nextRevision:()=>1});return(0,i.zG)(this._checkingService.get(),d.Yo((()=>new g.YG("Checking service is not available"))),d.tS((e=>e.sendMessage(n,s,!0))))}registerExternalMessageHandler(e){this._handlers.includes(e)||this._handlers.push(e)}unregisterExternalMessageHandler(e){this._handlers=this._handlers.filter((t=>t!==e))}dispose(){this._subscription.unsubscribe(),this._handlers=[]}}},47665:(e,t,n)=>{n.d(t,{X:()=>s});var i=n(8520);const s=e=>t=>{var n;return{...e(t),...null!==(n=(0,i.A)(t.domain))&&void 0!==n?n:{}}}},8520:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(90189),s=n(4511),r=n(24196),o=n(40795),a=n(19150);const l=e=>(e=>(0,r.w4)((0,i.OB)().experimentClient)&&((0,o.c)((0,i.OB)().experimentClient).length>0||(0,s.l)((0,i.OB)().experimentClient,e)))(e)?{agent_generic:{version:a.V},assistant_file_upload:{version:a.C}}:void 0},40795:(e,t,n)=>{n.d(t,{c:()=>d,v:()=>u});var i=n(46271),s=n(15724),r=n(42849),o=n(307),a=n(97531),l=n(46924),c=n(24196);const u={[o.f.id]:"PARAPHRASER",[l.f.id]:"READER_REACTIONS",[r.f.id]:"HUMANIZER",[s.f.id]:"EXPERT_PANEL",[i.f.id]:"AI_DETECTOR_AGENT",[a.f.id]:"PLAGIARISM_AGENT"};function d(e){return(0,c.w4)(e)?[(0,c.z0)(e)?[o.f]:[],(0,c.R7)(e)?[l.f]:[],(0,c.Ot)(e)?[r.f]:[],(0,c.vl)(e)?[s.f]:[],(0,c.rv)(e)?[i.f]:[],(0,c.fg)(e)?[a.f]:[]].flat():[]}},19150:(e,t,n)=>{n.d(t,{C:()=>o,V:()=>r});var i=n(41108),s=n(44267);const r=i.i,o=s.i},19067:(e,t,n)=>{n.d(t,{u:()=>s});var i=n(90189);class s{static loadContentScriptIntegrationSingleton(e){return null===this._contentScriptInstance&&(this._contentScriptInstance=Promise.all([n.e(308).then(n.bind(n,23541)),this._loadMessageBusClient(e.tabId,e.experimentClient)]).then((([{AgentsContentScriptIntegration:t},n])=>new t({tabId:e.tabId,messageBusClient:n})))),this._contentScriptInstance}static loadDocumentGroupIntegrationSingleton(e){return null===this._documentGroupInstance&&(this._documentGroupInstance=Promise.all([Promise.all([n.e(5260),n.e(2168),n.e(309),n.e(9573),n.e(6974),n.e(9153)]).then(n.bind(n,49722)),this._loadMessageBusClient(e.tabId,e.experimentClient)]).then((([{AgentsDocumentGroupIntegration:t},n])=>new t({...e,messageBusClient:n})))),this._documentGroupInstance}static acquireReferenceFromDocument(e){this._documentReferences.add(e)}static releaseReferenceFromDocument(e){var t;this._documentReferences.delete(e),0===this._documentReferences.size&&(null===(t=this._documentGroupInstance)||void 0===t||t.then((e=>e[Symbol.asyncDispose]())),this._documentGroupInstance=null)}static loadPageGroupIntegrationSingleton(e){return null===this._pageGroupInstance&&(this._pageGroupInstance=Promise.all([Promise.all([n.e(5260),n.e(9573),n.e(128)]).then(n.bind(n,39146)),this._loadMessageBusClient(e.tabId,e.experimentClient)]).then((([{AgentsPageGroupIntegration:t},n])=>new t({...e,messageBusClient:n})))),this._pageGroupInstance}static _loadMessageBusClient(e,t){return null===this._contentScriptBusClient&&(this._contentScriptBusClient=Promise.all([n.e(5260),n.e(8729),n.e(4943)]).then(n.bind(n,53128)).then((({DefaultAgentsMessageBusClient:n})=>new n({messageApi:(0,i.OB)().browserApi.message,script:"cs",tabId:e,experimentClient:t})))),this._contentScriptBusClient}static dispose(){const e=[];return null!==this._contentScriptInstance&&(e.push(this._contentScriptInstance.then((e=>e[Symbol.dispose]()))),this._contentScriptInstance=null),null!==this._documentGroupInstance&&(e.push(this._documentGroupInstance.then((e=>e[Symbol.asyncDispose]()))),this._documentGroupInstance=null),null!==this._pageGroupInstance&&(e.push(this._pageGroupInstance.then((e=>e[Symbol.asyncDispose]()))),this._pageGroupInstance=null),null!==this._contentScriptBusClient&&(e.push(this._contentScriptBusClient.then((e=>e[Symbol.dispose]()))),this._contentScriptBusClient=null),this._documentReferences.clear(),Promise.all(e).then((()=>{}))}}s._contentScriptBusClient=null,s._contentScriptInstance=null,s._documentGroupInstance=null,s._documentReferences=new Set,s._pageGroupInstance=null},95957:(e,t,n)=>{n.d(t,{m:()=>s});var i=n(74822);const s=new class{constructor(){this._messageSubject=new i.x,this.messages=this._messageSubject}forwardMessage(e){this._messageSubject.next(e)}}},53653:(e,t,n)=>{n.d(t,{Q:()=>l,f:()=>c});var i=n(35743),s=n(7621);if(5526!=n.j)var r=n(46649);var o=n(30498);function a(){document.body.dataset.grAaaNotchConnectionId||(document.body.dataset.grAaaNotchConnectionId=`${Date.now()}-${Math.random()}`);const e=document.body.dataset.grAaaNotchConnectionId;return{toServer:`gr-fieldIntegration-to-aaaNotch-to-server-${e}`,toClient:`gr-fieldIntegration-to-aaaNotch-to-client-${e}`}}const l=e=>{const t=a();return new o.S((0,s.NH)(new i.E(self.document,t.toServer,t.toClient)),{setTextFieldContent:(t,n)=>{e.setTextFieldContent(n)},setSelectedTextFromIntegration:(t,n)=>{e.setSelectedTextFromIntegration(n)}})},c=()=>{const e=a();return new r.X(new i.E(self.document,e.toClient,e.toServer))}},68488:(e,t,n)=>{n.r(t),n.d(t,{initAssistant:()=>Et});var i=n(13391),s=n(28357),r=n(81498),o=n(58303),a=n(89449);var l=n(19067);var c=n(90572),u=n(36807),d=n(43198),h=n(39963),g=n(40594),p=n(71401),m=n(97231),f=n(19150),v=n(15506),_=n(73985),b=n(27079),S=n(27982);var y=n(12518),C=n(45676);const w=e=>C.hX.is("disconnect")(e)&&y.nM(e.reconnectResult);class x{constructor(e){this._params=e,this._logger=g.Y.create("CheckingServiceProvider"),this._felog=(0,h.Tb)()}get sessionUuid(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.sessionUuid}getCheckingService(){var e,t,n;if(!this._checkingService)try{const i=this._params.sidePanelState.get(),s=function(e,t,n,i,s){const r=b._A.create(),o=[p.zV.reconnect],a=i.isGateEnabled(S.K.RecommendedActionsInGoChat),l={text_actions:{version:v.rP},...a&&{agent_generic:{version:f.V}}},c={};return"ready"!==n.stage||n.trackingEnabled||(c.firefoxOptoutTracking=!0),new _.R(r,e,s,m.Rd(),t,void 0,o,l,void 0,void 0,"general",void 0,c)}(i.dialect,i.dynamicConfig,i.extensionFSM,this._params.experimentClient,this._params.domain);null===(e=this._disconnectSub)||void 0===e||e.unsubscribe(),this._disconnectSub=s.capiEvents.pipe((0,c.h)(w)).subscribe((e=>{const t=e.reason.error;t.code===d.w.WsCodes.TOO_BIG&&(this._logger.info("CAPI disconnected because of data too big, reconnecting"),s.reconnect()),this._logger.error("CAPI disconnected",t.message),this._felog.sendFemetricsRate("checkingServiceDisconnected",{reason:t.message.substring(0,40),errorCode:t.code})})),s.setDelta(new u.i),this._checkingService=s,null===(n=(t=this._params).onCheckingServiceCreated)||void 0===n||n.call(t,s)}catch(e){return this._logger.error("Failed to create checking service",e),this._felog.sendFemetricsRate("checkingServiceFailedToCreate"),null}return this._checkingService}dispose(){var e,t;null===(e=this._checkingService)||void 0===e||e.dispose(),this._checkingService=void 0,null===(t=this._disconnectSub)||void 0===t||t.unsubscribe(),this._disconnectSub=void 0}}var E,k=n(53981),T=n(90189);!function(e){e.toClient="cs-to-side-panel-to-client",e.toServer="cs-to-side-panel-to-server"}(E||(E={}));var A=n(46649),R=n(58777);class I extends A.X{constructor(e){super(new R.d(e,E.toClient,E.toServer))}}var O,F=n(95957);!function(e){e.toClient="side-panel-to-cs-to-client",e.toServer="side-panel-to-cs-to-server"}(O||(O={}));Symbol("tabId");var D=n(30498),P=n(11818),M=n(7621);class N{constructor(e,t){this._extractorService=e,this._textFieldContent=t,this.publicApi={...(0,P.Z)({getContext:()=>this._extractorService.getContext("default"),ping:()=>!0,forwardCAPIMessage:e=>{F.m.forwardMessage(e)},getTextFieldContent:()=>this._textFieldContent.get()})}}}var B=n(90595),U=n(16381),L=n(84195),G=n(15380),H=n(43912),j=n(55830),K=n(31715),V=n(15362),z=n(19724),$=n(86130),W=n(40224),q=(n(89895),n(954)),Q=n(20161),Y=n(20680),J=n(84714),X=n(93440),Z=n(50750),ee=n(2187),te=n(28898),ne=n(92054),ie=n(82914),se=n(91957);class re{constructor(){this._felog=(0,h.Tb)()}assistantNotchInitialized(e){this._felog.sendFemetricsRate("assistantNotchInitialized",{domain:e})}assistantNotchShown(e){this._felog.sendFemetricsRate("assistantNotchShown",{domain:e})}assistantNotchCollapsed(e){this._felog.sendFemetricsRate("assistantNotchCollapsed",{domain:e})}assistantNotchClicked(){this._felog.alwaysAvailableAssistant.openSidePanel("always_on_notch","clicked")}}class oe{assistantNotchShown(e,t){ie.J.alwaysOnAssistantNotchPeek(t,e)}assistantNotchCollapsed(e){ie.J.alwaysOnAssistantNotchPreviewCollapsed(e)}assistantNotchDeactivatedTextChecking(e,t,n){ie.J.alwaysOnAssistantNotchDeactivatedTextChecking(t,e,n)}assistantNotchOnboardingPeek(){ie.J.alwaysOnAssistantOnboardingNotchPeek()}assistantNotchEnabledChanged(e,t,n){ie.J.alwaysOnAssistantNotchEnabledChanged(e,t,n)}}class ae{constructor(){this._feMetricsTrackingService=new re,this._gnarTrackingService=new oe,this._commonLabels={assistantSessionId:"",domain:""}}assistantNotchInitialized(){const e=(0,se.Cg)();this._feMetricsTrackingService.assistantNotchInitialized(e)}assistantNotchShown(){const e=(0,ne.Z)(),t=(0,se.Cg)();this._commonLabels={assistantSessionId:e,domain:t},this._feMetricsTrackingService.assistantNotchShown(t),this._gnarTrackingService.assistantNotchShown(e,t)}assistantNotchEnabledChanged(e,t){this._gnarTrackingService.assistantNotchEnabledChanged(this._commonLabels.assistantSessionId,e,t)}assistantNotchPeekingCollapsed(){this._feMetricsTrackingService.assistantNotchCollapsed(this._commonLabels.domain),this._gnarTrackingService.assistantNotchCollapsed(this._commonLabels.assistantSessionId)}assistantNotchClicked(){return this._feMetricsTrackingService.assistantNotchClicked(),this._commonLabels.assistantSessionId}assistantNotchDeactivatedTextChecking(e){this._gnarTrackingService.assistantNotchDeactivatedTextChecking(this._commonLabels.assistantSessionId,this._commonLabels.domain,e)}assistantNotchKeyboardShortcutSet(){ie.J.keyboardShortcutShortcutKeysChanged("openAssistant")}assistantNotchOnboardingPeek(){this._gnarTrackingService.assistantNotchOnboardingPeek()}dispose(){}}var le=n(59179),ce=n(8867),ue=n(17869),de=n(63532);const he="assistantOnboarding_";class ge{constructor(){this.logger=g.Y.create("AssistantOnboardingStorage"),this.changes$=new ce.y((e=>{const t=(0,te.O)().browserApi.preferences.changes.subscribe({next:t=>e.next(t),error:t=>e.error(t),complete:()=>e.complete()});return()=>t.unsubscribe()})).pipe((0,c.h)((e=>Object.keys(e).some((e=>e.startsWith(he))))),(0,ue.z)((e=>{const t=Object.entries(e).filter((([e])=>e.startsWith(he))).map((([e,t])=>({key:e.replace(he,""),newValue:t.newValue,oldValue:t.oldValue})));return(0,Z.D)(t)})),(0,de.b)((e=>this.logger.debug("Onboarding storage change emitted",{key:e.key,newValue:e.newValue,oldValue:e.oldValue}))))}_prefixKey(e){return`assistantOnboarding_${e}`}async get(e){const t=this._prefixKey(e),n=(await(0,te.O)().browserApi.preferences.get(t))[t],i=null==n?void 0:n;return this.logger.debug("Storage get operation",{key:e,value:i}),i}async set(e){this.logger.debug("Storage set operation",{data:e});const t={};for(const[n,i]of Object.entries(e))t[this._prefixKey(n)]=i;return(0,te.O)().browserApi.preferences.set(t)}async remove(e){const t=this._prefixKey(e);return(0,te.O)().browserApi.preferences.remove(t)}async getAll(){const e=await(0,te.O)().browserApi.preferences.getAll(),t={};for(const[n,i]of Object.entries(e))if(n.startsWith(he)){t[n.slice(he.length)]=i}return t}async clear(){const e=await(0,te.O)().browserApi.preferences.getAll(),t=Object.keys(e).filter((e=>e.startsWith(he)));if(t.length>0)return(0,te.O)().browserApi.preferences.remove(t)}async markDismissed(e){return this.logger.debug("Marking as dismissed",{key:e}),this.set({[`${e}_dismissed`]:!0,[`${e}_dismissedAt`]:Date.now()})}async isDismissed(e){var t;return null!==(t=await this.get(`${e}_dismissed`))&&void 0!==t&&t}async getDismissedAt(e){return await this.get(`${e}_dismissedAt`)}async markCompleted(e){return this.logger.debug("Marking as completed",{key:e}),this.set({[`${e}_completed`]:!0,[`${e}_completedAt`]:Date.now()})}async isCompleted(e){var t;return null!==(t=await this.get(`${e}_completed`))&&void 0!==t&&t}async getCompletedAt(e){return await this.get(`${e}_completedAt`)}async incrementShowCount(e){var t;const n=await this.getShowCount(e),i=n+1;this.logger.debug("Incrementing show count",{key:e,currentCount:n,newCount:i});const s=null!==(t=await this.get(`${e}_showTimestamps`))&&void 0!==t?t:[];return s.push(Date.now()),await this.set({[`${e}_showCount`]:i,[`${e}_showTimestamps`]:s,[`${e}_lastShownAt`]:Date.now()}),i}async getShowCount(e){var t;return null!==(t=await this.get(`${e}_showCount`))&&void 0!==t?t:0}async getShowTimestamps(e){var t;return null!==(t=await this.get(`${e}_showTimestamps`))&&void 0!==t?t:[]}async getLastShownAt(e){return await this.get(`${e}_lastShownAt`)}async isUnderShowLimit(e,t){return await this.getShowCount(e)<t}async clearByKeyPrefix(e){const t=await(0,te.O)().browserApi.preferences.getAll(),n=this._prefixKey(e),i=Object.keys(t).filter((e=>e.startsWith(n)));if(i.length>0)return(0,te.O)().browserApi.preferences.remove(i)}}class pe{constructor(e){this.logger=g.Y.create("AssistantUsageTracker"),this.assistantOnboardingStorage=new ge,this.scope=e,this.dataChanged$=this.assistantOnboardingStorage.changes$.pipe((0,c.h)((e=>e.key.startsWith(this.getScopedKey(pe.ASSISTANT_SHOWN_KEY)))),(0,le.U)((()=>{})))}getScopedKey(e){return this.scope?`${this.scope}:${e}`:e}async recordAssistantShown(){try{await this.assistantOnboardingStorage.incrementShowCount(this.getScopedKey(pe.ASSISTANT_SHOWN_KEY))}catch(e){throw this.logger.error("Failed to record assistant shown",{error:e.message}),e}}async getFirstShownTimestamp(){try{const e=await this.assistantOnboardingStorage.getShowTimestamps(this.getScopedKey(pe.ASSISTANT_SHOWN_KEY));return e.length>0?e[0]:null}catch(e){return this.logger.error("Failed to get assistant first shown timestamp",{error:e.message}),null}}async getDaysSinceFirstShown(){const e=await this.getFirstShownTimestamp();return null===e?null:(Date.now()-e)/864e5}async haveDaysSinceFirstShownElapsed(e){try{const t=await this.getDaysSinceFirstShown();if(null===t)return{haveDaysElapsed:!1,daysElapsed:null,daysRemaining:null};return{haveDaysElapsed:t>=e,daysElapsed:t,daysRemaining:e-t}}catch(e){return this.logger.error("Failed to check days since first shown elapsed",{error:e.message}),{haveDaysElapsed:!1,daysElapsed:null,daysRemaining:null}}}async getShowCount(){try{return await this.assistantOnboardingStorage.getShowCount(this.getScopedKey(pe.ASSISTANT_SHOWN_KEY))}catch(e){return this.logger.error("Failed to get assistant show count",{error:e.message}),0}}async getLastShownAt(){try{return await this.assistantOnboardingStorage.getLastShownAt(this.getScopedKey(pe.ASSISTANT_SHOWN_KEY))}catch(e){return void this.logger.error("Failed to get assistant last shown timestamp",{error:e.message})}}async hasBeenShown(){return await this.getShowCount()>0}async reset(){this.logger.warn("reset() is only available in dev builds")}async setFakeFirstShown(e){this.logger.warn("setFakeFirstShown() is only available in dev builds")}}pe.ASSISTANT_SHOWN_KEY="assistantShown";class me{constructor(){this._subs=[],this._logger=g.Y.create("HeroWaveAnimationEligibility"),this._trackingService=new ae,this._shouldShowHeroWaveAnimation=i.h.create(!1),this.shouldShowHeroWaveAnimation$=this._shouldShowHeroWaveAnimation,this._isGateEnabled()&&(this._assistantUsageTracker=new pe(me.ASSISTANT_USAGE_TRACKER_SCOPE),this._subs.push(this._assistantUsageTracker.dataChanged$.pipe((0,q.O)(void 0),(0,Q.w)((()=>this.delayedShouldShowHeroWaveAnimation()))).subscribe(ee.wW(this._shouldShowHeroWaveAnimation))))}_isGateEnabled(){var e,t;return null!==(t=null===(e=(0,te.O)().experimentClient)||void 0===e?void 0:e.isGateEnabled(B.K.HeroWaveAnimation))&&void 0!==t&&t}delayedShouldShowHeroWaveAnimation(){return(0,Y.z)((0,J.of)(!1),(0,X.H)(1500).pipe((0,Q.w)((()=>(0,Z.D)(this.shouldShowHeroWaveAnimation())))))}async shouldShowHeroWaveAnimation(){if(!this._isGateEnabled())return!1;if(!this._assistantUsageTracker)return!1;try{return!await this._assistantUsageTracker.hasBeenShown()}catch(e){throw this._logger.error("Failed to check if the hero wave animation should be shown",{error:e.message}),e}}async recordAssistantShown(){if(this._isGateEnabled()&&this._assistantUsageTracker)try{await this._assistantUsageTracker.recordAssistantShown()}catch(e){throw this._logger.error("Failed to record the assistant as shown",{error:e.message}),e}}async reset(){this._logger.warn("reset() is only available in dev builds")}recordHeroWaveAnimationShown(){try{this._trackingService.assistantNotchOnboardingPeek()}catch(e){throw this._logger.error("Failed to record hero wave animation shown",{error:e.message}),e}}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}}me.ASSISTANT_USAGE_TRACKER_SCOPE="heroWaveAnimation";var fe=n(36526),ve=n(49652);var _e=n(61840);class be{extractContext(e){void 0===this._domMapper&&(this._domMapper=new _e.lE(e.document));const t=this._domMapper.serialize();return{extractorType:"dom-mapper",kind:"default",origin:e.document.location.origin,url:e.document.location.href,title:e.document.title,root:{id:"document",tag:"document",children:t}}}}function Se(e){return e.nodeType===Node.ELEMENT_NODE}const ye=["SCRIPT","STYLE","NOSCRIPT"],Ce=["style","role","title"];function we(e){return!ye.includes(e.nodeName)}function xe(e){return function(e){return e instanceof HTMLElement}(e)&&(e.checkVisibility()||function(e){return"contents"===self.getComputedStyle(e).display}(e))}function Ee(e={}){const{tag:t="div",role:n=null,text:i,title:s=null,attributes:r,children:o=[]}=e,a={tag:t,role:n,text:i,title:s,attributes:r,children:o},l=Object.entries(a).filter((([,e])=>Boolean(e)));return Object.fromEntries(l)}const ke=new Set(["a","article","aside","button","details","dialog","figcaption","figure","footer","form","header","label","main","mark","nav","section","summary","time"]);function Te(e,t={includeAttributes:!1}){const{includeAttributes:n}=t;if(!we(e)||"BODY"!==e.nodeName&&!xe(e))return null;let i=Ee({tag:e.nodeName.toLocaleLowerCase(),role:Se(e)?e.getAttribute("role"):null,title:Se(e)?e.getAttribute("title"):null});if(n&&Se(e)){const t=function(e){return Array.from(e.attributes).filter((e=>!Ce.includes(e.name)))}(e),n={};t.forEach((e=>{n[e.name]=e.value})),i={...i,attributes:n}}"TEXTAREA"===e.nodeName&&(i={...i,text:e.value});const{children:s,textCount:r,elementCount:o}=function(e,t){var n,i;let s=0,r=0;const o=[];for(const a of e.childNodes)if(a.nodeType===Node.TEXT_NODE)(null===(n=a.textContent)||void 0===n?void 0:n.trim())&&(o.push(Ee({tag:a.nodeName.toLocaleLowerCase(),text:null===(i=a.textContent)||void 0===i?void 0:i.trim()})),s+=1);else if(we(a)){const e=Te(a,t);e&&(o.push(e),r+=1)}return{children:o,textCount:s,elementCount:r}}(e,t),a=ke.has(i.tag),l="role"in i&&null!==i.role;return a||l||0!==r||1!==o?i.text||0!==s.length?{...i,children:s}:null:s[0]}class Ae{extractContext(e){const{logger:t=g.Y.create("assistant.context.extractor")}=e,n=function(e,t={}){const{includeAttributes:n=!1,logger:i}=t,s=performance.now(),r=Te(e,{includeAttributes:n}),o=performance.now()-s;null==i||i.debug("converted JSON representation",r);const a=JSON.stringify(r);return null==i||i.debug("converted DOM to JSON",{content:a,size:(new TextEncoder).encode(a).length,duration:o}),{content:r,isCompressed:!1}}(e.document.body,{logger:t});return{extractorType:"default",kind:"default",origin:e.document.location.origin,url:e.document.location.href,title:e.document.title,root:n.content}}}class Re{constructor(e){this._logger=g.Y.create("contextExtractorService"),this._textFieldContent=e.textFieldContent,this._document=e.document}getContext(e){let t="";this._textFieldContent&&(t=this._textFieldContent.get(),this._logger.debug(`Current text field text has ${t}`));const n=(null===(i=(0,T.OB)().experimentClient)||void 0===i?void 0:i.isGateEnabled(B.K.ContextExtractionDomMapper))?new be:new Ae;var i;this._logger.debug(`Extractor is instance of ${n.constructor.name}`);const s=n.extractContext({document:this._document});return this._logger.debug("Context extracted",s),{...s,textFieldContent:t}}}var Ie=n(62220);class Oe extends Ie.v{constructor(e,t){super(),this._contextService=e,this._selectedTextAtom=t,this._logger=g.Y.create("contextExtractorAdapter"),this._subscriptions=[],this._currentSelection="",this._contextId="undefined"!=typeof document?document.location.href:"default",this._logger.info("Created with contextId:",this._contextId),this._selectedTextAtom&&(this._logger.info("Subscribing to selectedTextAtom"),this._subscriptions.push(this._selectedTextAtom.subscribe((e=>{this._logger.info("selectedText changed:",e),this.setCurrentSelectedText(e)}))));const n=this.getContext(this._contextId);this._logger.info("Emitting initial available event"),this.emit("available",n)}setCurrentSelectedText(e){if(this._currentSelection===e)return;this._logger.info("Setting current selected text:",e),this._currentSelection=e;const t=this.getContext(this._contextId);this.emit("selectionChange",{context:t})}getContext(e){const t=this._contextService.getContext("default");return this._currentSelection?{...t,id:e,textSelection:this._currentSelection}:{...t,id:e}}getInitialContextId(){return this._contextId}getContextFull(e){this._logger.info("Getting full context for id:",e);const t={...this._contextService.getContext("default"),id:e,textSelection:this._currentSelection||void 0};return this._logger.debug("Full context extracted",{hasRoot:!!t.root,hasTextSelection:!!t.textSelection}),t}dispose(){this._logger.info("Disposing, cleaning up subscriptions"),this._subscriptions.forEach((e=>e.unsubscribe())),this._subscriptions.length=0}}var Fe=n(53653);function De(e,t,n){const s=i.h.create(void 0),r=i.h.create(void 0),o=function(e,t,n,i){const s=(0,T.OB)().experimentClient,r=(0,fe.s)(s),o=(e,t,n)=>!!n||!e&&(!r||(null==t||t)),a=n.view((e=>{var t,n,i;return null===(i=null===(n=null===(t=e.extensionSettings)||void 0===t?void 0:t.common.alwaysAvailableAssistantSettings)||void 0===n?void 0:n.showNotch)||void 0===i||i}));(0,T.OB)().browserApi.sessionStorage.get(["isSidePanelOpen","alwaysOnAssistant"]).then((({isSidePanelOpen:n,alwaysOnAssistant:s})=>{const r=!1!==n&&void 0!==n,l=a.get(),c=i.get();void 0===e.get()&&e.set(o(r,l,c)),void 0===t.get()&&t.set(null==s?void 0:s.notchPosition)}));const l=a.subscribe((t=>{(0,T.OB)().browserApi.sessionStorage.get(["isSidePanelOpen"]).then((({isSidePanelOpen:n})=>{const s=!1!==n&&void 0!==n,r=i.get();e.set(o(s,t,r))}))})),c=(0,T.OB)().browserApi.sessionStorage.onChange((n=>{var s;const r=!1!==n.isSidePanelOpen&&void 0!==n.isSidePanelOpen,l=a.get(),c=i.get();e.set(o(r,l,c)),t.set(null===(s=n.alwaysOnAssistant)||void 0===s?void 0:s.notchPosition)})),u=i.subscribe((t=>{(0,T.OB)().browserApi.sessionStorage.get(["isSidePanelOpen"]).then((({isSidePanelOpen:n})=>{const i=!1!==n&&void 0!==n,s=a.get();e.set(o(i,s,t))}))}));return{dispose:()=>{l.unsubscribe(),c(),u.unsubscribe()}}}(s,r,t,n),a=i.h.combine(s,r,((e,t)=>{if(e)return{notchPosition:t}})).subscribe(ee.wW(e));return{dispose:()=>{a.unsubscribe(),o.dispose()}}}var Pe,Me=n(90023),Ne=n(11633),Be=n(25693);!function(e){e.schema=Ne.r$({source:Ne.G0([Ne.i0("dom_trigger"),Ne.i0("superhuman_go_welcome_page")]),targetAgentId:Ne.Z_,openAgentProfile:Ne.O7})}(Pe||(Pe={}));const Ue=g.Y.create("initDomTriggers");function Le(e){return function(){if(!(0,T.OB)().experimentClient.isGateEnabled(S.K.SuperhumanGoDomTriggers))return Ue.debug("Superhuman Go DOM triggers are not enabled"),!1;const e=(0,Be.ge)(),t=!1,n=/^(\w+.)*grammarly\.com$/.test(e),i=/^(\w+.)*qagr\.io$/.test(e),s=/^(\w+.)*superhuman\.com$/.test(e),r=/^(\w+.)*qa-sh\.io$/.test(e),o=/^(\w+.)*pp-sh\.io$/.test(e);return t||n||i||s||r||o}()?function(e){const t=[Ge(e)],n=e=>{t.forEach((t=>{t(e)}))};return document.addEventListener("click",n),Ue.debug("Subscribed to document click events"),{dispose:()=>{document.removeEventListener("click",n),Ue.debug("Unsubscribed from document click events")}}}(e):{dispose:()=>{}}}function Ge(e){return t=>{var n,i;const s=t.target.closest("[data-superhuman-go-open]");if(null!==s){Ue.debug("Superhuman Go DOM trigger clicked");const r=function(e){const t=e.getAttribute("data-superhuman-go-open-meta");if(!t)return Ue.debug("no meta string found, returning empty meta"),{};try{const e=JSON.parse(t),n=Pe.schema.decode(e);return(0,Me.zG)(n,y.g_((t=>(Ue.warn("meta validation failed",{errors:t,parsedMeta:e}),{})),(e=>(Ue.debug("parsed and validated meta",e),e))))}catch(e){return Ue.warn("error parsing open superhuman trigger meta",e),{}}}(s),o=null!==(n=r.source)&&void 0!==n?n:"dom_trigger",a=r.targetAgentId,l=null!==(i=r.openAgentProfile)&&void 0!==i&&i;t.preventDefault(),e.openSidePanel(o,a,l)}}}var He=n(34819),je=n(44071),Ke=n(64271),Ve=n(36344),ze=n(4271),$e=n(56052);class We extends $e.U{constructor({kind:e,settings:t,handler:n}){super(e,t,n),this._initKeydownListener()}_initKeydownListener(){const e=(0,Be.Lu)()?(0,ze.CI)(document):null;this._subs.push(Ke.T((0,je.R)(document,"keydown",{capture:!0}),e?(0,je.R)(e,"keydown",{capture:!0}):Ve.E).subscribe((e=>{e.target instanceof HTMLElement&&e.target.closest('[data-grammarly-ignore-keyboard-events="true"]')||this._isShortcutMatch(e)&&this._handleShortcut(e)})))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}}class qe{constructor(){this.logger=g.Y.create("KeyboardShortcutBannerEligibility"),this.assistantOnboardingStorage=new ge,this.isGateEnabled()?this.eligibilityChanged$=this.assistantOnboardingStorage.changes$.pipe((0,c.h)((e=>e.key.startsWith(qe.BANNER_KEY)||e.key.startsWith(qe.SHORTCUT_USED_KEY)||e.key.startsWith(qe.SHORTCUT_CHANGED_KEY))),(0,le.U)((()=>{}))):this.eligibilityChanged$=Ve.E}isGateEnabled(){var e,t;return null!==(t=null===(e=(0,te.O)().experimentClient)||void 0===e?void 0:e.isGateEnabled(S.K.KeyboardShortcutOnboardingBanner))&&void 0!==t&&t}async shouldShowBanner(){if(!this.isGateEnabled())return!1;const[e,t,n,i,s]=await Promise.all([this.assistantOnboardingStorage.isCompleted(qe.SHORTCUT_USED_KEY),this.assistantOnboardingStorage.isCompleted(qe.SHORTCUT_CHANGED_KEY),this.assistantOnboardingStorage.isDismissed(qe.BANNER_KEY),this.assistantOnboardingStorage.isCompleted(qe.BANNER_KEY),this.assistantOnboardingStorage.isUnderShowLimit(qe.BANNER_KEY,qe.MAX_SHOW_COUNT)]);return!e&&!t&&!n&&!i&&s}async recordBannerShown(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.incrementShowCount(qe.BANNER_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut banner shown",{error:e.message}),e}}async recordBannerDismissed(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markDismissed(qe.BANNER_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut banner dismissal",{error:e.message}),e}}async recordBannerInteracted(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markCompleted(qe.BANNER_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut banner interaction",{error:e.message}),e}}async recordKeyboardShortcutUsed(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markCompleted(qe.SHORTCUT_USED_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut usage",{error:e.message}),e}}async recordKeyboardShortcutChanged(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markCompleted(qe.SHORTCUT_CHANGED_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut change",{error:e.message}),e}}async shouldHideIfCurrentlyShowing(){const[e,t,n,i]=await Promise.all([this.assistantOnboardingStorage.isCompleted(qe.SHORTCUT_USED_KEY),this.assistantOnboardingStorage.isCompleted(qe.SHORTCUT_CHANGED_KEY),this.assistantOnboardingStorage.isDismissed(qe.BANNER_KEY),this.assistantOnboardingStorage.isCompleted(qe.BANNER_KEY)]);return e||t||n||i}async reset(){this.logger.warn("reset() is only available in dev builds")}}function Qe(e){let t;const n=e.subscribe((e=>{const n=null==e?void 0:e.openAssistant;if(void 0!==t){if(!function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.key!==t.key)return!1;if(e.modifiers.length!==t.modifiers.length)return!1;const n=new Set(t.modifiers);return e.modifiers.every((e=>n.has(e)))}(n,t)&&void 0!==n){(new qe).recordKeyboardShortcutChanged()}t=n}else t=n}));return{dispose:()=>{n.unsubscribe()}}}qe.BANNER_KEY="keyboardShortcutBanner",qe.SHORTCUT_USED_KEY="keyboardShortcutUsed",qe.SHORTCUT_CHANGED_KEY="keyboardShortcutChanged",qe.MAX_SHOW_COUNT=3;var Ye=n(33675);async function Je(e,t,n){const s=[];try{const r=await(0,He.v)(e,(0,T.OB)().bgRpc),o=i.h.create(null),a=r.subscribe((e=>{o.set(e)}));s.push({dispose:()=>a.unsubscribe()});const l=o.view((e=>{var t;return null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.keyboardShortcuts})),c=Qe(l);s.push(c);const u=(0,Ye.Y)();s.push({dispose:u.dispose});const d=function({sidePanelStatus:e,messageService:t,openSidePanelCallback:n}){return()=>{const i=!!e.isSidePanelOpen.get();if((new qe).recordKeyboardShortcutUsed(),i)t.sendMessage(function(e="keyboardShortcut"){return{type:"closeSidePanel",message:{source:e}}}());else{const e=(0,ne.Z)();n(e)}}}({sidePanelStatus:u,messageService:t,openSidePanelCallback:n}),h=new We({kind:"openAssistant",settings:l,handler:d});s.push(h)}catch(e){console.warn("Failed to initialize global keyboard shortcuts",e)}return s}var Xe=n(14979),Ze=n(92379),et=n(9542),tt=n(29999),nt=n(15083),it=n(46155),st=n(55368),rt=n(12712),ot=n(66613),at=n(33885),lt=n(83507),ct=n(78021),ut=n(27389),dt=n(31702);const ht=({onDisableNotch:e})=>Ze.createElement(ut.v.Item,{key:"appearance-go-tab",style:{maxWidth:"100%"},onClick:e},"Hide Go tab",Ze.createElement(dt.x,{as:"small",style:{display:"block"},variant:"text-small",color:"base-subdued"},"You can still open Go with the shortcut or in your browser's extensions menu."));var gt=n(55916);function pt(e){if(e){if("unset"!==e.top){const t=e.top.match(/calc\(([\d.]+)%\)/);if(t)return parseFloat(t[1])}if("unset"!==e.bottom){const t=e.bottom.match(/calc\(([\d.]+)%\)/);if(t)return 100-parseFloat(t[1])}return 50}}const mt=({onClick:e,theme:t,notchViewState:n,currentKeyboardShortcut:s,branding:r,onDragEnd:o,onDisableTextCheckingForThisSiteSession:a,onDisableTextCheckingForThisSiteIndefinitely:l,onSetKeyboardShortcut:c,trackingService:u,onDisableNotch:d})=>{const h=()=>{const t=u.assistantNotchClicked();e(t)},g=e=>{o(function(e){const t=e.topPercent;return t<=50?{top:`calc(${t}%)`,bottom:"unset"}:{top:"unset",bottom:`calc(${100-t}%)`}}(e))};return Ze.createElement(lt.L,{chunkNameList:["designSystem","assistantUiKit","AAA-initAssistant"]},Ze.createElement(at.F.Fragment,null,Ze.createElement("div",{"aria-label":"grammarly-global-assistant-notch",role:"group",tabIndex:-1}),i.h.combine(n,s,t,r,((e,t,n,i)=>e?Ze.createElement(st.A,{scheme:n},Ze.createElement(it.rc,{onClick:h,initialPositionTopPercent:pt(e.notchPosition),onNotchDragEnd:g,branding:i,renderSettingsMenuGear:({rootElement:e})=>{const n=(0,fe.s)((0,T.OB)().experimentClient);return Ze.createElement(it.Tx,{rootElement:e,branding:i,onDisableTextCheckingForThisSiteSession:a,onDisableTextCheckingForThisSiteIndefinitely:l,renderKeyboardShortcutEditor:()=>Ze.createElement(ct.Z,{showLabel:!1,disableLegacyLayout:!0,editButton:Ze.createElement(rt.h,{icon:ot.g,accessibilityLabel:"Edit Keyboard Shortcut",variant:"tertiary",size:"medium"}),shortcutSeparator:"+",label:"Open new chat",isMac:!0,currentShortcut:t,onSetShortcut:c}),renderAppearanceSection:n?()=>Ze.createElement(ht,{onDisableNotch:d}):void 0})}},Ze.createElement(gt.L,null))):null))))},ft="grammarly-assistant-notch-view";var vt=n(18827),_t=n(24666);class bt{constructor(e,t,n){this._selectedTextFromIntegration=t,this._textSelectionRangeEndExclusive=n,this.selectedText=i.h.create(""),this.subs=[],this.subs.push(Ke.T(this._selectedTextFromIntegration.view(),je.R(self,"mouseup",{capture:!0}).pipe(c.h((e=>{const t=e.target;return!t||!("tagName"in t)||t.tagName!==ft.toUpperCase()}))),je.R(self,"keyup",{capture:!0})).pipe(vt.g(0),le.U((()=>{var e;return(null===(e=self.getSelection())||void 0===e?void 0:e.toString().trim())||this._selectedTextFromIntegration.get().trim()||""})),le.U((e=>this._textSelectionRangeEndExclusive||e.length>=2?e:"")),_t.x()).subscribe((t=>{this.selectedText.set(t),e.onSelectionChanged(t)})))}dispose(){this.subs.forEach((e=>e.unsubscribe()))}}var St=n(84674);class yt{constructor(e){this._store=e,this._logger=g.Y.create("ColorSchemeService"),this.colorScheme=this._store.view((e=>{var t,n;return null!==(n=null===(t=e.extensionSettings)||void 0===t?void 0:t.common.colorScheme)&&void 0!==n?n:"auto"}))}setColorScheme(e){if("string"!=typeof e||!["light","dark","auto"].includes(e))return void this._logger.warn(`Invalid color scheme: ${e}`);this._logger.info(`Setting color scheme from ${this.colorScheme.get()} to ${e}`);const t=(0,St.gC)(this._store);this._store.patch({extensionSettings:(0,St.k1)(t(),{colorScheme:e})})}}var Ct=n(27395),wt=n(29483);class xt{constructor(e){this.hasTriggered=!1,this._disposables=[],this._rpcClient=null,this._logger=g.Y.create("AgentInstallationMonitor"),this._rpcClient=e||null,this.initialize()}static maybeInitializeAgentInstallationMonitor(e){if((0,wt.OB)().experimentClient.isGateEnabled(Ct.D.WatchForAgentSetup)&&self&&["coda.grammarly.com","superhuman.com","coda.io","coda.ppgr.io","coda.qagr.io","dev.coda.io:8080"].includes(self.location.host)&&["/brain/agent/setup","/go/agent/setup"].some((e=>self.location.pathname.startsWith(e))))return new xt(e)}initialize(){this._logger.info("Initializing"),this.checkCurrentPage();const e=()=>{this.checkCurrentPage()};self.addEventListener("popstate",e),this._disposables.push((()=>self.removeEventListener("popstate",e))),this.setupMutationObserver(),this.setupUrlWatcher()}checkCurrentPage(){this.isSuccessPage()&&(this.hasTriggered||(this.hasTriggered=!0,this.handleSetupComplete()))}setupMutationObserver(){let e=location.href;const t=new MutationObserver((()=>{location.href!==e&&(e=location.href,this.checkCurrentPage())}));t.observe(document.body,{subtree:!0,childList:!0}),this._disposables.push((()=>t.disconnect()))}isSuccessPage(){const e=self.location.pathname;return/\/(brain|go)\/agent\/setup\/[^/]+\/success$/.test(e)}setupUrlWatcher(){let e=self.location.href;const t=setInterval((()=>{self.location.href!==e&&(e=self.location.href,this.checkCurrentPage())}),2e3);this._disposables.push((()=>clearInterval(t)))}async handleSetupComplete(){const e=this.extractPackId();e?(this._logger.info("Setup completed successfully",{timestamp:(new Date).toISOString(),url:self.location.href,packId:e,host:self.location.host}),this._rpcClient&&await this._rpcClient.api.onAgentInstallationCompleted(e),this.dispose(),setTimeout((()=>{try{self.close()}catch(e){this._logger.error("Failed to close window",{error:e})}}),100)):this._logger.warn("Could not extract pack ID from success page")}extractPackId(){const e=self.location.pathname.match(/\/(brain|go)\/agent\/setup\/([a-zA-Z0-9]+)\/success$/);return e?e[2]:null}dispose(){this._disposables.forEach((e=>e()))}}function Et(){const e=[],t=new L.n((0,T.OB)().browserApi.message),n=new ae;e.push(n),n.assistantNotchInitialized();const c=i.h.create(""),u=i.h.create(""),d=new I(t),g=xt.maybeInitializeAgentInstallationMonitor(d);g&&e.push(g);const p=new bt(d.api,c.view(),(0,T.OB)().experimentClient.isGateEnabled(B.K.GDocsCanvasExclusiveSelectionEnd));e.push(p);const m=new Re({document,textFieldContent:u}),f=new Oe(m,p.selectedText.view());e.push(f),e.push(((e,t,n)=>{const i=new N(n,t);return new D.S((0,M.NH)(new R.d(e,O.toServer,O.toClient)),i.publicApi)})(t,u,m)),e.push((0,Fe.Q)({setTextFieldContent:e=>{u.set(e)},setSelectedTextFromIntegration:e=>{c.set(e)}}));const v=new H.h((0,T.OB)().browserApi.preferences),_=(0,j.q)(v);e.push(v);const b=(e,t,n,i)=>{(0,Xe.d)(e,p.selectedText.get(),t,n,i)},S=v.view((e=>{var t,n,i,s,r,o;return{dialect:null!==(s=null!==(n=null===(t=e.dapi)||void 0===t?void 0:t.dialectStrong)&&void 0!==n?n:null===(i=e.dapi)||void 0===i?void 0:i.dialectWeak)&&void 0!==s?s:"american",dynamicConfig:null!==(r=e.dynamicConfig)&&void 0!==r?r:$.cS,extensionFSM:null!==(o=e.extensionFSM)&&void 0!==o?o:V.uS}})),y=new x({sidePanelState:S,experimentClient:(0,T.OB)().experimentClient,domain:document.location.hostname});e.push(y);const C=function(e){const t=e.checkingServiceProvider.getCheckingService();if(!t)throw new Error("Failed to get checking service for page load dependencies");const n=new a.w(i.h.create(o.G(t))),l=r.X.create(n),c=s.W.create(n);return{textActionsService:l,agentGenericService:c,contextService:e.contextService,dispose:()=>{l.dispose(),c.dispose(),n.dispose()}}}({checkingServiceProvider:y,contextService:f});e.push(C);const w=(0,h.Tb)();(0,T.OB)().bgRpc.api.getTabId().then((t=>{const n=function(e){const t=l.u.loadPageGroupIntegrationSingleton(e);return{activations:t.then((e=>e.runPageLoadActivations())).catch((t=>(e.telemetry.error("Page load agent activations error",t),[]))),dispose:()=>t.then((e=>e[Symbol.asyncDispose]()))}}({experimentClient:(0,T.OB)().experimentClient,user:v.view("user").view((e=>null!=e?e:z.n.defaultUser)),tabId:t,actions:(0,k.h)((0,T.OB)().bgRpc),telemetry:w.agents.cs(document.location.hostname),textActionsService:C.textActionsService,agentGenericService:C.agentGenericService,contextService:C.contextService});e.push({dispose:()=>{n.dispose()}})})).catch((e=>{w.agents.cs(document.location.hostname).error("Failed to initialize page-level agents",e)}));const E=(0,fe.s)((0,T.OB)().experimentClient),A=i.h.create(!1),F=i.h.create(void 0);e.push(De(F,v,A.view())),Je(v,t,b).then((t=>{e.push(...t)}));const P=(0,K.R)(v).getKeyboardShortcuts().view((e=>e.openAssistant)),q=new yt(v),Q=new me;e.push(Q);const Y=i.h.combine((0,ve.Dr)(),Q.shouldShowHeroWaveAnimation$,A.view(),((e,t,n)=>(null!=e?e:(0,W.i)())?{brand:"superhuman-go",heroWaveAnimationEnabled:t,onHeroWaveAnimationShow:()=>{Q.recordHeroWaveAnimationShown()},heroWaveGoodbyeAnimationEnabled:n,onHeroWaveGoodbyeAnimationComplete:()=>{A.set(!1)}}:{brand:"grammarly"})),J=(0,U.hF)()&&((e,t,n,i,s,r,o=new ae,a,l,c)=>et.V.get({monitorAs:"assistant-notch"}).inject(tt.EM.fromDocument(self.document,ft,{role:"presentation","data-grammarly-ignore-keyboard-events":"true"}),tt.zs.appendChild(document.documentElement),nt.G7.showWhenLoaded(Ze.createElement(mt,{theme:l.colorScheme,currentKeyboardShortcut:a,onClick:t,trackingService:o,notchViewState:e,onDragEnd:Xe.s,onDisableTextCheckingForThisSiteSession:n,onDisableTextCheckingForThisSiteIndefinitely:i,onSetKeyboardShortcut:s,onDisableNotch:r,branding:c}))))(F,b,(()=>{(0,T.OB)().bgRpc.api.sendToFocusTab({kind:G.B.Kind.disableOnTab}),Z(),n.assistantNotchDeactivatedTextChecking("session")}),(()=>{(0,T.OB)().bgRpc.api.disableOnFocusTab(document.location.origin),n.assistantNotchDeactivatedTextChecking("indefinitely")}),(e=>{_.quickSettings.setKeyboardShortcut({openAssistant:e}),n.assistantNotchKeyboardShortcutSet()}),(()=>{const e=void 0!==F.get();_.quickSettings.toggleShowNotch(!1),E&&e&&A.set(!0),n.assistantNotchEnabledChanged(!1,"quickSettings")}),n,P,q,Y),X={openSidePanel:(e,t,i)=>{const s=n.assistantNotchClicked();b(s,t,e,i)}};e.push(Le(X)),e.push(function(e){const t=(0,T.OB)(),n=()=>{e.sendMessage({kind:G.B.Kind.sendCsLogsToSidePanel,option:{logs:t.historyLogsService.getLogs(),isIframeIntegration:(0,U.n_)()}})};return t.message.on(G.B.Kind.requestCsLogsFromSidePanel,n),{dispose(){t.message.off(G.B.Kind.requestCsLogsFromSidePanel,n)}}}(t));const Z=()=>{J&&J.dispose(),e.forEach((e=>e.dispose()))};return{dispose:Z}}},14979:(e,t,n)=>{n.d(t,{d:()=>a,s:()=>l});var i=n(42082),s=n(90189),r=n(39963),o=n(16249);async function a(e,t,n=i._N,a="always_on_notch",l=!1){let c="clicked";try{const i={assistantSessionId:e,selectedText:t,agentId:n,openAgentProfile:l};await(0,s.OB)().browserApi.sessionStorage.set({alwaysOnAssistantOnOpenData:i}),await(0,s.OB)().bgRpc.api.openSidePanel(),c="success"}catch(e){c="failure"}return(0,r.Tb)().alwaysAvailableAssistant.openSidePanel(a,c),o.J.alwaysOnAssistantSidePanelOpen(e,a),"success"===c}function l(e){(0,s.OB)().browserApi.sessionStorage.set({alwaysOnAssistant:{notchPosition:e}})}},33675:(e,t,n)=>{n.d(t,{Y:()=>r});var i=n(13391),s=n(29483);function r(){const e=i.h.create(void 0),t=t=>{e.set(null==t?void 0:t.isSidePanelOpen)};(0,s.OB)().browserApi.sessionStorage.get("isSidePanelOpen").then(t);const n=(0,s.OB)().browserApi.sessionStorage.onChange(t);return{isSidePanelOpen:e.view(),getSelectedAgentId:()=>{const t=e.get();if(t)return t.selectedAgentId},dispose:n}}},55916:(e,t,n)=>{n.d(t,{L:()=>s});var i=n(92379);const s=()=>i.createElement("input",{"aria-hidden":"true",tabIndex:-1,style:{position:"absolute",inset:0,opacity:0,cursor:"inherit"}})},42082:(e,t,n)=>{if(n.d(t,{_N:()=>s,a8:()=>o,qb:()=>r,t6:()=>a}),5526!=n.j)var i=n(17993);const s="chat",r="legacyProofreader",o=5526!=n.j?i.a:null,a="legacyPlagiarism"},36526:(e,t,n)=>{n.d(t,{s:()=>s});var i=n(60026);function s(e){return"test"===e.getTreatment(i.p.ReducedNotchAnnoyance)}},61050:(e,t,n)=>{n.d(t,{c:()=>i});var i,s=n(71401),r=n(90595);!function(e){e.shouldCreate=e=>e.isGateEnabled(r.K.SuggestionDeliveryAutoApply),e.getRequiredSupportedDenaliFeatures=t=>e.shouldCreate(t)?[s.zV.autoapply]:[]}(i||(i={}))},82096:(e,t,n)=>{var i;n.d(t,{K:()=>i}),function(e){e[e.initial=0]="initial",e[e.applied=1]="applied"}(i||(i={}))},72614:(e,t,n)=>{n.d(t,{lU:()=>x,jg:()=>i,mp:()=>E});var i,s=n(92379),r=n(13391),o=n(33885),a=n(88012),l=n(20161),c=n(84714),u=n(59179),d=n(2187),h=n(36344),g=n(84308),p=n(58303),m=n(67880),f=n(71401),v=n(90189),_=n(3030),b=n(83507),S=n(90595),y=n(70843),C=n(19724);function w(){return s.createElement("div",{style:{width:1,height:1,top:-1,left:-1,overflow:"hidden",position:"fixed"},"aria-hidden":"true"},s.createElement("slot",{name:"hidden"}))}!function(e){e.disposed="disposed",e.closed="closed",e.textFieldBlurred="textFieldBlurred",e.assistantBlurred="assistantBlurred",e.regularAssistantOpened="regularAssistantOpened",e.alwaysOnAssistantClosed="alwaysOnAssistantClosed",e.gDocsRegularSidebarOpened="gDocsRegularSidebarOpened",e.gDocsCheetahSidebarClosed="gDocsCheetahSidebarClosed"}(i||(i={}));class x{constructor(e,t,n,i=(0,v.nD)(),s=r.h.create(p.YP)){this._experimentClient=e,this._csPageState=t,this._hasInProductDiscountSpecialOffer=n,this._isMac=i,this._checkingService=s,this._subs=new a.w.Keeper,this._isOnboardingPopupVisible=r.h.create(!1),this._isAvailable=r.h.create(!1),this._assistantState=r.h.create({kind:"closed"}),this._selectedAlerts=r.h.create(new Set),this._latestCAPIMessagesByActionName=r.h.create({}),this.feature=new _._,this.ideateButtonVisible=this.feature.viewInstance.pipe(l.w((e=>null!==e?e.ideateButtonUI:c.of(null))),u.U((e=>Boolean(e)))),this.selectedAlerts=this._selectedAlerts.view(),this._subs.push(this.feature.viewInstance.pipe(l.w((e=>null!==e?e.isOnboardingPopupVisible:c.of(!1)))).subscribe(d.wW(this._isOnboardingPopupVisible))),this._subs.push(this.feature.viewInstance.pipe(l.w((e=>null!==e?e.isAvailable:c.of(!1)))).subscribe(d.wW(this._isAvailable))),this._subs.push(this.feature.viewInstance.pipe(l.w((e=>null!==e?e.selectedAlerts:c.of(new Set)))).subscribe(d.wW(this._selectedAlerts))),this._subs.push(this.feature.viewInstance.pipe(l.w((e=>null!==e?e.assistantState:c.of({kind:"closed"})))).subscribe(d.wW(this._assistantState))),this._subs.push(this._checkingService.pipe(l.w(p.g_((()=>h.E),(e=>e.capiMessages)))).subscribe((e=>this._latestCAPIMessagesByActionName.modify((t=>({...t,[e.action]:e}))))))}init(e){return Promise.all([Promise.all([n.e(5175),n.e(6904),n.e(7949),n.e(328),n.e(1798),n.e(2654),n.e(9278),n.e(244),n.e(409),n.e(6305),n.e(3349),n.e(932),n.e(9262),n.e(9268),n.e(5654),n.e(1167),n.e(7853),n.e(1478),n.e(5785),n.e(646),n.e(4216),n.e(4382)]).then(n.bind(n,97784)),e.dynamicSkillService]).then((([{CheetahFeatureImpl:t},n])=>this.feature.set(new t({...e,latestCAPIMessages:this._latestCAPIMessagesByActionName,checkingService:this._checkingService.view(),csPageState:this._csPageState.view((0,m.H6)("cheetah","isActiveTab","previousUserType","alwaysAvailableAssistantSettings","isDesktopIntegrationEnabled")),isMac:this._isMac,featureFlags:e.featureFlagOverrides?r.h.combine(this._getFeatureFlags(),e.featureFlagOverrides,((e,t)=>({...e,...t}))):this._getFeatureFlags(),experimentClient:this._experimentClient,skillService:n,hasInProductDiscountSpecialOffer:this._hasInProductDiscountSpecialOffer.view(p.fS((()=>!1)))}))))}initCheckingService(e){this._checkingService.set(p.G(e))}getHoveredStateBehavior(e){return this.feature.viewInstance.pipe(l.w((t=>null!==t?t.getHoveredStateBehavior(e):h.E)))}getAlertsFilter(){return this.feature.viewInstance.pipe(l.w((e=>null!==e?e.getAlertsFilter():h.E)))}get ui(){return this.feature.viewInstance.pipe(u.U((e=>e&&{element:s.createElement(o.F.Fragment,null,g.a([e.inlineButtonUI,e.assistantUI,e.onboardingUI,e.preloadUI]).pipe(u.U((([e,t,n,i])=>s.createElement(s.Fragment,null,i,s.createElement(b.L,{chunkNameList:["designSystem","cheetah"],key:"cheetah"},e,t,n,s.createElement(w,null))))))),assistantInjectionMode:e.assistantInjectionMode})))}get highlightUI(){return s.createElement(o.F.Fragment,null,this.feature.viewInstance.pipe(l.w((e=>null!==e?g.a([e.highlightUI,e.quasiCaretUI]).pipe(u.U((([e,t])=>s.createElement(b.L,{key:"cheetah",chunkName:"cheetah"},e,t)))):c.of(null)))))}get ideateButtonUI(){return s.createElement(o.F.Fragment,null,this.feature.viewInstance.pipe(l.w((e=>null!==e?e.ideateButtonUI:c.of(null))),u.U((e=>null===e?null:s.createElement(b.L,{key:"cheetah",chunkName:"cheetah"},e)))))}get expandedIdeateButtonUI(){return s.createElement(o.F.Fragment,null,this.feature.viewInstance.pipe(l.w((e=>null!==e?e.expandedIdeateButtonUI:c.of(null))),u.U((e=>null===e?null:s.createElement(b.L,{key:"cheetah",chunkName:"cheetah"},e)))))}get assistantState(){return this._assistantState.view()}get isAssistantOpened(){return this.assistantState.view((e=>"opened"===e.kind))}get isOnboardingPopupVisible(){return this._isOnboardingPopupVisible.view()}get isAvailable(){return this._isAvailable.view()}get userSettings(){return this.feature.viewInstance.pipe(l.w((e=>null!==e?e.userSettings:h.E)))}closeAssistant(e){this.feature.instance&&this.feature.instance.closeAssistant(e)}suggestStartSessionMode(){var e;return(null===(e=this.feature.instance)||void 0===e?void 0:e.suggestStartSessionMode())||"ideation"}dispose(){this.feature.instance&&this.feature.instance.dispose(),this._subs.dispose(),this.feature.dispose()}_getFeatureFlags(){return this._csPageState.view((({cheetah:e={}})=>{var t,n,i,s,r,o,a,l,c,u,d,h,g,p,m,f,v;return{ideateButton:!1!==(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.cheetahEnabled),compose:this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagCompose)&&!1!==(null===(n=null==e?void 0:e.status)||void 0===n?void 0:n.cheetahEnabled),rewrite:this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagRewrite)&&!1!==(null===(i=null==e?void 0:e.status)||void 0===i?void 0:i.cheetahEnabled),inlineRewrite:this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagRewrite)&&this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagInlineRewrite)&&!1!==(null===(r=null===(s=null==e?void 0:e.status)||void 0===s?void 0:s.entryPointsConfig)||void 0===r?void 0:r.inlineRewriteEnabled)&&!1!==(null===(o=null==e?void 0:e.status)||void 0===o?void 0:o.cheetahEnabled),inlineTranslate:!1!==(null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.cheetahEnabled)&&"test"===this._experimentClient.getTreatment(y.p.TranslationDiscoverability),magicRewrite:this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagMagicRewrite)&&!1!==(null===(c=null===(l=null==e?void 0:e.status)||void 0===l?void 0:l.entryPointsConfig)||void 0===c?void 0:c.inlineRewriteEnabled)&&!1!==(null===(u=null==e?void 0:e.status)||void 0===u?void 0:u.cheetahEnabled),quickReply:this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagQuickReply)&&!1!==(null===(d=null==e?void 0:e.status)||void 0===d?void 0:d.cheetahEnabled),inlineQuickReply:this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagQuickReply)&&this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagInlineQuickReply)&&!1!==(null===(g=null===(h=null==e?void 0:e.status)||void 0===h?void 0:h.entryPointsConfig)||void 0===g?void 0:g.inlineQuickReplyEnabled)&&!1!==(null===(p=null==e?void 0:e.status)||void 0===p?void 0:p.cheetahEnabled),onboarding:this._experimentClient.isGateEnabled(S.K.CheetahFeatureFlagOnboarding)&&!1!==(null===(m=null==e?void 0:e.status)||void 0===m?void 0:m.cheetahEnabled),onboardingBTS:this._experimentClient.isGateEnabled(S.K.CheetahStudentsOnboarding)&&(this._experimentClient.isGateEnabled(S.K.CheetahStudentBTS)||this._experimentClient.isGateEnabled(S.K.CheetahStudentPromptsInternal))&&!1!==(null===(f=null==e?void 0:e.status)||void 0===f?void 0:f.cheetahEnabled),externalOnboardingContextProviderFix:this._experimentClient.isGateEnabled(S.K.CheetahOnboardingContextProviderFix),knowledgeHubIntegration:this._experimentClient.isGateEnabled(S.K.KnowledgeHubCheetahIntegration)&&!1!==(null===(v=null==e?void 0:e.status)||void 0===v?void 0:v.cheetahEnabled)}}))}}function E(e){return!("opened"===e.kind&&"genAI"!==e.assistantMode)}!function(e){e.shouldCreate=function(e,t){var n,i,s;return null!==(s=null===(i=null===(n=e.cheetah)||void 0===n?void 0:n.enableByBrowser)||void 0===i?void 0:i[t])&&void 0!==s&&s},e.isSerengetiSupported=function(t,n,i){return C.n.isGrammarlyEmployee(t)&&e.shouldCreate(n,i)},e.getRequiredDenaliSupportedFeatures=function(t,n,i,s){return e.shouldCreate(n,i)?[...e.isSerengetiSupported(t,n,i)&&"enabled"===s.serengetiState?[f.zV.gbContext]:[]]:[]}}(x||(x={}))},15506:(e,t,n)=>{n.d(t,{rP:()=>i});const i=n(41832).i},26763:(e,t,n)=>{n.d(t,{X:()=>s});var i=n(45561);const s=(e,t)=>n=>{var s;return{...e(n),...null!==(s=(0,i.A)(n.integrationName,n.domain,t,n.dynamicConfig))&&void 0!==s?s:{}}}},45561:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(58303),s=n(15506),r=n(86211),o=n(13529);const a=(e,t,n,a)=>i.pC((0,r.KM)(e,t,n,a))?{text_actions:{version:s.rP},vbar_feedback:{version:o.wB},vbars_lockedui:{version:o.X$},trusted_rewrite:{version:o.fl},pushed_content:{version:o.EI}}:void 0},86211:(e,t,n)=>{n.d(t,{KM:()=>g,_V:()=>_,e$:()=>f,iT:()=>m,l0:()=>p,qc:()=>v});var i=n(90023),s=n(32103),r=n(58303),o=n(90189),a=n(4271),l=n(90595),c=n(70843),u=n(19724),d=n(99946);function h(e,t){const n=(0,a.a9)(t)||(0,a.f5)(t);switch(e){case"selection":return function(e){if((0,o.OB)().experimentClient.isGateEnabled(l.K.VBarsSelectionEnterprise))return!0;return"test"===(0,o.OB)().experimentClient.getTreatment(e?c.p.VBarsSelectionGoogleDocs:c.p.VBarsSelectionNonGdocs)}(n);case"pushed_content":return(0,o.OB)().experimentClient.isGateEnabled(l.K.VBarsPushedContent);case"idle":return function(e){if(e){if((0,o.OB)().experimentClient.isGateEnabled(l.K.VBarsIdleEnterprise))return!0;const e=(0,o.OB)().experimentClient.getTreatment(c.p.VBarsIdleGoogleDocsThreeArms);return"test_static"===e||"test_dynamic"===e}return"test"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsIdleNonGdocs)}(n);default:(0,s.L0)(e)}}function g(e,t,n,s){return u.n.isGrammarlyEmployee(n)&&(0,o.OB)().experimentClient.isGateEnabled(l.K.VBarsInternal)&&(0,o.OB)().experimentClient.isGateEnabled(l.K.VBarsInternalIgnoreAllowList)?r.G({selectionSidelines:!0,pushedContentSidelines:!0,idleSidelines:!0}):function(e,t,n,s){return(0,i.zG)((0,d.p)(t,e,s),r.UI((t=>{const i=function(e){return{selectionSidelines:e.includes("selection"),pushedContentSidelines:e.includes("pushed_content"),idleSidelines:e.includes("idle")}}(t);return u.n.isGrammarlyEmployee(n)&&(0,o.OB)().experimentClient.isGateEnabled(l.K.VBarsInternal)?i:{selectionSidelines:i.selectionSidelines&&h("selection",e),pushedContentSidelines:i.pushedContentSidelines&&h("pushed_content",e),idleSidelines:i.idleSidelines&&h("idle",e)}})))}(e,t,n,s.vBars)}function p(e){return e&&"test_static"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsIdleGoogleDocsThreeArms)}function m(){const e="test"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingual),t="without_onboarding"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingualV2)||"with_onboarding"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingualV2)||"multilingual_and_translate"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingualV3);return e||t}function f(){const e="test"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingual),t="with_onboarding"===(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingualV2),n=null!==(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingualV3)&&"NOT_ASSIGNED"!==(0,o.OB)().experimentClient.getTreatment(c.p.VBarsMultilingualV3);return e||t&&!n}function v(){const e="test"===(0,o.OB)().experimentClient.getTreatment(c.p.CleanUxUiFree),t="test"===(0,o.OB)().experimentClient.getTreatment(c.p.CleanUxUiPro),n=(0,o.OB)().experimentClient.isGateEnabled(l.K.CleanUxUiInternal);return e||t||n}function _(){return(0,o.OB)().experimentClient.isGateEnabled(l.K.AgentsAutofocusToFirstVBar)}},99946:(e,t,n)=>{n.d(t,{p:()=>l});var i=n(59833),s=n(21147),r=n(58303),o=n(90023),a=n(32103);function l(e,t,n){const l=["selection","pushed_content","idle"];if(!n)return r.G(l);const c=n=>{const i=n.kind;switch(i){case"byDomain":return n.matchSubdomains?e.endsWith(n.domain):e===n.domain;case"byIntegrationName":return n.isRegex?Boolean(t.match(n.integrationName)):t===n.integrationName;default:(0,a.vE)(i)}};return n.allowList?(0,o.zG)(n.allowList,i.Ew(c),r.UI((e=>{var t;return null!==(t=e.vBarTypes)&&void 0!==t?t:l})),r.UI((e=>e.filter((e=>"signaling"!==e))))):n.blockList?(0,o.zG)(n.blockList,i.Ew(c),r.UI((e=>e.vBarTypes)),r.UI((e=>null!=e?e:l)),r.UI((e=>(0,o.zG)(l,i.e5(s.w4)([...e])))),r.vx((()=>r.G(l)))):r.G(l)}},30105:(e,t,n)=>{n.d(t,{Hq:()=>s,Vt:()=>i,wE:()=>r});const i="vBarCard",s="grammarly-extension-vBar-card",r="vBarCardPositionReference"},13529:(e,t,n)=>{n.d(t,{EI:()=>u,X$:()=>l,fl:()=>c,wB:()=>a});var i=n(75904),s=n(50220),r=n(32351),o=n(16308);const a=r.i,l=o.i,c=s.i,u=i.i},56567:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(23162);const s={...{VBarsMultilingual:new i.KS("multilingual",["control","test"]),VBarsMultilingualV2:new i.KS("extension_vbars_multilingual",["control","without_onboarding","with_onboarding"]),VBarsMultilingualV3:new i.KS("extension_vbars_multilingual_v2",["control","multilingual_only","multilingual_and_translate"])},...{VBarsUphookHub:new i.KS("vbars_classic_uphookhub",["control","test"]),VBarsSampleCounterRemoval:new i.KS("vbars_remove_sample_counter",["control","test"]),VBarsShimmerOnOpen:new i.KS("vbar_locked_ui_motion_ext",["control","test"]),VBarsShimmerAfterLoad:new i.KS("vbar_locked_ui_motion_v2",["control","test"]),VBarsUphookButtonInTitle:new i.KS("vbar_uphook_in_title_ext",["control","test"]),VBarsCopyRotationText:new i.KS("vbar_copy_rotation_text",["control","test"])},VBarsSelectionGoogleDocs:new i.KS("vbars_selection_extension_gdocs",["control","test"]),VBarsSelectionNonGdocs:new i.KS("vbars_selection_extension_top_sites",["control","test"]),VBarsIdleGoogleDocsThreeArms:new i.KS("vbars_idle_extension_gdocs_v2",["control","test_static","test_dynamic"]),VBarsIdleNonGdocs:new i.KS("vbars_idle_extension_non_gdocs",["control","test"]),VBarsEmailFlexRewrite:new i.KS("vbars_emails_flex_rewrite_extension",["control","flex_rephrase","flex_rephrase_agressive"]),VBarsRedesignForSelection:new i.KS("extension_vbars_redesign_for_selection",["control","test"])}},24435:(e,t,n)=>{if(n.d(t,{Lt:()=>d,kt:()=>h,nM:()=>l}),5526!=n.j)var i=n(32103);if(5526!=n.j)var s=n(70843);var r=n(90595);if(5526!=n.j)var o=n(89979);if(5526!=n.j)var a=n(85098);const l=(e,t)=>c(e,t)||u(e,t),c=(e,t)=>d(e)&&t===a.N,u=(e,t)=>"test"===e.getTreatment(s.p.KnowledgeHubAtlassian)&&t.endsWith("atlassian.net"),d=e=>e.isGateEnabled(r.K.KnowledgeHubGdocs),h=e=>t=>{switch(t.knowledgeHubCardType.value){case o.fp.SuggestedTerm:return!0;case o.fp.TermDetails:return e;default:return(0,i.L0)(t.knowledgeHubCardType.value)}}},89979:(e,t,n)=>{n.d(t,{JJ:()=>c,L5:()=>a,TM:()=>l,VI:()=>h,fp:()=>r,li:()=>o,nk:()=>u});var i=n(21147);if(5526!=n.j)var s=n(58303);var r,o,a,l,c,u,d=n(53684);function h(e){var t,n,i,r;return{termId:o.create((null===(t=e.extraProperties)||void 0===t?void 0:t.knowledgeHubTermId)||""),headerText:e.extraProperties.knowledgeHubInstitutionName?`${e.extraProperties.knowledgeHubInstitutionName} Knowledge Share`:"Knowledge Share",headerIconSrc:e.extraProperties.knowledgeHubLogoUrl,articleTitle:e.title,articleContent:e.details,suggestCorrectionUrl:s.ij(e.extraProperties.knowledgeHubSuggestCorrectionUrl),relatedMaterials:(null===(n=e.extraProperties.knowledgeHubRelatedMaterials)||void 0===n?void 0:n.map((e=>e)))||[],aliases:(null===(i=e.extraProperties.knowledgeHubAliases)||void 0===i?void 0:i.map((e=>e)))||[],pointPeople:(null===(r=e.extraProperties.knowledgeHubPointPeople)||void 0===r?void 0:r.map((({communicationMethods:e,...t})=>({...t,communicationMethods:e.map((e=>e)),jobTitle:s.ij(t.jobTitle),avatarUrl:s.ij(t.avatarUrl)}))))||[]}}!function(e){e[e.TermDetails=0]="TermDetails",e[e.SuggestedTerm=1]="SuggestedTerm"}(r||(r={})),function(e){e.create=function(e){return e},e.eq=i.yv}(o||(o={})),function(e){e.on="on",e.off="off"}(a||(a={})),function(e){e.redirect="redirect",e.copyName="copyName"}(l||(l={})),function(e){e.gdocs="gdocs",e.gmail="gmail",e.other="other"}(c||(c={})),function(e){e.fromDomain=function(t){switch(!0){case(0,d.f)(t):return e.gdocs;case(0,d.h)(t):return e.gmail;default:return e.other}}}(c||(c={})),function(e){e.OnlyOnboarding="OnlyOnboarding",e.All="All"}(u||(u={}))},33442:(e,t,n)=>{n.d(t,{EI:()=>g,Ed:()=>d,JD:()=>a,Yz:()=>u,kK:()=>h,r4:()=>l,ux:()=>c});var i=n(58303),s=n(48758);if(3075==n.j)var r=n(67385);var o=n(89979);const a=e=>e.startsWith("KnowledgeHub/SuggestedTerm/"),l=e=>e._tag===r.J8.Type.add&&d(e.alert),c=e=>"KnowledgeHub/TermDetails/TermDetails"===e.pname?i.G(o.fp.TermDetails):a(e.pname)?i.G(o.fp.SuggestedTerm):i.YP,u=e=>s.S.isCapiAlert(e)&&i.pC(e.knowledgeHubCardType),d=e=>u(e)&&e.knowledgeHubCardType.value===o.fp.TermDetails,h=e=>u(e)&&e.knowledgeHubCardType.value===o.fp.SuggestedTerm,g=(e,t)=>n=>i=>{const s=`${n} promise rejection: ${String(i)}`;e.knowledgeHub.error("promiseRejection",s,t,i)}},4511:(e,t,n)=>{n.d(t,{l:()=>o});var i=n(23474),s=n(27395);const r=["chatgpt.com"],o=(e,t)=>{if(!r.includes(t))return!1;const n=e.getTreatment(i.j.PromptEnhancementExperiment);return e.isGateEnabled(s.D.PromptEnhancementInternalGate)||"control"!==n&&"NOT_ASSIGNED"!==n&&null!==n}},41587:(e,t,n)=>{n.d(t,{Cb:()=>l,DU:()=>g,Gu:()=>u,O3:()=>h,W1:()=>d,ZD:()=>o,_9:()=>c,aC:()=>r,bH:()=>m,w6:()=>a,wc:()=>p});var i=n(36807),s=n(71576);function r(e){return!(!s.s.isInsert(e)||!e.insert)&&(Object.prototype.hasOwnProperty.call(e.insert,"snippetOption")&&Object.prototype.hasOwnProperty.call(e.insert.snippetOption,"multiSelect"))}function o(e){return!(!s.s.isInsert(e)||!e.insert)&&Object.prototype.hasOwnProperty.call(e.insert,"textbox")}function a(e){return!!s.s.isInsert(e)&&(!!e.insert&&Object.prototype.hasOwnProperty.call(e.insert,"currentUser"))}function l(e){return!(!s.s.isInsert(e)||!e.insert)&&(a(e)&&Object.prototype.hasOwnProperty.call(e.insert.currentUser,"userEmail"))}function c(e){return!(!s.s.isInsert(e)||!e.insert)&&Object.prototype.hasOwnProperty.call(e.insert,"datepicker")}function u(e){return"string"!=typeof e&&e.ops.reduce(((e,t)=>e||(r(t)||o(t)||a(t)||c(t))),!1)}function d(e){return u(new i.i([e]))||l(e)}const h=e=>{var t,n,i;return null!==(i=null!==(t=e.insert.snippetOption.placeHolderName)&&void 0!==t?t:null===(n=e.insert.snippetOption.options[0])||void 0===n?void 0:n.label)&&void 0!==i?i:""},g=e=>{var t,n;return new Intl.DateTimeFormat("en-US",{dateStyle:null!==(t=e.insert.datepicker.dateFormat)&&void 0!==t?t:"short",timeStyle:null!==(n=e.insert.datepicker.timeFormat)&&void 0!==n?n:void 0}).format(Date.now())},p=e=>{if(r(e))return h(e);if(o(e))return e.insert.textbox.placeHolderName;if(l(e)){if("UserEmail"===e.insert.currentUser.type)return e.insert.currentUser.userEmail;if("UserFirstName"===e.insert.currentUser.type)return e.insert.currentUser.userFirst;if("UserLastName"===e.insert.currentUser.type)return e.insert.currentUser.userLast}return c(e)?g(e):""},m=e=>e.ops.reduce(((e,t)=>r(t)||o(t)?e+1:e),0)},78519:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(32103),s=n(13391),r=n(71401),o=n(37843);var a;!function(e){e.LEAST_RESTRICTIVE_CONFIG={clients:[],domains:[],allowedDomains:[],allowedDomainsEnabled:!1,confidentialModeEnabled:!1,dlpEnabled:!1,dlpConfiguration:{patterns:{}},touchTypistAvailableByInstitution:!0},e.MOST_RESTRICTIVE_CONFIG={clients:[{client:"extensionChrome",blocked:!0,reason:"SERVER_UNAVAILABLE"},{client:"extensionFirefox",blocked:!0,reason:"SERVER_UNAVAILABLE"},{client:"extensionEdge",blocked:!0,reason:"SERVER_UNAVAILABLE"}],domains:[],allowedDomains:[],allowedDomainsEnabled:!1,confidentialModeEnabled:!0,dlpEnabled:!0,dlpConfiguration:o.zn,touchTypistAvailableByInstitution:!0},e.mergeConfig=(e,t)=>({clients:[...e.clients,...t.clients],domains:[...e.domains,...t.domains],allowedDomains:[...e.allowedDomains,...t.allowedDomains],allowedDomainsEnabled:e.allowedDomainsEnabled||t.allowedDomainsEnabled,confidentialModeEnabled:e.confidentialModeEnabled||t.confidentialModeEnabled,dlpEnabled:e.dlpEnabled||t.dlpEnabled,dlpConfiguration:{patterns:{...e.dlpConfiguration.patterns,...t.dlpConfiguration.patterns}},touchTypistAvailableByInstitution:e.touchTypistAvailableByInstitution}),e.mapToClientControlsConfig=e=>{var t,n,i;return{clients:(null===(t=e.blockedClients)||void 0===t?void 0:t.blockedClients.map((e=>({client:e.client,blocked:e.enabled,reason:"ORGANIZATION_CONTROLS"}))))||[],domains:(null===(n=e.blockedDomains)||void 0===n?void 0:n.blockedDomains.map((e=>({domain:e.domain,subdomains:e.withSubdomains,blocked:e.enabled,reason:"ORGANIZATION_CONTROLS"}))))||[],allowedDomains:(null===(i=e.allowedDomains)||void 0===i?void 0:i.allowedDomains.map((e=>({domain:e.domain,subdomains:e.withSubdomains,enabled:e.enabled,reason:"ORGANIZATION_CONTROLS"}))))||[],allowedDomainsEnabled:e.clientControls.allowedDomainsEnabled,confidentialModeEnabled:e.clientControls.confidentialModeEnabled,dlpEnabled:e.clientControls.dlpEnabled,dlpConfiguration:e.clientControls.dlpConfiguration,clientControlsEnabled:e.clientControls.clientControlsEnabled,touchTypistAvailableByInstitution:e.clientControls.touchTypistAvailable}}}(a||(a={}));var l,c=n(11816),u=n(70843),d=n(90595),h=n(16381);!function(e){function t(e){var t;return null!==(t=null==e?void 0:e.touchTypistAvailableByInstitution)&&void 0!==t?t:a.LEAST_RESTRICTIVE_CONFIG.touchTypistAvailableByInstitution}function n({experimentClient:t,dynamicConfig:n,integrationInfo:i}){return e.isAvailableViaGateOrExperiment(t)&&e._isAvailableForIntegrationViaDynamicConfig(i,n)&&!(0,h.n_)()}e._isAvailableForIntegrationViaDynamicConfig=function(e,t){const{allowList:n,blockList:s}=t||{};if(!n&&!s)return!0;const{domain:r,integrationName:o}=e,a=e=>{const t=e.kind;switch(t){case"byDomain":return e.matchSubdomains?r.endsWith(e.domain):r===e.domain;case"byIntegrationName":return o.includes(e.integrationName);default:(0,i.vE)(t)}};return s?!s.some(a):!n||n.some(a)},e.isAvailableViaGateOrExperiment=function(e){return"test"===e.getTreatment(u.p.TouchTypistExternalFree)||e.isGateEnabled(d.K.TouchTypistInternal)||e.isGateEnabled(d.K.TouchTypistRelease)},e.isAvailableByInstitution=t,e.isAvailableOnClient=n,e.isEnabled=function({experimentClient:n,dynamicConfig:i,integrationInfo:r,settings:o,capiAllowedFeatures:a}){return s.h.combine(i,o,a,((i,s,o)=>{var a;const l=t(i),u=o.includes("TOUCHTYPIST"),d=null!==(a=null==s?void 0:s.enabled)&&void 0!==a?a:c.Y.enabled;return l&&u&&e.isAvailableOnClient({experimentClient:n,dynamicConfig:i,integrationInfo:r})&&d}))},e.getSupportedCapiFeatures=function(e,t,i){return n({experimentClient:e,integrationInfo:t,dynamicConfig:i})?[r.zV.touchtypist]:[]}}(l||(l={}))},50905:(e,t,n)=>{n.d(t,{X:()=>s});var i=n(14586);const s=e=>t=>{const n=e(t),s=(0,i.A)({experimentClient:t.experimentClient,dynamicConfig:t.dynamicConfig.touchTypist,integrationInfo:{integrationName:t.integrationName,domain:t.domain}});return s?{...n,...s}:n}},14586:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(78519),s=n(11832);function r({experimentClient:e,dynamicConfig:t,integrationInfo:n}){return i.A.isAvailableOnClient({experimentClient:e,dynamicConfig:t,integrationInfo:n})?{touch_typist:{version:s.Ij}}:null}},11832:(e,t,n)=>{n.d(t,{Ij:()=>i});const i=n(2042).i},11816:(e,t,n)=>{n.d(t,{Y:()=>s,c:()=>i});const i={accessibilityOnboardingAlertsCount:0,userAcceptedCount:0,lastUserAcceptedAt:""},s={enabled:!0,hotkey:"Tab",snoozedUntil:null}},53981:(e,t,n)=>{n.d(t,{h:()=>i});const i=e=>({getConfiguration:async t=>await e.api.getUphookHubConfiguration(t),getConfigurationsFromSlots:async t=>await e.api.getUphookHubConfigurationsFromSlots(t),trackConfiguration:async(t,n,i)=>await e.api.trackUphookHubConfiguration(t,n,i)})},74017:(e,t,n)=>{n.d(t,{Fw:()=>u,V1:()=>d});var i=n(38538),s=n(90023),r=n(28647),o=n(4782),a=n(41935);const l={text:!0,button:!0,alternativeChoice:!0,count:!0,icon:!0,block:!0,row:!0,column:!0,slider:!0,alternativeSlider:!0,transition:!0,openSettings:!0,openToneDetector:!0,openFeedback:!0,openLearnMore:!0,notify:!0,closeCard:!0,nextCard:!0,prevCard:!0,removeRoot:!0,applyAlerts:!0,selectAlternative:!0,upgradeToPremium:!0,showHighlights:!0,hideHighlights:!0,strongAlertRef:!0,removeAlerts:!0,openLink:!0,copyToClipboard:!0,scroll:!0,list:!0,image:!0,assistantFeed:!0,assistantCard:!0,gButton:!0,pushAssistantFeed:!0,popAssistantFeed:!0,focusAssistantCard:!0,alertsCount:!0,nativeToneInsightsModal:!0,nativeLearnMoreModal:!0,nativeSettingsModal:!0,nativeFeedbackModal:!0,viewStack:!0,switchView:!0,dropDownMenuButton:!0,proofitButton:!0,nativeProofitModal:!0,nativeKeyTakeawaysAssistantCard:!1,newRevision:!1,nativeExperimentalGBConsistencyUpsellFooter:!1,nativeExperimentalGBToneInsightsUpsellFooter:!1,box:!0,openCreateSnippetModal:!0,clickableText:!0,lensesSwitchPanel:!1,radioButtonsGroup:!1,nativeSkillsModal:!1,nativeGetStartedChecklistModal:!0,"behavior:strongAlertRef":!0,inlineCard:!0,closePopover:!0,interactPopover:!0,popoverStack:!0,"behavior:popoverAnchor":!0,nativeSkillsList:!1,nativeSkillsView:!1,nativeInlineCardContent:!0,collapsedCard:!0,nativeOpenAssistant:!1,highlightAlert:!0,progressBar:!0,"behavior:animation:fadeIn":!1,"behavior:animation:fadeOut":!1,"behavior:animation:textShimmer":!0,"behavior:animation:progressiveBlur":!0,"behavior:animation:wipeBlur":!0,"gButton:default":!1,"gButton:tone":!1,"gButton:proofit":!1,"gButton:get-started":!1,"gButton:plagiarism":!0,"gButton:writingExpert":!0,"gButton:audienceAdapt":!0,"gButton:aiStudio":!0,nativePerformanceScoreButton:!1,longFormCard:!0,horizontalRule:!0,stopApplyingAlerts:!1,tooltip:!0,openGrammarlyGo:!0,enablePlagiarismCheck:!0,disablePlagiarismCheck:!0,"behavior:lifecycle":!0,openPerformanceScore:!1,selectableDropDownMenu:!0,globalPart:!0,globalPartPlaceholder:!0,shortFormCard:!1,nativeOpenUserSatisfactionFeedback:!1,enableWritingExpertCheck:!0,disableWritingExpertCheck:!0,sticker:!0,overlay:!0,enableAudienceAdaptCheck:!0,disableAudienceAdaptCheck:!0,enableAiStudioCheck:!0,disableAiStudioCheck:!0,nativeUndoableTextChanges:!0},c={...l,lensesSwitchPanel:!0,count:!0,"behavior:animation:fadeIn":!0,"behavior:animation:fadeOut":!0,"behavior:animation:progressiveBlur":!0,"behavior:animation:wipeBlur":!0},u={"":{supportedComponents:(0,s.zG)(l,i.hX(s.yR),i.KM(s.yR)),supportedForms:[r.v.Short,r.v.Inline],dslParser:o.ab.dslRootParser,dslSchema:a.i}},d={"":{supportedComponents:(0,s.zG)(c,i.hX(s.yR),i.KM(s.yR)),supportedForms:[r.v.Long,r.v.Inline],dslParser:o.ab.dslRootParser,dslSchema:a.i}}},1763:(e,t,n)=>{n.d(t,{D2:()=>r,Ss:()=>s,YJ:()=>a,iW:()=>l,kx:()=>o,oc:()=>u,zW:()=>c});var i=n(67734);const s=(0,i.SH)([10,30,60,120,600]),r=(0,i.SH)([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50,60,70,80,90,100]),o=(0,i.SH)([0,5,10,20,30,40,50,60,70,80,85,90,91,92,93,94,95,96,97,98,99,99.5,99.8,99.9,100]),a=(0,i.SH)([0,1,5,10,15,20,25,30,40,50,60,70,80,90,100,150,200,250,500,750,1e3,2e3,5e3,1e4]),l=(0,i.SH)([0,1,2,4,5,10,50,100,250,500,750,1e3,1500,2e3,3e3,4e3,5e3,1e4,15e3]),c=(0,i.SH)([0,10,50,100,200,250,300,400,500,750,1e3,2e3,2500,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,75e3,1e5]),u=(0,i.SH)([0,100,200,500,1e3,2e3,3e3,5e3,1e4,1e5,5e5,1e6])},37275:(e,t,n)=>{var i,s,r;n.d(t,{HH:()=>i,HJ:()=>s,WV:()=>r}),function(e){e.unknown="unknown",e.rewriteUnder30Chars="rewriteUnder30Chars",e.rewrite31_100Chars="rewrite31_100Chars",e.rewrite101_200Chars="rewrite101_200Chars",e.rewriteRewriteBeyond200Chars="rewriteRewriteBeyond200Chars"}(i||(i={})),function(e){e.unknown="unknown",e.longRewrite="longRewrite",e.shortRewrite="shortRewrite"}(s||(s={})),function(e){e.hotkey="hotkey",e.individualPreview="individualPreview",e.individualRevert="individualRevert"}(r||(r={}))},67734:(e,t,n)=>{if(n.d(t,{EC:()=>a,No:()=>l,SH:()=>s,mI:()=>r}),5526!=n.j)var i=n(37275);function s(e,t){const n=new Array(e.length+1);let i=-1/0;for(let s=0;s<e.length;s++){const r=e[s],o=void 0===t?i.toString():i.toExponential(t),a=void 0===t?r.toString():r.toExponential(t);n[s]=[i,r,`${s>0?o:""}...${a}`],i=r}const s=void 0===t?i.toString():i.toExponential(t);return n[e.length]=[i,1/0,`${s}...`],n}const r=e=>e<0?i.HH.unknown:e<=30?i.HH.rewriteUnder30Chars:e<=100?i.HH.rewrite31_100Chars:e<=200?i.HH.rewrite101_200Chars:i.HH.rewriteRewriteBeyond200Chars,o=5526!=n.j?["Correctness/FullSentence/Fusion/Rewrite","Calliope/Rewrite/QualityPush/ImproveItPush","WritingExpert/Rewrite/SuggestionsGeneration/Suggestions"]:null,a=e=>null===e?i.HJ.unknown:o.includes(e)?i.HJ.longRewrite:i.HJ.shortRewrite,l=(e,t,n)=>{var i;const s=null!==(i=e.get(t))&&void 0!==i?i:{failCount:0,count:0};return e.set(t,{failCount:s.failCount+(n?1:0),count:s.count+1}),e}},48758:(e,t,n)=>{n.d(t,{S:()=>s,b:()=>i});var i,s,r=n(15217),o=n(82096),a=n(33442),l=n(78767),c=n(43389),u=n(67385);!function(e){e.capi="capiAlert",e.autocorrect="autocorrectAlert",e.touchTypist="touchTypistAlert",e.revertAutoApply="revertAutoAppliedAlert",e.snippetsTemplate="snippetsTemplateAlert"}(i||(i={})),function(e){function t(e){return Object.values(i).includes(e._tag)}function n(e){return e._tag===i.capi}function s(e){return e._tag===i.autocorrect}function d(e){return e._tag===i.touchTypist}function h(e){return e._tag===i.revertAutoApply}function g(e){return e._tag===i.snippetsTemplate}function p(e){return n(e)&&!u.DD.isMuted(e)}function m(e){return p(e)&&!u.DD.isHidden(e)}function f(e){return n(e)&&u.DD.isRegular(e)}function v(e){return n(e)&&u.DD.isWithSubAlerts(e)}function _(e){return n(e)&&u.DD.isWithTransformJson(e)}e.isCommonAlert=t,e.isCapiAlert=n,e.isNotCapiAlert=function(e){return!n(e)},e.isAutocorrectAlert=s,e.isTouchTypistAlert=d,e.isCapiAlertToAutoApply=function(e){return n(e)&&!0===e.autoapply},e.isRevertAutoApplyAlert=h,e.isSnippetsTemplatingAlert=g,e.isUnmutedCapiAlert=p,e.isHiddenCapiAlert=function(e){return p(e)&&u.DD.isHidden(e)},e.isFreePremiumLockedCapiAlert=function(e){return p(e)&&u.DD.isFreePremiumLockedDeprecated(e)},e.isInlineLockedUICapiAlert=function(e){return p(e)&&u.DD.isInline(e)&&(u.DD.isFreePremiumLocked(e)||u.DD.isFreePremiumUphook(e))},e.isFreePremiumUnlockedCapiAlert=function(e){return p(e)&&u.DD.isFreePremiumUnlocked(e)},e.isVisibleCapiAlert=m,e.isVisibleInlineCapiAlert=function(e){return m(e)&&u.DD.isInline(e)},e.isVisibleNotInlineCapiAlert=function(e){return m(e)&&!u.DD.isInline(e)},e.isRegularCapiAlert=f,e.isSuperCapiAlert=v,e.isTransformJsonCapiAlert=_,e.isSuggestedSnippetAlert=function(e){return _(e)&&e.isSuggestedSnippet},e.isToneAIAlert=function(e){return _(e)&&e.isToneAI},e.isEthicalAIAlert=function(e){return(_(e)||v(e))&&e.isEthicalAI},e.isSuggestionAlert=function(e){return!(0,a.Yz)(e)},e.isVbarAlert=function(e){return"true"===e.extraProperties.vbar},e.isWeTeaserAlert=function(e){return"true"===e.extraProperties.underline_with_teaser},e.canResizeAlert=function(t){return Boolean(e.isCapiAlert(t)&&t.updatable)},e.isCorrectnessAlert=function(e){return t(e)&&n(e)&&e.cardLayout.outcome===u.TC.correctness},e.isFullSentenceRewriteAlert=function(e){return t(e)&&n(e)&&"true"===e.extraProperties.full_sentence_rewrite},e.ordering={greaterThanOrEqual:(e,t)=>{if(g(e)||g(t))return g(e);if(d(e)||d(t))return d(e);if(n(e)){if(n(t))return u.DD.ordering.greaterThanOrEqual(e,t);if(s(t))return t.state===o.K.applied;if(h(t))return!1;(0,l.vE)(t)}else{if(!n(t))return s(e)?!!h(t)||e.state===o.K.applied:!!s(t)&&t.state!==o.K.applied;if(s(e))return e.state===o.K.initial;if(h(e))return!1;(0,l.vE)(e)}},areConflicting:(e,t)=>n(e)&&n(t)?u.DD.ordering.areConflicting(e,t):e._tag===t._tag&&(f(e)&&f(t)&&c.SV.equals(e.transformRange,t.transformRange)||(0,r.Hx)(e.highlightRanges,t.highlightRanges,c.SV.equals)),areSame:(e,t)=>{if(n(e)&&n(t))return u.DD.ordering.areSame(e,t);if(e._tag===t._tag){const n=e=>{const{id:t,revision:n,...i}=e;return i};return(0,l.fS)(n(e),n(t))}return!1}},e.alertMapToCapiAlerts=t=>Object.values(t).filter((t=>!!t&&e.isCapiAlert(t)))}(s||(s={}))},29994:(e,t,n)=>{n.d(t,{WZ:()=>i});var i,s=n(71401),r=n(40144);!function(e){e.assistantOrSidebarEnabled=(e,t)=>"docs.google.com"!==e||(0,r.I)(t),e.getRequiredSupportedDenaliFeatures=t=>e.assistantOrSidebarEnabled(t.state.page.domain,t.state.user)?[s.zV.toneCards,s.zV.userMutes,s.zV.muteQuotedAlerts,s.zV.alertsChanges,s.zV.ideasGalleryLink]:[]}(i||(i={}))},62480:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(55709),s=n(12518),r=n(5898);class o{constructor(e,t){this._rpc=e,this._settings=t,this._token=this._rpc.startSession(r.J.DenaliCAPISettings.serialize(this._settings)).finally((()=>{var e;return null===(e=this._settings.integrationResultTracker)||void 0===e?void 0:e.trackCAPISessionStarted({type:"sent"})})),this.pushChanges=(e,...t)=>this._token.then((n=>this._rpc.pushChanges({token:n,rev:e,args:[r.J.Change.serialize(t[0])]}))),this.requestWritingExpert=(...e)=>this._token.then((t=>this._rpc.requestWritingExpert({token:t,args:e}))),this.sendTouchTypistCommand=(...e)=>this._token.then((t=>this._rpc.sendTouchTypistCommand({token:t,args:e}))),this.requestSynonyms=(...e)=>this._token.then((t=>this._rpc.requestSynonyms({token:t,args:e}))),this.requestSnippets=(...e)=>this._token.then((t=>this._rpc.requestSnippets({token:t,args:e}))).then(s.UI(r.J.SnippetsResult.parse)),this.setSessionOption=(...e)=>this._token.then((t=>this._rpc.setSessionOption({token:t,args:[r.J.SessionOption.serialize(e[0])]}))),this.setContext=(...e)=>this._token.then((t=>this._rpc.setContext({token:t,args:[i.R$.serialize(e[0])]}))),this.requestDocStats=(...e)=>this._token.then((t=>this._rpc.requestDocStats({token:t,args:e}))),this.ping=(...e)=>this._token.then((t=>this._rpc.ping({token:t,args:e}))),this.getText=(...e)=>this._token.then((t=>this._rpc.getText({token:t,args:e}))),this.isClosed=(...e)=>this._token.then((t=>this._rpc.isClosed({token:t,args:e}))),this.close=(...e)=>this._token.then((t=>this._rpc.close({token:t,args:e}))),this.sendFeedback=(...e)=>this._token.then((t=>this._rpc.sendFeedback({token:t,args:e}))),this.enablePlagiarismSearch=(...e)=>this._token.then((t=>this._rpc.enablePlagiarismSearch({token:t,args:e}))),this.disablePlagiarismSearch=(...e)=>this._token.then((t=>this._rpc.disablePlagiarismSearch({token:t,args:e}))),this.enableWritingExpert=(...e)=>this._token.then((t=>this._rpc.enableWritingExpert({token:t,args:e}))),this.disableWritingExpert=(...e)=>this._token.then((t=>this._rpc.disableWritingExpert({token:t,args:e}))),this.enableAudienceAdapt=(...e)=>this._token.then((t=>this._rpc.enableAudienceAdapt({token:t,args:e}))),this.disableAudienceAdapt=(...e)=>this._token.then((t=>this._rpc.disableAudienceAdapt({token:t,args:e}))),this.enableAiStudio=(...e)=>this._token.then((t=>this._rpc.enableAiStudio({token:t,args:e}))),this.disableAiStudio=(...e)=>this._token.then((t=>this._rpc.disableAiStudio({token:t,args:e}))),this.realtimeProofitSubmit=(...e)=>this._token.then((t=>this._rpc.realtimeProofitSubmit({token:t,args:e}))),this.realtimeProofitCancel=(...e)=>this._token.then((t=>this._rpc.realtimeProofitCancel({token:t,args:e}))),this.shortenItSubmit=(...e)=>this._token.then((t=>this._rpc.shortenItSubmit({token:t,args:e}))),this.getCheckingState=(...e)=>this._token.then((t=>this._rpc.getCheckingState({token:t,args:e}))),this.getAsyncChecksState=(...e)=>this._token.then((t=>this._rpc.getAsyncChecksState({token:t,args:e}))),this.getCheckingStateObs=(...e)=>this._token.then((t=>this._rpc.getCheckingStateObs({token:t,args:e}))),this.getEventsObs=(...e)=>this._token.then((t=>this._rpc.getEventsObs({token:t,args:e}))),this.getMessagesObs=(...e)=>this._token.then((t=>this._rpc.getMessagesObs({token:t,args:e}))),this.connect=(...e)=>this._token.then((t=>this._rpc.connect({token:t,args:[r.J.Reset.serialize(e[0])]}))),this.submitRecipients=(...e)=>this._token.then((t=>this._rpc.submitRecipients({token:t,args:e}))),this.sendUserAction=(...e)=>this._token.then((t=>this._rpc.sendUserAction({token:t,args:e}))),this.sendDebugReport=(...e)=>this._token.then((t=>this._rpc.sendDebugReport({token:t,args:e}))),this.updateContextInfo=(...e)=>this._token.then((t=>this._rpc.updateContextInfo({token:t,args:e}))),this.published=(...e)=>this._token.then((t=>this._rpc.published({token:t,args:e}))),this.submitScoreSurveyResult=(...e)=>this._token.then((t=>this._rpc.submitScoreSurveyResult({token:t,args:e}))),this.submitSurvey=(...e)=>this._token.then((t=>this._rpc.submitSurvey({token:t,args:e}))),this.resetReconnectInfo=(...e)=>this._token.then((t=>this._rpc.resetReconnectInfo({token:t,args:e}))),this.sendMessage=(...e)=>this._token.then((t=>this._rpc.sendMessage({token:t,args:e}))),this.unregisterExternalMessageHandler=()=>Promise.resolve(),this.enablePlagiarismAndAiDetectorSearch=()=>Promise.resolve(s.F2(void 0)),this.disablePlagiarismAndAiDetectorSearch=()=>Promise.resolve(s.F2(void 0)),this.getToken=()=>this._token,this.dispose=()=>this._token.then((e=>this._rpc.stopSession(e)))}}},43389:(e,t,n)=>{n.d(t,{$:()=>o,EA:()=>r,QK:()=>a,SV:()=>s,Td:()=>l,x:()=>g});var i,s,r,o,a,l,c,u=n(32103),d=n(21147),h=n(948);!function(e){e.isNoop=function(e){return 0===e.startOffset&&0===e.endOffset}}(i||(i={})),function(e){function t(e){return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}e.eq=d.MW({start:d.lr,end:d.lr}),e.normalize=t,e.mergeAdjacent=function(e){return t=>{if(0===t.length)return[];const n=[t[0]];for(let i=1;i<t.length;++i){const s=n[n.length-1];e(s,t[i])?n[n.length-1]={start:s.start,end:t[i].end}:n.push(t[i])}return n}},e.create=function(e,n){return t({start:e,end:null!=n?n:e})},e.translate=function(e,t){return 0===t?e:{start:e.start+t,end:e.end+t}},e.transform=function(e,t){return i.isNoop(t)?e:{start:e.start+t.startOffset,end:e.end+t.endOffset}},e.rebase=function(e,t){return t.reduce(((e,t)=>{const n=h.q.getTransformOffset(t);return{start:t.pos<=e.start?Math.max(t.pos,e.start+n):e.start,end:t.pos<e.end?Math.max(t.pos,e.end+n):e.end}}),e)},e.contains=function(e,t,n){const i=n?t.start<=e.end:t.start<e.end;return t.start>=e.start&&i&&t.end>=e.start&&t.end<=e.end},e.isAdjacent=function(e,t){return e.end===t.start||t.end===e.start},e.intersects=function(e,t){return e.start>=t.start&&e.start<t.end||t.start>=e.start&&t.start<e.end},e.equals=function(t,n){return e.eq.equals(t,n)},e.toString=function(e){return`[${e.start}, ${e.end}]`},e.isCollapsed=function(e){return e.start===e.end},e.convertFromRawTransform=function(e){return{start:e.s,end:e.e}},e.length=function(e){return e.end-e.start}}(s||(s={})),function(e){e.hasTransformJSON=function(e){return"transformJSON"in e}}(r||(r={})),function(e){function t(e,t,n){return e.slice(t.start,t.end)===n}function n(e){return"transformJSON"in e&&Boolean(e.transformJSON)}function i(e){return"subalerts"in e&&e.subalerts&&"labels"in e&&Boolean(e.labels)}function r(e){return!n(e)&&!i(e)}function o({withPosition:e,withTransformJSON:t,withSubAlerts:s}){return o=>r(o)?e(o):n(o)?t(o):i(o)?s(o):void(0,u.vE)(o)}e.convertHighlightRangeFromRawTransform=e=>({...s.convertFromRawTransform(e),type:e.type}),e.isConsistentWithText=function(n,i){let s;if(e.isWithSubAlerts(n))s=n.highlightRanges.every(((e,s)=>t(i,e,n.highlightTexts[s])));else{const e=n.highlightRanges.find((e=>"enclosing"===e.type))||n.highlightRanges[0];s=t(i,e,n.highlightTexts[0])}return s&&(!e.isRegular(n)||t(i,n.transformRange,n.transformText))},e.isWithTransformJson=n,e.isWithSubAlerts=i,e.isWithPosition=r,e.isRegular=function(e){return r(e)||n(e)},e.match=o,e.map=function({withPosition:e,withTransformJSON:t,withSubAlerts:n}){return o({withPosition:e,withTransformJSON:t,withSubAlerts:n})}}(o||(o={})),function(e){e.waitingForConnection="waitingForConnection",e.waitingForReconnection="waitingForReconnection",e.startingConnection="startingConnection",e.newSessionStarted="newSessionStarted",e.existingSessionStarted="existingSessionStarted"}(a||(a={})),function(e){e.ready="ready",e.inProgress="inProgress",e.reconnectRequired="reconnectRequired"}(l||(l={})),function(e){e.unknown="unknown",e.clientQueueNonEmpty="clientQueueNonEmpty",e.noSuchSession="noSuchSession",e.cannotReconnectToSelf="cannotReconnectToSelf",e.differentUsers="differentUsers",e.sessionClosed="sessionClosed",e.messageCountIncorrect="messageCountIncorrect"}(c||(c={}));const g=(e,t)=>{if(!e)return c.clientQueueNonEmpty;if(!t)return c.unknown;const{reconnectFailedReason:n}=t;if("no such session"===n)return c.noSuchSession;if("cannot reconnect to self"===n)return c.cannotReconnectToSelf;if("different users"===n)return c.differentUsers;if("session is closed"===n)return c.sessionClosed;return n&&/(client send|server send|no such message in buffer)/.test(n)?c.messageCountIncorrect:c.unknown}},1799:(e,t,n)=>{n.d(t,{G:()=>r});var i,s=n(40594);!function(e){e.send="send",e.receive="receive"}(i||(i={}));class r{constructor(e,t=new Set(["session_inbound","wait_for_ot","before_alert","before_finish"]),n=s.Y.create(r.name,{skipWriteToConsole:!0})){this._docId=e,this._skipReceiveMessageKindSet=t,this._log=n}_handleAction(e,t,n){this._log.debug(`${this._docId} ${e} ${t}`,{type:e,message:n})}logSend(e){this._handleAction(i.send,e.name,e)}logReceive(e){this._skipReceiveMessageKindSet.has(e.event.kind)||this._handleAction(i.receive,e.event.kind,e)}}},36868:(e,t,n)=>{n.d(t,{Z:()=>k});var i=n(12518),s=n(67177),r=n(39953),o=n(36807),a=n(13391),l=n(74822),c=n(50750),u=n(54115),d=n(58303),h=n(43789),g=n(71401),p=n(45676),m=n(39963),f=n(40594),v=n(62480),_=n(43389),b=n(1799),S=n(36802),y=n(67800),C=n(40866),w=n(29483),x=n(2974);const E="bgSW-shutdown";class k{constructor(e,t,n,k,T,A=[],R,I,O,F,D,P,M=f.Y.create("CAPIRpcConnection"),N=new b.G((0,S.Of)(e.id))){this._doc=e,this._dialect=t,this._domainName=n,this._capiUrl=k,this._dynamicConfig=T,this._supportedFeatures=A,this._clientConfigs=R,this._clientName=I,this._clientSubType=O,this._clientVersion=F,this._integrationResultTracker=D,this._startSessionOptions=P,this._log=M,this._capiLogger=N,this._id=C._.createWithRandomId("dn"),this._sessionUuid=null,this._initialSessionUuid=null,this._attemptingReconnect=!1,this._reconnectRequestIncludesReconnectInfo=!1,this._subscriptions=[],this._reconnectInfo=d.YP,this._outgoingMessages=new l.x,this._reconnectionStatus=a.h.create(_.Td.ready),this._connectionStatus=a.h.create(_.QK.waitingForConnection),this.reconnect=(e=!0)=>{var t;this.close("Need to reconnect"),e&&this._supportedFeatures.includes(g.zV.reconnect)?(this._attemptingReconnect=!0,this._reconnectRequestIncludesReconnectInfo=d.pC(this._reconnectInfo),this._log.debug("[RECONNECT] Reconnecting to existing CAPI session")):(this._attemptingReconnect=!1,this._reconnectRequestIncludesReconnectInfo=!1,this._reconnectInfo=d.YP,this._log.debug("[RECONNECT] Connecting to new CAPI session")),this._reconnectionStatus.set(_.Td.inProgress),this._initRpcClient(),this._connectionStatus.set(_.QK.startingConnection);const n=h.RI.resFromText((0,y.l)(null!==(t=this._cachedRichTextOnServiceWorkerShutdown)&&void 0!==t?t:this._currentRichText,""));return this._capiLogger.logSend({name:"connect",args:[n]}),this._rpc.connect(n)},this.close=e=>{this._log.trace("Closing connection.",{reason:e}),this._capiLogger.logSend({name:"close",args:[e]}),this._rpc.close(e).catch((e=>{this._log.warn(`Can't close api instance: ${e.message?e.message:JSON.stringify(e)}`)})),this._rpc.dispose(),this._cleanListeners(),this._connectionStatus.set(_.QK.waitingForReconnection)},this.dispose=()=>{this._currentRichText=new o.i,this._dynamicConfig=void 0,(0,w.OB)().message.off(E,this._handleBackgroundServiceWorkerShutdown)},this.getEventsObs=()=>this._rpc.getEventsObs(),this.getMessagesObs=()=>this._rpc.getMessagesObs(),this.getCheckingStateObs=()=>this._rpc.getCheckingStateObs(),this.requestSnippets=async(...e)=>(this._capiLogger.logSend({name:"requestSnippets",args:e}),this._reconnectionStatus.get()===_.Td.reconnectRequired?(await this.reconnect(),this._rpc.requestSnippets(...e)):this._rpc.requestSnippets(...e)),this.requestSynonyms=async(...e)=>(this._capiLogger.logSend({name:"requestSynonyms",args:e}),this._reconnectionStatus.get()===_.Td.reconnectRequired?(await this.reconnect(),this._rpc.requestSynonyms(...e)):this._rpc.requestSynonyms(...e)),this.sendMessage=(...e)=>(0,r.zG)(s.Y3((()=>(this._capiLogger.logSend({name:"sendMessage",args:e}),this._reconnectionStatus.get()===_.Td.reconnectRequired?this.reconnect():Promise.resolve())),i.KC),s.Zl((()=>()=>this._rpc.sendMessage(...e)))),this.sendRPCMessage=e=>{this._outgoingMessages.next(e),this._reconnectionStatus.get()===_.Td.reconnectRequired&&this.reconnect()},this._onSessionStart=({sessionUuid:e,isNewSession:t,reconnectedInfo:n})=>{var i,s;if(this._sessionUuid=e,this._cachedRichTextOnServiceWorkerShutdown=void 0,t){if(this._id=C._.createWithRandomId("dn"),this._connectionStatus.set(_.QK.newSessionStarted),this._attemptingReconnect){const e=(0,_.x)(this._reconnectRequestIncludesReconnectInfo,n);(0,m.Tb)().sendFemetricsRate("reconnectToSessionFailed",{reconnectFailedReason:e}),null===(i=this._integrationResultTracker)||void 0===i||i.trackIntegrationStage({stage:"gbutton-initialized",g_button_initialized_status:"fail"}),null===(s=this._integrationResultTracker)||void 0===s||s.sendIntegrationResultEvent("error"),this._log.warn("CAPI session reconnect failed",e)}this._log.info(`New CAPI session created (${e})`)}else this._log.debug(`[RECONNECT] Continuing existing session (${e})`),this._connectionStatus.set(_.QK.existingSessionStarted),(0,m.Tb)().sendFemetricsRate("reconnectToSessionSuccess");this._attemptingReconnect=!1,this._initialSessionUuid=this._initialSessionUuid||e,this._reconnectionStatus.set(_.Td.ready)},this._onReconnectInfo=e=>{this._reconnectInfo=d.ij(e.reconnectInfo)},this._isFirstMessageWithRevision=e=>C.Q.getRevisionNumber(e)<1,this._initListeners=()=>{this._subscriptions.push(c.D(this.getEventsObs()).pipe(u.B()).subscribe((({rev:e,event:t})=>{var n,i;p.hX.is("session_started")(t)?(this._onSessionStart(t),null===(n=this._integrationResultTracker)||void 0===n||n.trackCAPISessionStarted({type:"received",session_id:t.sessionUuid,capi_session_type:t.isNewSession?"new":"cached"})):p.hX.is("reconnect_info_updated")(t)&&this._onReconnectInfo(t),this._isFirstMessageWithRevision(e)&&p.hX.is("sdui_add")(t)&&(null===(i=this._integrationResultTracker)||void 0===i||i.trackFirstMessageWithRevision({type:"received"})),this._capiLogger.logReceive({rev:e,event:t})})))},this._cleanListeners=()=>{this._subscriptions.forEach((e=>e.unsubscribe())),this._subscriptions=[]},this._sendOutgoingMessage=e=>{this._capiLogger.logSend(e),"pushChanges"!==e.name?"sendUserAction"!==e.name?this._rpc[e.name].apply(null,e.args).catch((t=>{this._log.warn(`Error with ${e.name}: ${t.message?t.message:t}`)})):this._rpc.sendUserAction(...e.args).catch((t=>{this._log.warn(`Error with ${e.name}: ${t.message?t.message:t}`)})):this._rpc.pushChanges(e.revision,...e.args).then((()=>{var t;this._isFirstMessageWithRevision(e.revision)&&(null===(t=this._integrationResultTracker)||void 0===t||t.trackFirstMessageWithRevision({type:"sent"}))})).catch((t=>{this._log.warn(`Error with ${e.name}: ${t.message?t.message:t}`)}))},this._initRpcClient=()=>{var e,t,n;const i=(0,w.OB)().capiBgRpc;if(!i)throw null===(e=this._integrationResultTracker)||void 0===e||e.sendIntegrationResultEvent("error"),new Error("CAPI BG RPC client is not available for current environment");this._rpc=new v.C(i.api,{docId:this._doc.id,dialect:(0,r.zG)(this._doc.settings.lens("context").lens("dialect").get(),d.pF((()=>this._dialect))),domain:this._domainName,capiUrl:this._capiUrl,supportedFeatures:this._supportedFeatures,clientConfigs:this._clientConfigs,clientName:this._clientName,clientSubType:this._clientSubType,context:this._doc.settings.get().context,clientVersion:this._clientVersion,startSessionOptions:{...this._startSessionOptions,...(0,r.zG)(this._reconnectInfo,d.g_((()=>this._initialSessionUuid?{reconnectInfo:{sessionUuid:this._initialSessionUuid}}:{}),(e=>({reconnectInfo:e}))))},useDlp:!!(null===(t=this._dynamicConfig)||void 0===t?void 0:t.dlpEnabled),dlpConfiguration:null===(n=this._dynamicConfig)||void 0===n?void 0:n.dlpConfiguration,integrationResultTracker:this._integrationResultTracker}),this._initListeners()},this._handleBackgroundServiceWorkerShutdown=()=>{this._reconnectionStatus.get()!==_.Td.reconnectRequired&&this._connectionStatus.get()!==_.QK.waitingForConnection&&(this._log.debug("[RECONNECT] Lost connection to service worker. Queuing up reconnection."),this._cachedRichTextOnServiceWorkerShutdown=this._currentRichText,this._reconnectionStatus.set(_.Td.reconnectRequired))},this._initOutgoingMessageBuffering=()=>{(0,w.OB)().message.on(E,this._handleBackgroundServiceWorkerShutdown);(0,x.Y)(this._outgoingMessages,this._reconnectionStatus).subscribe(this._sendOutgoingMessage)},this.getToken=()=>this._rpc.getToken(),this._initRpcClient(),this._initOutgoingMessageBuffering()}get id(){return this._id}get sessionUuid(){return this._sessionUuid}get initialSessionUuid(){return this._initialSessionUuid}get connectionStatus(){return this._connectionStatus}get currentRichText(){return this._currentRichText}set currentRichText(e){this._currentRichText=e}}},42495:(e,t,n)=>{var i;n.d(t,{H:()=>i}),function(e){e.idle="idle",e.inProgress="inProgress"}(i||(i={}))},82367:(e,t,n)=>{n.d(t,{K:()=>l});var i=n(64271),s=n(70843),r=n(20905),o=n(29483),a=n(42495);class l{constructor(e){this._subs=[],this._setCheckingStatusIdle=e.setCheckingStatusIdle,this._subs.push((0,i.T)(e.messages,e.checkingStatus).subscribe(this._onCheckingServiceMessageOrStatus.bind(this)))}_onCheckingServiceMessageOrStatus(e){clearTimeout(this._checkingStatusTimeout),e!==a.H.idle&&(this._checkingStatusTimeout=setTimeout((()=>{this._isInTestGroup||"test"===(0,o.OB)().experimentClient.getTreatment(s.p.CAPICheckingInProgressTimeout)?(this._isInTestGroup=!0,this._setCheckingStatusIdle()):this.dispose()}),r.m9(20)))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[],clearTimeout(this._checkingStatusTimeout)}}},73985:(e,t,n)=>{n.d(t,{R:()=>V});var i=n(90023),s=n(32103),r=n(13391),o=n(74822),a=n(55341),l=n(90572),c=n(50750),u=n(20161),d=n(59179),h=n(84178),g=n(64271),p=n(29479),m=n(954),f=n(2187),v=n(54115),_=n(12518),b=n(58303),S=n(43789),y=n(8907),C=n(45676),w=n(47665),x=n(26763),E=n(50905),k=n(16381),T=n(39963),A=n(40594),R=n(43389),I=n(36868),O=n(67385),F=n(38709),D=n(65554),P=n(67800),M=n(90595),N=n(40866),B=n(91957),U=n(29483),L=n(60809),G=n(42495),H=n(82367),j=n(25642),K=n(35117);class V{constructor(e,t,n,s,l,c=s.appConfig.url.capi,u=[],d,h=i.yR,g=s.appConfig.capi.clientType,p=s.appConfig.capi.clientSubType,m,f,v=A.Y.create("DenaliCapiCheckingServiceImpl")){this._doc=e,this._domainName=n,this._config=s,this._clientConfigs=d,this._mapChange=h,this._integrationResultTracker=m,this._startSessionOptions=f,this._log=v,this._incomingMessages=new o.x,this._capiEvents=new o.x,this._capiMessages=new o.x,this._checkingState=r.h.create(G.H.idle),this._subs=[],this._readyState=r.h.create(O.kQ.notReady),this._connectionClosed=new o.x,this._sessionWithAlertsAcceptedSent=!1,this._wasSent=!1,this._nextRevision=0,this._canDispose=Promise.resolve(!0),this._disposables=[],this.checkingRevisionInfo=new a.t(1),this._getContainerId=()=>(0,U.OB)().bgRpc.api.getContainerIdOrUndefined("DenaliCapiCheckingService").then((e=>e&&"string"==typeof e?e:Promise.reject(void 0))),this._processSynonymsResult=(e,t,n,i)=>({id:e,kind:"synonym",position:i,replacements:_.g_((e=>e),(()=>[]))(t),meanings:_.g_((e=>[{meaning:"",synonyms:e.map((e=>({base:e,derived:e,def:""})))}]),(e=>e.map((e=>({meaning:e.meaning,synonyms:e.words.map((e=>({base:e,derived:e,def:""})))})))))(t),token:n,url:""}),this.capiEmotionFeedback={EMOTION_LIKE:y.y_.EMOTION_LIKE,EMOTION_DISLIKE:y.y_.EMOTION_DISLIKE,EMOTION_INCORRECT:y.y_.EMOTION_DISLIKE,EMOTION_OFFENSIVE:y.y_.EMOTION_OFFENSIVE},this.messages=this._incomingMessages.asObservable(),this.capiEvents=this._capiEvents.asObservable(),this.capiMessages=this._capiMessages.asObservable(),this.checkingStatus=this._checkingState.view(),this.readyState=this._readyState.view(),this._connection=new I.Z(this._doc,t,n,c,l,u,this._clientConfigs,g,p,this._config.buildInfo.version,this._integrationResultTracker,f),this._disposables.push(this._connection),this._initListeners(),this._connection.connectionStatus.subscribe((e=>this._handleConnectionStatus(e))),this._disposables.push(new H.K({messages:this._incomingMessages,checkingStatus:this._checkingState,setCheckingStatusIdle:()=>{this._checkingState.set(G.H.idle)}}))}_initListeners(){this._subs.push(this._doc.settings.view("context").pipe(l.h((e=>!(0,U.OB)().experimentClient.isGateEnabled(M.K.PreventEmptySetContext)||!(0,L.R)(e)))).subscribe((e=>{this._connection.sendRPCMessage({name:"setSessionOption",args:[{kind:y.rP.Context,context:e}]})})),c.D(this._connection.getEventsObs()).pipe(u.w((e=>{const t=e.pipe(d.U((({event:e})=>e)));return t.pipe(l.h(C.hX.is("ready")),u.w((()=>t.pipe(l.h(C.hX.is("finish")),h.q(1),u.w((()=>g.T(t.pipe(l.h(C.hX.is("disconnect"))),this._connectionClosed).pipe(h.q(1),p.h(O.kQ.disconnected),m.O(O.kQ.firstTextCheckCompleted)))),m.O(O.kQ.ready)))))}))).subscribe(f.wW(this._readyState)),c.D(this._connection.getCheckingStateObs()).pipe(v.B()).subscribe((e=>{this._checkingState.set((e=>{switch(e){case"idle":return G.H.idle;case"checking":case"full":return G.H.inProgress;default:return(0,s.vE)(e)}})(e))})),c.D(this._connection.getEventsObs()).pipe(v.B()).subscribe((({rev:e,event:t})=>{var n;if(this._capiEvents.next(t),C.hX.is("realtime_proofit_availability")(t))this._incomingMessages.next(O.J8.proofitAvailability(t));else if(C.hX.is("realtime_proofit_cancel_resp")(t))this._incomingMessages.next(O.J8.proofitCancelResponse(t));else if(C.hX.is("realtime_proofit_completed")(t))this._incomingMessages.next(O.J8.proofitCompleted(t));else if(C.hX.is("realtime_proofit_in_progress")(t))this._incomingMessages.next(O.J8.proofitProgress(t));else if(C.hX.is("realtime_proofit_progress_error")(t))this._incomingMessages.next(O.J8.proofitProgressError(t));else if(C.hX.is("realtime_proofit_progress_rejected")(t))this._incomingMessages.next(O.J8.proofitProgressRejected(t));else if(C.hX.is("realtime_proofit_submit_resp")(t))this._incomingMessages.next(O.J8.proofitSubmitResponse(t));else if(C.hX.is("emotions")(t)){const e=t.emotions.reduce(((e,t)=>e+t.confidence),0);this._incomingMessages.next(O.J8.emogenie({action:"emotions",hidden:null!==(n=t.hidden)&&void 0!==n&&n,institutionLogo:t.institutionLogo,brandTonesEnabled:t.brandTonesEnabled,brandTonesConfigured:t.brandTonesConfigured,emotions:t.emotions.map((t=>({...t,prevalence:((e,t)=>e<.25?"Slight":e<.5?"Moderate":e/t>.5?"Very strong":"Strong")(t.confidence,e)})))}))}else C.hX.is("alert_received")(t)?this._incomingMessages.next(O.J8.add((0,F.IM)(t.alert,e))):C.hX.is("alert_removed")(t)?this._incomingMessages.next(O.J8.remove(t.alertId)):C.hX.is("alert_changed")(t)?this._incomingMessages.next(O.J8.change((0,F.hK)(t,this._connection.id))):C.hX.is("finish")(t)?this._incomingMessages.next(O.J8.finished((0,D._)(t,this._connection.id))):C.hX.is("session_started")(t)?(this._incomingMessages.next(O.J8.start(t)),this._getContainerId().then((e=>{setTimeout((()=>{this._connection.sendRPCMessage({name:"setSessionOption",args:[{kind:y.rP.GnarContainerId,id:e}]})}),5e3)})).catch((e=>{this._log.warn("Cannot get container id.",e)}))):C.hX.is("text_info")(t)?this._incomingMessages.next(O.J8.textInfo({...t.data,messages:b.fS((()=>{}))(t.data.messages)})):C.hX.is("message_received")(t)&&"submit_ot"===t.message.action?this._incomingMessages.next(O.J8.submitOtAck(t.message)):C.hX.is("feedback_ack")(t)?this._incomingMessages.next(O.J8.feedbackAck({scores:t.outcomeScores,scoreStatus:t.scoreStatus})):C.hX.is("attention_heatmap_received")(t)||C.hX.is("attention_info_received")(t)||(C.hX.is("error")(t)?this._incomingMessages.next(O.J8.error(t)):C.hX.is("shorten_it_finished")(t)||(C.hX.is("published_ack")(t)?this._incomingMessages.next(O.J8.publishedAck(t)):C.hX.is("show_survey")(t)?this._incomingMessages.next(O.J8.showSurvey(t)):C.hX.is("submit_survey_result_ack")(t)?this._incomingMessages.next(O.J8.submitSurveyResultAck()):C.hX.is("sdui_add")(t)?this._incomingMessages.next(O.J8.sduiAdd(t)):C.hX.is("sdui_update")(t)?this._incomingMessages.next(O.J8.sduiUpdate(t)):C.hX.is("sdui_remove")(t)?this._incomingMessages.next(O.J8.sduiRemove(t)):C.hX.is("async_check_finished")(t)?this._incomingMessages.next(O.J8.asyncCheckFinished(t)):C.hX.is("toggle_checks_ack")(t)?this._incomingMessages.next(O.J8.toggleChecksAck(t)):C.hX.is("set_context_ack")(t)?this._incomingMessages.next(O.J8.setContextAck(t)):C.hX.is("trigger_touch_typist")(t)&&this._incomingMessages.next(O.J8.setTouchTypistTriggerResponse(t))))})),c.D(this._connection.getMessagesObs()).pipe(v.B()).subscribe((e=>this._capiMessages.next(e))))}_cleanListeners(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_handleConnectionStatus(e){switch(e){case R.QK.waitingForConnection:break;case R.QK.startingConnection:this._initListeners();break;case R.QK.waitingForReconnection:this._connectionClosed.next(void 0),this._checkingState.set(G.H.idle),this._cleanListeners();break;case R.QK.newSessionStarted:this._nextRevision=0,this.checkingRevisionInfo.next({revision:this._getRemoteRevision(),sessionJustStarted:!0}),this._nextRevision++;break;case R.QK.existingSessionStarted:break;default:(0,s.vE)(e)}}_getRemoteRevision(){return N.Q.create(this._connection.id,this._nextRevision)}setDelta(e){const t=this._connection.currentRichText?this._connection.currentRichText.length():0,n=this._connection.currentRichText?this._connection.currentRichText.diff(e):e;this._connection.currentRichText=e;const i=this._getRemoteRevision();if(n.length()||!this._wasSent){const e=this._wasSent?S.RI.delta(n,t):_.fS((()=>S.RI.resFromText((0,P.l)(n,""))))(S.RI.res(n));this._log.debug(`${this._wasSent?"SENDING":"RESETTING"} delta for checking @ ${i}`),this._connection.sendRPCMessage({name:"pushChanges",revision:i,args:[this._mapChange(e)]}),this._connection.sendRPCMessage({name:"pushChanges",revision:i,args:[S.RI.flush()]}),this._wasSent=!0,this.checkingRevisionInfo.next({revision:i,sessionJustStarted:0===this._nextRevision}),this._nextRevision++}else this._log.debug(`NO CHANGES in delta @ ${i}`);return i}requestSynonyms(e,t){return new Promise(((n,i)=>{this._connection.requestSynonyms(t,e).then((s=>{_.nM(s)?i(s.left.message):b.g_((()=>{i("No synonyms found")}),(i=>{n(this._processSynonymsResult(s.right.id,i,e,t))}))(s.right.synonymsOrGroups)})).catch(i)}))}enableAudienceAdapt(){throw new Error("Method not implemented.")}disableAudienceAdapt(){throw new Error("Method not implemented.")}enableAiStudio(){throw new Error("Method not implemented.")}disableAiStudio(){throw new Error("Method not implemented.")}requestSnippets(e){return new Promise(((t,n)=>{this._connection.requestSnippets(e).then((e=>{_.nM(e)?n(e.left.message):t(e.right)})).catch(n)}))}onEmogenieFeedback(e,t,n){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:t,emotionName:e,subtype:n}]})}onAlertApplied(e,t,n,i,s,r=!0){this._sendAlertAcceptedMetrics(),r&&this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.PZ.ACCEPTED,id:y.wQ.Id.create(e.id),replacementText:n,subtype:t,reason:i,gbPrompt:s}]})}onHasFirstVisibleHighlight(e){const t=e.alertId;this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.PZ.RENDERED,id:y.wQ.Id.create(t),subtype:y.e3.Inline}]})}onAlertWithTransformJsonApplied(e,t,n,i,s,r,o){this._sendAlertAcceptedMetrics(),this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.PZ.ACCEPTED,id:y.wQ.Id.create(e.id),alternativeIndex:n,subtype:t,reason:i,gapValue:s,dismissedTransformGroups:r,gbPrompt:o}]})}onSynonymApplied(e,t,n){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.at.SYNONYM_ACCEPTED,id:e.id,replacementText:n,subtype:t}]})}sendWritingExpertSuggestionFeedback(e,t,n){switch(n){case"ACCEPTED":this._connection.sendRPCMessage({name:"sendFeedback",args:[{id:y.wQ.Id.create(e),subtype:t,alternativeIndex:0,kind:y.PZ.ACCEPTED}]});break;case"IGNORE":this._connection.sendRPCMessage({name:"sendFeedback",args:[{id:y.wQ.Id.create(e),subtype:t,kind:y.PZ.IGNORE}]});break;case"LOOKED":this._connection.sendRPCMessage({name:"sendFeedback",args:[{id:y.wQ.Id.create(e),subtype:t,kind:y.PZ.LOOKED}]});break;case"RENDERED":this._connection.sendRPCMessage({name:"sendFeedback",args:[{id:y.wQ.Id.create(e),subtype:t,kind:y.PZ.RENDERED}]});break;default:(0,s.vE)(n)}}sendWritingExpertSuggestionUserAction(e,t){this._connection.sendRPCMessage({name:"sendUserAction",args:[e,t]})}sendTouchTypistPreviewFeedback(e,t,n){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:e,touchTypistId:t,previewId:n}]})}enablePlagiarismCheck(){this._connection.sendRPCMessage({name:"enablePlagiarismSearch",args:[]})}disablePlagiarismCheck(){this._connection.sendRPCMessage({name:"disablePlagiarismSearch",args:[]})}sendTouchTypistCommand(e){this._connection.sendRPCMessage({name:"sendTouchTypistCommand",args:[e]})}enableWritingExpertCheck(){this._connection.sendRPCMessage({name:"enableWritingExpert",args:[]})}disableWritingExpertCheck(){this._connection.sendRPCMessage({name:"disableWritingExpert",args:[]})}enableAudienceAdapter(e){this._connection.sendRPCMessage({name:"enableAudienceAdapt",args:[e]})}onAlertIgnored(e,t,n,i){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.PZ.IGNORE,id:y.wQ.Id.create(e.id),subtype:t,reason:n,pnameQualifier:i}]})}onAlertMuted(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.Mw.MUTE,userMuteScope:y.JW.ScopeType.GLOBAL,userMuteCategories:[e]}]})}onAlertUnmuted(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.Mw.UNMUTE,userMuteScope:y.JW.ScopeType.GLOBAL,userMuteCategories:[e]}]})}onAlertAcknowledged(e,t,n,i){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.PZ.ACKNOWLEDGED,id:e,subtype:t,text:n,pnameQualifier:i}]})}onAlertSimpleFeedback(e,t,n){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:t,id:y.wQ.Id.create(e),subtype:n}]})}onAutocorrectAlertApplied(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.VD.AUTOCORRECT_REPLACE,before:e.before,after:e.after,context:e.context}]})}onAutocorrectAlertAccepted(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.VD.AUTOCORRECT_ACCEPT,before:e.before,after:e.after,context:e.context}]})}onAutocorrectAlertDismissed(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[{kind:y.VD.AUTOCORRECT_DISMISS,before:e.before,after:e.after,context:e.context,expected:e.expected}]})}onAutoapplyFeedback({alertId:e,kind:t}){this._connection.sendRPCMessage({name:"sendFeedback",args:[{subtype:y.e3.Inline,alertId:e,kind:t}]})}sendMutedFeedback(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[e]})}onSnippetFeedback(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[e]})}onAssistantFeedback(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[e]})}ping(){this._connection.sendRPCMessage({name:"ping",args:[]})}sendEmotionSentenceFeedback(e){this._connection.sendRPCMessage({name:"sendFeedback",args:[e]})}updateStartSessionOptions(e){this._startSessionOptions={...this._startSessionOptions,...e}}reconnect(e){void 0!==e&&(this._connection.currentRichText=e),this._connection.reconnect(!1)}closeConnection(e="Was asked to"){this._connection.close(e)}proofitSubmit(e){this._connection.sendRPCMessage({name:"realtimeProofitSubmit",args:[e]})}proofitCancel(){this._connection.sendRPCMessage({name:"realtimeProofitCancel",args:[]})}submitRecipients(e){this._connection.sendRPCMessage({name:"submitRecipients",args:[e]})}sendUserAction(e,t){return this._connection.sendRPCMessage({name:"sendUserAction",args:[e,t]}),0}sendDebugReport(e,t){this._connection.sendRPCMessage({name:"sendDebugReport",args:[e,t]})}updateContextInfo(e){this._connection.sendRPCMessage({name:"updateContextInfo",args:[e]})}published(){this._connection.sendRPCMessage({name:"published",args:[]})}submitScoreSurveyResult(e,t){this._connection.sendRPCMessage({name:"submitScoreSurveyResult",args:[e,t]})}submitSurvey(e){this._connection.sendRPCMessage({name:"submitSurvey",args:[e]})}setSessionOption(e){this._connection.sendRPCMessage({name:"setSessionOption",args:[e]})}setContext(e){this._connection.sendRPCMessage({name:"setContext",args:[e]})}sendMessage(...e){return this._connection.sendMessage(...e)}get sessionUuid(){return this._connection.sessionUuid}get initialSessionUuid(){return this._connection.initialSessionUuid}get clientConfigs(){return this._clientConfigs}get token(){return this._connection.getToken()}delayDisposeUntil(e){this._canDispose=e}_sendAlertAcceptedMetrics(){this._sessionWithAlertsAcceptedSent||((0,T.Tb)().sendFemetricsRate("sessionWithAlertsAccepted",{domain:(0,B.Cg)(this._domainName),isIframe:(0,k.n_)()},["firstInstall","registrationDate","userOrganizationType"]),this._sessionWithAlertsAcceptedSent=!0),(0,T.Tb)().sendFemetricsRate("alertAccepted",{domain:(0,B.Cg)(this._domainName),isIframe:(0,k.n_)()},["firstInstall","registrationDate"])}async dispose(){await this._canDispose,this.closeConnection("Disposed"),this._disposables.forEach((e=>e.dispose())),this._disposables=[]}static getFactory(e={}){const{capiUrl:t,clientSubType:n}=e;return({doc:s,mapChange:r,integrationName:o,textFieldId:a},l)=>{var c;const u=a?{...l.capiStartSessionOptions,editorId:a}:l.capiStartSessionOptions;return new V(s,(d=l).state.dapi.dialectStrong||d.state.dapi.dialectWeak,l.state.page.domain,l.pageContext.config,l.state.dynamicConfig,t,(null!==(c=e.getCapiFeatureFlags)&&void 0!==c?c:(0,j.l)())({fieldIntegrationContext:l,integrationName:o,dynamicConfig:l.state.dynamicConfig}),(0,i.zG)(K.m,(e=>(0,x.X)(e,l.state.user)),w.X,E.X)({dynamicConfig:l.state.dynamicConfig,browser:l.pageContext.config.bundleInfo.browser,experimentClient:l.experimentClient,integrationName:o,domain:l.state.page.domain}),r,void 0,n,l.integrationResultTracker,u,void 0);var d}}}},67385:(e,t,n)=>{n.d(t,{DD:()=>_,J8:()=>b,TC:()=>r,kQ:()=>y,uM:()=>s,wF:()=>v});var i,s,r,o=n(39953),a=n(15217),l=n(32103),c=n(55709),u=n(94173),d=n(58303),h=n(8907),g=n(71401),p=n(78767),m=n(43389);!function(e){e.synonym="Synonym",e.plagiarism="Plagiarism",e.grammar="Grammar",e.contextualSpelling="ContextualSpelling",e.sentenceStructure="SentenceStructure",e.punctuation="Punctuation",e.style="Style",e.enhancement="Enhancement",e.spelling="Spelling",e.voxStyle="VoxStyle",e.snippets="Snippets",e.correctness="Correctness",e.other="Other"}(i||(i={})),function(e){e.sales_crm="sales_crm",e.sales_engagement="sales_engagement",e.sales_enablement="sales_enablement",e.marketing_email_automation="marketing_email_automation",e.marketing_content="marketing_content",e.customer_service="customer_service",e.customer_surveys_surveys="customer_surveys_surveys",e.recruiting="recruiting",e.training_learning="training_learning",e.project_management="project_management",e.legal="legal",e.contractors="contractors",e.human_resources="human_resources",e.email="email",e.business_chat="business_chat"}(s||(s={})),function(e){e.correctness="correctness",e.clarity="clarity",e.engagement="engagement",e.tone="tone",e.vox="vox",e.knowledgeHub="knowledgeHub",e.other="other"}(r||(r={}));const f=[r.clarity,r.correctness,r.engagement,r.tone],v=e=>f.includes(e);var _,b,S,y;!function(e){function t({withPosition:t,withTransformJSON:n,withSubAlerts:i}){return s=>e.isWithPosition(s)?t(s):e.isWithTransformJson(s)?n(s):e.isWithSubAlerts(s)?i(s):void(0,l.vE)(s)}e.isWithTransformJson=e=>m.$.isWithTransformJson(e),e.isWithSubAlerts=e=>m.$.isWithSubAlerts(e),e.isWithPosition=e=>m.$.isWithPosition(e),e.isRegular=e=>m.$.isRegular(e),e.match=t;const n={Correctness:r.correctness,Clarity:r.clarity,Engagement:r.engagement,Tone:r.tone,"Style guide":r.vox,"Knowledge Hub":r.knowledgeHub};e.createOutcomeType=function(e){return e&&n[e]||r.other},e.ordering={greaterThanOrEqual:(e,t)=>e.isEthicalAIStandWithUkraine||t.isEthicalAIStandWithUkraine?e.isEthicalAIStandWithUkraine:e.isSuggestedSnippet||t.isSuggestedSnippet?e.priority>=t.priority:!e.isFree&&t.isFree||e.isFree&&!t.isFree?e.isVox||t.isVox?e.isVox:e.isFree:e.group===i.spelling&&t.group===i.spelling||e.group===i.contextualSpelling&&t.group===i.contextualSpelling||e.isVox&&t.isVox?e.priority>=t.priority:e.group===i.spelling||t.group!==i.spelling&&e.priority<=t.priority,areConflicting:(t,n)=>(!t.isFree&&!n.isFree||t.isFree&&n.isFree||t.isVox||n.isVox)&&!e.isMuted(t)&&!e.isMuted(n)&&(e.isRegular(t)&&e.isRegular(n)&&m.SV.equals(t.transformRange,n.transformRange)||(0,a.Hx)(t.highlightRanges,n.highlightRanges,m.SV.equals)),areSame:(e,n)=>{const i=e=>{const n=e=>({highlights:e.highlights,alternatives:(0,o.zG)(e.alternatives,d.UI((e=>({alternatives:e.alternatives}))))}),i=(0,o.zG)(e,t({withPosition:e=>({highlightTexts:e.highlightTexts,highlightRanges:e.highlightRanges,transformText:e.transformText,transformRange:e.transformRange,replacements:e.replacements}),withTransformJSON:e=>n(e.transformJSON),withSubAlerts:e=>n(e.subalerts)}));return Object.assign(i,{priority:e.priority,isFree:e.isFree,group:e.group,outcome:e.outcome,category:e.category}),i};return(0,p.fS)(i(e),i(n))}},e.isInline=e=>e.inline===h.wQ.Inline.inline,e.isMuted=e=>void 0!==e.muted&&e.muted!==h.JW.MutedByType.NOT_MUTED,e.isFreePremiumLockedDeprecated=e=>"locked_transform"===e.freePremium,e.isFreePremiumLocked=e=>"locked"===e.freePremium,e.isFreePremiumUnlocked=e=>"unlocked"===e.freePremium,e.isFreePremiumUphook=e=>"uphook"===e.freePremium,e.isHidden=e=>{var t;return null!==(t=e.isHidden)&&void 0!==t&&t}}(_||(_={})),function(e){let t;!function(e){e.start="start",e.add="add",e.changed="changed",e.remove="remove",e.finished="finished",e.emogenie="emogenie",e.textInfo="text_info",e.submitOtAck="submit_ot_ack",e.proofitAvailability="realtime_proofit_availability",e.proofitCancelResponse="realtime_proofit_cancel_resp",e.proofitCompleted="realtime_proofit_completed",e.proofitProgress="realtime_proofit_in_progress",e.proofitProgressError="realtime_proofit_progress_error",e.proofitProgressRejected="realtime_proofit_progress_rejected",e.proofitSubmitResponse="realtime_proofit_submit_resp",e.feedback="feedback",e.error="error",e.publishedAck="published_ack",e.submitSurveyResultAck="submit_survey_result_ack",e.showSurvey="show_survey",e.sduiAdd="sdui_add",e.sduiUpdate="sdui_update",e.sduiRemove="sdui_remove",e.asyncCheckFinished="async_check_finished",e.toggleChecksAck="toggle_checks_ack",e.setContextAck="set_context_ack",e.touchTypistTriggerResponse="trigger_touch_typist"}(t=e.Type||(e.Type={})),e.start=function(e){return{_tag:t.start,domainName:e.domainName,domainCategory:e.domainCategory,userMutedCategories:e.userMutedCategories,defaultDocumentContext:(0,o.zG)(c.R$.serializeDefault((0,o.zG)(e.defaultDocumentContext,d.g_((()=>c.R$.defaultContextFallback),u.y))),(e=>e)),sessionUuid:e.sessionUuid,isNewSession:e.isNewSession,allowedFeatures:e.allowedFeatures,cheetahState:e.cheetahState,maxWsMessageSize:e.maxWsMessageSize}},e.add=function(e){return{_tag:t.add,alert:e}},e.change=function(e){return{_tag:t.changed,changed:e}},e.remove=function(e){return{_tag:t.remove,removedId:e}},e.finished=function(e){return{_tag:t.finished,finished:e}},e.emogenie=function(e){return{_tag:t.emogenie,emogenieReport:{emotions:e.emotions,hidden:e.hidden,institutionLogo:e.institutionLogo,brandTonesEnabled:e.brandTonesEnabled,brandTonesConfigured:e.brandTonesConfigured}}},e.textInfo=function(e){return{_tag:t.textInfo,...e}},e.submitOtAck=function(e){return{_tag:t.submitOtAck,data:e}},e.feedbackAck=function({scores:e,scoreStatus:n}){return{_tag:t.feedback,scores:e?g.v0.OutcomeScores.normalize(e):void 0,scoreStatus:n}},e.proofitAvailability=function(e){return{_tag:t.proofitAvailability,info:e}},e.proofitSubmitResponse=function(e){return{_tag:t.proofitSubmitResponse,info:e}},e.proofitProgress=function(e){return{_tag:t.proofitProgress,info:e}},e.proofitCompleted=function(e){return{_tag:t.proofitCompleted,info:e}},e.proofitProgressError=function(e){return{_tag:t.proofitProgressError,info:e}},e.proofitProgressRejected=function(e){return{_tag:t.proofitProgressRejected,info:e}},e.proofitCancelResponse=function(e){return{_tag:t.proofitCancelResponse,info:e}},e.error=function(e){return{_tag:t.error,error:"not_authorized"===e.error?"not_authorized":"unknown",raw_error:e.error,event:e}},e.publishedAck=function(e){return{_tag:t.publishedAck,survey:e.survey}},e.submitSurveyResultAck=function(){return{_tag:t.submitSurveyResultAck}},e.showSurvey=function(e){return{_tag:t.showSurvey,survey:e.survey}},e.sduiAdd=function(e){return{_tag:t.sduiAdd,event:e}},e.sduiUpdate=function(e){return{_tag:t.sduiUpdate,event:e}},e.sduiRemove=function(e){return{_tag:t.sduiRemove,event:e}},e.asyncCheckFinished=function(e){return{_tag:t.asyncCheckFinished,event:e}},e.toggleChecksAck=function(e){return{_tag:t.toggleChecksAck,event:e}},e.setContextAck=function(e){return{_tag:t.setContextAck,event:e}},e.setTouchTypistTriggerResponse=function(e){return{_tag:t.touchTypistTriggerResponse,event:e}},e.isSDUIMessage=function(e){switch(e._tag){case t.sduiAdd:case t.sduiRemove:case t.sduiUpdate:return!0;default:return!1}},e.isPlagiarismRelatedMessage=function(e){switch(e._tag){case t.asyncCheckFinished:case t.setContextAck:case t.toggleChecksAck:return!0;default:return!1}}}(b||(b={})),function(e){e.british="british",e.american="american",e.australian="australian",e.canadian="canadian"}(S||(S={})),function(e){e.notReady="notReady",e.ready="ready",e.firstTextCheckCompleted="firstTextCheckCompleted",e.disconnected="disconnected"}(y||(y={}))},25642:(e,t,n)=>{n.d(t,{l:()=>m});var i=n(71401),s=n(61050),r=n(72614),o=n(78519),a=n(90595),l=n(29994),c=n(99562),u=n(9194),d=n(86267),h=n(205),g=n(19536),p=n(73191);const m=(e={consistencyCardDisabled:!1,gapTransformCardDisabled:!1})=>({fieldIntegrationContext:t,integrationName:n})=>{var m,f,v,_,b;const S=l.WZ.getRequiredSupportedDenaliFeatures(t),y=s.c.getRequiredSupportedDenaliFeatures(t.experimentClient),C=d.x.getRequiredDenaliSupportedFeatures(t.pageContext.domain,t.state.dynamicConfig,t.state.user),w=u.kn.getRequiredSupportedDenaliFeatures(t),x=h.d.getRequiredDenaliSupportedFeatures(t.pageContext.config.bundleInfo.browser,t.pageContext.domain,t.state.dynamicConfig,t.state.user),E=p.V.getRequiredDenaliSupportedFeatures(t.pageContext.config.bundleInfo.browser,t.state.dynamicConfig),k=c.w.getRequiredDenaliSupportedFeatures(t.pageContext.config.bundleInfo.browser,t.state.dynamicConfig),T=g.x.getRequiredDenaliSupportedFeatures(),A=e=>Boolean(e&&e.some((e=>{try{return new RegExp(e).test(t.pageContext.domain)}catch(e){return!1}}))),R=(null===(m=t.state.dynamicConfig.gapTransformCard)||void 0===m?void 0:m.disabled)||A(null===(f=t.state.dynamicConfig.gapTransformCard)||void 0===f?void 0:f.disabledByDomainPattern)||e.gapTransformCardDisabled?[]:[i.zV.gapTransformCard],I=(null==e?void 0:e.consistencyCardDisabled)||(null===(v=t.state.dynamicConfig.consistencyCard)||void 0===v?void 0:v.disabled)||(O=null===(_=t.state.dynamicConfig.consistencyCard)||void 0===_?void 0:_.disableByBrowser,Boolean(!!O&&O[t.pageContext.config.bundleInfo.browser]))||A(null===(b=t.state.dynamicConfig.consistencyCard)||void 0===b?void 0:b.disableByDomain)?[]:[i.zV.consistency,i.zV.superAlerts];var O;const F=("docs.google.com"===t.pageContext.domain&&(t.experimentClient.isGateEnabled(a.K.StudentsOFEGdocs)||t.experimentClient.isGateEnabled(a.K.StudentsOFEInternal))?[i.zV.citations]:[]).concat("docs.google.com"===t.pageContext.domain?[i.zV.citation_detection_card,i.zV.citation_gap]:[]),D=[i.zV.reconnect],P=r.lU.getRequiredDenaliSupportedFeatures(t.state.user,t.state.dynamicConfig,t.pageContext.config.bundleInfo.browser,t.state.dapi),M=t.experimentClient.isGateEnabled(a.K.VbarsGlobal)?[i.zV.vbarAlerts]:[],N=o.A.getSupportedCapiFeatures(t.experimentClient,{domain:t.pageContext.domain,integrationName:n},t.state.dynamicConfig.touchTypist),B=[i.zV.lazyVbarRewriteCard],U=t.experimentClient.isGateEnabled(a.K.SuperUnderlinesKillSwitch)?[]:[i.zV.superUnderlines];return[i.zV.freeClarityChecks,i.zV.readability,i.zV.fillerWords,i.zV.sentenceVariety,i.zV.voxCheck,i.zV.textInfo,i.zV.freeOccasionalPremiumAlerts,i.zV.setGoalsLink,i.zV.knowledgeHubSuggestedTerms,i.zV.knowledgeHub,i.zV.lockedUIDelayedUnlock,...D,...R,...S,...C,...w,...x,...E,...k,...I,...T,...F,...y,...P,...M,...N,...B,...U]}},2974:(e,t,n)=>{n.d(t,{Y:()=>m});var i=n(90023),s=n(8867),r=n(32073),o=n(10883),a=n(90572),l=n(64271),c=n(84153),u=n(17869),d=n(62965),h=n(43389),g=n(90595),p=n(29483);function m(e,t,n=(0,p.OB)().experimentClient){return n.isGateEnabled(g.K.CAPIDistinctConnectionStatus)?function(e,t){return new s.y((n=>{const i=new r.w0;let s=[];return i.add(e.pipe(o.M(t)).subscribe((([e,t])=>{t===h.Td.ready?n.next(e):s.push(e)}))),i.add(t.pipe(a.h((e=>e===h.Td.ready))).subscribe((()=>{s.forEach((e=>n.next(e))),s=[]}))),()=>i.unsubscribe()}))}(e,t):function(e,t){const n=t.pipe(a.h((e=>e===h.Td.ready))),s=t.pipe(a.h((e=>e===h.Td.reconnectRequired)));return l.T(e.pipe(c.P(s,(()=>n)),u.z(i.yR)),e.pipe(d.j(n,(()=>s)),u.z(i.yR)))}(e,t)}},35117:(e,t,n)=>{n.d(t,{m:()=>c});var i=n(90023),s=n(27752),r=n(52538),o=n(72614),a=n(74017),l=n(70843);const c=({dynamicConfig:e,browser:t,experimentClient:n,integrationName:c})=>{const u="gDocsCanvas"===c||"notGDocs"!==c?a.V1:a.Fw;return{cheetah:o.lU.shouldCreate(e,t)?{version:s.XU}:void 0,sdui:{version:r.i,config:(0,i.zG)(u,(e=>((e,t)=>{const n=e[""].supportedComponents.filter((e=>{if("nativeUndoableTextChanges"===e){const e=t.getTreatment(l.p.FsrIndividualUndoRedoV1);return"undo_redo"===e||"undo_redo_no_state_preservation"===e}return!0}));return{"":{...e[""],supportedComponents:n}}})(e,n)))}}}},808:(e,t,n)=>{n.d(t,{T:()=>i});var i,s=n(78767);!function(e){e.isSupported=function(){return(0,s.DV)((()=>!!new DataTransfer),(e=>!1))}}(i||(i={}))},49629:(e,t,n)=>{n.d(t,{S:()=>i});var i,s=n(84766),r=n(32734),o=n(20905);!function(e){const t=e=>(0,s.F)(e).pipe((0,r.B)());e.sec5=t(o.m9(5)),e.sec2=t(o.m9(2)),e.sec1=t(o.m9(1)),e.hz4=t(o.Xd(4)),e.hz10=t(o.Xd(10)),e.hz30=t(o.Xd(30));const n=new Map;e.create=function(e){const i=n.get(e);if(i)return i;{const i=t(e);return n.set(e,i),i}}}(i||(i={}))},27079:(e,t,n)=>{n.d(t,{_A:()=>r,pJ:()=>i,se:()=>s});var i,s,r,o=n(90023),a=n(13391),l=n(55709),c=n(58303),u=n(78767),d=n(36802);!function(e){e.serialize=function(e){return{context:l.R$.serialize(e.context)}},e.parse=function(e){return(0,o.zG)(e.context,l.R$.parse,c.fS((()=>l.R$.unset)),(e=>({context:e})))},e.createDefault=function(){return a.h.create({context:l.R$.unset})}}(i||(i={})),function(e){e.serialize=e=>t=>({id:t.id,settings:e(t.settings.get())}),e.createFactory=(e,t)=>(n=(0,d.QW)(u.iy.create()),i=e)=>{const s=i();return{id:n,settings:s,update:e=>{const n=t(e);n&&s.set(n)}}}}(s||(s={})),function(e){e.serialize=s.serialize(i.serialize),e.create=s.createFactory(i.createDefault,i.parse)}(r||(r={}))},36802:(e,t,n)=>{function i(e){return"transientDocId"in e?e.transientDocId:e.stableDocId}function s(e){return{stableDocId:e}}function r(e){return{transientDocId:e}}n.d(t,{Of:()=>i,QW:()=>r,m3:()=>s})},60809:(e,t,n)=>{n.d(t,{R:()=>s});var i=n(58303);function s(e){return Object.values(e).every((e=>i.Wi(e)))}},30582:(e,t,n)=>{n.d(t,{T:()=>g,n:()=>p});var i=n(90023),s=n(32073),r=n(59179),o=n(84178),a=n(64271),l=n(90572),c=n(20161),u=n(58303),d=n(59833),h=n(3030);class g{constructor(e=[]){this._dynamicFeature=new h._(e)}get feature(){return this._dynamicFeature.instance}get viewFeature(){return this._dynamicFeature.viewInstance}get viewFeatureOption(){return this.viewFeature.view(u.ij)}get featureProxy(){return this._dynamicFeature.instanceProxy}setFeature(e){this._dynamicFeature.set(e)}}class p extends g{constructor(e,t,n,i,r=[]){super(r),this.isSupported=e,this._alertProcessor=t,this._alertFilter=n,this._importFeature=i,this._sub=new s.w0,this._featureImportRequested=!1}initOnFirstAlert(){if(!this._featureImportRequested&&this.isSupported){this._featureImportRequested=!0;const e=this._alertProcessor.alerts.state.pipe(r.U((0,i.ls)(Object.values,Array.from)),o.q(1)),t=this._alertProcessor.alerts.changes.pipe(r.U((e=>e.addedAlerts))),n=a.T(e,t).pipe(l.h((0,i.ls)(d.Ew(this._alertFilter),u.pC)),o.q(1));this._sub.add(n.pipe(c.w((()=>this._importFeature()))).subscribe((e=>{this.setFeature(e)})))}return this.viewFeatureOption}dispose(){this._sub.unsubscribe()}}},3030:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(13391);class s{constructor(e,t){this._deferredCallsQueue=[],this._proxiedMethods=e.reduce(((e,n)=>(e[n]=(...e)=>{const i=t();i?i[n](...e):this._deferredCallsQueue.push((t=>t[n](...e)))},e)),{})}get proxiedMethods(){return this._proxiedMethods}execPostponedMethodCalls(e){this._deferredCallsQueue.forEach((t=>t(e))),this._deferredCallsQueue=[]}}class r{constructor(e=[]){this._instance=null,this._isLoaded=i.h.create(!1),this._instanceProxy=new s(e,(()=>this._instance))}get viewInstance(){return this._isLoaded.view((e=>e&&this._instance?this._instance:null))}get instanceProxy(){return this._instanceProxy.proxiedMethods}get instance(){return this._instance}set(e){this._instance||(this._instance=e,this._instanceProxy.execPostponedMethodCalls(e),this._isLoaded.set(!0))}dispose(){this._instance=null,this._isLoaded.set(!1)}}},83507:(e,t,n)=>{n.d(t,{L:()=>a,n:()=>o});var i=n(92379),s=n(40594),r=n(29483);const o=(e,t=(0,r.OB)().browserApi.getUrl)=>t(`src/css/${e}.styles.css`),a=e=>{const t=i.useMemo((()=>s.Y.create("RenderWithStyles")),[]),n="chunkName"in e?[e.chunkName]:e.chunkNameList,r=i.useMemo((()=>n.map((t=>o(t,e.getUrl)))),[...n]),[a,l]=i.useState(0),[c,u]=i.useState(!1);return i.useEffect((()=>{a===r.length&&u(!0)}),[a]),i.createElement(i.Fragment,null,r.map((e=>i.createElement("link",{rel:"stylesheet",type:"text/css",href:e,key:e,onLoad:()=>(e=>{null==t||t.debug(`Style link was loaded [href: ${e}]`),l((e=>e+1))})(e),onError:n=>((e,n)=>{null==t||t.error(`Couldn't load style link [href: ${n}]`,e),l((e=>e+1))})(n,e)}))),c&&e.children)}},53419:(e,t,n)=>{n.r(t),n.d(t,{EthicalAIFeature:()=>m});var i=n(39953),s=n(55812),r=n(81933),o=n(11042),a=n(27947),l=n(12505),c=n(70880),u=n(58303),d=n(10444),h=n(48758),g=n(99562),p=n(78767);class m{constructor(e,t,n){this._alertStateService=e,this._csActions=t,this._gnar=n,this._supportUkraineCardSeenDuringSession=new Set}initCardActionsProcessing(e,t,n,f,v){return new r.Observable((()=>{const _=new r.Subscription;return _.add(this._alertStateService.newlyHighlightedAlerts.pipe(r.filter(h.S.isEthicalAIAlert)).subscribe((e=>{this._gnar.ethicalAIAlertUnderlineShow(m.getSensitivityType(e.patternName))}))),_.add(n.pipe(r.filter(l.i.isEthicalAIItem)).subscribe((e=>{this._gnar.ethicalAIAssistantMiniCardShow(m.getSensitivityType(e.activeAlert.patternName))}))),_.add(e.pipe(r.filter(a.lY.isAlertCardShow),r.map((e=>e.alertId)),r.debounceTime(300)).subscribe((e=>{(0,i.zG)(t.getById(e),u.hX(s.bZ.isEthicalAI),d.bw((e=>{this._gnar.ethicalAIAssistantFullCardShow(m.getSensitivityType(e.patternName)),e.patternName===g.w.STAND_WITH_UKRAINE_ALERT_PNAME&&(0,i.zG)(s.bZ.getRawId(e),u.hX((e=>!this._supportUkraineCardSeenDuringSession.has(e))),d.bw((e=>{this._supportUkraineCardSeenDuringSession.add(e),this._csActions.markSupportUkraineCardSeen()})))})))}))),_.add(e.pipe(r.filter(a.lY.isEthicalAIOpenExternalLinkAction)).subscribe((e=>(0,i.zG)(t.getById(e.alertId),u.hX(s.bZ.isEthicalAI),d.bw((e=>{this._gnar.ethicalAIAssistantFullCardExternalLinkButtonClick(m.getSensitivityType(e.patternName),e.externalLink)})))))),_.add(e.pipe(r.filter(a.eI.isCardExpand),r.withLatestFrom(v),r.map((([e,t])=>c.nL.hasItems(t)?(0,i.zG)(t.currentLens.items.get(e.id),u.g_((()=>null),(e=>e.value))):null)),r.filter(p.fQ),r.filter(l.i.isEthicalAIItem)).subscribe((e=>{this._gnar.ethicalAIAssistantFullCardLearnMoreButtonClick(m.getSensitivityType(e.activeAlert.patternName))}))),_.add(e.pipe(r.filter(a.lY.isAlertIgnoreAction)).subscribe((e=>(0,i.zG)(t.getById(e.alertId),u.hX(s.bZ.isEthicalAI),d.bw((e=>{this._gnar.ethicalAIAssistantFullCardDismissButtonClick(m.getSensitivityType(e.patternName))})))))),_.add(f.pipe(r.filter(o.$.isEthicalAI)).subscribe((e=>{this._gnar.ethicalAIAlertUnderlineClick(m.getSensitivityType(e.patternName))}))),()=>_.unsubscribe()}))}static getSensitivityType(e){return e.split("/").slice(3).join("/")}}},99562:(e,t,n)=>{n.d(t,{w:()=>u});var i=n(59179),s=n(90572),r=n(71401),o=n(48758),a=n(30582),l=n(53419),c=n(78767);class u extends a.n{constructor(e,t,r,a,u){super(e,t,o.S.isEthicalAIAlert,(()=>Promise.resolve().then(n.bind(n,53419)).then((({EthicalAIFeature:e})=>new e(r,a,u))))),this.isSupported&&this._sub.add(this._alertProcessor.alerts.changes.pipe(i.U((e=>e.addedAlerts)),i.U((e=>e.find(o.S.isEthicalAIAlert))),s.h(c.fQ)).subscribe((e=>{u.ethicalAIAlertTriggered(l.EthicalAIFeature.getSensitivityType(e.patternName))})))}}!function(e){e.STAND_WITH_UKRAINE_ALERT_PNAME="Style/Sensitivity/SupportUkraine/WarLanguage",e.shouldCreate=function(e,t){var n,i,s;return null!==(s=null===(i=null===(n=t.ethicalAI)||void 0===n?void 0:n.enableByBrowser)||void 0===i?void 0:i[e])&&void 0!==s&&s},e.getRequiredDenaliSupportedFeatures=function(t,n){return e.shouldCreate(t,n)?[r.zV.ethicalAI]:[]}}(u||(u={}))},9194:(e,t,n)=>{n.d(t,{kn:()=>i});var i,s=n(71401),r=n(86267);!function(e){e.isEnabled=function(t){return Boolean(e.isAvailable(t)&&t.applyFormatting)},e.isAvailable=function(e){return r.x.isEnabled(e.pageContext.domain,e.state.dynamicConfig,e.state.user)},e.getRequiredSupportedDenaliFeatures=function(t){return e.isEnabled(t)?[s.zV.listCard,s.zV.supportsFormatting,s.zV.supportsButtonTransformCards]:[]}}(i||(i={}))},86267:(e,t,n)=>{n.d(t,{x:()=>i});var i,s=n(71401),r=n(40144);!function(e){e.isEnabled=function(e,t,n){return"docs.google.com"===e?Boolean((0,r.I)(n)&&!t.fullSentenceRewritesDisabled):!t.fullSentenceRewritesDisabled},e.getRequiredDenaliSupportedFeatures=(e,t,n)=>"docs.google.com"===e?(0,r.I)(n)&&!t.fullSentenceRewritesDisabled?[s.zV.fullSentenceRewrite,s.zV.alertsUpdate,s.zV.enclosingHighlight]:[]:t.fullSentenceRewritesDisabled?[]:[s.zV.fullSentenceRewrite,s.zV.alertsUpdate,s.zV.enclosingHighlight]}(i||(i={}))},7865:(e,t,n)=>{if(n.d(t,{C:()=>_}),5526!=n.j)var i=n(74822);if(5526!=n.j)var s=n(97092);if(5526!=n.j)var r=n(90572);if(5526!=n.j)var o=n(79859);if(5526!=n.j)var a=n(13391);if(5526!=n.j)var l=n(40594);if(5526!=n.j)var c=n(43389);if(5526!=n.j)var u=n(20489);if(5526!=n.j)var d=n(57059);if(5526!=n.j)var h=n(49629);if(5526!=n.j)var g=n(63310);if(5526!=n.j)var p=n(26155);if(5526!=n.j)var m=n(94670);if(5526!=n.j)var f=n(34657);if(5526!=n.j)var v=n(79242);class _{constructor(e,t,n,c,d,g=!1,p=(e=>e),m=h.S.hz10,f=h.S.hz30,v=h.S.hz30,_=l.Y.create("AquaHighlightCollectionGeometry"),b=u.Rv.dummy()){this._geometryProvider=e,this._geometryLayout=t,this._getTextMap=n,this._highlightFilter=c,this._geometryInvalidated=d,this._updateHighlightsOnInvalidGeometry=g,this._mapHighlightInvalidatedMeta=p,this._updateLayoutClock=m,this._updateGeometryClock=f,this._updateStateClock=v,this._log=_,this._geometryUpdatePerfLogger=b,this._allHighlightsData=new Map,this._visibleHighlights=new Map,this._highlightsState=a.h.create(new Map),this._updateStateForAllQueue=new i.x,this._updateGeometryAndStateQueue=new i.x,this._highlightsGeometryUpdateProcessorValue=null,this._subs=[this._updateGeometryAndStateQueue.pipe((0,s.f)(this._updateGeometryClock),(0,r.h)((e=>e.length>0))).subscribe((e=>{const t=new Set;for(const n of e)for(const e of n)t.add(e);this._updateGeometry(t,t.size),this._queueUpdateStateFor(t)})),this._updateStateForAllQueue.pipe((0,o.U)(this._updateStateClock)).subscribe((()=>{this._updateStateForAll()})),this._geometryInvalidated.pipe((0,o.U)(this._updateLayoutClock)).subscribe((e=>{this._updateHighlightsOnInvalidGeometry?this._visibleHighlights.forEach(((e,t)=>this.updateHighlight(t,e.textRange,this._mapHighlightInvalidatedMeta(e.state.meta)))):this.recalculateAllHighlights((e=>this._mapHighlightInvalidatedMeta(e)))})),this._highlightFilter.pipe((0,o.U)(this._updateLayoutClock)).subscribe((e=>{this._onFilterUpdate()}))],this.geometry=this._highlightsState}get _highlightsGeometryUpdateProcessor(){return null!==this._highlightsGeometryUpdateProcessorValue||(this._highlightsGeometryUpdateProcessorValue=new m._(this._updateHighlightGeometry.bind(this),f.w.create({onComputingFrameComplete:e=>{e.length>0&&this._queueUpdateStateFor(e)}}))),this._highlightsGeometryUpdateProcessorValue}_onFilterUpdate(){var e,t;const{filter:n,type:i}=this._highlightFilter.get();if(i===p.qH.ChangeType.invalidate)this._allHighlightsData.forEach(((e,t)=>{this.updateHighlight(t,e.textRange,e.meta)})),null===(e=this._log)||void 0===e||e.trace("Filter change: all highlights are updated");else{const e=[];this._visibleHighlights.forEach(((t,i)=>{n(t.textRange)||e.push(i)}));const i=[];this._allHighlightsData.forEach(((e,t)=>{!this._visibleHighlights.has(t)&&n(e.textRange)&&i.push(t)})),null===(t=this._log)||void 0===t||t.trace("Filter change:",{moveToInvisibleIds:e,moveToVisibleIds:i}),this._removeVisibleHighlights(e,!0),i.forEach((e=>{this._addOrUpdateVisibleHighlight(e,this._allHighlightsData.get(e))}))}}_updateStateForAll(){const e=performance.now();this._highlightsState.set(new Map(Array.from(this._visibleHighlights.entries()).filter((([e,t])=>t.state.rects&&t.state.rects.length>0)).map((([e,t])=>[e,t.state])))),d.I.trackTaskLatency("highlightProcessing",e)}_queueUpdateStateFor(e){this._updateStateForAllQueue.next(void 0)}_getInvalidHighlights(e,t,n){const i=new Set(e),s=this._getTextMap();return Array.from(this._visibleHighlights.entries()).filter((([e,r])=>!i.has(e)&&!n(e,r.state.meta)&&!(t&&this._geometryProvider.getIsConsistent(r.geometrySource,r.textRange,s)&&!this._geometryProvider.getIsInvalid(r.geometrySource))))}_createAlertGeometry(e){try{return this._geometryProvider.create(e,this._getTextMap())}catch(e){return null}}_updateGeometry(e,t=e.length,n=(e=>e)){if(0===t)return;const i=this._geometryUpdatePerfLogger.startMeasure();this._highlightsGeometryUpdateProcessor.execute(e,(()=>({mapMeta:n,conversionContext:this._geometryLayout.getCurrentConversionContext()}))),i.endMeasure()}_updateHighlightGeometry(e,t){var n,i,s;const r=this._visibleHighlights.get(e);if(r){const s=this._geometryProvider.getClientRects(r.geometrySource);if(null!==s){const i=Array.from(s).filter((e=>e.height>0&&e.width>0));if(0===i.length)null===(n=this._log)||void 0===n||n.warn(`Degenerate geometry for #${e}`,s),this._visibleHighlights.set(e,{...r,state:{rects:[],meta:t.mapMeta(r.state.meta)}});else{const n=i.map((e=>g.UL.setPosition(t.conversionContext.clientToRelative(e),e))),s=p.NC.is(r.textRange)&&n.length>1&&n.some(((e,t,n)=>Math.abs(e.top-n[0].top)>1));p.NC.is(r.textRange)&&s?this.updateHighlight(e,{start:r.textRange.start+r.textRange.increasedRight,end:r.textRange.end-r.textRange.increasedLeft},r.state.meta):this._visibleHighlights.set(e,{...r,state:{rects:n,meta:t.mapMeta(r.state.meta)}})}}else null===(i=this._log)||void 0===i||i.warn(`#${e} has null geometry`),this._visibleHighlights.set(e,{...r,state:{rects:[],meta:t.mapMeta(r.state.meta)}})}else null===(s=this._log)||void 0===s||s.warn(`couldn't recalculate #${e}, doesn't exist`)}_removeVisibleHighlights(e,t){for(const t of e){const e=this._visibleHighlights.get(t);e&&(this._visibleHighlights.delete(t),this._safeDisposeGeometry(e.geometrySource))}t&&this._queueUpdateStateFor(e)}_safeDisposeGeometry(e){var t;try{this._geometryProvider.dispose(e)}catch(e){null===(t=this._log)||void 0===t||t.warn("error disposing geometry source",e)}}recalculateHighlight(e,t=(e=>e)){return this._updateGeometry([e],1,t)}recalculateAllHighlights(e=(e=>e)){const t=this._visibleHighlights.keys();this._updateGeometry(t,this._visibleHighlights.size,e)}_addOrUpdateVisibleHighlight(e,t,n=!1){var i;if(this._highlightFilter.get().filter(t.textRange)){const s=this._createAlertGeometry(t.textRange);if(s)return this._visibleHighlights.set(e,{textRange:t.textRange,geometrySource:s,state:{rects:[],meta:t.meta}}),this._updateGeometryAndStateQueue.next([e]),null===(i=this._log)||void 0===i||i.trace(`${n?"updated":"added"} highlight #${e}`),!0}return!1}addHighlight(e,t,n){this._visibleHighlights.has(e)&&this._removeVisibleHighlights([e],!1);const i={textRange:t,meta:n};return this._allHighlightsData.set(e,i),this._addOrUpdateVisibleHighlight(e,i)}updateHighlight(e,t,n){const i=this._visibleHighlights.get(e);if(void 0!==i){this._safeDisposeGeometry(i.geometrySource);const s={textRange:t,meta:n};this._allHighlightsData.set(e,s);return!!this._addOrUpdateVisibleHighlight(e,s,!0)||(this._removeVisibleHighlights([e],!0),!1)}return this.addHighlight(e,t,n)}removeHighlights(e){if(0===e.length)return;e.forEach((e=>this._allHighlightsData.delete(e)));const t=e.filter((e=>this._visibleHighlights.has(e)));t.length>0&&this._removeVisibleHighlights(t,!0)}removeAllHighlights(){this.removeHighlights(Array.from(this._allHighlightsData.keys()))}maintainConsistency(e,t=(e=>e),n=!1,i=(()=>!1)){for(const[s,{textRange:r,state:o}]of this._getInvalidHighlights(e,!n,i))this.updateHighlight(s,r,t(o.meta))}hasHighlight(e){return this._allHighlightsData.has(e)}intersectingHighlightIDs(e){const t=[];return this._visibleHighlights.forEach(((n,i)=>{(c.SV.intersects(e,n.textRange)||c.SV.isCollapsed(e)&&c.SV.isAdjacent(e,n.textRange))&&t.push(i)})),t}updateHighlightsForTextRange(e,t){const n={start:Math.max(e.start-30,0),end:e.end},i=this.intersectingHighlightIDs(n).reduce(((e,t)=>{const n=this._visibleHighlights.get(t);return n&&e.push({id:t,textRange:n.textRange}),e}),[]),{highlightsToRemove:s,highlightsToUpdate:r}=(0,v.h)(i,e,t);r.forEach((e=>{var t;const n=null===(t=this._allHighlightsData.get(e.id))||void 0===t?void 0:t.meta;n&&this.updateHighlight(e.id,e.textRange,n)})),this.removeHighlights(s)}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[];for(const e of this._visibleHighlights.values())this._safeDisposeGeometry(e.geometrySource);this._visibleHighlights.clear(),this._log=void 0,this._highlightsState.set(new Map),this._updateStateForAllQueue.complete(),this._updateStateForAllQueue=new i.x,this._updateGeometryAndStateQueue.complete(),this._updateGeometryAndStateQueue=new i.x,this._allHighlightsData.clear()}}},26155:(e,t,n)=>{n.d(t,{NC:()=>o,WF:()=>h,pc:()=>c,qH:()=>r,y$:()=>a});var i=n(90023);if(5526!=n.j)var s=n(24666);var r,o,a,l,c,u=n(13391),d=n(78767);function h(e){return e.rect.map((e=>e.size)).behavior.pipe((0,s.x)(((e,t)=>e.height===t.height&&e.width===t.width)))}!function(e){let t;!function(e){e.invalidate="invalidate",e.preserve="preserve"}(t=e.ChangeType||(e.ChangeType={}))}(r||(r={})),function(e){e.everything=u.h.create({filter:e=>!0,type:e.ChangeType.preserve})}(r||(r={})),function(e){function t(e,t){const n=e.end-e.start==1,i="a"===t.slice(e.start,e.end);return n&&!i}e.is=function(e){const t=e;return(0,d.Nf)(t.increasedLeft)&&"number"==typeof t.increasedLeft&&(0,d.Nf)(t.increasedRight)&&"number"==typeof t.increasedRight},e.expandIfNeeded=function(e,n){if(t(e,n)){const t=e.start>0?1:0,i=e.end!==n.length?1:0;return{start:e.start-t,end:e.end+i,increasedLeft:t,increasedRight:i}}return{...e}},e.shouldExpand=t}(o||(o={})),function(e){let t;!function(e){let t=0;e.create=function(e,n){return t++,`${e}-${t}${void 0!==n?`|${n}`:""}`},e.createFromMark=function(e){return`${e}`}}(t=e.Id||(e.Id={}))}(a||(a={})),function(e){e.Mock=class{constructor(){this.addHighlight=i.W8,this.updateHighlight=i.W8,this.removeHighlights=i.Q1,this.removeAllHighlights=i.Q1,this.recalculateHighlight=i.Q1,this.recalculateAllHighlights=i.Q1,this.maintainConsistency=i.Q1,this.hasHighlight=i.W8,this.updateHighlightsForTextRange=i.Q1,this.dispose=i.Q1,this.geometry=u.h.create(new Map)}intersectingHighlightIDs(e){return[]}}}(l||(l={})),function(e){e.none="none",e.hovered="hovered",e.hoveredNeedsAttention="hovered_needs_attention"}(c||(c={}))},79625:(e,t,n)=>{function i(e,t=1.5,n=1.5){if(e.length<=0)return[];if(1===e.length)return e;{const i=[];let s=e[0];for(let r=1;r<e.length;r++){const o=e[r],a=o.top+o.height,l=a<s.top,c=a===s.top&&o.height>0&&s.height>0;if(l||c)continue;const u=Math.min(s.left,o.left),d=Math.min(s.top,o.top),h=Math.max(s.left+s.width,o.left+o.width)-u,g=Math.max(s.top+s.height,a)-d,p=h<=s.width+o.width+t,m=g<=s.height+o.height-n,f=g===s.height+o.height&&(0===o.height||0===s.height);o.width===s.width&&o.height===s.height&&o.left===s.left&&o.top===s.top||(p&&(m||f)?s={top:d,left:u,height:g,width:h}:(i.push(s),s=o))}return i.push(s),i}}function s(e,t=0,n=.5){if(e.length<=0)return[];{const i=[e[0]];for(let s=1;s<e.length;++s){const r=i[s-1],o=e[s],a=Math.min(r.top,o.top),l=Math.max(r.top+r.height,o.top+o.height)-a<r.height+o.height,c=o.top-(r.top+r.height),u=.5*(o.height+r.height);if(l||Math.abs(c)>n*u)i.push(o);else{const e=r.top+r.height+t*c;i[s-1]={top:r.top,left:r.left,width:r.width,height:e-r.top},i.push({top:e,left:o.left,width:o.width,height:o.top+o.height-e})}}return i}}function r(e){return e.reduce(((e,t)=>{if(null==e)return t;return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),width:Math.max(e.width,t.left+t.width-e.left),height:Math.max(e.height,t.top+t.height-e.top)}}),null)}n.d(t,{es:()=>i,jr:()=>r,yX:()=>s})},85580:(e,t,n)=>{n.d(t,{M:()=>i,R:()=>s});var i,s,r=n(39953),o=n(53186),a=n(58303),l=n(59833),c=n(36769),u=n(47557),d=n(90189),h=n(91297),g=n(90595),p=n(16381),m=n(63310),f=n(79625);!function(e){function t(e,t,n,i,s){if(e&&t&&e.node.ownerDocument===t.node.ownerDocument){const r=(0,p.pZ)()&&"BR"===e.node.nodeName,o=(e=>{let t=!1,n=e.previousSibling;for(;n&&!t;)(0,h.BM)(n)&&n.textContent?t=!0:n=n.previousSibling;return n})(e.node),a=r&&o?s.getFragmentsByNode(o):null;let l;return a&&(l=a[a.length-1]),{start:{node:l?l.node:e.node,offset:l?l.endOffset-l.startOffset+l.startOffsetInNode:"BR"===e.node.nodeName?0:n-e.startOffset+e.startOffsetInNode},end:{node:t.node,offset:"BR"===t.node.nodeName?0:i-t.startOffset+t.startOffsetInNode}}}return(0,r.zG)(s.getTextFieldRoot(),(s=>null===e&&null===t&&0===n&&0===i&&s?{start:{offset:0,node:s},end:{offset:0,node:s}}:null))}function n(e,n,i,s=!1,r=!1){const o=(t,n=t-1)=>{const i=e.getFragmentAtOrBeforeOffset(t);return r&&(null==i?void 0:i.notSelectable)?e.getFragmentAtOrBeforeOffset(n):i},a=o(n);let l;return(0,d.OB)().experimentClient.isGateEnabled(g.K.PrioritizeLeftNodeAsEndNode)&&i>0?l=o(i-1,i):(l=o(i),s&&!(null==l?void 0:l.text.trim().length)&&(l=o(i-1))),t(a,l,n,i,e)}function i(e,t=!1){try{const n=(0,c.Cq)(e.start.node.ownerDocument).createRange();return n.setStart(e.start.node,e.start.offset),n.setEnd(e.end.node,e.end.offset),t||!n.collapsed?n:null}catch(e){return null}}e.getRangeParams=t,e.getRangeParamsFromTextMap=n,e.createRangeFromParams=i,e.createRange=function(e,t,s,r=!1,o=!1,a=!1){const l=n(e,t,s,o,a);return l?i(l,r):null},e.createRangeForNode=function(e){try{const t=(0,c.Cq)(e.ownerDocument).createRange();return t.selectNode(e),t.collapsed?null:t}catch(e){return null}},e.equalSelection=function(e,t){if((0,p.G6)()){const n=e.toString()===t.toString(),i=e.startContainer.contains(t.startContainer)||e.endContainer.contains(t.endContainer),s=""===e.toString(),r=e.startOffset===t.startOffset;return n&&i&&(!s||r)}return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}(i||(i={})),function(e){e.provider={create:(e,t,n)=>i.createRange(t,e.start,e.end,n),dispose(e){e.detach()},getClientRects:(e,t)=>e.collapsed&&!t?null:(0,r.zG)(o.nI(Array.from(e.getClientRects())),a.wp((()=>o.nI((0,r.zG)(e.endContainer,a.DT((t=>e.collapsed&&(0,u.Tv)(t)&&"BR"===t.tagName)),a.UI((e=>e.getBoundingClientRect())),a.g_((()=>[]),(e=>[e])))))),a.wp((()=>o.nI((0,r.zG)(a.ij(e.startContainer.childNodes[0]),a.hX((()=>1===e.startContainer.childNodes.length)),a.hX(u.Tv),a.hX((e=>"BR"===e.tagName)),a.UI((e=>e.getBoundingClientRect())),a.g_((()=>[]),(e=>[e])))))),a.fS((()=>[])),f.es,f.yX,l.UI(m.Pf.create)),getIsConsistent(e,t,n){const s=i.getRangeParamsFromTextMap(n,t.start,t.end);return null!==s&&e.startContainer===s.start.node&&e.startOffset===s.start.offset&&e.endContainer===s.end.node&&e.endOffset===s.end.offset},getIsInvalid:e=>e.collapsed}}(s||(s={}))},94670:(e,t,n)=>{if(n.d(t,{_:()=>s}),5526!=n.j)var i=n(34657);class s{constructor(e,t=i.w.create()){this._handleItem=e,this._options=t,this._nextComputingFrameId=null,this._firstComputingFrameId=null,this._scheduledItems=new Set}execute(e,t){for(const t of e)this._scheduledItems.add(t);null===this._nextComputingFrameId&&(this._firstComputingFrameId=this._options.scheduleFirstComputingFrame((()=>this._executeFrame(t))))}dispose(){null!==this._nextComputingFrameId&&this._options.cancelNextComputingFrame(this._nextComputingFrameId),null!==this._firstComputingFrameId&&this._options.cancelFirstComputingFrame(this._firstComputingFrameId)}_executeFrame(e){this._nextComputingFrameId=null;const t=this._scheduledItems.values()[Symbol.iterator](),n=e(),i=this._options.getTimestamp(),s=[];let r=!1;do{const e=t.next(void 0);if(e.done){r=!0;break}this._handleItem(e.value,n),this._scheduledItems.delete(e.value),s.push(e.value)}while(this._isWithinComputingFrame(i));this._options.onComputingFrameComplete(s),r||(this._nextComputingFrameId=this._options.scheduleNextComputingFrame((()=>this._executeFrame(e))))}_isWithinComputingFrame(e){return this._options.getTimestamp()-e<=this._options.computingFrameDuration}}},34657:(e,t,n)=>{n.d(t,{w:()=>s});class i{constructor(e){this._overrides=e}get computingFrameDuration(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.computingFrameDuration)&&void 0!==t?t:i.DEFAULT_COMPUTING_FRAME_DURATION}get getTimestamp(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.getTimestamp)&&void 0!==t?t:i.DEFAULT_GET_TIMESTAMP}get scheduleFirstComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.scheduleFirstComputingFrame)&&void 0!==t?t:i.DEFAULT_SCHEDULE_FIRST_COMPUTING_FRAME}get cancelFirstComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.cancelFirstComputingFrame)&&void 0!==t?t:i.DEFAULT_CANCEL_FIRST_COMPUTING_FRAME}get scheduleNextComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.scheduleNextComputingFrame)&&void 0!==t?t:i.DEFAULT_SCHEDULE_NEXT_COMPUTING_FRAME}get cancelNextComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.cancelNextComputingFrame)&&void 0!==t?t:i.DEFAULT_CANCEL_NEXT_COMPUTING_FRAME}get onComputingFrameComplete(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.onComputingFrameComplete)&&void 0!==t?t:i.DEFAULT_ON_COMPUTING_FRAME_COMPLETE}}var s;i.DEFAULT_COMPUTING_FRAME_DURATION=5,i.DEFAULT_GET_TIMESTAMP=()=>performance.now(),i.DEFAULT_SCHEDULE_FIRST_COMPUTING_FRAME=e=>(e(),0),i.DEFAULT_CANCEL_FIRST_COMPUTING_FRAME=()=>{},i.DEFAULT_SCHEDULE_NEXT_COMPUTING_FRAME=e=>requestAnimationFrame(e),i.DEFAULT_CANCEL_NEXT_COMPUTING_FRAME=e=>cancelAnimationFrame(e),i.DEFAULT_ON_COMPUTING_FRAME_COMPLETE=()=>{},function(e){e.create=function(e){return new i(e)}}(s||(s={}))},79242:(e,t,n)=>{function i(e,t,n){return e.reduce(((e,{id:i,textRange:s})=>{const r=t.start>=s.start&&t.start<s.end,o=t.start<=s.start&&t.end>=s.start;return r?e.highlightsToRemove.push(i):o?e.highlightsToUpdate.push({id:i,textRange:{start:s.start+n,end:s.end+n}}):e.highlightsToUpdate.push({id:i,textRange:{start:s.start,end:s.end}}),e}),{highlightsToUpdate:[],highlightsToRemove:[]})}n.d(t,{h:()=>i})},68418:(e,t,n)=>{n.d(t,{Cv:()=>o,E9:()=>i,Ir:()=>r,p8:()=>s});var i,s,r,o,a=n(83473);!function(e){e.equals=function(e,t){return(0,a.M$)(e.left,t.left)&&(0,a.M$)(e.top,t.top)},e.fromCartesian=function({x:e,y:t}){return{top:t,left:e}},e.toCartesian=function({top:e,left:t}){return{x:t,y:e}},e.zero={top:0,left:0},e.minus=function(e,t){return{top:e.top-t.top,left:e.left-t.left}},e.plus=function(e,t){return{top:e.top+t.top,left:e.left+t.left}},e.ceil=function(e){return{left:Math.ceil(e.left),top:Math.ceil(e.top)}},e.floor=function(e){return{left:Math.floor(e.left),top:Math.floor(e.top)}},e.create=function(e){return{top:e.top,left:e.left}},e.l1Distance=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.left)}}(i||(i={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.fromClientPoint=function(e,n,i){return t({top:e.top-n.top+i.top,left:e.left-n.left+i.left})},e.zero={top:0,left:0}}(s||(s={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.fromOffsetPoint=function(e,n,i){return t({top:e.top+n.top-i.top,left:e.left+n.left-i.left})},e.fromPage=function(e,n){return t({top:e.top-n.top,left:e.left-n.left})}}(r||(r={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.getHighlightsPosition=function(e,n,i,s={top:0,left:0}){return t({top:e.top+n.top+i.top+s.top,left:e.left+n.left+i.left+s.left})},e.fromClient=function(e,n){return t({top:e.top+n.top,left:e.left+n.left})},e.fromOffset=function(e,t,n){return{top:e.top+t.top-n.top,left:e.left+t.left-n.left}}}(o||(o={}))},63310:(e,t,n)=>{n.d(t,{$u:()=>i,D1:()=>a,Pf:()=>o,UL:()=>s,Wm:()=>r});var i,s,r,o,a,l=n(83473),c=n(68418);!function(e){e.create=function(e){return{width:e.width,height:e.height}}}(i||(i={})),function(e){function t(e,t){const n=e.left<=t.left?e:t,i=n===e?t:e,s=e.top<=t.top?e:t,r=s===e?t:e;return n.left+n.width>=i.left&&s.top+s.height>=r.top}e.union=function(e){return t=>t.slice(1).reduce(((t,n)=>{const i=Math.min(n.top,t.top),s=Math.min(n.left,t.left),r=Math.max(t.left+t.width,n.left+n.width)-s,o=Math.max(t.top+t.height,n.top+n.height)-i;return e({top:i,left:s,width:r,height:o})}),t[0])},e.getIntersection=function(e,n){if(!t(e,n))return null;const i=e.left+e.width,s=e.top+e.height,r=n.left+n.width,o=n.top+n.height,a=Math.max(e.left,n.left),l=Math.max(e.top,n.top);return{left:a,top:l,width:Math.min(i,r)-a,height:Math.min(s,o)-l}},e.contains=function(e,t){return e.left>=t.left&&e.left<=t.left+t.width&&e.top>=t.top&&e.top<=t.top+t.height},e.doesRectContain=function(e,t){return t.left>=e.left&&t.left+t.width<=e.left+e.width&&t.top>=e.top&&t.top+t.height<=e.top+e.height},e.intersects=t,e.intersectsStrict=function(e,t){const n=e.left<=t.left?e:t,i=n===e?t:e,s=e.top<=t.top?e:t,r=s===e?t:e;return n.left+n.width>i.left&&s.top+s.height>r.top},e.setPosition=function(e,t){const n=i.create(t);return Object.assign({},e,i.create(t),{right:e.left+n.width,bottom:e.top+n.height})},e.area=function(e){return e.width*e.height},e.isEmpty=function(e){return 0===e.width&&0===e.height},e.shift=function(e,t){const n=c.E9.plus(e,t);return{...e,...n}},e.widen=function(e,t){return{...e,left:e.left-t,width:e.width+2*t}},e.equals=function(e,t,n){return(0,l.M$)(e.left,t.left,n)&&(0,l.M$)(e.top,t.top,n)&&(0,l.M$)(e.width,t.width,n)&&(0,l.M$)(e.height,t.height,n)},e.verticalOverlap=function(e,t){const n=e.top<=t.top?e:t,i=n===e?t:e,s=n.top+n.height-i.top;return s<0?0:s>i.height?1:s/Math.min(i.height,n.height)},e.midlineHorizontal=function(e){return{...e,top:e.top+e.height/2,height:0}},e.midlineVertical=function(e){return{...e,left:e.left+e.width/2,width:0}}}(s||(s={})),function(e){e.create=function(e){return{...e,kind:"offsetPoint"}},e.topLeftPoint=function({top:e,left:t}){return{kind:"offsetPoint",top:e,left:t}}}(r||(r={})),function(e){e.create=function(e){return{kind:"clientPoint",top:e.top,left:e.left,bottom:(null==e?void 0:e.bottom)||e.top+e.height,right:(null==e?void 0:e.right)||e.left+e.width,width:e.width,height:e.height}},e.empty={top:0,left:0,bottom:0,right:0,width:0,height:0,kind:"clientPoint"}}(o||(o={})),function(e){e.create=function(e){return e}}(a||(a={}))},18647:(e,t,n)=>{if(n.d(t,{Bi:()=>y,E6:()=>g,Jj:()=>l,Me:()=>a,Qf:()=>S,XQ:()=>u,Yd:()=>d,a9:()=>m,bp:()=>h,f0:()=>b,is:()=>p,kW:()=>v,o:()=>c,qW:()=>C,wr:()=>f}),5526!=n.j)var i=n(36769);const s=new Set(["absolute","relative","fixed","sticky"]),r=new Set(["strict","content","layout","paint"]),o=new Set(["flex","inline-flex"]);function a(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}function l(e){const t=a(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}function c(e){return l(e).getComputedStyle(e)}function u(e){return s.has(c(e).position)}function d(e,t){const n=s.has(t.position);return!n&&null!==t.zIndex&&"auto"!==t.zIndex&&e.parentElement?o.has(c(e.parentElement).display):n}function h(e){const t=a(e).body;if(e===t)throw new Error("target is body");let n=e;do{if(n=n.parentElement,n&&u(n))return n}while(null!==n&&n!==t);return n||t}function g(e,t){var n,s,r,o;const l=a(e).body;if(e===l)throw new Error("target is body");const c=(0,i.Cq)(l.parentElement);let u=e;do{if(u=null!==(o=null!==(s=null!==(n=u.assignedSlot)&&void 0!==n?n:u.parentElement)&&void 0!==s?s:null===(r=u.getRootNode())||void 0===r?void 0:r.host)&&void 0!==o?o:null,u&&t(u))return u}while(null!==u&&u!==c);return u||c}function p(e){return g(e,(e=>{return u(e)||(t=e,r.has(c(t).contain));var t}))}function m(e){return function(e){const t=c(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY}(e)||function(e){const t=c(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowX||"scroll"===t.overflowX}(e)}function f(e,t){for(let n=e;null!=n;n=n.parentElement)if(t(n))return n;return null}function v(e,t,n=!0){const i=e.ownerDocument,s=i&&i.defaultView;if(!i||!s)return;const r=i.body.scrollLeft,o=i.body.scrollTop,a=s.scrollY,l=s.scrollX,c=[];let u=n?e.parentElement:null;for(;u&&u!==i.body&&u!==i.documentElement;)(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&c.push({element:u,scrollTop:u.scrollTop,scrollLeft:u.scrollLeft}),u=u.parentElement;t&&!i.hasFocus()?e.dispatchEvent(new FocusEvent("focus")):e.focus(),a===s.scrollY&&l===s.scrollX||s.scroll(l,a),o!==i.body.scrollTop&&(i.body.scrollTop=o),r!==i.body.scrollLeft&&(i.body.scrollLeft=r),c.forEach((({element:e,scrollTop:t,scrollLeft:n})=>{e.scrollTop!==t&&(e.scrollTop=t),e.scrollLeft!==n&&(e.scrollLeft=n)}))}const _=e=>e?1/e:1,b=(e,t)=>{if(!e)return;const n=S(self.getComputedStyle(e));if(!n)return;const i=_(Number(n.x)),s=_(Number(n.y));return{transform:`translate(${t.left*(i-1)}px, ${t.top*(s-1)}px) scale(${i}, ${s})`,transformOrigin:e.style.transformOrigin}};function S(e){if(e.transform&&"none"!==e.transform){const t=/scale\(([\d.]+)(?:, ([\d.]))*\)|matrix\(([\d.]+), [\d.]+, [\d.]+, ([\d.]+), [\d.]+, [\d.]+\)/.exec(e.transform);if(t){const[e,n,i,s,r]=t;return{x:n||s,y:i||r||n}}}}function y(e){try{const t=new DOMMatrixReadOnly(e.transform);return{x:t.e,y:t.f}}catch(e){return}}function C(e,t){if(e.nodeType===Node.TEXT_NODE){const n=e.textContent||"";return t?n.includes(t)?e:null:n.trim()?e:null}for(let n=0;n<e.childNodes.length;n++){const i=C(e.childNodes[n],t);if(i)return i}return null}},948:(e,t,n)=>{n.d(t,{k:()=>s,q:()=>i});var i,s,r=n(93667),o=n(78767);!function(e){let t;function n(e){return e._tag===t.ins}function i(e){return e._tag===t.del}!function(e){e.ins="ins",e.del="del"}(t=e.Type||(e.Type={})),e.isIns=n,e.ins=function(e,n){return{_tag:t.ins,pos:e,text:n}},e.isDel=i,e.del=function(e,n){return{_tag:t.del,pos:e,text:n}},e.applyChanges=function(e,t){return t.reduce(((e,t)=>n(t)?e.slice(0,t.pos)+t.text+e.slice(t.pos):i(t)?e.slice(0,t.pos)+e.slice(t.pos+t.text.length):(0,o.vE)(t)),e)},e.applyChangesInverse=function(t,s){return e.applyChanges(t,s.reverse().map((t=>n(t)?e.del(t.pos,t.text):i(t)?e.ins(t.pos,t.text):(0,o.vE)(t))))},e.getTransformOffset=function(e){return n(e)?e.text.length:i(e)?-e.text.length:void(0,o.vE)(e)},e.getRange=function(e){return{start:e.pos,end:e.pos+e.text.length}}}(i||(i={})),function(e){e.fromDiff=function(e,t,n){const s=r(e,t,n);let o=0;const a=[];for(const e of s)e[0]===r.EQUAL?o+=e[1].length:e[0]===r.INSERT?(a.push(i.ins(o,e[1])),o+=e[1].length):(e[0],a.push(i.del(o,e[1])));return a}}(s||(s={}))},205:(e,t,n)=>{n.d(t,{d:()=>d});var i=n(13391),s=n(20161),r=n(84714),o=n(90572),a=n(84178),l=n(71401),c=n(30582),u=n(19724);class d extends c.T{constructor(){super(["onCAPISessionStart","onAvailabilityData","onSubmitResponse","onCancelResponse","onProgress","onCompleted","onError","onRejected","setIsEnglish"]),this._isUsingSDUI=i.h.create(!1)}init(e,t,i,s,r,o,a,l,c,u,d,h,g,p,m,f,v){Promise.all([n.e(2654),n.e(3349),n.e(9268),n.e(4100)]).then(n.bind(n,25903)).then((({ProofitTextReplacement:n,ProofitFeature:_})=>{const b=new n(e,t,i,s,r),S=new _(o,a,l,c,u,d,h,g,e,p,m,f,v,b,this._isUsingSDUI);this.setFeature(S)}))}get requestInfo(){return this.viewFeature.pipe(s.w((e=>e?e.requestInfo.view("status"):r.of(null))))}setUsingSDUI(e){this._isUsingSDUI.set(e)}dispose(){var e;null===(e=this.feature)||void 0===e||e.dispose()}}!function(e){e.viewInjector=function(e,t,i,s,r){Promise.all([n.e(2654),n.e(3349),n.e(9268),n.e(4100)]).then(n.bind(n,25903)).then((({ProofitViewInjector:n})=>{t.pipe(o.h((e=>!!e)),a.q(1)).subscribe((t=>{const o=new n(e,t,i);o.inject(r?{eventPropagationHandler:r.eventPropagationHandler}:void 0),s(o)}))}))},e.shouldCreate=function(e,t,n,i){var s,r,o,a,l;const c=i.premium,d=u.n.isClaimed(i),h=u.n.doesUserBelongToInstitution(i),g=null!==(o=null===(r=null===(s=n.proofit)||void 0===s?void 0:s.enableByBrowser)||void 0===r?void 0:r[e])&&void 0!==o&&o,p=null!==(l=null===(a=n.proofit)||void 0===a?void 0:a.enableForGB)&&void 0!==l&&l,m=!h||u.n.isGrammarlyEmployee(i)||p;return g&&c&&m&&!d&&"docs.google.com"!==t},e.getRequiredDenaliSupportedFeatures=function(t,n,i,s){return e.shouldCreate(t,n,i,s)?[l.zV.proofit]:[]}}(d||(d={}))},13425:(e,t,n)=>{if(n.d(t,{BT:()=>S,ed:()=>b}),5526!=n.j)var i=n(90023);var s=n(36769);if(5526!=n.j)var r=n(87459);if(5526!=n.j)var o=n(18647);if(5526!=n.j)var a=n(90595);if(5526!=n.j)var l=n(16381);if(5526!=n.j)var c=n(38364);if(5526!=n.j)var u=n(40594);if(5526!=n.j)var d=n(85580);if(5526!=n.j)var h=n(1646);if(5526!=n.j)var g=n(64405);if(5526!=n.j)var p=n(72554);if(5526!=n.j)var m=n(53680);if(5526!=n.j)var f=n(65487);async function v(e,t,n,i=0,r,a=null,l=null,u=!1,h=!1,g=!1,v=!0){const _=(0,s.Cq)(e.startContainer.ownerDocument,"range owner document"),b=g?(0,p.x)(e):null;a&&(0,o.kW)(a,h,v),null!==l&&await(0,c.gw)(l);const S=g&&b?(0,p.f)(_,b,e,a):e;return((e,t,n=0,i=!1)=>{let s=-1,r=!1;if(i){const n=1===e.rangeCount&&e.getRangeAt(0);if(n&&d.M.equalSelection(t,n))return!0}for(;!r&&s<n;){if(e.removeAllRanges(),0===e.rangeCount)try{e.addRange(t.cloneRange());const n=1===e.rangeCount&&e.getRangeAt(0);r=n&&d.M.equalSelection(t,n)}catch(e){r=!1}else r=!1;s++}return r})((0,s.Cq)(_.getSelection(),"doc selection"),S,i,u)?(void 0!==r&&await(0,c.gw)(r),n(t,_)):m.j.fail(f.wB.setSelectionFail)}var _;!function(e){e.storeFrom=function(e){const t=[],n=(0,s.Cq)(e.getSelection(),"document selection"),i=n.rangeCount;for(let e=0;e<i;e++)t.push(n.getRangeAt(e).cloneRange());return{ranges:t}},e.restoreTo=function(e,t){const n=(0,s.Cq)(t.getSelection(),"document selection");n.removeAllRanges(),e.ranges.forEach((e=>n.addRange(e)))}}(_||(_={}));class b{constructor(e,t,n,i=((e,t,n=!1)=>d.M.createRange(e,t.start,t.end,!0,n)),s=2,r,o=null,l=null,c,h,g=u.Y.create("GenericReplacementService")){this._textObserver=e,this._experimentClient=t,this._doReplaceAtCurrentSelection=n,this._createRange=i,this._setSelectionRetryCount=s,this._asyncReplaceDelay=r,this._focusElement=o,this._delayBeforeSelection=l,this._onBeforeNextReplacementInBatch=h,this._log=g,this.capabilities="richtext",this.onBeforeNextReplacementInBatch=async()=>{var e;await(null===(e=this._onBeforeNextReplacementInBatch)||void 0===e?void 0:e.call(this))},this._transformReplacementBeforeApply=null!=c?c:e=>e,this._isSelectionOptimizationEnabled=this._experimentClient.isGateEnabled(a.K.ExistingSelectionOptimization),this._dispatchFocusEventWhenDocNotFocused=this._experimentClient.isGateEnabled(a.K.DispatchFocusEventIfDocNotFocused),this._isRangeDetachmentResolutionEnabled=this._experimentClient.isGateEnabled(a.K.ResolveDetachedRangeOnReplace),this._restoreScrollableAncestorsOnFocus=this._experimentClient.isGateEnabled(a.K.RestoreScrollableAncestorsOnFocus)}_getCurrentTextMap(){return this._textObserver.getCurrentTextMap()}canPerformReplacement(e){const t=this._createRange(this._getCurrentTextMap(),e),n=null!==t;return t&&t.detach(),n}_getCurrentFormatMap(e){var t;return this._experimentClient.isGateEnabled(a.K.NonGDocsGetFormatMap)&&(null===(t=this._textObserver.getCurrentTextMap().getFormatHelper())||void 0===t?void 0:t.getInfo(e.start,e.end))||null}async _performReplacement(e,t,n){const i=this._createRange(this._getCurrentTextMap(),e,(0,l.G6)());let r=m.j.applied();if(i){const o=(0,s.Cq)(i.startContainer.ownerDocument,"range owner document"),a=n&&_.storeFrom(o);try{const n=this._getCurrentFormatMap(e);r=await v(i,t,this._doReplaceAtCurrentSelection,this._setSelectionRetryCount,this._asyncReplaceDelay,this._focusElement,this._delayBeforeSelection,this._isSelectionOptimizationEnabled,this._dispatchFocusEventWhenDocNotFocused,this._isRangeDetachmentResolutionEnabled,this._restoreScrollableAncestorsOnFocus),n&&r.context&&f.P9.isContentEditable(r.context)&&(r={...r,context:{...r.context,initialFormatMap:n}})}catch(e){this._log.error("genericReplaceAtRange fail",e),r=m.j.fail(f.wB.genericReplaceAtRangeRuntimeFail)}finally{i.detach()}return a&&_.restoreTo(a,o),r}return m.j.fail(f.wB.invalidRange)}async performReplacement(e,t){const n=this._transformReplacementBeforeApply(e,this._textObserver);if(Array.isArray(n)){let e;for(const i of n){const n=await this._performReplacement(i.pos,i.value,t);if(m.j.isFail(n))return n;e||(e=n.context)}return m.j.applied(e)}return this._performReplacement(n.pos,n.value,t)}insertAtCurrentSelection(e,t,n){return this._doReplaceAtCurrentSelection(e,t,n)}}class S extends(5526!=n.j?b:null){static create(e,t,n={}){return new S(e,t,n.createRange,n.setSelectionRetryCount,n.asyncReplaceDelay,n.focusElement||null,n.transformReplacementBeforeApply)}constructor(e,t,n,s,o,a,l,c=a&&new h.a0(a,(()=>e.getCurrentTextMap()))){super(e,t,((e,t,n)=>r.O.create((s=>{const{command:r,arg:o,reason:a}=function(e,t){if("string"!=typeof e)return{command:"insertHTML",arg:g.VI.renderToHtml(e),reason:f.wB.execCommandInsertHTMLFail};if(null==t?void 0:t.html)return{command:"insertHTML",arg:t.html,reason:f.wB.execCommandInsertHTMLFail};return{command:"insertText",arg:e,reason:f.wB.execCommandInsertTextFail}}(e,n),l=null==c?void 0:c.getCurrentSelection()[0];s((0,i.zG)(t.execCommand(r,!1,o),m.j.fromResult(a,f.P9.contentEditable({textRange:l,replacementMethod:f.GB.execCommand}))))}))),n,s,o,a,null,l)}}},64405:(e,t,n)=>{n.d(t,{VI:()=>i});var i,s=n(71576),r=n(41587),o=n(90189),a=n(90595),l=n(31272),c=n(78968);function u(e){return e.replace(/ +/g,(function(t,n){const i=1===t.length,s=void 0!==e[n-1]&&void 0!==e[n+1];return i&&s?" ":t.split("").map(((e,t)=>t%2==0?"&nbsp;":" ")).join("")}))}function d(e){var t,n;return null!==(n=null===(t=function(e){return e.match(/^https?:\/\//i)?e:null}(e))||void 0===t?void 0:t.replace(/"/g,"%22").replace(/'/g,"%27"))&&void 0!==n?n:""}!function(e){function t(e){const t=Object.keys(e);return 0===t.length?"":` style="${t.map((t=>`${t}:${e[t]}`)).join(";")}"`}e.renderToHtml=function(e,i={}){const s=function(e){var n,i,s,r;const o=null!==(n=e.inlineBlockStyle)&&void 0!==n?n:{"box-sizing":"border-box",margin:"0",padding:"0","text-align":"left"},a=null!==(i=e.headingBlockStyle)&&void 0!==i?i:{"box-sizing":"border-box",margin:"0",padding:"0","text-align":"left"},l=null!==(s=e.listBlockStyle)&&void 0!==s?s:{"box-sizing":"border-box",margin:"0","text-align":"left"};return{singleLineDocumentWrapTag:null!==(r=e.singleLineDocumentWrapTag)&&void 0!==r?r:"span",inlineBlockStyleAttribute:t(o),headingBlockStyleAttribute:t(a),orderedListBlockStyleAttribute:[t({...l,"list-style-type":"decimal"}),t({...l,"list-style-type":"lower-alpha"}),t({...l,"list-style-type":"lower-roman"})],unorderedListBlockStyleAttribute:t({...l,"list-style-type":"disc"})}}(i),r=c.v.buildRenderInfo(e),o=1===r.length;return r.map((e=>{if(e instanceof c.v.HeadingRenderBlock)return`<h${e.level}${s.headingBlockStyleAttribute}>${n(e.delta)}</h${e.level}>`;if(e instanceof c.v.ListRenderBlock)return h(e,s);const t=o?s.singleLineDocumentWrapTag:"p";return`<${t}${s.inlineBlockStyleAttribute}>${n(e.delta)}</${t}>`})).join("")};const n=e=>c.v.isEmptyLine(e)?"&nbsp;":e.filter(s.s.isInsert).map(i).join("");function i(e){var n,i;let c="";if(s.s.isInsertString(e)&&(c=e.insert.replace("\n",""),c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/:/g,"&colon;").replace(/\(/g,"&lpar;").replace(/\)/g,"&rpar;"),(0,o.OB)().experimentClient.isGateEnabled(a.K.FormattingReplaceEmptyStringToNonBreakingSpaceEntity)&&(c=u(c))),(0,r.W1)(e))return u((0,r.wc)(e));s.s.isInsertEmbed(e)&&(null===(n=e.insert)||void 0===n?void 0:n.image)&&(c=`<img src="${d(e.insert.image)}"/>`);const h=null!==(i=e.attributes)&&void 0!==i?i:{};if(h.fontFamily||h.color||h.fontSize||h.backgroundColor){const e={"font-family":h.fontFamily,color:h.color,"font-size":h.fontSize,"background-color":h.backgroundColor};c=`<span${t((0,l.hX)(((e,t)=>void 0!==t),e))}>${c}</span>`}return!0===h.strike&&(c=`<s>${c}</s>`),!0===h.bold&&(c=`<strong>${c}</strong>`),!0===h.italic&&(c=`<em>${c}</em>`),!0===h.underline&&(c=`<u>${c}</u>`),h.link&&(c=`<a href="${d(h.link)}" target="_blank">${c}</a>`),c}function h(e,t){const i=e.items.map((e=>e instanceof c.v.ListRenderBlock?h(e,t):`<li>${n(e.delta)}</li>`)).join("");return"ordered"===e.listType?`<ol${t.orderedListBlockStyleAttribute[e.indent%3]}>${i}</ol>`:`<ul${t.unorderedListBlockStyleAttribute}>${i}</ul>`}}(i||(i={}))},25754:(e,t,n)=>{n.d(t,{$:()=>i});var i,s=n(71576),r=n(41587),o=n(78968);!function(e){e.renderToPlainText=function(e,n={}){var i,s,r;const a={objectReplacement:null!==(i=n.objectReplacement)&&void 0!==i?i:"",bulletSymbol:null!==(s=n.bulletSymbol)&&void 0!==s?s:"",dashSymbol:null!==(r=n.dashSymbol)&&void 0!==r?r:"-"};return o.v.buildRenderInfo(e).map((e=>t(e,a))).join("\n")};const t=(e,t)=>e instanceof o.v.ListRenderBlock?a(e,t):n(e.delta,t),n=(e,t)=>e.ops.map((e=>i(e,t))).join(""),i=(e,t)=>(0,r.W1)(e)?(0,r.wc)(e):s.s.isInsertString(e)?e.insert.replace("\n",""):t.objectReplacement;function a(e,t){let i=0;return e.items.map((s=>{if(s instanceof o.v.ListRenderBlock)return a(s,t);const r=function(e,t,n){switch(e.listType){case"bullet":return n.bulletSymbol;case"dashed":return n.dashSymbol;default:switch(e.indent%3){case 1:return`${String.fromCharCode("a".charCodeAt(0)+t)}.`;case 2:return`${function(e){let t=e,n="";for(let e=0;e<l.length;e++)for(;t>=l[e].value;)n+=l[e].digit,t-=l[e].value;return n}(t+1)}.`;default:return`${t+1}.`}}}(e,i++,t),c=Math.max(4*e.indent-r.length+2,0);return`${" ".repeat(c)}${r} ${n(s.delta,t)}`})).join("\n")}const l=[{digit:"l",value:50},{digit:"xl",value:40},{digit:"x",value:10},{digit:"ix",value:9},{digit:"v",value:5},{digit:"iv",value:4},{digit:"i",value:1}]}(i||(i={}))},78968:(e,t,n)=>{n.d(t,{v:()=>i});var i,s=n(71576);!function(e){class t{constructor(e){this.delta=e}}e.InlineRenderBlock=t;class n{constructor(e,t){this.level=e,this.delta=t}}e.HeadingRenderBlock=n;class i{constructor(e,t){this.indent=e,this.listType=t,this.items=[]}tryAppend(e,t){var n;if(!t.list||this.listType!==t.list)return!1;const s=null!==(n=t.indent)&&void 0!==n?n:0;if(this.indent===s)return this.items.push({delta:e}),!0;if(this.indent<s){let n=this.items.length>0?this.items[this.items.length-1]:null;return!!(n instanceof i&&n.tryAppend(e,t))||(n=new i(this.indent+1,t.list),this.items.push(n),n.tryAppend(e,t))}return!1}}e.ListRenderBlock=i,e.buildRenderInfo=function(e){const s=[];return e.eachLine(((e,r)=>{if(r.list){let t=s.length>0?s[s.length-1]:null;return!!(t instanceof i&&t.tryAppend(e,r))||(t=new i(0,r.list),s.push(t),t.tryAppend(e,r))}return r.header?(s.push(new n(r.header,e)),!0):(s.push(new t(e)),!0)})),s},e.isEmptyLine=e=>0===e.ops.length||1===e.ops.length&&r(e.ops[0]);const r=e=>s.s.isInsertString(e)&&("\n"===e.insert||""===e.insert);e.isRichText=e=>e.ops.some(o);const o=e=>s.s.isInsertEmbed(e)||s.s.isInsertString(e)&&void 0!==e.attributes&&l(e.attributes),a=["bold","italic","underline","link","header","list","indent"],l=e=>a.some((t=>void 0!==e[t]))}(i||(i={}))},27970:(e,t,n)=>{if(n.d(t,{Eb:()=>h,TG:()=>v,V0:()=>b,Xw:()=>_,_s:()=>d,eg:()=>p,m3:()=>g,xF:()=>m}),5526!=n.j)var i=n(78767);if(5526!=n.j)var s=n(90595);if(5526!=n.j)var r=n(88778);if(5526!=n.j)var o=n(13425);if(5526!=n.j)var a=n(25754);if(5526!=n.j)var l=n(64405);if(5526!=n.j)var c=n(53680);if(5526!=n.j)var u=n(65487);function d(e,t){return"string"==typeof e?{plain:e,html:null==t?void 0:t.html}:{plain:a.$.renderToPlainText(e),html:l.VI.renderToHtml(e)}}function h(e,t){const n=(0,i.DV)((()=>new DataTransfer),(()=>{})),s=new ClipboardEvent("paste",{clipboardData:n,bubbles:!0,cancelable:!0});return s.clipboardData?(void 0!==t.plain&&(0,r.N)(s.clipboardData).setData("text/plain",t.plain),void 0!==t.html&&(0,r.N)(s.clipboardData).setData("text/html",t.html),e.dispatchEvent(s)):null}function g(e){e.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:46,key:"Delete"}))}function p(e){e.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:39,key:"ArrowRight",code:"ArrowRight",shiftKey:!0}))}function m(e,t){const n=void 0===t.html?void 0:(0,i.DV)((()=>new DataTransfer),(()=>{})),s=new InputEvent("beforeinput",{inputType:"insertReplacementText",data:t.plain,dataTransfer:n,cancelable:!0,bubbles:!0});s.dataTransfer&&(void 0!==t.plain&&(0,r.N)(s.dataTransfer).setData("text/plain",t.plain),void 0!==t.html&&(0,r.N)(s.dataTransfer).setData("text/html",t.html)),e.dispatchEvent(s)}function f(e){return(0,i.DV)((()=>{const t="text",n=new InputEvent("beforeinput",{inputType:e,data:t,cancelable:!0,bubbles:!0});return(!e||n.inputType===e)&&n.data===t&&Boolean(n.getTargetRanges())}),(()=>!1))}function v(){return f("insertReplacementText")}function _(){return f("deleteContentBackward")}class b extends(5526!=n.j?o.ed:null){constructor({eventTarget:e,textObserver:t,createRange:n,setSelectionRetryCount:i,asyncReplaceDelay:r=0,focusElement:o=e,replaceEvent:a="paste",deletionEvent:l="keydown",delayBeforeSelection:p,transformReplacementBeforeApply:f,experimentClient:v,onBeforeNextReplacementInBatch:_}){const b=v.isGateEnabled(s.K.DispatchDeltaDeleteEvent);super(t,v,(async(t,n,i)=>{const s=d(t,i);return(b?!s.plain&&!s.html:!t)?"keydown"===l?(g(e),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchDeleteEvent}))):"paste"===l?(h(e,s),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchPasteDeleteEvent}))):"beforeinput"===l?(e.dispatchEvent(new InputEvent("beforeinput",{inputType:"deleteContentBackward",cancelable:!0,bubbles:!0})),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchBeforeInputDeleteContentEvent}))):(this._log.error("unknown replacement evenet",a),c.j.fail(u.wB.unknownDispatchHTMLReplacementEvent)):"paste"===a?(h(e,s),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchPasteEvent}))):"beforeinput"===a?(m(e,s),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchBeforeInputInsertReplacementTextEvent}))):(this._log.error("unknown replacement evenet",a),c.j.fail(u.wB.unknownDispatchTextReplacementEvent))}),n,i,r,o,p,f,_)}}},72554:(e,t,n)=>{if(n.d(t,{f:()=>r,x:()=>s}),5526!=n.j)var i=n(18647);function s(e){return{startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset}}function r(e,t,n,s){let r=n,o=!1;try{let n=t.startContainer,a=t.endContainer;if(!e.contains(n)&&s&&e.contains(s)){o=!0;const r=t.startContainer.textContent||void 0,a=(0,i.qW)(s,r);a&&e.contains(a)&&(n=a)}if(!e.contains(a)&&s&&e.contains(s)){o=!0;const n=t.endContainer.textContent||void 0,r=(0,i.qW)(s,n);r&&e.contains(r)&&(a=r)}o&&e.contains(n)&&e.contains(a)&&(r=e.createRange(),r.setStart(n,t.startOffset),r.setEnd(a,t.endOffset))}catch(e){r=n}return r}},65487:(e,t,n)=>{var i,s,r,o,a,l,c,u,d,h;n.d(t,{$_:()=>o,Cf:()=>s,GB:()=>d,KK:()=>c,P9:()=>h,RL:()=>a,Vf:()=>r,aZ:()=>l,wB:()=>i}),function(e){e.setSelectionFail="setSelectionFail",e.genericReplaceAtRangeRuntimeFail="genericReplaceAtRangeRuntimeFail",e.invalidRange="invalidRange",e.unknownDispatchTextReplacementEvent="unknownDispatchTextReplacementEvent",e.unknownDispatchHTMLReplacementEvent="unknownDispatchHTMLReplacementEvent",e.execCommandInsertTextFail="execCommandInsertTextFail",e.execCommandInsertHTMLFail="execCommandInsertHTMLFail"}(i||(i={})),function(e){e.textareaReplaceRuntimeFail="textareaReplaceRuntimeFail",e.insertAtCurrentSelectionFail="insertAtCurrentSelectionFail"}(s||(s={})),function(e){e.gdocsCursorServiceError="gdocsCursorServiceError",e.gdocsSingleReplacementError="gdocsSingleReplacementError"}(r||(r={})),function(e){e.cursorServiceError="cursorServiceError",e.batchRuntimeError="batchRuntimeError",e.injectedReplacementRuntimeError="injectedReplacementRuntimeError",e.injectedFailTextChanged="injectedFailTextChanged",e.injectedFailTextNotChanged="injectedFailTextNotChanged"}(o||(o={})),function(e){e.executionTimeout="executionTimeout"}(a||(a={})),function(e){e.validationInvalidRange="validationInvalidRange",e.validationTextMismatch="validationTextMismatch"}(l||(l={})),function(e){e.timeout="timeout",e.conflict="conflict",e.error="error"}(c||(c={})),function(e){e.gDocsCanvas="gDocsCanvas",e.contentEditable="contentEditable"}(u||(u={})),function(e){e.execCommand="execCommand",e.dispatchPasteEvent="dispatchPasteEvent",e.dispatchBeforeInputInsertReplacementTextEvent="dispatchBeforeInputInsertReplacementTextEvent",e.dispatchDeleteEvent="dispatchDeleteEvent",e.dispatchPasteDeleteEvent="dispatchPasteDeleteEvent",e.dispatchBeforeInputDeleteContentEvent="dispatchBeforeInputDeleteContentEvent"}(d||(d={})),function(e){e.gDocsCanvas=function(e){return{key:u.gDocsCanvas,...e}},e.contentEditable=function(e){return{key:u.contentEditable,...e}},e.isGDocsCanvas=function(e){return e.key===u.gDocsCanvas},e.isContentEditable=function(e){return e.key===u.contentEditable}}(h||(h={}))},53680:(e,t,n)=>{var i,s;n.d(t,{V:()=>i,j:()=>s}),function(e){e.success="success",e.fail="fail",e.applied="applied"}(i||(i={})),function(e){e.success=function(e){return{result:i.success,context:e}},e.fail=function(e,t){return{result:i.fail,reason:e,context:t}},e.applied=function(e){return{result:i.applied,context:e}},e.isFail=function(e){return e.result===i.fail},e.isSuccess=function(e){return e.result===i.success},e.isApplied=function(e){return e.result===i.applied},e.fromResult=function(t,n){return i=>i?e.applied(n):e.fail(t,n)}}(s||(s={}))},95050:(e,t,n)=>{if(n.d(t,{H:()=>s}),5526!=n.j)var i=n(71576);function s(e){const{pos:t,value:n}=e,s=t.end>t.start;if("string"==typeof n)return n.length?s?"replace":"insert":"delete";if(0===n.ops.length)return"delete";if(1===n.ops.length){const e=n.ops[0];if(i.s.isInsert(e)&&void 0===e.attributes)return s?"replace":"insert"}return"mixed"}},1646:(e,t,n)=>{if(n.d(t,{a0:()=>c}),5526!=n.j)var i=n(18117);if(5526!=n.j)var s=n(90023);if(5526!=n.j)var r=n(58303);if(5526!=n.j)var o=n(43389);if(5526!=n.j)var a=n(85580);if(5526!=n.j)var l=n(91297);class c{constructor(e,t){this._target=e,this._getTextMap=t}setSelection(e){const t=a.M.createRange(this._getTextMap(),Math.min(e.start,e.end),Math.max(e.start,e.end),!0,void 0,!0),n=this._target.ownerDocument&&this._target.ownerDocument.getSelection();n&&(n.rangeCount>0&&n.removeAllRanges(),t&&n.addRange(t))}getCurrentSelection(e=!1){const t=this._target.getRootNode(),n="getSelection"in t?t:this._target.ownerDocument,i=n&&n.getSelection(),a=i&&i.rangeCount>0?i.getRangeAt(0):null;return null!==a&&null!==i&&("Range"===i.type||"Caret"===i.type&&this._target.contains(i.anchorNode)&&this._target.contains(a.startContainer)&&this._target.contains(a.endContainer))?e&&a.endContainer!==a.startContainer&&a.endContainer.contains(a.startContainer)&&(0,l.BM)(a.startContainer)?(0,s.zG)(h(a,i.isCollapsed),r.UI((e=>({...e,endOffset:a.startContainer.nodeValue?a.startContainer.nodeValue.length:a.endOffset}))),r.tS((e=>r.ij(p(e,this._getTextMap(),!1)))),r.wp((()=>u(a,this._target)?r.G(o.SV.create(0,0)):r.YP)),r.g_((()=>[]),(e=>[e]))):(0,s.zG)(h(a,i.isCollapsed),r.tS((e=>r.ij(p(e,this._getTextMap(),!0)))),r.wp((()=>u(a,this._target)?r.G(o.SV.create(0,0)):r.YP)),r.g_((()=>[]),(e=>[e]))):[]}}function u(e,t){return e.startContainer===e.endContainer&&e.startContainer===t&&0===t.childElementCount}function d(e,t){return(0,l.BM)(e)?r.G({container:e,offset:t}):(0,s.zG)(r.ij(e.childNodes[t]),r.hX((e=>e instanceof Node)),r.UI((e=>({container:e,offset:0}))))}function h(e,t){return(0,s.zG)(i.Yt(r.Kw)({start:d(e.startContainer,e.startOffset),end:d(e.endContainer,e.endOffset)}),r.UI((({start:e,end:n})=>({startContainer:e.container,startOffset:e.offset,endContainer:n.container,endOffset:n.offset,collapsed:t}))))}function g(e,t,n){const i=e.getFragmentsByNode(t);if(i){let e=0,t=i[e],s=null;for(;t;){if(!(t.startOffsetInNode<n&&t.endOffset-t.startOffset+t.startOffsetInNode<n)){s=t.startOffset+(n-t.startOffsetInNode);break}t=i[e++]}return s}return null}function p(e,t,n){const i=g(t,e.startContainer,e.startOffset);if(e.collapsed)return n&&null!==i?{start:i,end:i}:null;{const n=g(t,e.endContainer,e.endOffset);return null!==i&&null!==n?{start:i,end:n}:null}}},19536:(e,t,n)=>{n.d(t,{x:()=>p});var i=n(92379),s=n(84714),r=n(20161),o=n(59179),a=n(58303),l=n(71401),c=n(90189),u=n(3030),d=n(83507),h=n(19724),g=n(40594);class p{constructor(){this._feature=new u._,this._uiController=new u._,this._log=g.Y.create("SnippetsDynamicService")}get viewFeature(){return this._feature.viewInstance}get viewFeatureOption(){return this.viewFeature.view(a.ij)}init(e,t,i,s,r,o,a,l,u,d,h,g,p,m,f,v,_,b,S,y,C,w){Promise.all([n.e(7717).then(n.bind(n,28475)),S]).then((([{SnippetsRpcClient:n,SnippetsUIController:S,SnippetsProviderImpl:x,SnippetsFeature:E}])=>{var k;const T=new n(e),A=new S(u),R=new x(d(),T,g),I=(0,c.OB)().experimentClient,O=new E(R,t,i,s,r,o,a,A,l,u,d(),h,g,p,m,f,v,_,b,y,C,I,null!==(k=null==w?void 0:w.get())&&void 0!==k?k:void 0);this._feature.set(O),this._uiController.set(A),this._log.debug("Snippets feature initialized")}))}get view(){return this._uiController.viewInstance.pipe((0,r.w)((e=>e?e.view.pipe((0,o.U)((e=>i.createElement(d.L,{chunkName:"snippets"},e)))):(0,s.of)(null))))}dispose(){var e,t;try{null===(e=this._feature.instance)||void 0===e||e.dispose(),null===(t=this._uiController.instance)||void 0===t||t.dispose(),this._feature.dispose(),this._uiController.dispose()}catch(e){this._log.error("Failed disposing Snippets feature",e)}}}!function(e){e.shouldCreate=function(e){const t=h.n.doesUserBelongToInstitution(e);return Boolean(t)},e.getRequiredDenaliSupportedFeatures=function(){return[l.zV.suggestedSnippets]}}(p||(p={}))},91297:(e,t,n)=>{if(n.d(t,{A0:()=>u,BM:()=>c,HY:()=>a}),5526!=n.j)var i=n(47557);if(5526!=n.j)var s=n(40594);if(5526!=n.j)var r=n(90189);if(5526!=n.j)var o=n(90595);var a,l=n(95613);function c(e){return e.nodeType===Node.TEXT_NODE}!function(e){let t;function n(e){return e._tag===t.imageNode}!function(e){e.text="text",e.br="br",e.imageNode="imageNode"}(t=e.Type||(e.Type={})),e.text=function(e,n,i,s){return{_tag:t.text,node:e,text:null!==e.nodeValue?e.nodeValue:"",preserveWhiteSpace:n,inlineFormatting:i,blockFormatting:s}},e.imageNode=function(e,n,i=l.$){return{_tag:t.imageNode,node:e,src:null!=n?n:"",text:i}},e.br=function(e,n){return{_tag:t.br,node:e,blockFormatting:n}},e.isText=function(e){return e._tag===t.text},e.isBr=function(e){return e._tag===t.br},e.isSkippedNode=function(e){return n(e)},e.isImageNode=n}(a||(a={}));class u{constructor(e,t,n,i,r,o,a,l=null,c,u=s.Y.create("BlockMap")){this._root=e,this._filterNode=t,this._filterNodeOutput=n,this._isBlockNode=i,this._filterOutput=r,this._finishBlockAfterNode=o,this._finishBlockMap=a,this._nodeFormatting=l,this._initialTraversalState=c,this._log=u,this.blocks=this._buildBlockMap(this._root,this._initialTraversalState)}_buildBlockMap(e,t){const n=[];let s=[],l=!0;const u=(e=!1)=>{s.length>0&&(e||s.length>1||s[0]._tag!==a.Type.br)&&(n.push(s),s=[])},d=(e,t)=>{t&&(l||u(),s.push(e)),l=t},h=(e,t,n,s)=>{var l,g,p;if(this._finishBlockMap(e,t))return!0;if(this._filterNode(e,t)){const r=e.getAttribute("contenteditable"),o={preserveWhiteSpace:t.preserveWhiteSpace||"PRE"===e.tagName||"pre-wrap"===(null===(p=null===(g=null===(l=null==e?void 0:e.ownerDocument)||void 0===l?void 0:l.defaultView)||void 0===g?void 0:g.getComputedStyle(e))||void 0===p?void 0:p.whiteSpace),isEditable:null===r?t.isEditable:"true"===r||"false"!==r&&t.isEditable,outputConsidered:this._filterNodeOutput(e,t)};for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if(this._finishBlockMap(r,o))return!0;if(c(r))d(a.text(r,o.preserveWhiteSpace,n,s),o.outputConsidered&&this._filterOutput(r,o));else if((0,i.Tv)(r)){if("BR"===r.tagName)d(a.br(r,s),o.outputConsidered&&this._filterOutput(r,o));else if(this._isBlockNode(r,o)){if(u(),h(r,o,n,null!==this._nodeFormatting?this._nodeFormatting(r,s):void 0))return!0;this._finishBlockAfterNode(r,o)&&u()}else if(h(r,o,null!==this._nodeFormatting?this._nodeFormatting(r,n):void 0,s))return!0}else r.nodeType===Node.COMMENT_NODE||this._log.warn(`don't know how to handle nodeType=${r.nodeType}`,r)}}else(0,r.OB)().experimentClient.isGateEnabled(o.K.MapImageNodeForRichText)&&"IMG"===e.tagName&&d(a.imageNode(e,e.getAttribute("src")),t.outputConsidered&&this._filterOutput(e,t));return!1};return h(e,t),u(!0),n}}},95613:(e,t,n)=>{n.d(t,{$:()=>i});const i=""},73191:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(71401),s=n(48758),r=n(30582);class o extends r.n{constructor(e,t,i,r,o){super(e,t,s.S.isToneAIAlert,(()=>n.e(7725).then(n.bind(n,15941)).then((({ToneAIFeature:e})=>new e(this._alertStateService,this._getSessionUuid,this._gnar))))),this._alertStateService=i,this._getSessionUuid=r,this._gnar=o}}!function(e){e.shouldCreate=function(e,t){var n,i;return Boolean(null===(i=null===(n=t.toneAI)||void 0===n?void 0:n.enableByBrowser)||void 0===i?void 0:i[e])},e.getRequiredDenaliSupportedFeatures=function(t,n){return e.shouldCreate(t,n)?[i.zV.toneAI]:[]}}(o||(o={}))},68271:(e,t,n)=>{n.d(t,{H:()=>i});var i,s=n(63349),r=n(13391);!function(e){const t=r.h.create(""),n=new Proxy({textContent:""},{get:(e,n)=>"textContent"===n?t.get():Reflect.get(e,n),set:(e,n,i)=>"textContent"===n&&"string"==typeof i?(t.set(i),!0):Reflect.set(e,n,i)});e.init=function(){s.ux.setStylesTarget(n)},e.styles=t.view()}(i||(i={}))},9976:(e,t,n)=>{n.d(t,{YS:()=>b,mE:()=>v,nS:()=>i,o6:()=>h});var i,s=n(92379),r=n(32073),o=n(13391),a=n(85837),l=n(28510),c=n(40594),u=n(68271),d=n(15083);!function(e){e.Context=s.createContext(null)}(i||(i={}));const h=16;function g(e,t){e&&e instanceof HTMLElement?e.style.setProperty("--rem",`${t}`):c.Y.create("ShadowRootInjector").warn("setRootCssVar: host is not an HTMLElement. This should not happen. Please report this issue.")}class p{constructor(){this._denaliStyleSheet=new CSSStyleSheet,this._globalStyleSheet=new CSSStyleSheet,this._globalStyleSheetLoaded=o.h.create(null),this._subscription=new r.w0}inject(e,t){const n=this._globalStyleSheetInitialized();n||this._initGlobalStyleSheet();const r=e.attachShadow({mode:"open"});r.adoptedStyleSheets=[this._denaliStyleSheet,this._globalStyleSheet],g(r.host,h);const o=(0,d.X3)(r,s.createElement(i.Context.Provider,{value:r},s.createElement(t,{viewLoaded:this._globalStyleSheetLoaded.view((e=>({...e,constructableStyleSheetInitialized:n})))})));return()=>{o(),this._subscription.unsubscribe()}}_globalStyleSheetInitialized(){return this._globalStyleSheet.cssRules.length>0}async _initGlobalStyleSheet(){try{if(!self.GR_INLINE_STYLES)throw new Error("No inline styles");await Promise.all([this._denaliStyleSheet.replace(u.H.styles.get()),this._globalStyleSheet.replace(self.GR_INLINE_STYLES)]),this._globalStyleSheetLoaded.set({stylesInjectionStrategy:"constructableStyleSheet"}),this._subscription.add(u.H.styles.subscribe((e=>this._denaliStyleSheet.replaceSync(e))))}catch(e){this._globalStyleSheetLoaded.set({error:`${e}`,stylesInjectionStrategy:"constructableStyleSheet"})}}}const m=(0,a.xb)(l.b);class f{inject(e,t){const n=o.h.create(null),r=e.attachShadow({mode:"open"});return g(r.host,h),(0,d.X3)(r,s.createElement(s.Fragment,null,s.createElement(m,null,u.H.styles),s.createElement(l.b,null,self.GR_INLINE_STYLES),s.createElement(i.Context.Provider,{value:r},s.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"styleElement"})))}}class v{inject(e,t){const n=o.h.create(null),r=e.attachShadow({mode:"open"});return(0,d.X3)(r,s.createElement(s.Fragment,null,s.createElement(i.Context.Provider,{value:r},s.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"noStyles"})))}}let _=null;function b(e=!1){return e&&function(){if(null===_)try{const e=new CSSStyleSheet;_=!!e&&!!e.replace&&!!e.replaceSync&&"adoptedStyleSheets"in Document.prototype}catch(e){_=!1}return!0===_}()?new p:new f}},15083:(e,t,n)=>{n.d(t,{G7:()=>f,X3:()=>p});var i=n(92379),s=n(95295),r=n(84714),o=n(2613),a=n(14969),l=n(29479),c=n(954),u=n(24666),d=n(59179),h=n(33885);function g(e){return!!e&&!e.error}function p(e,t,n){return(0,s.render)(t,e,n),()=>(0,s.unmountComponentAtNode)(e)}const m=({view:e,placeholder:t,viewLoaded:n,minDuration:s,forcePlaceholder:u})=>{const d=g(n.get())&&!u?(0,r.of)(e):n.pipe((0,o.e)(s),(0,a.P)(g),(0,l.h)(e),(0,c.O)(t));return i.createElement(h.F.Fragment,null,d)};var f;!function(e){e.showWhenLoaded=function(e){return function({viewLoaded:t}){return i.createElement(h.F.Fragment,null,t.pipe((0,u.x)(),(0,d.U)((t=>g(t)?e:null))))}},e.withPlaceholder=function(e,t,n,s){return function({viewLoaded:r}){return i.createElement(m,{view:e,placeholder:t,minDuration:n||0,viewLoaded:r,forcePlaceholder:s||!1})}}}(f||(f={}))},29999:(e,t,n)=>{n.d(t,{EM:()=>i,_R:()=>f,aP:()=>v,zs:()=>s});var i,s,r=n(92379),o=n(32073),a=n(13391),l=n(30105),c=n(90595),u=n(51560),d=n(29483),h=n(68271),g=n(15083),p=n(92706);class m{constructor(e,t,n,i){var s,r,o;this._options=i,this._root=null,this._unmount=null,this._root=e(),t(this._root),this._unmount=n(this._root),(null===(s=this._options)||void 0===s?void 0:s.allowPrint)||this._root.classList.add(p.gr_no_print),(null===(r=this._options)||void 0===r?void 0:r.eventPropagationHandler)&&(this._disposeEventPropagationHandler=null===(o=this._options)||void 0===o?void 0:o.eventPropagationHandler(this._root)),this._preventEventPropagation()}_preventEventPropagation(){const e=["keydown","keyup","keypress","mouseup","mousedown","pointerdown","click"];(0,d.OB)().experimentClient.isGateEnabled(c.K.CentralizeStopEventPropagation)&&e.forEach((e=>{var t;null===(t=this._root)||void 0===t||t.addEventListener(e,(e=>{e.stopPropagation()}))}))}dispose(){this._disposeEventPropagationHandler&&(this._disposeEventPropagationHandler(),this._disposeEventPropagationHandler=void 0),this._unmount&&(this._unmount(),this._unmount=null),this._root&&(this._root.parentNode?this._root.parentNode.removeChild(this._root):this._root.remove(),this._root=null)}}class f extends m{constructor(e,t,n,i){super(e,t,(e=>{var t,i;const s=new o.w0,l=e.ownerDocument,c=l.head,u="grammarly-extension-styles",d="grammarly-extension-denali-styles";let p=Array.from(null!==(t=c.getElementsByTagName("style"))&&void 0!==t?t:[]).find((e=>e.id===u)),m=Array.from(null!==(i=c.getElementsByTagName("style"))&&void 0!==i?i:[]).find((e=>e.id===d));p||(p=l.createElement("style"),p.id=u,p.innerHTML=self.GR_INLINE_STYLES||"",c.prepend(p)),m||(m=l.createElement("style"),m.id=d,p.insertAdjacentElement("beforebegin",m)),m.innerHTML=h.H.styles.get(),s.add(h.H.styles.subscribe((e=>{m&&(m.innerHTML=e)})));const f=a.h.create(null),v=(0,g.X3)(e,r.createElement(n,{viewLoaded:f}),(()=>f.set({shadowDOM:!1})));return()=>{s.unsubscribe(),v()}}),i)}}class v extends m{constructor(e,t,n,i,s){super((()=>{const t=e();return t.setAttribute(v.SHADOW_DOM_ROOT_ATTRIBUTE,"true"),t.tagName.toLocaleLowerCase()===l.Hq.toLocaleLowerCase()&&(null==s?void 0:s.vBarsCustomAttributes)&&Object.entries(s.vBarsCustomAttributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}),t,(e=>i.get().inject(e,(e=>r.createElement(n,{viewLoaded:e.viewLoaded.view((e=>e?{...e,shadowDOM:!0}:null))})))),s)}}v.SHADOW_DOM_ROOT_ATTRIBUTE=(0,u.V)("shadow-root"),function(e){e.defaultName=(0,u.m)("extension"),e.fromDocument=function(t,n=e.defaultName,i={}){return{doc:t,name:n,attributes:i}}}(i||(i={})),function(e){e.appendChild=function(e){return{parent:e}},e.isCustom=function(e){return e instanceof Function}}(s||(s={}))},9542:(e,t,n)=>{n.d(t,{V:()=>c});var i=n(78767),s=n(92379),r=n(14969),o=n(39963);class a{constructor(e,t){this._injector=e,this._injectionName=t}inject(e,t,n,i){const r=performance.now(),c=a._firstRender,u=a._somePreviousRenderCompleted;return a._firstRender=!1,this._injector(e,t,(({viewLoaded:e})=>s.createElement(l,{view:n,viewLoaded:e,onComplete:e=>{const t=performance.now();(0,o.Tb)().performance.viewInjection({timeToRender:Math.trunc(t-r),startTime:Math.trunc(r),endTime:Math.trunc(t),injectionName:this._injectionName,firstRender:c,somePreviousRenderCompleted:u,error:e.error||null,shadowDOM:!!e.shadowDOM,stylesInjectionStrategy:e.stylesInjectionStrategy||null,constructableStyleSheetInitialized:!!e.constructableStyleSheetInitialized}),a._somePreviousRenderCompleted=!0}})),i)}}a._firstRender=!0,a._somePreviousRenderCompleted=!1;const l=({viewLoaded:e,view:t,onComplete:n})=>(s.useEffect((()=>{const t=e.pipe((0,r.P)(i.fQ)).subscribe(n);return()=>null==t?void 0:t.unsubscribe()}),[]),s.createElement(t,{viewLoaded:e}));var c,u=n(9976),d=n(29999);function h(e){const t=e.doc.createElement(e.name);return e.attributes&&Object.entries(e.attributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}!function(e){const t=(0,i.Vo)(u.YS);e.get=function(e){return{inject:(n,s,r,o)=>{const l=(null==e?void 0:e.monitorAs)||n.name||"unknown";return new a((null==e?void 0:e.noShadowDOM)?(e,t,n,i)=>new d._R((()=>h(e)),d.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,i):(c=(null==e?void 0:e.noStyles)?(0,i.Vo)((()=>new u.mE)):t,(e,t,n,i)=>new d.aP((()=>h(e)),d.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,c,i)),l).inject(n,s,r,o);var c}}}}(c||(c={}))},25009:(e,t,n)=>{if(n.d(t,{Fb:()=>p,PF:()=>g,TY:()=>c,_V:()=>h,eg:()=>d,um:()=>l,yj:()=>u}),3075==n.j)var i=n(59179);if(3075==n.j)var s=n(24666);if(3075==n.j)var r=n(32103);if(3075==n.j)var o=n(49629);if(3075==n.j)var a=n(3944);var l,c,u;function d(e){if((0,a.uz)(e))return{mode:l.view};const t=(0,a.lW)(e);return t||((0,a.e$)(e)?{mode:l.noEditAccess}:{mode:l.edit})}!function(e){e.view="view",e.noEditAccess="noEditAccess",e.history="history",e.edit="edit"}(l||(l={})),function(e){e[e.ownDoc=0]="ownDoc",e[e.sharedDoc=1]="sharedDoc",e[e.noEditAccessDoc=2]="noEditAccessDoc"}(c||(c={})),function(e){e.read="read",e.write="write"}(u||(u={}));function h(e){return o.S.hz4.pipe((0,i.U)((()=>d(e))),(0,s.x)(((e,t)=>{return i=t,(n=e).mode===l.history&&i.mode===n.mode?n.subtype===i.subtype:n.mode===i.mode;var n,i})))}function g(e,t){return e?c.ownDoc:t?c.noEditAccessDoc:c.sharedDoc}function p(e,t,n,i){if(e.mode!==l.edit)return u.read;switch(t){case c.ownDoc:return u.write;case c.noEditAccessDoc:return u.read;case c.sharedDoc:return function(e,t,n){const i=!t&&!n;if(e.mode!==l.edit||i)return u.read;return u.write}(e,n,i);default:return(0,r.L0)(t)}}},3944:(e,t,n)=>{if(n.d(t,{LJ:()=>b,Nd:()=>u,Ov:()=>_,TW:()=>E,Ur:()=>d,Xs:()=>k,e$:()=>w,eg:()=>x,fN:()=>p,k6:()=>f,kh:()=>g,lW:()=>C,lz:()=>m,qg:()=>c,uj:()=>l,uz:()=>v}),3075==n.j)var i=n(90189);if(3075==n.j)var s=n(90595);if(3075==n.j)var r=n(36769);if(3075==n.j)var o=n(25009);if(5526!=n.j)var a=n(7833);function l(e){const t=(0,r.Cq)(e.querySelector(a.XG),"text buffer iframe");return(0,r.Cq)(t.nodeType===Node.ELEMENT_NODE&&"IFRAME"===t.tagName?t.contentDocument:void 0,"text buffer iframe document")}function c(e){const t=u(e);return{width:t?t.offsetWidth-t.clientWidth:0,height:t?t.offsetHeight-t.clientHeight:0}}function u(e){return e.querySelector(a.Wp)}function d(e,t,n){return t?function(e,t){if(t&&h(t))return t;const n=e.querySelectorAll(a.Qy);for(const e of n)if(h(e))return e;return null}(e,n):e.querySelector(a.Qy)}const h=e=>e.checkVisibility?e.checkVisibility():e.parentElement&&"none"!==e.parentElement.style.display;function g(e){return e.querySelectorAll(a.gH)}function p(e){return e.querySelector(a.gH)}function m(e){return Boolean(e.querySelector(a.gH))}function f(e){let t=e.querySelector(a.os);return t||(t=document.querySelector(a.gH)),t?t.getBoundingClientRect():null}const v=e=>!!e.querySelector(a.Lq);function _(e){return e.querySelector(a.$x)}function b(e){return null==e?void 0:e.querySelector(a.y1)}var S;!function(e){e.legacy="legacy",e.modern="modern"}(S||(S={}));const y=e=>"versionHistorySidebarWizSelector"===e.id||e.getBoundingClientRect().top>0?S.modern:S.legacy;function C(e){let t=e.querySelector(a.f);const n=(0,i.OB)().experimentClient.isGateEnabled(s.K.GDocsVersionHistorySidebarSelector);!t&&n&&(t=e.querySelector(a.q6));return!!t&&t.offsetHeight>0&&t.offsetWidth>0&&t?{mode:o.um.history,subtype:y(t)}:null}function w(e){return!!e.querySelector(`${a.jW}, ${a.F8}`)}function x(){const e=document.querySelector(a.d0),t=(null==e?void 0:e.classList.contains(a.uj))?"edit":void 0,n=(null==e?void 0:e.classList.contains(a._m))?"suggesting":void 0;return t||n||"other"}function E(e){return e.querySelector(a.QR)}function k(e){return e.querySelector(a.ij)}},7833:(e,t,n)=>{n.d(t,{$:()=>B,$x:()=>o,Cw:()=>j,F8:()=>_,Fh:()=>L,G$:()=>U,Go:()=>s,Jk:()=>H,Kt:()=>x,Lq:()=>h,Q:()=>P,Q6:()=>l,QO:()=>O,QR:()=>I,Qy:()=>S,Vk:()=>E,Wp:()=>i,XG:()=>r,_m:()=>m,d0:()=>g,f:()=>u,fD:()=>N,gH:()=>b,gL:()=>k,gv:()=>c,ij:()=>R,j5:()=>w,jW:()=>v,l$:()=>f,lO:()=>A,os:()=>C,q6:()=>d,qz:()=>F,rx:()=>T,tN:()=>M,uj:()=>p,wY:()=>G,y1:()=>a,yv:()=>D,yw:()=>y});const i=".kix-appview-editor",s=".docos-input",r=".docs-texteventtarget-iframe",o=".kix-cursor",a=".kix-cursor-caret",l="#docs-butterbar-container",c="docs-butterbar-container-compact",u="#docs-revisions-sidebar",d="#docs-wiz-sidebar-placeholder",h='#docs-toolbar-mode-switcher[aria-label="Viewing mode"]',g="#docs-toolbar-mode-switcher",p="edit-mode",m="suggest-mode",f="titlebar-mode-indicator-container",v="#titlebar-mode-indicator-container .titlebar-request-access-button",_="#titlebar-mode-indicator-container .kix-titlebar-request-access-button",b="canvas.kix-canvas-tile-content:not(.docs-ui-unprintable *)",S=".kix-rotatingtilemanager:not(.docs-ui-unprintable *)",y=".kix-page-paginated",C=".kix-page-paginated.canvas-first-page",w=".docs-horizontal-ruler",x=".docs-vertical-ruler",E="#fontSizeSelect input",k=".docs-ruler-background",T=".docs-ruler-background-inner",A=".docs-ruler-indent-first-line",R=".modal-dialog.docs-dialog .fatal-error-message",I='#docs-titlebar-share-client-button div[role="button"]',O=".kix-ai-text-generator-preview-view-insert-button",F=".kix-ai-text-generator-preview-view",D=".kix-ai-text-generator-prompt-view",P="textarea.kix-ai-text-generator-prompt-view-input",M=".kix-ai-text-generator-preview-view-generated-text",N=".appsElementsSidekickFeedContainer",B=".appsElementsSidekickUserMessageBubbleContent",U=".appsElementsSidekickUserMessageRoot",L=".appsElementsSidekickAgentMessageBubbleContent",G=".appsElementsSidekickAgentMessageRoot",H="li.appsElementsGenerativeaiAstAnimated",j="span.appsElementsGenerativeaiAstAnimated:not(li span)"},85098:(e,t,n)=>{n.d(t,{N:()=>i});const i="docs.google.com"},40144:(e,t,n)=>{function i(e){return!e.anonymous}n.d(t,{I:()=>i})},35743:(e,t,n)=>{n.d(t,{E:()=>i});class i{constructor(e,t,n,i){this._customInboundEventName=t,this._customOutboundEventName=n,this._wrapOutboundMessage=i,this.inbound={subscribe:e=>{const t=({detail:t})=>{const n=t;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._target.addEventListener(this._customInboundEventName,t,!1),{unsubscribe:()=>this._target.removeEventListener(this._customInboundEventName,t,!1)}}},this.outbound=e=>{const t=this._wrapOutboundMessage?this._wrapOutboundMessage(e):e,n=new CustomEvent(this._customOutboundEventName,{bubbles:!0,cancelable:!0,detail:t});this._target.dispatchEvent(n)},this._target=e.defaultView||e}}},17440:(e,t,n)=>{function i(e,t={top:0,left:0},n=!1){const i={clientX:t.left,clientY:t.top,bubbles:!0,shiftKey:n};e.dispatchEvent(new MouseEvent("mousedown",i)),e.dispatchEvent(new MouseEvent("mouseup",i))}function s(e,t){const n=t.toUpperCase();return e.dispatchEvent(new KeyboardEvent("keypress",{altKey:!1,bubbles:!0,charCode:0,code:`Key${n}`,composed:!0,key:`${t.toLowerCase()}`,ctrlKey:!1,keyCode:t.charCodeAt(0),shiftKey:n===t,which:t.charCodeAt(0),isComposing:!1,repeat:!1,metaKey:!1}))}function r(e,t){let n=!0;for(let i=0;i<t.length;i++)n=s(e,t[i])&&n;return n}n.d(t,{Nk:()=>i,db:()=>o,t7:()=>r});const o=async e=>{var t;const n=null===(t=new URL(e).pathname.match(/\/d\/([^/]+)\/edit/))||void 0===t?void 0:t[1];if(!n)return!1;{const e=`https://docs.google.com/document/d/${n}/peruserchrome`;try{const t=await fetch(e),n=(await t.text()).slice(4),i=JSON.parse(n);return!!i&&!0===i.IS_OWNER}catch(e){return!1}}}},91135:(e,t,n)=>{var i,s;n.d(t,{U:()=>i,z:()=>s}),function(e){e.editorElementSelector="div.kix-appview-editor",e.textEventsTargetIframeSelector="iframe.docs-texteventtarget-iframe",e.textEventsTargetElementSelector='[contenteditable="true"]'}(i||(i={})),function(e){e.spellingBubbleSelector="div.kix-spell-bubble",e.pageLessModeTableMaskInner="kix-domviewscroller-inner",e.pageLessModeTableMaskOuter="kix-domviewscroller-outer"}(s||(s={}))},68667:(e,t,n)=>{if(n.d(t,{Z:()=>s}),3075==n.j)var i=n(7865);class s extends(3075==n.j?i.C:null){maintainConsistency(e,t,n,i){super.maintainConsistency(e,t,!0,i)}}},90870:(e,t,n)=>{if(n.d(t,{Bq:()=>m,Cf:()=>g,KB:()=>c,LW:()=>d,Nm:()=>o,OZ:()=>a,R8:()=>p,UC:()=>r,bs:()=>f,qu:()=>l,uE:()=>u}),3075==n.j)var i=n(78767);if(3075==n.j)var s=n(43811);function*r(e,t){var n,i,s,o;for(const l of e.fragments)yield l,a(l)&&(null===(i=null===(n=null==t?void 0:t.containerPredicate)||void 0===n?void 0:n.call(t,l))||void 0===i||i)&&(null===(s=null==t?void 0:t.onEnter)||void 0===s||s.call(t,l),yield*r(l,t),null===(o=null==t?void 0:t.onLeave)||void 0===o||o.call(t,l))}function o(e){return"clip"===e.type||"page"===e.type}const a=3075==n.j?s.NK:null;function l(e){return"footnote_line"===e.type}function c(e){return"code_block"===e.type}function u(e){return"strikethrough"===e.type}function d(e,t){return h(e,t,-1)}function h(e,t,n){var r,a,d,h,g;let m;if((0,s.Gs)(e))m=null===(r=t.visitText)||void 0===r?void 0:r.call(t,e,n);else if(function(e){return"image"===e.type}(e))m=null===(a=t.visitImage)||void 0===a?void 0:a.call(t,e,n);else if(l(e))m=null===(d=t.visitFootnoteLine)||void 0===d?void 0:d.call(t,e,n);else if(u(e))m=null===(h=t.visitStrikethrough)||void 0===h?void 0:h.call(t,e,n);else if(c(e))m=null===(g=t.visitCodeBlock)||void 0===g?void 0:g.call(t,e,n);else if(o(e)){const r=function(e,t){return(0,s.NK)(t)?e.visitClip:function(e){return"page"===e.type}(t)?e.visitPage:void(0,i.vE)(t)}(t,e)||t.visitContainer;m=r?r(e,((n=e)=>p(n,t)),n):p(e,t)}else(0,i.vE)(e);return void 0===m?e:m}function g(e,t){let n,i=0;for(const s of e){const r=h(s,t,i);void 0===r||r===s?void 0!==n&&n.push(s):(void 0===n&&(n=e.slice(0,i)),null!==r&&n.push(r)),i++}return void 0!==n?n:e}function p(e,t){const n=g(e.fragments,t);return n!==e.fragments?{...e,fragments:n}:e}var m;function f(e,t,n){if(e&&t&&o(e)&&o(t))for(let i=0;i<e.fragments.length||i<t.fragments.length;i++){const s=f(e.fragments[i],t.fragments[i],n);if(s!==m.EQUAL)return s}return n(e,t)}!function(e){e[e.NOT_COMPARABLE=-2]="NOT_COMPARABLE",e[e.USE_FIRST=-1]="USE_FIRST",e[e.USE_SECOND=1]="USE_SECOND",e[e.EQUAL=0]="EQUAL"}(m||(m={}))},43811:(e,t,n)=>{if(n.d(t,{Fv:()=>g,Gs:()=>r,HK:()=>a,NK:()=>o,S2:()=>l,SM:()=>d,WR:()=>c,jO:()=>h,qt:()=>u,tR:()=>s}),3075==n.j)var i=n(80239);const s=1;function r(e){return"text"===e.type}function o(e){return"clip"===e.type}const a=2,l=3;function c(e,t){return{type:s,fragment:e,textRange:t}}function u(e){return{type:a,textRange:e}}function d(e,t,n,s){return{type:l,fragments:(0,i.o4)(e),incompleteStart:t,incompleteEnd:n,inputRange:s}}function h(e){return e.type===l}function g(e,t,n){if(r(e))return{type:e.type,text:e.text,special:e.special,originalFragment:e,page:t,pageOrColumnBreak:n};if(o(e))return{type:e.type,fragments:e.fragments.map((e=>g(e,t,!1))),originalFragment:e,page:t,pageOrColumnBreak:n};throw new Error("Unexpected fragment type: "+e.type)}},89210:(e,t,n)=>{function i(e){return!0===e.canvasFullTextMap}function s(e){return"CanvasAdvancedTextMap"===e.subType}n.d(t,{_:()=>s,k:()=>i})},4271:(e,t,n)=>{if(n.d(t,{BL:()=>ue,CG:()=>ne,CI:()=>Y,G5:()=>ee,Ju:()=>ge,Kk:()=>pe,Nk:()=>Q,Us:()=>me,W8:()=>te,Y_:()=>le,a9:()=>se,bm:()=>Z,dM:()=>oe,f5:()=>re,gh:()=>X,gt:()=>de,oY:()=>ce,oz:()=>he,pN:()=>ie,sV:()=>ae,ut:()=>fe}),3075==n.j)var i=n(44071);if(3075==n.j)var s=n(84714);if(3075==n.j)var r=n(84766);if(3075==n.j)var o=n(36344);if(3075==n.j)var a=n(93440);if(3075==n.j)var l=n(26156);if(3075==n.j)var c=n(20161);if(3075==n.j)var u=n(59179);if(3075==n.j)var d=n(90572);if(3075==n.j)var h=n(10883);if(3075==n.j)var g=n(24666);if(3075==n.j)var p=n(84178);if(3075==n.j)var m=n(954);if(3075==n.j)var f=n(44045);if(3075==n.j)var v=n(17610);if(3075==n.j)var _=n(21200);if(3075==n.j)var b=n(3199);if(3075==n.j)var S=n(14969);if(3075==n.j)var y=n(36807);if(3075==n.j)var C=n(33442);if(3075==n.j)var w=n(24435);if(3075==n.j)var x=n(68418);if(3075==n.j)var E=n(25754);if(3075==n.j)var k=n(67434);if(3075==n.j)var T=n(45523);if(3075==n.j)var A=n(5962);if(3075==n.j)var R=n(2799);if(3075==n.j)var I=n(90595);if(3075==n.j)var O=n(47557);if(3075==n.j)var F=n(78767);if(3075==n.j)var D=n(82485);if(3075==n.j)var P=n(20905);if(3075==n.j)var M=n(79707);if(3075==n.j)var N=n(24007);if(3075==n.j)var B=n(1763);if(3075==n.j)var U=n(26155);if(3075==n.j)var L=n(27970);if(3075==n.j)var G=n(95050);if(3075==n.j)var H=n(25009);if(3075==n.j)var j=n(3944);if(3075==n.j)var K=n(7833);var V=n(15885),z=n(91135);if(3075==n.j)var $=n(68667);if(3075==n.j)var W=n(90870);if(3075==n.j)var q=n(89210);function Q(e,t=x.Ir.create({left:0,top:0}),n=!1){const i={clientX:t.left,clientY:t.top,bubbles:!0,shiftKey:n};e.dispatchEvent(new MouseEvent("mousedown",i)),e.dispatchEvent(new MouseEvent("mouseup",i))}function Y(e){var t,n,i;try{return null!==(i=null===(n=null===(t=e.querySelector(z.U.textEventsTargetIframeSelector))||void 0===t?void 0:t.contentDocument)||void 0===n?void 0:n.querySelector(z.U.textEventsTargetElementSelector))&&void 0!==i?i:null}catch(e){return null}}function J(e){return!!e&&Array.from(e.classList).some((e=>0===e.indexOf("scb-private")))}function X(){const e=(0,j.TW)(document);return e?(0,i.R)(e,"click").pipe((0,c.w)((t=>T.x.observeChildList(e).pipe((0,u.U)((e=>Array.from(e).filter(O.Re).filter((e=>e.matches("span.scb-icon")))[0])),(0,d.h)(F.fQ),(0,u.U)(J),(0,h.M)((0,s.of)(J((null==e?void 0:e.querySelector("span.scb-icon"))||void 0))),(0,u.U)((([e,t])=>!e&&t)),(0,g.x)(),(0,c.w)((e=>e?(0,r.F)(1e3).pipe((0,u.U)((e=>Array.from(document.querySelectorAll(".modal-dialog")).every((e=>"true"===e.getAttribute("aria-hidden")||!e.hasAttribute("aria-hidden"))))),(0,d.h)(F.fQ),(0,p.q)(1)):o.E)))))):o.E}function Z(e){return T.x.observeChildList(e).pipe((0,u.U)((()=>{const t=(0,j.Xs)(e);if(t){let e=!1;for(const n of t.querySelectorAll("a[href]")){const t=n.getAttribute("href");if("https://support.google.com/chrome/answer/187443"===t||"https://support.mozilla.org/en-US/kb/disable-or-remove-add-ons"===t){e=!0;break}}return{isBrowserExtFault:e,textContent:t.textContent}}})),(0,d.h)(F.fQ),(0,p.q)(1))}function ee(e){const t=e.querySelector(".onegoogle-material-minibar a[role=button]");if(t){const e=k.l(t.getAttribute("aria-label")||"");return e?(0,s.of)({...e,currentSessionUser:!0}):o.E}return o.E}function te(e){return function(e,t){const{visibility$:n,hidden$:i,isVisible:r}=e;let o=0;return n.pipe((0,m.O)(r()),(0,c.w)((e=>{if(e){const e=Date.now();return(0,a.H)(t-o).pipe((0,f.R)(i),(0,v.l)(0),(0,_.Z)(),(0,u.U)((()=>Date.now()-e)))}return(0,s.of)(0)})),(0,b.R)(((e,t)=>(o=e+t,o)),0))}((0,A.u)(),e).pipe((0,d.h)((t=>t>=e)),(0,p.q)(1))}const ne=6e4;function ie(e,t){return e>3e4&&e<ne&&!t.get()?(0,l.S)((0,a.H)((0,P.m9)(3)),t.pipe((0,d.h)(F.fQ),(0,p.q)(1))):(0,s.of)(!0)}function se(e){return e===V.u.gDocsCanvas}function re(e){return e===V.u.gDocsComments}function oe(e,t){if("WithoutTextV2"===t){const t=(0,M.HD)(e.value)?e.value.replace(/\n/g," "):E.$.renderToPlainText(e.value).replace(/\n/g," ");return{...e,value:t}}return e}function ae(e,t,n){if(void 0===t)return!1;const i=null!=n?n:1/0,s=t>=i;return e({textCoverage:(0,N.OV)(B.kx,t),textCoverageThreshold:i,meetsThreshold:s}),s}function le(e,t){if(!t||!(0,q._)(t))return;const n=function(e){let t=0;for(const n of e)(0,W.LW)(n.pageFragmentSource.pageFragment,{visitText:e=>{e.special?t+=1:t+=e.text.length}});return t}(e);if(0===n)return;const i=t.mappedTextLength;return{coverage:i/n*100,mappedTextLength:i,totalTextLength:n}}function ce(e,t){const n=t.getCurrentTextMap().getPlainText(),i=n.slice(e.pos.start,e.pos.end);if(!(i.trimStart().length!=i.length))return e;const s=n.slice(0,e.pos.start),r=(0,D.Qw)(s),o={start:r.index,end:e.pos.end};return{pos:o,value:(0,M.HD)(e.value)?r.text+e.value:(new y.i).insert(r.text).concat(e.value),oldValue:n.slice(o.start,o.end)}}function ue(e,t){const n=t.getCurrentTextMap().getPlainText(),i=n.slice(e.pos.start,e.pos.end);if(!(i.trimEnd().length!=i.length))return e;const s=n.slice(e.pos.end),r=(0,D.Sf)(s),o={start:e.pos.start,end:e.pos.end+r.index+1};return{pos:o,value:(0,M.HD)(e.value)?e.value+r.text:e.value.insert(r.text),oldValue:n.slice(o.start,o.end)}}function de({mapResult:e,sortedPages:t,experimentClient:n,textCoverageInfo:i,mappingName:s}){if(!e.success)return!1;if("PartialByFragment"===s)return!!i;const r=e.mappedPageCount>=t.length-e.ignoredPageCount&&e.ignoredPageCount<e.mappedPageCount,o=!n.isGateEnabled(I.K.GDocsShouldCheckIfMappedSomething)||!i||i.coverage>0;return r&&o}function he(e,t){const n=(0,R.qx)(e,t);return"deleteKeypress"===n?{name:n,pasteData:{}}:{name:n,pasteData:(0,L._s)(e,t)}}function ge(e,t){return{...t,replacementType:(0,G.H)(e),replacementMethod:void 0}}function pe(e,t){const n=(0,w.kt)(t);return t=>(0,C.Yz)(t)?n(t):e===H.yj.write}function me(e,t,n,i){return s=>{const r=new $.Z(t,i.createGeometryLayout(),(()=>n.getCurrentTextMap()),s,(0,U.WF)(i.textField));return e(r),r}}function fe(e){const t=document.getElementById(K.l$);return t?t.hasChildNodes()?(0,s.of)(t.childNodes):T.x.observeChildList(t).pipe((0,S.P)()):(e(),(0,s.of)(null))}},15885:(e,t,n)=>{var i;n.d(t,{u:()=>i}),function(e){e.iframeHost="iframeHost",e.gmailReply="Gmail reply compose",e.gmailCompose="compose",e.gmailComposeStandalone="compose standalone",e.gmailComposeFullScreen="compose fullscreen",e.slackMessage="Slack Message",e.slackGenericQuill="Slack Generic Quill",e.slackThread="Slack Thread",e.gDocsCanvas="gDocsCanvas",e.gDocsComments="contentEditable.GDocs.comments",e.instagramComments="textarea.Instagram.commentField",e.googleTranslate="textarea.Translate",e.googleSearch="textarea.GoogleSearch",e.googleGroups="textarea.GoogleGroups",e.linkedIn="contentEditable.Linkedin",e.outlook="contentEditable.Outlook",e.youTube="contentEditable.Youtube",e.yahooMail="contentEditable.YMail",e.ckeditor5="contentEditable.ckeditor5",e.quillJS="contentEditable.QuillJS"}(i||(i={}))},67434:(e,t,n)=>{if(n.d(t,{l:()=>r}),5526!=n.j)var i=n(90023);if(5526!=n.j)var s=n(58303);function r(e){const t=e.split("Google");return(0,i.zG)(s.ij(t[1]),s.UI((e=>{const t=e.split(":");return t.length>1?t[1]:t[0]})),s.g_(i.gn,(e=>{const t=/^(.*?)\s*\n\((.+)\).*$/.exec(e);return t?{name:t[1].trim(),email:t[2].trim()}:null})))}},34819:(e,t,n)=>{n.d(t,{v:()=>C});var i=n(8867),s=n(26156),r=n(84714),o=n(84308),a=n(90572),l=n(18827),c=n(24666),u=n(59179),d=n(67880),h=n(87846),g=n(33851),p=n(25693),m=n(15362),f=n(19724),v=n(86130),_=n(20905),b=n(78767),S=n(43795);const y={bgNotConnected:!0,online:!1},C=((0,p.ge)(),m.he.common,v.cS,self.navigator.onLine,f.n.defaultUser,m.uS,m.aT,async(e,t)=>{const n=(0,p.ge)(),[S,C]=await Promise.all([t.api.getPageConfig(n,self.location.href),t.api.getTabId()]),x=(0,s.S)(e.view().pipe((0,a.h)((e=>!(0,d.Qr)(e)))),(0,r.of)({}).pipe((0,l.g)(_.m9(10)))).pipe((0,c.x)(b.fS));return(0,o.a)([x,new i.y((e=>{if("undefined"==typeof chrome||!chrome.storage)return void e.next(!1);chrome.storage.local.get([g.jG],(t=>{e.next(!0===t[g.jG])}));const t=(t,n)=>{"local"===n&&t[g.jG]&&e.next(!0===t[g.jG].newValue)};return chrome.storage.onChanged.addListener(t),()=>{chrome.storage.onChanged.removeListener(t)}}))]).pipe((0,u.U)((([e,t])=>{var i,s,r,o,a,l,c,u,d,g,p;return{user:null!==(i=e.user)&&void 0!==i?i:f.n.defaultUser,page:w(S,n,C,e.extensionSettings,(null===(r=null===(s=e.activeTab)||void 0===s?void 0:s.id)||void 0===r?void 0:r.toString())===C,e[h.N],t),dapi:null!==(o=e.dapi)&&void 0!==o?o:{},dynamicConfig:null!==(a=e.dynamicConfig)&&void 0!==a?a:v.cS,environment:e.environmentState,connection:null!==(l=e.connection)&&void 0!==l?l:y,extensionFSM:null!==(c=e.extensionFSM)&&void 0!==c?c:m.uS,copiedTextMessage:null!==(u=e.copiedTextMessage)&&void 0!==u?u:m.aT,connectorSettings:null!==(d=e.connectorSettings)&&void 0!==d?d:{},iterable:null!==(g=e.iterable)&&void 0!==g?g:{},growth:null!==(p=e.growthSettings)&&void 0!==p?p:{}}})))}),w=(e,t,n,i,s,r,o)=>{var a,l,c,u;const d=null!=i?i:m.he,h=d[t],g=(null===(a=null==h?void 0:h.enabled)||void 0===a||a)&&(null===(l=e.enabled)||void 0===l||l)&&!o,p=null===(c=d.common.cheetah)||void 0===c?void 0:c.initialOnboardingShownTabId,f=null===(u=d.common.cheetah)||void 0===u?void 0:u.initialBTSOnboardingShownTabId;return{...d.common,...h,...e,isActiveTab:s,tabId:String(n),cheetah:{...d.common.cheetah,canShowInitialBTSOnboarding:void 0!==f&&f===n||void 0===f&&s,canShowInitialOnboarding:void 0!==p&&p===n||void 0===p&&s},sessionTimeoutValue:(0,S.GH)(r),domain:t,enabled:g}}},82914:(e,t,n)=>{n.d(t,{J:()=>s});var i=n(29483);const s=new Proxy({},{get:(e,t)=>(...e)=>(0,i.OB)().bgRpc.api.trackGnar(t,e)})},56052:(e,t,n)=>{n.d(t,{U:()=>o});var i=n(82914),s=n(13118),r=n(13162);class o{constructor(e,t,n){this._subs=[],this._kind=e,this._handler=n,this._initSettingSubscription(t)}_initSettingSubscription(e){this._subs.push(e.subscribe((e=>{this._shortcut=(null==e?void 0:e[this._kind])||(0,r.e)(this._kind)})))}_isShortcutMatch(e){const t=this._shortcut;return e.code===t.key&&s.uU.every((n=>t.modifiers.includes(n)===e.getModifierState(n)))&&s.QO.every((t=>!e.getModifierState(t)))}_handleShortcut(e){e.preventDefault(),this._handler(),i.J.keyboardShortcutShortcutTriggered(this._kind)}}},13118:(e,t,n)=>{n.d(t,{Hz:()=>r,O0:()=>o,OR:()=>a,QO:()=>s,qR:()=>c,uU:()=>i,wl:()=>l});const i=["Alt","AltGraph","CapsLock","Control","Meta","NumLock","ScrollLock","Shift"],s=["Fn","FnLock","Hyper","Super","Symbol","SymbolLock"],r={openAssistant:{mac:{key:"KeyG",modifiers:["Shift","Control","Meta"]},other:{key:"KeyG",modifiers:["Shift","Control","Alt"]}},closeAssistant:{mac:{key:"Escape",modifiers:[]},other:{key:"Escape",modifiers:[]}},openVBar:{mac:{key:"BracketRight",modifiers:["Shift","Meta","Control"]},other:{key:"BracketRight",modifiers:["Shift","Alt","Control"]}}},o='[data-grammarly-part="assistant-draggable-wrapper"],[data-grammarly-part="assistant-static-wrapper"]',a='[data-focus-id="empty-state"], button[data-name^="button:"]',l="button, [href], input, select, textarea",c=`${l}, [tabindex]:not([tabindex^="-"])`},13162:(e,t,n)=>{n.d(t,{e:()=>r});var i=n(29483),s=n(13118);function r(e){return s.Hz[e][(0,i.nD)()?"mac":"other"]}},28510:(e,t,n)=>{n.d(t,{b:()=>s});var i=n(92379);const s=({children:e})=>{const t="string"==typeof e?e:"";return t?i.createElement("style",{dangerouslySetInnerHTML:{__html:t}}):null}},88778:(e,t,n)=>{function i(e){return function(e){return e&&"wrappedJSObject"in e}(e)?e.wrappedJSObject:e}n.d(t,{N:()=>i})},5962:(e,t,n)=>{if(n.d(t,{u:()=>a}),5526!=n.j)var i=n(44071);if(5526!=n.j)var s=n(90572);if(5526!=n.j)var r=n(29479);if(5526!=n.j)var o=n(59179);function a(){const e=(0,i.R)(document,"visibilitychange"),t=()=>"visible"===document.visibilityState,n=e.pipe((0,s.h)((()=>!t())),(0,r.h)(!1));return{visibility$:e.pipe((0,o.U)(t)),hidden$:n,isVisible:t}}},38709:(e,t,n)=>{n.d(t,{F4:()=>f,IM:()=>_,_P:()=>m,hK:()=>b});var i=n(39953),s=n(58303),r=n(53186);if(5526!=n.j)var o=n(12518);var a=n(8907),l=n(24063),c=n(33442),u=n(48758),d=n(43389),h=n(67385),g=n(99562),p=n(40866);const m=e=>a.lB.create({...e,alternatives:(0,i.zG)(e.alternatives,s.UI((e=>({context:e.context,alternatives:(0,i.zG)(e.alternatives,r.UI((e=>e.ops)),r.UI(l.r3.create))}))))}),f=e=>{const t={id:a.wQ.Id.create(e.id),rev:e.originalRevision,highlightBegin:e.highlightRanges[0].start,highlightEnd:e.highlightRanges[0].end,pname:e.patternName,point:e.point,text:e.text,group:e.group,category:e.category,categoryHuman:e.categoryHuman,replacements:e.replacements,extra_properties:e.extraProperties,todo:e.todo,minicardTitle:e.minicardTitle,impact:e.impact,title:e.title,details:e.details,examples:e.examples,explanation:e.explanation,cardLayout:e.originalCardLayout,hidden:e.isHidden,free:e.isFree,cost:e.cost||1,transforms:h.DD.isRegular(e)?e.transforms:void 0,isRead:void 0,updatable:e.updatable,inline:e.inline,muted:e.muted,highlightText:e.highlightTexts,view:e.assistantView,userReasons:e.userReasons,userReasonSurveys:e.userReasonSurveys,gbPrompt:e.gbPrompt};let n;return n=h.DD.isWithSubAlerts(e)?{...t,subalerts:e.subalerts,labels:e.labels}:{...t,begin:e.transformRange.start,end:e.transformRange.end,transformJson:h.DD.isWithTransformJson(e)?e.transformJSON:void 0},a.wQ.withSubalerts(n)||a.wQ.withTransformJson(n)||a.wQ.hasPosition(n)?o.F2(n):o.t$(new Error("Unexpected alert structure"))},v=e=>void 0!==e.extra_properties.suggested_snippet_text,_=(e,t)=>{const n=h.DD.createOutcomeType(e.cardLayout.outcome),i={...e.cardLayout,outcome:n,group:e.cardLayout.group},s=a.wQ.match(e,(e=>[{start:e.highlightBegin,end:e.highlightEnd}]),(e=>e.transformJson.highlights.map(d.$.convertHighlightRangeFromRawTransform)),(e=>e.subalerts.highlights.map(d.$.convertHighlightRangeFromRawTransform))),r={title:e.title,category:e.category,categoryHuman:e.categoryHuman,patternName:e.pname,patternNameQualifier:e.pnameQualifier,point:e.point,isFree:e.free,isHidden:e.hidden,inline:e.inline,muted:e.muted,freePremium:e.extra_properties.free_premium,isVox:n===h.TC.vox&&!v(e),group:e.group,outcome:n,cardLayout:i,originalCardLayout:e.cardLayout,impact:e.impact,priority:parseInt(e.extra_properties&&e.extra_properties.priority||"0",10)||0,id:e.id,highlightRanges:s,highlightTexts:e.highlightText,_tag:u.b.capi,transformText:e.text,transforms:e.transforms,revision:t,originalRevision:e.rev,isToneAI:void 0!==e.extra_properties.tone_slider,isEthicalAI:void 0!==e.extra_properties.ethical_ai_external_link,isEthicalAIStandWithUkraine:void 0!==e.extra_properties.ethical_ai_external_link&&e.pname===g.w.STAND_WITH_UKRAINE_ALERT_PNAME,isSuggestedSnippet:v(e),isSnippetsTemplate:!1,knowledgeHubCardType:(0,c.ux)(e),updatable:e.updatable,assistantView:e.view,userReasons:e.userReasons,userReasonSurveys:e.userReasonSurveys,replacements:e.replacements,extraProperties:e.extra_properties,explanation:e.explanation,details:e.details,todo:e.todo,examples:e.examples,minicardTitle:e.minicardTitle,text:e.text,cost:e.cost,gbPrompt:e.gbPrompt,autoapply:"true"===e.extra_properties.autoapply};return a.wQ.match(e,(e=>{const t={start:e.begin,end:e.end};return{...r,transformRange:t}}),(t=>{const n=a.wQ.unsafeGetPosition(e),i={start:n.begin,end:n.end};return{...r,transformJSON:m(t.transformJson),transformRange:i}}),(e=>({...r,subalerts:m(e.subalerts),labels:e.labels})))},b=(e,t)=>({...e,id:e.alertId,revision:p.Q.create(t,e.rev)})},65554:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(58303),s=n(40866);const r=(e,t)=>{var n,r;return{...e,outcomeScores:{...e.outcomeScores,Originality:e.outcomeScores.Originality||0},generalScore:null===(n=i.FS(e.score))||void 0===n?void 0:n.rank,lowestGeneralScore:null===(r=i.FS(e.lowestScore))||void 0===r?void 0:r.rank,scoreStatus:i.FS(e.scoreStatus),revision:s.Q.create(t,e.revision),nonEnglishText:e.foreign}}},67800:(e,t,n)=>{if(n.d(t,{AQ:()=>h,SO:()=>u,l:()=>g,n:()=>d}),5526!=n.j)var i=n(90023);var s=n(36807),r=n(71576);if(5526!=n.j)var o=n(58303);if(5526!=n.j)var a=n(43789);if(5526!=n.j)var l=n(948);if(5526!=n.j)var c=n(78767);function u(e){return(0,i.zG)(function(e){return 2===e.length&&e[0].pos===e[1].pos?e[0]._tag===l.q.Type.del&&e[1]._tag===l.q.Type.ins?o.G([e[0],e[1]]):e[0]._tag===l.q.Type.ins&&e[1]._tag===l.q.Type.del?o.G([e[1],e[0]]):o.YP:o.YP}(e),o.g_((()=>e),(([e,t])=>{const n=e.text;return t.text===n?[]:t.text.startsWith(n)?[l.q.ins(e.pos+n.length,t.text.slice(n.length))]:n.startsWith(t.text)?[l.q.del(t.pos+t.text.length,n.slice(t.text.length))]:[e,t]})))}function d(e){return e.reduce(((e,t)=>{switch(t._tag){case l.q.Type.ins:return e.compose(a.RI.ins(t.pos,t.text));case l.q.Type.del:return e.compose(a.RI.del(t.pos,t.text.length));default:return(0,c.vE)(t)}}),a.RI.delta(new s.i)).delta}function h(e){return e.reduce(((e,t)=>{if(r.s.isInsert(t)&&"string"==typeof t.insert){const n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new s.i)}function g(e,t){return e.reduce(((e,t)=>(r.s.isInsertString(t)?(e.text=`${e.text.substring(0,e.index)}${t.insert}${e.text.substring(e.index)}`,e.index+=t.insert.length):r.s.isDelete(t)?e.text=`${e.text.substring(0,e.index)}${e.text.substring(e.index+t.delete)}`:r.s.isRetain(t)?e.index+=t.retain:function(e){var t;return r.s.isInsertEmbed(e)&&!0===(null===(t=e.insert)||void 0===t?void 0:t.linebreak)}(t)&&(e.text=`${e.text.substring(0,e.index)}\n${e.text.substring(e.index)}`,e.index+=1),e)),{text:t,index:0}).text}},2799:(e,t,n)=>{if(n.d(t,{Jj:()=>c,UL:()=>d,qx:()=>u}),3075==n.j)var i=n(808);if(3075==n.j)var s=n(27970);if(3075==n.j)var r=n(17440);if(3075==n.j)var o=n(78767);if(3075==n.j)var a=n(79707);function l(e){const t=function(){if(!self.trustedTypes)return null;for(const e of Object.values(self))if(e instanceof self.TrustedTypePolicy&&"pastehandler"===e.name)return e;return null}();return t?t.createHTML(e):e}function c(e,t){switch(t.name){case"pasteEvent":(0,s.Eb)(e,t.pasteData),void 0!==t.pasteData.html&&(e.innerHTML=l(t.pasteData.html));break;case"typeText":void 0!==t.pasteData.plain&&(0,r.t7)(e.ownerDocument,t.pasteData.plain);break;case"insertReplacementTextBeforeInputEvent":(0,s.xF)(e,t.pasteData);break;case"deleteKeypress":(0,s.m3)(e);break;default:(0,o.vE)(t.name)}}function u(e,t){const n=(0,a.HD)(e)&&!(null==t?void 0:t.html);return n&&0===e.length?"deleteKeypress":!n&&i.T.isSupported()?"pasteEvent":"insertReplacementTextBeforeInputEvent"}function d(e,t,n){return!((null==n?void 0:n.html)||!(0,a.HD)(t))&&(e.start!==e.end&&0!==t.length)}},78021:(e,t,n)=>{n.d(t,{Z:()=>y});var i=n(92379),s=n(61189),r=n(83542),o=n(50635),a=n(31702),l=n(52348),c=n(11163),u=n(4765),d=n(12712),h=n(1087),g=n(64803),p=n(13118);const m=["Control","Alt","Shift","Meta","CapsLock","NumLock","ScrollLock","AltGraph"],f=/^Digit\d$/,v=/^Key[A-Z]$/;function _(e,t,n=" "){const i=m.filter((t=>e.modifiers.includes(t))).map((e=>function(e,t){if(t){if("Meta"===e)return"Command";if("Alt"===e)return"Option"}return e}(e,t)));return e.key&&i.push(function(e){if(f.test(e)||v.test(e))return e.slice(-1);return e}(e.key)),i.join(n)}const b=({label:e,isMac:t,currentShortcut:n,onEdit:s,shouldAutofocusEditButton:r,shortcutSeparator:c=" ",editButton:u})=>{const d={onClick:s,autoFocus:r,"aria-label":`Edit ${e} shortcut`};return i.createElement(o.k,{justify:"space-between",align:"center",flex:"2",height:32,gap:1},i.createElement(a.x,{as:"p",variant:"text-small"},_(n,t,c)),i.createElement(o.k,null,u?i.cloneElement(u,d):i.createElement(l.z,{text:"Edit",variant:"ghost",...d})))},S=({label:e,isMac:t,currentShortcut:n,onSetShortcut:s,ariaDescribedBy:r,onExit:a,shortcutSeparator:l=" "})=>{const[m,f]=i.useState(n),[v,b]=i.useState(!0),[S,y]=i.useState(void 0),C=`${e.replace(/ /g,"-").toLowerCase()}-shortcut-description-id`;return i.createElement(i.Fragment,null,i.createElement(c.u,{id:C},"Type a shortcut to configure the ",e," shortcut. Press tab for actions."),i.createElement(u.n,{label:`${e} shortcut`,value:_(m,t,l),labelDisplay:"hidden",errorMessage:S,onKeyDown:e=>{if(["Tab","Enter","CapsLock","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End","Insert","Delete","Backspace"].includes(e.code))b(!0);else{if(e.preventDefault(),p.uU.includes(e.key))if(v)f({key:void 0,modifiers:[e.key]});else{const t=m.modifiers;t.includes(e.key)||f({key:m.key,modifiers:[...t,e.key]})}else f(v?{key:e.code,modifiers:[]}:{key:e.code,modifiers:m.modifiers});b(!1)}},onKeyUp:()=>{b(!0)},autoFocus:!0,"aria-describedby":r?`${C} ${r}`:C}),i.createElement(o.k,{gap:1},i.createElement(d.h,{icon:h.L,accessibilityLabel:`Save ${_(m,t)} as ${e} shortcut`,tooltipContentProps:{children:"Save shortcut"},onClick:()=>{!function(e){return void 0!==e.key}(m)?y("Invalid shortcut. Must use at least one non-modifier key."):(s(m),a())}}),i.createElement(d.h,{icon:g.V,accessibilityLabel:"Cancel edits",onClick:a,variant:"tertiary"})))};const y=({label:e,isMac:t,currentShortcut:n,onSetShortcut:l,ariaDescribedBy:c,disableLegacyLayout:u=!1,shortcutSeparator:d=" ",showLabel:h=!0,editButton:g,condensed:p=!1})=>{const[m,f]=i.useState(!1),[v,y]=i.useState(!1);i.useEffect((()=>{m&&y(!0)}),[m]);const C=m?i.createElement(S,{label:e,isMac:t,currentShortcut:n,onSetShortcut:n=>{l(n),s.E.announce(`Shortcut to ${e} is ${_(n,t)}`)},onExit:()=>f(!1),ariaDescribedBy:c,shortcutSeparator:d}):i.createElement(b,{label:e,isMac:t,currentShortcut:n,onEdit:()=>f(!0),shouldAutofocusEditButton:v,shortcutSeparator:d,editButton:g}),w=u?{}:{marginLeft:-2,marginRight:-2,borderRadius:3};return i.createElement(r.x,{bgColor:m&&!u?"background-base-subdued":"background-base-default",padding:p?0:2,...w},i.createElement(o.k,{gap:1,direction:"column"},h&&i.createElement(a.x,{as:"p",weight:"semibold",variant:"text-small"},e),i.createElement(o.k,{gap:3,flex:"2"},C)))}},5898:(e,t,n)=>{n.d(t,{J:()=>c});var i=n(36807),s=n(55709),r=n(58303),o=n(43789),a=n(8907),l=n(74017);var c,u,d;!function(e){let t,n,i,o,c,h,g,p,m,f;!function(e){e.parseOrEmpty=function(e){return r.fS((()=>s.R$.unset))(s.R$.parse(e))}}(t=e.DocumentContextExt||(e.DocumentContextExt={})),function(e){e.serialize=function(e){const{integrationResultTracker:t,...n}=e;return{...n,context:s.R$.serialize(e.context),clientConfigs:i.serialize(e.clientConfigs)}},e.parse=function(e){return{...e,context:t.parseOrEmpty(e.context),clientConfigs:i.parseOrEmpty(e.clientConfigs),integrationResultTracker:void 0}}}(n=e.DenaliCAPISettings||(e.DenaliCAPISettings={})),function(e){e.serialize=function(e){return e?{...e,sdui:e.sdui?{...e.sdui,config:Object.keys(e.sdui.config).reduce(((t,n)=>{var i;const s=null===(i=null==e?void 0:e.sdui)||void 0===i?void 0:i.config[n];return s&&(t[n]={...s,dslParser:void 0}),t}),{})}:void 0}:void 0},e.parseOrEmpty=function(e){return{...e,sdui:(null==e?void 0:e.sdui)?{...e.sdui,config:Object.keys(e.sdui.config).reduce(((t,n)=>{var i;const s=null===(i=null==e?void 0:e.sdui)||void 0===i?void 0:i.config[n];return s&&(t[n]={...s,dslParser:l.Fw[""].dslParser}),t}),{})}:void 0}}}(i=e.ClientConfigs||(e.ClientConfigs={})),function(e){let t;!function(e){let t;!function(e){e.Value="context_serialized"}(t=e.Kind||(e.Kind={}))}(t=e.Serialized||(e.Serialized={}))}(o=e.ContextOption||(e.ContextOption={})),function(e){e.serialize=function(e){return e.kind===a.rP.Context?{kind:o.Serialized.Kind.Value,context:s.R$.serialize(e.context)}:e},e.parse=function(e){return e.kind===o.Serialized.Kind.Value?{kind:a.rP.Context,context:t.parseOrEmpty(e.context)}:e}}(c=e.SessionOption||(e.SessionOption={})),function(e){e.serialize=e=>{switch(e.kind){case"delta":case"reset":return{...e};default:return e}},e.parse=e=>{switch(e.kind){case"delta":return u.createDeltaChange(e.delta,e.prevLen);case"reset":return u.createResetChange(e.delta);default:return e}}}(h=e.Change||(e.Change={})),function(e){e.serialize=e=>{const{snippets:t,...n}=e;return{...n,snippets:null==t?void 0:t.map(p.serialize)}},e.parse=e=>{const{snippets:t,...n}=e;return{...n,snippets:null==t?void 0:t.map(p.parse)}}}(g=e.SnippetsResult||(e.SnippetsResult={})),function(e){e.serialize=e=>{const{contentDelta:t,...n}=e;return{...n,contentDelta:m.serialize(t)}},e.parse=e=>{const{contentDelta:t,...n}=e;return{...n,contentDelta:m.parse(t)}}}(p=e.SnippetRule||(e.SnippetRule={})),function(e){e.serialize=e=>({...e}),e.parse=e=>d.createDelta(e.ops)}(m=e.Delta||(e.Delta={})),function(e){e.serialize=e=>({...e}),e.parse=e=>u.createResetChange(e.delta)}(f=e.Reset||(e.Reset={}))}(c||(c={})),function(e){e.createDeltaChange=o.RI.delta,e.createResetChange=o.RI.unsafeRes}(u||(u={})),function(e){e.createDelta=e=>new i.i(e)}(d||(d={}))},70843:(e,t,n)=>{n.d(t,{p:()=>c});var i=n(12663),s=n(23162),r=n(60026),o=n(56567),a=n(45126),l=n(23474);const c={...i.V,...l.j,...a.p,...r.p,...o.p,ClientControlsDlp:new s.KS("client_controls_dlp_manakin",["enabled"]),ClientControlsDlpBuffering:new s.KS("client_controls_dlp_buffering_manakin",["enabled"]),KnowledgeHubAtlassian:new s.KS("extension_knowledge_hub_atlassian",["control","test"]),BusinessUphookQtLogic:new s.KS("ext_business_uphook_qt_logic",["control","test"]),GetStartedChecklist:new s.KS("in_product_checklist",["control","auto_open","existing_tour"]),ChecklistUX:new s.KS("checklist_ux",["control","test"]),GbUpgradeHookSharedDocumentFreeV2:new s.KS("gb_upgrade_hook_shared_document_free_v2",["control","test"]),GbUpgradeHookSharedDocumentPremiumV2:new s.KS("gb_upgrade_hook_shared_document_premium_v2",["control","test"]),GbUpgradeHookWorkplaceAppsFreeV2:new s.KS("gb_upgrade_hook_workplace_apps_free_v2",["control","test"]),GbUpgradeHookWorkplaceAppsPremiumV2:new s.KS("gb_upgrade_hook_workplace_apps_premium_v2",["control","test"]),SingleCardAssistantNextToTextField:new s.KS("sca_positioned_next_to_text_field",["control","test"]),LockedUIChrome:new s.KS("locked_ui_chrome_ext_2",["control","unlimited_pool"]),LockedUIGDoc:new s.KS("locked_ui_ext_gdoc_2",["control","unlimited_pool"]),LockedUIWithNewUx:new s.KS("locked_ui_iteration_1",["control","published_limit","non_published_limit"]),ProgressiveExposure:new s.KS("progressive_exposure",["control","test"]),Iterable:new s.KS("iterable_experiment_ext",["enabled"]),InkwellBundle:new s.KS("extension_inkwell_hidden_v2",["control","test"]),GDocsInternalsForReplacementExperiment:new s.KS("gdocs_internals_replacement",["disabled"]),GDocsForceFullRenderExperiment:new s.KS("gdocs_force_full_render",["control","test"]),CheetahSelectionContextUpdates:new s.KS("ggo_context_management_selection_changes",["control","test"]),PerformanceScoreSuccessState:new s.KS("performance_score_success_state",["control","test"]),CAPICheckingInProgressTimeout:new s.KS("extension_gbutton_spinner_timeout",["control","test"]),QualityScore:new s.KS("quality_score",["control","progress_bar","text"]),RemoveSetGoalsGDocs:new s.KS("remove_set_goals_gdocs",["control","test"]),GOSRollout:new s.KS("extension_gos_rollout_exp",["control","test"]),OggyOnGOS:new s.KS("extension_oggy_on_gos_exp",["control","test"]),PreserveFormatting:new s.KS("extension_preserve_formatting",["control","test"]),GhostProtocol:new s.KS("ghost_protocol",["control","test"]),TranslationDiscoverability:new s.KS("ext_translation_discoverability",["control","test"]),RecentAppActions:new s.KS("recent_app_actions",["control","test"]),LockedUiDebouncedHoverUnlock:new s.KS("locked_ui_debounced_hover_unlock",["control","test1","test2","test3","test4","test5"]),ChromeStoreSignupV2:new s.KS("chrome_store_signup_v2",["control","popup_once","popup_persistent"]),TouchTypistExternalFree:new s.KS("extension_touchtypist_external_v5_free",["control","test"]),TouchTypistProminentTooltip:new s.KS("extension_touchtypist_web_prominent_tooltip",["control","snooze","red"]),TouchTypistAutoOptOut:new s.KS("extension_touchtypist_default_disable",["control","disable","dynamic"]),OAuthSDKV2:new s.KS("extensions_oauth2_sdk_v2",["control","test"]),GDocsInviteNudgeExp:new s.KS("invite_nudge_gdoc_v1",["control","test"]),FullySignedInAccountChooser:new s.KS("fully_signedin_account_chooser",["control","test"]),FullySignedInOptimizedCard:new s.KS("fully_signedin_optimized_card",["control","signin-everywhere","signin-everywhere-google","value-first-google-signin"]),FSISafari:new s.KS("fsi_safari_extension",["control","test"]),ExtensionSettingsUphookHub:new s.KS("extension_settings_uphookhub_v1",["control","test"]),InProductDiscount:new s.KS("in_product_discount",["control","enabled"]),ExtensionIframeEnabled:new s.KS("extension_iframe_enabled",["control","test"]),OAuth2Phase2Interactive:new s.KS("extensions_oauth2_phase2_interactive",["control","test"]),V5UserInfo:new s.KS("extension_oauth2_v5_userinfo",["control","test"]),FsrIndividualUndoRedoV1:new s.KS("extension_fsr_individual_undos_v1",["control","state_preservation","undo_redo","undo_redo_no_state_preservation"]),FSIAccountChooserV2:new s.KS("fsi_account_chooser_v2",["control","test"]),CleanUxUiFree:new s.KS("clean_ux_ui_colors_free",["control","test"]),CleanUxUiPro:new s.KS("clean_ux_ui_colors_pro",["control","test"]),SafariWebCompanionAppProtocol:new s.KS("extensions_safari_web_companion_app_protocol",["control","test"]),LockedUIAnonymous:new s.KS("locked_ui_for_anonymous_users",["control","test_advanced_uphook","test_advanced_fsi"]),AiChatInterceptChatGptAiEditor:new s.KS("extension_ai_chat_intercept_chatgpt_ai_editor",["control","test"])}},84195:(e,t,n)=>{n.d(t,{n:()=>i});class i{constructor(e){this._messageApi=e}on(e){this._messageApi.onRuntimeMessage.addListener(e)}off(e){this._messageApi.onRuntimeMessage.removeListener(e)}sendMessage(e){return this._messageApi.sendRuntimeMessage(e)}}},43912:(e,t,n)=>{n.d(t,{h:()=>p});var i=n(74822),s=n(59179),r=n(90572),o=n(32734),a=n(29416),l=n(13391),c=n(39963),u=n(40594),d=n(31272),h=n(13848),g=n(3774);class p{constructor(e,t=Promise.resolve(),n=u.Y.create("PersistentStore"),p=(0,c.Tb)()){this._api=e,this._current=l.h.create({}),this._mismatchedChanges=new i.x,this.get=async e=>g.s.parse(await this._api.get(e),e),this.getAll=async()=>g.s.parse(await this._api.getAll()),this.patch=async(e,t=!1)=>{if(t||!g.s.hasProtectedKeys(e))return await this._api.set(e);throw new Error("Attempting to directly patch protected keys of the store. Consider using actions for this operation.")},this.view=this._current.view.bind(this._current),this.dispose=()=>{this._subs.forEach((e=>e.unsubscribe())),this._subs=[]},this.changes=(0,h.D)(this._api.changes).pipe((0,s.U)(g.s.parseChange),(0,r.h)((e=>0!==Object.keys(e).length)),(0,o.B)()),this._subs=[],this._applyChanges=(e,t)=>{Object.keys(t).forEach((n=>{var i;if(!d.vZ(null===(i=t[n])||void 0===i?void 0:i.oldValue,e[n]))throw new Error("mismatched_changes")}));const n=d.UI(((e,t)=>null==t?void 0:t.newValue),t);return Object.assign({},e,n)},t.then((()=>this._api.getAll())).then((e=>this._current.set(g.s.parse(e)))).then((()=>{this._subs.push(this.changes.subscribe((e=>{try{this._current.modify((t=>this._applyChanges(t,e)))}catch(e){"mismatched_changes"===e.message?(n.warn("Mismatched changes to Persistent Store",e),this._mismatchedChanges.next(void 0)):(n.error("Unexpected error while applying changes to Persistent Store",e),p.storageApplyChangesFailed(e))}})))})),this._subs.push(this._mismatchedChanges.pipe((0,a.b)(200)).subscribe((()=>{this._api.getAll().then((e=>this._current.set(g.s.parse(e))))})))}}},3774:(e,t,n)=>{n.d(t,{s:()=>i});var i,s=n(87846),r=n(31272);!function(e){e.allPersistentKeys=["user","version","dynamicConfig","extensionSettings","dynamicConfigOverrideKey","environmentState","connection","activeTab","extensionFSM","fieldsSettings","alarms","clickToRunEnabledOnce","dapi","growthSettings","extensionMeta","gnarInternalStorage","extensionInstallDate","extensionInstallSource","lastAuthnEvent","copiedTextMessage","passport","mise","iterable","connectorSettings",s.N,"authenticationOptions","authTokenInitialRefreshDone","authenticationStarted","claimedUserSettings","inviteNudgeFirstTimestamp"];const t=["user","dapi","dynamicConfig","alarms","lastAuthnEvent","mise",s.N];e.parse=(t,n=e.allPersistentKeys)=>r.Ue(n.map((e=>[e,t[e]]))),e.parseChange=t=>r.hX(((e,t)=>void 0!==t),r.Ue(e.allPersistentKeys.map((e=>[e,t[e]])))),e.hasProtectedKeys=e=>t.some((t=>t in e))}(i||(i={}))},58777:(e,t,n)=>{n.d(t,{d:()=>i});class i{constructor(e,t,n){this._messageService=e,this._customInboundEventName=t,this._customOutboundEventName=n,this.inbound={subscribe:e=>{const t=t=>{if(!function(e,t){if(!e||"object"!=typeof e)return!1;const n="type"in e&&e.type===t,i="message"in e;return n&&i}(t,this._customInboundEventName))return;const n=t.message;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._messageService.on(t),{unsubscribe:()=>this._messageService.off(t)}}},this.outbound=e=>{const t={type:this._customOutboundEventName,message:e};this._messageService.sendMessage(t)}}}},40866:(e,t,n)=>{n.d(t,{Q:()=>s,_:()=>i});var i,s,r=n(78767),o=n(40594);!function(e){e.createWithRandomId=function(e){const t=r.iy.create().slice(0,6);return e&&o.Y.create("ConnectionId").debug(`Created connectionId "${t}" for "${e}"`),`${e}-${t}`},e.createStatic=function(e){return`${e}`}}(i||(i={})),function(e){e.create=function(e,t){return`${e}-${t}`},e.getRevisionNumber=function(e){if(!e)return-1;const t=e.split("-");return t.length>0?Number(t[t.length-1]):-1},e.fromString=function(e){return e},e.unregistered="unreg"}(s||(s={}))},30498:(e,t,n)=>{n.d(t,{S:()=>i});class i{constructor(e,t){this._transport=e,this._api=t,this._disposed=!1,this._sub=this._transport.inbound.subscribe({next:async e=>{try{const t=this._api[e.data.method];if("function"!=typeof t)throw{message:`invalid method name ${String(e.data.method)}`};{const n={clientId:e.clientId},i=await t.call(this._api,n,...e.data.args);this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,res:i}})}}catch(t){this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,err:t}})}}})}dispose(){this._disposed||(this._disposed=!0,this._sub.unsubscribe())}}},11818:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(31272);function s(e){return i.Ue(Object.entries(e).map((([t,n])=>[t,(t,...i)=>n.apply(e,i)])))}},86837:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(40594);const s=e=>{const t=i.Y.create("AuthActions");return{beginAuth:()=>{t.debug("beginAuth"),e.patch({authenticationStarted:(new Date).toISOString()})}}}},89512:(e,t,n)=>{n.d(t,{j:()=>i});const i=e=>{let t;const n=()=>(t||(t={networkOffline:!self.navigator.onLine,online:!0}),t),i=async()=>{const{connection:t}=await e.get(["connection"]);return null!=t?t:n()};return{initConnection:async()=>{const{connection:t}=await e.get(["connection"]);t||await e.patch({connection:n()})},modifyConnection:async t=>{const n=await i();return e.patch({connection:{...n,...t}})},setOffline:async t=>{const n=await i();if(n.networkOffline!==t)return e.patch({connection:{...n,networkOffline:t}})}}}},24534:(e,t,n)=>{n.d(t,{k:()=>i});const i=e=>({modifyEnvironment:async t=>{const{environmentState:n}=await e.get(["environmentState"]);return e.patch({environmentState:{...n,...t}})}})},15933:(e,t,n)=>{n.d(t,{q:()=>r});var i=n(84674),s=n(15362);const r=e=>({gdocsOptedIn:()=>{return e.patch({extensionSettings:(0,i.J_)(null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:s.he,"docs.google.com",{enabled:!0,disabledDate:void 0})});var t}})},31715:(e,t,n)=>{n.d(t,{R:()=>r});var i=n(13162),s=n(84674);function r(e){const t=()=>e.view("extensionSettings").view((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.keyboardShortcuts)&&void 0!==n?n:{openAssistant:(0,i.e)("openAssistant"),closeAssistant:(0,i.e)("closeAssistant"),openVBar:(0,i.e)("openVBar")}}));return{getKeyboardShortcuts:t,setKeyboardShortcut:n=>{const i=(0,s.gC)(e),r=t().get();return e.patch({extensionSettings:(0,s.k1)(i(),{keyboardShortcuts:{...r,...n}})})}}}},42900:(e,t,n)=>{n.d(t,{QP:()=>d});var i=n(27982),s=n(11816),r=n(28898),o=n(84674),a=n(33976),l=n(20905),c=n(31715);function u(e){var t;return null!==(t=e.common.alwaysAvailableAssistantSettings)&&void 0!==t?t:a.Nr}const d=e=>{const t=(0,o.gC)(e);return{toggleDefs:n=>e.patch({extensionSettings:(0,o.k1)(t(),{enabledDefs:n})}),toggleAutocorrect:n=>e.patch({extensionSettings:(0,o.k1)(t(),{autocorrectEnabled:n})}),toggleAlwaysAvailableAssistant:n=>function(e,t,n,s){var a;void 0===n&&(n=(0,o.gC)(e)),void 0===s&&(s=null===(a=(0,r.O)().experimentClient)||void 0===a?void 0:a.isGateEnabled(i.K.CheckTextWhenTurnOnAAA));const l=n(),c=u(l);return e.patch({extensionSettings:(0,o.k1)(l,{alwaysAvailableAssistantSettings:{...c,enabled:t},...s&&{isDesktopIntegrationEnabled:!t&&l.common.isDesktopIntegrationEnabled}})})}(e,n,t),toggleShowNotch:n=>{const i=t(),s=u(i);return e.patch({extensionSettings:(0,o.k1)(i,{alwaysAvailableAssistantSettings:{...s,showNotch:n}})})},toggleTouchTypist:n=>{var i;const r=null!==(i=t().common.touchTypistSettings)&&void 0!==i?i:s.Y;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistSettings:{...r,enabled:n,snoozedUntil:null}})})},setTouchTypistToggledByUser:({userId:n,value:i})=>{var r,a,l;const c=null!==(r=t().common.touchTypistState)&&void 0!==r?r:s.c,u=null!==(a=c.autoOptOutExperiment)&&void 0!==a?a:{},d={...null!==(l=u[n])&&void 0!==l?l:{},enabledToggledByUser:i};return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...c,autoOptOutExperiment:{...u,[n]:d}}})})},toggleTouchTypistByUser:({enabled:n,userId:i})=>{var r,a,l,c;const u=t(),d=null!==(r=u.common.touchTypistSettings)&&void 0!==r?r:s.Y,h=null!==(a=u.common.touchTypistState)&&void 0!==a?a:s.c,g=null!==(l=h.autoOptOutExperiment)&&void 0!==l?l:{},p={...null!==(c=g[i])&&void 0!==c?c:{},enabledToggledByUser:!0};return e.patch({extensionSettings:(0,o.k1)(u,{touchTypistSettings:{...d,enabled:n,snoozedUntil:null},touchTypistState:{...h,autoOptOutExperiment:{...g,[i]:p}}})})},snoozeTouchTypist:()=>{var n;const i=null!==(n=t().common.touchTypistSettings)&&void 0!==n?n:s.Y;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistSettings:{...i,enabled:!1,snoozedUntil:new Date((new Date).getTime()+l.xO).toISOString()}})})},setTouchTypistHotkey:({hotkey:n})=>{var i;const r=null!==(i=t().common.touchTypistSettings)&&void 0!==i?i:s.Y;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistSettings:{...r,hotkey:n}})})},incrementAccessibilityOnboardingAlertsCount:()=>{var n;const i=null!==(n=t().common.touchTypistState)&&void 0!==n?n:s.c,{accessibilityOnboardingAlertsCount:r=s.c.accessibilityOnboardingAlertsCount}=i;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...i,accessibilityOnboardingAlertsCount:r+1}})})},incrementTouchTypistUserAcceptedCount:()=>{var n;const i=null!==(n=t().common.touchTypistState)&&void 0!==n?n:s.c;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...i,userAcceptedCount:Math.min(i.userAcceptedCount+1,3),lastUserAcceptedAt:(new Date).toISOString()}})})},setHasBeenAutoOptedOut:({userId:n,hasBeenAutoOptedOut:i})=>{var r,a,l;const c=null!==(r=t().common.touchTypistState)&&void 0!==r?r:s.c,u=null!==(a=c.autoOptOutExperiment)&&void 0!==a?a:{},d={...null!==(l=u[n])&&void 0!==l?l:{},hasBeenAutoOptedOut:i};return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...c,autoOptOutExperiment:{...u,[n]:d}}})})},toggleCitationBuilderForDomain:({domain:n,enabled:i,pathName:s,inAllowList:r})=>{var l;const c=null!==(l=t().common.citationBuilder)&&void 0!==l?l:a.KC.empty;return e.patch({extensionSettings:(0,o.k1)(t(),{citationBuilder:{...c,domains:{...c.domains,[n]:{disabled:!i,toggleDate:(new Date).getTime(),togglePathName:s,inAllowList:r}}}})})},toggleTranslateOnboardingForDomain:({domain:n,enabled:i})=>{var s;const r=null!==(s=t().common.translateOnboarding)&&void 0!==s?s:a.aK.empty;return e.patch({extensionSettings:(0,o.k1)(t(),{translateOnboarding:{...r,domains:{...r.domains,[n]:{disabled:!i}}}})})},toggleSite:({enabled:n,domain:i,clickToRunEnabled:s})=>e.patch({extensionSettings:(0,o.J_)(t(),i,{enabled:n,disabledDate:!0===n?void 0:Date.now(),...void 0!==s?{clickToRunEnabled:s}:void 0})}),setKeyboardShortcut:t=>(0,c.R)(e).setKeyboardShortcut(t),toggleEnhancedScreenReaderUXSupport:n=>e.patch({extensionSettings:(0,o.k1)(t(),{isEnhancedScreenReaderUXSupported:n})})}}},55830:(e,t,n)=>{n.d(t,{q:()=>u});var i=n(86837),s=n(89512),r=n(24534),o=n(15933),a=n(44814),l=n(42900),c=n(18428);const u=e=>({quickSettings:(0,l.QP)(e),gdocs:(0,o.q)(e),settings:(0,c.C)(e),connection:(0,s.j)(e),tabs:(0,a.a)(e),environment:(0,r.k)(e),auth:(0,i.a)(e)})},18428:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(84674);const s=e=>{const t=(0,i.gC)(e);let n=Promise.resolve();const s=async s=>{const r=n.then((async()=>{const n=t();Object.keys(s).every((e=>s[e]===n.common[e]))||await e.patch({extensionSettings:(0,i.k1)(n,s)})}));return n=r.catch((()=>{})),r};return{patchCommonSettings:s,setDesktopIntegration:e=>s({isDesktopIntegrationEnabled:e}),enableClickToRunOnAllSites:()=>s({clickToRunOnAllSites:!0}),enableHistoryLoggerUntil:e=>s({historyLoggerEnabledUntil:e}),disableHistoryLogger:()=>s({historyLoggerEnabledUntil:0}),enableAdvancedHistoryLoggerUntil:e=>s({advancedHistoryLoggerEnabledUntil:e}),disableAdvancedHistoryLogger:()=>s({advancedHistoryLoggerEnabledUntil:0}),disableOnTab:n=>e.patch({extensionSettings:(0,i.J_)(t(),n,{enabled:!1,disabledDate:Date.now()})}),toggleDebugMenu:(e=!0)=>s({isDebugMenuVisible:e}),toggleGOSDebugger:e=>s({gOSDebuggerEnabled:e}),setGOSAppletChannel:e=>s({gOSAppletChannel:e}),setGOSAssistantAppletUrl:e=>s({gOSAssistantAppletUrl:e})}}},44814:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(25693);const s=e=>({enableOnceClickToRun:async()=>{const{clickToRunEnabledOnce:t,activeTab:n}=await e.get(["clickToRunEnabledOnce","activeTab"]);return e.patch({clickToRunEnabledOnce:{...null!=t?t:{},...n?{[n.id]:{[(0,i.KK)(n.url)]:!0}}:{}}})},setActiveTab:t=>e.patch({activeTab:t})})},84674:(e,t,n)=>{n.d(t,{J_:()=>r,gC:()=>o,k1:()=>s});var i=n(15362);function s(e,t){return Object.assign({},e,{common:{...e.common,...t}})}function r(e,t,n){return Object.assign({},e,{[t]:{...e[t],...n}})}const o=e=>()=>{var t;return null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:i.he}},33976:(e,t,n)=>{n.d(t,{G6:()=>u,KC:()=>s,Nr:()=>l,aK:()=>r,v3:()=>c});var i,s,r,o=n(12518),a=n(19724);!function(e){e.fromUserType=e=>{switch(e){case a.F.premium:return o.F2("premium");case a.F.registered:return o.F2("free");default:return o.t$("unknownUserType")}}}(i||(i={})),function(e){let t;!function(e){e.apa="apa",e.mla="mla",e.chicago="chicago"}(t=e.Style||(e.Style={})),e.empty={domains:{},onboardingVersionSeen:-1,style:t.apa}}(s||(s={})),function(e){e.empty={domains:{}}}(r||(r={}));const l={showNotch:!0};var c;!function(e){let t;!function(e){e.SUGGESTED_TERM="suggestedTermOnboardingSeen",e.TERM_DETAILS="onboardingSeen"}(t=e.OnboardingSeenFor||(e.OnboardingSeenFor={})),e.empty={enabled:!0,[t.SUGGESTED_TERM]:!1,[t.TERM_DETAILS]:!1},e.get=t=>({...e.empty,...t})}(c||(c={}));const u=()=>({seen:{},accepted:{},detectedTones:{}})},47557:(e,t,n)=>{if(n.d(t,{BM:()=>m,IG:()=>v,Re:()=>f,Tv:()=>p,VD:()=>_,YN:()=>y,_N:()=>b,a2:()=>S,qw:()=>g}),5526!=n.j)var i=n(64271);if(5526!=n.j)var s=n(44071);if(5526!=n.j)var r=n(29479);if(3075==n.j)var o=n(954);if(3075==n.j)var a=n(59179);if(3075==n.j)var l=n(90572);if(5526!=n.j)var c=n(18647);if(3075==n.j)var u=n(45523);if(3075==n.j)var d=n(78767);if(5526!=n.j)var h=n(79707);function g(e){return(0,i.T)((0,s.R)(e,"focus").pipe((0,r.h)(!0)),(0,s.R)(e,"blur").pipe((0,r.h)(!1)))}function p(e){return e.nodeType===Node.ELEMENT_NODE}function m(e){return e.nodeType===Node.TEXT_NODE}function f(e){return e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement}function v(e,t){return u.x.create(e,{childList:!0,subtree:!0,attributes:!1}).pipe((0,o.O)(null),(0,a.U)((e=>{const n=Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:n()})),{});return Object.values(n).filter(d.fQ).length===Object.keys(n).length?n:null})),(0,l.h)((e=>!!e)))}var _;function b(e,t,n){return i((0,c.Me)(t));function i(t){const n=t.elementFromPoint(e.left,e.top);if(!n)return!1;const i=s(n);if(null!==i)return i;const r=t.elementsFromPoint(e.left,e.top);for(const e of r){if(e===n)continue;const t=s(e);if(null!==t)return t}return!1}function s(e){var s;return!(t!==e&&!t.contains(e))||((null==n?void 0:n(e))?null:!!(null===(s=e.shadowRoot)||void 0===s?void 0:s.elementsFromPoint)&&i(e.shadowRoot))}}function S(e){if(e.endsWith("px")){const t=e.slice(0,-2),n=Number(t);return(0,h.hj)(n)?n:null}return null}function y(e){var t;const n=(null!==(t=e.ownerDocument.defaultView)&&void 0!==t?t:self).getComputedStyle(e).zIndex,i="auto"!==n&&parseInt(n||"0",10)||null;return null!==i?i:e.parentNode&&e.parentNode.nodeType===Node.ELEMENT_NODE?y(e.parentNode):null}!function(e){e[e.Escape=27]="Escape",e[e.Return=13]="Return",e[e.Tab=9]="Tab",e[e.RightArrow=39]="RightArrow",e[e.UpArrow=38]="UpArrow",e[e.DownArrow=40]="DownArrow"}(_||(_={}))},53684:(e,t,n)=>{n.d(t,{f:()=>s,h:()=>i});const i=e=>/^mail\.google\.com$/.test(e),s=e=>"docs.google.com"===e},53396:(e,t,n)=>{function i(e){return Boolean(e&&"function"==typeof(null==e?void 0:e[Symbol.iterator]))}function*s(e,t){for(const n of e)t(n)&&(yield n)}function*r(e,t){let n=0;for(const i of e)for(const e of t(i,n++))yield e}function o(e,t,n){let i=0;for(const n of e)if(t(n,i++))return n;return n}function a(e){for(const t of e)return t}function l(e,t){const n=e[Symbol.iterator]();let i=0;const s=t[Symbol.iterator]();let r=0,o=n.next(void 0),a=s.next(void 0);return[function*(){for(;!o.done||!a.done;)yield[o.done?null:o.value,a.done?null:a.value,i,r]}(),function(){o=n.next(void 0),i++},function(){a=s.next(void 0),r++}]}function*c(e){let t=e.length;for(;t--;)yield e[t]}n.d(t,{Em:()=>c,TW:()=>i,VS:()=>r,Xh:()=>a,fV:()=>l,hX:()=>s,sE:()=>o})},80239:(e,t,n)=>{if(n.d(t,{UP:()=>a,Zq:()=>l,cG:()=>c,o4:()=>s,xq:()=>r}),3075==n.j)var i=n(53396);function s(...e){return 1===e.length?e[0]:e}function r(e){const t=[];return o(t,e),t}function o(e,t){const n=t;if(Array.isArray(n)||"string"!=typeof n&&(0,i.TW)(n))for(const t of n)o(e,t);else e.push(n)}function*a(e){const t=e;if(Array.isArray(t)||"string"!=typeof t&&(0,i.TW)(t))for(const e of t)yield*a(e);else yield t}function*l(e){const t=e;if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)yield*l(t[e]);else if("string"!=typeof t&&(0,i.TW)(t)){const e=Array.from(t).reverse();for(const t of e)yield*l(t)}else yield t}function c(e){const t=e;if(Array.isArray(t)||"string"!=typeof t&&(0,i.TW)(t)){for(const e of t)if(!c(e))return!1;return!0}return!1}},40224:(e,t,n)=>{n.d(t,{i:()=>r});var i=n(90595),s=n(29483);function r(){return(0,s.OB)().experimentClient.isGateEnabled(i.K.SuperhumanGoBranding)}},16249:(e,t,n)=>{n.d(t,{J:()=>s});var i=n(29483);const s=new Proxy({},{get:(e,t)=>(...e)=>(0,i.OB)().bgRpc.api.trackGnar(t,e)})},89895:()=>{},92706:e=>{e.exports={gr_no_print:"dnXmp"}}}]);