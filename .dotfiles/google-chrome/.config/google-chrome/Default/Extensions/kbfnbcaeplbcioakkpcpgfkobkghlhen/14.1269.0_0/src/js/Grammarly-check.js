var leafPrototypes,getProto,inProgress,path,loadStylesheet,installedCssChunks,__webpack_modules__={64560:(e,t,n)=>{var r=n(21708),i="chrome-extension://__MSG_@@extension_id__/",o="moz-extension://__MSG_@@extension_id__/",s="safari-web-extension://__MSG_@@extension_id__/",a=self.GR_RESOURCE_ROOT||i,c=self.GR_RESOURCE_ROOT||o,u=self.GR_RESOURCE_ROOT||s;e.exports={__css:r.toString().replace(new RegExp(i,"g"),a).replace(new RegExp(o,"g"),c).replace(new RegExp(s,"g"),u),...r.locals}},12663:(e,t,n)=>{n.d(t,{C:()=>i,V:()=>o});var r=n(23162);const i={CheetahFetchSkills:new r.Cc("cheetah_fetch_skills"),PlagiarismAiDetector:new r.Cc("plagiarism_ai_detector_cheetah_web"),AiStudioInlineWritingGuidelines:new r.Cc("wricomp_inline_writing_guidelines","enabled"),AiStudioEssayRubric:new r.Cc("wricomp_essay_rubric","enabled"),CheetahFeatureFlagShowPeerFeedbackAction:new r.Cc("wricomp_show_peer_feedback_action","enabled"),AiStudioPlaybooksRead:new r.Cc("ai_studio_playbooks_read","enabled")},o={CheetahUphookHub:new r.KS("cheetah_uphook_hub"),CheetahUphookHubWin:new r.KS("cheetah_uphook_hub_win"),InProductDiscount:new r.KS("in_product_discount",["control","enabled"])}},61765:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var n={prod:"grammarly.com",preprod:"ppgr.io",qa:"qagr.io"},r={prod:"superhuman.com",preprod:"pp-sh.io",qa:"qa-sh.io"};t.config=function(e,t){var i;void 0===t&&(t=!1);var o="https://gateway.",s="/experimentation";return{url:{properties:""+o+(i=t?r[e]:n[e])+s+"/properties",treatment:""+o+i+s+"/treatment",gates:""+o+i+s+"/gates"}}}},43104:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOT_ASSIGNED=t.Experiment=void 0;var n=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this._experiences=t}return Object.defineProperty(e.prototype,"experiences",{get:function(){return Object.fromEntries(this._experiences.map((function(e){return[e,e]})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"experiencesArray",{get:function(){return this._experiences},enumerable:!1,configurable:!0}),e}();t.Experiment=n,t.NOT_ASSIGNED="NOT_ASSIGNED"},37870:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentClient=void 0;var o=n(43104),s=n(99937),a=n(24213),c=n(23310),u=function(e,t,n,u,l){var d=this;void 0===l&&(l={}),this._treatmentService=e,this._experiments=t,this._gatesService=n,this._gates=u,this._config=l,this._experimentTreatments=new Map,this._gateTreatments=new Map,this._initialFetched=!1,this.setPrefetchedTreatments=function(e){if(d._startRefreshIfNeeded(),!c.validateTreatmentsWithType(e))throw new Error("Not valid treatments");d._updateTreatmentForExpAndGates(e)},this._updateTreatmentForExpAndGates=function(e){d._treatmentService.refresh&&d._treatmentService.refresh(),d._experimentTreatments=new Map(e.filter((function(e){return e.type===s.ExperimentType.experiment})).map((function(e){return[e.experimentName,e]}))),d._gateTreatments=new Map(e.filter((function(e){return e.type===s.ExperimentType.gate})).map((function(e){return[e.experimentName,e]})))},this.fetchTreatments=function(e){return void 0===e&&(e={}),r(d,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._startRefreshIfNeeded(),[4,this._fetchTreatments(e.clearCacheOnError)];case 1:return t.sent(),[2]}}))}))},this._fetchTreatments=function(e){return r(d,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:t=null,n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),r=this._experiments.concat(this._gates),[4,this._treatmentService.getTreatment(r.map((function(e){return e.name})))];case 2:return t=i.sent(),[3,4];case 3:return o=i.sent(),n=o,e&&this._experimentTreatments.clear(),[3,4];case 4:if(t)return this._updateTreatmentForExpAndGates(t),[2];s=null,a=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this._gatesService.getTreatment(this._gates.map((function(e){return e.name})))];case 6:return s=i.sent(),[3,8];case 7:return c=i.sent(),a=c,e&&this._gateTreatments.clear(),[3,8];case 8:if(s&&(this._gateTreatments=new Map(s.map((function(e){return[e.experimentName,e]})))),a||n)throw a||n;return[2]}}))}))},this._startRefreshIfNeeded=function(){d._initialFetched||(d._config.ttl&&(d._refreshTreatment=setInterval((function(){return r(d,void 0,void 0,(function(){var e,t=this;return i(this,(function(n){switch(n.label){case 0:return e=function(){return r(t,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._fetchTreatments()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},this._config.ttl&&this._config.useRefreshJitter?(this._delayedRefreshTreatment=setTimeout(e,.1*this._config.ttl*Math.random()),[3,3]):[3,1];case 1:return[4,e()];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}),d._config.ttl)),d._initialFetched=!0)},this.dispose=function(){d._refreshTreatment&&clearInterval(d._refreshTreatment),d._delayedRefreshTreatment&&clearTimeout(d._delayedRefreshTreatment)},this.getTreatment=function(e){var t=d.getTreatmentWithExposureLoggingDisabled(e);return null!==t&&d.logTreatment(e,t).catch((function(){})),t},this.getTreatmentManakin=function(e){var t=d.getTreatment(e);return t===o.NOT_ASSIGNED?null:t},this.getTreatmentWithExposureLoggingDisabled=function(e){var t=d._experimentTreatments.get(e.name)||d._gateTreatments.get(e.name),n=null==t?void 0:t.groupName;if(0===e.experiencesArray.length||a.getExperienceName(null!=n?n:"")===o.NOT_ASSIGNED)return a.getExperienceName(null!=n?n:"");if(n){var r=e.experiencesArray.find((function(e){return a.getGroupNames(e).includes(n)}));if(r)return r}return null},this.peekTreatment=function(e){return d.getTreatmentWithExposureLoggingDisabled(e)},this.peekTreatmentManakin=function(e){var t=d.getTreatmentWithExposureLoggingDisabled(e);return t===o.NOT_ASSIGNED?null:t},this.logTreatment=function(e,t){if(d._config.ssrDisableLogging)return Promise.resolve();var n=d._experimentTreatments.get(e.name)||d._gateTreatments.get(e.name);if(!n||a.getExperienceName(n.groupName)!==t)throw new Error("Cannot find associated treatment");return(void 0!==n.needLog?n.needLog:n.type!==s.ExperimentType.gate)?d._treatmentService.logTreatment(n):Promise.resolve()},this.isGateEnabled=function(e){return d._getExperienceOfEnabledGate(e.name)===e.experience},this._getExperienceOfEnabledGate=function(e){var t=d._gateTreatments.get(e);return t?a.getExperienceName(t.groupName):null},this.getDynamicConfiguration=function(e){var t=d._experimentTreatments.get(e.name)||d._gateTreatments.get(e.name);return t&&t.dynamicConfiguration?t.dynamicConfiguration:null}};t.ExperimentClient=u},99937:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentType=void 0,function(e){e.experiment="experiment",e.gate="gate"}(t.ExperimentType||(t.ExperimentType={}))},21589:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Gate=void 0;var n=function(e,t){void 0===t&&(t="enabled"),this.name=e,this.experience=t};t.Gate=n},37296:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GatesService=void 0;var o=n(61765),s=n(38860),a=n(23310),c=function(){function e(e,t,n,r){void 0===r&&(r=!1),this.type="gate",this._httpClient=new s.HttpClient(e,t),this._gatesUrl=o.config(n,r).url.gates+"/get"}return e.prototype.getTreatment=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,this._httpClient.post(this._gatesUrl,e)];case 1:if(t=n.sent(),a.validateTreatmentsWithType(t))return[2,t];throw new Error("Did not get valid gate treatments")}}))}))},e}();t.GatesService=c},38860:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;var o=function(){function e(e,t){var n=this;this._fetch=e,this._config=t,this._fetchWithTimeout=this._config.timeout?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.race([n._fetch.apply(n,e),new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout"))}),n._config.timeout)}))])}:this._fetch}return e.prototype.get=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,this._getHeaders()];case 1:return t=r.sent(),[4,this._fetchWithTimeout(e,{credentials:"include",mode:"cors",headers:t})];case 2:return n=r.sent(),[2,this._parseResponse(n)]}}))}))},e.prototype.post=function(e,t){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,this._getHeaders()];case 1:return r=i.sent(),[4,this._fetchWithTimeout(e,{method:"POST",credentials:"include",mode:"cors",headers:n(n({},r),{"Content-Type":"application/json"}),body:JSON.stringify(t)})];case 2:return o=i.sent(),[2,this._parseResponse(o)]}}))}))},e.prototype._filterHeaders=function(e){var t={};return Object.entries(e).forEach((function(e){var n=e[0],r=e[1];r&&(t[n]=r)})),t},e.prototype._getHeaders=function(){return r(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return this._config.getApplicationHeaders?[4,this._config.getApplicationHeaders()]:[3,2];case 1:return e=n.sent(),t=function(){try{if("undefined"==typeof self||!self.location)return;var e=self.location,t=e.pathname,n=e.hash,r=(null==n?void 0:n.startsWith("#/"))?n.slice(1):t||"/";return"/"!==r&&r.endsWith("/")?r.slice(0,-1):r}catch(e){return}}(),t&&!e["X-Page-Path"]&&(e["X-Page-Path"]=t),[2,this._filterHeaders(e)];case 2:throw new Error("Cannot get application headers")}}))}))},e.prototype._parseResponse=function(e){if(!e.ok)throw new Error("Network response was not ok, status "+e.status);return"application/json"===e.headers.get("Content-Type")?e.json():e.text()},e}();t.HttpClient=o},23162:(e,t,n)=>{t.Cc=t.q4=t.KS=t.XJ=void 0;var r=n(37870);Object.defineProperty(t,"XJ",{enumerable:!0,get:function(){return r.ExperimentClient}});var i=n(86910);var o=n(37296);var s=n(36177);var a=n(43104);Object.defineProperty(t,"KS",{enumerable:!0,get:function(){return a.Experiment}}),Object.defineProperty(t,"q4",{enumerable:!0,get:function(){return a.NOT_ASSIGNED}});var c=n(21589);Object.defineProperty(t,"Cc",{enumerable:!0,get:function(){return c.Gate}});var u=n(99937)},36177:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropertiesClient=void 0;var r=n(61765),i=n(38860),o=function(){function e(e,t,n,o){void 0===o&&(o=!1),this._propertiesUrl=r.config(t,o).url.properties,this._httpClient=new i.HttpClient(e,n)}return e.prototype.getAll=function(){return this._httpClient.get(this._propertiesUrl)},e.prototype.getOne=function(e){var t=this._propertiesUrl+"/"+e;return this._httpClient.get(t)},e.prototype.set=function(e){return this._httpClient.post(this._propertiesUrl,e)},e}();t.PropertiesClient=o},24213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupNames=t.getExperienceName=void 0;t.getExperienceName=function(e){return e.endsWith("_1")||e.endsWith("_2")?e.slice(0,-2):null};t.getGroupNames=function(e){return[e+"_1",e+"_2"]}},23310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateTreatmentsWithType=void 0;var n=function(e){return"string"==typeof e};t.validateTreatmentsWithType=function(e){return Array.isArray(e)&&e.reduce((function(e,t){return e&&(n((r=t).experimentName)&&n(r.groupName)&&n(r.experimentId)&&n(r.type));var r}),!0)}},86910:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreatmentService=void 0;var o=n(61765),s=n(38860),a=n(23310),c=function(e){var t=function(e){return e.holdoutTreatment?":"+e.holdoutTreatment.experimentId+t(e.holdoutTreatment):""};return""+(e.groupName+":"+e.userId+":"+e.experimentId)+t(e)},u=function(){function e(e,t,n,r,i){void 0===i&&(i=!1),this._persistentStorageOpts=r,this.type="experiment",this._throttleLogs=new Map,this._sentLogs={},this._httpClient=new s.HttpClient(e,t),this._treatmentUrl=o.config(n,i).url.treatment}return e.prototype.getTreatment=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return t=this._treatmentUrl+"/get",n=e,[4,this._httpClient.post(t,n)];case 1:if(r=i.sent(),a.validateTreatmentsWithType(r))return[2,r];throw new Error("Did not get valid treatments")}}))}))},e.prototype.logTreatment=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._checkShouldThrottle(e)||this._checkSent(e)?[2]:[4,this._sendLogTreatment(e)];case 1:return t.sent(),this._setSentLogs(e),[2]}}))}))},e.prototype.refresh=function(){this._throttleLogs.clear()},e.prototype.initSentLogsStorage=function(){return r(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){switch(r.label){case 0:if(!this._persistentStorageOpts)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._persistentStorageOpts.get(this._sentLogsStorageKey)];case 2:return e=r.sent()||{},t=new Set(this._persistentStorageOpts.experimentNames),Object.entries(e).forEach((function(e){var r=e[0],i=e[1];t.has(r)&&n._updateSentLogs(r,i)})),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},Object.defineProperty(e.prototype,"_sentLogsStorageKey",{get:function(){var t;return e.STORAGE_KEY_PREFIX+(null===(t=this._persistentStorageOpts)||void 0===t?void 0:t.clientName)},enumerable:!1,configurable:!0}),e.prototype._checkShouldThrottle=function(e){var t=c(e),n=this._throttleLogs.get(e.experimentName)===t;return n||this._throttleLogs.set(e.experimentName,t),n},e.prototype._checkSent=function(e){var t=c(e);return this._sentLogs[e.experimentName]===t},e.prototype._setSentLogs=function(e){var t=c(e);this._updateSentLogs(e.experimentName,t,!0)},e.prototype._updateSentLogs=function(e,t,n){void 0===n&&(n=!1),(n||void 0===this._sentLogs[e])&&(this._sentLogs[e]=t),n&&this._persistSentLogs()},e.prototype._persistSentLogs=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),this._persistentStorageOpts?[4,this._persistentStorageOpts.set(this._sentLogsStorageKey,this._sentLogs)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},e.prototype._sendLogTreatment=function(e){var t=this._treatmentUrl+"/log";return this._httpClient.post(t,e)},e.STORAGE_KEY_PREFIX="TreatmentServiceStorage_",e}();t.TreatmentService=u},50806:(e,t,n)=>{n.d(t,{cc:()=>d,cn:()=>p});var r=n(2844),i=n(18946),o=n(9662),s=n(62552),a=n(32073),c=n(84308);class u extends s.X{view(...e){return void 0!==e[0]?"function"==typeof e[0]?new f(this,e[0]):"string"==typeof e[0]?new f(this,r.qC(...e.map(i.Jy())).get):new f(this,(t=>e[0].get(t))):this}}class l extends u{set(e){this.modify((()=>e))}lens(e,...t){return new h(this,"function"==typeof e?i.vg(e):"string"==typeof e?r.qC(i.Jy(e),...t.map((e=>i.Jy(e)))):e,o.q)}}class d extends l{constructor(e){super(e)}get(){return this.getValue()}modify(e){const t=this.getValue(),n=e(t);(0,o.q)(t,n)||this.next(n)}set(e){const t=this.getValue();(0,o.q)(t,e)||this.next(e)}}class h extends l{_source;_lens;_eq;constructor(e,t,n=o.q){super(void 0),this._source=e,this._lens=t,this._eq=n}get(){return this._subscription?this.getValue():this._lens.get(this._source.get())}modify(e){this._source.modify((t=>this._lens.modify(e,t)))}set(e){this._source.modify((t=>this._lens.set(e,t)))}_onSourceValue(e){const t=this.getValue(),n=this._lens.get(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new a.w0((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class f extends u{_source;_getter;_eq;constructor(e,t,n=o.q){super(void 0),this._source=e,this._getter=t,this._eq=n}get(){return this._subscription?this.getValue():this._getter(this._source.get())}_onSourceValue(e){const t=this.getValue(),n=this._getter(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new a.w0((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class p extends u{_sources;_combineFn;_eq;constructor(e,t,n=o.q){super(void 0),this._sources=e,this._combineFn=t,this._eq=n}get(){return this._subscription?this.getValue():this._combineFn(this._sources.map((e=>e.get())))}_onSourceValues(e){const t=this.getValue(),n=this._combineFn(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=(0,c.a)(this._sources).subscribe((e=>this._onSourceValues(e)))),this._refCount++;const t=new a.w0((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}},13391:(e,t,n)=>{n.d(t,{h:()=>r});var r,i=n(62552),o=n(8867),s=n(32073),a=n(63532),c=n(32734),u=n(90572),l=n(50806);!function(e){e.create=function(e){return new l.cc(e)},e.log=function(e,t){const n=(e,t,n)=>console.log("%c"+e,`color: ${t}; font-weight: bold`,n);let r=e.get();return e.subscribe((e=>{"function"==typeof t?t(r,e):(console.group(`UPDATE ${t?`TYPE: ${t} `:""}@ ${(new Date).toTimeString()}`),n("prev state","#9E9E9E",r),n("next state","#4CAF50",e),console.groupEnd()),r=e})),e},e.combine=function(...e){return new l.cn(e.slice(void 0,-1),(t=>e[e.length-1](...t)))},e.fromObservable=function(t){const n=new i.X(null),r=t.pipe((0,a.b)((t=>{const r=n.value;null===r?n.next(e.create(t)):r.set(t)})),(0,c.B)());return new o.y((e=>{const t=new s.w0;return t.add(n.pipe((0,u.h)((e=>!!e))).subscribe(e)),t.add(r.subscribe(void 0,(t=>e.error(t)),(()=>e.complete()))),t}))}}(r||(r={}))},9662:(e,t,n)=>{function r(e){const t=[];let n;for(;!(n=e.next()).done;)t.push(n.value);return t}function i(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}n.d(t,{q:()=>u});const s=function(){const e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return i("callee",e)}}(),a=function(){const e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){return arguments.propertyIsEnumerable("length")}(),r=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return"function"!=typeof Object.keys||n?function(o){if(Object(o)!==o)return[];let a,c;const u=[],l=n&&s(o);for(a in o)!i(a,o)||l&&"length"===a||(u[u.length]=a);if(e)for(c=t.length-1;c>=0;)a=t[c],i(a,o)&&!r(u,a)&&(u[u.length]=a),c-=1;return u}:function(e){return Object(e)!==e?[]:Object.keys(e)}}();function c(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}function u(e,t,n=[],s=[]){if(o(e,t))return!0;if(c(e)!==c(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(c(e)){case"Arguments":case"Array":case"Object":if(null!=(l=e)&&"function"==typeof l.then)return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!o(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!o(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1;break;case"Map":case"Set":if(!u(r(e.entries()),r(t.entries()),n,s))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l;const d=a(e);if(d.length!==a(t).length)return!1;let h=n.length-1;for(;h>=0;){if(n[h]===e)return s[h]===t;h-=1}for(n.push(e),s.push(t),h=d.length-1;h>=0;){const r=d[h];if(!i(r,t)||!u(t[r],e[r],n,s))return!1;h-=1}return n.pop(),s.pop(),!0}},79713:(e,t,n)=>{function r(e,t){return function(n,r){return t(n(e(r)),r)}}n.d(t,{K:()=>r})},18946:(e,t,n)=>{n.d(t,{Jy:()=>a,vg:()=>u});var r=n(68437),i=n(2844);const o=new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"return\\s","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"(\\$_\\$wf\\(\\d+\\);)?","return\\s","(\\$_\\$w\\(\\d+, \\d+\\),\\s)?","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));function s(e){return function(e){const t=o,n=e.match(t);if(n&&n[2])return n[2].split(".");throw new TypeError(`Expected a property expression, got "${e}".\n\n      A property expression should be a referentially transparent (no side-effects),\n      single-expression "getter" function.\n\n      Correct example: "function (x) { return x.some }" or "x => x.some".\n      Incorrect example: "function (x) { var y = x.some; return y }" or "({some}) => some"`)}(e.toString())}function a(e){return void 0===e?e=>i.Ue((t=>t[e]),((t,n)=>(0,r.Dt)(e,t,n))):i.Ue((t=>t[e]),((t,n)=>(0,r.Dt)(e,t,n)))}let c=0;function u(e){const t=s(e);return r.z3&&function(e){if(c<10){c++;const t=`x.${e.join(".")}`,n=`'${e.join("', '")}'`;(0,r.Kp)(`The property expression overload of Atom.lens and Lens.prop are deprecated and will be removed in next versions of Focal. Please use the key name overload for Atom.lens and Lens.key instead. You can convert your code by changing the calls:\n  a.lens(x => ${t}) to a.lens(${n}),\n  Lens.prop((x: T) => ${t}) to Lens.key<T>()(${n}).`)}}(t),i.qC(...t.map(a()))}},2844:(e,t,n)=>{n.d(t,{Ue:()=>o,qC:()=>s});var r=n(79713),i=n(99525);function o(e,t){return{get:e,set:t,modify:(0,r.K)(e,t),compose:n=>o((t=>n.get(e(t))),((r,i)=>t(n.set(r,e(i)),i)))}}function s(...e){if(0===e.length)throw new TypeError("Can not compose zero lenses. You probably want `Lens.identity`.");if(1===e.length)return e[0];{let t=e[0];return e.slice(1).forEach((e=>{t=t.compose(e)})),t}}o((e=>e),((e,t)=>e));(0,i.U)((e=>{}),((e,t)=>t))},99525:(e,t,n)=>{n.d(t,{U:()=>i});var r=n(79713);function i(e,t){return{get:e,set:t,modify:(0,r.K)(e,t),compose:n=>i((t=>{const r=e(t);return void 0!==r?n.get(r):void 0}),((r,i)=>{const o=e(i);return void 0!==o?t(n.set(r,o),i):i}))}}},68437:(e,t,n)=>{n.d(t,{Dt:()=>o,Kp:()=>s,z3:()=>i});var r=n(9662);const i=void 0!==n(9780)&&!1;function o(e,t,n){if(e in n&&(0,r.q)(t,n[e]))return n;{const r={};for(const e in n)r[e]=n[e];return r[e]=t,r}}function s(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("[Focal]: "+e);try{throw new Error(e)}catch(e){}}},81933:(e,t,n)=>{n.r(t),n.d(t,{ArgumentOutOfRangeError:()=>l.W,AsyncSubject:()=>d.c,BehaviorSubject:()=>h.X,ConnectableObservable:()=>f.c,EMPTY:()=>p.E,EmptyError:()=>g.K,NEVER:()=>m.C,Notification:()=>_.P_,ObjectUnsubscribedError:()=>b.N,Observable:()=>o.y,ReplaySubject:()=>v.t,Scheduler:()=>y.b,Subject:()=>w.x,Subscriber:()=>x.Lv,Subscription:()=>E.w0,TimeoutError:()=>k.W,UnsubscriptionError:()=>C.B,VirtualAction:()=>T.h,VirtualTimeScheduler:()=>T.y,animationFrameScheduler:()=>S.Z,asapScheduler:()=>R.E,asyncScheduler:()=>I.z,audit:()=>ce.U,auditTime:()=>ue.e,buffer:()=>le.f,bufferCount:()=>de.j,bufferTime:()=>he.e,bufferToggle:()=>fe.P,bufferWhen:()=>pe.R,catchError:()=>ge.K,combineAll:()=>me.c,combineLatest:()=>_e.a,combineLatestStatic:()=>i.a,concat:()=>be.z,concatAll:()=>ve.u,concatMap:()=>ye.b,concatMapTo:()=>we.w,concatStatic:()=>A.z,config:()=>O.v,count:()=>xe.Q,debounce:()=>Ee.D,debounceTime:()=>ae.b,defaultIfEmpty:()=>ke.d,defer:()=>F.P,delay:()=>Ce.g,delayWhen:()=>Te.j,dematerialize:()=>Se.D,distinct:()=>Re.E,distinctUntilChanged:()=>ee.x,distinctUntilKeyChanged:()=>Ie.g,elementAt:()=>Ae.T,endWith:()=>Oe.l,every:()=>Fe.y,exhaust:()=>Pe.b,exhaustMap:()=>Ne.z,expand:()=>Le.j,filter:()=>De.h,finalize:()=>Ue.x,find:()=>Me.s,findIndex:()=>Ge.c,first:()=>je.P,flatMap:()=>qe.z,from:()=>P.D,fromEvent:()=>N.R,fromEventPattern:()=>L.R,generate:()=>D.R,groupBy:()=>Be.v,identity:()=>U.y,ignoreElements:()=>He.l,iif:()=>M.s,interval:()=>a.F,isEmpty:()=>ze.x,isObservable:()=>G.b,last:()=>We.Z,lastValueFrom:()=>j.n,map:()=>te.U,mapTo:()=>Ve.h,materialize:()=>$e.i,max:()=>Ke.F,merge:()=>Xe.T,mergeAll:()=>Ze.J,mergeMap:()=>qe.z,mergeMapTo:()=>Je.j,mergeScan:()=>Ye.f,mergeStatic:()=>u.T,min:()=>Qe.V,multicast:()=>et.O,noop:()=>en,observable:()=>q.L,observeOn:()=>tt.Q,of:()=>s.of,onErrorResumeNext:()=>nt.h,onErrorResumeNextStatic:()=>B.h,pairs:()=>H.X,pairwise:()=>rt.G,partition:()=>it.u,partitionStatic:()=>z.u,pipe:()=>W.z,pluck:()=>ot.j,publish:()=>st.n,publishBehavior:()=>at.n,publishLast:()=>ct.C,publishReplay:()=>ut._,queueScheduler:()=>V.N,race:()=>lt.S,raceStatic:()=>$.S,range:()=>K.w,reduce:()=>dt.u,refCount:()=>ht.x,repeat:()=>ft.r,repeatWhen:()=>pt.a,retry:()=>gt.X,retryWhen:()=>mt.a,sample:()=>_t.U,sampleTime:()=>bt.b,scan:()=>vt.R,scheduled:()=>X.x,sequenceEqual:()=>yt.N,sequenceS:()=>rn,share:()=>oe.B,shareReplay:()=>tn,single:()=>wt.Z,skip:()=>xt.T,skipBy:()=>nn,skipLast:()=>Et.W,skipTime:()=>sn,skipUntil:()=>kt.u,skipWhile:()=>Ct.n,startWith:()=>Tt.O,subscribeOn:()=>St.R,switchAll:()=>Rt.B,switchMap:()=>ie.w,switchMapTo:()=>It.c,take:()=>At.q,takeLast:()=>re.h,takeUntil:()=>Ot.R,takeWhile:()=>ne.o,tap:()=>Ft.b,throttle:()=>Pt.P,throttleTime:()=>se.p,throwError:()=>Z._,throwIfEmpty:()=>Nt.T,timeInterval:()=>Lt.J,timeout:()=>k.V,timeoutWith:()=>Dt.L,timer:()=>on,timestamp:()=>Ut.A,toArray:()=>Mt.q,using:()=>J.g,window:()=>Gt.u,windowCount:()=>jt.r,windowTime:()=>qt.I,windowToggle:()=>Bt.j,windowWhen:()=>Ht.Q,withLatestFrom:()=>zt.M,zip:()=>Wt.$,zipAll:()=>Vt.h,zipStatic:()=>Y.$});var r=n(90023),i=n(84308),o=n(8867),s=n(84714),a=n(84766),c=n(93440),u=n(64271),l=n(64522),d=n(7572),h=n(62552),f=n(30499),p=n(36344),g=n(54784),m=n(91089),_=n(54481),b=n(17617),v=n(55341),y=n(36912),w=n(74822),x=n(69088),E=n(32073),k=n(18519),C=n(62178),T=n(86150),S=n(52826),R=n(69996),I=n(25941),A=n(20680),O=n(86899),F=n(79256),P=n(50750),N=n(44071),L=n(28767),D=n(3669),U=n(94173),M=n(17543),G=n(94155),j=n(48546),q=n(61443),B=n(21772),H=n(34936),z=n(64335),W=n(67982),V=n(19946),$=n(26156),K=n(99748),X=n(91603),Z=n(31789),J=n(78837),Y=n(98017),Q=n(89408),ee=n(24666),te=n(59179),ne=n(39256),re=n(86599),ie=n(20161),oe=n(32734),se=n(84908),ae=n(29416),ce=n(59222),ue=n(2613),le=n(97092),de=n(53113),he=n(80859),fe=n(84153),pe=n(15015),ge=n(66878),me=n(88773),_e=n(31403),be=n(29678),ve=n(18767),ye=n(8065),we=n(62076),xe=n(81175),Ee=n(5588),ke=n(5447),Ce=n(18827),Te=n(97654),Se=n(23059),Re=n(30346),Ie=n(13712),Ae=n(52343),Oe=n(17610),Fe=n(22938),Pe=n(89124),Ne=n(21070),Le=n(47130),De=n(90572),Ue=n(85156),Me=n(83458),Ge=n(65046),je=n(14969),qe=n(17869),Be=n(85251),He=n(46734),ze=n(36834),We=n(21200),Ve=n(29479),$e=n(95840),Ke=n(61574),Xe=n(17705),Ze=n(31603),Je=n(36594),Ye=n(75619),Qe=n(61077),et=n(9642),tt=n(37108),nt=n(7949),rt=n(78129),it=n(84091),ot=n(90517),st=n(89457),at=n(24832),ct=n(7009),ut=n(28404),lt=n(18632),dt=n(84523),ht=n(93790),ft=n(40668),pt=n(30365),gt=n(71051),mt=n(64715),_t=n(79859),bt=n(25503),vt=n(3199),yt=n(58842),wt=n(67929),xt=n(8794),Et=n(15453),kt=n(19830),Ct=n(98189),Tt=n(954),St=n(53459),Rt=n(54115),It=n(53976),At=n(84178),Ot=n(44045),Ft=n(63532),Pt=n(4040),Nt=n(27649),Lt=n(67227),Dt=n(18595),Ut=n(37163),Mt=n(89364),Gt=n(21754),jt=n(97033),qt=n(58861),Bt=n(62965),Ht=n(57384),zt=n(10883),Wt=n(13369),Vt=n(27121),$t=Object.defineProperty,Kt=Object.defineProperties,Xt=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,Qt=(e,t,n)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const en=r.Q1,tn=Q.d;function nn(e){return(0,ee.x)(e.equals)}function rn(e){return(0,i.a)(Object.entries(e).map((([e,t])=>(t instanceof o.y?t:(0,s.of)(t)).pipe((0,te.U)((t=>[e,t])))))).pipe((0,te.U)((e=>e.reduce(((e,[t,n])=>{return r=((e,t)=>{for(var n in t||(t={}))Jt.call(t,n)&&Qt(e,n,t[n]);if(Zt)for(var n of Zt(t))Yt.call(t,n)&&Qt(e,n,t[n]);return e})({},e),Kt(r,Xt({[t]:n}));var r}),{}))))}function on(e=0,t,n){const r="number"==typeof e?e:null==e?void 0:e.getTime();return null!=r&&r>=2147483647?new o.y((e=>{const i=Date.now(),o=(0,a.F)(1e3,n).pipe((0,ne.o)((()=>Date.now()-i<r)),(0,re.h)(1),null==t?(0,te.U)((()=>0)):(0,ie.w)((()=>(0,a.F)(t,n)))).subscribe(e);return()=>o.unsubscribe()})):null!=t?(0,c.H)(e,t,n):(0,c.H)(e,n)}function sn(e){return t=>{const n=t.pipe((0,oe.B)());return(0,u.T)(n.pipe((0,se.p)(e)),n.pipe((0,ae.b)(e))).pipe((0,ee.x)())}}},5612:(e,t,n)=>{var r;n.d(t,{a:()=>r}),function(e){e.CHROME_PROD="kbfnbcaeplbcioakkpcpgfkobkghlhen",e.CHROME_DEV="hnjmaaohmpmdoanfjacbknnehbdpjpmm",e.CHROME_QA="kioapjjehinomebhipemibkoghnfihaj",e.CHROME_NIGHTLY="aojbbefmgiilpnbipikljicoojkjbfle",e.CHROME_SHGO_NIGHTLY="cnkljppodomflaoljemgokomblgbgenf",e.CHROME_SHGO_PROD="fiicfmbdhpbnebmbofpphmalhgofdakc",e.EDGE_SHGO_PROD="pomkljejojcgechkiimaggeocndnliol",e.CHROME_EARTH="nlpbgkedmfjdliflklegppnapkojinhi",e.CHROME_MARS="ofklbkglijgokkagmgomakbafehgeacg",e.CHROME_VENUS="opbgoiocaoaggaladhoaldigpglopmej",e.FIREFOX="87677a2c52b84ad3a151a4a72f5bd3c4@jetpack"}(r||(r={}))},24196:(e,t,n)=>{n.d(t,{Nl:()=>o,Ot:()=>l,R7:()=>d,fg:()=>a,rv:()=>c,sI:()=>f,vl:()=>h,w4:()=>s,z0:()=>u});var r=n(74170),i=n(21589);const o={...r,AgentsFeatureInExtension:new i.Gate("agents_feature_in_extension"),AgentsCAPIFiltering:new i.Gate("extension_agents_capi_filtering"),AgentParaphraserInExtension:new i.Gate("extension_paraphraser"),AgentHumanizerInExtension:new i.Gate("extension_humanizer"),AgentReaderReactionsInExtension:new i.Gate("extension_reader_reactions"),AgentExpertPanelInExtension:new i.Gate("extension_expert_review"),AgentAiDetectorInExtension:new i.Gate("extension_ai_detector"),AgentPlagiarismCheckerInExtension:new i.Gate("extension_plagiarism_checker"),AgentsAutofocusToFirstVBar:new i.Gate("extension_agents_autofocus_vbars"),AgentsUphookHubClientDependency:new i.Gate("extension_agents_uphook_hub_client"),AgentsMessageBusDetailedTelemetry:new i.Gate("extension_agents_message_bus_detailed_telemetry"),AgentsInfoTelemetry:new i.Gate("extension_agents_info_telemetry"),AgentsEarlyDisconnectHandler:new i.Gate("extension_agents_early_disconnect_handler_logic")};function s(e){return e.isGateEnabled(o.AgentsFeatureInExtension)}function a(e){return s(e)&&e.isGateEnabled(o.AgentPlagiarismCheckerInExtension)}function c(e){return s(e)&&e.isGateEnabled(o.AgentAiDetectorInExtension)}function u(e){return s(e)&&e.isGateEnabled(o.AgentParaphraserInExtension)}function l(e){return s(e)&&e.isGateEnabled(o.AgentHumanizerInExtension)}function d(e){return s(e)&&e.isGateEnabled(o.AgentReaderReactionsInExtension)}function h(e){return s(e)&&e.isGateEnabled(o.AgentExpertPanelInExtension)}function f(e){return e.isGateEnabled(o.AgentsUphookHubClientDependency)}},60026:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(23162);const i={AAADefaultOnV3:new r.KS("extension_always_on_assistant_default_on_v3",["control","test"]),ReducedNotchAnnoyance:new r.KS("extension_reduced_notch_annoyance_v2",["control","test"])}},27982:(e,t,n)=>{n.d(t,{K:()=>s,Z:()=>i});var r=n(21589);const i={AssistantInSidePanel:new r.Gate("extension_enable_side_panel_assistant"),AbilityToAddAgents:new r.Gate("extension_enable_ability_to_add_agents"),WatchForAgentSetup:new r.Gate("extension_watch_for_agent_setup"),SuperhumanGoBranding:new r.Gate("extension_go_branding"),SupportAAAInIframeHost:new r.Gate("extension_aaa_support_iframe_host"),InsertPlainTextOnlyForSlack:new r.Gate("extension_aaa_insert_plain_text_only_for_slack"),ReinitializeAssistantOnExtensionUpdate:new r.Gate("extension_reinitialize_assistant_on_extension_update"),BrowserSidePanelEnablement:new r.Gate("extension_browser_side_panel_enablement"),ManagedSuperhumanGoToggle:new r.Gate("meg_superhuman_go_toggle"),AgentDirectoryServiceCache:new r.Gate("extension_agent_directory_service_cache"),PushedContentAgentAttribution:new r.Gate("pushed_content_agent_attribution")},o={KeyboardShortcutOnboardingBanner:new r.Gate("extension_shgo_onboarding_keyboard_shortcut_banner"),ProPreviewOnboardingBanner:new r.Gate("extension_shgo_onboarding_pro_preview_banner"),AddDataSourceTooltip:new r.Gate("extension_shgo_onboarding_add_data_source_tooltip"),FindMoreAgentsTooltip:new r.Gate("extension_shgo_onboarding_find_more_agents_tooltip"),SuperhumanGoDomTriggers:new r.Gate("extension_shgo_onboarding_dom_triggers"),HeroWaveAnimation:new r.Gate("extension_shgo_onboarding_hero_wave_animation"),ChatAgentOnboardingHeader:new r.Gate("extension_shgo_chat_agent_onboarding_header"),SuperhumanWelcomePageOnOptIn:new r.Gate("extension_shgo_welcome_page_on_opt_in"),SuperhumanWelcomePageUseQaUrl:new r.Gate("extension_shgo_welcome_use_qa_url")},s={...i,...o,LogAssistantNotchStatus:new r.Gate("extension_log_aaa_notch_status"),AssistantLifecycleEvents:new r.Gate("extension_assistant_lifecycle_events"),AlwaysOnAssistantInsertButton:new r.Gate("extension_always_on_assistant_insert_button"),Add1PasswordBypass:new r.Gate("extension_add_1password_bypass"),IncludeTextContentsInTextActions:new r.Gate("extension_include_text_contents_in_text_actions"),NativeInstallFlowForAgents:new r.Gate("extension_agent_install_flow"),EnableAssistantForGoUsers:new r.Gate("extension_enable_assistant_for_go_users"),FirstPartyPackAgents:new r.Gate("extension_first_party_pack_agents"),SetGoEntrypoint:new r.Gate("extension_set_go_entrypoint"),DisableCertifiedAgentsOnly:new r.Gate("extension_disable_certified_agents_only"),AssistantDebugMode:new r.Gate("assistant_debug_mode"),PushedContentAutoFocus:new r.Gate("extension_pushed_content_autofocus"),CheckTextWhenTurnOnAAA:new r.Gate("extension_enable_extension_when_turn_on_aaa"),TranslateAgentInternal:new r.Gate("extension_translate_agent_internal"),TranslateAgentExternal:new r.Gate("extension_translate_agent_external"),ListenToSidePanelClose:new r.Gate("extension_listen_to_side_panel_close"),ContextSelectorRedesign:new r.Gate("extension_context_selector_redesign"),ExplainerAgentInternal:new r.Gate("extension_explainer_agent_internal"),ExplainerAgentExternal:new r.Gate("extension_explainer_agent_external"),AgentBenchInitialization:new r.Gate("extension_agent_bench_initialization"),WaitForAgentIntegrationInAssistant:new r.Gate("extension_wait_for_agent_integration_in_assistant"),RecommendedActionsInGoChat:new r.Gate("extension_recommended_actions_go_chat"),EditingToolCallCards:new r.Gate("extension_editing_tool_call_cards"),ContextExtractionDomMapper:new r.Gate("extension_context_extraction_dom_mapper")}},49652:(e,t,n)=>{n.d(t,{Dr:()=>h,IH:()=>d,kA:()=>f});var r=n(13391),i=n(67880),o=n(27982),s=n(39963),a=n(44675),c=n(20905),u=n(29483),l=n(39575);function d(e){return r.h.combine(e.view((0,i.H6)("alwaysAvailableAssistantSettings","isDesktopIntegrationEnabled")),h(),((e,t)=>(0,l.Y)(e,t)))}function h(){const e=r.h.create(void 0);return f().then((t=>{e.set(t)})),e}async function f(){if((0,u.OB)().experimentClient.isGateEnabled(o.Z.ManagedSuperhumanGoToggle))try{return(await(0,a.Fb)(c.m9(3),(0,u.OB)().bgRpc.api.getGoSettings())).isGoEnabledForInstitution}catch(e){return(0,s.Tb)().alwaysAvailableAssistant.goSettingsLoadFailedCs(e),!1}}},39575:(e,t,n)=>{n.d(t,{Y:()=>s});var r=n(28898),i=n(60026),o=n(27982);function s(e,t){var n,s,a;if(void 0!==t)return t;if(!(null===(n=(0,r.O)().experimentClient)||void 0===n?void 0:n.isGateEnabled(o.K.AssistantInSidePanel)))return!1;const c=null===(s=null==e?void 0:e.alwaysAvailableAssistantSettings)||void 0===s?void 0:s.enabled;return void 0!==c?!!c:!!e&&!0!==e.isDesktopIntegrationEnabled&&"test"===(null===(a=(0,r.O)().experimentClient)||void 0===a?void 0:a.getTreatment(i.p.AAADefaultOnV3))}},56863:(e,t,n)=>{n.d(t,{xW:()=>a});var r=n(16381),i=n(62067);const o=(e,t)=>`${e}-${t}`,s=(e,t)=>t&&t!==i.uN.Email?`${e}-${t}`:e,a=e=>{const{source:t,slot:n,name:i,experience:a,action:c,lastKnownUserType:u,authType:l}=e;return{gitm_source:t,gitm_slot:n,gitm_name:o(i,u),gitm_action:c,gitm_content:s(a,l),gitm_client:(0,r.jR)()}}},62067:(e,t,n)=>{n.d(t,{G0:()=>o,VP:()=>a,Vi:()=>i,uN:()=>c,vi:()=>s});const r={QuickSignup:"quickSignup"},i={GDocsWelcome:"gDocsWelcome",Default:"default",SettingsFooter:"settingsFooter",SessionTimeout:"sessionTimeout",SignedOutUI:"signedOutUI",ChromeStoreSignup:"chromeStoreSignup"};var o,s,a,c;!function(e){e.InlineCard="inlineCard",e.Assistant="assistant",e.AlwaysOnAssistant="alwaysOnAssistant",e.Toolbar="toolbar",e.FirstTimePopup="firstTimePopup"}(o||(o={})),function(e){e.GDocs="gDocs",e.NonGDocs="nonGDocs"}(s||(s={})),function(e){e.SignIn="signIn",e.SignUp="signUp"}(a||(a={})),function(e){e.Email="email",e.Google="google",e.AccountChooser="accountChooser"}(c||(c={}))},20851:(e,t,n)=>{n.d(t,{Cr:()=>f,PM:()=>u,Td:()=>l,eC:()=>c,gO:()=>o,r4:()=>d});var r=n(25693),i=n(78767);function o(e,t){var n,r,i;const o=null===(i=null===(r=null===(n=null==t?void 0:t.citationBuilder)||void 0===n?void 0:n.domains)||void 0===r?void 0:r[e])||void 0===i?void 0:i.disabled;return void 0!==o?!o:void 0}function s(e,t){return h(t).some((t=>new RegExp(t.domain).test(e)))}function a(e){var t,n;return!(null!==(n=null===(t=e.citationBuilder)||void 0===t?void 0:t.disabled)&&void 0!==n&&n)}function c(e,t){return h(t).some((t=>{const n=new RegExp(t.domain),r=new RegExp(t.pathname);return n.test(e.hostname)&&r.test(e.pathname)}))}function u(e,t,n){const r=o(e,n);return a(t)&&(void 0===r&&s(e,t)||!0===r)}function l(e,t,n,r){return n?u(e,t,r):function(e,t,n){return a(t)&&s(e,t)&&!1!==o(e,n)}(e,t,r)}function d(e,t,n){return a(t)&&(n?!function(e,t){var n,r;return(null!==(r=null===(n=t.citationBuilder)||void 0===n?void 0:n.blockedDomains)&&void 0!==r?r:[]).includes(e)}(e,t):s(e,t))}function h(e){var t,n;return null!==(n=null===(t=e.citationBuilder)||void 0===t?void 0:t.sources)&&void 0!==n?n:[]}(0,i.hz)((()=>{const e=document.location.href;return(0,r.KK)(e)}));(0,i.hz)((e=>{const t=document.location.href;return{url:t,domain:(0,r.KK)(t),isUrlAllowlisted:c(document.location,e)}}));const f=(0,i.hz)((()=>i.iy.create()))},11660:(e,t,n)=>{n.d(t,{K:()=>i});var r=n(23162);const i={...{VBarsRedesign:new r.Cc("extension_vbars_redesign","enabled"),VBarsPushedContentComments:new r.Cc("extension_vbars_pushed_content_comments","enabled"),VBarsPushedContentStreamingAnimation:new r.Cc("extension_vbars_pushed_content_streaming_animation","enabled")},VBarsKillSwitch:new r.Cc("vbars_extension_kill_switch"),VBarsInternal:new r.Cc("extension_g2_vbars_internal","enabled"),VBarsInternalIgnoreAllowList:new r.Cc("extension_g2_vbars_internal_ignore_allow_list","enabled"),VBarsSelectionPreload:new r.Cc("vbars_selection_preload_extension","enabled"),VBarsSelectionEnterprise:new r.Cc("vbars_selection_enterprise","enabled"),VBarsPushedContent:new r.Cc("pushed_content_extension","enabled"),VBarsIdleEnterprise:new r.Cc("vbars_idle_enterprise","enabled"),VBarsToggleFromSettingsRegistry:new r.Cc("meg_vbars_toggle","enabled"),VBarsDarkMode:new r.Cc("extension_vbars_dark_mode","enabled")}},21080:(e,t,n)=>{n.d(t,{E:()=>r});const r={SmartAgentRecommendations:new(n(21589).Gate)("extension_growthml_smart_agent_popup")}},42175:(e,t,n)=>{n.d(t,{XW:()=>r,yg:()=>i});const r=["chat.openai.com","gemini.google.com","www.perplexity.ai","perplexity.ai","chatgpt.com","claude.ai","www.wikipedia.org",".wikipedia.org"],i=["docs.google.com"]},45126:(e,t,n)=>{n.d(t,{j:()=>r,p:()=>i});const r={},i={}},24002:(e,t,n)=>{n.d(t,{D:()=>i,K:()=>o});var r=n(23162);const i={HumanWritingReportRolloutTestOff:new r.Cc("extension hwr rollout test off on")},o={HWRSourceTrackingEverywhere:new r.Cc("extension_hwr_clipboard_everywhere"),HWRDisable:new r.Cc("extension_hwr_disable"),HWRInternal:new r.Cc("extension_human_writing_report_internal"),HWRMigrateStorage:new r.Cc("extension_authorship_migrate_storage")}},18838:(e,t,n)=>{n.d(t,{C0:()=>o,YI:()=>i});var r=n(42175);function i(e,t,n,i=!1){if("enabled"===(null==t?void 0:t.kind)&&void 0===t.deniedClipboardAccessSince){const o=void 0===t.allowedClipboardAccess?function(e){return"enabled"===(null==e?void 0:e.kind)&&e.domainSettings.some((e=>e.logAllDocuments?e.logAllDocuments:e.activeDocumentIds.length>0))}(t):t.allowedClipboardAccess,s=t.allDomainsTrackingEnabled?""!==e&&r.yg.concat((null==n?void 0:n.blockedDomains)||[]).every((t=>!new RegExp(t).test(e))):r.XW.some((t=>new RegExp(t).test(e)));return o&&(s||i)}return!1}function o(e){return!!e&&("initial"!==e.kind&&"disabled"!==e.kind||"disabled"===e.kind&&e.disabledByUser)}},14058:(e,t,n)=>{n.d(t,{s:()=>r});(0,n(24007).SH)([0,5,10,15,20,25,50,75,100,200,250,500,750,1e3,1250,1500,2e3]);const r=new Set(["primaryLanguage","integrationName","fieldType"])},37435:(e,t,n)=>{n.d(t,{m:()=>i,y:()=>r});const r=["client","client_version","device"],i=["user_id","user_type","institution_id"]},97484:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(44675),i=n(40594);function o(e,t=i.Y.create("lib.tracking.ProductMetricsClient.transport"),n=1e4){return new Proxy({},{get:(i,o)=>(...i)=>Promise.race([e.api.trackProductMetric(i).then((()=>null)),(0,r.gw)(n,new Error("timeout call through bg page"))]).catch((e=>(t.warn("trackProductMetric call failed, reason:",e),e)))})}},87846:(e,t,n)=>{n.d(t,{N:()=>r});const r="gr-oauth-key"},33851:(e,t,n)=>{n.d(t,{_p:()=>a,g8:()=>c,jG:()=>s});var r=n(5612),i=n(27395);const o=[r.a.CHROME_SHGO_NIGHTLY,r.a.CHROME_SHGO_PROD,r.a.EDGE_SHGO_PROD],s="grammarlyClassicDisabled";async function a(e){if(!e.isGateEnabled(i.D.DisableClassicWhenGoDetected))return!1;try{for(const e of o)try{const t=`chrome-extension://${e}/src/inkwell/index.html`;if((await fetch(t)).ok)return!0}catch(e){continue}return!1}catch(e){return!1}}async function c(){try{void 0===(await chrome.storage.local.get([s]))[s]&&await chrome.storage.local.set({[s]:!0})}catch(e){}}},23474:(e,t,n)=>{n.d(t,{j:()=>i});var r=n(23162);const i={...n(45126).j,PromptEnhancementExperiment:new r.KS("prompt_enhancement_external_v1",["control","test","just_suppression"])}},27395:(e,t,n)=>{n.d(t,{D:()=>o});var r=n(21589),i=n(27982);const o={...n(24002).D,...i.Z,HideGButtonWhenNotchOn:new r.Gate("extension_hide_gbutton_when_chat_launcher_on"),FetchExperimentAfterUserChange:new r.Gate("fetch_experiment_after_user_change"),DispatchFocusEventIfDocNotFocused:new r.Gate("extension_dispatch_focus_event_if_doc_not_focused"),PromptEnhancementInternalGate:new r.Gate("prompt_enhancement_internal_gate"),HideGButtonWhenSuperhumanGoIsOpen:new r.Gate("extension_hide_gbutton_when_superhuman_go_is_open"),DisableClassicWhenGoDetected:new r.Gate("extension_disable_classic_when_go_detected")}},77590:(e,t,n)=>{n.d(t,{B:()=>r});var r,i=n(32073),o=n(90189),s=n(16381),a=n(15380),c=n(13736),u=n(56623),l=n(67960);!function(e){function t(e){const t=()=>{e.bgRpc.api.sendToPopup({kind:a.I.Kind.sendCsLogs,option:{logs:e.historyLogsService.getLogs(),isIframeIntegration:(0,s.n_)()}})};return e.message.on(a.B.Kind.sendCsLogsToPopup,t),{dispose(){e.message.off(a.B.Kind.sendCsLogsToPopup,t)}}}function n(e){return[new u.r("bg",(()=>e.bgRpc.api.getBGLogs()),u.r.getLogsFromSessionStorageFallbackGetter(l.v.bgHistoryLogs)),new u.r("cs",(()=>Promise.resolve(e.historyLogsService.getLogs())),u.r.getLogsFromSessionStorageFallbackGetter(l.v.csHistoryLogs))]}function r(e){return e.message.on(a.B.Kind.downloadDebugReportsFromCS,h),{dispose(){e.message.off(a.B.Kind.sendCsLogsToPopup,h)}}}function d(e){const t=(0,s.n_)()?new i.w0:c.E.initKeyboardShortcutHandler(n(e));return{dispose(){t.unsubscribe()}}}function h(){const e=n((0,o.OB)());c.E.download(e)}e.initSendLogsToPopupHandler=t,e.initDownloadDebugReportsListener=r,e.initKeyboardShortcutHandler=d,e.initListeners=function(e){const n=[t(e),d(e),r(e)];return{dispose(){n.forEach((e=>{e.dispose()}))}}},e.download=h}(r||(r={}))},90189:(e,t,n)=>{n.d(t,{OB:()=>g,Xb:()=>p,nD:()=>m});var r=n(97484),i=n(86089),o=n(53639),s=n(16533),a=n(11802),c=n(16381),u=n(10238),l=n(66209),d=n(11950),h=n(67960),f=n(29483);class p extends f.OD{static get isInited(){return void 0!==this._instance}static getInstance(){if(void 0===this._instance)throw new Error("cs Env not inited yet");return this._instance}static init(e){if(void 0!==this._instance)throw new Error("cs Env already inited");const t=new p(e);return this._instance=t,f.OD.initShared(t),t.browserApi.message.start&&t.browserApi.message.start(),t}constructor(e){super({browser:e.browser,extensionType:e.extensionType,deploymentType:e.deploymentType,context:"cs",browserInfo:e.browserApi.getBrowserInfo(),historyLoggerExtraArgs:{enableHistoryLoggerUntil:e=>{var t;null===(t=this.bgRpc)||void 0===t||t.api.enableHistoryLoggerUntil(e)},disableHistoryLogger:()=>{var e;null===(e=this.bgRpc)||void 0===e||e.api.disableHistoryLogger()},backupStorage:new l.f(e.browserApi.sessionStorage,h.v.csHistoryLogs,(async()=>{var t,n;return e.skipWriteLogsToBackupStorage||document.hidden||(0,c.n_)()||!await(null===(t=this.bgRpc)||void 0===t?void 0:t.api.isGateEnabled("SessionStorageLogsBackup"))||!await(null===(n=this.bgRpc)||void 0===n?void 0:n.api.isCurrentTabFocused())})),getExperimentClient:()=>this.experimentClient}}),this.browserApi=e.browserApi,this.message=new u.w(e.browserApi.message),this.bgRpc=new o.c(this.message),this.experimentClient=e.createExperimentClient(this.bgRpc),this.csShareStorage=new i.f,this.capiBgRpc=new s.R(this.message),this.staticCapiBgRpc=new a.s(this.message),this.telemetryCallProvider=(0,d._)(this.bgRpc),this.productMetricsCSClient=(0,r.l)(this.bgRpc)}}function g(){return p.getInstance()}function m(e=g()){return(0,f.nD)(e)}},86089:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(27250);const i="__EXT_CS_SHARE_STORAGE__";class o{constructor(){var e;this._win=(0,r.T)(),this._value=null!==(e=this._value)&&void 0!==e?e:{}}get _value(){return this._win[i]}set _value(e){this._win[i]=e}clean(){this._value={}}set(e,t){this._value[e]=t}get(e){return this._value[e]}getOnce(e){const t=this._value[e];return this.remove(e),t}remove(e){delete this._value[e]}}},27250:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(79707);function i(){var e;try{const t=null!==(e=self.top)&&void 0!==e?e:self;return(0,r.HD)(t.location.href)?t:self}catch(e){return self}}},38316:(e,t,n)=>{n.d(t,{w:()=>r});class r{constructor(e){this._rpc=e,this.type="gate"}getTreatment(){return this._rpc.api.getGateTreatment()}}},32620:(e,t,n)=>{n.d(t,{i:()=>r});class r{constructor(e){this._rpc=e,this.type="experiment"}getTreatment(){return this._rpc.api.getExperimentTreatment()}logTreatment(e){return this._rpc.api.logExperimentTreatment(e)}}},99402:(e,t,n)=>{n.d(t,{Eq:()=>s,U_:()=>a,gk:()=>c,lH:()=>i,op:()=>r,wJ:()=>o});const r=2147483647,i=r-1,o=r-5,s=r-6,a=o,c=1350},16415:(e,t,n)=>{n.d(t,{q:()=>r});var r,i=n(25693);!function(e){function t(e,t){if(!e||!t)return!0;return!t.includes(e)}function n(e,t){var n;return Boolean((null==t?void 0:t.isDesktopIntegrationEnabled)&&(null===(n=e.llamaIntegration)||void 0===n?void 0:n.enabled))}function r(e,n,r,o){var s,a;const c=o?(0,i.KK)(o):void 0,u=n.isLlamaInstalled&&(null===(s=r.llamaIntegration)||void 0===s?void 0:s.enabled);return t(c,null===(a=r.llamaIntegration)||void 0===a?void 0:a.disabledByDomain)&&(u||"true"===e.showDesktopIntegrationExtensionToggle)}e.isEnabled=n,e.showSettingPopupToggle=r,e.showDisabledByDesktopExtensionGButton=function(e,t,i,o){return r(t,e,i,o)&&n(i,e)},e.isIntegrationEnabled=function(e,r,i){var o;return!(!e||!i)&&(t(r,null===(o=i.llamaIntegration)||void 0===o?void 0:o.disabledByDomain)&&n(i,e))}}(r||(r={}))},18122:(e,t,n)=>{n.d(t,{LF:()=>r});const r=/^(\S+\.)?coda\.io$/},16533:(e,t,n)=>{n.d(t,{R:()=>s});var r=n(53966),i=n(36798),o=n(7621);class s extends i.H{constructor(e){super(new o.rr(r.I.rpcLegacyMessageName,e),new o.rr(r.I.rpcLegacyObservableName,e))}}},53639:(e,t,n)=>{n.d(t,{c:()=>s});var r=n(23472),i=n(46649),o=n(7621);class s extends i.X{constructor(e){super(new o.rr(r.x,e))}}},11802:(e,t,n)=>{n.d(t,{s:()=>s});var r=n(30603),i=n(36798),o=n(7621);class s extends i.H{constructor(e){super(new o.rr(r.U.rpcLegacyMessageName,e),new o.rr(r.U.rpcLegacyObservableName,e))}}},7621:(e,t,n)=>{n.d(t,{NH:()=>s,rr:()=>o});var r=n(8867),i=n(78767);class o{constructor(e,t,n=i.iy.create(),o=e){this._rpcMessageName=e,this._message=t,this._clientId=n,this._inboundMessageName=o,this.inbound=new r.y((e=>{const t=t=>{t.clientId===this._clientId&&e.next(t.data)};return this._message.on(this._inboundMessageName,t),()=>this._message.off(this._inboundMessageName,t)})),this.outbound=e=>{this._message.sendBackground(this._rpcMessageName,{clientId:this._clientId,data:e})}}}function s(e,t=i.iy.create()){return{inbound:{subscribe:n=>e.inbound.subscribe({next(e){var r;if(n){const i={clientId:t,data:e};null===(r=n.next)||void 0===r||r.call(n,i)}}})},outbound(n){n.clientId===t&&e.outbound(n.data)}}}},45523:(e,t,n)=>{n.d(t,{x:()=>r});var r,i=n(69996),o=n(8867),s=n(32734),a=n(37108),c=n(8065),u=n(59179);!function(e){function t(e,t){return n(e,t).pipe((0,s.B)(),(0,a.Q)(i.E))}function n(e,t){return new o.y((n=>{const r=new MutationObserver((e=>n.next(e)));return r.observe(e,t),()=>r.disconnect()}))}e.create=t,e.createUnsafe=n,e.createFlattenHot=function(e,t){return n(e,t).pipe((0,c.b)((e=>e)),(0,s.B)())},e.observeAttribute=function(e,n){return t(e,{attributes:!0,attributeFilter:[n],subtree:!1,childList:!1}).pipe((0,u.U)((t=>e.getAttribute(n))))},e.observeStyle=function(e){return t(e,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe((0,u.U)((t=>e.style)))},e.observeChildList=function(e){return t(e,{attributes:!1,subtree:!1,childList:!0}).pipe((0,u.U)((t=>e.childNodes)))}}(r||(r={}))},79477:(e,t,n)=>{n.d(t,{X:()=>h,n:()=>f});var r=n(20161),i=n(50750),o=n(59179),s=n(87846),a=n(25693),c=n(15362),u=n(19724),l=n(86130),d=n(43795);const h=(e,t)=>e.view().pipe(r.w((e=>{var n;const r=null!==(n=e.activeTab)&&void 0!==n?n:c.pN,h=(0,a.KK)(r.url);return i.D((async()=>({pageConfig:await t.api.getPageConfig(h,r.url)}))()).pipe(o.U((({pageConfig:t})=>{var n,i,o,a,p,g,m,_,b;const v=null!==(n=e.extensionSettings)&&void 0!==n?n:c.he;return{user:null!==(i=e.user)&&void 0!==i?i:u.n.defaultUser,tabs:{active:r},dynamicConfig:null!==(o=e.dynamicConfig)&&void 0!==o?o:l.cS,config:{...t,domain:h},settings:f(v,h),dapi:null!==(a=e.dapi)&&void 0!==a?a:{},connection:null!==(p=e.connection)&&void 0!==p?p:{},activeTab:r,installSource:null!==(g=e.extensionInstallSource)&&void 0!==g?g:"unknown",growth:null!==(m=e.growthSettings)&&void 0!==m?m:{},extensionFSM:null!==(_=e.extensionFSM)&&void 0!==_?_:c.uS,sessionTimeoutValue:(0,d.GH)(e[s.N]),passport:null!==(b=e.passport)&&void 0!==b?b:{}}})))})));function f(e,t){var n;const r=e[t],i=null===(n=null==r?void 0:r.enabled)||void 0===n||n;return{...e.common,...r,enabled:i}}},87030:(e,t,n)=>{n.d(t,{X:()=>r});var r,i=n(78767),o=n(87254),s=n(67778);!function(e){const t="grammarly.com",n="qagr.io",r="ppgr.io";e.create=function(e,a,c,u){const l=(e,t,n,r,o)=>"prod"===u?e:"qa"===u?t:"dev-qa"===u?n:"dev-preprod"===u?r:"dev"===u?o:void(0,i.vE)(u),d="https://127.0.0.1:8000",h=l("https://f-log-extension.grammarly.io",d,d,d,d),f=l("https://extension.femetrics.grammarly.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.ppgr.io/batch/import","https://femetrics.qagr.io/batch/import"),p=l("https://coda.io","https://head.coda.io","https://head.coda.io","https://staging.coda.io","https://coda.io"),g=l(t,n,n,r,n),m=l(t,n,n,r,t);return{url:s.F.create(e,m,h,f,p),gnar:o.UA.create(e,a,c,g),felog:o.Bo.create(e,a,c,u),capi:o.JW.create(e,a,c),iterable:o.Rl.create("https://api.iterable.com"),auth:o.Tg.create(e,a),extensionId:"87677a2c52b84ad3a151a4a72f5bd3c4"}}}(r||(r={}))},35922:(e,t,n)=>{n.d(t,{S:()=>r});var r,i=n(78767),o=n(65309),s=n(5612);!function(e){e.create=function(e,t,n,r,i,o,s,a,c){const u=void 0!==o&&void 0!==s?o:"UNVERSIONED",l=`${e}.${t}.${n}`;return{version:l,fullVersion:`${l}-${[r,["prod"!==i?i:null,u!==r?u:null].filter((e=>!!e)).join(".")].filter((e=>""!==e)).join("/")}`,commitHash:s,gitBranch:o,manifestVersion:a,extensionId:c}},e.getManifestVersion=function(e,t){switch(e){case"chromiumWebExtension":return t.chrome.runtime.getManifest().version;case"firefoxWebExtension":return o.Ud.runtime.getManifest().version;case"safariWebExtension":case"safariIOSWebExtension":return o.a1.runtime.getManifest().version;default:return(0,i.vE)(e)}},e.getExtensionId=function(e,t){try{switch(e){case"chromiumWebExtension":return t.chrome.runtime.id;case"firefoxWebExtension":return o.Ud.runtime.id;case"safariWebExtension":case"safariIOSWebExtension":return o.a1.runtime.id;default:return s.a.CHROME_PROD}}catch(e){return s.a.CHROME_PROD}}}(r||(r={}))},49779:(e,t,n)=>{n.d(t,{_K:()=>i,x2:()=>a});var r,i,o,s,a,c=n(78767);!function(e){e.create=function(e){return(0,c.cq)(["chrome","safari","firefox","edge"],e)},e.isValidTargetBrowser=function(e){return["chrome","safari","firefox","edge"].includes(e)}}(r||(r={})),function(e){e.create=function(e){return(0,c.cq)(["dev","prod","qa","dev-qa","dev-preprod"],e)}}(i||(i={})),function(e){e.create=function(e){return(0,c.cq)(["regular","retail"],e)}}(o||(o={})),function(e){e.create=function(e){return(0,c.cq)(["chromiumWebExtension","firefoxWebExtension","safariWebExtension","safariIOSWebExtension"],e)}}(s||(s={})),function(e){e.create=function(e,t,n,r,i){return{browser:e,extensionType:t,deploymentType:n,env:r,context:i}}}(a||(a={}))},97231:(e,t,n)=>{n.d(t,{Rd:()=>a,pM:()=>c});var r=n(78767),i=n(44257);const o=new r.xB((()=>{throw new Error("Global config not initialized")}));let s=()=>o.get();function a(){return s()}function c(e,t,n,r,s,a,c){const u=i.e.create(e,t,n,r,s,a,c);return o.init(u),u}},44257:(e,t,n)=>{n.d(t,{e:()=>i,y:()=>r});var r,i,o=n(78767),s=n(87030),a=n(35922),c=n(49779),u=n(95570);!function(e){function t(e,t,n,r,i,o,s){return{env:e,major_number:t,build_number:n,release_number:r,git_branch:i,git_commit:o,manifest_version:s}}e.create=t,e.fromBrowserify=function(){return t("prod","14","1269","0","UNVERSIONED","UNVERSIONED","3")}}(r||(r={})),function(e){e.getTargetEnv=function(e){if(!e.env)throw new Error("processEnv.env is null or undefined");const t=c._K.create(e.env);if(!t)throw new Error(`Invalid processEnv.env: ${e.env}`);return t},e.create=function(e,t,n,r,i,l,d){const h=[i.major_number,i.build_number,i.release_number].map(o.wU);let f;if(3===h.length&&h.every((e=>void 0!==e)))f=h;else{let e;try{e=a.S.getManifestVersion(t,self)}catch(e){}const n=(e||"").split(".").map(o.wU);f=3===n.length&&n.every((e=>void 0!==e))?n:[0,0,0]}const[p,g,m]=f;return{buildInfo:a.S.create(p,g,m,e,l,i.git_branch,i.git_commit,i.manifest_version,a.S.getExtensionId(t,self)),bundleInfo:c.x2.create(e,t,n,l,r),appConfig:s.X.create(e,t,n,l),systemInfo:u.mx.create(d)}}}(i||(i={}))},87254:(e,t,n)=>{n.d(t,{Bo:()=>i,JW:()=>o,Rl:()=>s,Tg:()=>a,UA:()=>r});var r,i,o,s,a,c=n(36769);!function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariWebExtension:"safariExt",safariIOSWebExtension:"safariIOSExt"};function n(e,n,r){return"retail"===r&&"safariIOSWebExtension"===n?"safariIOSExt-retail":"edge"===e?"chromiumEdgeExt":t[n]}e.getAppName=n,e.create=function(e,t,r,i){return{appName:(0,c.Cq)(n(e,t,r),"gnar app name"),url:`https://gnar.${i}`,ingestionUrl:`https://in.${i}/v1/events`,domain:`.${i}`,sendEmailInfoTracking:!0,sendFluidExperimentData:!1}}}(r||(r={})),function(e){const t={chromiumWebExtension:"extensionChrome",firefoxWebExtension:"extensionFirefox",safariWebExtension:"extensionSafari",safariIOSWebExtension:"extensionSafariIOS"};e.create=function(e,n,r,i){let o;return o="retail"===r&&"safariIOSWebExtension"===n?"extensionSafariIOS-retail":"edge"===e?"extensionEdge":(0,c.Cq)(t[n],"felog app name"),{appName:o,sendUsageMetrics:!0,sendPerfMetricsType:"dev"===i?"local":"off"}}}(i||(i={})),function(e){const t={chromiumWebExtension:"extension_chrome",firefoxWebExtension:"extension_firefox",safariWebExtension:"extension_safari",safariIOSWebExtension:"extension_safari_ios"},n={regular:"inline",retail:"retail_demo"};e.create=(e,r,i)=>({clientType:"edge"===e?"extension_chromium_edge":(0,c.Cq)(t[r],"capi client type"),clientSubType:(0,c.Cq)(n[i],"capi client subType")})}(o||(o={})),function(e){e.create=function(e){return{urls:{getInAppMessages:`${e}/api/inApp/getMessages`,track:`${e}/api/events/track`,trackInAppOpen:`${e}/api/events/trackInAppOpen`,trackInAppClose:`${e}/api/events/trackInAppClose`,trackInAppConsume:`${e}/api/events/inAppConsume`,trackInAppClick:`${e}/api/events/trackInAppClick`,userUpdate:`${e}/api/users/update`}}}}(s||(s={})),function(e){const t={grammarly:{chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt",edge:"chromiumEdgeExt"},go:{chromiumWebExtension:"chromeShgoExt",edge:"chromiumEdgeShgoExt"}};e.create=function(e,n){var r;const i="edge"===e?"edge":n;return{xClientType:null!==(r=t.grammarly[i])&&void 0!==r?r:t.grammarly[i]}}}(a||(a={}))},95570:(e,t,n)=>{var r,i,o;n.d(t,{mx:()=>o}),function(e){e.create=function(e){return{name:e.browserName||"other",version:e.browserVersion,userAgent:e.userAgent||""}}}(r||(r={})),function(e){e.create=function(e){const{osName:t,osVersion:n,userAgent:r=self.navigator.userAgent}=e;return{name:t,version:n,isWindows:-1!==(t||r).indexOf("Win"),isMac:-1!==(t||r).indexOf("Mac"),isChromeOS:t?"Chromium OS"===t:-1!==r.indexOf("CrOS")}}}(i||(i={})),function(e){e.create=function(e){return{browser:r.create(e),os:i.create(e)}}}(o||(o={}))},67778:(e,t,n)=>{n.d(t,{F:()=>r});var r,i=n(39020);!function(e){let t;var n;n=t=e.GrStaticUrl||(e.GrStaticUrl={}),n.toGrStaticUrl=e=>"https://assets.extension.grammarly.com/"+e}(r||(r={})),function(e){e.create=function(t,n,r,o,s){const a="safari"===t?"disableAppsPromotion=true":"";function c(e){const t=`https://${e}.${n}`;return(e="",n="")=>{const r=i.lM([a,n],"&");return i.lM([t+e,r],"?")}}const u=c("www"),l=c("app"),d=c("account"),h=c("redirect"),f=e.GrStaticUrl.toGrStaticUrl,p=`https://data.${n}`,g=`https://auth.${n}/v3`,m=`https://auth.${n}/v4`,_=`https://auth.${n}/v5`,b=`https://capi.${n}/api/configuration/cheetah/v1/settings`,v=`https://gateway.${n}/skills`,y=`https://capi.${n}`,w=`https://coda.${n}`,x=`wss://capi.${n}/freews`,E={production:/^(\w+\.)*superhuman\.com$/,qa:/^(\w+\.)*(pp-sh\.io|staging-superhuman\.com)$/};return{accountSubscription:d("/subscription"),accountSubscriptionAddBillingInfo:d("/admin/subscription","popup=add_billing_info"),adminAccountSubscription:d("/admin/subscription"),accountAdminSubscriptionAddBillingInfoToUngatedTrial:d("/admin/subscription","popup=ungated_trial"),app:l(),appPersonalDictionary:d("/customize"),homepage:u(),featuresSettings:d("/customize/features"),capi:x,capiStatic:x,capiGDocs:`wss://capi.${n}/gdocs`,dapi:p,cheetahSettings:b,skills:v,editorDictionary:l("/profile/dictionary"),desktop:u("/desktop"),dictionary:`https://capi.${n}/api/defs`,docs:l("/docs"),docsApi:`https://dox.${n}/documents`,newDoc:l("/docs/new"),tokens:`${m}/api`,auth:g,userOrAnonymous:`${g}/user/oranonymous`,userOrAnonymousV4:`${m}/api/userinfo`,userOrAnonymousV5:`${_}/api/userinfo`,authorize:`${m}/api/oauth2/authorize`,signin:u("/signin"),signup:u("/signup"),signupSuccess:u("/extension/signup/success"),dialect:`${y}/api/configuration/language/v1/settings`,passport:`https://gateway.${n}/passport/api/v1/passport`,fbSignin:u("/signin","fromExtensionFb=true"),fbSignup:u("/signup","fromExtensionFb=true"),googleSignin:u("/signin","fromExtensionGoogle=true"),googleSignup:u("/signup","fromExtensionGoogle=true"),resetPassword:u("/resetpassword"),newFelog:r,vmetrics:o,welcomeC:u("/extension-success"),afterInstall:u("/after_install_page/"),planComparison:u("/plans"),businessHomepage:u("/business"),businessPricing:u("/business/pricing"),businessStyleGuide:u("/business/styleguide"),businessBrandTones:u("/business/brand-tones"),uninstall:u("/extension-uninstall"),terms:u("/terms"),policy:u("/privacy-policy"),californiaPolicy:u("/privacy-policy#sectionSingleColumn_47y4NWiOf89wt12wcc6a74"),extensionSuccess:u("/extension-success"),firefoxPrivatePolicy:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/privacy/",dynamicConfigUrl:"https://config.extension.grammarly.com/dynamicConfig.json",pageConfigUrl:"https://config.extension.grammarly.com/browserplugin/config.json",grammarlyDomain:n,grammarlyProtocol:"https:",redirect:h("/redirect"),snippetsApi:`https://gateway.${n}/snippets/v1/snippets`,snippetsNew:d("/admin/snippets","action=create"),snippetsAdmin:d("/admin/snippets"),snippetsSettings:d("/customize/snippets"),knowledgeHubApi:`https://gateway.${n}/knowledge-hub/v1/institution`,settingsRegistryApi:`https://gateway.${n}/settings-registry/v1`,institutionAdminApi:`https://gateway.${n}/institution/api/institution/admin`,subscriptionApi:`https://subscription.${n}/api/v1`,suggestionsSettings:d("/customize/suggestions"),allSettings:d(),styleGuideSettings:d("/admin/style-guide"),writingStyleSettings:d("/admin/style-guide-writing-style"),brandTones:d("/admin/brand-tones"),grammarlyIdeasSelf:l("/ideas/grow/self"),grammarlyIdeasPeer:l("/ideas/grow/peer"),grammarlyIdeasSales:l("/ideas/sales"),iOSApp:"grammarly://home",iOSUpgrade:"grammarly://premium-instructions?deepLinkSource=safari",standWithUkraine:u("/stand-with-ukraine"),standWithUkraineBlockedUserPing:"https://rwsgfy.grammarly.com/stand-with-ukraine",tourGdocs:u("/tour-gdocs"),dataSharing:`https://gateway.${n}/privacy/v1/api/data-sharing`,specialOffer:`https://gateway.${n}/vito`,uphookHub:`https://gateway.${n}/uhub`,mise:`https://gateway.${n}/mise/api/v1`,codaApi:s,codaAgentDirectory:{apiUrl:s,webBaseUrl:w},assets:{assistantOnboardingTourGif:f("assets/assistant/assistant-onboarding-tour"),ownerActivationIPMHeader:f("assets/ipm/owner-activation-ipm-header"),graduationIpmSvg:f("assets/ipm/graduation-campaign-ipm"),writingProgressIpmGif:f("assets/ipm/writing-progress-ipm-header"),onboardingTour:{inlineSuggestionsPreviewImage:f("assets/onboarding/inline-suggestions-preview-image-v2.jpg"),inlineSuggestionsAnimation:f("assets/onboarding/inline-suggestions-v2.mp4"),clickToAcceptAnimation:f("assets/onboarding/click-to-accept-v2.mp4"),happyWritingAnimation:f("assets/onboarding/happy-writing-v2.mp4")},knowledgeShareOnboardingTour:{step1:f("assets/knowledgeShareOnboarding/ks-onboarding-step1.mp4"),step2:f("assets/knowledgeShareOnboarding/ks-onboarding-step2.mp4"),step3:f("assets/knowledgeShareOnboarding/ks-onboarding-step3.mp4")},touchTypist:{readyToApplySuggestionsAudio:f("assets/touchTypist/tt-ready-to-apply-suggestions-v1.mp3"),suggestionsAppliedAudio:f("assets/touchTypist/tt-suggestions-applied-v1.mp3")}},support:`https://support.${n}/hc/en-us/requests/new#/`,grammarlyEmployeesBugReportsUrl:"https://in-product.report.grammarly.io/v1/report",inviteMembers:d("/admin/members"),superhumanGoWelcome:{production:"https://superhuman.com/superhuman-go-intro",qa:"https://superhuman.com/superhuman-go-intro?genesisLaunch=true"},superhumanDomains:E,isSuperhumanDomain:e=>E.production.test(e)||E.qa.test(e),socialAuth:{google:"https://accounts.google.com",facebook:"https://www.facebook.com/login",apple:"https://appleid.apple.com/auth"}}}}(r||(r={}))},28898:(e,t,n)=>{n.d(t,{O:()=>h,P:()=>d});var r=n(13391),i=n(97833),o=n(97231),s=n(44257),a=n(36897),c=n(8058),u=n(72532),l=n(27194);class d{static getInstance(){if(void 0===this._instanceShared)throw new Error("shared Env not inited yet");return this._instanceShared}static initShared(e){if(void 0!==this._instanceShared)throw new Error("shared Env already inited");this._instanceShared=e}constructor(e,t=r.h.create(!1),n=r.h.create(!1)){this._enableHistoryLoggerInProd=t,this._enableAdvancedHistoryLoggerInProd=n,this.enableHistoryLoggerInProd=(e,t)=>{e&&!this._enableHistoryLoggerInProd.get()?(console.debug("Debug reports have been enabled",t),this._enableHistoryLoggerInProd.set(!0)):!e&&this._enableHistoryLoggerInProd.get()&&(console.debug("Debug reports have been disabled",t),this._enableHistoryLoggerInProd.set(!1))},this.enableAdvancedHistoryLoggerInProd=(e,t)=>{e&&!this._enableAdvancedHistoryLoggerInProd.get()?(console.debug("Advanced logging has been enabled",t),this._enableAdvancedHistoryLoggerInProd.set(!0)):!e&&this._enableAdvancedHistoryLoggerInProd.get()&&(console.debug("Advanced logging has been disabled",t),this._enableAdvancedHistoryLoggerInProd.set(!1))};const i=e.testArgs,a=i&&i.processEnv?i.processEnv:s.y.fromBrowserify(),c=s.e.getTargetEnv(a);this._initLogger(e,c);const u=(0,o.pM)(e.browser,e.extensionType,e.deploymentType,e.context,a,c,e.browserInfo);this.context=e.context,this.config=u}_initLogger(e,t){const n={...e.historyLoggerExtraArgs,enableInProd:this._enableHistoryLoggerInProd.view(),enableAdvancedInProd:this._enableAdvancedHistoryLoggerInProd.view()};this.historyLogsService=new i.Hz(n);const r="prod"!==t||"cs"!==e.context,o={create:(e,t)=>new c.x(e,{writer:new l.n,filterFn:r?e=>!0:(0,u.x)(a.in.ERROR)},this.historyLogsService,t)};this.logger=o}}function h(){return d.getInstance()}},90595:(e,t,n)=>{n.d(t,{K:()=>d});var r=n(12663),i=n(23162),o=n(24196),s=n(27982),a=n(11660),c=n(21080),u=n(24002),l=n(27395);const d={...r.C,...l.D,...u.K,...s.K,...o.Nl,...a.K,...c.E,StandWithUkraineGrammarlySuspended:new i.Cc("standWithUkraineExtensionSuspended","enabled"),StandWithUkraineTheme:new i.Cc("standWithUkraineExtensionTheme","enabled"),StudentsOFEGdocs:new i.Cc("citations_rollout_gdocs","enabled"),StudentsOFEInternal:new i.Cc("citations_rollout_internal","enabled"),CitationBuilder:new i.Cc("citation_builder","enabled"),CitationBuilderEditing:new i.Cc("citation_builder_editing","enabled"),CitationBuilderManualInvocation:new i.Cc("citation_builder_manual_invocation","enabled"),ShowPerformanceCard:new i.Cc("extension_show_performance_card","enabled"),ExtensionDebugReport:new i.Cc("extension_debug_report","enabled"),SduiBulkDismiss:new i.Cc("sdui_bulk_dismiss","enabled"),TrackSiblingDataForGMail:new i.Cc("extension_track_sibling_data_for_gmail","enabled"),FixGmailHouseCat:new i.Cc("gmail_housecat_memory_leak_fix","enabled"),KnowledgeHubGdocs:new i.Cc("knowledge_hub_gdocs","enabled"),KnowledgeHubGmail:new i.Cc("knowledge_hub_gmail","enabled"),KnowledgeHubSlack:new i.Cc("knowledge_hub_slack","enabled"),KnowledgeHubWord:new i.Cc("windowsextension_knowledge_hub_word","enabled"),SlackUseInsertHTML:new i.Cc("extension_slack_use_insert_html"),KeyboardShortcut:new i.Cc("extension_keyboard_shortcut","enabled"),EnableFirstVisibleHighlightTracking:new i.Cc("extension_track_first_visible_highlight","enabled"),KnowledgeHubCheetahIntegration:new i.Cc("gbgo_knowledge_share_web","enabled"),GdocsMultiColumnAllCombinations:new i.Cc("gdocs_canvas_multicolumn_compare_all_combination","enabled"),GdocsRefactorDomQuery:new i.Cc("gdocs_refactor_dom_query","enabled"),GDocsUseStackToStoreParentClip:new i.Cc("gdocs_use_stack_to_store_parent_clip","enabled"),GdocsReturnAllRects:new i.Cc("gdocs_return_all_rects","enabled"),SuggestionDeliveryAutoApply:new i.Cc("suggestion_delivery_autoapply_extension_gate_23q3","enabled"),IndianEnglishDialect:new i.Cc("indian_english_dialect","enabled"),IndianEnglishDialectInternal:new i.Cc("indian_english_dialect_internal","enabled"),CheetahFeatureFlagCompose:new i.Cc("cheetah_extension_feature_flag_compose","enabled"),CheetahFeatureFlagRewrite:new i.Cc("cheetah_extension_feature_flag_rewrite","enabled"),CheetahFeatureFlagInlineRewrite:new i.Cc("cheetah_extension_feature_flag_inline_rewrite","enabled"),CheetahFeatureFlagMagicRewrite:new i.Cc("cheetah_extension_feature_flag_magic_rewrite","enabled"),CheetahFeatureFlagQuickReply:new i.Cc("cheetah_extension_feature_flag_quick_reply","enabled"),CheetahFeatureFlagInlineQuickReply:new i.Cc("cheetah_extension_feature_flag_inline_quick_reply","enabled"),CheetahFeatureFlagGDocsInlineRewrites:new i.Cc("cheetah_extension_feature_flag_gdocs_inline_rewrites","enabled"),CheetahFeatureFlagOnboarding:new i.Cc("cheetah_extension_feature_flag_onboarding","enabled"),CheetahStudentsOnboarding:new i.Cc("ggo_students_onboarding","enabled"),CheetahStudentBTS:new i.Cc("ggo_student_bts","enabled"),CheetahStudentPromptsInternal:new i.Cc("ggo_student_prompts_internal","enabled"),GDocsTextCorruptionValidateTextBeforeAlertApply:new i.Cc("gDocs_tc_validate_text_before_alert_apply","enabled"),GDocsGetFormatMap:new i.Cc("gdocs_get_format_map","enabled"),NonGDocsGetFormatMap:new i.Cc("extension_get_format_map","enabled"),SupportMoreStyle:new i.Cc("extension_support_more_style","enabled"),GDocsUseVisibleLayoutRoot:new i.Cc("gdocs_use_visible_layout_root"),GDocsUnloadIfInitArgsChanged:new i.Cc("gdocs_unload_when_init_args_changed"),GDocsDetectDocModeChangeByLayoutRootListener:new i.Cc("gdocs_detect_dom_mode_change_by_layout_root"),Iterable:new i.Cc("iterable_gate_ext","enabled"),IterableGDocsSidebarInitializedTrigger:new i.Cc("iterable_gate_gdoc_sidebar_initialized_ext","enabled"),IterableUserSessionInitializedTrigger:new i.Cc("iterable_gate_user_session_initialized_ext","enabled"),NonGDocsFirstAlertLookedAtTrigger:new i.Cc("iterable_gate_non_gdocs_first_alert_looked_at_ext","enabled"),InkwellSubscribeToSecureKeyRequests:new i.Cc("extension_inkwell_communication","enabled"),SalesforceCK4RichTextFix:new i.Cc("salesforce_ck4_richtext_fix","enabled"),IterableShortPauseInTypingTrigger:new i.Cc("iterable_gate_short_pause_in_typing_ext","enabled"),IterableMediumPauseInTypingTrigger:new i.Cc("iterable_gate_medium_pause_in_typing_ext","enabled"),IterableLongPauseInTypingTrigger:new i.Cc("iterable_gate_long_pause_in_typing_ext","enabled"),IterableEngagedByAlertsAcceptedTrigger:new i.Cc("iterable_gate_alerts_accepted_ext","enabled"),IterableTriggerFromCustomPayload:new i.Cc("iterable_trigger_from_custom_payload_ext","enabled"),IterableTargetDomain:new i.Cc("iterable_target_domain_ext","enabled"),IterableMetrics:new i.Cc("iterable_metrics_ext","enabled"),IterableTriggerMetrics:new i.Cc("iterable_trigger_metrics_ext","enabled"),IterableLogs:new i.Cc("iterable_logs_ext","enabled"),IterableCooldownAndImpressions:new i.Cc("iterable_cooldown_and_retry_ext","enabled"),IterableGlobalCooldown:new i.Cc("iterable_global_cooldown_ext","enabled"),IterableHideIPMOnPopupStateChange:new i.Cc("iterable_hide_ipm_on_popup_state_change_ext","enabled"),SessionStorageLogsBackup:new i.Cc("session_storage_logs_backup","enabled"),SduiPopoverNotifications:new i.Cc("sdui_popover_manager_ext","enabled"),TextChangeBufferUseLegacy:new i.Cc("text_change_buffer_use_legacy_3","enabled"),TextChangeBufferDontFlushOnApply:new i.Cc("text_change_buffer_dont_flush_on_apply_1","enabled"),DontSyncAlertApplicationsWithInlineMode:new i.Cc("dont_sync_alert_applications_with_inline_mode","enabled"),KnowledgeEngineSearchV2Alpha:new i.Cc("knowledge_engine_search_v2alpha","enabled"),HideReportBugByGrammarlyEmployeeFeature:new i.Cc("hide_report_bug_by_grammarly_employee_feature","enabled"),ExtensionFeatureFlagCAPIClientStorage:new i.Cc("extension_feature_flag_capi_client_storage","enabled"),ExtensionFeatureFlagCAPIClientStorageCleanup:new i.Cc("extension_feature_flag_capi_client_storage_cleanup","enabled"),ExtensionFeatureFlagCAPIClientStorageLogWarnings:new i.Cc("extension_capi_client_storage_log_warnings","enabled"),ExtensionFeatureFlagCAPIClientStorageRunCleanupRequests:new i.Cc("extension_capi_client_storage_run_cleanup_requests","enabled"),CAPIDistinctConnectionStatus:new i.Cc("extension_capi_distinct_connection_status","enabled"),ZendeskTransformReplacementOnlyForString:new i.Cc("extension_zendesk_transform_replacement_only_for_string","enabled"),GDocsInitGbuttonInsideCommentsField:new i.Cc("gdocs_init_gbutton_inside_comments_field","enabled"),GDocsCreateRichText:new i.Cc("gdocs_create_rich_text","enabled"),GDocsFormatGetFontFamily:new i.Cc("gdocs_format_get_font_family","enabled"),GDocsFormatGetColor:new i.Cc("gdocs_format_get_color","enabled"),GDocsAlignBasicStyleForTextDiff:new i.Cc("gdocs_align_basic_style_for_text_diff","enabled"),GDocsReturnAppliedForNonSuccess:new i.Cc("gdocs_return_applied_for_non_success","enabled"),GDocsReturnAppliedForAll:new i.Cc("gdocs_return_applied_for_all","enabled"),GDocsCheckTextForSuggestionMode:new i.Cc("gdocs_check_text_for_suggestion_mode","enabled"),GDocsNoDeleteEventForSuggestionMode:new i.Cc("gdocs_no_delete_event_for_suggestion_mode","enabled"),GDocsUseSelectionServiceForSuggestionMode:new i.Cc("gdocs_use_selection_service_suggestion_mode","enabled"),ExtensionA11yUIFixes:new i.Cc("extension_a11y_ui_fixes","enabled"),AutocorrectKeydownCaptureUserInput:new i.Cc("extension_autocorrect_keydown_capture_user_input","enabled"),AutocorrectAllowCaptureNonTrustedUserEvents:new i.Cc("extension_autocorrect_allow_capture_not_trusted_user_events","enabled"),DispatchDeltaDeleteEvent:new i.Cc("extension_dispatch_deleta_delete_event","enabled"),DiscordTransformInsertToReplace:new i.Cc("extension_discord_transform_insert_to_replace","enabled"),DiscordExecComandReplacementService:new i.Cc("extension_discord_exec_comand_replacement","enabled"),DiscordDelayAfterReplacementInBatch:new i.Cc("extension_discord_delay_after_replacement_in_batch","enabled"),ReplacementExecutionTimeoutValidation:new i.Cc("extension_replacement_execution_timeout_validation","enabled"),ValidateTextInsertionAtCursor:new i.Cc("extension_validate_text_insertion_at_cursor","enabled"),CheetahSelectionContextUpdates:new i.Cc("cheetah_selection_context_updates","enabled"),CheetahSelectionContextUpdatesServer:new i.Cc("cheetah_selection_context_updates_server","enabled"),UseBodyToGetViewportDimentions:new i.Cc("extension_use_body_to_get_viewport_dimentions","enabled"),CLEditorIntegration:new i.Cc("extension_cleditor_integration","enabled"),GOSRollout:new i.Cc("extension_gos_rollout","enabled"),GOSTelemetry:new i.Cc("extension_gos_telemetry","enabled"),CentralizeStopEventPropagation:new i.Cc("extension_centralize_stop_event_propagation","enabled"),CollectDataForPreserveFormatting:new i.Cc("extension_collect_data_for_preserve_formatting","enabled"),FormattingUseBatchWhenHaveListItems:new i.Cc("extension_preserve_formatting_skip_list_items","enabled"),FormattingReplaceEmptyStringToNonBreakingSpaceEntity:new i.Cc("extension_formatting_support_continuous_white_spaces","enabled"),GDocsCollectLayoutRenderingStats:new i.Cc("gdocs_collect_layout_rendering_stats","enabled"),GDocsInternalsFilterStrikethrough:new i.Cc("gdocs_internals_filter_strikethrough","enabled"),GDocsTrackUnderline:new i.Cc("gdocs_track_underline","enabled"),GDocsTrackStrikeThrough:new i.Cc("gdocs_track_strikethrough","enabled"),GDocsInternalsFilterCodeBlocks:new i.Cc("gdocs_internals_filter_code_blocks","enabled"),GDocsDebounceDataRendering:new i.Cc("gdocs_debouncing_data_rendering","enabled"),GDocsExtractLinkFromGoogleInternals:new i.Cc("gdocs_extract_link_from_internals","enabled"),GDocsExtractDocumentInternals:new i.Cc("gdocs_extract_document_internals","enabled"),GDocsExtractSuggestionObjectsWithPath:new i.Cc("gdocs_extract_suggestion_objects_with_path"),GDocsretryExtractAnnotationAfterOneSecond:new i.Cc("gdocs_retry_extract_annotation_after_one_second"),GDocsRetryExtractAnnotation100Times:new i.Cc("gdocs_retry_extract_annotation_100_times"),GDocsExtractLinkInternalsByPath:new i.Cc("gdocs_extract_link_internals_by_path"),TrackInstitutionIdToGnar:new i.Cc("extension_track_institution_id_to_gnar","enabled"),GdocsTrackFatalPopup:new i.Cc("extension_gdocs_track_fatal_popup","enabled"),VbarsGlobal:new i.Cc("vbars_global","enabled"),CheetahOnboardingContextProviderFix:new i.Cc("cheetah_extension_external_onboarding_context_provider_fix","enabled"),CheetahClearSDUIBufferOnReconnect:new i.Cc("cheetah_extension_clear_sdui_buffer_on_reconnect","enabled"),InactiveIntegration:new i.Cc("extension_inactive_integration","enabled"),UseApproximateTCValidation:new i.Cc("use_approximate_tc_validation","enabled"),GDocsCanUseTransformBeforeValidate:new i.Cc("gdocs_can_use_trasfrom_before_validate","enabled"),GDocsSendValidationInfoForBatchReplacement:new i.Cc("gdocs_send_validation_info_for_batch_replacement","enabled"),CanIgnoreNonWidthCharsForTCValidation:new i.Cc("extension_ignore_non_width_chars_for_tc_validaition","enabled"),GDocsCanIgnoreEndNewLine:new i.Cc("gdocs_ignore_end_new_line_for_tc_validaition","enabled"),GDocsWhitespaceSelectionRetry:new i.Cc("gdocs_whitespace_selection_retry","enabled"),OAuth2SelectiveLogout:new i.Cc("extension_oauth2_selective_logout","enabled"),OAuth2LastAuthnEventLogout:new i.Cc("extension_oauth2_last_authn_event_logout","enabled"),LockedUIRollout:new i.Cc("locked_ui_rollout"),DebouncedInlineCardUpdate:new i.Cc("extension_debounced_inline_card_update"),GDocsShouldCheckIfMappedSomething:new i.Cc("gdocs_map_result_must_mapped_some_text"),GDocsCheckIndexBoundaryWhenTranslateIndex:new i.Cc("gdocs_check_index_boundary_when_translate_index"),GDocsOnlyAddIncompleteResult:new i.Cc("gdocs_only_add_incomplete_result"),GDocsPageInputValidationForParser:new i.Cc("gdocs_page_input_validation_for_parser"),CheetahProfuseEventsTracking:new i.Cc("cheetah_profuse_events_tracking"),RedditReplacementDuplicationFix:new i.Cc("reddit_replacement_duplication_fix"),RedditNewUseOverlayLayout:new i.Cc("reddit_new_use_overlay_layout"),RedditUseClipboardForCreatePost:new i.Cc("extension_reddit_use_clipboard_for_create_post"),InstagramUseDispatchEventReplacementService:new i.Cc("instagram_use_dispatch_event_replacement_service"),FacebookUseDispatchEventReplacementService:new i.Cc("facebook_use_dispatch_event_replacement_service"),FacebookChatNoDelayBeforeSelection:new i.Cc("facebook_chat_no_delay_before_selection"),PrioritizeLeftNodeAsEndNode:new i.Cc("extension_prioritize_left_node_as_end_node"),SalesforceServiceConsoleReplacementFix:new i.Cc("salesforce_service_console_replacement_fix"),SalesforceFilterEmailThread:new i.Cc("salesforce_filter_email_thread"),SalesforceDetailsTextareaRichReplacementServiceDelay:new i.Cc("salesforce_details_textarea_replacement_service_delay"),StravaReplacementSelectionDelay:new i.Cc("extension_strave_replacement_selection_delay"),SkipParallelAutoFixReplacement:new i.Cc("skip_parallel_autofix_replacement"),AvoidExtraIntegrationControllerInitialization:new i.Cc("extension_avoid_extra_integration_controller_initialization"),OggyOnGOS:new i.Cc("extension_oggy_on_gos","enabled"),UnfixFast570:new i.Cc("extension_unfix_fast_570"),LatticeReplacementDuplicationFix:new i.Cc("lattice_replacement_duplication_fix"),NewSessionEndWithConnectionStats:new i.Cc("new_session_end_with_connection_stats"),GDocsReplacementValidateOnlyFullTextBeforeReplacement:new i.Cc("gdocs_replacement_only_validate_full_text_before_replacement"),GDocsReplacementValidateOnlyFragmentText:new i.Cc("gdocs_replacement_only_validate_fragment_text"),GDocsCachingParserMiddleware:new i.Cc("gdocs_caching_parser_middleware"),OggyIframeWrappers:new i.Cc("extension_oggy_use_iframe_wrappers"),LoadAppActionsFromAppletCdn:new i.Cc("app_actions_applet_cdn_extension"),PerformanceScoreOggy:new i.Cc("performance_score_oggy"),SessionTimeout:new i.Cc("extension_session_timeout"),ConnectorGdocs:new i.Cc("extension_connector_gdocs"),ConnectorNonGdocs:new i.Cc("extension_connector_non_gdocs"),ServiceAvailabilityViewMetrics:new i.Cc("extension_service_availability_view_metrics"),ServiceAvailabilityTypingMetrics:new i.Cc("extension_service_availability_typing_metrics"),GDocsUseCanvasFocusedRule:new i.Cc("extension_gdocs_use_canvas_focused_rule"),GDocsExpireCommentIntegrationByChildCount:new i.Cc("extension_gdocs_expire_by_child_count"),FieldIntegrationManager:new i.Cc("extension_field_integration_manager"),CheetahExecReplacementOnlyWhenItsExists:new i.Cc("extension_cheetah_exec_replacement_only_when_its_exists"),SendChangesToCAPIAfterSequentialApply:new i.Cc("extension_send_changes_to_capi_after_sequential_apply"),GDocsTabSwitchFrequencyTracking:new i.Cc("gdocs_tab_switch_frequency_tracking"),DatabricksPerformanceMetrics:new i.Cc("extension_databricks_performance_metrics"),PersonalizedInsightsConsentPopup:new i.Cc("extension_personalized_insights_consent_onboarding"),PersonalizedInsightsEmailDomainAndSignature:new i.Cc("extension_personalized_insights_email_domain_and_signature"),DataSharing:new i.Cc("data_sharing_optin"),TrackLevenshteinDistanceForTextCorruption:new i.Cc("extension_track_levenshtein_distance_for_text_corruption"),TrackTextCorruptionDebugProductMetric:new i.Cc("extension_track_text_corruption_debug_product_metric"),TouchTypistInternal:new i.Cc("extension_touch_typist_internal"),TouchTypistRelease:new i.Cc("extension_touchtypist_release"),TouchTypistPartialTrigger:new i.Cc("extension_touchtypist_partial_trigger","enabled"),TouchTypistForcedBufferFlush:new i.Cc("extension_touchtypist_internal_dlp_bypass","enabled"),TSMintSdkRollout:new i.Cc("extension-ts-mint-sdk-rollout"),EnableDoubleWriteToMint:new i.Cc("extensions-enable-double-write-to-mint"),TSMintDeprecateGnar:new i.Cc("extension_deprecate_gnar"),UseMintSDKContainerId:new i.Cc("extension_mintsdk_container_id"),FetchSkills:new i.Cc("extension_fetch_skills"),GDocsParseSmartChipFragments:new i.Cc("gdocs_parse_smart_chip_fragments"),NewsNowSingleInstantiation:new i.Cc("newsnow_disable_multiple"),CanContainsPrivateFieldsInDocInfo:new i.Cc("extension_can_contains_private_fields_in_doc_info"),CleanupPageMapCanvas2dContext:new i.Cc("cleanup_page_map_canvas_2d"),InProductDiscountSpecialOffer:new i.Cc("extension_in_product_discount_m2_special_offer"),MapImageNodeForRichText:new i.Cc("map_image_node_for_rich_text"),PreventEmptySetContext:new i.Cc("extension_prevent_empty_set_context"),GDocsSendComments:new i.Cc("gdocs_send_comments"),TrackAlertProcessingPerformance:new i.Cc("extension_track_alert_processing_performance"),AlertProcessingOptimization:new i.Cc("extension_alert_processing_optimization"),CodaUseCSSTransformTranslateForUnderlinePosition:new i.Cc("coda_use_css_transform_translate_for_underline_position"),CodaHideUnderlineWhenAnimated:new i.Cc("coda_hide_underline_when_animated"),CodaIntegrateOuterElementsCloser:new i.Cc("coda_integrate_outer_elements_closer"),CodaHideGbuttonForDocumentTitle:new i.Cc("coda_hide_gbutton_for_document_title"),CodaPositionGbuttonIntoFixedContainer:new i.Cc("coda_position_gbutton_into_fixed_container"),GDocsSignUpPopupReactToUserState:new i.Cc("extension_gdocs_signup_popup_react_to_user_state"),FullySignedInExperienceViaTone:new i.Cc("fully_signedin_block_inline_cards_via_tone"),GDocsAllowToDetectAssistantInjectionMode:new i.Cc("extension_gdocs_allow_to_detect_assistant_injection_mode"),GDocsDetectSidebarTypeDynamically:new i.Cc("extension_gdocs_detect_sidebar_type_dynamically"),GDocsInviteNudge:new i.Cc("extension_gdocs_invite_nudge"),GDocsShareModalTracking:new i.Cc("extension_gdocs_share_modal_tracking"),AttributesTriggerFieldIntegration:new i.Cc("extension_integration_target_attributes"),OAuthCheckTokenServiceState:new i.Cc("extension_check_oauth_token_service_state"),OAuthTokenServiceStateFallback:new i.Cc("extension_oauth_token_service_state_fallback"),SnippetsTemplateVariables:new i.Cc("meg_snippets_dynamic_fields"),DomainClaimedUserCopyWithInstitutionDetails:new i.Cc("meg_domain_claimed_user_copy_with_institution_details"),TrackContainerIdFailures:new i.Cc("extension_track_container_id_failures"),AccountChooserOptionsApi:new i.Cc("account_chooser_options_api"),UseBlockListToConfigureFieldMinSizeForDefaultIntegrations:new i.Cc("extension_use_block_list_to_configure_field_min_size_for_default_integrations"),EnablePathTrackingForSessionEnd:new i.Cc("extension_enable_path_tracking_for_session_end"),LazyLoadSnippetsSearchTrees:new i.Cc("extensions_lazy_load_snippets","enabled"),ShowLegacyPlagiarismInSidePanel:new i.Cc("always_available_assistant_legacy_plagiarism"),GDocsVersionHistorySidebarSelector:new i.Cc("extension_gdocs_version_history_selector"),GoogleGroupsIntegration:new i.Cc("extension_google_groups_integration","enabled"),DisableGoogleFeedbackFormIntegration:new i.Cc("extension_disable_google_feedback_form_integration","enabled"),EnableIframesByDefault:new i.Cc("extension_iframe_default_enable","enabled"),UphookGnarEvents:new i.Cc("uphook-gnar-events","enabled"),DisableKixApp:new i.Cc("extension_disable_kix_app","enabled"),AgentRuntimeInternalDebug:new i.Cc("agent_runtime_internal_debug"),ExistingSelectionOptimization:new i.Cc("existing_selection_optimization","enabled"),IntegrationResultTracking:new i.Cc("extension_integration_result_tracking","enabled"),GDocsGeminiPreviewRendering:new i.Cc("extension_gdocs_gemini_preview_rendering"),CleanUxUiInternal:new i.Cc("clean_ux_ui_internal"),ExtensionGoOnboarding:new i.Cc("extension_go_onboarding","enabled"),ExtensionBugSubmissionForm:new i.Cc("extension_bug_submission_form","enabled"),EnableSuperhumanIntegration:new i.Cc("extension_enable_superhuman_integration"),WordPressGutenbergIframeIntegration:new i.Cc("extension_wordpress_gutenberg_iframe_integration"),CodaTransformDeleteReplacement:new i.Cc("extension_coda_transform_delete_replacement"),GDocsCanvasPrototypePatching:new i.Cc("extension_gdocs_late_canvas_patching"),CKEditor5UseBeforeInputForDeletion:new i.Cc("extension_ckeditor5_use_beforeinput_for_deletion"),GDocsCanvasExclusiveSelectionEnd:new i.Cc("extension_gdocs_exclusive_selection_end"),ToolbarIconTheme:new i.Cc("extension_toolbar_icon_theme","enabled"),SuperUnderlinesKillSwitch:new i.Cc("extension_super_underlines_kill_switch"),QuillJSVersionDetector:new i.Cc("extension_quilljs_version_detector"),OutreachCustomSlateEditor:new i.Cc("outreach_custom_slate_editor","enabled"),AiChatIntercept:new i.Cc("extension_ai_chat_intercept"),GbuttonShowFeedbackUi:new i.Cc("extension_gbutton_show_feedback_ui"),ResolveDetachedRangeOnReplace:new i.Cc("extension_resolve_detached_range_on_replace","enabled"),CookieOverflowRecovery:new i.Cc("extension_cookie_overflow_recovery","enabled"),RestoreScrollableAncestorsOnFocus:new i.Cc("extension_restore_scrollable_ancestors_on_focus","enabled"),GbuttonInNotionModal:new i.Cc("extension_enable_gbutton_in_notion_modal"),TipTapIntegration:new i.Cc("extension_tiptap_integration")}},52403:(e,t,n)=>{n.d(t,{F:()=>r});const r={ttl:(0,n(20905).LK)(30),useRefreshJitter:!0}},65309:(e,t,n)=>{n.d(t,{Ud:()=>i,a1:()=>o});var r=n(78767);const i=(0,r.DV)((()=>browser),(()=>self.browser)),o=(0,r.DV)((()=>browser),(()=>self.browser));self.chrome=self.chrome},99161:(e,t,n)=>{var r;n.d(t,{Tt:()=>r}),function(e){e.background="message:to-priv",e.sidePanelCloseStatus="side-panel-close-status",e.messageBusPort="message-bus-port"}(r||(r={}));var i,o;!function(e){e.OpenSubscriptionDialog="OPEN_SUBSCRIPTION_DIALOG",e.SetUserInfo="SET_USER_INFO",e.ReloadBgPage="RELOAD_BACKGROUND_PAGE",e.NetworkServiceRequest="NETWORK_SERVICE_REQUEST",e.NetworkServiceResponse="NETWORK_SERVICE_RESPONSE"}(i||(i={})),function(e){e[e.success=0]="success",e[e.successWithEmpty=1]="successWithEmpty",e[e.alreadyMigrated=2]="alreadyMigrated"}(o||(o={}))},33908:(e,t,n)=>{n.d(t,{Dl:()=>l,HX:()=>c,wp:()=>u});var r=n(38364),i=n(40594),o=n(99161),s=n(28951);const a=i.Y.create("Messaging.extension-api.content");class c{constructor(e,t,n,i,o){this.createPortConnection=e,this._bgIsWorking=t,this._extensionId=n,this._onRuntimeMessageFromBg=i,this._browserRuntimeSendMessage=o,this.kind="content-script-message-api",this._callbacks={},this._messageHelper=new s.t,this._disconnected=!1,this.broadcastBackground=async(e,t,n)=>{var i,o;const s=(0,r.M8)();n&&"function"==typeof n&&(this._callbacks[s]=n);try{if(!this.backgroundPort){if(!await this._bgIsWorking())throw new Error("lost connection to bg port");this.initPort(),a.trace("Content script connection was restored")}null===(i=this.backgroundPort)||void 0===i||i.postMessage({type:e,callid:s,content:t})}catch(n){if(!await this._bgIsWorking())return this._onDisconnect();try{this.initPort(),null===(o=this.backgroundPort)||void 0===o||o.postMessage({type:e,callid:s,content:t})}catch(n){throw a.error("failed to invoke postMessage() on bg port",n,{type:e,callid:s,content:t}),n}}},this.onRuntimeMessage=this._onRuntimeMessageFromBg,this._onRuntimeMessageHandler=async(e,t,n)=>{if(n({status:!0}),e.type===(0,s.E)()){if(!await this._bgIsWorking())return this._onDisconnect();this._onBgPortMessage(e.data),this.initPort()}},this._onBgPortMessage=({callid:e,content:t,type:n})=>{this._callbacks[e]?(this._callbacks[e](t),delete this._callbacks[e]):this._messageHelper.fire(n,t,(t=>{if(!this.backgroundPort)throw new Error("fail reply to bg page - connection lost");this.backgroundPort.postMessage({content:t,callid:e})}))},this._onDisconnect=async()=>{var e,t;if(null===(t=null===(e=this.backgroundPort)||void 0===e?void 0:e.removeMessageListeners)||void 0===t||t.call(e),this.backgroundPort=null,await this._bgIsWorking())return a.trace("BG SW is shutdown, but BG SW page is still available."),void this._messageHelper.fire("bgSW-shutdown",null);this._disconnected||(this._onRuntimeMessageFromBg.removeListener(this._onRuntimeMessageHandler),this._disconnected=!0,a.warn("Content script messaging went disconnected."),this._messageHelper.fire("contentScript-disconnected",null))},this.initPort(),this._onRuntimeMessageFromBg.addListener(this._onRuntimeMessageHandler)}initPort(){this.backgroundPort||(this.backgroundPort=this.createPortConnection(o.Tt.background),this.backgroundPort.onMessage(this._onBgPortMessage),this.backgroundPort.onDisconnect(this._onDisconnect))}listen(e,t){this._messageHelper.listen(e,t)}sendRuntimeMessage(e){return this._browserRuntimeSendMessage(e)}}function u(){self.addEventListener("update-window-size-gr",(e=>{const t=document.createElement("div");if(t.style.height="1px",e.detail&&e.detail.force){const e=setInterval((function(){document.body.appendChild(t),setTimeout((()=>{t.parentNode&&t.parentNode.removeChild(t)}),10)}),100);setTimeout((()=>clearInterval(e)),405)}}),!1),self.addEventListener("close-popup-gr",(()=>{self.close()}),!1)}function l(e){return async()=>{try{return await e(),!0}catch(e){return!1}}}},28951:(e,t,n)=>{n.d(t,{E:()=>o,t:()=>a});var r=n(16381);const i=n(40594).Y.create("extension-api.message"),o=()=>`cs-bg-runtime-${(0,r.pB)()}`,s=()=>{};class a{constructor(){this._listeners={},this._queue={},this.fire=(e,t,n=s,r)=>{const i=this._listeners[e]||[];i.length?i.forEach((e=>e(t,n,r))):(this._queue[e]=this._queue[e]||[],this._queue[e].push({content:t,callback:n,sender:r}))},this.unlisten=(e,t)=>{const n=this._listeners[e]||[],r=n.indexOf(t);-1!==r&&(1===n.length?delete this._listeners[e]:n.splice(r,1))},this.listenOnce=(e,t)=>{const n=(r,i,o)=>{this.unlisten(e,n),t&&t(r,i,o)};this.listen(e,n)},this.listen=(e,t)=>{this._listeners[e]=this._listeners[e]||[],-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t);const n=this._queue[e]||[];if(n.length){for(const e of n)try{t(e.content,e.callback,e.sender)}catch(e){i.error("exception during proccesing buffered messages",e)}delete this._queue[e]}}}}},4026:(e,t,n)=>{n.d(t,{Jt:()=>o,Ku:()=>c,Ne:()=>a,ZT:()=>h,cn:()=>i,cs:()=>d,k3:()=>s,on:()=>u});var r=n(31272);function i(e,t){if(e){if(-1===t.indexOf(" "))return e.classList.add(t);{const n=t.split(" ");for(let t=0;t<n.length;t++)e.classList.add(n[t])}}}function o(e,t){let n=e.parentNode;for(;null!==n;){if(c(n,t))return n;n=n.parentNode}return!1}function s(e){let t=e.parentNode;for(;null!==t;){if(a(t))return t;t=t.parentNode}return!1}function a(e){return"true"===e.contentEditable||"plaintext-only"===e.contentEditable}function c(e,t){if(!e)return!1;const n=e.matches||e.msMatchesSelector||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;return!!n&&n.apply(e,[t])}function u(e,t=null,n){return this.addEventListener(e,t,n),{off:()=>l.apply(this,[e,t,n])}}function l(e,t,n){this.removeEventListener(e,t||null,n)}function d(...e){return e.reduce(((e,t)=>e.concat((0,r.Kn)(t)?Object.keys(t).filter((e=>t[e])):t)),[]).filter((e=>Boolean(e))).join(" ")}function h(e,t={}){const n=document.createEvent("CustomEvent");n.initCustomEvent(e+"-gr",!0,!0,t),document.dispatchEvent(n)}},25693:(e,t,n)=>{n.d(t,{G1:()=>o,KK:()=>c,Lu:()=>u,bL:()=>i,ge:()=>a,j1:()=>s,t_:()=>l});var r=n(16381);const i=["facebook.com","messenger.com","work.fb.com","business.facebook.com"],o=["twitter.com","x.com"],s=e=>e.replace(/^www\./,"");function a(e){const t=e&&e.ownerDocument||document,n=t.location||t.defaultView.location;return n?s(n.hostname):""}function c(e){return(0,r.pZ)()&&/^about:/.test(e)?e:""===e?"":s(new URL(e).hostname)}const u=()=>/\/document\//.test(d())&&"docs.google.com"===a(),l=(e=d(),t=a())=>/\/document\/d\/.*$/.test(e)&&"docs.google.com"===t;function d(e){const t=e&&e.ownerDocument||document,n=t.location||t.defaultView.location;return n?n.pathname+n.search:""}},16381:(e,t,n)=>{n.d(t,{Am:()=>c,CB:()=>l,CO:()=>f,ED:()=>d,FN:()=>h,G2:()=>_,G6:()=>a,L6:()=>k,U8:()=>g,Um:()=>v,Vi:()=>w,bo:()=>b,hF:()=>E,i7:()=>s,jR:()=>y,kD:()=>u,n_:()=>x,oX:()=>m,pB:()=>i,pZ:()=>o,qs:()=>p});var r=n(97231);function i(){return r.Rd().appConfig.extensionId}function o(){return"firefox"===r.Rd().bundleInfo.browser}function s(){return"chrome"===r.Rd().bundleInfo.browser}function a(){return"safari"===r.Rd().bundleInfo.browser}function c(){return"safariIOSWebExtension"===r.Rd().bundleInfo.extensionType}function u(){return"edge"===r.Rd().bundleInfo.browser}function l(){return s()||u()}function d(){return r.Rd().systemInfo.os.isWindows}function h(){return"bg"===r.Rd().bundleInfo.context}function f(){return"popup"===r.Rd().bundleInfo.context}function p(){return r.Rd().bundleInfo.browser}function g(){return r.Rd().bundleInfo.extensionType}function m(){return r.Rd().bundleInfo.deploymentType}function _(){const e=r.Rd().bundleInfo.browser;return e.substr(0,1).toLocaleUpperCase()+e.slice(1)}function b(){return r.Rd().buildInfo.version}function v(){return r.Rd().appConfig.url}function y(){return r.Rd().appConfig.gnar.appName}function w(e="/"){return`https://${r.Rd().appConfig.url.grammarlyDomain}${e}`}function x(){try{return self.parent!==self}catch(e){return!0}}function E(){try{return self.top===self.self}catch(e){return!1}}function k(){return"undefined"!=typeof fetch}},19254:(e,t,n)=>{var r;n.d(t,{_x:()=>o,in:()=>s}),function(e){e.lessThan1Week="lessThan1Week",e.weekTo4Weeks="weekTo4Weeks",e.moreThan4weeks="moreThan4weeks",e.moreThan3Months="moreThan3Months"}(r||(r={}));const i={stats:"ex_perfstats",csInit:"ex_csInitPerf",viewInjection:"viewInjectionPerf"};function o(e){const{_tag:t,...n}=e;return{[i[e._tag]]:n}}var s;!function(e){e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(s||(s={}))},39963:(e,t,n)=>{n.d(t,{HS:()=>d,Tb:()=>l});var r=n(97231),i=n(40594),o=n(28898),s=n(78300),a=n(60378),c=n(24007);i.Y.create("lib.tracking.logger");let u;function l(){if(!u){const e=(0,o.O)().telemetryCallProvider;u=new a.M0(e.sendFelog,e.sendFelogUsageEvent,e.setUserInfo,e.setContainerId,r.Rd().appConfig.felog.sendUsageMetrics,function(){r.Rd().appConfig.felog.sendPerfMetricsType,0;return}(),e.sendFelogEvent,e.sendFelogCrashLogs,void 0,(()=>{var t;return null===(t=e.enableDataSharing)||void 0===t?void 0:t.call(e)}),void 0,e.sendFelogMetricEvent,e.sendFemetricsRate,e.startFemetricsTimer,e.endFemetricsTimer,e.sendFemetricsTimer)}return u}function d(e,t,n){e.addEventListener("error",(e=>{const n=(0,s.H)(e.error)&&e.error.message?e.error.message:e.message,r=(0,c.nG)({message:n,filename:e.filename,lineno:e.lineno,colno:e.colno},e.error);t(n,r)})),e.addEventListener("unhandledrejection",(e=>{let t;t=null!==e.reason?"string"==typeof e.reason?e.reason:(0,s.H)(e.reason)?e.reason.message:void 0:void 0;const r=(0,c.nG)({message:t},e.reason);n(t,r)}))}},95404:(e,t,n)=>{n.d(t,{$V:()=>g,JQ:()=>b,My:()=>T,OC:()=>x,QN:()=>l,Xc:()=>k,Z4:()=>R,g7:()=>E,jv:()=>I,s7:()=>C,sC:()=>f,wQ:()=>S});var r=n(87254),i=n(56863),o=n(62067),s=n(16381),a=n(38364);const c="%appName%",u={extensionSettingsToolbar:"%appName%SettingsToolbar",gdocsSidebarCardList:"%appName%AdvancedIssues",assistantCardList:"%appName%AdvancedIssues",extensionSettingsAssistant:"%appName%AssistantSettings",gdocsGoals:"%appName%AssistantGoals",extensionBusinessUphookPopup:"gb%appName%UphookPopup",gbExtensionSettingsToolbar:"gb%appName%SettingsToolbar",gbExtensionSettingsAssistant:"gb%appName%AssistantSettings",extensionGButton:"%appName%GButton",extPreviewsPopup:"%appName%PreviewsPopup",toneSuggestion:"%appName%ToneDetector",grammarlyGoPrompts:"%appName%GrammarlyGoPrompts",plagiarism:"%appName%_plagiarism_plagiarismView_premium"};function l(e,t){return{key:e,value:t}}function d(e,t){return l(e,t)}function h(e){return e.map((e=>[e.key,e.value].map(encodeURIComponent).join("="))).join("&")}function f(e,t){if(0===t.length)return e;const[n,r]=e.split("#"),i=n.includes("?");return[n,h(t)].join(i?"&":"?")+(r?`#${r}`:"")}function p(e){const t=[];var n,i;return void 0!==e.medium&&t.push(d("utm_medium",e.medium)),void 0!==e.source&&t.push(d("utm_source",e.source)),void 0!==e.campaign&&t.push(d("utm_campaign",(n=e.campaign,(null!==(i=u[n])&&void 0!==i?i:n).replace(c,((e,t)=>{const n=r.UA.getAppName((0,s.qs)(),(0,s.U8)(),(0,s.oX)());return 0===t?n:(0,a.kC)(n)}))))),e.clickToRun&&t.push(d("click_to_run","true")),t}function g(e){return p(e)}const m=l("fromExtension","true"),_=l("acr_values","idp:google"),b=()=>({acr_values:"idp:google"});function v(){var e;return(null===(e=self.origin)||void 0===e?void 0:e.includes("http"))?[l("closeWindow","true")]:[]}function y(e){return e?[l("prompt","login")]:[]}const w=e=>Object.entries(e).map((([e,t])=>({key:e,value:t}))),x=e=>Object.fromEntries(e.map((({key:e,value:t})=>[e,t]))),E=e=>g({medium:"internal",source:e.utmSource,campaign:`${(0,s.jR)()}-${e.utmCampaign}`});function k(e,t){const n={action:o.VP.SignUp,...e},r=(0,i.xW)(n);return f((0,s.Um)().signup,[...E(t),...r?w(r):[],...v(),m])}function C(e,t,n){const r={action:o.VP.SignIn,...e},a=(0,i.xW)(r);return f((0,s.Um)().signin,[...E(t),...a?w(a):[],...v(),...y(n),m])}function T(e,t){return f(e,[l("install_source",t)])}function S(e,t){return f(C(e,t),[_])}p({medium:"internal"})[0];const R=(e,t,n)=>f(e,[l("app_type","extension"),l("browser",(0,s.qs)()),...n?[l("domainCategory",n)]:[],...g({medium:"internal",source:"upHook",campaign:t})]);function I(e){return!!e&&/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+$/.test(e)}},38364:(e,t,n)=>{function r(){return self.chrome&&self.chrome.runtime&&self.chrome.runtime.lastError}function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function o(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}n.d(t,{M8:()=>o,Zk:()=>c,kC:()=>u,p6:()=>a,s6:()=>r});const s=["January","February","March","April","May","June","July","August","September","October","November","December"];function a(e){if(!e)return;const t=new Date(e);return"Invalid Date"!==t.toString()?s[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear():void 0}function c(e,t=10){setTimeout(e,t)}function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}},54167:(e,t,n)=>{n.d(t,{M:()=>i});var r=n(40594);class i{constructor(e){this._baseApi=e,this._log=r.Y.create("BaseMessageService"),this._initializedListenerEvents=new Set,this._listeners={},this._logError=e=>{this._log.error(`${i.name} handle an error: ${e.message}`)},this.on=(e,t)=>{var n;this._listeners[e]=null!==(n=this._listeners[e])&&void 0!==n?n:[],this._listeners[e].push(t),this._initializedListenerEvents.has(e)||(this._initializedListenerEvents.add(e),this._baseApi.listen(e,((...t)=>{var n;const r=null!==(n=this._listeners[e])&&void 0!==n?n:[];for(const e of r)try{e(...t)}catch(e){this._logError(e)}})))},this.once=(e,t)=>{const n=(...r)=>{this.off(e,n);try{t(...r)}catch(e){this._logError(e)}};this.on(e,n)},this.off=(e,t)=>{if(!this._listeners[e])return;const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1),0===this._listeners[e].length&&delete this._listeners[e]}}}},10238:(e,t,n)=>{n.d(t,{w:()=>i});var r=n(54167);class i extends r.M{constructor(e){super(e),this._api=e,this.sendBackground=(e,t)=>{try{this._api.broadcastBackground(e,t)}catch(e){this._logError(e)}}}}},15380:(e,t,n)=>{var r,i;n.d(t,{B:()=>r,I:()=>i}),function(e){let t;!function(e){e.disableOnTab="disableOnTab",e.reloadTab="reloadTab",e.showOnboardingDialog="showOnboardingDialog",e.hideGdocsSigninPopupMessage="hideGdocsSigninPopupMessage",e.sendCsLogsToPopup="sendCsLogsToPopup",e.requestCsLogsFromSidePanel="requestCsLogsFromSidePanel",e.sendCsLogsToSidePanel="sendCsLogsToSidePanel",e.downloadDebugReportsFromCS="downloadDebugReportsFromCS"}(t=e.Kind||(e.Kind={}))}(r||(r={})),function(e){let t;!function(e){e.sendCsLogs="sendCsLogs",e.sendSidePanelLogsToPopup="sendSidePanelLogsToPopup",e.requestSidePanelLogsFromPopup="requestSidePanelLogsFromPopup",e.brandingChanged="brandingChanged"}(t=e.Kind||(e.Kind={}))}(i||(i={}))},53966:(e,t,n)=>{var r;n.d(t,{I:()=>r}),function(e){e.rpcLegacyMessageName="cs-to-bg-rpc-1587687052565",e.rpcLegacyObservableName="cs-to-bg-observable-rpc-1587687052565"}(r||(r={}))},23472:(e,t,n)=>{n.d(t,{x:()=>r});const r="cs-to-bg-rpc-1557421403805";var i;!function(e){e.syncDevtoolsInitialStateWithTab="syncDevtoolsInitialStateWithTab"}(i||(i={}))},30603:(e,t,n)=>{var r;n.d(t,{U:()=>r}),function(e){e.rpcLegacyMessageName="cs-to-bg-static-capi-rpc-1668544923207",e.rpcLegacyObservableName="cs-to-bg-static-capi-observable-rpc-1668544923207"}(r||(r={}))},36798:(e,t,n)=>{n.d(t,{H:()=>d});var r=n(8867),i=n(90572),o=n(78767),s=n(87459),a=n(40594),c=n(78266),u=n(74399),l=n(25714);class d{constructor(e,t,n=a.Y.create("GenericObservableRpcClient"),r){this._transport=e,this._observableTransport=t,this._log=n,this._serverId=r,this._calls=new Map,this._subscribeRelatedCalls=new Map,this._observables=new Map,this._subscribers=new Map,this._transportSubscription=(0,l.s8)(this._transport.inbound).pipe((0,i.h)(c.ZQ)).subscribe((e=>{this._processResponse(e)})),this._observableTransportSubscription=(0,l.s8)(this._observableTransport.inbound).pipe((0,i.h)(c.ZQ)).subscribe((e=>{this._processObservableMessage(e)})),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_processResponse(e){const t=this._calls.get(e.id);if(t)try{if("err"in e)t.reject(e.err);else if(c.JL.isObservableResult(e))try{const n=new r.y((t=>this._createSubscribeHandler(e.subscribableId,t)));this._observables.set(e.subscribableId,n),t.resolve(n)}catch(t){this._observables.delete(e.subscribableId)}else t.resolve(this.transformResult(e.res))}finally{this._calls.delete(e.id)}else this._log.warn(`received rpc call response for unregistered call ${e.id}`)}transformResult(e){return e}_processObservableMessage(e){if("subscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id)}else this._log.warn(`received rpc call subscribed response for unregistered subscribe call ${e.id}`)}else if("unsubscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id),this._subscribers.delete(e.id)}else this._log.warn(`received rpc call unsubscribed response for unregistered unsubscribe call ${e.id}`)}else if("next"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.next(e.next):this._log.warn(`received observable next message for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("complete"in e)try{const t=this._subscribers.get(e.subscriptionId);t?(t.subscriber.complete(),this._subscribers.delete(e.subscriptionId)):this._log.warn(`received observable complete for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("err"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.error(e.err):this._log.warn(`received observable error for unregistered subscription  ${e.subscriptionId}`)}finally{this._subscribers.delete(e.subscriptionId)}else if("subErr"in e){const t=this._subscribeRelatedCalls.get(e.id);try{const n=this._subscribers.get(e.id);n?n.subscriber.error(e.subErr):this._log.warn(`received subscription error response for unregistered call ${e.id}`)}finally{t&&(t.reject(e.subErr),this._subscribeRelatedCalls.delete(e.id)),this._observables.delete(e.subscribableId),this._subscribers.delete(e.id)}}else if("ping"in e)try{this._observables.get(e.ping)?this._observableTransport.outbound({pong:e.ping}):this._log.warn(`received ping for unregistered observable ${e.ping}`)}finally{(0,o.EI)()}}_handleCall(e,t){let n=o.iy.create();for(;this._calls.has(n);)n=o.iy.create();const r=s.O.createCompletionSource();this._calls.set(n,r);const i=t.map((e=>(0,u.R)(e)?e.toJSON():e));return this._transport.outbound({id:n,method:e,args:i,serverId:this._serverId}),r.promise}_createSubscribeHandler(e,t){let n=o.iy.create();for(;this._subscribeRelatedCalls.has(n);)n=o.iy.create();const r=s.O.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscribableId:e,action:"subscribe"}),this._subscribers.set(n,{subscribableId:e,subscriber:t}),()=>{this._handleUnsubscribe(n,e)}}_handleUnsubscribe(e,t){let n=o.iy.create();for(;this._subscribeRelatedCalls.has(n);)n=o.iy.create();const r=s.O.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscriptionId:e,subscribableId:t,action:"unsubscribe"}),this._subscribers.delete(e),r.promise}dispose(){for(const e of this._observables.keys())this._observableTransport.outbound({id:o.iy.create(),subscribableId:e,action:"dispose"});this._observables.clear(),this._transportSubscription.unsubscribe(),this._observableTransportSubscription.unsubscribe(),this._calls.clear(),this._subscribeRelatedCalls.clear()}}},46649:(e,t,n)=>{n.d(t,{X:()=>o});var r=n(78767),i=n(87459);class o{constructor(e,t){this._transport=e,this._log=t,this._calls=new Map,this._sub=this._transport.inbound.subscribe({next:e=>{var t;const n=this._calls.get(e.id);if(n)try{"err"in e?n.reject(e.err):n.resolve(e.res)}finally{this._calls.delete(e.id)}else null===(t=this._log)||void 0===t||t.warn(`received rpc call response for unregistered call ${e.id}`)}}),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_handleCall(e,t){let n=r.iy.create();for(;this._calls.has(n);)n=r.iy.create();const o=i.O.createCompletionSource();return this._calls.set(n,o),this._transport.outbound({id:n,method:e,args:t}),o.promise}dispose(){this._sub.unsubscribe()}}},78266:(e,t,n)=>{function r(e){return"tunnel"!==e.tag}var i;n.d(t,{JL:()=>i,ZQ:()=>r}),function(e){e.isSubscribe=e=>"action"in e.data&&"subscribe"===e.data.action,e.isUnsubscribe=e=>"action"in e.data&&"unsubscribe"===e.data.action,e.isDispose=e=>"action"in e.data&&"dispose"===e.data.action,e.isPong=e=>"pong"in e.data,e.isPing=e=>"ping"in e.data,e.isObservableResult=e=>"subscribableId"in e}(i||(i={}))},74399:(e,t,n)=>{n.d(t,{R:()=>i});const r=Symbol();function i(e){return Boolean(e)&&e._tag===r}},15362:(e,t,n)=>{n.d(t,{aT:()=>s,he:()=>r,pN:()=>i,uS:()=>o});const r=Object.assign({},{},{common:{enabledDefs:!1,historyLoggerEnabledUntil:null,historyLoggerEnabled:!1,advancedHistoryLoggerEnabledUntil:null,advancedHistoryLoggerEnabled:!1,isDebugMenuVisible:!1,isEnhancedScreenReaderUXSupported:!1,knowledgeHubSettings:{enabled:!0,onboardingSeen:!1,suggestedTermOnboardingSeen:!1},alwaysAvailableAssistantSettings:{},touchTypistState:{accessibilityOnboardingAlertsCount:0,userAcceptedCount:0,lastUserAcceptedAt:""},touchTypistSettings:{enabled:!0,hotkey:"Tab",snoozedUntil:null},aiChatInterceptState:{}},field:{}}),i={id:0,url:""},o={stage:"installed"},s={valid:!1}},86130:(e,t,n)=>{n.d(t,{cS:()=>r});const r={source:n(2693).c.local,version:"0",newRichTextFieldsEnabled:!0,fluidDisabledForFirefox:!1,fluidDisabledForSafari:!1,fullSentenceRewritesDisabled:!1,overrideKey:"dynamicConfigOverrideKey",ungatingRenewalNotificationEnabled:!1,quillJSCatchAllDisabled:!1}},2693:(e,t,n)=>{var r;n.d(t,{c:()=>r}),function(e){e.empty="empty",e.local="local",e.server="server",e.localOverride="localOverride"}(r||(r={}))},19724:(e,t,n)=>{var r,i;n.d(t,{F:()=>r,n:()=>i}),function(e){e.anonymous="anonymous",e.registered="registered",e.premium="premium",e.business="business",e.edu="edu",e.ngo="ngo",e.k12="k12",e.gov="gov"}(r||(r={})),function(e){function t(e){return!e.anonymous&&e.premium}function n(e){var t;return["BUSINESS","NGO","GOV"].includes((null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)||"")}function i(e){return!!e.institutionInfo}function o(e){var t;return"EDU"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function s(e){var t;return"K12"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function a(e){var t;return"NGO"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function c(e){var t;return"GOV"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}e.getType=function(e){return i(e)?a(e)?r.ngo:o(e)?r.edu:c(e)?r.gov:s(e)?r.k12:r.business:e.premium?r.premium:e.anonymous?r.anonymous:r.registered},e.isFree=function(e){return!e.anonymous&&!e.premium},e.isPremium=t,e.isFreeTrial=function(e){return!!(t(e)&&e.customFields&&e.customFields.frontend_premiumTrialEndDate)&&new Date<new Date(e.customFields.frontend_premiumTrialEndDate)},e.getUserRole=function(e,t){var n;return null===(n=e.roles)||void 0===n?void 0:n.find((e=>e.type===t))},e.isEdcBlocked=function(e){return!!e.edc&&!e.edc.compliant},e.isDocsDisabled=function(e){var t,n;return null!==(n=null===(t=e.editorFeatures)||void 0===t?void 0:t.docsDisabled)&&void 0!==n&&n},e.hasRole=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_role&&""!==e.customFields.frontend_role)},e.hasSoundFluentGoals=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_soundFluent&&""!==e.customFields.frontend_soundFluent)},e.hasPrimaryLanguage=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_primaryLanguage&&""!==e.customFields.frontend_primaryLanguage)},e.isBusinessAdmin=function(e){var t;return Boolean(n(e)&&(null===(t=null==e?void 0:e.institutionInfo)||void 0===t?void 0:t.admin))},e.shouldUserSeeLegacyGBBranding=function(e,t){return n(e)&&["BUSINESS","ENTERPRISE"].includes(t)},e.doesUserBelongToBusinessInstitution=n,e.doesUserBelongToInstitution=i,e.doesUserBelongToEDUInstitution=o,e.doesUserBelongToK12Institution=s,e.doesUserBelongToNGOInstitution=a,e.doesUserBelongToGOVInstitution=c,e.isClaimed=function(e){return e.groups.includes("claimed-invitation")};e.isGrammarlyEmployee=function(e){var t;return e.email.endsWith("@grammarly.com")&&624392205===(null===(t=e.institutionInfo)||void 0===t?void 0:t.id)},e.isTestUser=function(e){return e.email.endsWith("@bh.exacttarget.com")},e.isConsumerUser=function(e){return!i(e)},e.defaultUser={anonymous:!0,groups:[],id:"",premium:!1,isTest:!1,settings:{},subscriptionFree:!1,type:"anonymous",email:"",registrationDate:(new Date).toString(),firstName:"",lastName:""}}(i||(i={}))},39020:(e,t,n)=>{function r(e,t){return[].concat(...e.map(t))}function i(e,t){return e.filter((e=>!!e)).join(t)}n.d(t,{VS:()=>r,lM:()=>i})},36769:(e,t,n)=>{n.d(t,{Cq:()=>i});class r extends Error{constructor(e){super(`Assertion failed: ${e?"string"==typeof e?e:e():"(unnamed)"}`)}}function i(e,t){if(null==e)throw new r((()=>t?`Expected ${t} to be non-null`:"Expected non-null"));return e}},53481:(e,t,n)=>{function r(e){return new Proxy({},{get(t,n){const r=e[n];return r&&"function"==typeof r?r.bind(e):void 0}})}n.d(t,{a:()=>r})},82853:(e,t,n)=>{n.d(t,{P:()=>r});class r{constructor(e){if(this._capacity=e,this._start=0,this._end=0,this._isFull=!1,e<0)throw new Error(`Invalid capacity ${e}`);this._buffer=new Array(e),0===e&&(this._isFull=!0)}get size(){return this._isFull?this._buffer.length:(this._end-this._start+this._buffer.length)%this._buffer.length}get capacity(){return this._capacity}get isEmpty(){return 0===this.size}get isFull(){return this._isFull}get head(){return this.isEmpty?null:this._buffer[this._start]}get tail(){return this.isEmpty?null:this._buffer[0===this._end?this.capacity-1:this._end-1]}enqueue(e){if(0===this.capacity)return null;let t=null;return this.isFull&&(t=this._buffer[this._start],this._startInc()),this._buffer[this._end]=e,this._endInc(),this._start===this._end&&(this._isFull=!0),t}dequeue(){if(this.isEmpty)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this._startInc(),this._isFull=!1,e}delete(e){const t=this._buffer.indexOf(e);if(t>=0){if(t<this._end){for(let e=t;e<this._end-1;e++)this._buffer[e]=this._buffer[e+1];this._buffer[--this._end]=null}else{for(let e=this._start;e<t;e++)this._buffer[e+1]=this._buffer[e];this._buffer[this._start]=null,this._startInc()}return this._isFull=!1,!0}return!1}_startInc(){this._start++,this._start===this.capacity&&(this._start=0)}_endInc(){this._end++,this._end===this.capacity&&(this._end=0)}clear(){this._buffer=new Array(this.capacity),this._start=this._end=0,this.capacity>0&&(this._isFull=!1)}toArray(){let e;return e=this.isEmpty?[]:this._start<this._end?this._buffer.slice(this._start,this._end):this._buffer.slice(this._start,this.capacity).concat(this._buffer.slice(0,this._end)),e}resize(e){if(e===this.capacity)return;if(e<0)throw new Error(`Invalid newCapacity ${e}`);let t=this.toArray();e>=this.size?(t.length=e,this._end=this.size,this._isFull=!1):(t=e?t.slice(-e):[],this._end=e,this._isFull=!0),this._buffer=t,this._start=0,this._capacity=e}}},78300:(e,t,n)=>{function r(e){return"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message}n.d(t,{H:()=>r})},78767:(e,t,n)=>{n.d(t,{DV:()=>d,EI:()=>h,HO:()=>_,Nf:()=>g,P2:()=>b,Vo:()=>w,X0:()=>p,XD:()=>v,cq:()=>a,fQ:()=>f,fS:()=>o,hr:()=>E,hz:()=>m,iy:()=>x,vE:()=>u,wU:()=>l,xB:()=>s});var r=n(9662),i=n(44675);const o=r.q;class s{constructor(e){this._getFallbackValue=e}init(e){if(void 0!==this._value)throw new Error("Global value already initialized.");this._value=e}get(){if(void 0===this._value){if(void 0===this._getFallbackValue)throw new Error("Global value not initialized and no fallback value provided.");this._value=this._getFallbackValue()}return this._value}}function a(e,t){return e.some((e=>e===t))?t:void 0}class c extends Error{constructor(e){super(`Matching not exhaustive: unexpected value ${JSON.stringify(e)}`)}}function u(e){throw new c(e)}function l(e){if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?void 0:t}return"number"==typeof e?e:void 0}function d(e,t){try{return e()}catch(e){return t(e)}}function h(){}function f(e){return!!e}function p(e){return!e}function g(e){return null!=e}function m(e){let t,n=!1;return(...r)=>(n||(n=!0,t=e(...r)),t)}function _(e,t,n){const r=new Set;let i;return(...o)=>{const s=t(...o);return r.has(s)||(r.add(s),i=e(...o)),null==n||n(...o),i}}function b(e,t){let n,r,o=!0;function s(e,n){return o&&(o=!1,r=(0,i.II)(),setTimeout((()=>{try{r.resolve(t(...n))}catch(e){r.reject(e)}finally{o=!0}}),e)),r.promise}return(...t)=>{const r=n;return n=Date.now(),s(void 0===r||n-r>=e?0:e-(n-r),t)}}async function v(e,t,n){const r=n();if(!(e>0))return r;try{return await r}catch(r){return await(0,i.gw)(t),v(e-1,t,n)}}class y{constructor(e){this._factory=e,this._hasValue=!1}get hasValue(){return this._hasValue}get(){return this._hasValue||(this._value=this._factory(),this._hasValue=!0),this._value}map(e){return new y((()=>e(this.get())))}}function w(e){return new y(e)}var x;function E(e){return e.replace(/[.*+?()[\]{}^$\\/|]/g,"\\$&")}!function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(x||(x={}))},41478:(e,t,n)=>{n.d(t,{x:()=>r});var r,i=n(40594),o=n(31272),s=n(79707);!function(e){function t(e){return{message:e.message,stack:e.stack}}e.normalizeException=t,e.isCircularObject=function(e){try{return!(0,s.HD)(JSON.stringify(e))}catch(e){return e.message.includes("Converting circular structure to JSON")}},e.normalizeData=function e(n,r=new WeakSet){try{return self.HTMLElement&&n instanceof self.HTMLElement?{type:(s=n).nodeName,html:s.outerHTML,attributes:Array.from(s.attributes).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{})}:n instanceof Error?t(n):Array.isArray(n)?n.map((t=>e(t,r))):"function"==typeof n?`${n.name}()`:(0,o.Kn)(n)?r.has(n)?"circular data!":(r.add(n),Object.keys(n).reduce(((t,i)=>({...t,[i]:e(n[i],r)})),{})):n}catch(e){return i.Y.create("HistoryLogNormalizer").error("cannot normalize data",e,n),t(new Error("Data normalization fail!"))}var s}}(r||(r={}))},66209:(e,t,n)=>{n.d(t,{f:()=>u});var r,i=n(20905),o=n(78767),s=n(40594),a=n(36897),c=n(56623);!function(e){e.UPDATE_BACKUP_STORAGE_TIMEOUT=i.m9(5),e.BACKUP_STORAGE_LOGS_CAPACITY=100}(r||(r={}));class u{constructor(e,t,n,i=o.P2,a=s.Y.create(u.name,{skipPushToHistory:!0})){this._sessionStorage=e,this._key=t,this._skipSetLogs=n,this._throttle=i,this._log=a,this.get=()=>this._get(),this._get=c.r.getLogsFromSessionStorageFallbackGetter(this._key,(()=>this._sessionStorage)),this.set=this._throttle(r.UPDATE_BACKUP_STORAGE_TIMEOUT,this._set.bind(this))}async _set(e){var t,n;if(await(null===(t=this._skipSetLogs)||void 0===t?void 0:t.call(this)))return void this._log.trace("set logs is skipped");const i=null===(n=e(r.BACKUP_STORAGE_LOGS_CAPACITY))||void 0===n?void 0:n.slice(-r.BACKUP_STORAGE_LOGS_CAPACITY).map((e=>{try{return JSON.stringify(e)}catch(t){return this._log.debug("cannot parse properly backup storage data",t,e),JSON.stringify({level:a.in.WARN,loggerName:e.loggerName,message:e.message,timestamp:e.timestamp,exception:`cannot parse properly backup storage data: ${t.message}`})}}));return this._sessionStorage.set({[this._key]:i}).catch((e=>{this._log.warn(`error: on set ${this._key} logs to backup storage`,e),this._sessionStorage.remove(this._key).catch((e=>this._log.warn(`error: on remove ${this._key} logs from backup storage`,e)))}))}}},36897:(e,t,n)=>{var r;n.d(t,{R1:()=>s,iR:()=>o,in:()=>r}),function(e){e.TRACE="TRACE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL"}(r||(r={}));const i={[r.TRACE]:1,[r.DEBUG]:2,[r.INFO]:3,[r.WARN]:4,[r.ERROR]:5,[r.FATAL]:6};function o(e){return i[e]||0}const s=Object.freeze({"gdocs.injected":{limit:30},"gdocs.textMap.error":{limit:20}})},8058:(e,t,n)=>{n.d(t,{x:()=>i});var r=n(78235);class i extends r.rK{constructor(e,t,n,r){super(e),this._config=t,this._historyLogsService=n,this._loggerSettings=r}handleEvent(e){var t,n,r;this._config.filterFn(e)&&!(null===(t=this._loggerSettings)||void 0===t?void 0:t.skipWriteToConsole)&&this._config.writer.write(e),(null===(n=this._loggerSettings)||void 0===n?void 0:n.skipPushToHistory)||this._historyLogsService.pushLog(e,null===(r=this._loggerSettings)||void 0===r?void 0:r.customLogBufferKey)}}},97833:(e,t,n)=>{n.d(t,{Hz:()=>l});var r=n(82853),i=n(94575),o=n(41478),s=n(36897);const a=["CRITICAL","HIGH","MEDIUM","LOW"],c={[s.in.FATAL]:"CRITICAL",[s.in.ERROR]:"CRITICAL",[s.in.WARN]:"HIGH",[s.in.INFO]:"MEDIUM",[s.in.DEBUG]:"LOW",[s.in.TRACE]:"LOW"},u={CRITICAL:{limit:100,advancedLoggingLimit:500},HIGH:{limit:100,advancedLoggingLimit:500},MEDIUM:{limit:200,advancedLoggingLimit:1e3},LOW:{limit:0,advancedLoggingLimit:1e3}};class l{constructor(e){var t;this.historyArgs=e,this.customBuffers={},this.defaultBuffers=Object.fromEntries(a.map((e=>[e,new r.P(u[e].limit)]))),null===(t=e.enableAdvancedInProd)||void 0===t||t.subscribe((()=>{this.resizeDefaultBuffers()})),e.isBG&&this.restoreDefaultBufferLogsFromStorage(),this.initializeDebugCommands()}isHistoryEnabled(){var e;return!!(null===(e=this.historyArgs.enableInProd)||void 0===e?void 0:e.get())}isAdvancedHistoryEnabled(){var e,t;return!!(null===(e=this.historyArgs.enableInProd)||void 0===e?void 0:e.get())&&!!(null===(t=this.historyArgs.enableAdvancedInProd)||void 0===t?void 0:t.get())}getBufferCapacity(e){var t;return this.isAdvancedHistoryEnabled()&&null!==(t=e.advancedLoggingLimit)&&void 0!==t?t:e.limit}getDefaultBuffer(e){return this.defaultBuffers[c[e]]}getCustomBuffer(e){return this.customBuffers[e]||(this.customBuffers[e]=new r.P(this.getBufferCapacity(s.R1[e]))),this.customBuffers[e]}resizeDefaultBuffers(){for(const[e,t]of Object.entries(this.defaultBuffers)){const n=this.getBufferCapacity(u[e]);t.resize(n)}}backupDefaultBufferLogsToStorage(){var e;null===(e=this.historyArgs.backupStorage)||void 0===e||e.set((e=>{let t=0;const n=[];for(const r of a){const i=this.defaultBuffers[r];if(n.push(i.toArray()),t+=i.size,t>=e)break}return n.reverse().flat()}))}async restoreDefaultBufferLogsFromStorage(){var e;const t=await(null===(e=this.historyArgs.backupStorage)||void 0===e?void 0:e.get());if(!t)return;const n=Object.fromEntries(Object.entries(this.defaultBuffers).map((([e,t])=>[e,t.toArray()])));for(const e of Object.values(this.defaultBuffers))e.clear();for(const e of t)this.getDefaultBuffer(e.level).enqueue(e);for(const[e,t]of Object.entries(n)){const n=this.defaultBuffers[e];for(const e of t)n.enqueue(e)}this.backupDefaultBufferLogsToStorage()}pushLog(e,t){if(!this.isHistoryEnabled())return Promise.resolve();const n=t?this.getCustomBuffer(t):this.getDefaultBuffer(e.level);return(0,i.g)((()=>{n.enqueue(d(e,t)),!t&&this.isAdvancedHistoryEnabled()&&this.backupDefaultBufferLogsToStorage()}))}getLogs(){const e=Object.values(this.defaultBuffers).map((e=>e.toArray())),t=Object.entries(this.customBuffers).map((([e,t])=>t.toArray()));return e.concat(t).flat()}initializeDebugCommands(){}}const d=(e,t)=>({...e,data:o.x.normalizeData(e.data),loggerName:t?e.loggerName:`common.${e.loggerName}`,exception:e.exception&&o.x.normalizeException(e.exception)})},40594:(e,t,n)=>{n.d(t,{Y:()=>r});var r,i=n(28898),o=n(78235);!function(e){e.create=function(e,t){return new o.rl(e,(()=>(0,i.O)().logger.create(e,t)))}}(r||(r={}))},72532:(e,t,n)=>{n.d(t,{x:()=>i});var r=n(36897);const i=e=>t=>(0,r.iR)(t.level)>=(0,r.iR)(e)},59789:(e,t,n)=>{n.d(t,{g:()=>r});var r,i=n(36897),o=n(39397);!function(e){e.LEVEL={[i.in.TRACE]:"color: white; background: orange;",[i.in.DEBUG]:"color: black; background: #ffdc00;",[i.in.INFO]:"color: black; background: #abdcfb",[i.in.WARN]:"color: white; background: darkorange;",[i.in.ERROR]:"color: white; background: red;",[i.in.FATAL]:"color: white; background: darkred;"},e.GRAMMARLY="color: black; background: #bada55;";const t=new Map;function n(e,t){return e+Math.floor(Math.random()*(t-e+1))}function r(e){return`color: ${e.isDark?"white":"black"}; background: rgb(${e.red}, ${e.green}, ${e.blue})`}e.getLoggerName=function(e){const i=t.get(e);if(i)return r(i);const o=n(0,255),s=n(0,255),a=n(0,255),c={red:o,green:s,blue:a,isDark:Math.sqrt(o*o*.299+s*s*.587+a*a*.114)<127.5};return t.set(e,c),r(c)},e.RESET_DEFAULT="color: reset;",e.RESET_DEBUG=`color: ${(0,o.Y)()?"white":"black"};`,e.getReset=function(t){return t!==i.in.TRACE&&t!==i.in.DEBUG?e.RESET_DEFAULT:t===i.in.TRACE||t===i.in.DEBUG?e.RESET_DEBUG:e.RESET_DEFAULT},e.outputLog=function(e){return[`grm ${e.level} [${e.loggerName}]  ${e.message}`]}}(r||(r={}))},27194:(e,t,n)=>{n.d(t,{n:()=>s});var r=n(53481),i=n(59789),o=n(36897);class s{constructor(){this._writeFunc=s._commonWriteFunc}shouldWriteLog(e){const t=(0,o.iR)(e);return!!(t&&1<=t)}write(e){try{const t=i.g.outputLog(e);e.data&&t.push(e.data),e.exception&&t.push(e.exception),this.shouldWriteLog(e.level)&&this._writeFunc[e.level].apply(null,t)}catch(e){}}}s._commonWriteFunc=function(){const{debug:e,info:t,warn:n,error:i}=(0,r.a)(console);return{[o.in.TRACE]:e,[o.in.DEBUG]:e,[o.in.INFO]:t,[o.in.WARN]:n,[o.in.ERROR]:i,[o.in.FATAL]:i}}()},78235:(e,t,n)=>{n.d(t,{rK:()=>i,rl:()=>o});var r=n(36897);class i{constructor(e){this.name=e,this._isError=e=>{const t=e;return t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}}trace(e,t,n){this._logMessage(r.in.TRACE,e,t,n)}debug(e,t,n){this._logMessage(r.in.DEBUG,e,t,n)}info(e,t,n){this._logMessage(r.in.INFO,e,t,n)}warn(e,t,n){this._logMessage(r.in.WARN,e,t,n)}error(e,t,n){this._logMessage(r.in.ERROR,e,t,n)}fatal(e,t,n){this._logMessage(r.in.FATAL,e,t,n)}_logMessage(e,t,n,r){const i={level:e,loggerName:this.name,message:t,timestamp:Date.now()};n&&(this._isError(n)?i.exception=n:i.data=n),i.data=i.data||r,this.handleEvent(i)}}class o{constructor(e,t){this.name=e,this._createLogger=t}trace(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.trace(e,t,n)}debug(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.debug(e,t,n)}info(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.info(e,t,n)}warn(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.warn(e,t,n)}error(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.error(e,t,n)}fatal(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.fatal(e,t,n)}}},83473:(e,t,n)=>{n.d(t,{J6:()=>r,M$:()=>o,m:()=>i});const r=e=>e.reduce(((e,t,n)=>e+(t-e)/(n+1)),0),i=(e,t)=>{const n=void 0===t?r(e):t;return e.length>1?Math.sqrt(e.reduce(((e,t)=>e+(t-n)**2),0)/(e.length-1)):0};function o(e,t,n=.001){return e===t||Math.abs(e-t)<=n}},31272:(e,t,n)=>{function r(e,t){const n={};return Object.keys(t).forEach((r=>n[r]=e(r,t[r]))),n}function i(e,t){const n={};return Object.keys(t).forEach((r=>{e(r,t[r])&&(n[r]=t[r])})),n}function o(e){const t={};for(const[n,r]of e)t[n]=r;return t}n.d(t,{Kn:()=>s,UI:()=>r,Ue:()=>o,hX:()=>i,vZ:()=>a});const s=e=>e===Object(e)&&!Array.isArray(e);function a(e,t){if(e===t)return!0;if(c(e)||c(t))return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){if(!(n in t))return!1;if(!a(e[n],t[n]))return!1}return!0}function c(e){return e!==Object(e)}},44675:(e,t,n)=>{function r(e,t){return new Promise(((n,r)=>{setTimeout((()=>{void 0!==t?r(t):n()}),e)}))}function i(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}}function o(e){return new Promise(((t,n)=>{e.then(n,t)}))}function s(e){return o(Promise.all([...e].map(o)))}n.d(t,{Fb:()=>u,II:()=>i,Wp:()=>s,gw:()=>r});class a extends Error{}function c(e){return new Promise(((t,n)=>setTimeout((()=>n(new a("Promise timed out."))),e)))}function u(e,t){return Promise.race([c(e),t])}},94575:(e,t,n)=>{function r(e){const t=Date.now();return setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-Date.now()+t)})}),1)}n.d(t,{g:()=>o});const i="undefined"==typeof self||"function"!=typeof self.requestIdleCallback?r:(e,t)=>{try{return self.requestIdleCallback(e,t)}catch(t){return r(e)}},o=e=>new Promise(((t,n)=>{i((()=>{try{e(),t()}catch(e){n(e)}}))}))},13848:(e,t,n)=>{n.d(t,{D:()=>a});var r=n(50750),i=n(84714),o=n(8867),s=n(61443);function a(e){return(n=e)&&(n instanceof o.y||"object"==typeof n&&"lift"in n&&"subscribe"in n&&c(n.lift)&&c(n.subscribe))||function(e){return u(e)&&(Symbol.observable in e&&c(e[Symbol.observable])||s.L in e&&c(e[s.L]))}(e)||u(t=e)&&"then"in t&&c(null==t?void 0:t.then)||function(e){return"object"==typeof e&&null!==e&&"length"in e}(e)||function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)||function(e){return"object"==typeof e&&null!==e&&Symbol.asyncIterator in e}(e)||function(e){return"object"==typeof e&&null!==e&&"getReader"in e}(e)?(0,r.D)(e):function(e){return u(e)&&"subscribe"in e&&c(null==e?void 0:e.subscribe)}(e)?(0,r.D)({[Symbol.observable||s.L]:()=>e}):(0,i.of)(e);var t,n}function c(e){return"function"==typeof e}function u(e){return null!==e&&"object"==typeof e}},25714:(e,t,n)=>{n.d(t,{d5:()=>r,s8:()=>s});var r,i=n(8867),o=n(78837);function s(e){return e instanceof i.y?e:new i.y((t=>e.subscribe(t)))}!function(e){e.measure=e=>t=>new i.y((n=>t.subscribe((t=>e((()=>n.next(t)))),(e=>n.error(e)),(()=>n.complete())))),e.using=(e,t)=>(0,o.g)(e,t),e.doNothing=e=>e}(r||(r={}))},87459:(e,t,n)=>{n.d(t,{O:()=>r});var r,i=n(44675);!function(e){class t extends Error{constructor(e,t=1e3){super(`SafePromiseError: ${String(e)}`),this.stack=(super.stack||"").slice(t)}}function n(e){return e.catch((e=>e instanceof Error&&!e.stack?Promise.reject(new t(e.message)):Promise.reject(e)))}e.fromPromise=n,e.fromAsync=function(e){return(...t)=>n(e(...t))},e.noop=e.fromPromise(Promise.resolve()),e.create=function(e){return n(new Promise(e))},e.sync=function(e){return n(new Promise(((t,n)=>t(e()))))},e.createCompletionSource=i.II,e.delay=i.gw}(r||(r={}))},7176:(e,t,n)=>{function r(e){return e instanceof Error?function(e){if(e instanceof Error){const{name:t,message:n,stack:r,errors:i,suppressed:o,cause:s,...a}=e;return{...a,name:t,message:n,stack:r,errors:i,suppressed:o,cause:s}}return e}(e):e instanceof ErrorEvent?function(e){if(e instanceof ErrorEvent){const{message:t,type:n,lineno:r,colno:i,filename:o,error:s,...a}=e;return{...a,message:t,type:n,lineno:r,colno:i,filename:o,error:s}}return e}(e):e instanceof PromiseRejectionEvent?function(e){if(e instanceof PromiseRejectionEvent){const{type:t,reason:n,...r}=e;return{...r,type:t,reason:n}}return e}(e):e}n.d(t,{pb:()=>r})},20905:(e,t,n)=>{n.d(t,{E0:()=>r,LK:()=>l,Xd:()=>h,Z7:()=>i,an:()=>c,g0:()=>a,i4:()=>d,m9:()=>u,v0:()=>s,xO:()=>o});const r=1e3,i=60*r,o=60*i,s=24*o,a=7*s;function c(e){return e*s}function u(e){return e*r}function l(e){return e*i}function d(e){return e*o}function h(e){return r/e}},79707:(e,t,n)=>{function r(e){return Number.isFinite(e)||e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY}function i(e){return"string"==typeof e}n.d(t,{HD:()=>i,hj:()=>r})},60378:(e,t,n)=>{n.d(t,{M0:()=>x});var r=n(97231),i=n(14058),o=n(19254),s=n(78767),a=n(31272),c=n(40594),u=n(78300),l=n(20489),d=n(91957),h=n(16381),f=n(70565),p=n(24007);const g=c.Y.create("lib.tracking.telemetry"),m=.1,_=.05,b=.01;var v;!function(e){e.getMapPageCount=e=>void 0===e.mapPageCount?void 0:e.mapPageCount>10?"10+":e.mapPageCount}(v||(v={}));const y=e=>e.substring(0,5),w=(e,t)=>{let n;try{n=JSON.stringify(t)}catch(t){n=`stringify fail: '${String(t)}', '${(0,u.H)(t)?t.message:"undefined"}'`,g.warn(n,e)}return n};class x{constructor(e=s.EI,t=s.EI,n=s.EI,c=s.EI,x=!1,E=l.Rv.dummyFactoryInitialization,k=s.EI,A=s.EI,O=(e=>.01),F=s.EI,P=E(((e,{hideUserInfo:t,...n})=>{this._sendEvent({logger:e,level:o.in.INFO,hideUserInfo:t,...(0,o._x)(n)})})),N=s.EI,L=s.EI,D=s.EI,U=s.EI,M=s.EI){this._sendFelog=e,this._sendFelogUsage=t,this._setUserInfo=n,this._setContainerId=c,this._sendUsageMetrics=x,this._sendFelogEvent=k,this._sendFelogCrashLogs=A,this._getUsageMetricsRate=O,this._enableDataSharing=F,this._createPerfLogger=P,this._sendFelogMetricEvent=N,this._sendFemetricsRate=L,this._startFemetricsTimer=D,this._endFemetricsTimer=U,this._sendFemetricsTimer=M,this._sendEvent=e=>{try{this._sendFelogEvent(e)}catch(t){g.warn(`Failed to send felog for ${JSON.stringify(e)}`,t)}},this._sendException=e=>(t,n,r,i=!0)=>{let o;o=r||((0,u.H)(t)?t.message:String(t)),this._sendEvent({message:o,...e,sendToFemetrics:i,extra:{...e.extra,...(0,p.nG)(n,t)}})},this._sendUsageMetricsSamplingRatio=this._getUsageMetricsRate(r.Rd().bundleInfo.browser),this.sendFemetricsRate=(e,t,n,r,i)=>{this._sendFemetricsRate(e,t,n,r,i)},this.startFemetricsTimer=(e,t,n)=>{this._startFemetricsTimer(e,t,performance.now(),n)},this.endFemetricsTimer=(e,t,n,r)=>{this._endFemetricsTimer(e,t,performance.now(),n,r)},this.sendFemetricsTimer=(e,t,n,r)=>{this._sendFemetricsTimer(e,t,n,r)},this.restoredBgConnection=e=>{this._send("cs.connection.bg.restored",o.in.INFO,{timeWithoutConnection:e})},this.initWithoutBgConnection=()=>{this._send("cs.connection.bg.disconnected",o.in.INFO)},this.fetchDefinitionsFail=()=>{this._send("cs.connection.api.definition.failed",o.in.WARN)},this.tooLongPageConfigInit=e=>{this._send("cs.pageConfig.init.exceeded",o.in.WARN,{initTime:e})},this.tooLongUserUpdateTime=e=>{this._send("bg.state.user.update.exceeded",o.in.WARN,{updateTime:e})},this.lostBgPageConnection=()=>{this._send("cs.gbutton.bgConnection.lost",o.in.INFO)},this.restoreBgPageConnection=e=>{this._send("cs.gbutton.bgConnection.restored",o.in.INFO,{time:e})},this.dynamicConfigLoadFromPrefsError=e=>{this._sendSampled(b,"bg.dynamicConfig.prefs.load.error",o.in.ERROR,{message:e})},this.dynamicConfigSaveToPrefsError=e=>{this._sendSampled(b,"bg.dynamicConfig.prefs.save.error",o.in.ERROR,{message:e})},this.dynamicConfigLoadFromServerError=e=>{this._sendSampled(b,"bg.dynamicConfig.server.load.error",o.in.ERROR,{message:e})},this.pageConfigCDNError=e=>{this._send("cs.pageConfig.cdn.error",o.in.ERROR,{message:e})},this.pageConfigLocalStorageError=(e,t)=>{this._send("cs.pageConfig.localStorage.error",o.in.INFO,{message:e,name:t})},this.pageConfigUpdated=(e,t)=>{this._send("cs.pageConfig.updated",o.in.INFO,{oldVersion:e,newVersion:t})},this.settingsPopupTimeout=()=>{this._send("settings.popup.init.timeout",o.in.ERROR)},this.settingsUnsupportedShow=e=>{this._send("settings.popup.state.unsupported.show",o.in.INFO,{popupType:e})},this.gnarClientInitFail=e=>{this._send("gnar.bg.tracking.gnar.init.fail",o.in.WARN,{message:e})},this.bgTrackingInitFail=()=>{this._send("debug.tracking.init.fail",o.in.INFO)},this.userUpgradeClick=e=>{this._send("cs.ui.action.upgradeClick",o.in.INFO,{placement:e})},this.gGbUpHookClick=()=>{this._send("cs.ui.gb.uphook.click",o.in.INFO)},this.gButtonClick=()=>{this._send("cs.ui.gbutton.click",o.in.INFO)},this.unexpectedAnonymous=e=>{this._send("debug.bg.session.unexpectedAnonymous",o.in.INFO,e)},this.getDapiPropError=(e,t)=>{const n="bg.connection.dapi.getProp.error",r=w(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:o.in.WARN,extra:{json:r},sendToFemetrics:!0})},this.getFetchPassportError=(e,t)=>{const n="bg.connection.passport.fetch.error",r=w(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:o.in.WARN,extra:{json:r},sendToFemetrics:!0})},this.getCheetahStatusError=(e,t)=>{const n="bg.connection.cheetahSettings.getStatus.error",r=w(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:o.in.WARN,extra:{json:r},sendToFemetrics:!0})},this.setDapiPropError=(e,t)=>{const n="bg.connection.dapi.setProp.error",r=w(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:o.in.WARN,extra:{json:r},sendToFemetrics:!0})},this.toggleExtensionDefs=e=>{this._send("bg.settings.definitions.toggle",o.in.INFO,{enabled:e})},this.toggleExtension=(e,t,n)=>{const r={enabled:e,placement:t,domain:n};this._sendEvent({logger:"bg.settings.extension.toggle",level:o.in.INFO,sendToFemetrics:!0,extra:{json:(0,p.jA)(r)},femetricsExtra:r})},this.disableUntilNextVisit=()=>{this._send("cs.gbutton.disableUntilNextVisit",o.in.INFO)},this.disableButtonClick=()=>{this._send("cs.gbutton.disableButtonClick",o.in.INFO)},this.cookieOverflow=(e,t)=>{this._send("debug.bg.state.cookie.overflow",o.in.INFO,{size:e,biggestCookie:t})},this.externalChangePlan=()=>{this._send("bg.api.external.changePlan",o.in.INFO)},this.externalChangeDialect=()=>{this._send("bg.api.external.changeDialect",o.in.INFO)},this.externalChangeUser=()=>{this._send("bg.api.external.changeUsed",o.in.INFO)},this.externalLogout=()=>{this._send("bg.api.external.logout",o.in.INFO)},this.safariLogoutFail=e=>{this._sendEvent({logger:"bg.safari.logout.error",level:o.in.INFO,message:e,sendToFemetrics:!0})},this.chromeToolbarPopupInitFail=e=>{this._sendEvent({logger:"bg.chrome.toolbar.popup",level:o.in.WARN,message:e,sendToFemetrics:!1})},this.csInitialized=e=>{if("message"in e){const t=(0,d.Cg)();this._sendFemetricsRate("csInitialized",{message:e.message,isIframe:e.isIframe,stage:e.stage,domain:t,context:e.context,isAnnotatedTextEnabled:e.isAnnotatedTextEnabled});const n=(0,h.bo)();this._sendEvent({level:o.in.INFO,logger:"csFailInitializedVersion",extra:{json:JSON.stringify({csVersion:n})}}),this._sendFemetricsRate("csFailInitializedVersion",{csVersion:n}),"facebook.com"===t&&this._sendEvent({level:o.in.INFO,logger:"csInitializedFailed",message:e.message,extra:{json:JSON.stringify({isIframe:e.isIframe,stage:e.stage,url:self.location.href,context:e.context})},hideUserInfo:!0})}else this._sendFemetricsRate("csInitialized",e,["firstInstall","registrationDate"])},this.acceptDataControl=()=>{this._send("bg.dataControl.accepted",o.in.INFO)},this.bgPage={bgStarted:e=>{this._sendFemetricsRate("bgStarted",e),"fail"===e.status&&this._sendException({logger:"bg.start.fail",femetricsExtra:{reason:e.reason},level:o.in.ERROR})(e.error,{reason:e.reason,json:e.json})},bgPageStarted:(e,t)=>{this._sendFemetricsRate("bgPageStarted",{context:e,time:t})},bgPageInitFail:e=>{this._send("bg.state.init.fail",o.in.ERROR,{initAttempts:e})},bgPageInitTimeout:e=>{this._send("bg.state.start.timeout",o.in.WARN,{initTime:e})},operationTimeout:(e,t)=>{this._send("bg.operation.timeout",o.in.WARN,{operation:e,timeout:t})},portIdNotFound:e=>{this._sendFemetricsRate("bgPagePortIdNotFound",e)},chunkInjectFailure:(e,t,n)=>{this._send("bg.codeSplitting.injectFailure",o.in.ERROR,{chunkUrl:e,tabId:t,error:n})}},this.sidePanel={openFail:e=>this._sendEvent({logger:"sidePanel.open.fail",level:o.in.ERROR,message:e,femetricsMessage:y(e)}),openPopupFail:e=>this._sendEvent({logger:"sidePanel.openPopup.fail",level:o.in.ERROR,message:e,femetricsMessage:y(e)}),initFail:e=>{this._sendEvent({logger:"sidePanel.init.fail",level:o.in.ERROR,message:e,femetricsMessage:y(e)})},initSuccess:()=>{this._sendEvent({logger:"sidePanel.init.success",level:o.in.INFO,sendToFemetrics:!0})},unhandledException:(e,t)=>{const n="sidePanel.unhandledException";g.error(n,new Error(e),t),this._sendEvent({logger:n,level:o.in.ERROR,message:e,extra:t,femetricsMessage:y(e)})},unhandledRejection:(e,t)=>{const n="sidePanel.unhandledRejection";g.error(n,new Error(e),t),this._sendEvent({logger:n,level:o.in.ERROR,message:e,extra:t,femetricsMessage:y(e)})},fetchTreatmentsFail:e=>{this._sendFemetricsRate("sidePanelFetchTreatmentsFail",{message:y(e)})},fetchTreatmentsTimeout:e=>{this._sendFemetricsRate("sidePanelFetchTreatmentsTimeoutInSecond",{time:e})},fetchTreatmentsSuccess:()=>{this._sendFemetricsRate("sidePanelFetchTreatmentsSuccess")},serviceWorkerNotWorking:()=>{this._sendFemetricsRate("serviceWorkerNotWorking")},chromiumBrand:e=>{this._sendEvent({logger:"sidePanel.chromiumBrand",level:o.in.INFO,extra:{json:JSON.stringify(e)}}),this._sendFemetricsRate("sidePanelChromiumBrand",e)},sidePanelCloseDuplication:(e,t,n,r)=>{this._sendEvent({message:"received disconnect event after side panel is closed",logger:e,level:o.in.ERROR,extra:{json:(0,p.jA)({disconnectionCount:t,assistantSessionId:n,isSidePanelOpen:r})}})},closeAssistantFailure:(e,t)=>{this._sendEvent({message:"unable to send closeAssistant event when side panel is closed",logger:e,level:o.in.WARN,extra:{json:(0,p.jA)({message:t})}})},recordAssistantShownFail:()=>{this._sendEvent({logger:"sidePanel.recordAssistantShown.fail",level:o.in.ERROR})}},this.popup={popupInitFail:(e,t)=>{this._sendEvent({logger:"popup.init.fail",level:o.in.ERROR,message:e,extra:t,femetricsMessage:y(e)})},fetchTreatmentsFail:e=>{this._sendFemetricsRate("popupFetchTreatmentsFails",{message:y(e)})},popupStateInitFail:e=>{this._sendEvent({logger:"popup.state.init.fail",level:o.in.ERROR,message:e,femetricsMessage:y(e)})},initSuccess:()=>{this._sendEvent({logger:"popup.init.success",level:o.in.INFO,sendToFemetrics:!0})}},this.checkScript={fetchTreatmentsFail:e=>{this._sendFemetricsRate("checkingFetchTreatmentsFail",{message:y(e),domain:(0,d.Cg)()})},fetchTreatmentsSuccess:()=>{this._sendFemetricsRate("checkingFetchTreatmentsSuccess",{domain:(0,d.Cg)()})},fetchTreatmentsTimeout:e=>{this._sendFemetricsRate("checkingFetchTreatmentsTimeoutInSecond",{time:e,domain:(0,d.Cg)()})}},this.extensionUpdated=(e,t)=>{this._send("bg.state.updated",o.in.INFO,{currentVersion:e,previousVersion:t})},this.extensionUpdateFail=e=>{this._send("bg.state.update.fail",o.in.INFO,{previousVersion:e})},this.cannotGetInstallSource=()=>{this._send("bg.getSource.fail",o.in.WARN)},this.extensionInstall=e=>{this._sendEvent({logger:"bg.state.install",level:o.in.INFO,extra:{json:JSON.stringify({source:e})},sendToFemetrics:!0})},this.chromeContentScriptLoadError=(e,t)=>{this._send("bg.chrome.cs.load.error",o.in.WARN,{message:e,type:t})},this.reloadNotificationShow=()=>{this._send("bg.ui.notification.tabsReload.show",o.in.WARN)},this.reloadNotificationClick=()=>{this._send("bg.ui.notification.tabsReload.click",o.in.INFO)},this.fetchUserFail=(e,t,n,r)=>{const i="bg.user.fetch.fail",s=w(i,{body:t,statusCode:n,reason:e,fromAuthRequest:!!r});this._sendEvent({logger:i,level:o.in.WARN,extra:{json:s},sendToFemetrics:!0})},this.getAccessTokenError=e=>this.sendFemetricsRate("oauthGetAccessTokenError",e),this.getAccessTokenSuccess=e=>this.sendFemetricsRate("oauthGetAccessTokenSuccess",e),this.initializeAccessTokenSuccess=()=>this._sendEvent({logger:"bg.api.service.getAccessToken",message:"initialize access token",level:o.in.INFO}),this.oauthLogout=e=>this.sendFemetricsRate("oauthLogout",e),this.compareUserInUserUpdate=e=>this.sendFemetricsRate("compareUserInUserUpdate",e),this.frequentCookieChanges=e=>{this._send("debug.cookie.onChange.error",o.in.INFO,{canceled:e})},this.initializePropFromDapi=e=>{this._send("bg.state.dapi.prop.initialize",o.in.INFO,{name:e})},this.personalizedInsightsConsentPopupShow=e=>{this._sendEvent({logger:"cs.personalizedInsightsConsent.popup.show",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:`Personalized Insights Consent Popup shown with consent type: ${e}`,hideUserInfo:!0})},this.performanceCardHighCollaborationDetected=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.highCollaborationDetected",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"High collaboration detected on GDocs",hideUserInfo:!0})},this.performanceCardPopupShow=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.popup.show",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"Performance degradation warning shown to user on gDocs",hideUserInfo:!0})},this.performanceCardContinueSession=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.popup.continue",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"Performance degradation warning acknowledged by user on gDocs and user chose to continue the session",hideUserInfo:!0})},this.performanceCardDeactivateSession=()=>{this._sendEvent({logger:"cs.gDocsCollabPerformance.popup.deactivate",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"Performance degradation warning acknowledged by user on gDocs and user chose to deactivate the session",hideUserInfo:!0})},this.personalizedInsightsConsentPopupInitializationError=e=>{this._sendEvent({logger:"cs.personalizedInsightsConsent.popup.initialization.error",level:o.in.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue initialing Personalized Insights Consent popup. Likely, gButtonPopupController has not been initialized yet at the time when updateState was called.",hideUserInfo:!0,extra:{json:JSON.stringify({err:e})}})},this.dataSharingGetError=e=>{this._sendEvent({logger:"bg.dataSharing.api.failure",level:o.in.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue calling Data Sharing API",hideUserInfo:!1,extra:{json:JSON.stringify({err:e})}})},this.authAccountChooserAttempt=(e,t,n)=>{this._sendEvent({logger:"bg.authOptions.api.attempt",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"Attempt to call Auth /options endpoint used to return Account Chooser information. All values need to be true to trigger the API call.",hideUserInfo:!1,extra:{json:JSON.stringify({isGacCookiePresent:n,isGateEnabled:e,isAnonymous:t})}})},this.authAccountChooserGateEnabledCheck=e=>{this._sendEvent({logger:"bg.authOptions.api.gate.enabled",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"Account Chooser gate is enabled.",hideUserInfo:!1,extra:{json:JSON.stringify({isGateEnabled:e})}})},this.authAccountChooserGacCookieCheckFailure=e=>{this._sendEvent({logger:"bg.authOptions.api.gac.cookie.check.failure",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"There was an issue retrieving the GAC cookie.",hideUserInfo:!1,extra:{json:JSON.stringify({err:e})}})},this.authAccountChooserOptionsSuccess=e=>{this._sendEvent({logger:"bg.authOptions.api.success",level:o.in.INFO,sendToFemetrics:!0,femetricsMessage:"Auth /options endpoint returned Account Chooser information.",hideUserInfo:!1,extra:{json:JSON.stringify({isEmptyAuthOptions:e})}})},this.authAccountChooserOptionsError=e=>{this._sendEvent({logger:"bg.authOptions.api.error",level:o.in.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue calling Auth /options endpoint used to return Account Chooser information.",hideUserInfo:!0,extra:{json:JSON.stringify({err:e})}})},this.onboardingPopupShow=()=>{this._send("cs.onboarding.popup.show",o.in.INFO)},this.onboardingPopupCancel=()=>{this._send("cs.onboarding.popup.cancel",o.in.INFO)},this.onboardingTutorialShow=()=>{this._send("cs.onboarding.tutorial.show",o.in.INFO)},this.loginReminderPopupShow=()=>{this._send("cs.gbutton.popup.loginReminder.show",o.in.INFO)},this.loginReminderBadgeShow=()=>{this._send("bg.state.user.loginReminder.enable",o.in.INFO)},this.loginReminderCanceled=e=>{this._sendFelog("bg.state.user.loginReminder.canceled",e,o.in.ERROR)},this.logApiCallFailure=(e,t)=>{this._sendEvent({logger:"bg.api.service.request.failure",level:o.in.ERROR,message:"[API_CALL_FAILED]",extra:{json:JSON.stringify({filteredUrl:e,method:t})}})},this.logGrauthExchange=()=>{this._sendEvent({logger:"user.auth.grauth.exchange",level:o.in.INFO,message:"[GRAUTH_ROTATED]"})},this.unhandledExceptions={unhandledBgPageException:(e,t)=>{const n="bg.unhandledException";g.error(n,new Error(e),t),this._sendSampledEvent(_,{logger:n,level:o.in.ERROR,message:T(e),extra:t})},unhandledBgPageRejection:(e,t)=>{const n="bg.unhandledRejection";g.error(n,new Error(e),t),this._sendSampledEvent(_,{logger:n,level:o.in.ERROR,message:C(e),extra:t})},unhandledPopupException:(e,t)=>{const n="popup.unhandledException";g.error(n,new Error(e),t),this._sendEvent({logger:n,level:o.in.ERROR,message:e,extra:t,femetricsMessage:y(e)})},unhandledPopupRejection:(e,t)=>{const n="popup.unhandledRejection";g.error(n,new Error(e),t),this._sendEvent({logger:n,level:o.in.ERROR,message:e,extra:t,femetricsMessage:y(e)})}},this.csUnhandled=({message:e,femetricsExtra:t,error:n,printAsWarning:r})=>{const i="cs.unhandled";r?g.warn(i,new Error(e)):g.error(i,new Error(e)),this._sendEvent({logger:i,level:r?o.in.WARN:o.in.ERROR,message:e,femetricsExtra:t,sendToFemetrics:!0,extra:n?(0,p.nG)({},n):void 0})},this.csCrash=(0,s.hz)(((e,t)=>{g.error("cs.crash",new Error(e)),this._sendEvent({logger:"cs.crash",level:o.in.ERROR,message:e,femetricsExtra:t})})),this.storageMigrationSucceeded=()=>{this._send("bg.storageMigration.success",o.in.INFO,{})},this.storageMigrationFailed=this._sendException({logger:"bg.storageMigration.failure",level:o.in.ERROR}),this.storageApplyChangesFailed=this._sendException({logger:"bg.storage.applyChanges.failure",level:o.in.ERROR}),this.cardShowAction=()=>{this._sendSampled(m,"cs.editor.card.show",o.in.INFO)},this.cardHideAction=()=>{this._sendSampled(m,"cs.editor.card.hide",o.in.INFO)},this.cardReplacementAction=()=>{this._sendSampled(m,"cs.editor.card.replacement",o.in.INFO)},this.cardAddToDictAction=()=>{this._sendSampled(m,"cs.editor.card.addToDict",o.in.INFO)},this.cardIgnoreAction=()=>{this._sendSampled(m,"cs.editor.card.ignore",o.in.INFO)},this.synonymCardShowAction=e=>{this._sendSampled(m,"cs.editor.synonym.show",o.in.INFO,{notFoundCard:e})},this.synonymCardHideAction=e=>{this._sendSampled(m,"cs.editor.synonym.hide",o.in.INFO,{notFoundCard:e})},this.synonymReplacementAction=()=>{this._sendSampled(m,"cs.editor.synonym.replacement",o.in.INFO)},this.dictCardShowAction=()=>{this._sendSampled(m,"cs.editor.dict.show",o.in.INFO)},this.dictCardHideAction=()=>{this._sendSampled(m,"cs.editor.dict.hide",o.in.INFO)},this.couldNotParseTransform=(e,t)=>{this._send("cs.cards.transforms.parse.error",o.in.WARN,{transformHTML:e,fallbackParseSuccessful:t})},this.disabledTabLoad=e=>{this._sendUsage("usage.loadOnDisabledTab",o.in.INFO,{accountType:e})},this.disabledTabByUserLoad=e=>{this._sendUsage("usage.loadOnDisabledByUserTab",o.in.INFO,{accountType:e})},this.initSession=(e,t,n,r)=>{this._sendUsage("usage.session.init",o.in.INFO,{isTopSite:(0,d.ZE)(e),accountType:t,fieldType:n,fieldSupported:r}),this._sendMetric("usage.session.init",{domain:e,accountType:t,fieldType:n,fieldSupported:r})},this.cardFirstInteraction=(e,t)=>{this._sendUsage("usage.card.interaction",o.in.INFO,{accountType:e,fieldType:t})},this.gnar={nextPingDateWriteError:e=>this._send("bg.gnarTracker.nextPingDateWriteError",o.in.ERROR,{error:e}),sendError:(e,t)=>this._sendException({logger:"bg.gnarTracker.sendError",level:o.in.ERROR,femetricsExtra:{context:t}})(e,{eventName:t}),failToLoadContainerId:(e,t,n,r)=>this.sendFemetricsRate("failToLoadContainerId",{source:t,placement:e,reason:n,message:String(r).slice(0,20)}),trackBeforeSetUser:e=>this._send("bg.gnarTracker.trackBeforeSetUser",o.in.INFO,{millisSinceInit:e}),errorSetUser:this._sendException({logger:"bg.gnarTracker.errorSetUser",level:o.in.ERROR})},this.productMetricsClient={updateConfigurationFailed:(e,t)=>{this._sendException({logger:"bg.productMetricsClient.setUserInfoFailed",level:o.in.ERROR,femetricsExtra:{context:t}})(e,{error:e,context:t})}},this._sendGdocsPageExecutionException=this._sendException({logger:"cs.gdocs.pageExecution.exception",level:o.in.ERROR}),this.gdocs={nonDocumentPage:e=>{this._sendEvent({logger:"cs.gdocs.canvas.nonDocumentPage",level:o.in.WARN,sendToFemetrics:!0,femetricsMessage:`isViewMode: ${e.isViewMode}`,femetricsExtra:{context:e.pageType},extra:{json:(0,p.jA)({url:e.url})},hideUserInfo:!0})},documentTabInfo:(0,s.hz)((e=>{this.sendFemetricsRate("gdocsDocumentTabInfo",{hasTabQuery:e})})),tabSwitchFrequency:e=>{this.sendFemetricsRate("gdocsTabSwitchFrequency",e)},pageExecutionException:(e,t)=>this._sendGdocsPageExecutionException(e,{isGDocsCanvas:t}),disabledBeforeForceEnable:(0,s.hz)((e=>this._send("cs.gdocs.disabledBeforeForceEnable",o.in.INFO,{disabledDate:e}))),enabledBeforeForceEnable:(0,s.hz)((()=>this._send("cs.gdocs.enabledBeforeForceEnable",o.in.INFO))),replacementSelectionErrorInfo:e=>{this._sendFemetricsRate("gdocsReplacementSelectionErrorInfo",e)},eventTargetFail:(0,s.hz)(this._sendException({logger:"cs.gdocs.eventTargetFail",level:o.in.ERROR})),sidebarFail:(0,s.hz)(((e,t)=>this._sendException({logger:"cs.gdocs.getSidebarFail",level:o.in.ERROR})(e,{type:t}))),trackSidebarType:({detectedSidebarType:e,displayedSidebarType:t})=>this.sendFemetricsRate("gdocsSidebarType",{type:e,displayedSidebarType:t}),layoutTreeAvailability:e=>{this.sendFemetricsRate("gdocsInternalsLayoutTreeAvailability",e)}},this.canvasGdocs={trackGdocsInjectedMetric:e=>{this.sendFemetricsRate("gdocsInjectedMetric",e)},injectedException:(0,s.hz)(this._sendException({logger:"cs.gdocs.canvas.injected.exception",level:o.in.ERROR})),injectedError:(0,s.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.error",level:o.in.ERROR,message:t,extra:{json:(0,p.jA)({context:e,data:n})},gdocsExtra:r,femetricsExtra:{context:e}})),(e=>e)),injectedInfo:(0,s.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.info",eventContext:e,level:o.in.INFO,message:r,sendToFemetrics:!0,gdocsExtra:t,extra:{json:(0,p.jA)({context:e,data:n})},femetricsExtra:{context:e}})),(e=>e)),injectedInfoCanvasPatching:(0,s.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.info",eventContext:e,level:o.in.INFO,message:t,sendToFemetrics:!0,gdocsExtra:n,extra:{json:(0,p.jA)({context:e,data:r})},femetricsExtra:{context:e,message:t,...r}})),(e=>e)),initializationException:(0,s.hz)(((e,t,n)=>this._sendException({logger:"cs.gdocs.canvas.init.exception",level:o.in.ERROR,gdocsExtra:n,femetricsExtra:{type:t}})(e,{type:t}))),initializationTimeout:(0,s.hz)(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.init.timeout",level:o.in.ERROR,message:`Initialization for ${t} timeout: ${e}ms`,extra:{json:(0,p.jA)({type:t})},gdocsExtra:n,femetricsExtra:{type:t}}))),creatingException:(0,s.hz)(((e,t)=>this._sendEvent({logger:"cs.gdocs.canvas.creating.exception",level:o.in.ERROR,message:e,gdocsExtra:t}))),initInterrupted:(0,s.hz)((e=>this._sendEvent({logger:"cs.gdocs.canvas.interrupted",level:o.in.ERROR,message:"Interrupted",gdocsExtra:e}))),dataSourceException:(0,s.hz)(((e,t)=>this._sendException({logger:"cs.gdocs.canvas.dataSource.exception",level:o.in.ERROR,femetricsExtra:{type:t}})(e,{type:t}))),error:(0,s.HO)(((e,t,n,r,i)=>this._sendEvent({logger:"cs.gdocs.canvas.error",level:o.in.ERROR,message:t,extra:(0,p.nG)({type:e,message:t,data:r},n),femetricsExtra:{type:e,mappingName:null==i?void 0:i.mappingName}})),(e=>e),((e,t,n,r,i)=>{this._sendFemetricsRate("gdocsError",{type:e,message:t&&t.substring(0,20)||"other",mappingName:null==i?void 0:i.mappingName,selectionDiff:"selectionService"===e?null==r?void 0:r.selectionDiff:void 0,gDocsInternalsType:null==i?void 0:i.gDocsInternalsType})})),warning:(0,s.HO)(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.warning",level:o.in.WARN,message:t,extra:(0,p.nG)({type:e,message:t,data:n})})),(e=>e)),trackSessionFinalResult:(0,s.hz)(((e,t)=>this._sendEvent({logger:"cs.gdocs.canvas.start.result",level:o.in.INFO,gdocsExtra:t,sendToFemetrics:!0,femetricsExtra:{type:e}}))),started:e=>this._sendEvent({logger:"cs.gdocs.canvas.started",level:o.in.INFO,sendToFemetrics:!0,gdocsExtra:e}),creating:()=>this._sendEvent({logger:"cs.gdocs.canvas.creating",level:o.in.INFO,sendToFemetrics:!0}),showLongDocPopup:e=>this._sendEvent({logger:"cs.gdocs.canvas.longDocPopup",level:o.in.INFO,sendToFemetrics:!0,gdocsExtra:e}),showSharedDocPopup:e=>this._sendEvent({logger:"cs.gdocs.canvas.sharedDocPopup",level:o.in.INFO,sendToFemetrics:!0,gdocsExtra:e}),debugPageSearchFail:(0,s.hz)((e=>this._sendEvent({logger:"cs.gdocs.canvas.pageSearch.debug",level:o.in.INFO,extra:{json:(0,p.jA)({data:e})}}))),debugMappingFail:(0,s.hz)((e=>this._sendEvent({logger:"cs.gdocs.canvas.mapping.debug",level:o.in.INFO,extra:{json:(0,p.jA)({data:e})}}))),buildTextMapPerf:this._createPerfLogger("cs.gdocs.canvas.perf.textMap",30),findPage:this._createPerfLogger("cs.gdocs.canvas.perf.findPage",100),mappingPerf:e=>new f.W((t=>{1e-4>Math.random()&&this._sendFemetricsTimer("gdocsMapping",t,"summary",{...e,mapPageCount:v.getMapPageCount(e)})})),fullTextNotFound:(0,s.hz)((()=>this._send("cs.gdocs.canvas.fullTextNotFound",o.in.WARN))),equationsRenderInfo:e=>{this._sendFemetricsRate("gdocsEquationsRenderInfo",e)},mapping:({mapPageCount:e,attempts:t,mappingName:n,mode:r,tableMode:i,partialRenderMode:o,renderRTL:s,gDocsInternalsType:a})=>{this._sendFemetricsRate("gdocsMapping",{mappingMode:r,mappingName:n,tableMode:i,mapPageCount:e>5?"5+":e,mappingAttempts:t.length,partialRenderMode:o,renderRTL:s,gDocsInternalsType:a,...t.reduce(((e,t,n)=>({...e,[`mapping${n}_name`]:t.name,[`mapping${n}_success`]:t.success,[`mapping${n}_mappedPages`]:"number"==typeof t.mappedPageCount&&t.mappedPageCount>5?"5+":t.mappedPageCount})),{})},["os","userOrganizationType"]),this._sendFemetricsRate("gdocsMapping.short",{mappingName:n,gDocsInternalsType:a},["os","userOrganizationType"])},mappingFailedInfo:e=>{this._sendFemetricsRate("gdocsMappingFailedInfo",e)},mappings:{advanced:{byFeatures:({mapPageCount:e,injectedFeatures:t,...n})=>{this._sendFemetricsRate("gdocs.mapping.advanced.byFeatures",{...n,...R(t),mapPageCount:e>5?"5+":e},["os"])},textCoverage:e=>{this._sendFemetricsRate("gdocs.mapping.advanced.coverage",e)},textCoverageShort:e=>{this._sendFemetricsRate("gdocs.mapping.advanced.coverage.short",e)}}},mappingStats:e=>{this._sendFemetricsRate("gdocsMappingStats",e,["os"])},mappingPageStats:e=>{this._sendFemetricsRate("gdocsMappingPageStats",e,["os"])},mappingStatsByTextLength:e=>{this._sendFemetricsRate("gdocsMappingStatsByTextLength",e,["os"])},mappingPageStatsByTextLength:e=>{this._sendFemetricsRate("gdocsMappingPageStatsByTextLength",e,["os"])},mappingStatsByTableMode:e=>{this._sendFemetricsRate("gdocsMappingStatsByTableMode",e,["os"])},mappingPageStatsByTableMode:e=>{this._sendFemetricsRate("gdocsMappingPageStatsByTableMode",e,["os"])},mappingMinPageGapsStats:e=>{this._sendFemetricsRate("gdocsMappingMinPageGapsStats",e,["os"])},mappingMaxPageGapsStats:e=>{this._sendFemetricsRate("gdocsMappingMaxPageGapsStats",e,["os"])},mappingSearchStats:e=>{this._sendFemetricsRate("gdocsMappingSearchStats",e,["os"])},partialMappingByPageExperimentUsage:e=>{this._sendFemetricsRate("gdocsPartialMappingByPageExperimentUsage",e,["os"])},partialMapping:{error:e=>{this._sendFemetricsRate("gdocsPartialMappingErrors",e,["os"])}},atmMappingPerformance:e=>{this._sendFemetricsRate("gdocsATMMappingPerformance",e,["os"])},selectionPatched:e=>{this._sendFemetricsRate("gdocsSelectionPatched",e)},trackFatalPopup:(e,t)=>{this._sendFemetricsRate("gdocsTrackFatalPopup",{reason:(null==e?void 0:e.isBrowserExtFault)?"extension":"google",content:String(null==e?void 0:e.textContent).slice(0,10),context:t?"started":"notStarted"})},lazyLoadSidebarController:e=>{this._sendFemetricsRate("gdocsLazyLoadSidebarController",e)}},this.gmailThreadContext={warning:(0,s.HO)(((e,t,n)=>this._sendEvent({logger:"cs.threadContext.gmail.warning",level:o.in.WARN,message:t,extra:{json:(0,p.jA)({type:e,message:t,data:n})}})),(e=>e))},this.autoFix={featureToggleClick:(e,t)=>{this._sendFemetricsRate("autoFixFeatureToggleClick",{autoFixFeatureState:e,autoFixFeatureTogglePlacement:t})},attemptToApplyInParallel:e=>{this._sendFemetricsRate("autoFixAttemptToApplyInParallel",{autoAlerApplierVersion:e})},attemptToApplyInParallelError:(0,s.hz)(((e,t)=>this._sendEvent({logger:"cs.autoFix.attemptToApplyInParallelError",level:o.in.ERROR,sendToFemetrics:!0,autoFixExtra:{domain:e,autoAlerApplierVersion:t}})))},this.autoApply={inconsistentRevertAlertError:(0,s.hz)(((e,t)=>this._sendEvent({logger:"cs.autoApply.inconsistentRevertAlert",level:o.in.ERROR,sendToFemetrics:!0,autoApplyExtra:{domain:e,pname:t}}))),triggered:()=>{this._sendFemetricsRate("autoApplyTriggered")},cardLooked:()=>{this._sendFemetricsRate("autoApplyCardLooked")},revertClick:()=>{this._sendFemetricsRate("autoApplyRevertClick")},reverted:()=>{this._sendFemetricsRate("autoApplyReverted")},affectedByTextChange:()=>{this._sendFemetricsRate("autoApplyAffectedByTextChange")},acceptClick:()=>{this._sendFemetricsRate("autoApplyAcceptClick")},settingsClick:e=>{this._sendFemetricsRate("autoApplySettingsClick",{autoApplySettingsMenuState:e})},turnOffUntilNextView:()=>{this._sendFemetricsRate("autoApplyTurnOffUntilNextView")},integrationCreated:()=>{this._sendFemetricsRate("autoApplyIntegrationCreated")}},this.knowledgeHub={error:(0,s.HO)(((e,t,n,r)=>this._sendEvent({logger:"cs.knowledgeHub.error",level:o.in.ERROR,message:t,extra:{json:(0,p.jA)({type:e,message:t,domain:n,data:r})}})),(e=>e)),integrationCreated:(e,t)=>{this._sendFemetricsRate("knowledgeHubIntegrationCreated",{site:e,integrationMode:t})},relatedMaterialsClick:e=>{this._sendFemetricsRate("knowledgeHubRelatedMaterialsClick",{site:e})},pointPeopleClick:(e,t)=>{this._sendFemetricsRate("knowledgeHubPointPeopleClick",{site:e,pointPeopleClickType:t})},descriptionCopyClick:e=>{this._sendFemetricsRate("knowledgeHubDescriptionCopyClick",{site:e})},suggestEditButtonClick:e=>{this._sendFemetricsRate("knowledgeHubSuggestEditButtonClick",{site:e})},featureToggleClick:(e,t)=>{this._sendFemetricsRate("knowledgeHubFeatureToggleClick",{site:e,featureState:t})},bgApiError:(e,t)=>{const n="bg.knowledgeHub.error",r=w(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:o.in.ERROR,extra:{json:r},sendToFemetrics:!0})},onboardingPopupShow:(e,t)=>{this._sendFemetricsRate("knowledgeHubOnboardingPopupShow",{onboardingType:e,site:t})},onboardingNextButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingNextButtonClick",{onboardingType:e,site:t,step:n})},onboardingSkipButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingSkipButtonClick",{onboardingType:e,site:t,step:n})},onboardingCloseButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingCloseButtonClick",{onboardingType:e,site:t,step:n})}},this._cbLog=e=>(0,s.HO)(((t,n,r,i)=>this._sendEvent({logger:"cs.citationBuilder",level:e,citationBuilderExtra:r,message:n,extra:(0,p.nG)(void 0,i)})),(e=>e)),this.citationBuilder={error:this._cbLog(o.in.ERROR),warning:this._cbLog(o.in.WARN),info:this._cbLog(o.in.INFO)},this.translateOnboarding={error:this._cbLog(o.in.ERROR),warning:this._cbLog(o.in.WARN),info:this._cbLog(o.in.INFO)},this._aiChatInterceptLog=e=>(0,s.HO)(((t,n,r,i)=>this._sendEvent({logger:"cs.aiChatIntercept",level:e,message:n,extra:(0,p.nG)(r,i)})),(e=>e)),this.aiChatIntercept={error:this._aiChatInterceptLog(o.in.ERROR),warning:this._aiChatInterceptLog(o.in.WARN),info:this._aiChatInterceptLog(o.in.INFO)},this.tsMintSDK={error:(e,t)=>this._sendEvent({logger:"cs.tsMintSDK.error",level:o.in.ERROR,message:t,extra:{json:(0,p.jA)({type:e,message:t})}})},this.humanWritingReport={error:(e,t,n,r)=>this._sendEvent({logger:"cs.humanWritingReport.error",level:o.in.ERROR,message:t,extra:{json:(0,p.jA)({type:e,message:t,domain:n,data:r})}}),warning:(e,t,n,r)=>this._sendEvent({logger:"cs.humanWritingReport.warn",level:o.in.WARN,message:t,extra:{json:(0,p.jA)({type:e,message:t,domain:n,data:r})}}),info:(e,t,n)=>{this._sendEvent({logger:"cs.humanWritingReport.info",level:o.in.INFO,message:e,extra:{json:(0,p.jA)({message:e,domain:t,data:n})}})}},this.alwaysAvailableAssistant={sendFeedback:({message:e,feedback:t,sessionId:n,domain:r})=>this._sendEvent({message:e,logger:"cs.alwaysAvailableAssistant.feedback",level:o.in.INFO,alwaysAvailableAssistantExtra:{feedback:t,sessionId:n,domain:r}}),chatsDeleted:()=>{this._sendFemetricsRate("aaaChatsDeleted")},trackUnexpectedAssistantOpen:e=>{this._sendFemetricsRate("trackUnexpectedAssistantOpen",{source:e})},openSidePanel:(e,t)=>{this._sendFemetricsRate("openSidePanel",{source:e,domain:(0,d.Cg)(),status:t})},getDeltaFromHtmlStringFailed:e=>{this._sendException({logger:"cs.alwaysAvailableAssistant.getDeltaFromHtmlStringFailed",level:o.in.ERROR})(e)},goSettingsLoadFailedBg:e=>{this._sendException({logger:"bg.alwaysAvailableAssistant.goSettingsLoadFailed",level:o.in.ERROR})(e)},goSettingsLoadFailedCs:e=>{this._sendException({logger:"cs.alwaysAvailableAssistant.goSettingsLoadFailed",level:o.in.ERROR})(e)}},this.g2LoggerFactory=({integrationName:e,level:t,loggerNameSuffix:n})=>({message:r,data:i={},error:o,feedbackData:s,hideUserInfo:a=!0})=>{let c;a?c={integrationName:e,feedbackData:s}:s&&(c={feedbackData:s,integrationName:s.domain?e:void 0}),this._sendEvent({logger:"cs.g2"+(n?`.${n}`:""),level:t,message:r,extra:{...o?(0,p.nG)(i,o):{json:(0,p.jA)(i)}},g2Extra:c,hideUserInfo:a})},this.promptEnhancerLoggerFactory=({integrationName:e,domain:t,level:n})=>({message:r,data:i={},error:o})=>{this._sendEvent({logger:"cs.promptEnhancer",level:n,message:r,extra:{...o?(0,p.nG)(i,o):{json:(0,p.jA)(i)}},promptEnhancerExtra:{integrationName:e,domain:(0,d.Cg)(t)}})},this.touchTypistLoggerFactory=({level:e})=>({message:t,error:n})=>{this._sendEvent({logger:"cs.touchTypist",level:e,message:t,extra:{...n?(0,p.nG)({},n):{json:(0,p.jA)({error:"Unknown error"})}}})},this._agentsLogger=({level:e,context:t,message:n,domain:r,data:i,error:o})=>{const s=void 0!==r,a=s?{...i,domain:r?(0,d.Cg)(r):void 0}:i;this._sendEvent({logger:`${t}.agents`,level:e,message:n,extra:{...o?(0,p.nG)(null!=a?a:{},o):{json:(0,p.jA)(a)}},hideUserInfo:s})},this.agents={bg:I("bg",this._agentsLogger),cs:e=>I("cs",this._agentsLogger,e),sidePanel:I("sidePanel",this._agentsLogger)},this.performance={processInput:this._createPerfLogger("cs.fluid.processInput",100),processAlerts:this._createPerfLogger("cs.fluid.processAlerts",10),processFilterChange:this._createPerfLogger("cs.fluid.processFilterChange",10),csInitialized:(e,t,n,r,i)=>{this._createPerfLogger("cs.initialized").custom({_tag:l.mW.Data.Tagged.Types.csInit,domain:self.location.host,hideUserInfo:!0,loadTime:e,initTime:t,pageLoadTime:n,injectTime:r,error:i?{message:i.message,stack:i.stack}:void 0})},viewInjection:e=>{this._createPerfLogger("cs.viewInjection").custom({_tag:l.mW.Data.Tagged.Types.viewInjection,...e})}},this.autocorrect={responseTime:this._createPerfLogger("cs.autocorrect.responseTime",10),predictTime:this._createPerfLogger("cs.autocorrect.predictTime",10),integrationCreated:()=>{this._sendFemetricsRate("autoCorrectIntegrationCreated")},triggered:()=>{this._sendFemetricsRate("autoCorrectTriggered")},cardLooked:()=>{this._sendFemetricsRate("autoCorrectCardLooked")},revertClick:()=>{this._sendFemetricsRate("autoCorrectRevertClick")},reverted:()=>{this._sendFemetricsRate("autoCorrectReverted")},acceptClick:()=>{this._sendFemetricsRate("autoCorrectAcceptClick")},settingsClick:e=>{this._sendFemetricsRate("autoCorrectSettingsClick",{autoCorrectSettingsMenuState:e})},turnOffUntilNextView:()=>{this._sendFemetricsRate("autoCorrectTurnOffUntilNextView")},affectedByTextChange:()=>{this._sendFemetricsRate("autoCorrectAffectedByTextChange")}},this.assistant={initTime:this._createPerfLogger("cs.assistant.initTime",1),renderTime:this._createPerfLogger("cs.assistant.renderTime",1),openTime:this._createPerfLogger("cs.assistant.openTime",1),alertManagerError:this._sendException({logger:"cs.assistant.alertManagerError",level:o.in.ERROR})},this.sharedAssistant={open:(e,t)=>{this._sendFemetricsRate("sharedAssistant.open",{domain:e,isIframe:t})}},this.proofit={availabilityQuotaError:e=>{this._sendEvent({logger:"cs.proofit.availability_quota_error",level:o.in.ERROR,extra:{json:JSON.stringify(e)}})},submitResponseError:e=>{this._sendEvent({logger:"cs.proofit.submit_response_error",level:o.in.ERROR,extra:{json:JSON.stringify(e)}})},progressError:e=>{this._sendEvent({logger:"cs.proofit.progress_error",level:o.in.ERROR,extra:{json:JSON.stringify(e)}})},progressRejected:e=>{this._sendEvent({logger:"cs.proofit.progress_rejected",level:o.in.WARN,extra:{json:JSON.stringify(e)}})}},this.oauthExchangeError=e=>{this._send("bg.oauth.exchange.error",o.in.ERROR,{message:e})},this.iterable={sideEffectGetIterableClientAccessToken:(e,t,n)=>{this._sendFemetricsRate("sideEffectGetIterableClientAccessToken",{status:e,type:t,statusCode:n})},refreshIterableClientAccessToken:(e,t)=>{this._sendFemetricsRate("refreshIterableClientAccessToken",{status:e,statusCode:t})},iterableClientAccessTokenIsNull:()=>{this._sendFemetricsRate("iterableClientAccessTokenIsNull")},iterableGetIPMByTrigger:e=>{this._sendFemetricsRate("iterableGetIPMByTrigger",{trigger:e})},iterableGetIPM:(e,t,n)=>{this._sendFemetricsRate("iterableGetIPM",{status:e,statusCode:t,retryCount:n})},iterableIPMOpen:(e,t,n,r)=>{this._sendFemetricsRate("iterableIPMOpen",{status:e,statusCode:t,retryCount:n,campaignId:r})},iterableIPMDelete:(e,t,n,r,i)=>{this._sendFemetricsRate("iterableIPMDelete",{status:e,action:t,statusCode:n,retryCount:r,campaignId:i})},iterableIPMExpired:e=>{this._sendFemetricsRate("iterableIPMExpired",{campaignId:e})},iterableIPMClick:(e,t,n,r)=>{this._sendFemetricsRate("iterableIPMClick",{status:e,statusCode:t,retryCount:n,campaignId:r})},iterableIPMClose:(e,t,n,r,i)=>{this._sendFemetricsRate("iterableIPMClose",{status:e,action:t,statusCode:n,retryCount:r,campaignId:i})},iterableCustomEvent:(e,t,n,r)=>{this._sendFemetricsRate("iterableCustomEvent",{status:e,statusCode:t,retryCount:n,campaignId:r})},iterableUserUpdate:(e,t,n)=>{this._sendFemetricsRate("iterableUserUpdate",{status:e,statusCode:t,retryCount:n})},iterableIPMFailed:e=>{this._sendFemetricsRate("iterableIPMFailed",{reason:e})},iterableIPMTrigger:(e,t,n)=>{this._sendFemetricsRate("iterableIPMTrigger",{trigger:e,isTriggerEnabled:t,isTriggerAfterRateLimit:n})},iterableIPMCooldown:e=>{this._sendFemetricsRate("iterableIPMCooldown",{campaignId:e})},iterableIPMGlobalCooldown:()=>{this._sendFemetricsRate("iterableIPMGlobalCooldown")},iterableIPMImageLoadingError:e=>{this._sendFemetricsRate("iterableIPMImageLoadingError",{campaignId:e})},iterableIPMNoMatchingMessages:(e,t)=>{this._sendFemetricsRate("iterableIPMNoMatchingMessages",{trigger:e,pendingMessageCount:t})},iterableIPMHide:e=>{this._sendFemetricsRate("iterableIPMHide",{reason:e})},logIterableApi:e=>{this._sendEvent({logger:"bg.iterable.api",level:o.in.WARN,extra:{json:e},sendToFemetrics:!1})}},this.mise={getIterableAccessToken:(e,t)=>{this._sendFemetricsRate("getIterableClientAccessToken",{status:e,statusCode:t})},logMISeApi:e=>{this._sendEvent({logger:"bg.mise.api",level:o.in.WARN,extra:{json:e},sendToFemetrics:!0})}},this.alerts={inconsistentAlertWithText:(e,t)=>{this._sendFemetricsRate("inconsistentAlertWithText",{context:e,source:t})},cannotShowInlineCard:(e,t)=>{this._sendFemetricsRate("cannotShowInlineCard",{context:e,domain:(0,d.Cg)(t)})},showInlineCard:e=>{this._sendFemetricsRate("showInlineCard",{domain:(0,d.Cg)(e)})}},this.authHooks={authHookShown:e=>{this._sendFemetricsRate("authHookShow",e)},authHookClick:e=>{this._sendFemetricsRate("authHookClick",e)}},this.upgradeHooks={showUpgradeHook:(e,t,n)=>{this._sendFemetricsRate("showPremiumButton",{upgradeHookName:e,upgradeHookSlot:t,upgradeHookVariant:n})},clickUpgradeHook:(e,t,n)=>{this._sendFemetricsRate("clickPremiumButton",{upgradeHookName:e,upgradeHookSlot:t,upgradeHookVariant:n})}},this.sdui={inlineItemNotFound:()=>{this._sendFemetricsRate("sduiInlineItemNotFound",void 0,["os","browserName"])},renderSduiInlineCard:()=>{this._sendFemetricsRate("renderSduiInlineCard",void 0,["os","browserName"])},renderCommonInlineCard:e=>{this._sendFemetricsRate("renderCommonInlineCard",e,["os","browserName"])}},this.sendToTabFailed=(e,t)=>{this._sendSampledEvent(_,{logger:"bg.connection.sendToTabFailed",level:o.in.ERROR,message:"send message to tab emit an error",extra:(0,p.nG)(e,t)})},this.noActiveTabId=e=>{this._sendFemetricsRate("simpleTransportNoActiveTabId",{message:e})},this.noTabId=e=>{this._sendFemetricsRate("simpleTransportNoTabId",{message:e})},this.debugReports={downloadSuccessfully:(e,t)=>{const n="debugReports.downloadSuccessfully",r=w(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:o.in.INFO,extra:{json:r},sendToFemetrics:!0})},downloadTimeout:(e,t)=>{const n="debugReports.downloadTimeout",r=w(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:o.in.WARN,extra:{json:r},sendToFemetrics:!0})},downloadError:(e,t)=>{const n="debugReports.downloadError",r=w(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:o.in.WARN,extra:{json:r},sendToFemetrics:!0})}},this.dialectSettingsError=e=>{this._sendException({logger:"bg.api.dialectService",level:o.in.ERROR})(e)},this.debugSelectiveLogoutGate=()=>{this._sendEvent({logger:"bg.user.debugSelectiveLogoutGate",level:o.in.INFO})},this.logoutSuccess=e=>{this._sendEvent({logger:"bg.user.logoutSuccess",level:o.in.INFO,extra:{json:JSON.stringify({reason:e})}})},this.logoutError=e=>{this._sendException({logger:"bg.user.logout",level:o.in.ERROR})(e)},this.logoutLastAuthnEventError=e=>{this._sendException({logger:"bg.user.logout.lastAuthnEvent",level:o.in.ERROR})(e)},this.serializeTransportMsgFailed=()=>{this._sendFemetricsRate("error",{logger:"bg.serialize.transport.message.failed",level:o.in.ERROR,message:"Failed to serialize rpc message"})},this.hiddenFieldInjectionFailed=()=>{this._sendFemetricsRate("error",{logger:"cs.hiddenField.injection.failed",level:o.in.ERROR,domain:(0,d.Cg)()})},this.skipIntegrationForNonHtmlPage=()=>{this._sendFemetricsRate("info",{logger:"cs.skip.integration.for.non.html.page",domain:S(self.location.hostname)})},this.backendManagedStorage={error:(e,t)=>{this._sendException({logger:"bg.backendManagedStorage",level:o.in.ERROR})(t,void 0,e)},warn:(e,t)=>{const n=w("backendManagedStorage.warn",t);this._sendEvent({logger:"bg.backendManagedStorage",level:o.in.WARN,message:e,extra:{json:n}})},info:e=>{this._sendEvent({logger:"bg.backendManagedStorage",level:o.in.INFO,message:e})}},this.cookiesAccessibility={enabled:()=>{this.sendFemetricsRate("cookiesAccessibility",{enabled:!0},["os","osVersion","userOrganizationType"])},disabled:(e,t)=>{this.sendFemetricsRate("cookiesAccessibility",{enabled:!1,reason:e},["os","osVersion","userOrganizationType"]),t&&this._sendEvent({logger:"bg.cookiesInaccessibile",level:o.in.ERROR,message:t})}},this.replacement={info:e=>{this.sendFemetricsRate("replacementInfo",e,["os","userOrganizationType"])},infoShort:e=>{this.sendFemetricsRate("replacementInfoShort",e)},infoShortExtended:e=>{this.sendFemetricsRate("replacementInfoShortExtended",e)},approximateMatched:e=>{this.sendFemetricsRate("replacementInfo.approximateMatched",e)},format:{short:e=>{this.sendFemetricsRate("replacementInfo.format.short",e)},alert:e=>{this.sendFemetricsRate("replacementInfo.format.alert",e)},style:e=>{this.sendFemetricsRate("replacementInfo.format.style",e)},hyperlinks:e=>{this.sendFemetricsRate("replacementInfo.format.hyperlinks",e)},smartChips:e=>{this.sendFemetricsRate("replacementInfo.format.smartChips",e)},footnotes:e=>{this.sendFemetricsRate("replacementInfo.format.footnotes",e)}},gOSInfo:e=>{this.sendFemetricsRate("replacementInfo.gOS",e)},gdocs:(e,t)=>{this.sendFemetricsRate("replacementInfo.gdocs",e,["os"]);for(const[n,r]of t)this.sendFemetricsRate(`replacementInfo.gdocs.byGate.${n}`,{...e,enabled:r},["os"])},gdocsByFeatures:({injectedFeatures:e,...t})=>{this.sendFemetricsRate("replacementInfo.gdocs.advanced.byFeatures",{...t,...R(e),hasLayout:void 0},["os"])},contentEditable:e=>{this.sendFemetricsRate("replacementInfo.contentEditable",e)},sessionCount:e=>{this.sendFemetricsRate("replacementSessionCount",e)},sessionStats:e=>{this.sendFemetricsRate("replacementSessionStats",e)},sessionStatsBySource:e=>{this.sendFemetricsRate("replacementSessionStatsBySource",e)},sessionStatsByReplacementType:e=>{this.sendFemetricsRate("replacementSessionStatsByReplacementType",e)},alert:e=>{this.sendFemetricsRate("replacementInfo.alert",e)},alertExtended:e=>{this.sendFemetricsRate("replacementInfo.alertExtended",e)},alertFailedLevenshteinDistance:e=>{this.sendFemetricsRate("replacementLevenshteinDistance",e)}},this.gOS={info:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:o.in.INFO,message:t,extra:n})},warn:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:o.in.WARN,message:t,extra:n})},error:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:o.in.ERROR,message:t,extra:(0,p.nG)(n)})}},this.inkwell={logLaunchInkwellErrorOnce:(0,s.hz)(this._sendException({logger:"inkwell.launchInkwellError",level:o.in.ERROR})),logConnectDocumentErrorOnce:(0,s.hz)(this._sendException({logger:"inkwell.connectDocumentError",level:o.in.ERROR})),logInkwellIntegrationErrorOnce:(0,s.hz)(this._sendException({logger:"inkwell.inkwellIntegrationError",level:o.in.ERROR})),launchInkwellSuccess:()=>{this._sendFemetricsRate("inkwell.launchInkwellSuccess")},launchInkwellError:e=>{this._sendFemetricsRate("inkwell.launchInkwellError",{message:e.message}),this.inkwell.logLaunchInkwellErrorOnce(e)},inkwellIntegrationError:e=>{this._sendFemetricsRate("inkwell.inkwellIntegrationError",{message:e.message}),this.inkwell.logLaunchInkwellErrorOnce(e)},connectDocumentSuccess:()=>{this._sendFemetricsRate("inkwell.connectDocumentSuccess")},connectDocumentError:e=>{this._sendFemetricsRate("inkwell.connectDocumentError",{message:e.message}),this.inkwell.logConnectDocumentErrorOnce(e)},gotGetDocumentTextRequest:(0,s.HO)((e=>this._sendFemetricsRate("inkwell.gotGetDocumentTextRequest")),(e=>e))},this.auth={manageModeTimeoutFail:e=>{this._sendFemetricsRate("auth.manageModeTimeoutFail",{message:e})}},this.connector={connected:()=>{this._sendFemetricsRate("connector.connected")},disconnected:e=>{this._sendFemetricsRate("connector.disconnected",{message:e})},connectionFailed:e=>{this._sendFemetricsRate("connector.connectionFailed",{message:e})},checkConnectionFailed:e=>{this._sendFemetricsRate("connector.checkConnectionFailed",{message:e})},handshakeFailed:e=>{this._sendFemetricsRate("connector.handshakeFailed",{message:e})},textFieldIntegrated:(e,t)=>{this._sendFemetricsRate("connector.textFieldIntegrated",{domain:e,integrationName:t})},permissionViewShow:e=>{this._sendFemetricsRate("connector.permissionViewShow",{placement:e})},permissionViewClicked:e=>{this._sendFemetricsRate("connector.permissionViewClicked",{placement:e})},permissionViewClosed:e=>{this._sendFemetricsRate("connector.permissionViewClosed",{placement:e})},permissionPromptAccepted:e=>{this._sendFemetricsRate("connector.permissionPromptAccepted",{placement:e})},permissionPromptDenied:e=>{this._sendFemetricsRate("connector.permissionPromptDenied",{placement:e})},permissionPromptFailed:(e,t)=>{this._sendFemetricsRate("connector.permissionPromptFailed",{placement:e,message:t})}},this.serviceAvailability={viewDuration:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.viewDuration",e,["os"],t)},totalViewDuration:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.totalViewDuration",e,["os"],t)},typingDuration:(e,t)=>{const n=a.hX((e=>!i.s.has(e)),e);this._sendFemetricsRate("serviceAvailabilityV2.typingDuration",n,["os"],t),this._sendFemetricsRate("serviceAvailabilityV2.typingDuration.extended",e,["os"],t)},totalTypingDuration:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.totalTypingDuration",e,["os"],t)},typingLength:(e,t)=>{const n=a.hX((e=>!i.s.has(e)),e);this._sendFemetricsRate("serviceAvailabilityV2.typingLength",n,["os"],t),this._sendFemetricsRate("serviceAvailabilityV2.typingLength.extended",e,["os"],t)},totalTypingLength:(e,t)=>{this._sendFemetricsRate("serviceAvailabilityV2.totalTypingLength",e,["os"],t)},amountOfViewedDomains:e=>{this._sendFemetricsRate("serviceAvailabilityV2.amountOfViewedDomains",{bucket:e},["os"],void 0)},amountOfTypedDomains:e=>{this._sendFemetricsRate("serviceAvailabilityV2.amountOfTypedDomains",{bucket:e},["os"],void 0)}},this.treatments={getTreatmentsFromCacheFail:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Failed to get treatments from cache",level:o.in.ERROR,extra:{exception:e,json:JSON.stringify({storageKey:t})}}),getTreatmentsFromServerFail:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Failed to get treatments from server",level:o.in.ERROR,extra:{exception:e,json:JSON.stringify({storageKey:t})}}),getFallbackTreatmentsSuccess:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Successfully received fallback treatments",level:o.in.INFO,extra:{json:JSON.stringify({treatments:e,storageKey:t})}}),getFallbackTreatmentsFail:(e,t)=>this._sendEvent({logger:"bg.treatmentStorageManager",message:"Failed to get fallback treatments",level:o.in.ERROR,extra:{exception:e,json:JSON.stringify({storageKey:t})}})},this.pageIntegrationLifecycle=e=>{this._sendFemetricsRate("pageIntegrationLifecycle",e,["os","userOrganizationType"])},this.interactionToNextPaint=(e,t)=>{this._sendFemetricsTimer("interactionToNextPaint",e,"histogram",t)}}_send(e,t,n){const r=w(e,n);try{this._sendFelog(e,String(null==n?void 0:n.message),t,n?{json:r}:void 0)}catch(t){g.warn(`Failed to send felog for ${e}: '${(0,u.H)(t)?t.message:"undefined"}'`,t)}}_sendUsage(e,t,n){if(this._sendUsageMetrics&&this._sendUsageMetricsSamplingRatio>Math.random())try{this._sendFelogUsage(e,"",t,n)}catch(t){g.warn(`Failed to send usage felog for ${e}: '${(0,u.H)(t)?t.message:"undefined"}'`,t)}}_sendSampled(e,t,n,r){e>Math.random()&&this._send(t,n,r)}_sendSampledEvent(e,t){e>Math.random()&&this._sendEvent(t)}_sendMetric(e,t){this._sendFelogMetricEvent({metricName:e,data:t})}sendCrashLogs(e,t){try{this._sendFelogCrashLogs(t)}catch(t){g.warn(`Failed to send crash data data for ${e}: '${(0,u.H)(t)?t.message:"undefined"}'`,t)}}setUserInfo(e){this._setUserInfo(e)}setContainerId(e){this._setContainerId(e)}enableDataSharing(){this._enableDataSharing()}notificationShown(e){this._send("cs.notification.show",o.in.INFO,{type:e})}notificationHide(e){this._send("cs.notification.hide",o.in.INFO,{type:e})}}var E,k;function C(e){return e?"Failed to fetch"===e?E.FAILED_FETCH:"Could not establish connection. Receiving end does not exist."===e||e.includes("No frame with id")||e.includes("No tab with id")||e.startsWith("Frame with ID")&&e.endsWith("was removed.")?E.TAB_NOT_EXISTS:e.startsWith("IO error:")?E.IO_ERROR:"The browser is shutting down."===e?E.BROWSER_SHUTTING_DOWN:"No available storage method found."===e?E.NO_STORAGE_METHOD_FOUND:"this._firefox is undefined"===e?E.FIREFOX_UNDEFINED:"Load failed"===e?E.LOAD_FAILED:"Unexpected user type for login reminder"===e?E.UNEXPECTED_USER_TYPE:E.OTHER:E.EMPTY}function T(e){return e?e.includes("executing a cancelled action")?k.ACTION_CANCELED:"Script error."===e?k.SCRIPT_ERROR:"object unsubscribed"===e?k.OBJECT_UNSUBSCRIBED:e.includes("is not a function")?k.INVALID_FUNCTION:k.OTHER:k.EMPTY}function S(e){const t=t=>e.endsWith(t),n=(0,d.Cg)(e);if("other"===n){const e=["pubmatic.com","quantumdex.io","gumgum.com","aniview.com","amazon-adsystem","nextmillmedia.com","doubleclick.net","adsrvr.org","adnxs.com","msn.com"].find(t);if(e)return e}return n}function R(e){return{strikethrough:e.useStrikethroughFiltering,codeBlocks:e.useCodeBlockFiltering}}function I(e,t,n){return{error:(r,i,s)=>t({context:e,level:o.in.ERROR,message:r,domain:n,error:i,data:s}),warn:(r,i,s)=>t({context:e,level:o.in.WARN,message:r,domain:n,error:i,data:s}),info:(r,i)=>t({context:e,level:o.in.INFO,message:r,domain:n,data:i})}}!function(e){let t;!function(e){e.fromPartial=e=>e}(t=e.Mock||(e.Mock={}))}(x||(x={})),function(e){e.FAILED_FETCH="FailedToFetch",e.TAB_NOT_EXISTS="TabNotExists",e.IO_ERROR="IOError",e.BROWSER_SHUTTING_DOWN="BrowserShuttingDown",e.FIREFOX_UNDEFINED="FirefoxUndefined",e.LOAD_FAILED="LoadFailed",e.UNEXPECTED_USER_TYPE="UnexpectedUserType",e.NO_STORAGE_METHOD_FOUND="NoStorageMethodFound",e.EMPTY="Empty",e.OTHER="Other"}(E||(E={})),function(e){e.ACTION_CANCELED="ActionCanceled",e.SCRIPT_ERROR="ScriptError",e.OBJECT_UNSUBSCRIBED="ObjectUnsubscribed",e.INVALID_FUNCTION="InValidFunction",e.EMPTY="Empty",e.OTHER="Other"}(k||(k={}))},52439:(e,t,n)=>{n.d(t,{r:()=>r});const r="tracking/RPC"},11950:(e,t,n)=>{n.d(t,{_:()=>s});var r=n(44675),i=n(40594),o=n(52439);function s(e,t=i.Y.create("lib.tracking.call.transport")){return new Proxy({},{get:(n,i)=>{if("enableDataSharing"!==i)return(...n)=>{Promise.race([e.api.trackCall(o.r,[i,...n]).then((()=>null)),(0,r.gw)(1e4).then((()=>new Error("timeout call through bg page")))]).then((e=>e&&t.warn("tracking call timeout",e))).catch((e=>t.warn("tracking call failed, reason:",e)))}}})}},70565:(e,t,n)=>{n.d(t,{W:()=>r});class r{constructor(e){this._onMeasure=e}measure(e){const t=performance.now();let n=!1;try{const r=e();return n=!0,r}finally{this._onMeasure(performance.now()-t,n)}}async measureAsync(e){const t=performance.now();let n=!1;try{const r=await e();return n=!0,r}finally{this._onMeasure(performance.now()-t,n)}}}},20489:(e,t,n)=>{n.d(t,{Rv:()=>r,mW:()=>o});var r,i,o,s=n(78767),a=n(83473);!function(e){function t(){return{dummy:!0,startMeasure:()=>({endMeasure:()=>{},cancelMeasure:s.EI}),measure:e=>e(),measureAsync:e=>e(),custom:s.EI}}e.dummy=t,e.dummyFactoryInitialization=()=>()=>t()}(r||(r={})),function(e){e.dummy={flushMeasures:e=>[],measure:(e,t)=>t(),startMeasure:e=>({endMeasure(){},cancelMeasure(){}})}}(i||(i={})),function(e){let t;!function(e){let t;!function(e){let t;!function(e){e.stats="stats",e.csInit="csInit",e.viewInjection="viewInjection"}(t=e.Types||(e.Types={}))}(t=e.Tagged||(e.Tagged={}))}(t=e.Data||(e.Data={})),e.getStats=function(e){if(0===e.length)return{ct:0};{const t=e.reduce(((e,t)=>Math.min(e,t)),Number.MAX_VALUE),n=e.reduce(((e,t)=>Math.max(e,t)),Number.MIN_VALUE),r=e.length>=6?(0,a.J6)(e):void 0;return{ct:e.length,min:t,max:n,range:n-t,avg:r,stddev:void 0!==r&&e.length>1?(0,a.m)(e,r):void 0}}}}(o||(o={}))},91957:(e,t,n)=>{n.d(t,{Cg:()=>s,ZE:()=>o});var r=n(25693),i=n(16381);function o(e){return c.includes(e)}function s(e=(0,r.ge)(),t="other"){var n;return(0,i.pZ)()?"null":o(e)?null!==(n=function(e){var t,n;return null!==(n=null===(t=c.getTopSiteId(e))||void 0===t?void 0:t.match)&&void 0!==n?n:null}(e))&&void 0!==n?n:"null":t}const a=new Set(["docs.google.com"]);const c=new class{constructor(e,t=new Set){function n(e){return`Invalid pattern "${e}": "*" is allowed only at start and/or end position`}this._patternsWithPath=t,this._equal=[],this._prefix=[],this._suffix=[],this._infix=[],this._domain=[];for(const t of e)if(t.startsWith("**."))this._domain.push({pattern:t,match:t.substring(3)});else{const e=t.indexOf("*");if(-1===e)this._equal.push({pattern:t,match:t});else if(e===t.length-1)this._prefix.push({pattern:t,match:t.substring(0,e)});else{if(0!==e)throw new Error(n(t));{const e=t.indexOf("*",1);if(-1===e)this._suffix.push({pattern:t,match:t.substring(1)});else{if(e!==t.length-1)throw new Error(n(t));this._infix.push({pattern:t,match:t.substring(1,e)})}}}}}getTopSiteId(e){var t,n,r,i,o,s,a;return null!==(s=null!==(o=null!==(i=null!==(r=null!==(n=null!==(t=this._equal.find((t=>t.match===e)))&&void 0!==t?t:this._domain.find((t=>t.match===e)))&&void 0!==n?n:(a=this._domain.find((t=>e.endsWith("."+t.match))))?{match:"**."+a.match,pattern:a.pattern}:void 0)&&void 0!==r?r:this._prefix.find((t=>e.startsWith(t.match))))&&void 0!==i?i:this._suffix.find((t=>e.endsWith(t.match))))&&void 0!==o?o:this._infix.find((t=>e.includes(t.match))))&&void 0!==s?s:null}getTopSiteFirstPathComponent(e,t){var n,r;const i=null===(n=this.getTopSiteId(e))||void 0===n?void 0:n.pattern;return i&&this._patternsWithPath.has(i)&&null!==(r=null==t?void 0:t.replace(/^\//,"").split("/")[0])&&void 0!==r?r:null}includes(e){return null!==this.getTopSiteId(e)}}(["mail.google.com","translate.google.*","docs.google.com","web.whatsapp.com","facebook.com","outlook.*","linkedin.com","zendesk.*","youtube.com","twitter.com","x.com","messenger.com","*.slack.*","*canvas*","*instructure*","trello.com","editor.wix.com","quizlet.com","mail.yahoo.com","*.force.*","keep.google.com","vk.com","fanyi.baidu.com","app.bullhornstaffing.com","app.qa-world.com","calendar.google.com","papago.naver.com","wordcounter.net","blogger.*","wattpad.com","**.wordpress.com","amazon.*","smallseotools.com","create.kahoot.it","apps.rackspace.com","basecamp.com","varsitytutors.com","canva.com","fanyi.youdao.com","reverso.net","message.alibaba.com","*schoology*","*.blackboard.*","classroom.google.com","*upwork*","business.facebook.com","medium.com","mail.aol.com","workhub.transcribeme.com","github.com","overleaf.com","chat.openai.com","chatgpt.com","**.substack.com","**.atlassian.net","**.greenhouse.io","**.lattice.com","**.latticehq.com","**.salesforce.com","**.force.com","**.zendesk.com","**.microsoftonline.com","**.outlook.com","**.facebook.com","**.messenger.com","**.genesys.com","**.cisco.com","**.avaya.com","**.oraclecloud.com","**.five9.com","**.tawk.to","**.helpscout.com","**.livechat.com","**.intercom.com","**.freshdesk.com","**.liveagent.com","**.hubspot.com","google.com","chat.google.com","classroom.google.com","quillbot.com","notion.so","**.peardeck.com","discord.com","**.officeapps.live.com","student.desmos.com","web.kamihq.com","deepl.com","upwork.com","app.nearpod.com","bard.google.com","instagram.com","teams.microsoft.com","studio.youtube.com","learning.amplify.com","commonlit.org","**.asana.com","reddit.com","forms.office.com","sites.google.com","*amazon.co*","apps.studysync.com","fiverr.com","newsnow.io","coda.io","mail.superhuman.com","groups.google.com"],a)},24007:(e,t,n)=>{n.d(t,{SH:()=>_,jA:()=>a,nG:()=>c});var r=n(28898),i=n(78767),o=n(31272),s=n(7176);function a(e){try{return JSON.stringify(e,((e,t)=>(0,s.pb)(t)))}catch(e){return JSON.stringify({json_error:"Cannot json stringify"})}}function c(e,t){return{json:a(e),exception:t?{name:t.name,message:t.message,stack:t.stack?d(t.stack):void 0,...(0,o.Kn)(t.extra)?t.extra:{}}:void 0}}function u(){return(0,r.O)().browserApi.baseUri}const l={chromium:["<anonymous>","native","unknown location"],firefox:[],safari:["[native code]"]};function d(e,{browser:t=(0,r.O)().config.bundleInfo.browser,extensionBaseUri:n=u()}={}){if(!e)return e;const o=l["chrome"===t||"edge"===t?"chromium":t],s=e=>o.some((t=>e.startsWith(t)))||n&&e.startsWith(n),a=e.split("\n");if("chrome"===t||"edge"===t){const e=[];let t=0;for(;t<a.length&&!a[t].startsWith("    at ");)e.push(a[t]),t++;for(;t<a.length;){const n=(c=a[t],d=void 0,_=void 0,b=void 0,null===(b=null!==(_=null!==(d=h.exec(c))&&void 0!==d?d:f.exec(c))&&void 0!==_?_:p.exec(c))||void 0===b?void 0:b[1]);n?s(n)?e.push(a[t]):e.push("    at <hidden>"):e.push("    <unparsed>"),t++}return e.join("\n")}if("firefox"===t||"safari"===t)return a.map((e=>[e,"firefox"===t?g(e):m(e)])).map((([e,t])=>void 0===t?"<unparsed>":s(t)?e:"<hidden>")).join("\n");var c,d,_,b;(0,i.vE)(t)}const h=/^ {4}at ([^(]*)$/,f=/^ {4}at [^(]* \(([^()]*)\)$/,p=/^ {4}at eval \([^(]* \(([^()]*)\)\)$/;function g(e){return e.split("@",2)[1]}function m(e){var t;return null!==(t=e.split("@",2)[1])&&void 0!==t?t:e}function _(e,t){if(0===e.length)return[[-1/0,1/0,""]];const n=e=>void 0===t?e.toString():e.toExponential(t),r=new Array(e.length+1);let i=-1/0,o=e[0];r[0]=[i,o,`<${n(o)}`];for(let t=1;t<e.length;t++)i=o,o=e[t],r[t]=[i,o,`>=${n(i)}, <${n(o)}`];return r[e.length]=[o,1/0,`>=${n(o)}`],r}},51560:(e,t,n)=>{n.d(t,{V:()=>i,m:()=>r});function r(e){return`grammarly-${e}`}function i(e){return`data-grammarly-${e}`}},39397:(e,t,n)=>{function r(){return self.matchMedia&&self.matchMedia("(prefers-color-scheme: dark)").matches}n.d(t,{Y:()=>r})},13736:(e,t,n)=>{n.d(t,{E:()=>r});var r,i=n(44071),o=n(90572),s=n(44675),a=n(20905),c=n(40594),u=n(24183),l=n(29483);!function(e){const t=c.Y.create("Reports");function n(e){var t;const n=null===(t=self.document)||void 0===t?void 0:t.createElement("a");n.href="data:application/octet-stream,"+encodeURIComponent(function(e){const t=e=>{try{return JSON.stringify(e)}catch(t){return String(e)}};return[["Level","Logger","Timestamp","Message"].join("\t"),...e.map((e=>{const n=[e.level,e.loggerName,new Date(e.timestamp).toISOString(),e.message];return e.data&&n.push(t(e.data)),e.exception&&n.push(t(e.exception)),n.join("\t")}))].join("\n")}(e)),n.target="_blank",n.download="grammarly-logs.tsv",n.click()}async function r(e){if(t.debug("start download debug reports"),!(0,l.OB)().historyLogsService.isHistoryEnabled())return t.debug("debug reports feature is not enabled"),alert("Logging is not enabled");if(!self.confirm(u.o1))return;t.debug("confirm download debug reports");const r=[];e.sort((e=>e.envName===(0,l.OB)().context?1:-1));try{await(0,s.Fb)(a.E0,d())}catch(e){t.warn("cannot get latest app state",e)}for(const t of e){const e=await t.getLogs();r.push(...null!=e?e:[])}r.sort(((e,t)=>e.timestamp-t.timestamp)),n(r)}async function d(){t.info("latest experiments state",await(0,l.OB)().bgRpc.api.getExperimentTreatment()),t.info("latest storage state",await(0,l.OB)().browserApi.preferences.getAll()),t.info("browser info",(0,l.OB)().browserApi.getBrowserInfo())}e.download=r,e.initKeyboardShortcutHandler=function(e){return(0,i.R)(self,"keydown").pipe((0,o.h)((e=>e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)))).subscribe((t=>{["Semicolon","KeyD"].includes(t.code)?(0,l.OB)().bgRpc.api.toggleDebugMenu(!0):"KeyS"===t.code&&r(e)}))},e.logLatestState=d}(r||(r={}))},56623:(e,t,n)=>{n.d(t,{r:()=>l});var r=n(28898),i=n(39963),o=n(44675),s=n(40594),a=n(36897),c=n(24183),u=n(67960);class l{constructor(e,t,n,r=s.Y.create("DebugReportsGetterImpl")){this._envName=e,this._getLogsDefault=t,this._getLogsFallback=n,this._log=r}_getLogMessage(e,t){return t===u.l.fallback?`${e} from ${t}`:e}async _getLogs(e,t,n){const s=(0,r.O)().context;this._log.debug(this._getLogMessage(`start get ${this._envName} logs`,t));try{const r=await Promise.race([e(),(0,o.gw)(n).then((()=>{(0,i.Tb)().debugReports.downloadTimeout(s,this._envName),this._log.warn(this._getLogMessage(`get ${this._envName} logs timeout`,t))}))]);return r?((0,i.Tb)().debugReports.downloadSuccessfully(s,this._envName),this._log.debug(this._getLogMessage(`successfully get ${this._envName}`,t)),r.map((e=>({...e,loggerName:`${this._envName}.${e.loggerName}`})))):void this._log.warn(this._getLogMessage(`${this._envName} logs is not defined`,t))}catch(e){return(0,i.Tb)().debugReports.downloadError(s,this._envName),void this._log.warn(this._getLogMessage(`fail to get ${this._envName} logs`,t),e)}}get envName(){return this._envName}async getLogs(){return await this._getLogs(this._getLogsDefault,u.l.default,c.EU)||(this._getLogsFallback?await this._getLogs(this._getLogsFallback,u.l.fallback,c.q7):void 0)}static getLogsFromSessionStorageFallbackGetter(e,t=(()=>(0,r.O)().browserApi.sessionStorage)){return()=>t().get(e).then((t=>{const n=t[e];return Array.isArray(n)?n.map((e=>{try{return JSON.parse(e)}catch(t){return{level:a.in.WARN,loggerName:l.name,message:"Cannot parsed backup data!",timestamp:e.timestamp,data:{json:e},exeption:t}}})):void 0}))}}},24183:(e,t,n)=>{n.d(t,{EU:()=>i,o1:()=>s,q7:()=>o});var r=n(20905);const i=r.m9(3),o=r.E0,s='Click on "OK," will attempt to download a file with the information needed to investigate the issue you are experiencing. This archive may include domains you have recently visited and the text from the document you are typing in. To minimize the amount of sensitive information you share with us, we recommend that you (1) open a new browser window, (2) visit only the website where you can reproduce this issue, and (3) type in a document that includes only text you are comfortable sharing. For more details, see our Privacy Policy (https://www.grammarly.com/privacy-policy).'},67960:(e,t,n)=>{var r,i;n.d(t,{l:()=>r,v:()=>i}),function(e){e.default="default",e.fallback="fallback"}(r||(r={})),function(e){e.bgHistoryLogs="bgHistoryLogs",e.popupHistoryLogs="popupHistoryLogs",e.sidePanelHistoryLogs="sidePanelHistoryLogs",e.csHistoryLogs="csHistoryLogs"}(i||(i={}))},29483:(e,t,n)=>{n.d(t,{OB:()=>o,OD:()=>i,nD:()=>s});var r=n(28898);class i extends r.P{static getInstance(){if(void 0===this._instanceCSShared)throw new Error("nonBG Env not inited yet");return this._instanceCSShared}static get isInited(){return void 0!==this._instanceCSShared}static initShared(e){if(void 0!==this._instanceCSShared)throw new Error("nonBG Env already inited");this._instanceCSShared=e,r.P.initShared(e)}}function o(){return i.getInstance()}function s(e=o()){return e.config.systemInfo.os.isMac}},43795:(e,t,n)=>{n.d(t,{GH:()=>a,Xv:()=>s,dU:()=>c});var r=n(9986),i=n(90189),o=n(90595);function s(e={enabled:!1},t){const n=t||(0,i.OB)().experimentClient;return e.enabled&&(null==n?void 0:n.isGateEnabled(o.K.SessionTimeout))}function a(e){try{return JSON.parse(e).refresh_token_expires_at}catch(e){return}}function c(e){if(!e)return!1;return e-Date.now()<=r.p7}},21708:(e,t,n)=>{var r=n(29929),i=n(7278)(r);i.push([e.id,"._cWTM9-animatedUnderline{visibility:hidden;position:fixed;}._cWTM9-animatedUnderline:after{content:'';position:absolute;visibility:visible;height:3px;bottom:0;border-radius:10px;background:#488cc8;animation:_Axb1F-showUnderline 1.3s ease forwards}._cWTM9-animatedUnderline._qSuCO-completeAnimation:after{animation:_Axb1F-showUnderline .2s ease forwards}@keyframes _Axb1F-showUnderline{0%{width:0%}100%{width:100%}}._hoLGP-checkAnimatedUnderline{animation:_Axb1F-showUnderline 2s ease forwards;}._hoLGP-checkAnimatedUnderline._qSuCO-completeAnimation{animation:_Axb1F-showUnderline .2s ease forwards}",""]),i.locals={animatedUnderline:"_cWTM9-animatedUnderline",showUnderline:"_Axb1F-showUnderline",completeAnimation:"_qSuCO-completeAnimation",checkAnimatedUnderline:"_hoLGP-checkAnimatedUnderline"},e.exports=i},7278:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&s[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),t.push(l))}},t}},29929:e=>{e.exports=function(e){return e[1]}},2841:(e,t,n)=>{n.d(t,{V:()=>i});var r=n(18117);function i(e){var t=(0,r.gM)(e);return function(n){return{concat:t(n).concat,empty:e.of(n.empty)}}}},18117:(e,t,n)=>{n.d(t,{N:()=>s,Qt:()=>c,Yt:()=>p,a1:()=>a,ap:()=>o,gM:()=>u,gz:()=>f});var r=n(90023),i=n(72816);function o(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function s(e){return function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}}}function a(e){return function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}}function c(e){return function(t,n){return function(r){return e.ap(e.map(r,(function(e){return function(n){var r;return Object.assign({},e,((r={})[t]=n,r))}})),n)}}}function u(e){return function(t){return{concat:function(n,r){return e.ap(e.map(n,(function(e){return function(n){return t.concat(e,n)}})),r)}}}}function l(e,t,n){return function(r){for(var i=Array(n.length+1),o=0;o<n.length;o++)i[o]=n[o];return i[n.length]=r,0===t?e.apply(null,i):l(e,t-1,i)}}var d={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(i){return[e,t,n,r,i]}}}}}};function h(e){return i.e$.call(d,e)||(d[e]=l(r.bc,e-1,[])),d[e]}function f(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=h(r),o=e.map(t[0],i),s=1;s<r;s++)o=e.ap(o,t[s]);return o}}function p(e){return function(t){for(var n=Object.keys(t),r=n.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var n;return(n={})[e[0]]=t,n};case 2:return function(t){return function(n){var r;return(r={})[e[0]]=t,r[e[1]]=n,r}};case 3:return function(t){return function(n){return function(r){var i;return(i={})[e[0]]=t,i[e[1]]=n,i[e[2]]=r,i}}};case 4:return function(t){return function(n){return function(r){return function(i){var o;return(o={})[e[0]]=t,o[e[1]]=n,o[e[2]]=r,o[e[3]]=i,o}}}};case 5:return function(t){return function(n){return function(r){return function(i){return function(o){var s;return(s={})[e[0]]=t,s[e[1]]=n,s[e[2]]=r,s[e[3]]=i,s[e[4]]=o,s}}}}};default:return l((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i={},o=0;o<t;o++)i[e[o]]=n[o];return i}),t-1,[])}}(n),o=e.map(t[n[0]],i),s=1;s<r;s++)o=e.ap(o,t[n[s]]);return o}}},81346:(e,t,n)=>{function r(e){var t=i(e);return function(e){return function(n){return t(n,e)}}}function i(e){return function(t,n){return e.chain(t,(function(t){return e.map(n(t),(function(){return t}))}))}}n.d(t,{bw:()=>i,mU:()=>r})},67101:(e,t,n)=>{n.d(t,{_:()=>r});var r=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},12518:(e,t,n)=>{n.d(t,{$4:()=>pe,DT:()=>z,EQ:()=>Z,Eh:()=>C,F2:()=>d,G5:()=>A,Gg:()=>ce,KB:()=>X,KC:()=>ae,LF:()=>ne,Pd:()=>M,Rx:()=>he,UI:()=>T,VS:()=>h,Vn:()=>G,Y$:()=>te,Y3:()=>oe,Yo:()=>W,Zl:()=>le,bw:()=>ee,dO:()=>S,fS:()=>Q,g_:()=>J,i$:()=>se,ij:()=>ie,iy:()=>ue,nM:()=>V,ov:()=>k,pF:()=>Y,t$:()=>l,tO:()=>$,tS:()=>de,vx:()=>re,wE:()=>fe});var r=n(2841),i=n(81346),o=n(67101),s=n(10522),a=n(90023),c=n(50271),u=n(72816),l=u.t$,d=u.F2,h=(0,a.OB)(2,(function(e,t){return V(e)?e:t(e.right)})),f=function(e,t){return(0,a.zG)(e,T(t))},p=function(e,t){return(0,a.zG)(e,I(t))},g=function(e,t,n){return(0,a.zG)(e,P(t,n))},m=function(e){return function(t,n){var r=N(e);return(0,a.zG)(t,r(n))}},_=function(e,t,n){return(0,a.zG)(e,L(t,n))},b=function(e){var t=D(e);return function(e,n){return(0,a.zG)(e,t(n))}},v=function(e,t,n){return(0,a.zG)(e,M(t,n))},y=function(e,t){return(0,a.zG)(e,G(t))},w=function(e,t){return(0,a.zG)(e,j(t))},x=function(e,t){return(0,a.zG)(e,q(t))},E=function(e,t){return(0,o._)(t(e),(function(e){return V(e)?d(l(e.left)):V(e.right)?l(t(e.right.left)):d(d(e.right.right))}))},k="Either",C=function(e,t){return{equals:function(n,r){return n===r||(V(n)?V(r)&&e.equals(n.left,r.left):$(r)&&t.equals(n.right,r.right))}}},T=function(e){return function(t){return V(t)?t:d(e(t.right))}},S={URI:k,map:f},R=((0,a.OB)(2,(0,c.as)(S)),(0,c.Ep)(S),d),I=function(e){return function(t){return V(t)?t:V(e)?e:d(t.right(e.right))}},A={URI:k,map:f,ap:p},O={URI:k,map:f,ap:p,of:R},F={URI:k,map:f,ap:p,chain:h},P=function(e,t){return function(n){return V(n)?e:t(e,n.right)}},N=function(e){return function(t){return function(n){return V(n)?e.empty:t(n.right)}}},L=function(e,t){return function(n){return V(n)?e:t(n.right,e)}},D=function(e){return function(t){return function(n){return V(n)?e.of(l(n.left)):e.map(t(n.right),d)}}},U=function(e){return function(t){return V(t)?e.of(l(t.left)):e.map(t.right,d)}},M=function(e,t){return function(n){return V(n)?l(e(n.left)):d(t(n.right))}},G=function(e){return function(t){return V(t)?l(e(t.left)):t}},j=function(e){return function(t){return V(t)?e():t}},q=function(e){return function(t){return V(t)?t:d(e(t))}},B=l,H={URI:k,fromEither:a.yR},z=(0,s.DT)(H),W=(0,s.Yo)(H),V=u.nM,$=u.tO,K=function(e,t){return function(n){return V(n)?e(n.left):t(n.right)}},X=K,Z=K,J=Z,Y=function(e){return function(t){return V(t)?e(t.left):t.right}},Q=Y,ee=(0,a.OB)(2,i.bw(F)),te=(0,s.Y$)(H,F),ne=function(e){return V(e)?d(e.left):l(e.right)},re=function(e){return function(t){return V(t)?e(t.left):t}},ie=function(e){return function(t){return null==t?l(e):d(t)}},oe=function(e,t){try{return d(e())}catch(e){return l(t(e))}},se=X(a.yR,a.yR);function ae(e){return e instanceof Error?e:new Error(String(e))}var ce=function(e){return function(t){return!V(t)&&e(t.right)}},ue=(u.F4,u.Xl,function(e){return function(t){var n=e(0,u.YM(t));if(V(n))return n;for(var r=[n.right],i=1;i<t.length;i++){var o=e(i,t[i]);if(V(o))return o;r.push(o.right)}return d(r)}}),le=h,de=h;function he(e,t){return oe((function(){return JSON.parse(e)}),t)}var fe={URI:k,map:f,of:R,ap:p,chain:h,reduce:g,foldMap:m,reduceRight:_,traverse:b,sequence:U,bimap:v,mapLeft:y,alt:w,extend:x,chainRec:E,throwError:B},pe=(0,r.V)(O)},21147:(e,t,n)=>{n.d(t,{IP:()=>l,MW:()=>d,Uz:()=>o,f7:()=>r,lr:()=>p,n_:()=>i,ov:()=>s,uZ:()=>u,vD:()=>h,w4:()=>a,yv:()=>f});n(90023);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},i=function(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},o=function(e){return function(t){return r((function(n,r){return t.equals(e(n),e(r))}))}},s="Eq",a={equals:function(e,t){return e===t}},c={equals:function(){return!0}},u=function(){return{concat:function(e,t){return r((function(n,r){return e.equals(n,r)&&t.equals(n,r)}))},empty:c}},l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r((function(t,n){return e.every((function(e,r){return e.equals(t[r],n[r])}))}))},d=i,h=(a.equals,a),f=a,p=a},10522:(e,t,n)=>{n.d(t,{DT:()=>a,WB:()=>l,Y$:()=>u,Yo:()=>s});var r=n(81346),i=n(90023),o=n(72816);function s(e){return function(t){return function(n){return e.fromEither(o.Wi(n)?o.t$(t()):o.F2(n.value))}}}function a(e){return function(t,n){return function(r){return e.fromEither(t(r)?o.F2(r):o.t$(n(r)))}}}function c(e){return function(t){return(0,i.ls)(t,e.fromEither)}}function u(e,t){return function(n,r){return function(i){return t.chain(i,(function(t){return e.fromEither(n(t)?o.F2(t):o.t$(r(t)))}))}}}function l(e,t){var n=c(e),i=(0,r.bw)(t);return function(e,t){return i(e,n(t))}}},50271:(e,t,n)=>{function r(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function i(e){return function(t){return function(n){return e.map(n,(function(e){var n;return(n={})[t]=e,n}))}}}function o(e){return function(t,n){return function(r){return e.map(r,(function(e){var r;return Object.assign({},e,((r={})[t]=n(e),r))}))}}}function s(e){return function(t,n){return e.map(t,(function(){return n}))}}function a(e){var t=s(e);return function(e){return t(e,void 0)}}n.d(t,{Ep:()=>a,Hr:()=>o,UI:()=>r,YO:()=>i,as:()=>s})},58303:(e,t,n)=>{n.d(t,{$4:()=>Fe,DT:()=>m,DZ:()=>te,EQ:()=>ge,Eh:()=>F,FS:()=>Ee,G:()=>g,G5:()=>G,Gg:()=>ke,Kw:()=>Oe,NG:()=>we,Qt:()=>Te,RD:()=>Ie,UI:()=>L,Uo:()=>le,WG:()=>xe,Wi:()=>fe,YO:()=>Ce,YP:()=>p,ZN:()=>O,dO:()=>D,fS:()=>be,g1:()=>j,gW:()=>Pe,g_:()=>me,hX:()=>ee,ij:()=>ye,of:()=>U,pC:()=>he,pF:()=>_e,pR:()=>P,tS:()=>Ae,uZ:()=>N,vx:()=>V,wp:()=>$,xH:()=>ve});var r=n(2841),i=n(18117),o=n(81346),s=n(10522),a=n(90023),c=n(50271),u=n(72816),l=n(61179),d=n(14911),h=n(25262),f=n(6609),p=u.YP,g=u.G;function m(e){return function(t){return e(t)?g(t):p}}var _=function(e){return"Left"===e._tag?p:g(e.right)},b=function(e,t){return(0,a.zG)(e,L(t))},v=function(e,t){return(0,a.zG)(e,M(t))},y=function(e,t,n){return(0,a.zG)(e,H(t,n))},w=function(e){var t=z(e);return function(e,n){return(0,a.zG)(e,t(n))}},x=function(e,t,n){return(0,a.zG)(e,W(t,n))},E=function(e){var t=ie(e);return function(e,n){return(0,a.zG)(e,t(n))}},k=function(e,t){return(0,a.zG)(e,$(t))},C=function(e,t){return(0,a.zG)(e,ee(t))},T=function(e,t){return(0,a.zG)(e,te(t))},S=function(e,t){return(0,a.zG)(e,X(t))},R=function(e,t){return(0,a.zG)(e,ne(t))},I=function(e,t){return(0,a.zG)(e,re(t))},A="Option",O=function(e){return{show:function(t){return fe(t)?"none":"some(".concat(e.show(t.value),")")}}},F=function(e){return{equals:function(t,n){return t===n||(fe(t)?fe(n):!fe(n)&&e.equals(t.value,n.value))}}},P=function(e){return{equals:F(e).equals,compare:function(t,n){return t===n?0:he(t)?he(n)?e.compare(t.value,n.value):1:-1}}},N=function(e){return{concat:function(t,n){return fe(t)?n:fe(n)?t:g(e.concat(t.value,n.value))},empty:p}},L=function(e){return function(t){return fe(t)?p:g(e(t.value))}},D={URI:A,map:b},U=((0,a.OB)(2,(0,c.as)(D)),(0,c.Ep)(D),g),M=function(e){return function(t){return fe(t)||fe(e)?p:g(t.value(e.value))}},G={URI:A,map:b,ap:v},j={URI:A,map:b,ap:v,of:U},q=(0,a.OB)(2,(function(e,t){return fe(e)?p:t(e.value)})),B={URI:A,map:b,ap:v,chain:q},H=function(e,t){return function(n){return fe(n)?e:t(e,n.value)}},z=function(e){return function(t){return function(n){return fe(n)?e.empty:t(n.value)}}},W=function(e,t){return function(n){return fe(n)?e:t(n.value,e)}},V=(0,a.OB)(2,(function(e,t){return fe(e)?t():e})),$=V,K=function(){return p},X=function(e){return function(t){return fe(t)?p:g(e(t))}},Z=q(a.yR),J=(0,h.s4)(p,p),Y=function(e){return fe(e)?J:(0,h.s4)(function(e){return"Right"===e._tag?p:g(e.left)}(e.value),_(e.value))},Q={URI:A,compact:Z,separate:Y},ee=function(e){return function(t){return fe(t)?p:e(t.value)?t:p}},te=function(e){return function(t){return fe(t)?p:e(t.value)}},ne=function(e){return function(t){return(0,h.s4)(C(t,(0,l.ff)(e)),C(t,e))}},re=function(e){return(0,a.ls)(L(e),Y)},ie=function(e){return function(t){return function(n){return fe(n)?e.of(p):e.map(t(n.value),g)}}},oe=function(e){return function(t){return fe(t)?e.of(p):e.map(t.value,g)}},se={URI:A,map:b,reduce:y,foldMap:w,reduceRight:x,traverse:E,sequence:oe},ae=(0,f.BL)(se,Q),ce=(0,f.Fj)(se,Q),ue=function(){return p},le=_,de={URI:A,fromEither:le},he=u.pC,fe=function(e){return"None"===e._tag},pe=function(e,t){return function(n){return fe(n)?e():t(n.value)}},ge=pe,me=ge,_e=function(e){return function(t){return fe(t)?e():t.value}},be=_e,ve=Z,ye=(o.bw(B),(0,s.WB)(de,B),function(e){return null==e?p:g(e)}),we=function(e){return function(t){return fe(t)?p:ye(e(t.value))}},xe=ge(a.gn,a.yR),Ee=ge(a.r5,a.yR);var ke=function(e){return function(t){return!fe(t)&&e(t.value)}},Ce=(u.F4,(0,c.YO)(D)),Te=(0,i.Qt)(G),Se=U(u.Xl),Re=function(e){var t=function(e){return function(t){var n=e(0,u.YM(t));if(fe(n))return p;for(var r=[n.value],i=1;i<t.length;i++){var o=e(i,t[i]);if(fe(o))return p;r.push(o.value)}return g(r)}}(e);return function(e){return u.Od(e)?t(e):Se}},Ie=function(e){return Re((function(t,n){return e(n)}))}(a.yR),Ae=q;var Oe={URI:A,map:b,of:U,ap:v,chain:q,reduce:y,foldMap:w,reduceRight:x,traverse:E,sequence:oe,zero:K,alt:k,extend:S,compact:Z,separate:Y,filter:C,filterMap:T,partition:R,partitionMap:I,wither:ae,wilt:ce,throwError:ue},Fe=(0,r.V)(j),Pe=function(){return N((0,d.Ps)())}},14944:(e,t,n)=>{n.d(t,{C2:()=>b,Fp:()=>f,Mh:()=>y,N2:()=>g,Uz:()=>a,VV:()=>h,Zt:()=>s,Zy:()=>m,gt:()=>d,iP:()=>u,jG:()=>c,lt:()=>l,r9:()=>v,vX:()=>p});var r=n(21147),i=n(90023),o=function(e){return function(t,n){return t===n||0===e(t,n)}},s=function(e){return{equals:o(e),compare:function(t,n){return t===n?0:e(t,n)}}},a=function(e){return function(t){return s((function(n,r){return t.compare(e(n),e(r))}))}},c=function(){return{concat:function(e,t){return s((function(n,r){var i=e.compare(n,r);return 0!==i?i:t.compare(n,r)}))}}},u=function(){return{concat:c().concat,empty:s((function(){return 0}))}},l=(i.W8,function(e){return function(t,n){return-1===e.compare(t,n)}}),d=function(e){return function(t,n){return 1===e.compare(t,n)}},h=function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}},f=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},p=function(e){var t=l(e),n=d(e);return function(e,r){return function(i){return!t(i,e)&&!n(i,r)}}},g=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s((function(t,n){for(var r=0;r<e.length-1;r++){var i=e[r].compare(t[r],n[r]);if(0!==i)return i}return e[r].compare(t[r],n[r])}))},m=function(e){return s((function(t,n){return e.compare(n,t)}))};var _={equals:r.w4.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},b=_,v=_,y=_},61179:(e,t,n)=>{n.d(t,{ff:()=>r});n(90023);var r=function(e){return function(t){return!e(t)}}},14911:(e,t,n)=>{n.d(t,{ur:()=>h,Ps:()=>d,g_:()=>_,mL:()=>g,oQ:()=>m,DU:()=>p,Fp:()=>c,VV:()=>a,GY:()=>u,lG:()=>b,ny:()=>v,D8:()=>x,l7:()=>y,xk:()=>w,xx:()=>f,n_:()=>l});var r,i=n(90023),o=n(72816),s=n(14944),a=function(e){return{concat:s.VV(e)}},c=function(e){return{concat:s.Fp(e)}},u=function(e){return{concat:function(t,n){return e.concat(n,t)}}},l=function(e){return{concat:function(t,n){var r={};for(var i in e)o.e$.call(e,i)&&(r[i]=e[i].concat(t[i],n[i]));return r}}},d=function(){return{concat:i.yR}},h=function(e){return function(t){return function(n){return n.reduce((function(t,n){return e.concat(t,n)}),t)}}},f=(r=void 0,{concat:function(){return r}}),p=function(){return{concat:function(e,t){return Object.assign({},e,t)}}},g=d,m=c;function _(e){var t=h(e);return function(e,n){return void 0===n?t(e):t(e)(n)}}var b={concat:function(e,t){return e&&t}},v={concat:function(e,t){return e||t}},y={concat:function(e,t){return e+t}},w={concat:function(e,t){return e+t}},x={concat:function(e,t){return e*t}}},25262:(e,t,n)=>{n.d(t,{s4:()=>r});n(90023);var r=function(e,t){return{left:e,right:t}}},6609:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.separate)}}}function i(e,t){return function(n){var r=e.traverse(n);return function(e,i){return n.map(r(e,i),t.compact)}}}n.d(t,{BL:()=>i,Fj:()=>r})},90023:(e,t,n)=>{n.d(t,{MZ:()=>s,OB:()=>y,Q1:()=>h,Rz:()=>g,SK:()=>b,W8:()=>c,a9:()=>a,bc:()=>p,ff:()=>v,gn:()=>l,jv:()=>u,ls:()=>f,og:()=>m,r5:()=>d,uZ:()=>i,yR:()=>o,zG:()=>_});var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(e){var t,n=(t=e,function(){return{concat:function(e,n){return function(r){return t.concat(e(r),n(r))}}}});return function(){return{concat:n().concat,empty:function(){return e.empty}}}};function o(e){return e}var s=o;function a(e){return function(){return e}}var c=a(!0),u=a(!1),l=a(null),d=a(void 0),h=d;function f(e,t,n,r,i,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(a(s(o(i(r(n(t(e.apply(this,arguments)))))))))}}}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function g(e){throw new Error("Called `absurd` function which should be uncallable")}function m(e){return function(t){return e.apply(void 0,t)}}function _(e,t,n,r,i,o,s,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return s(o(i(r(n(t(e))))));case 8:return a(s(o(i(r(n(t(e)))))));case 9:return c(a(s(o(i(r(n(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var b=function(e,t){return t};function v(e){return function(t){return!e(t)}}var y=function(e,t){var n="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return n(arguments)?t.apply(this,e):function(n){return t.apply(void 0,r([n],e,!1))}}}},72816:(e,t,n)=>{n.d(t,{F2:()=>h,F4:()=>b,G:()=>c,Gb:()=>m,Od:()=>p,Wi:()=>o,Xl:()=>_,YM:()=>g,YP:()=>a,e$:()=>v,nM:()=>u,pC:()=>s,r1:()=>y,ri:()=>f,t$:()=>d,tO:()=>l,we:()=>w});var r=n(90023),i=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},o=function(e){return"None"===e._tag},s=function(e){return"Some"===e._tag},a={_tag:"None"},c=function(e){return{_tag:"Some",value:e}},u=function(e){return"Left"===e._tag},l=function(e){return"Right"===e._tag},d=function(e){return{_tag:"Left",left:e}},h=function(e){return{_tag:"Right",right:e}},f=function(e){return[e]},p=function(e){return e.length>0},g=function(e){return e[0]},m=function(e){return e.slice(1)},_=[],b={},v=Object.prototype.hasOwnProperty,y=function(e){return i([e[0]],e.slice(1),!0)},w=function(e,t){return(0,r.OB)(2,(function(n,r){return t.flatMap(n,(function(t){return e.fromIO(r(t))}))}))}},2151:e=>{e.exports={animatedUnderline:"ymqHP",showUnderline:"JQguZ",completeAnimation:"ExcM8"}},9780:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],u=!1,l=-1;function d(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=s(d);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},7572:(e,t,n)=>{n.d(t,{c:()=>i});var r=n(5972),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return(0,r.ZT)(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t._hasValue,i=t._value,o=t.thrownError,s=t.isStopped,a=t._isComplete;n?e.error(o):(s||a)&&(r&&e.next(i),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this,n=t._hasValue,r=t._value;t._isComplete||(this._isComplete=!0,n&&e.prototype.next.call(this,r),e.prototype.complete.call(this))},t}(n(74822).x)},62552:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(5972),i=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n(74822).x)},54481:(e,t,n)=>{n.d(t,{P_:()=>c,kV:()=>u});var r,i=n(36344),o=n(84714),s=n(31789),a=n(32540);!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(r||(r={}));var c=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){return u(this,e)},e.prototype.do=function(e,t,n){var r=this,i=r.kind,o=r.value,s=r.error;return"N"===i?null==e?void 0:e(o):"E"===i?null==t?void 0:t(s):null==n?void 0:n()},e.prototype.accept=function(e,t,n){var r;return(0,a.m)(null===(r=e)||void 0===r?void 0:r.next)?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this,t=e.kind,n=e.value,r=e.error,a="N"===t?(0,o.of)(n):"E"===t?(0,s._)((function(){return r})):"C"===t?i.E:0;if(!a)throw new TypeError("Unexpected notification kind "+t);return a},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function u(e,t){var n,r,i,o=e,s=o.kind,a=o.value,c=o.error;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(n=t.next)||void 0===n||n.call(t,a):"E"===s?null===(r=t.error)||void 0===r||r.call(t,c):null===(i=t.complete)||void 0===i||i.call(t)}},70937:(e,t,n)=>{n.d(t,{A:()=>i,JM:()=>o,TQ:()=>r});var r=s("C",void 0,void 0);function i(e){return s("E",void 0,e)}function o(e){return s("N",e,void 0)}function s(e,t,n){return{kind:e,value:t,error:n}}},8867:(e,t,n)=>{n.d(t,{y:()=>l});var r=n(69088),i=n(32073),o=n(61443),s=n(67982),a=n(86899),c=n(32540),u=n(60798),l=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,s=this,a=(o=e)&&o instanceof r.Lv||function(e){return e&&(0,c.m)(e.next)&&(0,c.m)(e.error)&&(0,c.m)(e.complete)}(o)&&(0,i.Nn)(o)?e:new r.Hp(e,t,n);return(0,u.x)((function(){var e=s,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?s._subscribe(a):s._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=d(t))((function(t,i){var o=new r.Hp({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.U)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function d(e){var t;return null!==(t=null!=e?e:a.v.Promise)&&void 0!==t?t:Promise}},55341:(e,t,n)=>{n.d(t,{t:()=>s});var r=n(5972),i=n(74822),o=n(80210),s=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=o.l);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return(0,r.ZT)(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,s=n._timestampProvider,a=n._windowTime;r||(i.push(t),!o&&i.push(s.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var s=n.now(),a=0,c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}},t}(i.x)},36912:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(80210),i=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=r.l.now,e}()},74822:(e,t,n)=>{n.d(t,{x:()=>u});var r=n(5972),i=n(8867),o=n(32073),s=n(17617),a=n(10135),c=n(60798),u=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new l(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s.N},t.prototype.next=function(e){var t=this;(0,c.x)((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.XA)(t.currentObservers),s=o.next();!s.done;s=o.next()){s.value.next(e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;(0,c.x)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,c.x)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,s=n.observers;return r||i?o.Lc:(this.currentObservers=null,s.push(e),new o.w0((function(){t.currentObservers=null,(0,a.P)(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new l(e,t)},t}(i.y),l=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:o.Lc},t}(u)},69088:(e,t,n)=>{n.d(t,{Hp:()=>m,Lv:()=>h});var r=n(5972),i=n(32540),o=n(32073),s=n(86899),a=n(84679),c=n(198),u=n(70937),l=n(80067),d=n(60798),h=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,o.Nn)(t)&&t.add(n)):n.destination=v,n}return(0,r.ZT)(t,e),t.create=function(e,t,n){return new m(e,t,n)},t.prototype.next=function(e){this.isStopped?b((0,u.JM)(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?b((0,u.A)(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?b(u.TQ,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.w0),f=Function.prototype.bind;function p(e,t){return f.call(e,t)}var g=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){_(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){_(e)}else _(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){_(e)}},e}(),m=function(e){function t(t,n,r){var o,a,c=e.call(this)||this;(0,i.m)(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:c&&s.v.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return c.unsubscribe()},o={next:t.next&&p(t.next,a),error:t.error&&p(t.error,a),complete:t.complete&&p(t.complete,a)}):o=t;return c.destination=new g(o),c}return(0,r.ZT)(t,e),t}(h);function _(e){s.v.useDeprecatedSynchronousErrorHandling?(0,d.O)(e):(0,a.h)(e)}function b(e,t){var n=s.v.onStoppedNotification;n&&l.z.setTimeout((function(){return n(e,t)}))}var v={closed:!0,next:c.Z,error:function(e){throw e},complete:c.Z}},32073:(e,t,n)=>{n.d(t,{Lc:()=>c,Nn:()=>u,w0:()=>a});var r=n(5972),i=n(32540),o=n(62178),s=n(10135),a=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,s,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var u=(0,r.XA)(c),d=u.next();!d.done;d=u.next()){d.value.remove(this)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else c.remove(this);var h=this.initialTeardown;if((0,i.m)(h))try{h()}catch(e){a=e instanceof o.B?e.errors:[e]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var p=(0,r.XA)(f),g=p.next();!g.done;g=p.next()){var m=g.value;try{l(m)}catch(e){a=null!=a?a:[],e instanceof o.B?a=(0,r.ev)((0,r.ev)([],(0,r.CR)(a)),(0,r.CR)(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}}if(a)throw new o.B(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)l(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,s.P)(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&(0,s.P)(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),c=a.EMPTY;function u(e){return e instanceof a||e&&"closed"in e&&(0,i.m)(e.remove)&&(0,i.m)(e.add)&&(0,i.m)(e.unsubscribe)}function l(e){(0,i.m)(e)?e():e.unsubscribe()}},86899:(e,t,n)=>{n.d(t,{v:()=>r});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},48546:(e,t,n)=>{n.d(t,{n:()=>i});var r=n(54784);function i(e,t){var n="object"==typeof t;return new Promise((function(i,o){var s,a=!1;e.subscribe({next:function(e){s=e,a=!0},error:o,complete:function(){a?i(s):n?i(t.defaultValue):o(new r.K)}})}))}},30499:(e,t,n)=>{n.d(t,{c:()=>u});var r=n(5972),i=n(8867),o=n(32073),s=n(93790),a=n(96643),c=n(19064),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._subject=null,r._refCount=0,r._connection=null,(0,c.A)(t)&&(r.lift=t.lift),r}return(0,r.ZT)(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new o.w0;var n=this.getSubject();t.add(this.source.subscribe((0,a.x)(n,void 0,(function(){e._teardown(),n.complete()}),(function(t){e._teardown(),n.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=o.w0.EMPTY)}return t},t.prototype.refCount=function(){return(0,s.x)()(this)},t}(i.y)},84308:(e,t,n)=>{n.d(t,{a:()=>h,l:()=>f});var r=n(8867),i=n(38601),o=n(50750),s=n(94173),a=n(4447),c=n(2673),u=n(56612),l=n(96643),d=n(20610);function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,c.yG)(e),l=(0,c.jO)(e),d=(0,i.D)(e),h=d.args,p=d.keys;if(0===h.length)return(0,o.D)([],n);var g=new r.y(f(h,n,p?function(e){return(0,u.n)(p,e)}:s.y));return l?g.pipe((0,a.Z)(l)):g}function f(e,t,n){return void 0===n&&(n=s.y),function(r){p(t,(function(){for(var i=e.length,s=new Array(i),a=i,c=i,u=function(i){p(t,(function(){var u=(0,o.D)(e[i],t),d=!1;u.subscribe((0,l.x)(r,(function(e){s[i]=e,d||(d=!0,c--),c||r.next(n(s.slice()))}),(function(){--a||r.complete()})))}),r)},d=0;d<i;d++)u(d)}),r)}}function p(e,t,n){e?(0,d.f)(n,e,t):t()}},20680:(e,t,n)=>{n.d(t,{z:()=>s});var r=n(18767),i=n(2673),o=n(50750);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,r.u)()((0,o.D)(e,(0,i.yG)(e)))}},79256:(e,t,n)=>{n.d(t,{P:()=>o});var r=n(8867),i=n(16537);function o(e){return new r.y((function(t){(0,i.Xf)(e()).subscribe(t)}))}},36344:(e,t,n)=>{n.d(t,{E:()=>i,c:()=>o});var r=n(8867),i=new r.y((function(e){return e.complete()}));function o(e){return e?function(e){return new r.y((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},50750:(e,t,n)=>{n.d(t,{D:()=>o});var r=n(91603),i=n(16537);function o(e,t){return t?(0,r.x)(e,t):(0,i.Xf)(e)}},44071:(e,t,n)=>{n.d(t,{R:()=>f});var r=n(5972),i=n(16537),o=n(8867),s=n(17869),a=n(87991),c=n(32540),u=n(4447),l=["addListener","removeListener"],d=["addEventListener","removeEventListener"],h=["on","off"];function f(e,t,n,g){if((0,c.m)(n)&&(g=n,n=void 0),g)return f(e,t,n).pipe((0,u.Z)(g));var m=(0,r.CR)(function(e){return(0,c.m)(e.addEventListener)&&(0,c.m)(e.removeEventListener)}(e)?d.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return(0,c.m)(e.addListener)&&(0,c.m)(e.removeListener)}(e)?l.map(p(e,t)):function(e){return(0,c.m)(e.on)&&(0,c.m)(e.off)}(e)?h.map(p(e,t)):[],2),_=m[0],b=m[1];if(!_&&(0,a.z)(e))return(0,s.z)((function(e){return f(e,t,n)}))((0,i.Xf)(e));if(!_)throw new TypeError("Invalid event target");return new o.y((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return _(t),function(){return b(t)}}))}function p(e,t){return function(n){return function(r){return e[n](t,r)}}}},28767:(e,t,n)=>{n.d(t,{R:()=>s});var r=n(8867),i=n(32540),o=n(4447);function s(e,t,n){return n?s(e,t).pipe((0,o.Z)(n)):new r.y((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)},o=e(r);return(0,i.m)(t)?function(){return t(r,o)}:void 0}))}},3669:(e,t,n)=>{n.d(t,{R:()=>c});var r=n(5972),i=n(94173),o=n(34446),s=n(79256),a=n(41563);function c(e,t,n,c,u){var l,d,h,f;function p(){var e;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=f,r.label=1;case 1:return t&&!t(e)?[3,4]:[4,h(e)];case 2:r.sent(),r.label=3;case 3:return e=n(e),[3,1];case 4:return[2]}}))}return 1===arguments.length?(f=(l=e).initialState,t=l.condition,n=l.iterate,d=l.resultSelector,h=void 0===d?i.y:d,u=l.scheduler):(f=e,!c||(0,o.K)(c)?(h=i.y,u=c):h=c),(0,s.P)(u?function(){return(0,a.Q)(p(),u)}:p)}},17543:(e,t,n)=>{n.d(t,{s:()=>i});var r=n(79256);function i(e,t,n){return(0,r.P)((function(){return e()?t:n}))}},16537:(e,t,n)=>{n.d(t,{Xf:()=>g});var r=n(5972),i=n(87991),o=n(2662),s=n(8867),a=n(78816),c=n(13532),u=n(29226),l=n(95256),d=n(43852),h=n(32540),f=n(84679),p=n(61443);function g(e){if(e instanceof s.y)return e;if(null!=e){if((0,a.c)(e))return b=e,new s.y((function(e){var t=b[p.L]();if((0,h.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,i.z)(e))return _=e,new s.y((function(e){for(var t=0;t<_.length&&!e.closed;t++)e.next(_[t]);e.complete()}));if((0,o.t)(e))return g=e,new s.y((function(e){g.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,f.h)}));if((0,c.D)(e))return m(e);if((0,l.T)(e))return n=e,new s.y((function(e){var t,i;try{for(var o=(0,r.XA)(n),s=o.next();!s.done;s=o.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}e.complete()}));if((0,d.L)(e))return t=e,m((0,d.Q)(t))}var t,n,g,_,b;throw(0,u.z)(e)}function m(e){return new s.y((function(t){(function(e,t){var n,i,o,s;return(0,r.mG)(this,void 0,void 0,(function(){var a,c;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=(0,r.KL)(e),u.label=1;case 1:return[4,n.next()];case 2:if((i=u.sent()).done)return[3,4];if(a=i.value,t.next(a),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=u.sent(),o={error:c},[3,11];case 6:return u.trys.push([6,,9,10]),i&&!i.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}},84766:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(25941),i=n(93440);function o(e,t){return void 0===e&&(e=0),void 0===t&&(t=r.z),e<0&&(e=0),(0,i.H)(e,e,t)}},64271:(e,t,n)=>{n.d(t,{T:()=>c});var r=n(31603),i=n(16537),o=n(36344),s=n(2673),a=n(50750);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,s.yG)(e),c=(0,s._6)(e,1/0),u=e;return u.length?1===u.length?(0,i.Xf)(u[0]):(0,r.J)(c)((0,a.D)(u,n)):o.E}},91089:(e,t,n)=>{n.d(t,{C:()=>o});var r=n(8867),i=n(198),o=new r.y(i.Z)},84714:(e,t,n)=>{n.d(t,{of:()=>o});var r=n(2673),i=n(50750);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,r.yG)(e);return(0,i.D)(e,n)}},21772:(e,t,n)=>{n.d(t,{h:()=>c});var r=n(8867),i=n(72876),o=n(96643),s=n(198),a=n(16537);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,i.k)(e);return new r.y((function(e){var t=0,r=function(){if(t<n.length){var i=void 0;try{i=(0,a.Xf)(n[t++])}catch(e){return void r()}var c=new o.Q(e,void 0,s.Z,s.Z);i.subscribe(c),c.add(r)}else e.complete()};r()}))}},34936:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(50750);function i(e,t){return(0,r.D)(Object.entries(e),t)}},64335:(e,t,n)=>{n.d(t,{u:()=>s});var r=n(60554),i=n(90572),o=n(16537);function s(e,t,n){return[(0,i.h)(t,n)((0,o.Xf)(e)),(0,i.h)((0,r.f)(t,n))((0,o.Xf)(e))]}},26156:(e,t,n)=>{n.d(t,{R:()=>c,S:()=>a});var r=n(8867),i=n(16537),o=n(72876),s=n(96643);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=(0,o.k)(e)).length?(0,i.Xf)(e[0]):new r.y(c(e))}function c(e){return function(t){for(var n=[],r=function(r){n.push((0,i.Xf)(e[r]).subscribe((0,s.x)(t,(function(e){if(n){for(var i=0;i<n.length;i++)i!==r&&n[i].unsubscribe();n=null}t.next(e)}))))},o=0;n&&!t.closed&&o<e.length;o++)r(o)}}},99748:(e,t,n)=>{n.d(t,{w:()=>o});var r=n(8867),i=n(36344);function o(e,t,n){if(null==t&&(t=e,e=0),t<=0)return i.E;var o=t+e;return new r.y(n?function(t){var r=e;return n.schedule((function(){r<o?(t.next(r++),this.schedule()):t.complete()}))}:function(t){for(var n=e;n<o&&!t.closed;)t.next(n++);t.complete()})}},31789:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(8867),i=n(32540);function o(e,t){var n=(0,i.m)(e)?e:function(){return e},o=function(e){return e.error(n())};return new r.y(t?function(e){return t.schedule(o,0,e)}:o)}},93440:(e,t,n)=>{n.d(t,{H:()=>a});var r=n(8867),i=n(25941),o=n(34446),s=n(11203);function a(e,t,n){void 0===e&&(e=0),void 0===n&&(n=i.P);var a=-1;return null!=t&&((0,o.K)(t)?n=t:a=t),new r.y((function(t){var r=(0,s.q)(e)?+e-n.now():e;r<0&&(r=0);var i=0;return n.schedule((function(){t.closed||(t.next(i++),0<=a?this.schedule(void 0,a):t.complete())}),r)}))}},78837:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(8867),i=n(16537),o=n(36344);function s(e,t){return new r.y((function(n){var r=e(),s=t(r);return(s?(0,i.Xf)(s):o.E).subscribe(n),function(){r&&r.unsubscribe()}}))}},98017:(e,t,n)=>{n.d(t,{$:()=>l});var r=n(5972),i=n(8867),o=n(16537),s=n(72876),a=n(36344),c=n(96643),u=n(2673);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,u.jO)(e),l=(0,s.k)(e);return l.length?new i.y((function(e){var t=l.map((function(){return[]})),i=l.map((function(){return!1}));e.add((function(){t=i=null}));for(var s=function(s){(0,o.Xf)(l[s]).subscribe((0,c.x)(e,(function(o){if(t[s].push(o),t.every((function(e){return e.length}))){var a=t.map((function(e){return e.shift()}));e.next(n?n.apply(void 0,(0,r.ev)([],(0,r.CR)(a))):a),t.some((function(e,t){return!e.length&&i[t]}))&&e.complete()}}),(function(){i[s]=!0,!t[s].length&&e.complete()})))},a=0;!e.closed&&a<l.length;a++)s(a);return function(){t=i=null}})):a.E}},96643:(e,t,n)=>{n.d(t,{Q:()=>o,x:()=>i});var r=n(5972);function i(e,t,n,r,i){return new o(e,t,n,r,i)}var o=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,r.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(n(69088).Lv)},59222:(e,t,n)=>{n.d(t,{U:()=>s});var r=n(19064),i=n(16537),o=n(96643);function s(e){return(0,r.e)((function(t,n){var r=!1,s=null,a=null,c=!1,u=function(){if(null==a||a.unsubscribe(),a=null,r){r=!1;var e=s;s=null,n.next(e)}c&&n.complete()},l=function(){a=null,c&&n.complete()};t.subscribe((0,o.x)(n,(function(t){r=!0,s=t,a||(0,i.Xf)(e(t)).subscribe(a=(0,o.x)(n,u,l))}),(function(){c=!0,(!r||!a||a.closed)&&n.complete()})))}))}},2613:(e,t,n)=>{n.d(t,{e:()=>s});var r=n(25941),i=n(59222),o=n(93440);function s(e,t){return void 0===t&&(t=r.z),(0,i.U)((function(){return(0,o.H)(e,t)}))}},97092:(e,t,n)=>{n.d(t,{f:()=>a});var r=n(19064),i=n(198),o=n(96643),s=n(16537);function a(e){return(0,r.e)((function(t,n){var r=[];return t.subscribe((0,o.x)(n,(function(e){return r.push(e)}),(function(){n.next(r),n.complete()}))),(0,s.Xf)(e).subscribe((0,o.x)(n,(function(){var e=r;r=[],n.next(e)}),i.Z)),function(){r=null}}))}},53113:(e,t,n)=>{n.d(t,{j:()=>a});var r=n(5972),i=n(19064),o=n(96643),s=n(10135);function a(e,t){return void 0===t&&(t=null),t=null!=t?t:e,(0,i.e)((function(n,i){var a=[],c=0;n.subscribe((0,o.x)(i,(function(n){var o,u,l,d,h=null;c++%t==0&&a.push([]);try{for(var f=(0,r.XA)(a),p=f.next();!p.done;p=f.next()){(_=p.value).push(n),e<=_.length&&(h=null!=h?h:[]).push(_)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(o)throw o.error}}if(h)try{for(var g=(0,r.XA)(h),m=g.next();!m.done;m=g.next()){var _=m.value;(0,s.P)(a,_),i.next(_)}}catch(e){l={error:e}}finally{try{m&&!m.done&&(d=g.return)&&d.call(g)}finally{if(l)throw l.error}}}),(function(){var e,t;try{for(var n=(0,r.XA)(a),o=n.next();!o.done;o=n.next()){var s=o.value;i.next(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}i.complete()}),void 0,(function(){a=null})))}))}},80859:(e,t,n)=>{n.d(t,{e:()=>d});var r=n(5972),i=n(32073),o=n(19064),s=n(96643),a=n(10135),c=n(25941),u=n(2673),l=n(20610);function d(e){for(var t,n,d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var f=null!==(t=(0,u.yG)(d))&&void 0!==t?t:c.z,p=null!==(n=d[0])&&void 0!==n?n:null,g=d[1]||1/0;return(0,o.e)((function(t,n){var o=[],c=!1,u=function(e){var t=e.buffer;e.subs.unsubscribe(),(0,a.P)(o,e),n.next(t),c&&d()},d=function(){if(o){var t=new i.w0;n.add(t);var r={buffer:[],subs:t};o.push(r),(0,l.f)(t,f,(function(){return u(r)}),e)}};null!==p&&p>=0?(0,l.f)(n,f,d,p,!0):c=!0,d();var h=(0,s.x)(n,(function(e){var t,n,i=o.slice();try{for(var s=(0,r.XA)(i),a=s.next();!a.done;a=s.next()){var c=a.value,l=c.buffer;l.push(e),g<=l.length&&u(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}),(function(){for(;null==o?void 0:o.length;)n.next(o.shift().buffer);null==h||h.unsubscribe(),n.complete(),n.unsubscribe()}),void 0,(function(){return o=null}));t.subscribe(h)}))}},84153:(e,t,n)=>{n.d(t,{P:()=>l});var r=n(5972),i=n(32073),o=n(19064),s=n(16537),a=n(96643),c=n(198),u=n(10135);function l(e,t){return(0,o.e)((function(n,o){var l=[];(0,s.Xf)(e).subscribe((0,a.x)(o,(function(e){var n=[];l.push(n);var r=new i.w0;r.add((0,s.Xf)(t(e)).subscribe((0,a.x)(o,(function(){(0,u.P)(l,n),o.next(n),r.unsubscribe()}),c.Z)))}),c.Z)),n.subscribe((0,a.x)(o,(function(e){var t,n;try{for(var i=(0,r.XA)(l),o=i.next();!o.done;o=i.next()){o.value.push(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}),(function(){for(;l.length>0;)o.next(l.shift());o.complete()})))}))}},15015:(e,t,n)=>{n.d(t,{R:()=>a});var r=n(19064),i=n(198),o=n(96643),s=n(16537);function a(e){return(0,r.e)((function(t,n){var r=null,a=null,c=function(){null==a||a.unsubscribe();var t=r;r=[],t&&n.next(t),(0,s.Xf)(e()).subscribe(a=(0,o.x)(n,c,i.Z))};c(),t.subscribe((0,o.x)(n,(function(e){return null==r?void 0:r.push(e)}),(function(){r&&n.next(r),n.complete()}),void 0,(function(){return r=a=null})))}))}},66878:(e,t,n)=>{n.d(t,{K:()=>s});var r=n(16537),i=n(96643),o=n(19064);function s(e){return(0,o.e)((function(t,n){var o,a=null,c=!1;a=t.subscribe((0,i.x)(n,void 0,void 0,(function(i){o=(0,r.Xf)(e(i,s(e)(t))),a?(a.unsubscribe(),a=null,o.subscribe(n)):c=!0}))),c&&(a.unsubscribe(),a=null,o.subscribe(n))}))}},88773:(e,t,n)=>{n.d(t,{c:()=>r});var r=n(86861).h},31403:(e,t,n)=>{n.d(t,{a:()=>l});var r=n(5972),i=n(84308),o=n(19064),s=n(72876),a=n(4447),c=n(67982),u=n(2673);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,u.jO)(e);return n?(0,c.z)(l.apply(void 0,(0,r.ev)([],(0,r.CR)(e))),(0,a.Z)(n)):(0,o.e)((function(t,n){(0,i.l)((0,r.ev)([t],(0,r.CR)((0,s.k)(e))))(n)}))}},86861:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(84308),i=n(3025);function o(e){return(0,i.Z)(r.a,e)}},29678:(e,t,n)=>{n.d(t,{z:()=>c});var r=n(5972),i=n(19064),o=n(18767),s=n(2673),a=n(50750);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,s.yG)(e);return(0,i.e)((function(t,i){(0,o.u)()((0,a.D)((0,r.ev)([t],(0,r.CR)(e)),n)).subscribe(i)}))}},18767:(e,t,n)=>{n.d(t,{u:()=>i});var r=n(31603);function i(){return(0,r.J)(1)}},8065:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(17869),i=n(32540);function o(e,t){return(0,i.m)(t)?(0,r.z)(e,t,1):(0,r.z)(e,1)}},62076:(e,t,n)=>{n.d(t,{w:()=>o});var r=n(8065),i=n(32540);function o(e,t){return(0,i.m)(t)?(0,r.b)((function(){return e}),t):(0,r.b)((function(){return e}))}},87708:(e,t,n)=>{n.d(t,{$:()=>c});var r=n(74822),i=n(16537),o=n(19064),s=n(8867);var a={connector:function(){return new r.x}};function c(e,t){void 0===t&&(t=a);var n=t.connector;return(0,o.e)((function(t,r){var o,a=n();(0,i.Xf)(e((o=a,new s.y((function(e){return o.subscribe(e)}))))).subscribe(r),r.add(t.subscribe(a))}))}},81175:(e,t,n)=>{n.d(t,{Q:()=>i});var r=n(84523);function i(e){return(0,r.u)((function(t,n,r){return!e||e(n,r)?t+1:t}),0)}},5588:(e,t,n)=>{n.d(t,{D:()=>a});var r=n(19064),i=n(198),o=n(96643),s=n(16537);function a(e){return(0,r.e)((function(t,n){var r=!1,a=null,c=null,u=function(){if(null==c||c.unsubscribe(),c=null,r){r=!1;var e=a;a=null,n.next(e)}};t.subscribe((0,o.x)(n,(function(t){null==c||c.unsubscribe(),r=!0,a=t,c=(0,o.x)(n,u,i.Z),(0,s.Xf)(e(t)).subscribe(c)}),(function(){u(),n.complete()}),void 0,(function(){a=c=null})))}))}},29416:(e,t,n)=>{n.d(t,{b:()=>s});var r=n(25941),i=n(19064),o=n(96643);function s(e,t){return void 0===t&&(t=r.z),(0,i.e)((function(n,r){var i=null,s=null,a=null,c=function(){if(i){i.unsubscribe(),i=null;var e=s;s=null,r.next(e)}};function u(){var n=a+e,o=t.now();if(o<n)return i=this.schedule(void 0,n-o),void r.add(i);c()}n.subscribe((0,o.x)(r,(function(n){s=n,a=t.now(),i||(i=t.schedule(u,e),r.add(i))}),(function(){c(),r.complete()}),void 0,(function(){s=i=null})))}))}},5447:(e,t,n)=>{n.d(t,{d:()=>o});var r=n(19064),i=n(96643);function o(e){return(0,r.e)((function(t,n){var r=!1;t.subscribe((0,i.x)(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}},18827:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(25941),i=n(97654),o=n(93440);function s(e,t){void 0===t&&(t=r.z);var n=(0,o.H)(e,t);return(0,i.j)((function(){return n}))}},97654:(e,t,n)=>{n.d(t,{j:()=>u});var r=n(20680),i=n(84178),o=n(46734),s=n(29479),a=n(17869),c=n(16537);function u(e,t){return t?function(n){return(0,r.z)(t.pipe((0,i.q)(1),(0,o.l)()),n.pipe(u(e)))}:(0,a.z)((function(t,n){return(0,c.Xf)(e(t,n)).pipe((0,i.q)(1),(0,s.h)(t))}))}},23059:(e,t,n)=>{n.d(t,{D:()=>s});var r=n(54481),i=n(19064),o=n(96643);function s(){return(0,i.e)((function(e,t){e.subscribe((0,o.x)(t,(function(e){return(0,r.kV)(e,t)})))}))}},30346:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(19064),i=n(96643),o=n(198),s=n(16537);function a(e,t){return(0,r.e)((function(n,r){var a=new Set;n.subscribe((0,i.x)(r,(function(t){var n=e?e(t):t;a.has(n)||(a.add(n),r.next(t))}))),t&&(0,s.Xf)(t).subscribe((0,i.x)(r,(function(){return a.clear()}),o.Z))}))}},24666:(e,t,n)=>{n.d(t,{x:()=>s});var r=n(94173),i=n(19064),o=n(96643);function s(e,t){return void 0===t&&(t=r.y),e=null!=e?e:a,(0,i.e)((function(n,r){var i,s=!0;n.subscribe((0,o.x)(r,(function(n){var o=t(n);!s&&e(i,o)||(s=!1,i=o,r.next(n))})))}))}function a(e,t){return e===t}},13712:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(24666);function i(e,t){return(0,r.x)((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}},52343:(e,t,n)=>{n.d(t,{T:()=>c});var r=n(64522),i=n(90572),o=n(27649),s=n(5447),a=n(84178);function c(e,t){if(e<0)throw new r.W;var n=arguments.length>=2;return function(c){return c.pipe((0,i.h)((function(t,n){return n===e})),(0,a.q)(1),n?(0,s.d)(t):(0,o.T)((function(){return new r.W})))}}},17610:(e,t,n)=>{n.d(t,{l:()=>s});var r=n(5972),i=n(20680),o=n(84714);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return(0,i.z)(t,o.of.apply(void 0,(0,r.ev)([],(0,r.CR)(e))))}}},22938:(e,t,n)=>{n.d(t,{y:()=>o});var r=n(19064),i=n(96643);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(i){e.call(t,i,o++,n)||(r.next(!1),r.complete())}),(function(){r.next(!0),r.complete()})))}))}},89124:(e,t,n)=>{n.d(t,{b:()=>r});var r=n(35603).Y},35603:(e,t,n)=>{n.d(t,{Y:()=>o});var r=n(21070),i=n(94173);function o(){return(0,r.z)(i.y)}},21070:(e,t,n)=>{n.d(t,{z:()=>a});var r=n(59179),i=n(16537),o=n(19064),s=n(96643);function a(e,t){return t?function(n){return n.pipe(a((function(n,o){return(0,i.Xf)(e(n,o)).pipe((0,r.U)((function(e,r){return t(n,e,o,r)})))})))}:(0,o.e)((function(t,n){var r=0,o=null,a=!1;t.subscribe((0,s.x)(n,(function(t){o||(o=(0,s.x)(n,void 0,(function(){o=null,a&&n.complete()})),(0,i.Xf)(e(t,r++)).subscribe(o))}),(function(){a=!0,!o&&n.complete()})))}))}},47130:(e,t,n)=>{n.d(t,{j:()=>o});var r=n(19064),i=n(38079);function o(e,t,n){return void 0===t&&(t=1/0),t=(t||0)<1?1/0:t,(0,r.e)((function(r,o){return(0,i.p)(r,o,e,t,void 0,!0,n)}))}},90572:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(19064),i=n(96643);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}},85156:(e,t,n)=>{n.d(t,{x:()=>i});var r=n(19064);function i(e){return(0,r.e)((function(t,n){try{t.subscribe(n)}finally{n.add(e)}}))}},83458:(e,t,n)=>{n.d(t,{U:()=>s,s:()=>o});var r=n(19064),i=n(96643);function o(e,t){return(0,r.e)(s(e,t,"value"))}function s(e,t,n){var r="index"===n;return function(n,o){var s=0;n.subscribe((0,i.x)(o,(function(i){var a=s++;e.call(t,i,a,n)&&(o.next(r?a:i),o.complete())}),(function(){o.next(r?-1:void 0),o.complete()})))}}},65046:(e,t,n)=>{n.d(t,{c:()=>o});var r=n(19064),i=n(83458);function o(e,t){return(0,r.e)((0,i.U)(e,t,"index"))}},14969:(e,t,n)=>{n.d(t,{P:()=>u});var r=n(54784),i=n(90572),o=n(84178),s=n(5447),a=n(27649),c=n(94173);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?(0,i.h)((function(t,n){return e(t,n,u)})):c.y,(0,o.q)(1),n?(0,s.d)(t):(0,a.T)((function(){return new r.K})))}}},85251:(e,t,n)=>{n.d(t,{v:()=>c});var r=n(8867),i=n(16537),o=n(74822),s=n(19064),a=n(96643);function c(e,t,n,c){return(0,s.e)((function(s,u){var l;t&&"function"!=typeof t?(n=t.duration,l=t.element,c=t.connector):l=t;var d=new Map,h=function(e){d.forEach(e),e(u)},f=function(e){return h((function(t){return t.error(e)}))},p=0,g=!1,m=new a.Q(u,(function(t){try{var s=e(t),h=d.get(s);if(!h){d.set(s,h=c?c():new o.x);var _=(v=s,y=h,(w=new r.y((function(e){p++;var t=y.subscribe(e);return function(){t.unsubscribe(),0==--p&&g&&m.unsubscribe()}}))).key=v,w);if(u.next(_),n){var b=(0,a.x)(h,(function(){h.complete(),null==b||b.unsubscribe()}),void 0,void 0,(function(){return d.delete(s)}));m.add((0,i.Xf)(n(_)).subscribe(b))}}h.next(l?l(t):t)}catch(e){f(e)}var v,y,w}),(function(){return h((function(e){return e.complete()}))}),f,(function(){return d.clear()}),(function(){return g=!0,0===p}));s.subscribe(m)}))}},46734:(e,t,n)=>{n.d(t,{l:()=>s});var r=n(19064),i=n(96643),o=n(198);function s(){return(0,r.e)((function(e,t){e.subscribe((0,i.x)(t,o.Z))}))}},36834:(e,t,n)=>{n.d(t,{x:()=>o});var r=n(19064),i=n(96643);function o(){return(0,r.e)((function(e,t){e.subscribe((0,i.x)(t,(function(){t.next(!1),t.complete()}),(function(){t.next(!0),t.complete()})))}))}},3025:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(94173),i=n(4447),o=n(67982),s=n(17869),a=n(89364);function c(e,t){return(0,o.z)((0,a.q)(),(0,s.z)((function(t){return e(t)})),t?(0,i.Z)(t):r.y)}},21200:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(54784),i=n(90572),o=n(86599),s=n(27649),a=n(5447),c=n(94173);function u(e,t){var n=arguments.length>=2;return function(u){return u.pipe(e?(0,i.h)((function(t,n){return e(t,n,u)})):c.y,(0,o.h)(1),n?(0,a.d)(t):(0,s.T)((function(){return new r.K})))}}},59179:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(19064),i=n(96643);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){r.next(e.call(t,n,o++))})))}))}},29479:(e,t,n)=>{n.d(t,{h:()=>i});var r=n(59179);function i(e){return(0,r.U)((function(){return e}))}},95840:(e,t,n)=>{n.d(t,{i:()=>s});var r=n(54481),i=n(19064),o=n(96643);function s(){return(0,i.e)((function(e,t){e.subscribe((0,o.x)(t,(function(e){t.next(r.P_.createNext(e))}),(function(){t.next(r.P_.createComplete()),t.complete()}),(function(e){t.next(r.P_.createError(e)),t.complete()})))}))}},61574:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(84523),i=n(32540);function o(e){return(0,r.u)((0,i.m)(e)?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t})}},17705:(e,t,n)=>{n.d(t,{T:()=>c});var r=n(5972),i=n(19064),o=n(31603),s=n(2673),a=n(50750);function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,s.yG)(e),c=(0,s._6)(e,1/0);return(0,i.e)((function(t,i){(0,o.J)(c)((0,a.D)((0,r.ev)([t],(0,r.CR)(e)),n)).subscribe(i)}))}},31603:(e,t,n)=>{n.d(t,{J:()=>o});var r=n(17869),i=n(94173);function o(e){return void 0===e&&(e=1/0),(0,r.z)(i.y,e)}},38079:(e,t,n)=>{n.d(t,{p:()=>s});var r=n(16537),i=n(20610),o=n(96643);function s(e,t,n,s,a,c,u,l){var d=[],h=0,f=0,p=!1,g=function(){!p||d.length||h||t.complete()},m=function(e){return h<s?_(e):d.push(e)},_=function(e){c&&t.next(e),h++;var l=!1;(0,r.Xf)(n(e,f++)).subscribe((0,o.x)(t,(function(e){null==a||a(e),c?m(e):t.next(e)}),(function(){l=!0}),void 0,(function(){if(l)try{h--;for(var e=function(){var e=d.shift();u?(0,i.f)(t,u,(function(){return _(e)})):_(e)};d.length&&h<s;)e();g()}catch(e){t.error(e)}})))};return e.subscribe((0,o.x)(t,m,(function(){p=!0,g()}))),function(){null==l||l()}}},17869:(e,t,n)=>{n.d(t,{z:()=>c});var r=n(59179),i=n(16537),o=n(19064),s=n(38079),a=n(32540);function c(e,t,n){return void 0===n&&(n=1/0),(0,a.m)(t)?c((function(n,o){return(0,r.U)((function(e,r){return t(n,e,o,r)}))((0,i.Xf)(e(n,o)))}),n):("number"==typeof t&&(n=t),(0,o.e)((function(t,r){return(0,s.p)(t,r,e,n)})))}},36594:(e,t,n)=>{n.d(t,{j:()=>o});var r=n(17869),i=n(32540);function o(e,t,n){return void 0===n&&(n=1/0),(0,i.m)(t)?(0,r.z)((function(){return e}),t,n):("number"==typeof t&&(n=t),(0,r.z)((function(){return e}),n))}},75619:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(19064),i=n(38079);function o(e,t,n){return void 0===n&&(n=1/0),(0,r.e)((function(r,o){var s=t;return(0,i.p)(r,o,(function(t,n){return e(s,t,n)}),n,(function(e){s=e}),!1,void 0,(function(){return s=null}))}))}},61077:(e,t,n)=>{n.d(t,{V:()=>o});var r=n(84523),i=n(32540);function o(e){return(0,r.u)((0,i.m)(e)?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t})}},9642:(e,t,n)=>{n.d(t,{O:()=>s});var r=n(30499),i=n(32540),o=n(87708);function s(e,t){var n=(0,i.m)(e)?e:function(){return e};return(0,i.m)(t)?(0,o.$)(t,{connector:n}):function(e){return new r.c(e,n)}}},37108:(e,t,n)=>{n.d(t,{Q:()=>s});var r=n(20610),i=n(19064),o=n(96643);function s(e,t){return void 0===t&&(t=0),(0,i.e)((function(n,i){n.subscribe((0,o.x)(i,(function(n){return(0,r.f)(i,e,(function(){return i.next(n)}),t)}),(function(){return(0,r.f)(i,e,(function(){return i.complete()}),t)}),(function(n){return(0,r.f)(i,e,(function(){return i.error(n)}),t)})))}))}},7949:(e,t,n)=>{n.d(t,{h:()=>s});var r=n(5972),i=n(72876),o=n(21772);var s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,i.k)(e);return function(e){return o.h.apply(void 0,(0,r.ev)([e],(0,r.CR)(n)))}}},78129:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(19064),i=n(96643);function o(){return(0,r.e)((function(e,t){var n,r=!1;e.subscribe((0,i.x)(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))}))}},84091:(e,t,n)=>{n.d(t,{u:()=>o});var r=n(60554),i=n(90572);function o(e,t){return function(n){return[(0,i.h)(e,t)(n),(0,i.h)((0,r.f)(e,t))(n)]}}},90517:(e,t,n)=>{n.d(t,{j:()=>i});var r=n(59179);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return(0,r.U)((function(t){for(var r=t,i=0;i<n;i++){var o=null==r?void 0:r[e[i]];if(void 0===o)return;r=o}return r}))}},89457:(e,t,n)=>{n.d(t,{n:()=>s});var r=n(74822),i=n(9642),o=n(87708);function s(e){return e?function(t){return(0,o.$)(e)(t)}:function(e){return(0,i.O)(new r.x)(e)}}},24832:(e,t,n)=>{n.d(t,{n:()=>o});var r=n(62552),i=n(30499);function o(e){return function(t){var n=new r.X(e);return new i.c(t,(function(){return n}))}}},7009:(e,t,n)=>{n.d(t,{C:()=>o});var r=n(7572),i=n(30499);function o(){return function(e){var t=new r.c;return new i.c(e,(function(){return t}))}}},28404:(e,t,n)=>{n.d(t,{_:()=>s});var r=n(55341),i=n(9642),o=n(32540);function s(e,t,n,s){n&&!(0,o.m)(n)&&(s=n);var a=(0,o.m)(n)?n:void 0;return function(n){return(0,i.O)(new r.t(e,t,s),a)(n)}}},18632:(e,t,n)=>{n.d(t,{S:()=>s});var r=n(5972),i=n(72876),o=n(59200);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.Q.apply(void 0,(0,r.ev)([],(0,r.CR)((0,i.k)(e))))}},59200:(e,t,n)=>{n.d(t,{Q:()=>a});var r=n(5972),i=n(26156),o=n(19064),s=n(94173);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(0,o.e)((function(t,n){(0,i.R)((0,r.ev)([t],(0,r.CR)(e)))(n)})):s.y}},84523:(e,t,n)=>{n.d(t,{u:()=>o});var r=n(60904),i=n(19064);function o(e,t){return(0,i.e)((0,r.U)(e,t,arguments.length>=2,!1,!0))}},93790:(e,t,n)=>{n.d(t,{x:()=>o});var r=n(19064),i=n(96643);function o(){return(0,r.e)((function(e,t){var n=null;e._refCount++;var r=(0,i.x)(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,i=n;n=null,!r||i&&r!==i||r.unsubscribe(),t.unsubscribe()}}));e.subscribe(r),r.closed||(n=e.connect())}))}},40668:(e,t,n)=>{n.d(t,{r:()=>c});var r=n(36344),i=n(19064),o=n(96643),s=n(16537),a=n(93440);function c(e){var t,n,c=1/0;return null!=e&&("object"==typeof e?(t=e.count,c=void 0===t?1/0:t,n=e.delay):c=e),c<=0?function(){return r.E}:(0,i.e)((function(e,t){var r,i=0,u=function(){if(null==r||r.unsubscribe(),r=null,null!=n){var e="number"==typeof n?(0,a.H)(n):(0,s.Xf)(n(i)),c=(0,o.x)(t,(function(){c.unsubscribe(),l()}));e.subscribe(c)}else l()},l=function(){var n=!1;r=e.subscribe((0,o.x)(t,void 0,(function(){++i<c?r?u():n=!0:t.complete()}))),n&&u()};l()}))}},30365:(e,t,n)=>{n.d(t,{a:()=>a});var r=n(16537),i=n(74822),o=n(19064),s=n(96643);function a(e){return(0,o.e)((function(t,n){var o,a,c=!1,u=!1,l=!1,d=function(){return l&&u&&(n.complete(),!0)},h=function(){l=!1,o=t.subscribe((0,s.x)(n,void 0,(function(){l=!0,!d()&&(a||(a=new i.x,(0,r.Xf)(e(a)).subscribe((0,s.x)(n,(function(){o?h():c=!0}),(function(){u=!0,d()})))),a).next()}))),c&&(o.unsubscribe(),o=null,c=!1,h())};h()}))}},71051:(e,t,n)=>{n.d(t,{X:()=>c});var r=n(19064),i=n(96643),o=n(94173),s=n(93440),a=n(16537);function c(e){var t;void 0===e&&(e=1/0);var n=(t=e&&"object"==typeof e?e:{count:e}).count,c=void 0===n?1/0:n,u=t.delay,l=t.resetOnSuccess,d=void 0!==l&&l;return c<=0?o.y:(0,r.e)((function(e,t){var n,r=0,o=function(){var l=!1;n=e.subscribe((0,i.x)(t,(function(e){d&&(r=0),t.next(e)}),void 0,(function(e){if(r++<c){var d=function(){n?(n.unsubscribe(),n=null,o()):l=!0};if(null!=u){var h="number"==typeof u?(0,s.H)(u):(0,a.Xf)(u(e,r)),f=(0,i.x)(t,(function(){f.unsubscribe(),d()}),(function(){t.complete()}));h.subscribe(f)}else d()}else t.error(e)}))),l&&(n.unsubscribe(),n=null,o())};o()}))}},64715:(e,t,n)=>{n.d(t,{a:()=>a});var r=n(16537),i=n(74822),o=n(19064),s=n(96643);function a(e){return(0,o.e)((function(t,n){var o,a,c=!1,u=function(){o=t.subscribe((0,s.x)(n,void 0,void 0,(function(t){a||(a=new i.x,(0,r.Xf)(e(a)).subscribe((0,s.x)(n,(function(){return o?u():c=!0})))),a&&a.next(t)}))),c&&(o.unsubscribe(),o=null,c=!1,u())};u()}))}},79859:(e,t,n)=>{n.d(t,{U:()=>a});var r=n(16537),i=n(19064),o=n(198),s=n(96643);function a(e){return(0,i.e)((function(t,n){var i=!1,a=null;t.subscribe((0,s.x)(n,(function(e){i=!0,a=e}))),(0,r.Xf)(e).subscribe((0,s.x)(n,(function(){if(i){i=!1;var e=a;a=null,n.next(e)}}),o.Z))}))}},25503:(e,t,n)=>{n.d(t,{b:()=>s});var r=n(25941),i=n(79859),o=n(84766);function s(e,t){return void 0===t&&(t=r.z),(0,i.U)((0,o.F)(e,t))}},3199:(e,t,n)=>{n.d(t,{R:()=>o});var r=n(19064),i=n(60904);function o(e,t){return(0,r.e)((0,i.U)(e,t,arguments.length>=2,!0))}},60904:(e,t,n)=>{n.d(t,{U:()=>i});var r=n(96643);function i(e,t,n,i,o){return function(s,a){var c=n,u=t,l=0;s.subscribe((0,r.x)(a,(function(t){var n=l++;u=c?e(u,t,n):(c=!0,t),i&&a.next(u)}),o&&function(){c&&a.next(u),a.complete()}))}}},58842:(e,t,n)=>{n.d(t,{N:()=>s});var r=n(19064),i=n(96643),o=n(16537);function s(e,t){return void 0===t&&(t=function(e,t){return e===t}),(0,r.e)((function(n,r){var s={buffer:[],complete:!1},a={buffer:[],complete:!1},c=function(e){r.next(e),r.complete()},u=function(e,n){var o=(0,i.x)(r,(function(r){var i=n.buffer,o=n.complete;0===i.length?o?c(!1):e.buffer.push(r):!t(r,i.shift())&&c(!1)}),(function(){e.complete=!0;var t=n.complete,r=n.buffer;t&&c(0===r.length),null==o||o.unsubscribe()}));return o};n.subscribe(u(s,a)),(0,o.Xf)(e).subscribe(u(a,s))}))}},32734:(e,t,n)=>{n.d(t,{B:()=>c});var r=n(5972),i=n(16537),o=n(74822),s=n(69088),a=n(19064);function c(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new o.x}:t,r=e.resetOnError,c=void 0===r||r,l=e.resetOnComplete,d=void 0===l||l,h=e.resetOnRefCountZero,f=void 0===h||h;return function(e){var t,r,o,l=0,h=!1,p=!1,g=function(){null==r||r.unsubscribe(),r=void 0},m=function(){g(),t=o=void 0,h=p=!1},_=function(){var e=t;m(),null==e||e.unsubscribe()};return(0,a.e)((function(e,a){l++,p||h||g();var b=o=null!=o?o:n();a.add((function(){0!==--l||p||h||(r=u(_,f))})),b.subscribe(a),!t&&l>0&&(t=new s.Hp({next:function(e){return b.next(e)},error:function(e){p=!0,g(),r=u(m,c,e),b.error(e)},complete:function(){h=!0,g(),r=u(m,d),b.complete()}}),(0,i.Xf)(e).subscribe(t))}))(e)}}function u(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!0!==t){if(!1!==t){var a=new s.Hp({next:function(){a.unsubscribe(),e()}});return(0,i.Xf)(t.apply(void 0,(0,r.ev)([],(0,r.CR)(n)))).subscribe(a)}}else e()}},89408:(e,t,n)=>{n.d(t,{d:()=>o});var r=n(55341),i=n(32734);function o(e,t,n){var o,s,a,c,u=!1;return e&&"object"==typeof e?(o=e.bufferSize,c=void 0===o?1/0:o,s=e.windowTime,t=void 0===s?1/0:s,u=void 0!==(a=e.refCount)&&a,n=e.scheduler):c=null!=e?e:1/0,(0,i.B)({connector:function(){return new r.t(c,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}},67929:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(54784),i=n(3148),o=(0,i.d)((function(e){return function(t){e(this),this.name="SequenceError",this.message=t}})),s=(0,i.d)((function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}})),a=n(19064),c=n(96643);function u(e){return(0,a.e)((function(t,n){var i,a=!1,u=!1,l=0;t.subscribe((0,c.x)(n,(function(r){u=!0,e&&!e(r,l++,t)||(a&&n.error(new o("Too many matching values")),a=!0,i=r)}),(function(){a?(n.next(i),n.complete()):n.error(u?new s("No matching values"):new r.K)})))}))}},8794:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(90572);function i(e){return(0,r.h)((function(t,n){return e<=n}))}},15453:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(94173),i=n(19064),o=n(96643);function s(e){return e<=0?r.y:(0,i.e)((function(t,n){var r=new Array(e),i=0;return t.subscribe((0,o.x)(n,(function(t){var o=i++;if(o<e)r[o]=t;else{var s=o%e,a=r[s];r[s]=t,n.next(a)}}))),function(){r=null}}))}},19830:(e,t,n)=>{n.d(t,{u:()=>a});var r=n(19064),i=n(96643),o=n(16537),s=n(198);function a(e){return(0,r.e)((function(t,n){var r=!1,a=(0,i.x)(n,(function(){null==a||a.unsubscribe(),r=!0}),s.Z);(0,o.Xf)(e).subscribe(a),t.subscribe((0,i.x)(n,(function(e){return r&&n.next(e)})))}))}},98189:(e,t,n)=>{n.d(t,{n:()=>o});var r=n(19064),i=n(96643);function o(e){return(0,r.e)((function(t,n){var r=!1,o=0;t.subscribe((0,i.x)(n,(function(t){return(r||(r=!e(t,o++)))&&n.next(t)})))}))}},954:(e,t,n)=>{n.d(t,{O:()=>s});var r=n(20680),i=n(2673),o=n(19064);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,i.yG)(e);return(0,o.e)((function(t,i){(n?(0,r.z)(e,t,n):(0,r.z)(e,t)).subscribe(i)}))}},53459:(e,t,n)=>{n.d(t,{R:()=>i});var r=n(19064);function i(e,t){return void 0===t&&(t=0),(0,r.e)((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}},54115:(e,t,n)=>{n.d(t,{B:()=>o});var r=n(20161),i=n(94173);function o(){return(0,r.w)(i.y)}},20161:(e,t,n)=>{n.d(t,{w:()=>s});var r=n(16537),i=n(19064),o=n(96643);function s(e,t){return(0,i.e)((function(n,i){var s=null,a=0,c=!1,u=function(){return c&&!s&&i.complete()};n.subscribe((0,o.x)(i,(function(n){null==s||s.unsubscribe();var c=0,l=a++;(0,r.Xf)(e(n,l)).subscribe(s=(0,o.x)(i,(function(e){return i.next(t?t(n,e,l,c++):e)}),(function(){s=null,u()})))}),(function(){c=!0,u()})))}))}},53976:(e,t,n)=>{n.d(t,{c:()=>o});var r=n(20161),i=n(32540);function o(e,t){return(0,i.m)(t)?(0,r.w)((function(){return e}),t):(0,r.w)((function(){return e}))}},84178:(e,t,n)=>{n.d(t,{q:()=>s});var r=n(36344),i=n(19064),o=n(96643);function s(e){return e<=0?function(){return r.E}:(0,i.e)((function(t,n){var r=0;t.subscribe((0,o.x)(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}},86599:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(5972),i=n(36344),o=n(19064),s=n(96643);function a(e){return e<=0?function(){return i.E}:(0,o.e)((function(t,n){var i=[];t.subscribe((0,s.x)(n,(function(t){i.push(t),e<i.length&&i.shift()}),(function(){var e,t;try{for(var o=(0,r.XA)(i),s=o.next();!s.done;s=o.next()){var a=s.value;n.next(a)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}n.complete()}),void 0,(function(){i=null})))}))}},44045:(e,t,n)=>{n.d(t,{R:()=>a});var r=n(19064),i=n(96643),o=n(16537),s=n(198);function a(e){return(0,r.e)((function(t,n){(0,o.Xf)(e).subscribe((0,i.x)(n,(function(){return n.complete()}),s.Z)),!n.closed&&t.subscribe(n)}))}},39256:(e,t,n)=>{n.d(t,{o:()=>o});var r=n(19064),i=n(96643);function o(e,t){return void 0===t&&(t=!1),(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){var i=e(n,o++);(i||t)&&r.next(n),!i&&r.complete()})))}))}},63532:(e,t,n)=>{n.d(t,{b:()=>a});var r=n(32540),i=n(19064),o=n(96643),s=n(94173);function a(e,t,n){var a=(0,r.m)(e)||t||n?{next:e,error:t,complete:n}:e;return a?(0,i.e)((function(e,t){var n;null===(n=a.subscribe)||void 0===n||n.call(a);var r=!0;e.subscribe((0,o.x)(t,(function(e){var n;null===(n=a.next)||void 0===n||n.call(a,e),t.next(e)}),(function(){var e;r=!1,null===(e=a.complete)||void 0===e||e.call(a),t.complete()}),(function(e){var n;r=!1,null===(n=a.error)||void 0===n||n.call(a,e),t.error(e)}),(function(){var e,t;r&&(null===(e=a.unsubscribe)||void 0===e||e.call(a)),null===(t=a.finalize)||void 0===t||t.call(a)})))})):s.y}},4040:(e,t,n)=>{n.d(t,{P:()=>s});var r=n(19064),i=n(96643),o=n(16537);function s(e,t){return(0,r.e)((function(n,r){var s=null!=t?t:{},a=s.leading,c=void 0===a||a,u=s.trailing,l=void 0!==u&&u,d=!1,h=null,f=null,p=!1,g=function(){null==f||f.unsubscribe(),f=null,l&&(b(),p&&r.complete())},m=function(){f=null,p&&r.complete()},_=function(t){return f=(0,o.Xf)(e(t)).subscribe((0,i.x)(r,g,m))},b=function(){if(d){d=!1;var e=h;h=null,r.next(e),!p&&_(e)}};n.subscribe((0,i.x)(r,(function(e){d=!0,h=e,(!f||f.closed)&&(c?b():_(e))}),(function(){p=!0,(!(l&&d&&f)||f.closed)&&r.complete()})))}))}},84908:(e,t,n)=>{n.d(t,{p:()=>s});var r=n(25941),i=n(4040),o=n(93440);function s(e,t,n){void 0===t&&(t=r.z);var s=(0,o.H)(e,t);return(0,i.P)((function(){return s}),n)}},27649:(e,t,n)=>{n.d(t,{T:()=>s});var r=n(54784),i=n(19064),o=n(96643);function s(e){return void 0===e&&(e=a),(0,i.e)((function(t,n){var r=!1;t.subscribe((0,o.x)(n,(function(e){r=!0,n.next(e)}),(function(){return r?n.complete():n.error(e())})))}))}function a(){return new r.K}},67227:(e,t,n)=>{n.d(t,{J:()=>s});var r=n(25941),i=n(19064),o=n(96643);function s(e){return void 0===e&&(e=r.z),(0,i.e)((function(t,n){var r=e.now();t.subscribe((0,o.x)(n,(function(t){var i=e.now(),o=i-r;r=i,n.next(new a(t,o))})))}))}var a=function(e,t){this.value=e,this.interval=t}},18519:(e,t,n)=>{n.d(t,{V:()=>d,W:()=>l});var r=n(25941),i=n(11203),o=n(19064),s=n(16537),a=n(3148),c=n(96643),u=n(20610),l=(0,a.d)((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function d(e,t){var n=(0,i.q)(e)?{first:e}:"number"==typeof e?{each:e}:e,a=n.first,l=n.each,d=n.with,f=void 0===d?h:d,p=n.scheduler,g=void 0===p?null!=t?t:r.z:p,m=n.meta,_=void 0===m?null:m;if(null==a&&null==l)throw new TypeError("No timeout provided.");return(0,o.e)((function(e,t){var n,r,i=null,o=0,d=function(e){r=(0,u.f)(t,g,(function(){try{n.unsubscribe(),(0,s.Xf)(f({meta:_,lastValue:i,seen:o})).subscribe(t)}catch(e){t.error(e)}}),e)};n=e.subscribe((0,c.x)(t,(function(e){null==r||r.unsubscribe(),o++,t.next(i=e),l>0&&d(l)}),void 0,void 0,(function(){(null==r?void 0:r.closed)||null==r||r.unsubscribe(),i=null}))),!o&&d(null!=a?"number"==typeof a?a:+a-g.now():l)}))}function h(e){throw new l(e)}},18595:(e,t,n)=>{n.d(t,{L:()=>s});var r=n(25941),i=n(11203),o=n(18519);function s(e,t,n){var s,a,c;if(n=null!=n?n:r.P,(0,i.q)(e)?s=e:"number"==typeof e&&(a=e),!t)throw new TypeError("No observable provided to switch to");if(c=function(){return t},null==s&&null==a)throw new TypeError("No timeout provided.");return(0,o.V)({first:s,each:a,scheduler:n,with:c})}},37163:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(80210),i=n(59179);function o(e){return void 0===e&&(e=r.l),(0,i.U)((function(t){return{value:t,timestamp:e.now()}}))}},89364:(e,t,n)=>{n.d(t,{q:()=>s});var r=n(84523),i=n(19064),o=function(e,t){return e.push(t),e};function s(){return(0,i.e)((function(e,t){(0,r.u)(o,[])(e).subscribe(t)}))}},21754:(e,t,n)=>{n.d(t,{u:()=>c});var r=n(74822),i=n(19064),o=n(96643),s=n(198),a=n(16537);function c(e){return(0,i.e)((function(t,n){var i=new r.x;n.next(i.asObservable());var c=function(e){i.error(e),n.error(e)};return t.subscribe((0,o.x)(n,(function(e){return null==i?void 0:i.next(e)}),(function(){i.complete(),n.complete()}),c)),(0,a.Xf)(e).subscribe((0,o.x)(n,(function(){i.complete(),n.next(i=new r.x)}),s.Z,c)),function(){null==i||i.unsubscribe(),i=null}}))}},97033:(e,t,n)=>{n.d(t,{r:()=>a});var r=n(5972),i=n(74822),o=n(19064),s=n(96643);function a(e,t){void 0===t&&(t=0);var n=t>0?t:e;return(0,o.e)((function(t,o){var a=[new i.x],c=0;o.next(a[0].asObservable()),t.subscribe((0,s.x)(o,(function(t){var s,u;try{for(var l=(0,r.XA)(a),d=l.next();!d.done;d=l.next()){d.value.next(t)}}catch(e){s={error:e}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}var h=c-e+1;if(h>=0&&h%n==0&&a.shift().complete(),++c%n==0){var f=new i.x;a.push(f),o.next(f.asObservable())}}),(function(){for(;a.length>0;)a.shift().complete();o.complete()}),(function(e){for(;a.length>0;)a.shift().error(e);o.error(e)}),(function(){null,a=null})))}))}},58861:(e,t,n)=>{n.d(t,{I:()=>d});var r=n(74822),i=n(25941),o=n(32073),s=n(19064),a=n(96643),c=n(10135),u=n(2673),l=n(20610);function d(e){for(var t,n,d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var f=null!==(t=(0,u.yG)(d))&&void 0!==t?t:i.z,p=null!==(n=d[0])&&void 0!==n?n:null,g=d[1]||1/0;return(0,s.e)((function(t,n){var i=[],s=!1,u=function(e){var t=e.window,n=e.subs;t.complete(),n.unsubscribe(),(0,c.P)(i,e),s&&d()},d=function(){if(i){var t=new o.w0;n.add(t);var s=new r.x,a={window:s,subs:t,seen:0};i.push(a),n.next(s.asObservable()),(0,l.f)(t,f,(function(){return u(a)}),e)}};null!==p&&p>=0?(0,l.f)(n,f,d,p,!0):s=!0,d();var h=function(e){return i.slice().forEach(e)},m=function(e){h((function(t){var n=t.window;return e(n)})),e(n),n.unsubscribe()};return t.subscribe((0,a.x)(n,(function(e){h((function(t){t.window.next(e),g<=++t.seen&&u(t)}))}),(function(){return m((function(e){return e.complete()}))}),(function(e){return m((function(t){return t.error(e)}))}))),function(){i=null}}))}},62965:(e,t,n)=>{n.d(t,{j:()=>d});var r=n(5972),i=n(74822),o=n(32073),s=n(19064),a=n(16537),c=n(96643),u=n(198),l=n(10135);function d(e,t){return(0,s.e)((function(n,s){var d=[],h=function(e){for(;0<d.length;)d.shift().error(e);s.error(e)};(0,a.Xf)(e).subscribe((0,c.x)(s,(function(e){var n=new i.x;d.push(n);var r,f=new o.w0;try{r=(0,a.Xf)(t(e))}catch(e){return void h(e)}s.next(n.asObservable()),f.add(r.subscribe((0,c.x)(s,(function(){(0,l.P)(d,n),n.complete(),f.unsubscribe()}),u.Z,h)))}),u.Z)),n.subscribe((0,c.x)(s,(function(e){var t,n,i=d.slice();try{for(var o=(0,r.XA)(i),s=o.next();!s.done;s=o.next()){s.value.next(e)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}),(function(){for(;0<d.length;)d.shift().complete();s.complete()}),h,(function(){for(;0<d.length;)d.shift().unsubscribe()})))}))}},57384:(e,t,n)=>{n.d(t,{Q:()=>a});var r=n(74822),i=n(19064),o=n(96643),s=n(16537);function a(e){return(0,i.e)((function(t,n){var i,a,c=function(e){i.error(e),n.error(e)},u=function(){var t;null==a||a.unsubscribe(),null==i||i.complete(),i=new r.x,n.next(i.asObservable());try{t=(0,s.Xf)(e())}catch(e){return void c(e)}t.subscribe(a=(0,o.x)(n,u,u,c))};u(),t.subscribe((0,o.x)(n,(function(e){return i.next(e)}),(function(){i.complete(),n.complete()}),c,(function(){null==a||a.unsubscribe(),i=null})))}))}},10883:(e,t,n)=>{n.d(t,{M:()=>l});var r=n(5972),i=n(19064),o=n(96643),s=n(16537),a=n(94173),c=n(198),u=n(2673);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,u.jO)(e);return(0,i.e)((function(t,i){for(var u=e.length,l=new Array(u),d=e.map((function(){return!1})),h=!1,f=function(t){(0,s.Xf)(e[t]).subscribe((0,o.x)(i,(function(e){l[t]=e,h||d[t]||(d[t]=!0,(h=d.every(a.y))&&(d=null))}),c.Z))},p=0;p<u;p++)f(p);t.subscribe((0,o.x)(i,(function(e){if(h){var t=(0,r.ev)([e],(0,r.CR)(l));i.next(n?n.apply(void 0,(0,r.ev)([],(0,r.CR)(t))):t)}})))}))}},13369:(e,t,n)=>{n.d(t,{$:()=>s});var r=n(5972),i=n(98017),o=n(19064);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,o.e)((function(t,n){i.$.apply(void 0,(0,r.ev)([t],(0,r.CR)(e))).subscribe(n)}))}},27121:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(98017),i=n(3025);function o(e){return(0,i.Z)(r.$,e)}},76562:(e,t,n)=>{n.d(t,{r:()=>i});var r=n(8867);function i(e,t){return new r.y((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}},98061:(e,t,n)=>{n.d(t,{z:()=>o});var r=n(8867),i=n(20610);function o(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y((function(n){(0,i.f)(n,t,(function(){var r=e[Symbol.asyncIterator]();(0,i.f)(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}},41563:(e,t,n)=>{n.d(t,{Q:()=>a});var r=n(8867),i=n(95635),o=n(32540),s=n(20610);function a(e,t){return new r.y((function(n){var r;return(0,s.f)(n,t,(function(){r=e[i.h](),(0,s.f)(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return(0,o.m)(null==r?void 0:r.return)&&r.return()}}))}},97441:(e,t,n)=>{n.d(t,{l:()=>s});var r=n(16537),i=n(37108),o=n(53459);function s(e,t){return(0,r.Xf)(e).pipe((0,o.R)(t),(0,i.Q)(t))}},27511:(e,t,n)=>{n.d(t,{c:()=>s});var r=n(16537),i=n(37108),o=n(53459);function s(e,t){return(0,r.Xf)(e).pipe((0,o.R)(t),(0,i.Q)(t))}},65784:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(98061),i=n(43852);function o(e,t){return(0,r.z)((0,i.Q)(e),t)}},91603:(e,t,n)=>{n.d(t,{x:()=>m});var r=n(97441),i=n(27511),o=n(76562),s=n(41563),a=n(98061),c=n(78816),u=n(2662),l=n(87991),d=n(95256),h=n(13532),f=n(29226),p=n(43852),g=n(65784);function m(e,t){if(null!=e){if((0,c.c)(e))return(0,r.l)(e,t);if((0,l.z)(e))return(0,o.r)(e,t);if((0,u.t)(e))return(0,i.c)(e,t);if((0,h.D)(e))return(0,a.z)(e,t);if((0,d.T)(e))return(0,s.Q)(e,t);if((0,p.L)(e))return(0,g.v)(e,t)}throw(0,f.z)(e)}},25333:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(5972),i=function(e){function t(t,n){return e.call(this)||this}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(32073).w0)},49571:(e,t,n)=>{n.d(t,{o:()=>a});var r=n(5972),i=n(25333),o=n(70498),s=n(10135),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),o.V.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&o.V.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,s.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(i.a)},16677:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(5972),i=n(36912),o=function(e){function t(t,n){void 0===n&&(n=i.b.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return(0,r.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i.b)},86150:(e,t,n)=>{n.d(t,{h:()=>a,y:()=>s});var r=n(5972),i=n(49571),o=n(32073),s=function(e){function t(t,n){void 0===t&&(t=a),void 0===n&&(n=1/0);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return(0,r.ZT)(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(n(16677).v),a=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return(0,r.ZT)(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),Number.isFinite(r)){if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)}return o.w0.EMPTY},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(i.o)},52826:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(5972),i=n(49571),o=n(32073),s={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,r=s.delegate;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);var i=t((function(t){n=void 0,e(t)}));return new o.w0((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=s.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,r.ev)([],(0,r.CR)(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=s.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,r.ev)([],(0,r.CR)(e)))},delegate:void 0},a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return(0,r.ZT)(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=s.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,r){var i;if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o=t.actions;null!=n&&n===t._scheduled&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==n&&(s.cancelAnimationFrame(n),t._scheduled=void 0)},t}(i.o),c=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.flush=function(e){var t;this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);var n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(n(16677).v))(a)},69996:(e,t,n)=>{n.d(t,{E:()=>f});var r,i=n(5972),o=n(49571),s=1,a={};function c(e){return e in a&&(delete a[e],!0)}var u=function(e){var t=s++;return a[t]=!0,r||(r=Promise.resolve()),r.then((function(){return c(t)&&e()})),t},l=function(e){c(e)},d={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=d.delegate;return((null==n?void 0:n.setImmediate)||u).apply(void 0,(0,i.ev)([],(0,i.CR)(e)))},clearImmediate:function(e){var t=d.delegate;return((null==t?void 0:t.clearImmediate)||l)(e)},delegate:void 0},h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return(0,i.ZT)(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=d.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,n,r){var i;if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o=t.actions;null!=n&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==n&&(d.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},t}(o.o),f=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(n(16677).v))(h)},25941:(e,t,n)=>{n.d(t,{P:()=>o,z:()=>i});var r=n(49571),i=new(n(16677).v)(r.o),o=i},80210:(e,t,n)=>{n.d(t,{l:()=>r});var r={now:function(){return(r.delegate||Date).now()},delegate:void 0}},70498:(e,t,n)=>{n.d(t,{V:()=>i});var r=n(5972),i={setInterval:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=i.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,(0,r.ev)([e,t],(0,r.CR)(n))):setInterval.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(n)))},clearInterval:function(e){var t=i.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0}},19946:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(5972),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return(0,r.ZT)(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.flush(this),0)},t}(n(49571).o),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t}(n(16677).v))(i)},80067:(e,t,n)=>{n.d(t,{z:()=>i});var r=n(5972),i={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=i.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,(0,r.ev)([e,t],(0,r.CR)(n))):setTimeout.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(n)))},clearTimeout:function(e){var t=i.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},95635:(e,t,n)=>{n.d(t,{h:()=>r});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},61443:(e,t,n)=>{n.d(t,{L:()=>r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},64522:(e,t,n)=>{n.d(t,{W:()=>r});var r=(0,n(3148).d)((function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}))},54784:(e,t,n)=>{n.d(t,{K:()=>r});var r=(0,n(3148).d)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}))},17617:(e,t,n)=>{n.d(t,{N:()=>r});var r=(0,n(3148).d)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}))},62178:(e,t,n)=>{n.d(t,{B:()=>r});var r=(0,n(3148).d)((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}))},2673:(e,t,n)=>{n.d(t,{_6:()=>c,jO:()=>s,yG:()=>a});var r=n(32540),i=n(34446);function o(e){return e[e.length-1]}function s(e){return(0,r.m)(o(e))?e.pop():void 0}function a(e){return(0,i.K)(o(e))?e.pop():void 0}function c(e,t){return"number"==typeof o(e)?e.pop():t}},38601:(e,t,n)=>{n.d(t,{D:()=>a});var r=Array.isArray,i=Object.getPrototypeOf,o=Object.prototype,s=Object.keys;function a(e){if(1===e.length){var t=e[0];if(r(t))return{args:t,keys:null};if((a=t)&&"object"==typeof a&&i(a)===o){var n=s(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var a;return{args:e,keys:null}}},72876:(e,t,n)=>{n.d(t,{k:()=>i});var r=Array.isArray;function i(e){return 1===e.length&&r(e[0])?e[0]:e}},10135:(e,t,n)=>{function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,{P:()=>r})},3148:(e,t,n)=>{function r(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,{d:()=>r})},56612:(e,t,n)=>{function r(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}n.d(t,{n:()=>r})},60798:(e,t,n)=>{n.d(t,{O:()=>s,x:()=>o});var r=n(86899),i=null;function o(e){if(r.v.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var n=i,o=n.errorThrown,s=n.error;if(i=null,o)throw s}}else e()}function s(e){r.v.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},20610:(e,t,n)=>{function r(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}n.d(t,{f:()=>r})},94173:(e,t,n)=>{function r(e){return e}n.d(t,{y:()=>r})},87991:(e,t,n)=>{n.d(t,{z:()=>r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},13532:(e,t,n)=>{n.d(t,{D:()=>i});var r=n(32540);function i(e){return Symbol.asyncIterator&&(0,r.m)(null==e?void 0:e[Symbol.asyncIterator])}},11203:(e,t,n)=>{function r(e){return e instanceof Date&&!isNaN(e)}n.d(t,{q:()=>r})},32540:(e,t,n)=>{function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},78816:(e,t,n)=>{n.d(t,{c:()=>o});var r=n(61443),i=n(32540);function o(e){return(0,i.m)(e[r.L])}},95256:(e,t,n)=>{n.d(t,{T:()=>o});var r=n(95635),i=n(32540);function o(e){return(0,i.m)(null==e?void 0:e[r.h])}},94155:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(8867),i=n(32540);function o(e){return!!e&&(e instanceof r.y||(0,i.m)(e.lift)&&(0,i.m)(e.subscribe))}},2662:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(32540);function i(e){return(0,r.m)(null==e?void 0:e.then)}},43852:(e,t,n)=>{n.d(t,{L:()=>s,Q:()=>o});var r=n(5972),i=n(32540);function o(e){return(0,r.FC)(this,arguments,(function(){var t,n,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,r.qq)(t.read())];case 3:return n=o.sent(),i=n.value,n.done?[4,(0,r.qq)(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,(0,r.qq)(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function s(e){return(0,i.m)(null==e?void 0:e.getReader)}},34446:(e,t,n)=>{n.d(t,{K:()=>i});var r=n(32540);function i(e){return e&&(0,r.m)(e.schedule)}},19064:(e,t,n)=>{n.d(t,{A:()=>i,e:()=>o});var r=n(32540);function i(e){return(0,r.m)(null==e?void 0:e.lift)}function o(e){return function(t){if(i(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}},4447:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(5972),i=n(59179),o=Array.isArray;function s(e){return(0,i.U)((function(t){return function(e,t){return o(t)?e.apply(void 0,(0,r.ev)([],(0,r.CR)(t))):e(t)}(e,t)}))}},198:(e,t,n)=>{function r(){}n.d(t,{Z:()=>r})},60554:(e,t,n)=>{function r(e,t){return function(n,r){return!e.call(t,n,r)}}n.d(t,{f:()=>r})},67982:(e,t,n)=>{n.d(t,{U:()=>o,z:()=>i});var r=n(94173);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return 0===e.length?r.y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},84679:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(86899),i=n(80067);function o(e){i.z.setTimeout((function(){var t=r.v.onUnhandledError;if(!t)throw e;t(e)}))}},29226:(e,t,n)=>{function r(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}n.d(t,{z:()=>r})},87998:function(e,t,n){var r;!function(i,o){var s="function",a="undefined",c="object",u="string",l="model",d="name",h="type",f="vendor",p="version",g="architecture",m="console",_="mobile",b="tablet",v="smarttv",y="wearable",w="embedded",x="Amazon",E="Apple",k="ASUS",C="BlackBerry",T="Firefox",S="Google",R="Huawei",I="LG",A="Microsoft",O="Motorola",F="Opera",P="Samsung",N="Sharp",L="Sony",D="Xiaomi",U="Zebra",M="Facebook",G=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},j=function(e,t){return typeof e===u&&-1!==q(t).indexOf(q(e))},q=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,350)},H=function(e,t){for(var n,r,i,a,u,l,d=0;d<t.length&&!u;){var h=t[d],f=t[d+1];for(n=r=0;n<h.length&&!u;)if(u=h[n++].exec(e))for(i=0;i<f.length;i++)l=u[++r],typeof(a=f[i])===c&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):o:this[a[0]]=l?a[1].call(this,l,a[2]):o:4===a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):o):this[a]=l||o;d+=2}},z=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(j(t[n][r],e))return"?"===n?o:n}else if(j(t[n],e))return"?"===n?o:n;return e},W={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},V={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,F]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[d,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,M],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,q]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[f,P],[h,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[f,P],[h,_]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[f,E],[h,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[f,E],[h,b]],[/(macintosh);/i],[l,[f,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[f,R],[h,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[f,R],[h,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[f,D],[h,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[f,D],[h,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[f,"OPPO"],[h,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[f,"Vivo"],[h,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[f,"Realme"],[h,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[f,O],[h,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[f,O],[h,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[f,I],[h,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[f,I],[h,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[f,"Lenovo"],[h,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[f,"Nokia"],[h,_]],[/(pixel c)\b/i],[l,[f,S],[h,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[f,S],[h,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,L],[h,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[f,L],[h,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[f,"OnePlus"],[h,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[f,x],[h,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[f,x],[h,_]],[/(playbook);[-\w\),; ]+(rim)/i],[l,f,[h,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[f,C],[h,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[f,k],[h,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[f,k],[h,_]],[/(nexus 9)/i],[l,[f,"HTC"],[h,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[l,/_/g," "],[h,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[f,"Acer"],[h,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[f,"Meizu"],[h,_]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[f,N],[h,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,l,[h,_]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,l,[h,b]],[/(surface duo)/i],[l,[f,A],[h,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[f,"Fairphone"],[h,_]],[/(u304aa)/i],[l,[f,"AT&T"],[h,_]],[/\bsie-(\w*)/i],[l,[f,"Siemens"],[h,_]],[/\b(rct\w+) b/i],[l,[f,"RCA"],[h,b]],[/\b(venue[\d ]{2,7}) b/i],[l,[f,"Dell"],[h,b]],[/\b(q(?:mv|ta)\w+) b/i],[l,[f,"Verizon"],[h,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[f,"Barnes & Noble"],[h,b]],[/\b(tm\d{3}\w+) b/i],[l,[f,"NuVision"],[h,b]],[/\b(k88) b/i],[l,[f,"ZTE"],[h,b]],[/\b(nx\d{3}j) b/i],[l,[f,"ZTE"],[h,_]],[/\b(gen\d{3}) b.+49h/i],[l,[f,"Swiss"],[h,_]],[/\b(zur\d{3}) b/i],[l,[f,"Swiss"],[h,b]],[/\b((zeki)?tb.*\b) b/i],[l,[f,"Zeki"],[h,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],l,[h,b]],[/\b(ns-?\w{0,9}) b/i],[l,[f,"Insignia"],[h,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[f,"NextBook"],[h,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],l,[h,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],l,[h,_]],[/\b(ph-1) /i],[l,[f,"Essential"],[h,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[f,"Envizen"],[h,b]],[/\b(trio[-\w\. ]+) b/i],[l,[f,"MachSpeed"],[h,b]],[/\btu_(1491) b/i],[l,[f,"Rotor"],[h,b]],[/(shield[\w ]+) b/i],[l,[f,"Nvidia"],[h,b]],[/(sprint) (\w+)/i],[f,l,[h,_]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,A],[h,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[f,U],[h,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[f,U],[h,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,l,[h,m]],[/droid.+; (shield) bui/i],[l,[f,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[l,[f,L],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[f,A],[h,m]],[/smart-tv.+(samsung)/i],[f,[h,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,P],[h,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,I],[h,v]],[/(apple) ?tv/i],[f,[l,"Apple TV"],[h,v]],[/crkey/i],[[l,"Chromecast"],[f,S],[h,v]],[/droid.+aft(\w)( bui|\))/i],[l,[f,x],[h,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[f,N],[h,v]],[/(bravia[\w ]+)( bui|\))/i],[l,[f,L],[h,v]],[/(mitv-\w{5}) bui/i],[l,[f,D],[h,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[f,B],[l,B],[h,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,v]],[/((pebble))app/i],[f,l,[h,y]],[/droid.+; (glass) \d/i],[l,[f,S],[h,y]],[/droid.+; (wt63?0{2,3})\)/i],[l,[f,U],[h,y]],[/(quest( 2)?)/i],[l,[f,M],[h,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[h,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[h,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,_]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,z,W]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,z,W]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},$=function(e,t){if(typeof e===c&&(t=e,e=o),!(this instanceof $))return new $(e,t).getResult();var n=e||(typeof i!==a&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(V,t):V;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,H.call(t,n,r.browser),t.major=typeof(e=t.version)===u?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e.architecture=o,H.call(e,n,r.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,H.call(e,n,r.device),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,H.call(e,n,r.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,H.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===u&&e.length>350?B(e,350):e,this},this.setUA(n),this};$.VERSION="1.0.33",$.BROWSER=G([d,p,"major"]),$.CPU=G([g]),$.DEVICE=G([l,f,h,m,_,v,b,y,w]),$.ENGINE=$.OS=G([d,p]),typeof t!==a?(e.exports&&(t=e.exports=$),t.UAParser=$):n.amdO?(r=function(){return $}.call(t,n,t,e))===o||(e.exports=r):typeof i!==a&&(i.UAParser=$);var K=typeof i!==a&&(i.jQuery||i.Zepto);if(K&&!K.ua){var X=new $;K.ua=X.getResult(),K.ua.get=function(){return X.getUA()},K.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var n in t)K.ua[n]=t[n]}}}("object"==typeof self?self:this)},74170:(e,t,n)=>{n.r(t),n.d(t,{AIEditorAgentExpertReviewExternal:()=>i,AIEditorAgentNotetakerInternal:()=>u,AIEditorAgentNotetakerInternalCoauthoring:()=>l,AIEditorAgentParaphraserExternal:()=>a,AIEditorAgentParaphraserInternal:()=>s,AIEditorAuthorshipAgent:()=>F,AIEditorAuthorshipAgentDecorations:()=>P,AIEditorChatAgentChatSuggestionSummary:()=>R,AIEditorExpertReview:()=>o,AIEditorHumanizer:()=>_,AIEditorParaphraserAllUnderlines:()=>c,AIEditorParaphraserFocusCard:()=>m,AIEditorParaphraserMyVoice:()=>g,AIEditorProofreaderRebase:()=>k,AIEditorProofreaderTrustedRewrite:()=>S,AIEditorReaderReactionsCustomAudience:()=>w,AIEditorReaderReactionsExternal:()=>v,AIEditorReaderReactionsInternal:()=>b,AIEditorReaderReactionsRebase:()=>y,AIEditorReaderReactionsRemoveCustomAudience:()=>x,CitationFinderUIV2:()=>N,CitationsRollout:()=>C,CitationsRolloutInternal:()=>T,ExpertReviewAutoScrollToFirstVBar:()=>f,ExpertReviewFollowUpActions:()=>d,ExpertReviewFollowUpActionsFreeform:()=>h,ExpertReviewRebase:()=>p,ExtensionReaderReactionsTextChangedNotification:()=>E,HumanizerAgentAIChat:()=>A,ParaphraserAgentAIChat:()=>I,ProofreaderWidgetGate:()=>O,ResumeBuilderInternal:()=>L});var r=n(23162);const i=new r.Cc("agent_expert_review_ai_editor_external","enabled"),o=new r.Cc("expert_review_ai_editor_internal","enabled"),s=new r.Cc("agent_paraphraser_ai_editor_internal","enabled"),a=new r.Cc("agent_paraphraser_ai_editor_external","enabled"),c=new r.Cc("agent_paraphraser_ai_editor_all_underlines","enabled"),u=new r.Cc("agent_notetaker_ai_editor_internal","enabled"),l=new r.Cc("agent_notetaker_coauthoring","enabled"),d=new r.Cc("agent_expert_review_ai_editor_followup_actions","enabled"),h=new r.Cc("agent_expert_review_ai_editor_followup_actions_freeform","enabled"),f=new r.Cc("agent_expert_review_ai_editor_autoscroll","enabled"),p=new r.Cc("agent_expert_review_ai_editor_rebase","enabled"),g=new r.Cc("agent_paraphraser_ai_editor_my_voice","enabled"),m=new r.Cc("agent_paraphraser_ai_editor_focus_cards","enabled"),_=new r.Cc("humanizer_ai_editor_internal","enabled"),b=new r.Cc("agent_reader_reactions_ai_editor_internal","enabled"),v=new r.Cc("agent_reader_reactions_ai_editor_external","enabled"),y=new r.Cc("agent_reader_reactions_ai_editor_rebase","enabled"),w=new r.Cc("agent_reader_reactions_ai_editor_custom_audience","enabled"),x=new r.Cc("agent_reader_reactions_ai_editor_remove_custom_audience","enabled"),E=new r.Cc("agent_reader_reactions_extension_text_changed_notification","enabled"),k=new r.Cc("proofreader_rebase_counters","enabled"),C=new r.Cc("citations_rollout","enabled"),T=new r.Cc("citations_rollout_internal","enabled"),S=new r.Cc("proofreader_trusted_rewrite","enabled"),R=new r.Cc("ai_editor_chat_agent_chat_suggestion_summary","enabled"),I=new r.Cc("paraphraser_agent_ai_chat","enabled"),A=new r.Cc("humanizer_agent_ai_chat","enabled"),O=new r.Cc("ai_editor_proofreader_widget","enabled"),F=new r.Cc("ai_editor_authorship_agent","enabled"),P=new r.Cc("ai_editor_authorship_agent_decorations","enabled"),N=new r.Cc("citation_finder_ui_v2","enabled"),L=new r.Cc("resume_builder_internal","enabled")},9986:(e,t,n)=>{n.d(t,{cK:()=>o,p7:()=>a,wn:()=>s});var r=n(12518),i=n(32103);const o=1e3,s=60*o,a=60*s,c=24*a;var u,l;!function(e){const t=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d*[Z]$/,n=/^(\d{4}-\d{2}-\d{2}).(\d{2}:\d{2}:\d{2}(?:.\d+)?)$/;function o(e){return e.getTime()}var s;e.create=function(e){return(0,i.kG)(t.test(e),"provided string should have timezone",e),new Date(e)},e.copy=function(e){return new Date(e)},e.now=()=>new Date,e.add=function(e,t){return new Date(e.getTime()+t.getTime())},e.subtract=function(e,t){return new Date(e.getTime()-t.getTime())},e.toSeconds=function(e){return Math.round(e.getTime()/1e3)},e.toTimestamp=o,e.shortTime=function(e){let t=e.getHours();const n=t>=12?"pm":"am";t=t%12||12;const r="0".concat(t).slice(-2),i=e.getMinutes(),o="0".concat(i).slice(-2);return"".concat(r,":").concat(o," ").concat(n)},e.fullDate=function(e){const t=e.toLocaleString("en-us",{month:"long"});return"".concat(t," ").concat(e.getDate(),", ").concat(e.getFullYear())},(s=e.Timestamp||(e.Timestamp={})).now=()=>o(e.now()),s.add=function(e,t){return e+t},s.subtract=function(e,t){return e-t},s.toSeconds=function(e){return Math.round(e/1e3)},s.toLocal=function(e){return new Date(e)},s.toISODate=function(t){return e.Timestamp.toLocal(t).toISOString()},e.daysAgo=function(t,n){const r=n*c;return e.Timestamp.subtract(e.toTimestamp(t),r)},e.monthsAgo=function(t,n){const r=e.copy(t);return r.setMonth(t.getMonth()-n),e.toTimestamp(r)},e.parseDate=function(i){let o=""+i;const s=o.match(n);if(s){const[,e,t]=s;o="".concat(e,"T").concat(t,"Z")}if(s||o.match(t))return r.ij(new Error("Failed to parse date from: ".concat(i)))(e.create(o));const a=new Date(o);return isNaN(a.getTime())?r.t$(new Error("Failed to parse date from: ".concat(i))):r.ij(new Error("Failed to parse date from: ".concat(i)))(a)},e.Eq={equals:(e,t)=>e.getTime()===t.getTime()}}(u||(u={})),function(e){function t(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()))}(e.Timestamp||(e.Timestamp={})).now=()=>e.toTimestamp(e.now()),e.toTimestamp=function(e){return e.getTime()},e.now=function(){return t(u.now())},e.fromLocal=t}(l||(l={}))},32103:(e,t,n)=>{function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{sH:()=>i,ej:()=>o,hu:()=>c,vE:()=>l,L0:()=>d,kG:()=>u});const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"(nomessage)";Error.call(this,e),"captureStackTrace"in Error?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name};i.prototype=Object.create(Error.prototype);class o extends i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"empty";super("Invariant condition failed: "+(e||"(unnamed)")),r(this,"input",void 0),this.input=t}toString(){return"".concat(this.message," on input[").concat(this.input,"]")}}class s extends i{constructor(e){super("Matching not exhaustive".concat(e?": unexpected value ".concat(JSON.stringify(e)):""))}}class a extends i{constructor(e,t,n){super("AssertionError: ".concat(n)),r(this,"expected",void 0),r(this,"actual",void 0),r(this,"name","AssertionError"),this.expected=e,this.actual=t}toString(){return"".concat(this.message,"\nExpected: ").concat(this.expected,"\nActual: ").concat(this.actual)}}function c(e,t,n){if(e!==t)throw new a(e,t,n)}function u(e,t,n){if(!e){var r;const e=new o("string"==typeof t?t:t&&t(),void 0!==n&&"string"!=typeof n?n():n);throw e.stack=null===(r=e.stack)||void 0===r?void 0:r.split("\n").filter((e=>-1===e.indexOf("errors."))).join("\n"),e}}function l(e,t){throw new s(null!=t?t:e)}function d(e){return e}},67880:(e,t,n)=>{n.d(t,{Fx:()=>d,H6:()=>f,Ov:()=>u,Qr:()=>a,Vx:()=>l,Xy:()=>s,ei:()=>h,qo:()=>c,s$:()=>_,sq:()=>m,v4:()=>i,vZ:()=>p});var r=n(58303);const i=function e(t){if("object"!=typeof t)return t;let n,r;const i=Object.prototype.toString.call(t);if("[object Object]"===i){if(t.constructor!==Object&&"function"==typeof t.constructor)for(n in r=new t.constructor,t)t.hasOwnProperty(n)&&r[n]!==t[n]&&(r[n]=e(t[n]));else for(n in r={},t)"__proto__"===n?Object.defineProperty(r,n,{value:e(t[n]),configurable:!0,enumerable:!0,writable:!0}):r[n]=e(t[n]);return r}if("[object Array]"===i){for(n=t.length,r=Array(n);n--;)r[n]=e(t[n]);return r}if("[object Date]"===i)return new Date(+t);if("[object RegExp]"===i)return r=new RegExp(t.source,t.flags),r.lastIndex=t.lastIndex,r;return t};const o=Object.prototype.hasOwnProperty;function s(e,t){let n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&s(e[r],t[r]););return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(o.call(e,n)&&++r&&!o.call(t,n))return!1;if(!(n in t)||!s(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}function a(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function c(e){return Object.keys(e).map((t=>e[t]))}const u=e=>t=>n=>function(e,t,n){const{[e]:i,...o}=n;return{[e]:t((0,r.ij)(i)),...o}}(e,t,n);function l(e,t){return Object.assign({},e,t)}function d(e,t){const n={};for(const r in e){const i=t[r];void 0!==i?n[r]="object"==typeof i?d(e[r],i):i:n[r]=e[r]}return n}function h(e){return t=>t[e]}function f(...e){return t=>e.reduce(((e,n)=>({...e,[n]:t[n]})),{})}function p(e,t){if(e===t)return!0;if(e!=e&&t!=t)return!0;if(g(e)||g(t))return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){if(!(n in t))return!1;if(!p(e[n],t[n]))return!1}return!0}function g(e){return e!==Object(e)}function m(e){return Array.from(e).reduce(((e,[t,n])=>({...e,[t]:n})),{})}function _(e){return null!==e&&"object"==typeof e}},5972:(e,t,n)=>{n.d(t,{CR:()=>c,FC:()=>d,Jh:()=>s,KL:()=>h,XA:()=>a,ZT:()=>i,ev:()=>u,mG:()=>o,qq:()=>l});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}Object.create;function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function l(e){return this instanceof l?(this.v=e,this):new l(e)}function d(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=i[e](t)).value instanceof l?Promise.resolve(n.value.v).then(c,u):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function h(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>4659===e?"designSystem.js":9513===e?"AAA-initAssistant.common.chunk.js":4100===e?"proofit.common.chunk.js":4382===e?"cheetah.common.chunk.js":7717===e?"snippets.common.chunk.js":7725===e?"toneAI.common.chunk.js":4143===e?"4143.common.chunk.js":3367===e?"3367.common.chunk.js":8689===e?"8689.common.chunk.js":9835===e?"9835.common.chunk.js":7702===e?"7702.common.chunk.js":7393===e?"7393.common.chunk.js":2367===e?"2367.common.chunk.js":1196===e?"1196.common.chunk.js":5194===e?"5194.common.chunk.js":9436===e?"9436.common.chunk.js":8131===e?"8131.common.chunk.js":2728===e?"2728.common.chunk.js":308===e?"Agents-ContentScriptIntegration.common.chunk.js":9153===e?"Agents-DocumentGroupIntegration.common.chunk.js":128===e?"Agents-PageGroupIntegration.common.chunk.js":4943===e?"Agents-MessageBusClient.common.chunk.js":8721===e?"assistant.common.chunk.js":7543===e?"chromeStoreToolbarPopup.common.chunk.js":6111===e?"6111.common.chunk.js":2826===e?"brandTonesActivationUphook.common.chunk.js":e+".vendors.chunk.js",__webpack_require__.miniCssF=e=>"../css/"+{2826:"brandTonesActivationUphook",4100:"proofit",4382:"cheetah",4659:"designSystem",5526:"Grammarly-check",7717:"snippets",8721:"assistant",9513:"AAA-initAssistant"}[e]+".styles.css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var c=s[a];if(c.getAttribute("src")==e){i=c;break}}if(!i){o=!0;var u=e,l=(r=n.replace("chunk-",""),function(t){var n={type:t,target:{src:u}},r=inProgress[e];delete inProgress[e],r&&r.forEach((e=>e(n)))});return inProgress[e]=[t],import(u).then((()=>l("load"))).catch((()=>{var t;t={type:"CODE_SPLITTING_INJECT",file:e},chrome.runtime.sendMessage(t);var n=0,i=setInterval((()=>{var e=window.webpackChunk,t=Array.isArray(e)&&e.some((e=>Array.isArray(e)&&Array.isArray(e[0])&&e[0].includes(r)));t||n>12e4?(clearInterval(i),l(t?"load":"missing")):n+=100}),100)}))}inProgress[e]=[t];var d=(t,n)=>{i.onerror=i.onload=null,clearTimeout(h);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.j=5526,__webpack_require__.p="/src/js/",__webpack_require__.p=(path=__webpack_require__.p,__webpack_require__.p&&__webpack_require__.p.includes("://")?path:chrome.runtime.getURL(path)),loadStylesheet=e=>new Promise(((t,n)=>{var r=__webpack_require__.miniCssF(e),i=__webpack_require__.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(s=n[r]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===e||i===t))return s}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var s;if((i=(s=o[r]).getAttribute("data-href"))===e||i===t)return s}})(r,i))return t();((e,t,n,r)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=o=>{if(i.onerror=i.onload=null,"load"===o.type)n();else{var s=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,i.parentNode.removeChild(i),r(c)}},i.href=t,(e=>{e.dispatchEvent(new Event("load"))})(i)})(e,i,t,n)})),installedCssChunks={5526:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{2826:1,4100:1,4382:1,4659:1,7717:1,8721:1,9513:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{var e={5526:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else if(4659!=t){var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}else e[t]=0};var t=(t,n)=>{var r,i,[o,s,a]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);if(a)a(__webpack_require__)}for(t&&t(n);c<o.length;c++)i=o[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{var e,t=__webpack_require__(59179),n=__webpack_require__(24666),r=__webpack_require__(8794),i=__webpack_require__(20161),o=__webpack_require__(954),s=__webpack_require__(84308),a=__webpack_require__(84714),c=__webpack_require__(27395),u=__webpack_require__(16381),l=__webpack_require__(40594);class d{static markAsLoaded(){const e=this.getCurrentVersion();document.body.dataset[this.LOADED_ATTRIBUTE]=e}static markAsUnloaded(){delete document.body.dataset[this.LOADED_ATTRIBUTE]}static getLoadedVersion(){return document.body.dataset[this.LOADED_ATTRIBUTE]}static getCurrentVersion(){const e="true";try{const t=chrome.runtime.getManifest();return(null==t?void 0:t.version)?t.version:e}catch(t){return e}}static isOrphanedContentScript(){var e;return!!(null===chrome||void 0===chrome?void 0:chrome.runtime)&&!(null===(e=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===e?void 0:e.id)}static isLoaded(){return!!this.getLoadedVersion()}}d.LOADED_ATTRIBUTE="grAaaLoaded";const h="grammarly-assistant-dispose",f="grammarly-assistant-dispose-complete";class p{}e=p,p.sendDisposeSignalToOrphanedScripts=()=>{self.dispatchEvent(new Event("grammarly-assistant-dispose"))},p.addDisposeOrphanListener=e=>{const t=h,n=()=>{d.isOrphanedContentScript()&&(e(),self.dispatchEvent(new Event(f)))};return self.addEventListener(t,n),{dispose:()=>{self.removeEventListener(t,n)}}},p.disposeOrphanedScripts=async()=>{let t;const n=new Promise((e=>{t=()=>{e()},self.addEventListener(f,t)}));e.sendDisposeSignalToOrphanedScripts();const r=new Promise((e=>{setTimeout(e,1e3)}));await Promise.race([n,r]),t&&self.removeEventListener(f,t)};class g{constructor({experimentClient:e,logger:t=l.Y.create("AlwaysAvailableAssistantLoader")}){this._disposables=[],this._logger=t,this._experimentClient=e}_shouldLoad(){const e=d.getLoadedVersion(),t=d.getCurrentVersion();return _(this._experimentClient)||(0,u.hF)()?!e||b(this._experimentClient,t,e):(this._logger.debug("Detected not running in the topmost frame"),!1)}async _load(){if(!this._shouldLoad())return;const e=d.getCurrentVersion(),t=d.getLoadedVersion();this._logger.debug(`Loading assistant for ${document.location.origin}: ${e}`),d.markAsLoaded(),b(this._experimentClient,e,t)&&await p.disposeOrphanedScripts(),Promise.all([__webpack_require__.e(9784),__webpack_require__.e(1088),__webpack_require__.e(328),__webpack_require__.e(5295),__webpack_require__.e(3885),__webpack_require__.e(9278),__webpack_require__.e(2168),__webpack_require__.e(3349),__webpack_require__.e(309),__webpack_require__.e(4659),__webpack_require__.e(8072),__webpack_require__.e(9116),__webpack_require__.e(9513)]).then(__webpack_require__.bind(__webpack_require__,68488)).then((({initAssistant:e})=>{if(this._disposables.push(e()),m(this._experimentClient)){const e=p.addDisposeOrphanListener((()=>{this.dispose()}));this._disposables.push(e)}this._logger.debug("Assistant loaded")}))}update(e){v(this._experimentClient)||(e?this._load():this.dispose())}dispose(){this._logger.debug("Disposing"),this._disposables.forEach((e=>null==e?void 0:e.dispose())),this._disposables=[],v(this._experimentClient)||d.markAsUnloaded()}}const m=e=>e.isGateEnabled(c.D.ReinitializeAssistantOnExtensionUpdate),_=e=>e.isGateEnabled(c.D.SupportAAAInIframeHost),b=(e,t,n)=>n&&n!==t&&"true"!==n&&m(e),v=e=>m(e)&&d.isOrphanedContentScript();var y=__webpack_require__(49652),w=__webpack_require__(39575),x=__webpack_require__(20851),E=__webpack_require__(18838);class k{addTypingTarget(e){}dispose(e){}}var C=__webpack_require__(13391),T=__webpack_require__(32073),S=__webpack_require__(25693);var R,I=__webpack_require__(27250);!function(e){function t(e,t){try{for(const n of Object.keys(t))if(t[n]&&t[n](e))return n;return null}catch(e){return null}}e.ckeditor4Selector="cke_editable",e.isSpecific={draftJs:e=>!(!e.hasAttribute("contenteditable")||!e.querySelector('[data-contents="true"] > [data-editor], [data-block]')),quill:e=>e.classList.contains("ql-editor")||e.classList.contains("ql-container"),redactor:e=>e.className.indexOf("redactor")>-1,prosemirror:e=>e.hasAttribute("pm-container")||e.classList.contains("ProseMirror"),scribe:e=>e.className.indexOf("scribe")>-1,trix:e=>e.className.indexOf("trix")>-1,"medium-editor":e=>e.className.indexOf("medium-editor")>-1,tinymce:e=>{if("IFRAME"!==e.tagName)return!1;const t=e;return t.id.indexOf("mce")>-1||!!(t.contentDocument&&t.contentDocument.querySelectorAll("#tinymce, .mce-content-body").length>0)},ckeditor4:t=>t.matches("iframe.cke_wysiwyg_frame")||t.classList.contains(e.ckeditor4Selector),ckeditor5:e=>e.classList.contains("ck-editor__editable"),slate:e=>"true"===e.getAttribute("data-slate-editor"),mobiledoc:e=>e.classList.contains("__mobiledoc-editor")},e.isGeneric={contenteditable:e=>{const t=e.attributes.getNamedItem("contenteditable");return!(!function(e){return!(e instanceof HTMLSelectElement)}(e)||!t||"true"!==t.value&&""!==t.value&&"plaintext-only"!==t.value)},textarea:e=>"TEXTAREA"===e.tagName,iframe:t=>{if("IFRAME"===t.tagName){const n=t;return!!(n.contentDocument&&n.contentDocument.body&&e.isGeneric.contenteditable(n.contentDocument.body))}return!1},iframeHost:t=>{if("IFRAME"===t.tagName){const n=t;return!(n.contentDocument&&n.contentDocument.body&&e.isGeneric.contenteditable(n.contentDocument.body))}return!1}},e.get=function(n){return{generic:t(n,e.isGeneric),specific:t(n,e.isSpecific)}}}(R||(R={}));var A=__webpack_require__(20905);const O=A.E0,F=2*O,P=A.Z7,N=new Set(["INPUT","BODY"]),L=new Set(["integrated","integrated_via_connector"]),D="unknown",U=A.E0;var M,G=__webpack_require__(32734),j=__webpack_require__(90572),q=__webpack_require__(64271),B=__webpack_require__(44071),H=__webpack_require__(81933),z=__webpack_require__(78129),W=__webpack_require__(97092),V=__webpack_require__(10883);function $(e){const r=e.pipe((s="keypress",a={capture:!0},e=>e.pipe(i.w((e=>q.T(...e.map((e=>B.R(e,s,a)))))))),G.B());var s,a;const c=r.pipe(function(e,n,r){return s=>s.pipe(i.w((i=>H.timer(e).pipe(t.U((()=>r(i))),o.O(n(i))))))}(O,(()=>({event:M.startTyping,timestamp:Date.now()})),(()=>({event:M.endTyping,timestamp:Date.now()-O}))),(u=(e,t)=>e.event===t.event,l=(e,t)=>e.event===M.startTyping&&t.event===M.endTyping,e=>e.pipe(n.x(u),z.G(),j.h((([e,t])=>l(e,t))))),G.B());var u,l,d;return r.pipe(t.U((e=>[e.target instanceof HTMLElement?e.target:document.activeElement,e.key,Date.now()])),(d=c,e=>e.pipe(W.f(d),V.M(d))),t.U((([e,[t,n]])=>{const r=n.timestamp-t.timestamp,i=e.length,o=e.reduce(((e,[t,n,r])=>{if(t instanceof HTMLElement){const i=e.get(t);e.set(t,{text:i?i.text+n:n,lastTypingTimestamp:r})}return e}),new Map);return Array.from(o.entries()).map((([e,t])=>({target:e,text:t.text,textLength:t.text.length,lastTypingTimestamp:t.lastTypingTimestamp,duration:Math.round(r*t.text.length/i)}))).filter((e=>e.duration>0))})),j.h((e=>e.length>0)))}!function(e){e.startTyping="startTyping",e.endTyping="endTyping"}(M||(M={}));const K=()=>({ORGANIZATION_CONTROLS:{title:"Browser extension unavailable",message:"Your organization has turned off the Grammarly browser extension."},SERVER_UNAVAILABLE:{title:"Grammarly is temporarily unavailable",message:`There is an issue connecting to your organizations security settings. Please try again later\n                or <a href="${(0,u.Um)().support}">contact support</a> if the issue persists.`}});var X=__webpack_require__(16415),Z=__webpack_require__(79477);const J="data-enable-grammarly",Y=["data-gramm_editor","data-gramm","data-gramm_id","gramm_editor"],Q=[...Y,"readonly","disabled"],ee=["pm-container",{name:"class",value:"ProseMirror"},"data-synchrony",{name:"data-gramm",value:"false"},{name:J,value:"false"},{name:"aria-label",value:"Search Facebook"}],te=["changed-user","changed-plan","changed-dialect","cleanup","editor-fix","llama-action","close-current-tab","enable-superhuman-go"];var ne=__webpack_require__(4026),re=__webpack_require__(44675),ie=__webpack_require__(79707);var oe,se,ae;function ce(e,t){var n,r,i;return"integrated"===(null==t?void 0:t.key)?t.integratedState.getPlainText():null!==(i=[e.text,null!==(r=null===(n=e.target)||void 0===n?void 0:n.textContent)&&void 0!==r?r:"",e.target instanceof HTMLTextAreaElement?e.target.value:""].reduce(((e,t)=>!(0,ie.HD)(e)||e.length<t.length?t:e),void 0))&&void 0!==i?i:""}function ue(e,t,n,r,i,o,s){var a,c,u,l;const d=function(e,t,n,r){var i,o,s,a,c,u,l;if(!(null===(i=e.connection)||void 0===i?void 0:i.online))return"disabled_due_to_network_connection";const d=K();return t.isEnterpriseConfig&&(null===(o=t.unsupportedMessage)||void 0===o?void 0:o.message)===d.ORGANIZATION_CONTROLS.message?"disabled_by_enterprise":t.enabled||t.servicePage?null===(c=null===(a=null===(s=e.extensionSettings)||void 0===s?void 0:s[n])||void 0===a?void 0:a.enabled)||void 0===c||c?(null===(u=e.connectorSettings)||void 0===u?void 0:u.isConnected)?"integrated_via_connector":e.dynamicConfig&&e.extensionSettings&&X.q.showDisabledByDesktopExtensionGButton((0,Z.n)(e.extensionSettings,n),null!==(l=e.dapi)&&void 0!==l?l:{},e.dynamicConfig,r)?"disabled_due_to_desktop_integration":"integrated":"disabled_by_user":"disabled_by_grammarly"}(e,t,n,r);if(!L.has(d))return d;const h=(0,ie.HD)(null===(a=null==i?void 0:i.unsupportedState)||void 0===a?void 0:a.reason)&&(null===(c=null==i?void 0:i.unsupportedState)||void 0===c?void 0:c.reason)!==se.unknown?"unsupported_with_reason":"unsupported";if("integrated"===(null==i?void 0:i.key)){const e=(null!==(u=i.integratedState.lastChangeEventTimestamp)&&void 0!==u?u:0)>s-F,t=(null!==(l=i.integratedState.lastCheckingStatusTimestamp)&&void 0!==l?l:0)>s-P;return e?i.integratedState.type===oe.connector?"integrated_via_connector":i.integratedState.type===oe.ghost?"integrated_via_ghost":t?"integrated":i.integratedState.isCheckingTextForeign?"disabled_due_to_non_english_lang":"disabled_due_to_capi_connection":h}var f;return(f=o)instanceof HTMLElement&&Y.some((e=>{const t=f.hasAttribute(e)?f:f.closest(`[${e}]`);if(!(t instanceof HTMLElement))return!1;const n=R.get(t);return n.generic||n.specific}))?"disabled_by_site":h}!function(e){e.default="default",e.connector="connector",e.ghost="ghost"}(oe||(oe={})),function(e){e.skipped="skipped",e.unknown="unknown"}(se||(se={}));class le{constructor(e,t=l.Y.create("TypingTrackerImpl")){this._params=e,this._log=t,this._subs=new T.w0,this._typingTargetList=C.h.create([document]),this._isIframe=(0,u.n_)(),this._lastPrimaryLanguage=D,this._subs.add($(this._typingTargetList).subscribe((e=>{e.forEach((e=>{this._handleTyping(e)}))})))}async _handleTyping(e){var t,n,r;const i=R.get(e.target),o=null===(t=this._params.csSharedStore.get("fieldIntegrationStore"))||void 0===t?void 0:t.getTargetFieldTypingState(e),s=ue(this._params.storeContent.get(),this._params.pageConfig,this._params.domain,this._params.url,o,e.target,e.lastTypingTimestamp),a=function(e,t){return"integrated"!==e&&(!(t instanceof HTMLElement)||N.has(t.tagName)&&!(0,ne.Ne)(t))}(s,e.target),c=await async function(e,t,n){var r,i;const o=ce(t,n);if(function(e){const t=e.match(/\b\w+\b/g);return t?t.length:0}(o)<5)return{text:o,primaryLanguage:D};try{const t=await Promise.race([e.detectLanguage(o),(0,re.gw)(U).then((()=>{}))]),[n]=null!==(r=null==t?void 0:t.languages)&&void 0!==r?r:[];return{text:o,languageDetection:t,primaryLanguage:null!==(i=null==n?void 0:n.language)&&void 0!==i?i:D}}catch(e){return{text:o,primaryLanguage:D}}}(this._params.browserApi.i18n,e,o);this._lastPrimaryLanguage=c.primaryLanguage===D?this._lastPrimaryLanguage:c.primaryLanguage;const u={integrationType:s,isIframe:this._isIframe,duration:e.duration,textLength:e.textLength,fieldType:i.specific&&i.generic?`${i.generic}.${i.specific}`:null!==(r=null!==(n=i.generic)&&void 0!==n?n:i.specific)&&void 0!==r?r:"unknown",primaryLanguage:this._lastPrimaryLanguage,..."unsupported"===(null==o?void 0:o.key)&&"unsupported_with_reason"===s?{unsupportedReason:o.unsupportedState.reason}:{},..."integrated"===(null==o?void 0:o.key)&&"integrated"===s?{integrationName:o.integratedState.integrationName}:{},..."integrated"===(null==o?void 0:o.key)?{isCheckingTextForeign:o.integratedState.isCheckingTextForeign}:{}};this._log.debug("typing detected:",{...u,shouldSkipTracking:a,detectionLanguageState:c,keyboardTypingState:e,targetFieldState:o,domain:this._params.domain}),a||this._params.rpc.addTypingDurationMetric(this._params.domain,u)}addTypingTarget(e){this._typingTargetList.modify((t=>t.includes(e)?t:[...t,e]))}dispose(){this._subs.unsubscribe()}static async create(e,t,n,r){const i=(0,I.T)().location.href,{originalDomain:o,domainAlias:s}=function(e,t){var n,r;const i=(0,S.j1)(new URL(e).hostname),o=null===(n=null==t?void 0:t.domainAliasRules)||void 0===n?void 0:n.find((t=>new RegExp(t.pattern).test(e)));return{originalDomain:i,domainAlias:null!==(r=null==o?void 0:o.alias)&&void 0!==r?r:i}}(i,e.view((e=>{var t;return null===(t=e.dynamicConfig)||void 0===t?void 0:t.serviceAvailabilityMetrics})).get()),a=await t.getPageConfig(o,i);return new le({rpc:t,url:i,domain:s,pageConfig:a,storeContent:e,browserApi:n,csSharedStore:r})}}!function(e){e.create=async function(e,t,n,r){return await t.isTypingTrackingEnabled()?le.create(e,t,n,r):new k}}(ae||(ae={}));var de=__webpack_require__(39963);var he,fe=__webpack_require__(77590),pe=__webpack_require__(90189),ge=__webpack_require__(51560);!function(e){const t=(0,ge.m)("desktop-integration");e.inject=function(e=document.documentElement,n={}){var r,i;const o=`\n      div.${t} {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        padding: 0;\n        margin: -1px;\n        overflow: hidden;\n        clip: rect(0, 0, 0, 0);\n        white-space: nowrap;\n        border: 0;\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        -ms-user-select:none;\n        user-select:none;\n      }\n\n      div.${t}:before {\n        content: attr(data-content);\n      }\n    `,s=document.createElement("style");s.textContent=o;const a=document.createElement("div");a.setAttribute("aria-label",(0,ge.m)("integration")),a.setAttribute("role","group"),a.setAttribute("tabindex","-1"),a.setAttribute("class",t);const c=document.createElement(t);return n.setPresentationRoleOnHost&&c.setAttribute("role","presentation"),c.attachShadow({mode:"open"}),c.setAttribute((0,ge.V)("shadow-root"),"true"),null===(r=c.shadowRoot)||void 0===r||r.appendChild(s),null===(i=c.shadowRoot)||void 0===i||i.appendChild(a),e.appendChild(c),{activate:({isActive:e,isUserDisabled:t,mode:n})=>{null==a||a.setAttribute("data-content",JSON.stringify(n?{mode:n,isActive:e,isUserDisabled:t}:{isActive:e}))},remove:()=>{var e;null===(e=null==c?void 0:c.parentNode)||void 0===e||e.removeChild(c)}}},e.isInjected=function(){return!!document.querySelector(t)}}(he||(he={}));var me,_e=__webpack_require__(18122);!function(e){e.full="full",e.limited="limited"}(me||(me={}));class be{constructor(e,t=l.Y.create("DesktopHiddenFieldIntegration"),n=de.Tb){this._domain=e,this._log=t,this._getFelog=n,this._integration=null,this._root=document.documentElement,this._state=C.h.create(null),this.getActiveElement=()=>{const e=document.activeElement,t=null==e?void 0:e.shadowRoot,n=null==e?void 0:e.contentDocument;return t&&t.activeElement?t.activeElement:n&&n.activeElement?n.activeElement:e},this.updateState=(e,t,n,r)=>{var i;const o=!X.q.isIntegrationEnabled(r,e,t),s=X.q.isEnabled(t,r)?me.limited:me.full,a=!n;this._state.set({isActive:o,mode:s,isUserDisabled:a}),a?this.dispose():null===(i=this.integration)||void 0===i||i.activate({isActive:o,mode:s,isUserDisabled:a})},this.updateForFocusedIntegration=()=>{const e=this.getActiveElement(),t=null==e?void 0:e.closest("[role=dialog][aria-modal=true]"),n=null!=t?t:document.documentElement;return n!==this._root&&(this._root=n,this.dispose()),this.integration},this.dispose=()=>{this._integration&&(this._integration.remove(),this._integration=null)},this._state.pipe((0,j.h)(Boolean)).subscribe((e=>{this._log.debug("update DesktopHiddenField state",e)}))}get integration(){if(this._integration)return this._integration;if(he.isInjected())return this._log.debug("DesktopHiddenField is already injected"),null;try{this._integration=he.inject(this._root,{setPresentationRoleOnHost:_e.LF.test(this._domain)})}catch(e){return this._log.debug("DesktopHiddenField is not injected",e),this._getFelog().hiddenFieldInjectionFailed(),null}return this._log.debug("DesktopHiddenField is injected into "+(this._root===document.documentElement?"root":"dialog")),this._integration}}function ve(e,t){try{e.sendBackground("theme:detected",{theme:t})}catch(e){}}function ye(e){if("undefined"==typeof self||!self.matchMedia)return;const t="undefined"!=typeof self&&self.matchMedia&&self.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";ve(e,t);const n=self.matchMedia("(prefers-color-scheme: dark)"),r=t=>{const n=t.matches?"dark":"light";ve(e,n)};try{return n.addEventListener("change",r),{dispose:()=>{try{n.removeEventListener("change",r)}catch(e){}}}}catch(e){}}var we=__webpack_require__(15380),xe=__webpack_require__(8867),Ee=__webpack_require__(50750),ke=__webpack_require__(29416),Ce=__webpack_require__(33851),Te=__webpack_require__(19724),Se=__webpack_require__(86130),Re=__webpack_require__(78767),Ie=__webpack_require__(13848);var Ae=__webpack_require__(91957),Oe=__webpack_require__(78300);var Fe,Pe=__webpack_require__(90023),Ne=__webpack_require__(69996),Le=__webpack_require__(84766),De=__webpack_require__(36344),Ue=__webpack_require__(79256),Me=__webpack_require__(20680),Ge=__webpack_require__(28767),je=__webpack_require__(17869),qe=__webpack_require__(37108),Be=__webpack_require__(44045),He=__webpack_require__(8065),ze=__webpack_require__(84178);!function(e){const r=l.Y.create("universal.cs.integration.observables"),i=e=>(0,B.R)(e,"focus",{capture:!0});function s(e){return e instanceof Element&&e.shadowRoot&&e.shadowRoot.activeElement?s(e.shadowRoot.activeElement):e}function c(e,t){return{document:e,frame:t}}function u(e,n){const i=c(e),s=(0,Ee.D)(e.getElementsByTagName("iframe")),u=n.pipe((0,He.b)((e=>Array.from(e.addedNodes))),(0,j.h)((e=>"IFRAME"===e.nodeName))),l=(0,Me.z)(s,u).pipe((0,j.h)((t=>function(e,t){try{const n=e.src;if(n&&"about:blank"!==n&&!n.startsWith("javascript")){return new URL(n,t.baseURI).origin===t.location.origin}return!0}catch(e){return r.warn("Error converting iframe's src to url",e),!0}}(t,e))),(0,je.z)((e=>{try{return function(e){const t=e.contentDocument;return t&&"complete"===t.readyState}(e)?(0,a.of)(e):(0,Ge.R)((t=>e.addEventListener("load",t,!0)),(t=>e.removeEventListener("load",t))).pipe((0,t.U)((()=>e)),(0,ze.q)(1))}catch(e){return r.warn("failed to receive iframes document",e),(0,a.of)(null)}})),(0,t.U)((e=>{try{if(null!==e&&null!==e.contentDocument)return c(e.contentDocument,e)}catch(e){r.warn("failed to receive iframes document",e)}return null})),(0,j.h)((e=>null!==e)));return l.pipe((0,o.O)(i))}e.createFocusObservable=function(e,r,o=i){return u(e,r).pipe((0,je.z)((e=>function(e,r,i){var o,c;const u=e.document,l=(0,Le.F)(A.E0),d=e.frame?De.E:(0,Ue.P)((()=>(0,a.of)(u.activeElement).pipe((0,j.h)((e=>e&&u.defaultView&&u.defaultView.HTMLElement&&e instanceof u.defaultView.HTMLElement))))),h=r(u).pipe((0,t.U)((e=>e.target))),f=e.frame?De.E:(0,q.T)(l,i).pipe((0,j.h)((e=>!!u.defaultView&&"visible"===u.visibilityState&&!!u.activeElement)),(0,t.U)((e=>u.activeElement)),(0,n.x)()),p=(0,q.T)(f,h).pipe((0,j.h)((e=>u.defaultView&&u.defaultView.HTMLElement&&e instanceof u.defaultView.HTMLElement)),(0,t.U)((e=>s(e))));if(null===(o=e.frame)||void 0===o?void 0:o.contentWindow)return(0,Me.z)(d,p).pipe((0,n.x)(),(0,Be.R)((0,q.T)((0,B.R)(null===(c=e.frame)||void 0===c?void 0:c.contentWindow,"unload"))));return(0,Me.z)(d,p).pipe((0,n.x)())}(e,o,r).pipe((0,t.U)((t=>({element:t,owner:e})))))),(0,n.x)(),(0,qe.Q)(Ne.E))},e.createReadonlyObservable=function(e,r,i){return u(e,r).pipe((0,je.z)((e=>function(e,r,i){const o=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n]));return r.pipe((0,t.U)((()=>(0,Pe.zG)(i,e.querySelectorAll.bind(e),Array.from))),(0,n.x)(o),(0,t.U)((e=>(0,Pe.zG)(e,Array.from,Ee.D))),(0,je.z)((e=>e)),(0,j.h)(Re.Nf))}(e.document,r,i).pipe((0,t.U)((t=>({element:t,owner:e})))))),(0,n.x)(),(0,qe.Q)(Ne.E))},e.docInfo=c}(Fe||(Fe={}));var We=__webpack_require__(45523);var Ve,$e=-1,Ke=function(e){addEventListener("pageshow",(function(t){t.persisted&&($e=t.timeStamp,e(t))}),!0)},Xe=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Ze=function(){var e=Xe();return e&&e.activationStart||0},Je=function(e,t){var n=Xe(),r="navigate";return $e>=0?r="back-forward-cache":n&&(document.prerendering||Ze()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Ye=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Qe=function(e,t,n,r){var i,o;return function(s){t.value>=0&&(s||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},et=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},tt=function(e){var t=!1;return function(){t||(e(),t=!0)}},nt=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},rt=0,it=1/0,ot=0,st=function(e){e.forEach((function(e){e.interactionId&&(it=Math.min(it,e.interactionId),ot=Math.max(ot,e.interactionId),rt=ot?(ot-it)/7+1:0)}))},at=function(){return Ve?rt:performance.interactionCount||0},ct=function(){"interactionCount"in performance||Ve||(Ve=Ye("event",st,{type:"event",buffered:!0,durationThreshold:0}))},ut=[],lt=new Map,dt=0,ht=[],ft=function(e){if(ht.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=ut[ut.length-1],n=lt.get(e.interactionId);if(n||ut.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};lt.set(r.id,r),ut.push(r)}ut.sort((function(e,t){return t.latency-e.latency})),ut.length>10&&ut.splice(10).forEach((function(e){return lt.delete(e.id)}))}}},pt=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=tt(e),"hidden"===document.visibilityState?e():(n=t(e),et(e)),n},gt=[200,500],mt=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},nt((function(){var n;ct();var r,i=Je("INP"),o=function(e){pt((function(){e.forEach(ft);var t=function(){var e=Math.min(ut.length-1,Math.floor((at()-dt)/50));return ut[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},s=Ye("event",o,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=Qe(e,i,gt,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),et((function(){o(s.takeRecords()),r(!0)})),Ke((function(){dt=at(),ut.length=0,lt.clear(),i=Je("INP"),r=Qe(e,i,gt,t.reportAllChanges)})))})))};new Date;const _t={textInputLatencyV1:.1,scrollLatencyV1:.1,resizeLatencyV1:.1,highlightsDisplay:.1,gButtonTextCheck:.1,inlineAlertDisplay:.1,inlineAlertApply:.1,gButtonDisplay:.1,gDocsParserExecutionTimeV1:.01,gDocsCachingExecutionTimeV1:1,interactionToNextPaint:.1,alertProcessing:.1,httpRequestLatency:.1},bt={textInputLatencyV1:{"docs.google.com":.01}},vt=(e,t)=>Math.random()<((e,t)=>{var n,r,i;const o=(0,u.FN)()?void 0:(0,Ae.Cg)(),s=null==t?void 0:t.sessionSamplingForMetrics,a=null==s?void 0:s.find((t=>(null==t?void 0:t.metricName)===e));if(o){const t=(null===(r=null===(n=null==a?void 0:a.byDomain)||void 0===n?void 0:n.find((e=>e.domain===o)))||void 0===r?void 0:r.value)||(null===(i=bt[e])||void 0===i?void 0:i[o]);if(void 0!==t)return t}return(null==a?void 0:a.value)||_t[e]})(e,t);var yt=__webpack_require__(37435),wt=function(e,t){return wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},wt(e,t)};function xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}wt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Et,kt,Ct=function(){return Ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ct.apply(this,arguments)};function Tt(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function St(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function Rt(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}"function"==typeof SuppressedError&&SuppressedError,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.HTTP_EXCEPTION=1]="HTTP_EXCEPTION",e[e.INVALID_STATE=2]="INVALID_STATE",e[e.LOCK_TIMEOUT=3]="LOCK_TIMEOUT",e[e.STORAGE_CACHE_SET_ERROR=4]="STORAGE_CACHE_SET_ERROR",e[e.STORAGE_CACHE_REMOVE_ERROR=5]="STORAGE_CACHE_REMOVE_ERROR"}(kt||(kt={}));var It,At=((Et={})[kt.UNKNOWN]="Unknown error",Et[kt.HTTP_EXCEPTION]="HTTP Exception",Et[kt.INVALID_STATE]="Invalid State",Et[kt.LOCK_TIMEOUT]="Lock Timeout",Et[kt.STORAGE_CACHE_SET_ERROR]="Error storing tokens",Et[kt.STORAGE_CACHE_REMOVE_ERROR]="Error removing tokens",Et),Ot=function(e){function t(n,r){void 0===n&&(n=kt.UNKNOWN),void 0===r&&(r=At[n]);var i=e.call(this,r)||this;return i.code=n,Object.setPrototypeOf(i,t.prototype),i}return xt(t,e),t.codes=kt,t}(Error);!function(e){e.INVALID_AUTHORIZATION_CODE="Invalid authorization code",e.INVALID_CLIENT_TYPE="Invalid client type",e.INVALID_CODE_VERIFIER="Invalid code verifier",e.INVALID_ORIGIN="Invalid origin",e.INVALID_PUBLIC_KEY="Invalid public key",e.INVALID_REDIRECT_URI="Invalid redirect uri",e.INVALID_SCOPE="Invalid scope",e.INVALID_GRANT_TYPE="Invalid grant type",e.INVALID_REFRESH_TOKEN="Invalid refresh token",e.ACCESS_DENIED="Access is denied",e.INVALID_CLIENT="Invalid client",e.REVOKE_ERROR="Revoke error",e.NOT_ENABLED="Oauth not enabled",e.NOT_IMPLEMENTED="Not implemented"}(It||(It={}));var Ft=function(e){function t(n,r,i){void 0===r&&(r="unknown");var o=e.call(this,Ot.codes.HTTP_EXCEPTION,i)||this;return o.serverCode=r,o.response=n,Object.setPrototypeOf(o,t.prototype),o}return xt(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusText",{get:function(){return this.response.statusText},enumerable:!1,configurable:!0}),t}(Ot),Pt="grammarly.lock.getAccessToken";function Nt(e,t){return void 0===t&&(t=3),Tt(this,void 0,void 0,(function(){var n;return St(this,(function(r){switch(r.label){case 0:n=0,r.label=1;case 1:return n<t?[4,e()]:[3,4];case 2:if(r.sent())return[2,!0];r.label=3;case 3:return n++,[3,1];case 4:return[2,!1]}}))}))}function Lt(e){var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",r="";if("undefined"==typeof crypto||void 0===crypto.getRandomValues){t=new Uint8Array(e);for(var i=0;i<e;++i)t[i]=65535*Math.random()|0}else t=crypto.getRandomValues(new Uint8Array(e));return Array.from(t).forEach((function(e){return r+=n[e%n.length]})),r}var Dt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Ut(e,t,n,r,i){for(var o,s,a,c,u,l,d,h,f,p,g,m,_;i>=64;){for(o=t[0],s=t[1],a=t[2],c=t[3],u=t[4],l=t[5],d=t[6],h=t[7],p=0;p<16;p++)g=r+4*p,e[p]=(255&n[g])<<24|(255&n[g+1])<<16|(255&n[g+2])<<8|255&n[g+3];for(p=16;p<64;p++)m=((f=e[p-2])>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,_=((f=e[p-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,e[p]=(m+e[p-7]|0)+(_+e[p-16]|0);for(p=0;p<64;p++)m=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&l^~u&d)|0)+(h+(Dt[p]+e[p]|0)|0)|0,_=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&s^o&a^s&a)|0,h=d,d=l,l=u,u=c+m|0,c=a,a=s,s=o,o=m+_|0;t[0]+=o,t[1]+=s,t[2]+=a,t[3]+=c,t[4]+=u,t[5]+=l,t[6]+=d,t[7]+=h,r+=64,i-=64}return r}var Mt,Gt=function(){function e(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return e.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},e.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(Ut(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=Ut(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this},e.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,n=this.bufferLength,r=t/536870912|0,i=t<<3,o=t%64<56?64:128;this.buffer[n]=128;for(var s=n+1;s<o-8;s++)this.buffer[s]=0;this.buffer[o-8]=r>>>24&255,this.buffer[o-7]=r>>>16&255,this.buffer[o-6]=r>>>8&255,this.buffer[o-5]=r>>>0&255,this.buffer[o-4]=i>>>24&255,this.buffer[o-3]=i>>>16&255,this.buffer[o-2]=i>>>8&255,this.buffer[o-1]=i>>>0&255,Ut(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(s=0;s<8;s++)e[4*s+0]=this.state[s]>>>24&255,e[4*s+1]=this.state[s]>>>16&255,e[4*s+2]=this.state[s]>>>8&255,e[4*s+3]=this.state[s]>>>0&255;return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},e.prototype._restoreState=function(e,t){for(var n=0;n<this.state.length;n++)this.state[n]=e[n];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},e}();function jt(e){var t=(new Gt).update(e),n=t.digest();return t.clean(),n}function qt(e){return function(e){try{return btoa(e)}catch(t){return Buffer.from(e,"binary").toString("base64")}}(function(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}(e)).replace(/[=]+$/,"").replace(/[+]/g,"-").replace(/[/]/g,"_")}function Bt(e){return Tt(this,void 0,void 0,(function(){var t;return St(this,(function(n){switch(n.label){case 0:return t=function(e){try{return(new TextEncoder).encode(e)}catch(t){return new Uint8Array(Buffer.from(e,"utf8"))}}(e),"undefined"==typeof crypto||void 0===crypto.subtle?[2,jt(t)]:[4,crypto.subtle.digest("SHA-256",t)];case 1:return[2,n.sent()]}}))}))}function Ht(){return Tt(this,void 0,void 0,(function(){var e,t,n,r;return St(this,(function(i){switch(i.label){case 0:return e=Lt(43),n=qt,[4,Bt(e)];case 1:return t=n.apply(void 0,[i.sent()]),r=new Date,[2,{codeVerifier:e,codeChallenge:t,createdAt:r}]}}))}))}function zt(e){return void 0===e&&(e=0),Tt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return t.sent(),[2]}}))}))}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(Mt||(Mt={}));var Wt;function Vt(e){var t=Math.floor(100*Math.pow(2,e));return Math.floor(Math.random()*(t-100+1))+100}function $t(e){return Tt(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,c,u=this;return St(this,(function(l){switch(l.label){case 0:t=Ct({backoffFn:function(e){var t=e.tryNo;return Tt(u,void 0,void 0,(function(){return St(this,(function(e){switch(e.label){case 0:return[4,zt(Math.round(Vt(t)))];case 1:return e.sent(),[2]}}))}))},maxRetries:10},e),n=0,r=!1,i=null,o=null,s=Date.now(),a=function(){r=!0},l.label=1;case 1:if(!(n<=t.maxRetries))return[3,8];l.label=2;case 2:return l.trys.push([2,4,,7]),[4,t.fn({tryNo:n,startedAt:s,abort:a})];case 3:return[2,{result:o=l.sent(),error:null}];case 4:return c=l.sent(),i=c,++n,r?[3,8]:n<=t.maxRetries?[4,t.backoffFn({tryNo:n,startedAt:s,abort:a})]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,7];case 7:return[3,1];case 8:return[2,{error:i,result:o}]}}))}))}function Kt(e){return Tt(this,void 0,void 0,(function(){var t=this;return St(this,(function(n){switch(n.label){case 0:return[4,$t({maxRetries:1,fn:function(n){return Tt(t,void 0,void 0,(function(){var t;return St(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e(n)];case 1:return[2,r.sent()];case 2:throw(t=r.sent())instanceof Ft&&(i=t.status)>=Mt.BAD_REQUEST&&i<Mt.INTERNAL_SERVER_ERROR&&t.status!==Mt.TOO_MANY_REQUESTS&&n.abort(),t;case 3:return[2]}var i}))}))}})];case 1:return[2,n.sent()]}}))}))}!function(e){e.APPLICATION_JSON="application/json"}(Wt||(Wt={}));var Xt=function(){function e(e,t){this._fetch=e,this._config=t}return e.prototype.get=function(e){return Tt(this,void 0,void 0,(function(){var t,n,r,i,o,s=this;return St(this,(function(a){switch(a.label){case 0:return[4,this._getHeaders()];case 1:return t=a.sent(),n=function(){return Tt(s,void 0,void 0,(function(){var n;return St(this,(function(r){switch(r.label){case 0:return[4,this._fetchWithTimeout(e,{credentials:"include",mode:"cors",headers:t})];case 1:return n=r.sent(),[2,this._parseResponse(e,n)]}}))}))},[4,Kt(n)];case 2:if(r=a.sent(),i=r.result,o=r.error,null!=i)return[2,i];if(null!=o)throw o;throw new Error("Unexpected HttpClient error")}}))}))},e.prototype.post=function(e,t){return Tt(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return St(this,(function(c){switch(c.label){case 0:return[4,this._getHeaders()];case 1:return n=c.sent(),r=function(){return Tt(a,void 0,void 0,(function(){var r;return St(this,(function(i){switch(i.label){case 0:return[4,this._fetchWithTimeout(e,{method:"post",credentials:"include",mode:"cors",headers:Ct(Ct({},n),{"Content-Type":Wt.APPLICATION_JSON}),body:JSON.stringify(t)})];case 1:return r=i.sent(),[2,this._parseResponse(e,r)]}}))}))},[4,Kt(r)];case 2:if(i=c.sent(),o=i.result,s=i.error,null!=o)return[2,o];if(null!=s)throw s;throw new Error("Unexpected HttpClient error")}}))}))},e.prototype._fetchWithTimeout=function(e,t){return void 0===t&&(t={}),Tt(this,void 0,void 0,(function(){var n,r=this;return St(this,(function(i){return n=this._fetch(e,t),this._config.timeout?[2,Promise.race([n,new Promise((function(e,t){return setTimeout((function(){return t(new Error("Fetch Timeout"))}),r._config.timeout)}))])]:[2,n]}))}))},e.prototype._getHeaders=function(){return Tt(this,void 0,void 0,(function(){return St(this,(function(e){switch(e.label){case 0:return this._config.applicationHeaders?[2,this._config.applicationHeaders]:this._config.getApplicationHeaders?[4,this._config.getApplicationHeaders()]:[3,2];case 1:return[2,e.sent()];case 2:throw new Error("Cannot get application headers")}}))}))},e.prototype._parseResponse=function(e,t){return Tt(this,void 0,void 0,(function(){var n,r;return St(this,(function(i){switch(i.label){case 0:if(t.status>=Mt.INTERNAL_SERVER_ERROR)throw new Ft(t,"unknown","HTTP server error ".concat(t.status,". Unable to fetch ").concat(e));return[4,t.clone().json().catch((function(e){return{error:"unknown",message:e.message}}))];case 1:if(n=i.sent(),r=n.message||"HTTP error. Unable to fetch ".concat(e),!t.ok)throw new Ft(t,n.error,r);return[4,t.json()];case 2:return[2,i.sent()]}}))}))},e}(),Zt=function(){function e(e,t,n){this._tokensUrl=e,this._httpClient=new Xt(t,n)}return e.prototype.getTokens=function(e){return this._httpClient.post(this._tokensUrl+"/oauth2/token",e)},e.prototype.exchangeTokens=function(e){return this._httpClient.post(this._tokensUrl+"/oauth2/exchange",e)},e}();function Jt(e){var t=e.tokensClient,n=e.clientId,r=e.grantType,i=e.codeVerifier,o=e.authorizationCode,s=e.refreshToken;return Tt(this,void 0,void 0,(function(){var e;return St(this,(function(a){switch(e={client_id:n,grant_type:r},r){case"refresh_token":e=Ct(Ct({},e),{refresh_token:s});break;case"authorization_code":e=Ct(Ct({},e),{code_verifier:i,authorization_code:o});break;case"urn:ietf:params:oauth:grant-type:token-exchange":return e=Ct(Ct({},e),{subject_token_type:"urn:grammarly:params:oauth:token-type:grauth"}),[2,t.exchangeTokens(e)]}return[2,t.getTokens(e)]}))}))}function Yt(e){if(e&&e.expires_at&&e.access_token&&e.refresh_token){var t=(new Date).getTime();return e.expires_at-t<=0?null:e}return null}function Qt(e){return{expires_at:(new Date).getTime()+1e3*e.expires_in,access_token:e.access_token,refresh_token:e.refresh_token,refresh_token_expires_at:(new Date).getTime()+1e3*e.refresh_token_expires_in}}function en(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function tn(e){return void 0===e&&(e=0),Tt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return t.sent(),[2]}}))}))}var nn=en();function rn(e){return"".concat(nn,":").concat(e,":").concat(Math.floor(1e6*(1+Math.random())))}function on(){return Math.floor(1+9*Math.random())}function sn(e,t,n,r,i){return Tt(this,void 0,void 0,(function(){function o(t){return Tt(this,void 0,void 0,(function(){var n,i;return St(this,(function(o){switch(o.label){case 0:return[4,e.getItem(t)];case 1:return null==(n=o.sent())?[2,!1]:n===l?[2,!0]:(i=parseInt(String(n.split(":")[1]),10),[2,!Number.isFinite(i)||i+r<Date.now()])}}))}))}function s(){return Tt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return[4,o(c)];case 1:return t.sent()?[4,e.removeItem(c)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[4,o(u)];case 4:return t.sent()?[4,e.removeItem(u)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}}))}))}var a,c,u,l,d;return St(this,(function(r){switch(r.label){case 0:a=Date.now(),c="".concat(t,"__$$MUTEX_x"),u="".concat(t,"__$$MUTEX_y"),l=rn(a),r.label=1;case 1:return[4,s()];case 2:if(r.sent(),Date.now()-a>n)throw new Ot(Ot.codes.LOCK_TIMEOUT,'"Mutex on '.concat(t," was not achieved in ").concat(n,"ms"));return[4,e.getItem(c)];case 3:return null==r.sent()?[3,5]:[4,tn(on())];case 4:return r.sent(),[3,1];case 5:return[4,e.setItem(c,l)];case 6:return r.sent(),[4,e.getItem(u)];case 7:return null==r.sent()?[3,9]:[4,tn(on())];case 8:return r.sent(),[3,1];case 9:return[4,e.setItem(u,l)];case 10:return r.sent(),[4,tn(on())];case 11:return r.sent(),[4,e.getItem(c)];case 12:return r.sent()===l?[3,17]:[4,tn(on())];case 13:return r.sent(),[4,e.getItem(u)];case 14:return r.sent()===l?[3,16]:[4,tn(on())];case 15:r.sent(),r.label=16;case 16:return[3,1];case 17:return r.trys.push([17,,21,24]),d=rn(Date.now()),[4,e.setItem(c,d)];case 18:return r.sent(),[4,e.setItem(u,d)];case 19:return r.sent(),[4,i()];case 20:return r.sent(),[3,24];case 21:return[4,e.removeItem(c)];case 22:return r.sent(),[4,e.removeItem(u)];case 23:return r.sent(),[7];case 24:return[3,25];case 25:return[2]}}))}))}var an,cn,un=function(){function e(e){this.locks=new Map,this.storage=e}return e.prototype.acquireLock=function(e){return Tt(this,void 0,void 0,(function(){var t=this;return St(this,(function(n){return[2,new Promise((function(n){return Tt(t,void 0,void 0,(function(){var t=this;return St(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,sn(this.storage,e,6e4,5e3,(function(){return Tt(t,void 0,void 0,(function(){var t=this;return St(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r){t.locks.set(e,r),n(!0)}))];case 1:return r.sent(),[2]}}))}))}))];case 1:return r.sent(),[3,3];case 2:return r.sent(),n(!1),[3,3];case 3:return[2]}}))}))}))]}))}))},e.prototype.releaseLock=function(e){return Tt(this,void 0,void 0,(function(){var t;return St(this,(function(n){return null!=(t=this.locks.get(e))&&t(),this.locks.delete(e),[2]}))}))},e}(),ln=function(){function e(e,t){this._storage=e,this._storageKey=t}return e.prototype.set=function(e){return Tt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._storage.setItem(this._storageKey,JSON.stringify(e))];case 1:return t.sent(),[2,e];case 2:throw t.sent(),new Ot(kt.STORAGE_CACHE_SET_ERROR);case 3:return[2]}}))}))},e.prototype.get=function(){return Tt(this,void 0,void 0,(function(){var e;return St(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._storage.getItem(this._storageKey)];case 1:return[2,(e=t.sent())?JSON.parse(e):null];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))},e.prototype.remove=function(){return Tt(this,void 0,void 0,(function(){return St(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storage.removeItem(this._storageKey)];case 1:return e.sent(),[3,3];case 2:throw e.sent(),new Ot(kt.STORAGE_CACHE_REMOVE_ERROR);case 3:return[2]}}))}))},e}(),dn=function(){function e(){this.cache=new Map}return Object.defineProperty(e.prototype,"length",{get:function(){return this.cache.size},enumerable:!1,configurable:!0}),e.prototype.getItem=function(e){return this.cache.has(e)?this.cache.get(e):null},e.prototype.setItem=function(e,t){this.cache.set(e,String(t))},e.prototype.removeItem=function(e){this.cache.delete(e)},e.prototype.key=function(e){return function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],Rt(this.cache.keys()),!1)[e]||null},e.prototype.clear=function(){this.cache=new Map},e}(),hn=function(){function e(e){var t;this._promiseMap=new Map,this._clientId=e.clientId,this._anonymousTokenClientType=e.anonymousTokenClientType,this._redirectUri=e.redirectUri,this._domain=(t=e.domain,/^https?:\/\//.test(t)?t:"https://".concat(t)),this._tokensClient=new Zt(this._domain,e.fetch,e.httpClientOptions),this._storageKey=e.storageKey||"grammarly.".concat(this._clientId,".tokens"),this._storage=e.storage||new dn,this._lock=e.lock||new un(this._storage),this._cache=new ln(this._storage,this._storageKey),this._tracking=e.tracking}return e.prototype._exchangeToken=function(e){var t=this,n=e.orAnonymous;return function(e){return Jt({tokensClient:e.tokensClient,clientId:e.clientId,grantType:"urn:ietf:params:oauth:grant-type:token-exchange"})}({tokensClient:this._tokensClient,clientId:this._clientId}).catch((function(e){if(!(e instanceof Ft))throw e;if(n&&e.status===Mt.UNAUTHORIZED)return function(e){var t=e.tokensClient,n=e.clientId,r=e.clientType;return Tt(this,void 0,void 0,(function(){return St(this,(function(e){switch(e.label){case 0:return[4,Jt({tokensClient:t,clientId:n,grantType:"Web"===r?"urn:ietf:params:oauth:grant-type:origin":"urn:ietf:params:oauth:grant-type:client_id"})];case 1:return[2,e.sent()]}}))}))}({tokensClient:t._tokensClient,clientId:t._clientId,clientType:t._anonymousTokenClientType});throw e}))},e.prototype._refresh=function(e,t){var n=this;return function(e){var t=e.tokensClient,n=e.clientId,r=e.refreshToken;return Tt(this,void 0,void 0,(function(){return St(this,(function(e){switch(e.label){case 0:return[4,Jt({tokensClient:t,clientId:n,grantType:"refresh_token",refreshToken:r})];case 1:return[2,e.sent()]}}))}))}({tokensClient:this._tokensClient,clientId:this._clientId,refreshToken:e}).catch((function(e){if(e instanceof Ft&&e.status===Mt.UNAUTHORIZED)return n._exchangeToken(t);throw e}))},e.prototype._getAccessToken=function(e){var t,n,r,i,o;return Tt(this,void 0,void 0,(function(){var s,a,c,u,l,d,h,f=this;return St(this,(function(p){switch(p.label){case 0:return p.trys.push([0,19,,20]),(s=e.ignoreCache)?[3,2]:(a=Yt,[4,this._cache.get()]);case 1:if(u=a.apply(void 0,[p.sent()]))return[2,u.access_token];p.label=2;case 2:return[4,Nt((function(){return f._lock.acquireLock(Pt,5e3)}),10)];case 3:if(!p.sent())return[3,17];p.label=4;case 4:return p.trys.push([4,,14,16]),[4,this._cache.get()];case 5:return c=p.sent(),!s&&(u=Yt(c))?[2,u.access_token]:(l=void 0,!s&&c&&c.refresh_token?[3,7]:(null===(t=this._tracking)||void 0===t||t.getTokensAttemptWithoutRefreshToken(),[4,this._exchangeToken(e)]));case 6:return l=p.sent(),[3,9];case 7:return null===(n=this._tracking)||void 0===n||n.getTokensAttemptWithRefreshToken(),[4,this._refresh(c.refresh_token,e)];case 8:l=p.sent(),p.label=9;case 9:return[4,this._cache.set(Qt(l))];case 10:return!(d=p.sent())||Yt(d)?[3,13]:[4,this._refresh(d.refresh_token,e)];case 11:return l=p.sent(),[4,this._cache.set(Qt(l))];case 12:d=p.sent(),p.label=13;case 13:return null===(r=this._tracking)||void 0===r||r.getTokensSuccess(),[2,d.access_token];case 14:return[4,this._lock.releaseLock(Pt)];case 15:return p.sent(),[7];case 16:return[3,18];case 17:throw null===(i=this._tracking)||void 0===i||i.lockTimeout(),new Ot(kt.LOCK_TIMEOUT);case 18:return[3,20];case 19:throw h=p.sent(),null===(o=this._tracking)||void 0===o||o.getTokensFailure(h),h;case 20:return[2]}}))}))},e.prototype.getAccessToken=function(e){var t=this;void 0===e&&(e={orAnonymous:!1,ignoreCache:!1});var n="".concat(e.orAnonymous,"::").concat(e.ignoreCache),r=this._promiseMap.get(n);return r||(r=this._getAccessToken(e).finally((function(){t._promiseMap.delete(n),r=void 0})),this._promiseMap.set(n,r)),r},e.prototype.logout=function(){return Tt(this,void 0,void 0,(function(){return St(this,(function(e){switch(e.label){case 0:return[4,this._cache.remove()];case 1:return e.sent(),[2]}}))}))},e}(),fn=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}xt(t,e)}(hn),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}xt(t,e)}(hn),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}xt(t,e)}(hn),function(e){function t(n,r,i,o,s){var a=e.call(this,i)||this;return a.name="HttpError",a.status=n,a.errorType=r,a.message=i,a.url=o,a.method=s,Object.setPrototypeOf(a,t.prototype),a}return xt(t,e),t}(Error)),pn=function(e){function t(n,r,i){var o=e.call(this,n)||this;return o.name="FetchRequestError",o.url=r,o.method=i,Object.setPrototypeOf(o,t.prototype),o}return xt(t,e),t}(Error),gn=function(e){function t(n,r,i,o,s){var a=e.call(this,n,r,i,o,s)||this;return a.name="HttpClientError",Object.setPrototypeOf(a,t.prototype),a}return xt(t,e),t}(fn),mn=function(e){function t(n,r,i,o,s){var a=e.call(this,n,r,i,o,s)||this;return a.name="HttpServerError",Object.setPrototypeOf(a,t.prototype),a}return xt(t,e),t}(fn),_n=function(e){function t(n,r,i,o){var s=e.call(this,401,n,r,i,o)||this;return s.name="HttpUnauthorizedError",Object.setPrototypeOf(s,t.prototype),s}return xt(t,e),t}(fn),bn=function(e){function t(n,r,i,o){var s=e.call(this,n,r,i,o)||this;return s.name="HttpUnauthorizedInvalidRefreshTokenError",Object.setPrototypeOf(s,t.prototype),s}return xt(t,e),t}(_n),vn=function(e){function t(n){var r=e.call(this,n)||this;return r.name="UnauthenticatedError",Object.setPrototypeOf(r,t.prototype),r}return xt(t,e),t}(Error);!function(e){e.Prod="prod",e.PreProd="preprod",e.QA="qa"}(cn||(cn={}));var yn=((an={})[cn.Prod]={AUTHORIZATION_URL:"https://auth.grammarly.com/v4/api/oauth2/authorize",EXCHANGE_URL:"https://auth.grammarly.com/v4/api/oauth2/exchange",TOKEN_URL:"https://auth.grammarly.com/v4/api/oauth2/token",REVOKE_URL:"https://auth.grammarly.com/v4/api/revoke-by-refresh-token",USER_INFO_URL:"https://auth.grammarly.com/v4/api/userinfo"},an[cn.PreProd]={AUTHORIZATION_URL:"https://auth.ppgr.io/v4/api/oauth2/authorize",EXCHANGE_URL:"https://auth.ppgr.io/v4/api/oauth2/exchange",TOKEN_URL:"https://auth.ppgr.io/v4/api/oauth2/token",REVOKE_URL:"https://auth.ppgr.io/v4/api/revoke-by-refresh-token",USER_INFO_URL:"https://auth.ppgr.io/v4/api/userinfo"},an[cn.QA]={AUTHORIZATION_URL:"https://auth.qagr.io/v4/api/oauth2/authorize",EXCHANGE_URL:"https://auth.qagr.io/v4/api/oauth2/exchange",TOKEN_URL:"https://auth.qagr.io/v4/api/oauth2/token",REVOKE_URL:"https://auth.qagr.io/v4/api/revoke-by-refresh-token",USER_INFO_URL:"https://auth.qagr.io/v4/api/userinfo"},an);function wn(e){return Tt(this,void 0,void 0,(function(){return St(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))}function xn(e,t,n,r){return void 0===n&&(n={}),Tt(this,void 0,void 0,(function(){var i,o,s,a;return St(this,(function(c){switch(c.label){case 0:i=3,o=0,c.label=1;case 1:s=void 0,c.label=2;case 2:return c.trys.push([2,4,,5]),[4,e(t,n)];case 3:return s=c.sent(),[3,5];case 4:throw c.sent();case 5:return function(e){return e&&(429===e.status||e.status>=500)}(s)?++o>=i?(null==r||r(s.status),[2,s]):(a=function(e){return 1e3*Math.pow(2,e-1)}(o),[4,wn(a)]):[3,7];case 6:return c.sent(),[3,8];case 7:return[2,s];case 8:return[3,1];case 9:return[2]}}))}))}var En,kn=function(){function e(e,t,n,r){this.getApplicationHeaders=t,this.logger=n,this.onFinalRetryFailed=r,this.httpFetch=e}return e.prototype.addFetchOptions=function(){return Tt(this,void 0,void 0,(function(){var e;return St(this,(function(t){switch(t.label){case 0:return[4,this.getApplicationHeaders()];case 1:return e=t.sent(),[2,{credentials:"include",mode:"cors",headers:Ct(Ct({},e),{"Content-Type":"application/json"})}]}}))}))},e.prototype.post=function(e,t){return Tt(this,void 0,void 0,(function(){return St(this,(function(n){return[2,this.request(e,"POST",t)]}))}))},e.prototype.get=function(e){return Tt(this,void 0,void 0,(function(){return St(this,(function(t){return[2,this.request(e,"GET")]}))}))},e.prototype.request=function(e,t,n){return Tt(this,void 0,void 0,(function(){var r,i,o,s,a,c,u,l,d,h,f;return St(this,(function(p){switch(p.label){case 0:return[4,this.addFetchOptions()];case 1:r=p.sent(),i=Ct(Ct({},r),{method:t,body:n?JSON.stringify(n):void 0}),p.label=2;case 2:return p.trys.push([2,4,,5]),[4,xn(this.httpFetch,e,i,this.onFinalRetryFailed)];case 3:return o=p.sent(),[3,5];case 4:throw s=p.sent(),a=new pn(s.message,e,t),this.logger.trackFetchRequestError(a),a;case 5:if(!o.ok)return[3,9];p.label=6;case 6:return p.trys.push([6,8,,9]),this.logger.trackHttpRequestSuccess(e,t),[4,o.json()];case 7:return[2,p.sent()];case 8:throw p.sent(),c=new fn(o.status,"invalid_json","Failed to parse JSON response",e,t),this.logger.trackHttpJsonParseError(c),c;case 9:return[4,o.clone().json().catch((function(e){return{error:"unknown",message:e.message}}))];case 10:throw u=p.sent(),l=o.status,d=u.error||"unknown_error",h=u.message||"HTTP error ".concat(l," when accessing ").concat(e),f=l>=500?new mn(l,d,h,e,t):401===l?h.includes("Invalid refresh token")?new bn(d,h,e,t):new _n(d,h,e,t):l>=400?new gn(l,d,h,e,t):new fn(l,d,h,e,t),this.logger.trackHttpRequestError(f),f}}))}))},e}(),Cn="gr-oauth-key",Tn="gr-oauth-service-state",Sn="gr-oauth-state",Rn=function(e){function t(n){var r=e.call(this,n)||this;return r.name="ExpiredAccessTokenError",Object.setPrototypeOf(r,t.prototype),r}return xt(t,e),t}(Error),In=function(e){function t(n){var r=e.call(this,n)||this;return r.name="UnexpectedAuthenticatedError",Object.setPrototypeOf(r,t.prototype),r}return xt(t,e),t}(Error);!function(e){e[e.Anonymous=0]="Anonymous",e[e.Authenticated=1]="Authenticated",e[e.Unknown=2]="Unknown"}(En||(En={}));var An=function(){function e(e,t,n,r,i,o,s,a){this.clientId=e,this.tokenValidator=n,this.exchangeURL=yn[t].EXCHANGE_URL,this.tokenURL=yn[t].TOKEN_URL,this.revokeURL=yn[t].REVOKE_URL,this.userInfoURL=yn[t].USER_INFO_URL,this.typedStorage=r,this.fetchSessionToken=a,this.useImplicitExchange=o,this.logger=i,this.environment=t,this.httpClient=new kn(fetch,s,i,this.handleFinalRetryFailure.bind(this))}return e.prototype.getTokenFromAuthorizationCodeGrant=function(e,t){return Tt(this,void 0,void 0,(function(){var n,r,i;return St(this,(function(o){switch(o.label){case 0:return n={client_id:this.clientId,grant_type:"authorization_code",authorization_code:e,code_verifier:t},[4,this.httpClient.post(this.tokenURL,n)];case 1:return r=o.sent(),i=this.parseTokenResponse(r),[4,this.typedStorage.setItem(Cn,i)];case 2:return o.sent(),[2,r.access_token]}}))}))},e.prototype.getTokenFromRefreshGrant=function(e){return Tt(this,void 0,void 0,(function(){var t,n,r,i,o;return St(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,6]),t={client_id:this.clientId,grant_type:"refresh_token",refresh_token:e},[4,this.httpClient.post(this.tokenURL,t)];case 1:return n=s.sent(),r=this.parseTokenResponse(n),[4,this.typedStorage.setItem(Cn,r)];case 2:if(s.sent(),this.logger.trackTokenRefreshSuccess(),!(i=this.tokenValidator.validateAccessToken(r)))throw new Rn("Access token expired upon refresh");return[2,i];case 3:return(o=s.sent())instanceof Error&&this.logger.trackTokenRefreshFailed(o),o instanceof bn?[4,this.typedStorage.removeItem(Cn)]:[3,5];case 4:s.sent(),s.label=5;case 5:throw o;case 6:return[2]}}))}))},e.prototype.getTokenFromAnonymousGrant=function(){return Tt(this,void 0,void 0,(function(){var e,t,n;return St(this,(function(r){switch(r.label){case 0:return e={client_id:this.clientId,grant_type:"urn:ietf:params:oauth:grant-type:client_id"},[4,this.httpClient.post(this.tokenURL,e)];case 1:return t=r.sent(),n=this.parseTokenResponse(t),[4,this.typedStorage.setItem(Cn,n)];case 2:return r.sent(),[2,t.access_token]}}))}))},e.prototype.getTokenFromExchangeGrant=function(e){return Tt(this,void 0,void 0,(function(){var t,n,r,i,o;return St(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,8]),t={client_id:this.clientId,grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",subject_token_type:"urn:grammarly:params:oauth:token-type:grauth"},this.useImplicitExchange||!this.fetchSessionToken?[3,2]:[4,this.fetchSessionToken()];case 1:n=s.sent(),t.subject_token=n,s.label=2;case 2:return[4,this.httpClient.post(this.useImplicitExchange?this.exchangeURL:this.tokenURL,t)];case 3:return r=s.sent(),i=this.parseTokenResponse(r),[4,this.typedStorage.setItem(Cn,i)];case 4:return s.sent(),this.useImplicitExchange?this.logger.trackTokenExchangeImplicitSuccess(e):this.logger.trackTokenExchangeSuccess(e),[2,r.access_token];case 5:return o=s.sent(),this.useImplicitExchange?o instanceof Error&&this.logger.trackTokenExchangeImplicitFailed(o,e):o instanceof Error&&this.logger.trackTokenExchangeFailed(o,e),this.useImplicitExchange&&o instanceof _n&&401===o.status||!this.useImplicitExchange&&o instanceof gn&&400===o.status?[4,this.validateGrauth()]:[3,7];case 6:if(s.sent()===En.Anonymous)throw new vn("User is anonymous");throw new In("User is unexpectedly authenticated after unsuccessful token exchange");case 7:throw o;case 8:return[2]}}))}))},e.prototype.revokeRefreshToken=function(e){var t={client_id:this.clientId,refresh_token:e};return this.httpClient.post(this.revokeURL,t)},e.prototype.validateGrauth=function(){return Tt(this,void 0,void 0,(function(){var e,t;return St(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.httpClient.post(this.userInfoURL,{})];case 1:return e=n.sent(),[2,this.isUserAnonymous(e)?En.Anonymous:En.Authenticated];case 2:if((t=n.sent())instanceof _n)return[2,En.Anonymous];throw t;case 3:return[2]}}))}))},e.prototype.isUserAnonymous=function(e){return e.id<0},e.prototype.handleFinalRetryFailure=function(e){return Tt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return e>=500&&e<600?[4,this.markTokenServiceAsDegraded("Outage_5XX")]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.markTokenServiceAsDegraded=function(e){return Tt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return[4,this.typedStorage.setItem(Tn,{tokens_service_last_degraded_ts:Date.now(),tokens_service_last_degraded_reason:e})];case 1:return t.sent(),this.logger.trackTokenServiceDegraded(e),[2]}}))}))},e.prototype.parseTokenResponse=function(e){return{expires_at:(new Date).getTime()+1e3*e.expires_in,access_token:e.access_token,refresh_token:e.refresh_token,refresh_token_expires_at:(new Date).getTime()+1e3*e.refresh_token_expires_in}},e}();class On extends Error{}function Fn(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return atob(t)}}On.prototype.name="InvalidTokenError";var Pn=function(){function e(e){this.networkLeeway=e}return e.prototype.validateAccessToken=function(e){return e&&e.access_token&&e.expires_at&&Date.now()<e.expires_at-this.networkLeeway?e.access_token:null},e.prototype.isAuthenticated=function(e){try{var t=function(e,t){if("string"!=typeof e)throw new On("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,r=e.split(".")[n];if("string"!=typeof r)throw new On(`Invalid token specified: missing part #${n+1}`);let i;try{i=Fn(r)}catch(e){throw new On(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(i)}catch(e){throw new On(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}(e);return t.sub>0}catch(e){return!1}},e}(),Nn=function(){function e(e){this.storage=e}return e.prototype.getItem=function(e){var t;return Tt(this,void 0,void 0,(function(){var n;return St(this,(function(r){switch(r.label){case 0:return[4,null===(t=this.storage)||void 0===t?void 0:t.getItem(e.toString())];case 1:if(null==(n=r.sent()))return[2,n];try{return[2,JSON.parse(n)]}catch(e){return[2,null]}return[2]}}))}))},e.prototype.setItem=function(e,t){var n;return Tt(this,void 0,void 0,(function(){return St(this,(function(r){return null===(n=this.storage)||void 0===n||n.setItem(e.toString(),JSON.stringify(t)),[2]}))}))},e.prototype.removeItem=function(e){var t;return Tt(this,void 0,void 0,(function(){return St(this,(function(n){switch(n.label){case 0:return[4,null===(t=this.storage)||void 0===t?void 0:t.removeItem(e.toString())];case 1:return n.sent(),[2]}}))}))},e}();function Ln(e,t,n){return void 0===t&&(t=function(){return!0}),void 0===n&&(n=2),Tt(this,void 0,void 0,(function(){var r,i,o;return St(this,(function(s){switch(s.label){case 0:r=0,s.label=1;case 1:if(!(r<n))return[3,6];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,e(r)];case 3:return[2,s.sent()];case 4:if(o=s.sent(),!(t(o)&&r<n-1))throw o;return r++,i=o,[3,5];case 5:return[3,1];case 6:throw i}}))}))}function Dn(e,t){return void 0===t&&(t=function(){return!0}),Tt(this,void 0,void 0,(function(){return St(this,(function(n){return[2,Ln(e,t,2)]}))}))}var Un=function(e){function t(){var n=e.call(this)||this;return n.name="MissingRefreshTokenError",Object.setPrototypeOf(n,t.prototype),n}return xt(t,e),t}(Error),Mn=(function(){function e(e,t,n,r,i,o,s,a){void 0===s&&(s=!0),this.clientId=e,this.environment=t,this.useImplicitExchange=s,this.typedStorage=new Nn(n),this.logger=i,this.tokenValidator=new Pn(a||6e4),this.oauthService=new An(e,t,this.tokenValidator,this.typedStorage,this.logger,this.useImplicitExchange,r,o)}e.prototype.createAuthorizationRequestUrl=function(e,t,n){return void 0===n&&(n={}),Tt(this,void 0,void 0,(function(){var r,i,o,s,a,c;return St(this,(function(u){switch(u.label){case 0:return r=Lt(32),[4,Ht()];case 1:return i=u.sent(),o=i.codeVerifier,s=i.codeChallenge,[4,this.typedStorage.setItem(Sn,{state:r,code_verifier:o,created_at:Date.now()})];case 2:return u.sent(),a=yn[this.environment].AUTHORIZATION_URL,c=new URLSearchParams({scopes:t.join(" "),redirect_uri:e,client_id:this.clientId,response_mode:"query",response_type:"code",code_challenge:s,code_challenge_method:"S256",state:r}),Object.entries(n).forEach((function(e){var t=Rt(e,2),n=t[0],r=t[1];c.append(n,r)})),[2,"".concat(a,"?").concat(c.toString())]}}))}))},e.prototype.handleRedirect=function(e,t){return Tt(this,void 0,void 0,(function(){var n,r,i,o;return St(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,4,,5]),!e)throw new Error("Authorization code is required");if(!t)throw new Error("State parameter is required");return[4,this.typedStorage.getItem(Sn)];case 1:if(!(n=s.sent())||!n.code_verifier||n.state!==t)throw new Error("No matching authorization state found");return r=n.code_verifier,[4,this.oauthService.getTokenFromAuthorizationCodeGrant(e,r)];case 2:return i=s.sent(),[4,this.typedStorage.removeItem(Sn)];case 3:return s.sent(),this.logger.trackAuthorizationCodeExchangeSuccess(),[2,i];case 4:throw(o=s.sent())instanceof Error&&this.logger.trackAuthorizationCodeExchangeFailed(o),o;case 5:return[2]}}))}))},e.prototype.getAccessTokenOrRenew=function(){return Tt(this,void 0,void 0,(function(){var e=this;return St(this,(function(t){return this.refreshPromise||(this.refreshPromise=this._getAccessTokenOrRenew().finally((function(){e.refreshPromise=void 0}))),[2,this.refreshPromise]}))}))},e.prototype._getAccessTokenOrRenew=function(){return Tt(this,void 0,void 0,(function(){var e,t,n,r,i,o=this;return St(this,(function(s){switch(s.label){case 0:return[4,this.typedStorage.getItem(Cn)];case 1:if(e=s.sent(),t=this.tokenValidator.validateAccessToken(e))return[2,t];if(n="MissingRefreshToken",!(null==e?void 0:e.refresh_token))return[3,5];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,Dn((function(){return Tt(o,void 0,void 0,(function(){var e;return St(this,(function(t){switch(t.label){case 0:return[4,this.typedStorage.getItem(Cn)];case 1:if(!(null==(e=t.sent())?void 0:e.refresh_token))throw new Un;return[2,this.oauthService.getTokenFromRefreshGrant(e.refresh_token)]}}))}))}),this.shouldRetryRefresh)];case 3:return[2,s.sent()];case 4:if(!((r=s.sent())instanceof bn))throw r;return n="InvalidRefreshToken",r instanceof Error&&this.logger.trackInvalidRefreshToken(r),[3,5];case 5:return s.trys.push([5,7,,10]),[4,this.loginWithTokenExchange(n)];case 6:return[2,s.sent()];case 7:return(i=s.sent())instanceof vn?(this.logger.trackUnauthenticatedError(i,n),"InvalidRefreshToken"===n&&this.logger.trackUnintentionalLogoutError(i),[4,this.loginAnonymous()]):[3,9];case 8:return[2,s.sent()];case 9:throw i;case 10:return[2]}}))}))},e.prototype.loginWithTokenExchangeOrAnonymous=function(e){return Tt(this,void 0,void 0,(function(){var t;return St(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,5]),[4,this.loginWithTokenExchange(e)];case 1:case 3:return[2,n.sent()];case 2:return(t=n.sent())instanceof vn?(this.logger.trackUnauthenticatedError(t,e),[4,this.loginAnonymous()]):[3,4];case 4:throw t;case 5:return[2]}}))}))},e.prototype.logout=function(e){return Tt(this,void 0,void 0,(function(){var t,n=this;return St(this,(function(r){switch(r.label){case 0:return[4,this.typedStorage.getItem(Cn)];case 1:return(t=r.sent())&&t.refresh_token&&this.oauthService.revokeRefreshToken(t.refresh_token).then((function(){return n.logger.trackTokenRevokeSuccess()})).catch((function(e){return n.logger.trackTokenRevokeFailed(e)})),[4,this.typedStorage.removeItem(Cn)];case 2:return r.sent(),this.logger.trackLogoutSuccess(e),[2]}}))}))},e.prototype.getTokensServiceState=function(){return Tt(this,void 0,void 0,(function(){return St(this,(function(e){switch(e.label){case 0:return[4,this.typedStorage.getItem(Tn)];case 1:return[2,e.sent()||{tokens_service_last_degraded_ts:null,tokens_service_last_degraded_reason:null}]}}))}))},e.prototype.experimental__isAuthenticated=function(e){return this.tokenValidator.isAuthenticated(e)},e.prototype.shouldRetryRefresh=function(e){return e instanceof Rn},e.prototype.shouldRetryTokenExchange=function(e){return e instanceof In},e.prototype.loginAnonymous=function(){return Tt(this,void 0,void 0,(function(){var e,t;return St(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.oauthService.getTokenFromAnonymousGrant()];case 1:return e=n.sent(),this.logger.trackTokenAnonymousFetchSuccess(),[2,e];case 2:throw(t=n.sent())instanceof Error&&this.logger.trackTokenAnonymousFetchFailed(t),t;case 3:return[2]}}))}))},e.prototype.loginWithTokenExchange=function(e){return Tt(this,void 0,void 0,(function(){var t=this;return St(this,(function(n){return[2,Dn((function(){return t.oauthService.getTokenFromExchangeGrant(e)}),this.shouldRetryTokenExchange)]}))}))}}(),function(){function e(){this.storage=new Map}return e.prototype.getItem=function(e){return this.storage.get(e)||null},e.prototype.setItem=function(e,t){this.storage.set(e,t)},e.prototype.removeItem=function(e){this.storage.delete(e)},e}());!function(){function e(e,t,n,r,i){this.fetchFn=e,this._disallowedDomainList=["auth.grammarly.com","auth.ppgr.io","auth.qagr.io"],this._allowedDomainList=["grammarly.com","grammarly.io","qagr.io","ppgr.io"],this.logger=n,this.config=t,this.typedStorage=i||new Nn(new Mn),this.httpClient=new kn(e,r,n)}e.prototype.getAccessTokenOrRenew=function(){return Tt(this,void 0,void 0,(function(){var e=this;return St(this,(function(t){return this.refreshPromise||(this.refreshPromise=this._getAccessTokenOrRenew().finally((function(){e.refreshPromise=void 0}))),[2,this.refreshPromise]}))}))},e.prototype._getAccessTokenOrRenew=function(){return Tt(this,void 0,void 0,(function(){var t,n,r;return St(this,(function(i){switch(i.label){case 0:return[4,this.typedStorage.getItem(e.TOKEN_KEY)];case 1:return(t=i.sent())&&t.expires_at>Date.now()?[2,t.access_token]:(n="".concat(this.config.baseUrl).concat(this.config.tokenPath),[4,this.httpClient.get(n)]);case 2:return r=i.sent(),[4,this.typedStorage.setItem(e.TOKEN_KEY,{access_token:r.access_token,expires_in:r.expires_in,expires_at:Date.now()+1e3*r.expires_in})];case 3:return i.sent(),[2,r.access_token]}}))}))},e.prototype.logout=function(){return Tt(this,void 0,void 0,(function(){var t;return St(this,(function(n){switch(n.label){case 0:return t="".concat(this.config.baseUrl).concat(this.config.logoutPath),[4,this.httpClient.get(t)];case 1:return n.sent(),[4,this.typedStorage.removeItem(e.TOKEN_KEY)];case 2:return n.sent(),this.refreshPromise=void 0,this.logger.trackLogoutSuccess(),[2]}}))}))},e.prototype.fetchWithAuth=function(t,n){return Tt(this,void 0,void 0,(function(){var r,i,o,s,a,c=this;return St(this,(function(u){switch(u.label){case 0:if(!this.isValidDomain(t))return[2,this.fetchFn(t,n)];r=function(){return Tt(c,void 0,void 0,(function(){var e,t;return St(this,(function(r){switch(r.label){case 0:return e=new Headers(null==n?void 0:n.headers),[4,this.getAccessTokenOrRenew()];case 1:return t=r.sent(),e.set("Authorization","Bearer ".concat(t)),[2,Ct(Ct({},n),{headers:e})]}}))}))},u.label=1;case 1:return u.trys.push([1,7,,10]),[4,r()];case 2:return i=u.sent(),[4,this.fetchFn(t,i)];case 3:return 401!==(o=u.sent()).status?[3,6]:[4,this.typedStorage.removeItem(e.TOKEN_KEY)];case 4:return u.sent(),this.refreshPromise=void 0,[4,r()];case 5:return s=u.sent(),[2,this.fetchFn(t,s)];case 6:return[2,o];case 7:return(a=u.sent())instanceof _n?(this.logger.trackUnauthorizedError(a),[4,this.typedStorage.removeItem(e.TOKEN_KEY)]):[3,9];case 8:u.sent(),this.refreshPromise=void 0,u.label=9;case 9:return[2,this.fetchFn(t,n)];case 10:return[2]}}))}))},e.prototype.isValidDomain=function(e){var t;try{t=e instanceof URL?e:e instanceof Request?new URL(e.url):new URL(e)}catch(e){return!1}var n=function(e){return t.hostname.toLowerCase()===e.toLowerCase()||t.hostname.toLowerCase().endsWith(".".concat(e).toLowerCase())};return!this._disallowedDomainList.some(n)&&this._allowedDomainList.some(n)},e.TOKEN_KEY="oauth.tokens"}();const Gn=(e,t="round")=>{switch(t){case"floor":return Math.floor(e);case"ceil":return Math.ceil(e);case"round":return Math.round(e);default:return(0,Re.vE)(t)}};class jn{static trackTaskLatency(e,t,n=performance.now()){const r=Math.round(n-t),i=jn.getTaskLatency(e);(!i||i<r)&&jn._taskLatencyMap.set(e,r)}static getTaskLatency(e){return jn._taskLatencyMap.get(e)}static reset(){jn._taskLatencyMap.clear()}}jn._taskLatencyMap=new Map;var qn=__webpack_require__(14969),Bn=__webpack_require__(29479),Hn=__webpack_require__(99402),zn=__webpack_require__(2151);function Wn(e,t){const n=e.anchorNode;if(!n)return!1;const r=Q.map((e=>Array.isArray(e)?`[${e[0]}="${e[1]}"]`:`[${e}]`)).join(","),i=t.activeElement,o=e.toString().trim(),s="TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName,a=!i||"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName,c=!(0,ne.Ne)(n),u=!(0,ne.Jt)(n,r)&&!(0,ne.Ku)(n,r),l=!(0,ne.Jt)(n,"[contenteditable=true],[contenteditable=plaintext-only]")&&!(0,ne.k3)(n);return!!(o&&s&&a&&c&&u&&l)}var Vn,$n=__webpack_require__(64560);!function(e){const r="important";function i(e){return String(e)+"px"}e.isValid=function(){const e=self.document.getSelection();return!(!e||e.toString().match(/[0-9_!@#$%^&*:"|<>?~().,:}{='-/ /]/))&&Wn(e,self.document)},e.animation=function(e){const a=document.createElement("div"),c=a.attachShadow({mode:"open"}),u=document.createElement("style");u.innerHTML=$n.__css,c.appendChild(u);const l=self.document.getSelection().getRangeAt(0).getBoundingClientRect(),d=document.createElement("div");d.style.setProperty("top",i(l.top),r),d.style.setProperty("left",i(l.left),r),d.style.setProperty("height",i(l.height),r),d.style.setProperty("max-width",i(l.width),r),d.style.setProperty("z-index",Hn.U_.toString(),r),d.classList.add($n.animatedUnderline,$n.checkAnimatedUnderline),c.appendChild(d),document.body.appendChild(a);const h=(0,Le.F)(10),f=(0,s.a)(e.pipe((0,qn.P)(),(0,Bn.h)(!1),(0,o.O)(!0),(0,n.x)()),h.pipe((0,t.U)((()=>{const e="."+zn.completeAnimation;if(document.querySelector(e))return!0;const t=Array.from(document.querySelectorAll((0,ge.m)("extension")));for(const n of t)if(n.shadowRoot&&n.shadowRoot.querySelector(e))return!0;return!1})),(0,o.O)(!1),(0,n.x)())).pipe((0,j.h)((([e,t])=>!e||t)),(0,n.x)()).subscribe(p);return{unsubscribe:p};function p(){f.unsubscribe(),a.remove()}}}(Vn||(Vn={}));var Kn,Xn=__webpack_require__(19254),Zn=__webpack_require__(52439);!function(e){const t=Date.now(),n=e=>self.performance.mark("@grammarly-extension:"+e);e.callExecuteContentScript=()=>n("callExecuteContentScript"),e.checkScriptInitEnd=e=>{const r=Math.random()<.01&&(0,u.i7)();if(n("checkScriptInitEnd"),r){const n=Date.now();e.api.trackCall(Zn.r,["sendFelogEvent",{ex_csInitPerf:{domain:self.location.host,initTime:n-t,pageLoadTime:n-self.performance.timing.responseEnd},hideUserInfo:!0,level:Xn.in.INFO,logger:"checkScript.initialized"}])}},e.checkScriptInitStart=()=>n("checkScriptInitStart")}(Kn||(Kn={}));const Jn="grExtInstalled",Yn="grExtDisabled";function Qn(e){null===e&&"next"===function(){var e;return null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.dataset[Yn]}()||(null===e?function(){var e;(null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.dataset)&&delete document.body.dataset[Yn]}():document.body.dataset[Yn]=e)}const er=(0,B.R)(self.document,"click",{capture:!0});class tr{constructor(e,t,n,r=l.Y.create("ExtensionCheckIntegration")){this._csShareStorage=e,this._loadContentScript=t,this._log=r,this._pageEnable=!0,this._citationBuilderEnable=!1,this._humanWritingReportEnable=!1,this._enabledDefs=!1,this._isAnonymous=!0,this._wasLoaded=!1,this._isDesktopIntegrationEnable=!1,this._mutations=We.x.createFlattenHot(self.document,{childList:!0,subtree:!0}),this._textFieldsObservable=Fe.createFocusObservable(self.document,this._mutations),this._subs=[this._textFieldsObservable.subscribe((e=>{const t=e.owner.frame||e.element,n=R.get(t);if(this._log.debug("detected click",{field:t,fieldType:n}),this._pageEnable&&(n.generic||n.specific)){const e=crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2);t.__grammarlyPerformanceTimerId=e,t.__grammarlyPerformanceTimerStartTime=performance.now(),this.load()}})),er.subscribe((e=>{2===e.detail&&this._enabledDefs&&this._pageEnable&&!this._isAnonymous&&Vn.isValid()&&(this._log.debug("dictionary event executed",e),this._csShareStorage.set("extensionDictionaryEvent",e),this._subs.push(Vn.animation(er)),this.load())}))],n&&!(0,u.n_)()&&this.load()}load(){this._wasLoaded&&!this._isDesktopIntegrationEnable||(this._log.info("Loading main content script"),this._wasLoaded=!0,Kn.callExecuteContentScript(),this.dispose(),this._loadContentScript())}dispose(){this._subs.forEach((e=>{try{e.unsubscribe()}catch(e){}}))}updateState(e,t,n,r,i,o,s,a){this._isDesktopIntegrationEnable=r,(!this._pageEnable&&t||!this._citationBuilderEnable&&i||!this._humanWritingReportEnable&&o)&&this.load(),!this._pageEnable||t||this._wasLoaded||(0,u.i7)()&&((e,t)=>{self.__grammarlyINPListenerInitialized||(self.__grammarlyINPListenerInitialized=!0,vt("interactionToNextPaint",t)&&mt(e))})((e=>{if(!this._pageEnable){const t=(0,de.Tb)();(({metric:e,domain:t,integrationIds:n,sessionIds:r,felog:i,productMetricsClient:o})=>{var s,a;const c=n.size>0,{osName:l,browserName:d}=(0,pe.OB)().browserApi.getBrowserInfo();if(i.interactionToNextPaint(e.value,{os:l,browserName:d,domain:(0,Ae.Cg)(t),grammarlyWasActive:c?"true":"false",rating:e.rating}),(0,u.i7)()){const i=20,u=[...n].slice(-i).join(","),l=[...r].slice(-i).join(","),d=c.toString(),h=null===(s=jn.getTaskLatency("alertProcessing"))||void 0===s?void 0:s.toString(),f=null===(a=jn.getTaskLatency("highlightProcessing"))||void 0===a?void 0:a.toString();o.send({event_name:"interactionToNextPaint-performance",dataset_name:"performance",latency:Gn(e.value),hostname:t,integration_id:u,extra:{session_id:l,grammarly_was_active:d,rating:e.rating,max_alert_processing_latency:h,max_highlight_processing_latency:f}},{additionalProps:[...yt.y,...yt.m]}),jn.reset()}})({metric:e,domain:(0,S.ge)(),felog:t,integrationIds:new Set,sessionIds:new Set,productMetricsClient:s})}}),a),this._citationBuilderEnable=i,this._humanWritingReportEnable=o,this._isAnonymous=e,this._pageEnable=t,this._enabledDefs=n,Qn(this._pageEnable?null:"forever")}}var nr,rr;!function(e){e.init=function(e,t){const n=l.Y.create("lib.external");!function(e,t,n,r=document,i=!1,o,s){const a=e,c=r.documentElement;if(i){const e=r.createElement("link");e.href=a,e.rel="preload",e.as="script",e.onload=()=>{e.remove()},c.prepend(e)}const u=r.createElement("script");u.async=!1,u.defer=!1,u.src=a,u.type="text/javascript",t&&u.setAttribute("data-ext-id",t),n&&u.setAttribute("data-ext-version",n),u.onload=()=>{null==o||o(),u.remove()},u.onerror=()=>{null==s||s()},c.prepend(u)}(t("src/js/Grammarly-externalEventsInjectedCs.js"),(0,u.pB)());const r=te.map((t=>{const r=`external:${t}`;return ne.on.call(document,r,(({detail:t})=>{n.trace("external event",{event:r,detail:t}),e.sendBackground(r,t)}))}));return{dispose:()=>{r.forEach((e=>e.off()))}}}}(nr||(nr={})),function(e){function t(e){(0,Le.F)(10).pipe((0,j.h)((()=>!!document.body)),(0,qn.P)()).subscribe((()=>{document.body.dataset.newGrCSCheckLoaded=e.buildInfo.version,document.body.dataset[Jn]=""}))}e.init=function(e,n,r,i){const o=[];t(r);const s=self.location.protocol===r.appConfig.url.grammarlyProtocol&&i.match(`^([a-z\\-0-9]+\\.)*${r.appConfig.url.grammarlyDomain}$`),a=i.match(/^(\w+\.)*(ppgr\.io|qagr\.io)$/),c=(0,u.Um)().isSuperhumanDomain(i);return(s||a||c)&&o.push(nr.init(n,e.getUrl)),{dispose:()=>{o.forEach((e=>e.dispose()))}}}}(rr||(rr={}));let ir=!1,or=[];function sr(){or.forEach((e=>e&&e.dispose())),or=[],ir=!0}const ar=A.E0;const cr=async e=>{if("https://www.grammarly.com"===document.location.origin&&"/signin"===document.location.pathname){const t=await e();t&&self.postMessage({name:"loginHint",data:t},document.location.origin)}};var ur=__webpack_require__(37870),lr=__webpack_require__(23474),dr=__webpack_require__(52403),hr=__webpack_require__(38316),fr=__webpack_require__(32620);const pr=Object.values(lr.j),gr=Object.values(c.D);var mr=__webpack_require__(33908);class _r{constructor(e,t){this.port=e.runtime.connect({name:t})}onMessage(e){this.port.onMessage.addListener(e)}onDisconnect(e){this.port.onDisconnect.addListener(e)}postMessage(e){this.port.postMessage(e)}}var br=__webpack_require__(74822),vr=__webpack_require__(38364),yr=__webpack_require__(87459),wr=__webpack_require__(7176);function xr(e,t){if(!e||"object"!=typeof e)return e;try{const t=JSON.stringify(e,((e,t)=>(0,wr.pb)(t)));return JSON.parse(t)}catch(n){return null==t||t(),e}}class Er{constructor(e,t,n=(0,de.Tb)()){this._rpcMessageName=e,this._message=t,this._telemetry=n,this.inbound=new xe.y((e=>{const t=(t,n,r)=>{const i=JSON.stringify([r.tabId,r.frameId,t.clientId]);e.next({clientId:i,data:t.data})};return this._message.on(this._rpcMessageName,t),()=>this._message.off(this._rpcMessageName,t)})),this.outbound=e=>{const{tabId:t,frameId:n,clientId:r}=Er.decodeClientId(e.clientId);this._message.sendTo({tabId:t,frameId:n},this._rpcMessageName,{clientId:r,data:xr(e.data,(()=>{var e;return null===(e=this._telemetry)||void 0===e?void 0:e.serializeTransportMsgFailed()}))})}}static decodeClientId(e){const[t,n,r]=JSON.parse(e);return{tabId:t,frameId:n,clientId:r}}}function kr(e){const t=new Map;for(const{isFree:n,cardLayout:{group:r}}of e){t.has(r)||t.set(r,{lensName:r,free:0,premium:0});const e=t.get(r);e&&(e[n?"free":"premium"]+=1)}return Array.from(t.values()).sort(((e,t)=>t.premium-e.premium))}var Cr=__webpack_require__(95404);const Tr={TOOLBAR:{DEFAULT:{light:"./src/icon/toolbar/icon",dark:"./src/icon/toolbar/icon",universal:"./src/icon/toolbar/icon"},SUPERHUMAN_GO:{light:"./src/icon/toolbar/superhuman_go/light/icon",dark:"./src/icon/toolbar/superhuman_go/dark/icon",universal:"./src/icon/toolbar/superhuman_go/universal/icon"}},SAFARI:{PREFIX:"./src/icon/toolbar/safari/icon",POSTFIX:"-safari"}};function Sr(e,t){chrome.runtime.lastError?t(chrome.runtime.lastError):e()}class Rr{constructor(){this._log=l.Y.create("extension-api.managed-storage.validator")}validate(e,t){switch(e){case"GrammarlyEnrollmentToken":return"string"==typeof t&&t.length>0&&/^[a-z0-9_-]+$/i.test(t);case"GrammarlyBlockedClients":case"GrammarlyBlockedDomains":return"string"==typeof t;case"GrammarlyConfidentialModeEnabled":case"GrammarlyDlpEnabled":return"boolean"==typeof t;case"GrammarlyExtensionMode":return"string"==typeof t&&("limited"===t||"full"===t);default:return this._log.warn(`Unknown key: ${e}`),!1}}}class Ir{constructor(){this._log=l.Y.create("extension-api.managed-storage.chrome"),this._validator=new Rr}get(e){return yr.O.fromPromise(Promise.race([new Promise((t=>{chrome.storage.managed.get(e,(n=>{Sr((()=>{const r=n[e];void 0===r||this._validator.validate(e,r)?t([r]):(this._log.warn(`Invalid value for "${e}": ${JSON.stringify(n[e])}`),t([void 0]))}),(n=>{this._log.error(`Could not get "${e}"`,n),t([void 0,n])}))}))})),new Promise((t=>{setTimeout((()=>{this._log.error(`Manage storage timeout to get "${e}"`),t([void 0,new Error("Manage storage timeout to get access")])}),3e3)}))]))}}var Ar;!function(e){class t{constructor(e,t){this._port=e,this._getErrorMessage=t}onMessage(e){this._port.onMessage.addListener(e)}onDisconnect(e){this._port.onDisconnect.addListener((()=>e(this._getErrorMessage())))}postMessage(e){this._port.postMessage(e)}}e.PortImpl=t,e.createPort=function(e,n){return(0,Re.fQ)(e.runtime.connectNative)?new t(e.runtime.connectNative(n),(()=>{var t;return null===(t=e.runtime.lastError)||void 0===t?void 0:t.message})):null}}(Ar||(Ar={}));class Or{constructor(e,t=l.Y.create("ChromeMV3SessionStorageApiImpl")){this._chromeInstance=e,this._logger=t,this.kind="chrome-mv3",this.get=e=>yr.O.create(((t,n)=>{this._chromeInstance.storage.session.get(e,(e=>{Sr((()=>t(e)),n)}))})),this.set=e=>yr.O.create(((t,n)=>{this._chromeInstance.storage.session.set(e,(()=>{Sr(t,n)}))})),this.getAll=()=>yr.O.create(((e,t)=>{this._chromeInstance.storage.session.get(null,(n=>{Sr((()=>e(n)),t)}))})),this.remove=e=>yr.O.create(((t,n)=>{this._chromeInstance.storage.session.remove(e,(()=>{Sr(t,n)}))})),this.removeAll=()=>yr.O.create(((e,t)=>{this._chromeInstance.storage.session.clear((()=>{Sr(e,t)}))})),this.onChange=e=>{const t=()=>{this.getAll().then((t=>e(t)))};return this._chromeInstance.storage.session.onChanged.addListener(t),()=>{try{this._chromeInstance.storage.session.onChanged.removeListener(t)}catch(e){this._logger.error("error removing session storage listener",e)}}},this.allowCStoUseSessionStorage=()=>yr.O.create(((e,t)=>{var n,r,i,o,s,a;null===(i=null===(r=null===(n=chrome.storage)||void 0===n?void 0:n.session)||void 0===r?void 0:r.setAccessLevel)||void 0===i||i.call(r,{accessLevel:null!==(a=null===(s=null===(o=chrome.storage)||void 0===o?void 0:o.AccessLevel)||void 0===s?void 0:s.TRUSTED_AND_UNTRUSTED_CONTEXTS)&&void 0!==a?a:"TRUSTED_AND_UNTRUSTED_CONTEXTS"},(()=>{Sr(e,t)}))}))}}class Fr{constructor(){this.kind="memory",this._data={},this._listeners=[],this.get=e=>yr.O.sync((()=>(Array.isArray(e)?e:[e]).reduce(((e,t)=>({...e,[t]:this._data[t]})),{}))),this.set=e=>yr.O.sync((()=>{this._data={...this._data,...e},this._callListeners()})),this.getAll=()=>yr.O.sync((()=>this._data)),this.remove=e=>yr.O.sync((()=>{(Array.isArray(e)?e:[e]).forEach((e=>{e in this._data&&delete this._data[e]})),this._callListeners()})),this.removeAll=()=>yr.O.sync((()=>{this._data={},this._callListeners()})),this.onChange=e=>(this._listeners.push(e),()=>this._listeners.splice(this._listeners.indexOf(e),1))}_callListeners(){this._listeners.forEach((e=>e(this._data)))}}class Pr{constructor(e,t){this._chrome=e,this._manifestVersion=t,this.kind="web-extension",this.executeScript=(e,t,n)=>yr.O.create(((r,i)=>{"3"!==this._manifestVersion?this._chrome.tabs.executeScript(t,{file:e,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>Nr(null==e?void 0:e[0],r,i))):this._chrome.scripting.executeScript({files:[e],target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return Nr(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,r,i)}))})),this.executeFunction=(e,t,n)=>yr.O.create(((r,i)=>{"3"!==this._manifestVersion?this._chrome.tabs.executeScript(t,{code:`(${e.toString()})()`,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>Nr(null==e?void 0:e[0],r,i))):this._chrome.scripting.executeScript({func:e,target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return Nr(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,r,i)}))})),this.insertCSS=(e,t,n,r)=>yr.O.create(((i,o)=>{"3"!==this._manifestVersion?this._chrome.tabs.insertCSS(e,{file:t,code:n,matchAboutBlank:!0,...r?{frameId:Number(r)}:{}},(()=>Nr(void 0,i,o))):this._chrome.scripting.insertCSS({target:{tabId:e,...r?{frameIds:[Number(r)]}:{}},files:t?[t]:void 0,css:n},(()=>Nr(void 0,i,o)))}))}open(e,t){return yr.O.create(((n,r)=>{this._chrome.tabs.create({url:e,active:t},(e=>{Sr((()=>n(e)),r)}))}))}create(e){return yr.O.create(((t,n)=>{this._chrome.tabs.create(e,(e=>{Sr((()=>t(e)),n)}))}))}remove(e,t){return yr.O.fromPromise(this._chrome.tabs.remove(e,t))}updateCurrent(e){return yr.O.create(((t,n)=>{this._chrome.tabs.update({url:e},(e=>{Sr((()=>t(e)),n)}))}))}getActiveTab(){return yr.O.create(((e,t)=>{const n=this._chrome.tabs;n.query({active:!0,lastFocusedWindow:!0},(r=>{Sr((()=>{r&&r.length?e(r[0]):n.query({active:!0},(n=>{Sr((()=>{e(n[0])}),t)}))}),t)}))}))}getAllTabs(){return yr.O.create(((e,t)=>this._chrome.tabs.query({},(n=>Sr((()=>e(n)),t)))))}getActiveTabUrl(){return yr.O.create(((e,t)=>this.getActiveTab().then((n=>Sr((()=>e(n&&n.url)),t)))))}getActiveTabZoom(){return yr.O.create(((e,t)=>{this.getActiveTab().then((n=>{if(!n||!n.id)return e(void 0);this._chrome.tabs.getZoom(null==n?void 0:n.id).then((n=>{Sr((()=>e(n)),t)}))}))}))}_onActiveTabChange(e){this._chrome.tabs.onActivated.addListener((t=>this._chrome.tabs.get(t.tabId,e))),this._chrome.tabs.onUpdated.addListener(((t,n)=>{this.getActiveTab().then((r=>{r&&r.id===t&&(n.url||n.favIconUrl||"complete"===n.status||n.title)&&this._chrome.tabs.get(t,e)}))}))}_onTabChangeError(e,t,n){n(e),"Tabs cannot be edited right now (user may be dragging a tab)."===(null==e?void 0:e.message)&&setTimeout((()=>{this.getActiveTab().then((e=>{Sr((()=>t(e)),n)}))}),100)}onActiveTabChange(e,t){const n=n=>{Sr((()=>!!n&&e(n)),(n=>this._onTabChangeError(n,(t=>!!t&&e(t)),t)))};this._onActiveTabChange(n),this._chrome.windows.onFocusChanged.addListener((e=>this._chrome.tabs.query({active:!0,windowId:e,lastFocusedWindow:!0},(([e])=>n(e))))),this.getActiveTab().then(n)}onWindowOrActiveTabChange(e,t){const n=n=>{Sr((()=>e(n)),(n=>this._onTabChangeError(n,(t=>e(t)),t)))};this._onActiveTabChange(n),this._chrome.windows.getCurrent().then((r=>{Sr((()=>{r.focused?this.getActiveTab().then(n):e(void 0)}),(n=>{t(n),e(void 0)}))})),this._chrome.windows.onFocusChanged.addListener((t=>{this._chrome.windows.getCurrent().then((r=>{r.focused?this._chrome.tabs.query({active:!0,windowId:t,lastFocusedWindow:!0},(([e])=>n(e))):e(void 0)}))})),this._chrome.windows.onRemoved.addListener((()=>{this._chrome.windows.getCurrent().then((t=>{t.focused?this.getActiveTab().then(n):e(void 0)}))}))}reload(e){return yr.O.create(((t,n)=>{const r=()=>Sr((()=>t()),n);e.id?this._chrome.tabs.reload(e.id,{},r):this._chrome.tabs.reload(r)}))}closeCurrentTab(){return yr.O.create(((e,t)=>{this.getActiveTab().then((n=>{n&&n.id&&this._chrome.tabs.remove(n.id,(()=>{Sr((()=>e()),t)}))}))}))}focusTab(e){return yr.O.create(((t,n)=>{this._chrome.tabs.update(e,{highlighted:!0},(()=>{Sr((()=>t()),n)}))}))}sendMessageToTab(e,t,n){return yr.O.create(((r,i)=>{this._chrome.tabs.sendMessage(t,e,{frameId:n},(()=>{Sr((()=>r()),i)}))}))}get onUpdated(){return this._chrome.tabs.onUpdated}get onRemoved(){return this._chrome.tabs.onRemoved}}function Nr(e,t,n){(0,vr.s6)()?n((0,vr.s6)()):t(e)}var Lr=__webpack_require__(87998);const Dr=e=>e.split(".")[0],Ur=(new Set(["google chrome","microsoft edge","samsung internet","opera"]),(e=self.navigator.userAgent)=>{const t=new Lr.UAParser(e).getResult();return"WebKit"===t.browser.name?(e=>{const t=new Lr.UAParser(e).getResult(),n=/Version\/(\d+)/.exec(e);return{browserName:"Safari",browserVersion:null==n?void 0:n[1],osName:t.os.name||"unknown",osVersion:t.os.version?Dr(t.os.version):void 0,userAgent:e}})(e):{browserName:t.browser.name||"unknown",browserVersion:t.browser.version?Dr(t.browser.version):void 0,osName:t.os.name||"unknown",osVersion:t.os.version?Dr(t.os.version):void 0,userAgent:e}});class Mr{get button(){const e=this._action;return{kind:"web-extension",setBadge(t){e.setBadgeText({text:t})},setIconByName(t,n,r="universal"){const{prefix:i,postfix:o}=function(e,t,n="universal"){return{prefix:t?Tr.TOOLBAR.SUPERHUMAN_GO[n]:Tr.TOOLBAR.DEFAULT[n],postfix:e?"-"+e:""}}(t,n,r);e.setIcon({path:{16:`${i}16${o}.png`,32:`${i}32${o}.png`}})},setTitle(t){e.setTitle({title:t})},setBadgeBackgroundColor(t){e.setBadgeBackgroundColor({color:t})}}}get baseUri(){var e;return null!==(e=this._baseUrl)&&void 0!==e?e:chrome.runtime.getURL("")}getBrowserInfo(e=self.navigator.userAgent){return Ur(e)}constructor(e,t,n,r){var i;this.preferences=e,this.message=t,this.tabs=n,this._manifestVersion=r,this._isManifestV3="3"===this._manifestVersion,this._action=this._isManifestV3?chrome.action:chrome.browserAction,this.managedStorage=new Ir,this.sessionStorage=this._isManifestV3&&(null===(i=chrome.storage)||void 0===i?void 0:i.session)?new Or(chrome):new Fr,this.thirdPartyExtensionsInstalled={},this.notification={kind:"web-extension",create:e=>yr.O.create(((t,n)=>{const r=chrome.notifications,i=(0,vr.M8)();r.create(i,Object.assign({type:"basic"},e),(()=>{Sr((()=>{const e=new xe.y((e=>{const t=t=>t===i&&e.next(t);return r.onClicked.addListener(t),()=>r.onClicked.removeListener(t)})),n=new xe.y((e=>{const t=(t,n)=>t===i&&e.next({id:t,buttonIndex:n});return r.onButtonClicked.addListener(t),()=>r.onButtonClicked.removeListener(t)})),o=new xe.y((e=>{const t=(t,n)=>t===i&&e.next({id:t,byUser:n});return r.onClosed.addListener(t),()=>r.onClosed.removeListener(t)}));t({id:i,click:e,buttonClick:n,close:o})}),n)}))})),clear:e=>yr.O.create(((t,n)=>{chrome.notifications.clear(e,(e=>{Sr((()=>t(e)),n)}))}))},this.cookies={kind:"web-extension",get:e=>yr.O.create(((t,n)=>chrome.cookies.get(e,(e=>Sr((()=>t(e)),n))))),remove:e=>yr.O.fromPromise(new Promise(((t,n)=>chrome.cookies.remove(e,(()=>Sr((()=>t(null)),n)))))),getAll:e=>yr.O.create(((t,n)=>chrome.cookies.getAll(e,(e=>Sr((()=>t(e)),n))))),set:e=>yr.O.create(((t,n)=>chrome.cookies.set(e,(e=>Sr((()=>t(e)),n))))),watch(e,t){const n=n=>{const{cookie:r,cause:i}=n;!r||!r.name||e.path&&e.path!==r.path||e.name!==r.name||e.domain&&-1===r.domain.indexOf(e.domain)||("explicit"===i&&t(r),"expired_overwrite"===i&&t())};return chrome.cookies.onChanged.addListener(n),()=>chrome.cookies.onChanged.removeListener(n)},getChanges(e){return new xe.y((t=>this.watch(e,(e=>t.next(e)))))}},this.management={uninstallSelf(){chrome.management.uninstallSelf()}},this._baseUrl=(0,Re.DV)((()=>chrome.runtime.getURL("")),(e=>null)),this.permissions=chrome.permissions?{watchAdded:e=>{chrome.permissions.onAdded.addListener(e)},added:new xe.y((e=>{const t=t=>{e.next(t)};return chrome.permissions.onAdded.addListener(t),()=>{chrome.permissions.onAdded.removeListener(t)}})),watchRemoved:e=>{chrome.permissions.onRemoved.addListener(e)},removed:new xe.y((e=>{const t=t=>{e.next(t)};return chrome.permissions.onRemoved.addListener(t),()=>{chrome.permissions.onRemoved.removeListener(t)}})),getAll:yr.O.fromAsync((()=>new Promise((e=>chrome.permissions.getAll(e))))),request:yr.O.fromAsync((e=>new Promise(((t,n)=>chrome.permissions.request(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)})))))),contains:yr.O.fromAsync((e=>new Promise(((t,n)=>{chrome.permissions.contains(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)}))}))))}:void 0,this.fetchBlocklistConfig=()=>yr.O.noop,this.getUrl=e=>this._baseUrl?this._baseUrl+e:chrome.runtime.getURL(e),this.fetchInternalResource=(e,t)=>yr.O.fromPromise(fetch(this.getUrl(e)).then((e=>"json"===t?e.json():e.arrayBuffer()))),this.openUrl=e=>this.tabs.open(e,!0),this.openSubscriptionPage=e=>function(e,t){var n,r;const i=[(0,Cr.QN)("app_type","extension"),(0,Cr.QN)("browser",(0,u.qs)()),...e.currentAlerts?[(0,Cr.QN)("lensedAlerts",(o=kr(e.currentAlerts),btoa(JSON.stringify(o))))]:[],...(0,Cr.$V)({medium:"internal",campaign:e.utmCampaign,source:null!==(n=e.utmSource)&&void 0!==n?n:e.isAnonymous?"signupHook":"upHook"})];var o;const s=null!==(r=e.overrideUrl)&&void 0!==r?r:(0,u.Um)().planComparison,a=new URLSearchParams(new URL(s).search),c=(0,Cr.sC)(s,i.filter((e=>!a.has(e.key))));t.open(c,!0)}(e,this.tabs),this.openSidePanel=e=>{var t;const n=(0,de.Tb)().sidePanel;if(!(null===(t=chrome.sidePanel)||void 0===t?void 0:t.open)){const e="chrome.sidePanel?.open is not available";return n.openFail(e),Promise.reject(new Error(e))}const r=Er.decodeClientId(e).tabId,i=Number(r);if(!r||isNaN(i)){const e=`Invalid tabId when open side panel: '${r}'`;return n.openFail(e),Promise.reject(new Error(e))}return chrome.sidePanel.open({tabId:i}).catch((e=>{throw n.openFail(e.message),e}))},this.isSidePanelSupported=()=>{var e;return Promise.resolve(!!(null===(e=chrome.sidePanel)||void 0===e?void 0:e.open))},this.setSidePanelEnabled=e=>{var t;const n=(0,de.Tb)().sidePanel;if(!(null===(t=chrome.sidePanel)||void 0===t?void 0:t.setOptions)){const e="chrome.sidePanel?.setOptions is not available";return n.openFail(e),Promise.reject(new Error(e))}return chrome.sidePanel.setOptions({enabled:e}).catch((e=>{throw n.openFail(e.message),e}))},this.openPopup=()=>{var e;const t=(0,de.Tb)().sidePanel;if(!(null===(e=chrome.action)||void 0===e?void 0:e.openPopup)){const e="chrome.action.openPopup is not available";return t.openFail(e),Promise.reject(new Error(e))}return chrome.action.openPopup().catch((e=>{throw t.openPopupFail(e.message),e}))},this.setPopupEnabled=(e,t="src/popup.html")=>{var n;const r=(0,de.Tb)().sidePanel;if(!(null===(n=this._action)||void 0===n?void 0:n.setPopup)){const e="chrome.action.setPopup is not available";return r.openFail(e),Promise.reject(new Error(e))}const i=e?t:"";return this._action.setPopup({popup:i}).catch((t=>{throw r.openFail(`Failed to ${e?"enable":"disable"} popup: ${t.message}`),t}))},this._iconClickListener=null,this.setIconClickHandler=e=>{var t;const n=(0,de.Tb)().sidePanel;if(!(null===(t=chrome.action)||void 0===t?void 0:t.onClicked)){const e="chrome.action.onClicked is not available";return n.openFail(e),Promise.reject(new Error(e))}return this._iconClickListener&&(chrome.action.onClicked.removeListener(this._iconClickListener),this._iconClickListener=null),e&&(this._iconClickListener=t=>{void 0!==t.id?e(t.id):n.openFail("Tab ID is undefined in icon click handler")},chrome.action.onClicked.addListener(this._iconClickListener)),Promise.resolve()},this.isExtensionUrl=(e,t)=>this.getUrl(e)===t,this.reload=()=>chrome.runtime.reload(),this.i18n={detectLanguage:e=>yr.O.create(((t,n)=>chrome.i18n.detectLanguage(e,(e=>Sr((()=>t(e)),n))))),getUILanguage:()=>chrome.i18n.getUILanguage(),getAcceptLanguages:()=>yr.O.create(((e,t)=>chrome.i18n.getAcceptLanguages((n=>Sr((()=>e(n)),t)))))},this.identity=chrome.identity,this.initCodeSplittingListener=()=>{return chrome.runtime.onMessage.addListener((e=this.tabs.executeScript,(n,r,i)=>{if(n&&"CODE_SPLITTING_INJECT"===n.type&&n.file&&r&&r.tab&&null!=r.tab.id){const o=n.file,s=Number(r.tab.id);e(o,s,r.frameId).catch((e=>{null==t||t(o,s,e)})),i()}}));var e,t},this.isExtensionInstalled=yr.O.fromAsync((async(e,t=!1)=>{if(!t&&void 0!==this.thirdPartyExtensionsInstalled[e])return this.thirdPartyExtensionsInstalled[e];if(!(0,u.L6)())return!1;const n=Mr.thirdPartyExtensionsData[e].publicResources.reduce(((t,n)=>((0,u.kD)()&&t.push(`chrome-extension://${Mr.thirdPartyExtensionsData[e].MSStoreId}${n}`),t.concat(`chrome-extension://${Mr.thirdPartyExtensionsData[e].id}${n}`))),[]);return(0,re.Wp)(n.map((e=>fetch(e)))).then((e=>!0)).catch((e=>!1))})),this.setUninstallURL=e=>chrome.runtime.setUninstallURL(e),this.connectNative=e=>Ar.createPort(chrome,e),this.indexedDB=self.indexedDB}}Mr.thirdPartyExtensionsData={mseditor:{id:"gpaiobkfhnonedkhhfjpmhdalgeoebfa",MSStoreId:"hokifickgkhplphjiodbggjmoafhignh",publicResources:["/fonts/fabric-icons.css"]},office:{id:"ndjpnladcallmjemlbaebfadecfhkepb",MSStoreId:"gggmmkjegpiggikcnhidnjjhmicpibll",publicResources:["/fonts/fabric-icons.css"]}},async function(e,d=!0,h,f=!1){Kn.checkScriptInitStart();const p=(0,S.ge)(),m=pe.Xb.init({...e,skipInitExtensionApi:d,skipWriteLogsToBackupStorage:!0}),_=l.Y.create("universal.check");if("text/html"!==document.contentType)return _.info("not a html page, skip integration check"),void(0,de.Tb)().skipIntegrationForNonHtmlPage();const b=ye(m.message);cr(m.bgRpc.api.getRecentAccount),(0,Ce._p)(m.experimentClient).then((e=>{e&&(0,Ce.g8)()}));const v=function(e,t,n){const r=performance.now();return e.fetchTreatments().then((()=>{const e=performance.now()-r;if(e>n){const n=Math.ceil(e/1e3),r=n>60?60:n;t.fetchTimeout(r)}else t.fetchSuccess()})).catch((e=>{t.fetchFailed((0,Oe.H)(e)?e.message:String(e))}))}(m.experimentClient,{fetchSuccess:(0,de.Tb)().checkScript.fetchTreatmentsSuccess,fetchFailed:(0,de.Tb)().checkScript.fetchTreatmentsFail,fetchTimeout:(0,de.Tb)().checkScript.fetchTreatmentsTimeout},ar);await Promise.race([v,(0,re.gw)(ar)]);const k=new tr(m.csShareStorage,(()=>{(null!=h?h:m.bgRpc.api.loadContentScript)(),sr()}),f),T=new be(p),R=rr.init(m.browserApi,m.message,m.config,p),{viewStoreLite:I,persistentStoreLite:O}=((e,t)=>{const n=C.h.create({}),r={getAll:async()=>await a.getAll(),get:async e=>await a.get(e),patch:async e=>await a.set(e),changes:(a=e.browserApi.preferences).changes};var a;const c={...r,view:n.view.bind(n)},u=(0,s.a)([(0,Ie.D)(r.changes).pipe((0,o.O)(null),(0,ke.b)(200),(0,i.w)((()=>r.getAll()))),(0,Ee.D)((0,Re.XD)(5,A.Xd(2),(()=>e.bgRpc.api.getPageConfig(t,self.location.href))).catch((e=>null))).pipe((0,o.O)(null)),new xe.y((e=>{if("undefined"==typeof chrome||!chrome.storage)return void e.next(!1);chrome.storage.local.get([Ce.jG],(t=>{e.next(!0===t[Ce.jG])}));const t=(t,n)=>{"local"===n&&t[Ce.jG]&&e.next(!0===t[Ce.jG].newValue)};return chrome.storage.onChanged.addListener(t),()=>{chrome.storage.onChanged.removeListener(t)}})).pipe((0,o.O)(!1))]).pipe((0,i.w)((([e,r,i])=>{var o,s,a,c,u,l;const d=null!==(s=null===(o=e.extensionSettings)||void 0===o?void 0:o[t])&&void 0!==s?s:{},h=(null===(a=null==d?void 0:d.enabled)||void 0===a||a)&&(null===(c=null==r?void 0:r.enabled)||void 0===c||c)&&!i;return n.set(e),(0,Ee.D)([{user:null!==(u=e.user)&&void 0!==u?u:Te.n.defaultUser,settings:e.extensionSettings,dynamicConfig:null!==(l=e.dynamicConfig)&&void 0!==l?l:Se.cS,dapi:e.dapi,enabled:h,isGrammarlyEditor:null==r?void 0:r.grammarlyEditor}])})));return{persistentStoreLite:c,viewStoreLite:u}})(m,p),F=new g({experimentClient:m.experimentClient}),P=(0,Re.hz)((e=>{(0,de.Tb)().sendFemetricsRate("checkScriptInitialized",{domain:(0,Ae.Cg)(),isExtensionEnabled:e,isIframe:(0,u.n_)()},["firstInstall","registrationDate"])})),N=I.pipe((0,t.U)((e=>e.user)),(0,n.x)(((e,t)=>!((e,t)=>{if(e&&t){if(e.id!==t.id)return!0;if(e.premium!==t.premium)return!0}return!1})(e,t))),(0,r.T)(1),(0,i.w)((()=>m.experimentClient.fetchTreatments())),(0,o.O)(null)),L=m.experimentClient.isGateEnabled(c.D.FetchExperimentAfterUserChange),D=(0,s.a)([I,L?N:(0,a.of)(null)]).subscribe((([e,t])=>{var n,r,i,o;_.debug("check script state is updated",e);const s=null===(n=e.settings)||void 0===n?void 0:n.common;k.updateState(null===(i=null===(r=e.user)||void 0===r?void 0:r.anonymous)||void 0===i||i,e.enabled,null!==(o=null==s?void 0:s.enabledDefs)&&void 0!==o&&o,X.q.isIntegrationEnabled(s,p,e.dynamicConfig),(0,x.PM)(p,e.dynamicConfig,s),(0,E.YI)(p,null==s?void 0:s.humanWritingReport,e.dynamicConfig.hwr),m.productMetricsCSClient,e.dynamicConfig),T.updateState(p,e.dynamicConfig,e.enabled,s),(0,y.kA)().then((t=>{var n,r;F.update((e=>{const{isGrammarlyEditor:t,isDesktopIntegrationEnabled:n,domainEnabled:r}=e;return!t&&!n&&!1!==r})({isGrammarlyEditor:e.isGrammarlyEditor,isDesktopIntegrationEnabled:null==s?void 0:s.isDesktopIntegrationEnabled,domainEnabled:null===(r=null===(n=e.settings)||void 0===n?void 0:n[p])||void 0===r?void 0:r.enabled})&&(0,w.Y)(s,t))})),P(e.enabled)})),U=[k,R,T,F];b&&U.push(b),m.message.once("contentScript-disconnected",(()=>{_.info("Content script disconnected"),D.unsubscribe(),m.csShareStorage.clean(),U.forEach((e=>e&&e.dispose()))})),m.message.once(we.B.Kind.disableOnTab,(()=>{T.dispose()})),fe.B.initSendLogsToPopupHandler(m),or.push(fe.B.initKeyboardShortcutHandler(m)),Kn.checkScriptInitEnd(m.bgRpc),(e=>{if(self.location.href.includes("grammarly.com/extension-success")||self.location.href.includes((0,u.Um)().superhumanGoWelcome.production)){const t=document.getElementById("click-to-run");t&&(t.onclick=()=>{var t,n;confirm("Always allow Grammarly to run on every website")?(e.api.enableClickToRunOnAllWebsites(),null===(t=document.getElementById("click-to-run-success"))||void 0===t||t.click()):null===(n=document.getElementById("click-to-run-fail"))||void 0===n||n.click()})}})(m.bgRpc);const M=await ae.create(O.view(),m.bgRpc.api,m.browserApi,m.csShareStorage);or.push(M),ir&&sr(),_.info("Check script initialization complete")}({browser:"chrome",extensionType:"chromiumWebExtension",deploymentType:"regular",browserApi:function(){const e=function(){var e;const t=new br.x;return null===(e=chrome.storage)||void 0===e||e.onChanged.addListener(((e,n)=>{"local"===n&&t.next(e)})),{...(n=chrome,{get:e=>yr.O.create(((t,r)=>n.storage.local.get(e,(e=>{Sr((()=>t(e)),r)})))),set:e=>yr.O.create(((t,r)=>n.storage.local.set(e,(()=>{Sr(t,r)})))),getAll:()=>yr.O.create(((e,t)=>n.storage.local.get(null,(n=>{Sr((()=>e(n)),t)})))),remove:e=>yr.O.create(((t,r)=>n.storage.local.remove(e,(()=>{Sr(t,r)})))),removeAll:()=>yr.O.create(((e,t)=>n.storage.local.clear((()=>{Sr(e,t)}))))}),changes:t};var n}(),{manifestVersion:t,tabs:n}={manifestVersion:"3",tabs:new Pr(chrome,"3")},r=new mr.HX((e=>new _r(chrome,e)),(0,mr.Dl)((()=>e.getAll())),chrome.runtime.id,chrome.runtime.onMessage,(e=>chrome.runtime.sendMessage(e)));return new Mr(e,r,n,t)}(),createExperimentClient:e=>new ur.ExperimentClient(new fr.i(e),pr,new hr.w(e),gr,dr.F)})})();