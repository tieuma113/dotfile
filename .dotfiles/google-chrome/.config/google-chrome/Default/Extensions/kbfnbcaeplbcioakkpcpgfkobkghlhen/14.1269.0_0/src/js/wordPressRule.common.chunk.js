(self.webpackChunk=self.webpackChunk||[]).push([[661],{8975:(e,t,o)=>{o.r(t),o.d(t,{Wordpress:()=>I,testOnly:()=>H});var i=o(90023),r=o(84714),n=o(64271),a=o(36344),d=o(14969),l=o(29479),s=o(84178),c=o(59179),p=o(12518),u=o(19659),m=o(31394),g=o(68418),f=o(82960),b=o(99402),E=o(44287),h=o(41050),y=o(22234),v=o(78335),T=o(22086),W=o(86076),x=o(55673),k=o(85452),w=o(96075),P=o(15838),L=o(3670),N=o(33357),C=o(90595);const M=(0,T.q)("Wordpress.editorCanvas",(e=>{var t;if(!(null===(t=e.experimentClient)||void 0===t?void 0:t.isGateEnabled(C.K.WordPressGutenbergIframeIntegration)))return{};const o="IFRAME"===e.field.tagName?e.field:null;return"editor-canvas"===(null==o?void 0:o.name)&&o.contentDocument?{integrationName:"WPEditorCanvasIframe",customValidationRules:[{ruleName:"alwaysPass",match:()=>!0}],createLayoutOptions:{skipIframeBodyScroller:!0},textMap:{createFieldTextMap:e=>k.Z.create(e,{overrideFilterNode:(e,t)=>!k.Z.ignoredTags.has(e.tagName)&&k.Z.isNotHiddenNode(e),andFilterNodeOutput:(t,o)=>!!o.outputConsidered||(t===e||!!(t instanceof HTMLElement&&t.isContentEditable)&&"true"!==t.getAttribute("data-is-placeholder-visible"))})}}:{}}));var O=o(94817);const S=y.T.textarea("Wordpress.newWPEditorTitle",(e=>({integrationName:"WPEditorTitle",validate:(e,t)=>(0,x.O)(e.field,e,t,[{ruleName:"isWordpressEditorTitle",match:e=>!!e.closest(".editor-post-title__block")}]),createLayout:()=>new E.A7(e.field,{gbuttonMinPadding:w.rR})}))),A={kind:P.A.editable,name:"Wordpress.gutenbergEditorEmbeddedTitle",match:e=>{const t=e.field.closest(".edit-post-visual-editor__post-title-wrapper");return t instanceof HTMLElement?y.T.contentEditable("Wordpress.gutenbergEditorEmbeddedTitle",(e=>({integrationName:"WPEditorEmbeddedTitle",target:t,matchCheckOverride:()=>!0,createLayout:()=>new E.A7(t,{highlightsLayoutOptions:{heightOffset:-6}})}))).match(e):p.t$(P.x.fieldSkippedError({reason:"not a Gutenberg block editor embedded title",integrationName:"Wordpress.gutenbergEditorEmbeddedTitle",field:e.field}))}},B=(e,t,o)=>({customGbuttonPositioning:{injectionElement:e,injectionStyle:{bottom:`${t}px`,right:`${o}px`,zIndex:b.op.toString()},createPositionStyleBehavior:e=>e.pipe(c.U((e=>({position:"absolute",width:"auto",height:"auto",pointerEvents:"all",right:`${e.left}px`,top:`${e.top}px`})))),calculateMetrics:(e,i,r)=>{const n=g.p8.create({top:e.size.height+r.top-t+m.V.gButtonMaxSize,left:e.size.width-r.left-o});return{offset:n,page:g.Cv.fromOffset(n,g.Cv.fromClient(e.client,{top:i.scrollY,left:i.scrollX}),{top:0,left:0}),client:g.Ir.create(g.E9.plus(e.client,n)),effectivePadding:{top:0,right:0,bottom:0,left:0},size:m.V.gButtonMaxSize}}}}),F=e=>{const t=e.closest(".wp-full-overlay-sidebar");if(t instanceof HTMLElement)return B(t,88,24);const o=e.closest(".editor-styles-wrapper");return o instanceof HTMLElement?{createGbuttonShiftBehavior:()=>(0,r.of)({left:0,top:-10}),innerElementsField:o}:void 0},z={kind:P.A.editable,name:"Wordpress.newWPEditorBody",match:e=>{const t=e.field.closest(".wp-block-post-content")||e.field.closest(".editor-block-list__layout")||e.field.closest(".block-editor-block-list__layout")||e.field.closest(".is-root-container");return t instanceof HTMLElement?y.T.contentEditable("Wordpress.newWPEditorBody",(e=>({integrationName:"WPEditorBody",target:t,matchCheckOverride:()=>!0,createLayout:()=>new E.A7(t,F(t)),textMap:{createFieldTextMap:e=>k.Z.create(e,{andFilterNodeOutput:(e,t)=>t.outputConsidered||"textbox"===e.getAttribute("role")&&"true"!==e.getAttribute("data-is-placeholder-visible")||e instanceof HTMLElement&&e.isContentEditable})}}))).match(e):p.t$(P.x.fieldSkippedError({reason:"not a Gutenberg block editor body",integrationName:"Wordpress.newWPEditorBody",field:e.field}))}};var I;!function(e){const t=(0,T.q)("Wordpress.pageAndPostEditor",(e=>({integrationName:"PageAndPostEditorIframe",expiration:(e,t)=>(0,n.T)((0,v.Jj)(t),(f.z.createShared(e)||(0,a.c)()).pipe((0,d.P)((e=>0===e.width||0===e.height)),(0,l.h)(void 0))).pipe((0,s.q)(1)),createLayoutOptions:{field:e.field,skipIframeBodyScroller:!0}}))),o=e=>{return(0,L.$W)({andCanExecute:e,name:"Wordpress"},[S,A,z,M,W.P.generic(),y.T.contentEditable("Wordpress",(()=>({createLayout:e=>new E.A7(e)}))),t,(o=y.T.textarea("Wordpress",(()=>({createLayout:e=>new h.K(e)}))),y.T.namedFieldIntegrationRule("textareaExceptHtmlView",((e,t)=>(0,i.zG)((0,x.O)(e.field,e,t,[{ruleName:"isTinymce",match:e=>e.classList.contains("tinymce")}]),u.VS((()=>o.match(e))))))),(0,T.q)("Wordpress"),N.k.iframeHostRule]);var o};e.page=o((e=>(0,O.$)(e.domain,e.url))),e.pageFuzzy=o((e=>(0,O.C)(e.doc)))}(I||(I={}));const H={gutenbergEditorBody:z,gutenbergEditorEmbeddedTitle:A,gutenbergEditorTextareaTitle:S,getLayoutOptionsForGutenbergEditorBodyElement:F,getLayoutOptionsForScrollableEditor:B}}}]);