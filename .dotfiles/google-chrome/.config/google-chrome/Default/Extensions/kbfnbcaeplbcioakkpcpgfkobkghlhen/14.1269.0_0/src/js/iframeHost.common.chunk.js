(self.webpackChunk=self.webpackChunk||[]).push([[1090],{79608:(e,t,n)=>{n.d(t,{B:()=>s});var s,i=n(12518),r=n(58303);!function(e){var t=e.NAME_LENGTH_LIMIT=30,n=e.CONTENT_LENGTH_LIMIT=5e3;e.validate=(e,s,p)=>{const a=((e,n)=>0===e.trim().length?r.G(n.nameEmpty):e.length>t?r.G(n.nameTooLong):r.YP)(e,p),o=((e,t)=>0===e.trim().length?r.G(t.textEmpty):e.length>n?r.G(t.textTooLong):r.YP)(s,p);return r.Wi(a)&&r.Wi(o)?i.F2(void 0):i.t$({nameError:a,contentError:o})}}(s||(s={}))},53025:(e,t,n)=>{n.d(t,{Yx:()=>a,pj:()=>p,sz:()=>r});var s=n(36807),i=n(41587);const r=(e,t)=>{const n=e.ops.map((e=>{if((0,i.w6)(e))return t?((e,t)=>({insert:{currentUser:{userEmail:e.email,userFirst:e.firstName,userLast:e.lastName||"",...t.insert.currentUser}}}))(t,e):e;if((0,i.aC)(e)||(0,i.ZD)(e)){const t={insert:"]"};return[{insert:"["},{...e},t]}return e})).flat();return new s.i(n)},p=(e,t)=>({start:e-1,end:e+t.length+1}),a=e=>`[${e}]`},47065:(e,t,n)=>{n.r(t),n.d(t,{createComponentProxy:()=>F,deserializeCard:()=>Z,serializeCard:()=>z});var s={};n.r(s),n.d(s,{AddToDictButton:()=>u.X,AddedToDictCard:()=>d.S,AuthenticatedFooter:()=>_.S,Card:()=>v.Z,Container:()=>D.W,DefinitionsCard:()=>m.l,FluencyFooter:()=>g.A,IgnoreButton:()=>h.Q,Item:()=>E.c,KnowledgeHubCard:()=>O.i,NextButtonLogo:()=>w.Df,PositionedCard:()=>l.J,PrevButtonLogo:()=>w.uH,RenderWithStyles:()=>B.L,ReplacementCard:()=>f.X,RowWithIcon:()=>b.O,SimpleFooter:()=>C.z,SimpleMessageCard:()=>y.t,SnippetsCard:()=>w.LB,SnippetsCreateBtn:()=>w.Og,SnippetsEditor:()=>x.M,SnippetsStopPropagationWrapper:()=>L.q,SuggestionCard:()=>T.Y,SuggestionCardMini:()=>N.O,SynonymsCard:()=>M.x,TextOnlyCard:()=>k.A,TouchTypistIndividualReplacement:()=>f.J,UnifiedFunnelAnonymousFooter:()=>S.h,UnknownWordCard:()=>I.$,VoxReplacementCard:()=>P.W,VoxTextOnlyCard:()=>A.a});var i=n(92379),r=n(69088),p=n(40594),a=n(31272),o=n(3245),c=n(78767),l=n(59367),d=n(77038),u=n(75685),h=n(13783),m=n(8893),_=n(25306),g=n(50818),C=n(29558),S=n(45783),v=n(94774),E=n(60984),b=n(73297),f=n(44380),y=n(89502),w=n(18674),x=n(40293),L=n(78136),T=n(45821),N=n(61066),M=n(42044),k=n(44252),I=n(66187),P=n(38949),A=n(78438),O=n(6182),D=n(43910),B=n(83507);const R=p.Y.create("universal/cs/integration/fluid/iframe-proxy/ComponentProxy");function F(e){return i.createElement(U,{...e})}const U=({children:e,cardKey:t,onUpdate:n,...s})=>{const r=i.useRef({}),[p,a]=i.useState(null),o=i.useMemo((()=>e=>{const t=r.current[e.id];t?t(...e.args):R.warn(`Skipping Callback ${e.id}`)}),[]);return i.useEffect((()=>{const{callbackRegister:i,card:c,key:l}=z({card:e,key:t},s),d=n({card:c,key:l});return r.current=i,a(d.subscribe(o)),()=>{p&&p.unsubscribe(),a(null)}}),[e]),null},W=(e,t)=>t?e[t]:void 0,$=(e,t,n="root")=>{var p,o;try{const l=Object.entries(t.options.namedObjects).find((([t,n])=>n===e));if(l)return{__type:"namedObject",name:l[0]};if("object"==typeof e&&i.isValidElement(e)){let i;for(const t in s){const n=W(s,t);if(e.type===n){i=t;break}}if(!i)throw new Error(`Cannot find component name for ${e.type.toString()}`);return{__type:"react",props:$(e.props,t,`${n}.[${i}]`),componentName:i}}if(e instanceof Array)return e.map(((e,s)=>$(e,t,`${n}.${s}`)));if(e instanceof HTMLDocument||"object"==typeof e&&(null!==(o=null===(p=null==e?void 0:e.constructor)||void 0===p?void 0:p.toString().indexOf("HTMLDocument"))&&void 0!==o?o:-1)>-1)return{__type:"document"};if("function"==typeof e){const s=`${n}-${c.iy.create()}`;return t.callbackRegister[s]=e,{__type:"callback",id:s}}return(0,a.Kn)(e)?e instanceof r.Lv?null:Object.keys(e).reduce(((s,i)=>Object.assign(s,{[i]:$(e[i],t,`${n}.${i}`)})),{}):e}catch(t){return R.warn(`Card Serialize Error ${t}`),e}},z=(e,t)=>{const n={};return{card:e.card&&$(e.card,{callbackRegister:n,options:t}),key:e.key,callbackRegister:n}};function Z(e,t,n,s){return null===e?null:G(e,{emitCallback:t,getIframeOffset:n,options:s})}const G=(e,t,n="root")=>{try{if(!(0,a.Kn)(e))return e instanceof Array?e.map(((e,s)=>G(e,t,`${n}.${s}`))):e;switch(e.__type){case"callback":{const n=e.id;return(...e)=>{t.emitCallback({id:n,args:e})}}case"react":{const r=e.componentName?e.componentName:o.L.getLazyComponentName(e),p=W(s,r);if(!p)throw new Error(`Component ${e.componentName} is not recognized as card component`);const a=G(e.props,t,`${n}.[${e.componentName}]`);return"Container"===e.componentName&&Object.assign(a,{iframeFocusedFieldPosition:t.getIframeOffset()}),i.createElement(p,{...a})}case"document":return document;case"namedObject":{const n=t.options.namedObjects[e.name];if(!n)throw new Error("Cannot find namedObject");return n}default:return(0,a.UI)(((e,s)=>void 0===s?s:G(s,t,`${n}.${e}`)),e)}}catch(t){return R.error(`Card Deserialize Error ${t}`),e}}},61213:(e,t,n)=>{n.d(t,{TV:()=>s});var s=n(78968).v.isRichText},90155:(e,t,n)=>{n.d(t,{C2:()=>H,EH:()=>ee,pi:()=>X});var s=n(39953),i=n(62552),r=n(79256),p=n(84308),a=n(64271),o=n(59179),c=n(90572),l=n(10883),d=n(954),u=n(32734),h=n(36807),m=n(71576),_=n(55812),g=n(27947),C=n(12505),S=n(70880),v=n(13391),E=n(84178),b=n(24666),f=n(29416),y=n(63532),w=n(36344),x=n(5588),L=n(81933),T=n(20161),N=n(8867),M=n(32073),k=n(58303),I=n(10444),P=n(8907),A=n(28898),O=n(41587),D=n(53025),B=n(48758),R=n(63310),F=n(7960),U=n(61213),W=n(93865),$=n(67800),z=n(90595),Z=n(78767),G=n(79707);function q(){return{items:[],children:new Map}}function K(e,t){return t&&0!==e.length?K(e.slice(1),t.children.get(e[0])||null):t}class j{constructor(e,t){this._root=q(),e.forEach((e=>{const n=e[t];if(!(0,G.HD)(n))throw new Error("Can't search for non-string attributes");n.toLowerCase().split("").reduce(((t,n)=>(t.items.push(e),t.children.has(n)||t.children.set(n,q()),t.children.get(n))),this._root).items.push(e)}))}search(e){const t=[];let n=null,s={node:this._root,depth:0};const i=[];for(;s;){n=K(e.toLowerCase(),s.node),n&&i.push({node:n,depth:s.depth});const r=s.node.children.values();let p=r.next(void 0);for(;!p.done;)t.push({node:p.value,depth:s.depth+1}),p=r.next(void 0);s=t.shift()||null}return Array.from(i.reduce(((t,n)=>(n.node.items.forEach((s=>{t.has(s)||t.set(s,{start:n.depth,end:n.depth+e.length})})),t)),new Map).entries()).map((([e,t])=>({item:e,range:t})))}}var H,V=n(47557),Y=n(40594),J=n(52151);!function(e){e.name="name",e.content="content"}(H||(H={}));const Q=/\s+$/;function X(e,t,n){if(!t){if(e.deltaChange.isEmpty)return null;{const t=e.deltaChange.delta.ops.slice(0);let s=t.pop();for(;t.length&&s&&!m.s.isInsertString(s);)s=t.pop();if(s&&m.s.isInsertString(s)&&!Q.test(s.insert)){const t=e.deltaChange.delta.ops.reduce(((e,t)=>m.s.isInsertString(t)?e+t.insert.length:m.s.isRetain(t)?e+t.retain:e),0);return new RegExp(`^(.*\\s)?${(0,Z.hr)(n)}(\\s.*)?$`).test((0,$.l)(e.deltaChange.delta,e.prevText).slice(Math.max(t-n.length-1,0),t+1))?{start:t-n.length,end:t}:null}return null}}{const{effectStartIndex:s,sizeDelta:i}=e.deltaChange.delta.ops.reduce(((e,t)=>(m.s.isRetain(t)?e.index+=t.retain:m.s.isDelete(t)?(e.effectStartIndex=Math.min(e.effectStartIndex,e.index),e.sizeDelta-=t.delete):m.s.isInsertString(t)?(e.effectStartIndex=Math.min(e.effectStartIndex,e.index),e.index+=t.insert.length,e.sizeDelta+=t.insert.length):m.s.isInsertEmbed(t)&&(e.effectStartIndex=Math.min(e.effectStartIndex,e.index),e.index+=1,e.sizeDelta+=1),e)),{index:0,effectStartIndex:1/0,sizeDelta:0});switch(!0){case s<t.start+n.length:case s>t.end:return null;default:return{...t,end:t.end+i}}}}class ee{constructor(e,t,n,s,m,_,g,C,S,N,M,k,I,R,F,$,Z,G,q,K,H,Q,ee,te=Y.Y.create("Snippets")){var ne,se;this._snippetsProvider=e,this._textObserver=t,this._replacementService=n,this._geometryProvider=s,this._geometryLayout=m,this._textFieldLayout=_,this._getCurrentTextMap=g,this._controller=C,this._keyDown=S,this._gnar=N,this._checkingService=M,this._selectionSource=k,this._state=I,this._updateSnippetsShortcutPopupCounter=R,this._setAppActionsSnippetsOnboardingSeen=F,this._isCurrentFieldFocused=$,this._events=Z,this._alertStateService=G,this._openAssistant=q,this._pageState=K,this._alertProcessor=H,this._experimentClient=Q,this._snippetsTemplatingFeature=ee,this._log=te,this._subs=[],this._insertionRange=new i.X(null),this._activeSnippet=new i.X(null),this._selectionObservable=(0,r.P)((()=>this._selectionSource.data.changes.pipe((0,o.U)(W.Ey),(0,c.h)((e=>null!==e))))),this._snippetsSearchTrees=new i.X({byName:new j([],"name"),byContent:new j([],"content")}),this._triggerSequence=J.QQ,this._shortcutPopupSessionCounter=0,this._initialShortcutPopupCounter=0,this._currentModel={mode:"none"},this._applySnippet=(e,t,n)=>{var s;const i=(0,U.TV)(e.contentDelta),r=this._experimentClient.isGateEnabled(z.K.OutreachCustomSlateEditor)&&!i&&"string"==typeof e.content,p=i?e.contentDelta:r?(new h.i).insert(e.content):e.content,a=(0,O.Gu)(p);if(this._dismiss("apply"),this._gnar.snippetsSnippetApplied(a,i,t.end-t.start-n.length),(0,O.Gu)(p)&&this._snippetsTemplatingFeature){const e=(0,D.sz)(p,null===(s=this._state.get())||void 0===s?void 0:s.user);this._replacementService.performReplacement({pos:t,value:e}).then((()=>{var n;return null===(n=this._snippetsTemplatingFeature)||void 0===n?void 0:n.insertTemplateAlerts(e,t,this._snippets,this._applySnippet)}))}else this._replacementService.performReplacement({pos:t,value:p});this._checkingService&&this._checkingService.onSnippetFeedback({kind:P.JE.SNIPPET_ACCEPTED,snippetUuid:e.id})},this.addSnippetsTriggerToAlert=e=>({...e,extra_properties:{...e.extra_properties,snippet_trigger:this._triggerSequence}}),this.showSnippetsEditor=e=>{this._snippetsProvider.snippetsAndSettings.pipe((0,l.M)(this._selectionObservable.pipe((0,d.O)(null)),this._snippetsSearchTrees),E.q(1)).subscribe((([t,n,s])=>{const i=this._getModel("editor",t,n,s,null,e);i&&this._controller.show(i)}))},this._snippetsTriggered=v.h.create(!this._experimentClient.isGateEnabled(z.K.LazyLoadSnippetsSearchTrees)),this._snippets=(0,p.a)([this._snippetsProvider.snippetsAndSettings,this._snippetsTriggered]).pipe((0,o.U)((([{snippets:e},t])=>t?e:[])),b.x(((e,t)=>e.length===t.length&&e.every(((e,n)=>e.id===t[n].id)))));const ie=(new Date).getTime();let re=!0;this._subs.push((0,p.a)([this._snippets,this._snippetsProvider.snippetsAndSettings]).subscribe((([e,t])=>{this._snippetsSearchTrees.next({byName:new j(e,"name"),byContent:new j(e,"content")}),this._gnar.snippetsListLoaded(t.snippets.length,re?(new Date).getTime()-ie:void 0),re=!1}))),this._initialShortcutPopupCounter=null!==(se=null===(ne=this._state.get())||void 0===ne?void 0:ne.page.snippetsShortcutPopupCounter)&&void 0!==se?se:0,this._snippetsModel=(0,p.a)([this._insertionRange,this._activeSnippet,this._textFieldLayout.rect.behavior,this._snippetsProvider.snippetsAndSettings,this._snippetsSearchTrees]).pipe(f.b(20),(0,o.U)((([e,t,n,s,i])=>e?this._getModel("list",s,e,i,t):null)),y.b((e=>{e&&this._snippetsTriggered.set(!0)})),(0,u.B)(),(0,d.O)(null)),this._shortcutPopupModel=w.E,this._subs.push(this._snippetsProvider.snippetsAndSettings.subscribe((({triggerSequence:e})=>{this._triggerSequence=e}))),this._subs.push((0,a.T)(this._snippetsModel,this._shortcutPopupModel.pipe((0,c.h)((e=>"shortcutPopup"===this._currentModel.mode||Boolean(e)))),this._events.pipe((0,l.M)(this._snippetsProvider.snippetsAndSettings,this._snippetsSearchTrees),o.U((([{text:e,textRange:t,onCreate:n},s,i])=>this._getModel("editor",s,t,i,void 0,e,n))),y.b((e=>this._log.trace("Model changed",e))))).pipe(x.D((e=>L.timer(0===(null==e?void 0:e.matchLength)?20:0)))).subscribe((e=>{e?this._show(e):this._hide("Model is empty.")}))),this._subs.push(this._isCurrentFieldFocused.pipe((0,c.h)((e=>!e))).subscribe((()=>this._hide("Current field lost its focus")))),this._subs.push(this._snippetsProvider.snippetsEnabled.pipe((0,c.h)((e=>!e))).subscribe((()=>this._hide("Snippets feature got disabled."))));const pe=this._snippetsProvider.snippetsAndSettings.pipe(L.shareReplay({bufferSize:1,refCount:!0}));this._subs.push(this._textObserver.contentChanges.async.pipe((0,c.h)((e=>{const t=0===e.changes.length;return t&&this._log.trace("Skipping an empty content change"),!t})),(0,l.M)(this._insertionRange.pipe((0,d.O)(null))),T.w((([e,t])=>pe.pipe(o.U((n=>[e,t,n])))))).subscribe((([e,t,n])=>{if(!n||!n.enabled)return;const s=n.triggerSequence,i=X(e,t,s);this._insertionRange.next(i),t&&null===i&&this._dismiss("edit"),null===t&&i&&(this._gnar.snippetsTriggerSequenceEntered(!0,s),this._log.trace("Snippets trigger sequence entered."),this._gnar.snippetsListPresented(s))}))),this._subs.push(this._keyDown.pipe((0,l.M)(this._insertionRange.pipe((0,d.O)(null)),this._snippetsModel,this._selectionObservable.pipe((0,d.O)(null)),this._isCurrentFieldFocused,this._snippetsProvider.snippetsAndSettings,this._snippetsSearchTrees)).subscribe((([e,t,n,s,i,r,p])=>{if(!r.enabled)return;const a=(0,A.O)(),o=e=>e.key.toLowerCase()===r.creationShortcut&&(a.config.systemInfo.os.isMac?e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey:e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey);if(o(e)&&this._log.trace("Creation shortcut was entered"),i&&o(e)&&(!this._controller.isVisible()||this._controller.isShortcutPopupShown()&&s||this._controller.isEmptySnippetsListShown())){this._gnar.snippetsShortcutUsed();const t=this._getModel("editor",r,s,p);if(t)return this._updateSnippetsShortcutPopupCounter(-1),this._hide("Refresh snippets view on shortcut usage."),this._show(t),void e.preventDefault()}if(e.keyCode===V.VD.Escape&&null!==n)return this._dismiss("esc"),void e.stopPropagation();t&&(e.keyCode!==V.VD.Tab&&e.keyCode!==V.VD.RightArrow&&e.keyCode!==V.VD.Return||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?e.keyCode!==V.VD.UpArrow&&e.keyCode!==V.VD.DownArrow||(e.preventDefault(),e.stopPropagation(),this._shiftActiveSnippet(e.keyCode===V.VD.UpArrow,n)):t&&(null==n?void 0:n.activeSnippet)&&(e.preventDefault(),e.stopPropagation(),this._applySnippet(n.activeSnippet.snippet,t,r.triggerSequence)))}))),this._subs.push(this._textFieldLayout.scroll.behavior.pipe((0,l.M)(this._snippetsModel),(0,c.h)((([e,t])=>!!t))).subscribe((()=>{this._dismiss("scroll")}))),this._subs.push(this._alertStateService.newlyHighlightedAlerts.pipe(l.M(this._snippetsProvider.snippetsEnabled),c.h((([e,t])=>t&&B.S.isSuggestedSnippetAlert(e)))).subscribe((()=>{this._gnar.suggestedSnippetHighlightShow()}))),this._subs.push(this._controller.cardDismissed.subscribe((()=>{this._dismiss("edit")}))),this._gnar.snippetsFeatureInit()}_selectSnippet(e){this._activeSnippet.next(e)}_getSnippetsForText(e,t,n){return[...t.search(e).map((e=>({snippet:e.item,range:e.range,location:H.name}))),...n.search(e).map((e=>({snippet:e.item,range:e.range,location:H.content})))].reduce(((e,t)=>(e.set.has(t.snippet.id)||e.result.push(t),e.set.add(t.snippet.id),e)),{set:new Set,result:[]}).result}_shiftActiveSnippet(e,t){var n;if(t&&t.matches.length&&t.activeSnippet){const s=t.activeSnippet.index;s>-1?this._activeSnippet.next((null===(n=t.matches[Math.min(t.matches.length-1,Math.max(s+(e?-1:1),0))])||void 0===n?void 0:n.snippet)||null):this._activeSnippet.next(null)}else this._activeSnippet.next(null)}_dismiss(e){this._log.debug("Snippets card dismissed",{reason:e}),this._insertionRange.next(null),this._activeSnippet.next(null),"apply"!==e&&this._gnar.snippetsListDismissed(e)}_getModel(e,t,n,s,i,r,p){var a;const o=this._getCurrentTextMap(),c=n&&this._geometryProvider.create(n,o),l=c?this._geometryProvider.getClientRects(c):null,d=null!==(a=l&&l.length&&("list"===e?l[0]:l[l.length-1]))&&void 0!==a?a:null,u=d&&(0,F.Z)(R.UL.setPosition(this._geometryLayout.getApproximateConversionContext().clientToRelative(d),d),this._textFieldLayout.rect.getApproximate().client,this._textFieldLayout.scroll.getApproximate())||"editor"===e&&(h=this._textFieldLayout.rect.getApproximate().client,R.UL.setPosition(h,{height:1,width:1}));var h;if(!u)return null;if("shortcutPopup"===e)return null;const m=n?this._getSnippetsForText(o.getPlainText().substring(n.start+t.triggerSequence.length,n.end),s.byName,s.byContent):[],_=n?n.end-n.start-t.triggerSequence.length:0,g=i?m.findIndex((e=>e.snippet.id===i.id)):-1;return{rect:u,matches:m,mode:e,applySnippet:e=>{const s=m.find((t=>t.snippet.id===e));n&&s&&this._applySnippet(s.snippet,n,t.triggerSequence)},selectSnippet:e=>{const t=m.find((t=>t.snippet.id===e));t&&this._selectSnippet(t.snippet)},addSnippet:async(e,t)=>{await this._snippetsProvider.addSnippet(e,t)&&(p&&p(),this._gnar.snippetsInlineSnippetCreated()),this._hide("Close on snippet add.")},activeSnippet:m.length?i&&g>-1?{snippet:i,index:g}:{snippet:m[0].snippet,index:0}:null,matchLength:_,triggerSequence:t.triggerSequence,creationShortcut:t.creationShortcut,content:r||("list"!==e&&n?o.getPlainText().substring(n.start,n.end):"")}}_show(e){this._log.debug("Show snippets card",{mode:e.mode}),this._currentModel=e,this._controller.show(e)}_hide(e){this._currentModel&&this._log.debug("Hide snippets card",{reason:e}),this._currentModel={mode:"none"},this._controller.hide()}static _subscribeToMuteOrUndoMuteButtonClick(e,t,n,i,r){e.add(t.pipe(c.h(i),l.M(n),o.U((([e,t])=>S.nL.hasItems(t)?(0,s.zG)(t.currentLens.items.get(e.id),k.g_((()=>null),(e=>e.value))):null)),c.h(Z.fQ),c.h(C.i.isSuggestedSnippetItem)).subscribe(r))}dispose(){this._subs.forEach((e=>e.unsubscribe()))}initCardActionsProcessing(e,t,n,i){return new N.y((()=>{const r=new M.w0;return r.add(e.pipe(c.h(g.lY.isCreateSnippetAction),y.b((()=>{this._gnar.suggestedSnippetCardAccept("assistant")}))).subscribe((({snippetName:e,snippetText:t})=>{this._snippetsProvider.addSnippet(e,t)}))),r.add(e.pipe(c.h(g.lY.isSuggestedSnippetSuccessDismissed)).subscribe((e=>{(0,s.zG)(t.getById(e.alertId),k.tS(_.bZ.getRawId),k.g_((()=>this._log.error("Tried to acknowledge nonexistent snippet alert from the sidebar",{alertId:e.alertId})),(e=>{var t;return null===(t=this._checkingService)||void 0===t?void 0:t.onAlertAcknowledged(e,P.e3.Sidebar)})))}))),r.add(n.pipe(c.h(C.i.isSuggestedSnippetItem)).subscribe((()=>{this._gnar.suggestedSnippetMiniCardShow()}))),r.add(e.pipe(c.h(g.lY.isAlertCardShow),o.U((e=>e.alertId)),f.b(300)).subscribe((e=>(0,s.zG)(t.getById(e),k.hX(_.bZ.isSuggestedSnippet),I.bw((()=>{this._gnar.suggestedSnippetCardLook("assistant")})))))),r.add(e.pipe(c.h(g.lY.isAlertIgnoreAction)).subscribe((e=>(0,s.zG)(t.getById(e.alertId),k.hX(_.bZ.isSuggestedSnippet),I.bw((()=>{this._gnar.suggestedSnippetCardDismiss("assistant")})))))),ee._subscribeToMuteOrUndoMuteButtonClick(r,e,i,g.lY.isMuteCategoryAction,(()=>{this._gnar.suggestedSnippetCardDeactivate("assistant")})),ee._subscribeToMuteOrUndoMuteButtonClick(r,e,i,g.lY.isUndoMuteCategoryAction,(()=>{this._gnar.suggestedSnippetCardUndoDeactivate("assistant")})),()=>r.unsubscribe()}))}}},52151:(e,t,n)=>{n.d(t,{Gx:()=>m,QQ:()=>h,Zm:()=>S});var s=n(62552),i=n(36344),r=n(50750),p=n(84714),a=n(20161),o=n(66878),c=n(59179),l=n(89408),d=n(36807),u=n(25754);const h="\\",m="s",_=e=>new d.i(e.ops),g=({id:e,name:t,hierarchy:n,contentDelta:s})=>{return{id:e,name:t,hierarchy:n,content:(i=s,u.$.renderToPlainText(_(i))),contentDelta:_(s)};var i},C=({isEnabled:e,userShortcuts:t,snippets:n})=>({enabled:e,creationShortcut:e?(null==t?void 0:t.createSnippetTrigger.toLowerCase())||m:"",triggerSequence:e?(null==t?void 0:t.snippetsTrigger)||h:"",snippets:e&&(null==n?void 0:n.map(g))||[]});class S{constructor(e,t,n){this._checkingService=e,this._rpcClient=t,this._state=n,this._reloadSubject=new s.X(null),this.snippetsAndSettings=this._reloadSubject.pipe((0,a.w)((()=>this._requestSnippets().pipe((0,o.K)((()=>i.E))))),(0,c.U)(C),(0,l.d)()),this.snippetsEnabled=this.snippetsAndSettings.pipe((0,c.U)((e=>e.enabled)))}async addSnippet(e,t){const n=await this._rpcClient.addSnippet({name:e,contentDelta:{ops:[{insert:t+"\n"}]},hierarchy:"PERSONAL"});return this._reloadSubject.next(null),n?g(n):null}_requestSnippets(){return(0,r.D)(this._rpcClient.getSnippets()).pipe((0,a.w)((e=>e?(0,p.of)(e):i.E)))}}},18674:(e,t,n)=>{n.d(t,{Df:()=>g,LB:()=>b,Og:()=>x,uH:()=>_});var s=n(92379),i=n(85837),r=n(28898),p=n(16381),a=n(90155),o=n(69652),c=n(20785),l=n(53278),d=n(57066);const u=e=>{const t=(50-(e.range.end-e.range.start))/2-3;return e.location===a.C2.content?{prefix:h(e.snippet.content,e.range.start,t),content:e.snippet.content.slice(e.range.start,e.range.end),suffix:e.snippet.content.slice(e.range.end)}:{content:e.snippet.content}},h=(e,t,n=1/0)=>e.slice(0,t).split(" ").reduceRight(((e,t,s)=>{let i=e.text,r=e.wordsLeft;return r?(i.length+t.length<n&&(i=i?`${t} ${i}`:t||" "),t?r--:i=`${i}`,!r&&s&&(i=`...${i}`),{text:i,wordsLeft:r}):e}),{text:"",wordsLeft:2}).text,m=()=>(0,r.O)().config.systemInfo.os.isMac?"CONTROL":"ALT",_=()=>s.createElement("svg",{viewBox:"0 0 10 6",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M9.354,4.603L5,0.249L0.646,4.603C0.451,4.798 0.451,5.115 0.646,5.31C0.842,5.505 1.158,5.505 1.354,5.31L5,1.663C5,1.663 8.646,5.31 8.646,5.31C8.842,5.505 9.158,5.505 9.354,5.31C9.549,5.115 9.549,4.798 9.354,4.603Z"})),g=()=>s.createElement("svg",{viewBox:"0 0 10 6",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M0.646,1.183L5,5.536L9.354,1.183C9.549,0.988 9.549,0.671 9.354,0.476C9.158,0.28 8.842,0.28 8.646,0.476L5,4.122C5,4.122 1.354,0.476 1.354,0.476C1.158,0.28 0.842,0.28 0.646,0.476C0.451,0.671 0.451,0.988 0.646,1.183Z"})),C=()=>s.createElement("svg",{viewBox:"0 0 4 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M2,12C0.895,12 0,12.895 0,14C0,15.105 0.895,16 2,16C3.105,16 4,15.105 4,14C4,12.895 3.105,12 2,12ZM2,13C2.552,13 3,13.448 3,14C3,14.552 2.552,15 2,15C1.448,15 1,14.552 1,14C1,13.448 1.448,13 2,13ZM2,6C0.895,6 0,6.895 0,8C0,9.105 0.895,10 2,10C3.105,10 4,9.105 4,8C4,6.895 3.105,6 2,6ZM2,7C2.552,7 3,7.448 3,8C3,8.552 2.552,9 2,9C1.448,9 1,8.552 1,8C1,7.448 1.448,7 2,7ZM2,0C0.895,0 0,0.895 0,2C0,3.105 0.895,4 2,4C3.105,4 4,3.105 4,2C4,0.895 3.105,0 2,0ZM2,1C2.552,1 3,1.448 3,2C3,2.552 2.552,3 2,3C1.448,3 1,2.552 1,2C1,1.448 1.448,1 2,1Z"})),S=()=>s.createElement("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M25.5,16C25.5,10.753 21.247,6.5 16,6.5C10.753,6.5 6.5,10.753 6.5,16C6.5,21.247 10.753,25.5 16,25.5C21.247,25.5 25.5,21.247 25.5,16ZM24.5,16C24.5,20.694 20.694,24.5 16,24.5C11.306,24.5 7.5,20.694 7.5,16C7.5,11.306 11.306,7.5 16,7.5C20.694,7.5 24.5,11.306 24.5,16ZM15.5,15.5L11.5,15.5C11.224,15.5 11,15.724 11,16C11,16.276 11.224,16.5 11.5,16.5L15.5,16.5L15.5,20.5C15.5,20.776 15.724,21 16,21C16.276,21 16.5,20.776 16.5,20.5L16.5,16.5L20.5,16.5C20.776,16.5 21,16.276 21,16C21,15.724 20.776,15.5 20.5,15.5L16.5,15.5L16.5,11.5C16.5,11.224 16.276,11 16,11C15.724,11 15.5,11.224 15.5,11.5L15.5,15.5Z"})),v=()=>s.createElement("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M9,22.5C9,23.881 10.119,25 11.5,25L22.5,25C22.776,25 23,24.776 23,24.5C23,24.224 22.776,24 22.5,24L11.5,24C10.672,24 10,23.328 10,22.5C10,21.672 10.672,21 11.5,21L22.5,21C22.776,21 23,20.776 23,20.5L23,13.5C23,13.224 22.776,13 22.5,13C22.224,13 22,13.224 22,13.5L22,20C22,20 11.5,20 11.5,20C10.937,20 10.418,20.186 10,20.5L10,9.5C10,8.672 10.672,8 11.5,8C11.5,8 16.5,8 16.5,8C16.776,8 17,7.776 17,7.5C17,7.224 16.776,7 16.5,7L11.5,7C10.119,7 9,8.119 9,9.5L9,22.5ZM22.5,22L11.5,22C11.224,22 11,22.224 11,22.5C11,22.776 11.224,23 11.5,23L22.5,23C22.776,23 23,22.776 23,22.5C23,22.224 22.776,22 22.5,22ZM22,7L19.5,7C19.224,7 19,7.224 19,7.5C19,7.776 19.224,8 19.5,8L22,8L22,10.5C22,10.776 22.224,11 22.5,11C22.776,11 23,10.776 23,10.5L23,8L25.5,8C25.776,8 26,7.776 26,7.5C26,7.224 25.776,7 25.5,7L23,7L23,4.5C23,4.224 22.776,4 22.5,4C22.224,4 22,4.224 22,4.5L22,7Z"})),E=()=>s.createElement("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M24.5,23.5C24.776,23.5 25,23.724 25,24C25,24.276 24.776,24.5 24.5,24.5L7.5,24.5C7.224,24.5 7,24.276 7,24C7,23.724 7.224,23.5 7.5,23.5L24.5,23.5Z"}),s.createElement("path",{d:"M20.894,8.354L22.146,9.606C22.732,10.192 22.732,11.142 22.146,11.727L12.374,21.5L9,21.5L9,18.126L18.773,8.354C19.359,7.768 20.308,7.768 20.894,8.354ZM17.666,10.873L10,18.54L10,20.5L11.96,20.5L19.626,12.833L17.666,10.873ZM19.48,9.061L18.373,10.166L20.333,12.126L21.439,11.02C21.635,10.825 21.635,10.508 21.439,10.313L20.187,9.061C19.992,8.865 19.675,8.865 19.48,9.061Z"})),b=e=>{let t=!1;const n=s.useRef(null),[r,a]=s.useState({menuOpen:!1,visibleSnippetsAmount:30});s.useEffect((()=>o()));const o=()=>{const{activeSnippet:s}=e;if(s&&n.current){const e=58,i=n.current,p=i.scrollTop,a=s.index*e,o=Math.max(0,s.index*e-2*e),c=p+e/2<o?o:p-e/2>a?a:p;c!==p&&(t=!0,i.scrollTop=c,setTimeout((()=>{t=!1}),0));const l=(r.visibleSnippetsAmount-1)*e;p+i.offsetHeight>l&&h()}},h=()=>{a((e=>({...e,visibleSnippetsAmount:r.visibleSnippetsAmount+30})))},b=t=>{a((e=>({...e,menuOpen:!1}))),e.onOpenLink(t)};return s.createElement("div",{className:d.snippetsCard},e.matches.length?s.createElement("dl",{ref:n,className:d.snippetsCard__snippets},e.matches.slice(0,r.visibleSnippetsAmount).map((n=>{var r,p;return s.createElement("div",{...(0,i.Sh)(d.snippetsCard__snippet,n.snippet.id===(null===(p=null===(r=e.activeSnippet)||void 0===r?void 0:r.snippet)||void 0===p?void 0:p.id)?d.snippetsCard__snippet_active:null),key:n.snippet.id,onClick:()=>e.applySnippet(n.snippet.id),onMouseEnter:()=>{return s=n.snippet.id,void(t||e.selectSnippet(s));var s}},s.createElement(f,{match:n,triggerSequence:e.triggerSequence}),s.createElement(y,{match:n,content:u(n)}))}))):s.createElement(w,{creationShortcut:e.creationShortcut}),s.createElement("div",{className:d.snippetsCard__footer},s.createElement("div",{className:d["snippetsCard__footer-logo"]},s.createElement(c.T,{backgroundColor:l.bd.black,type:"mini",size:16})),s.createElement("div",{className:d["snippetsCard__footer-hints"]},s.createElement("span",{className:d.buttonTip__group},"navigate"," ",s.createElement("span",{className:d.buttonTip},s.createElement(_,null)),"Â ",s.createElement("span",{className:d.buttonTip},s.createElement(g,null))),s.createElement("span",{className:d.buttonTip__group},"select ",s.createElement("span",{className:d.buttonTip},"Enter")),s.createElement("span",{className:d.buttonTip__group},"cancel ",s.createElement("span",{className:d.buttonTip},"Esc"))),s.createElement("span",{...(0,i.Sh)(d["snippetsCard__footer-menuButton"],r.menuOpen?d["snippetsCard__footer-menuButton_active"]:null),onClick:()=>{a((e=>({...e,menuOpen:!r.menuOpen})))}},s.createElement(C,null)),r.menuOpen&&s.createElement("ul",{className:d["snippetsCard__footer-menu"]},s.createElement("li",{className:d["snippetsCard__footer-menuItem"]},s.createElement("a",{target:"_blank",rel:"noreferrer",href:(0,p.Um)().snippetsNew,onClick:()=>{b("new")}},s.createElement("span",{className:d["snippetsCard__footer-menuItem-icon"]},s.createElement(S,null)),s.createElement("span",{className:d["snippetsCard__footer-menuItem-textGroup"]},s.createElement("span",{className:d["snippetsCard__footer-menuItem-text"]},"Create snippet"),s.createElement("span",{className:d["snippetsCard__footer-shortcut"]},s.createElement("span",{className:d.buttonTip},m())," +"," ",s.createElement("span",{className:d.buttonTip},e.creationShortcut.toUpperCase()))))),s.createElement("li",{className:d["snippetsCard__footer-menuItem"]},s.createElement("a",{target:"_blank",rel:"noreferrer",href:(0,p.Um)().snippetsAdmin,onClick:()=>{b("library")}},s.createElement("span",{className:d["snippetsCard__footer-menuItem-icon"]},s.createElement(v,null)),s.createElement("span",{className:d["snippetsCard__footer-menuItem-textGroup"]},s.createElement("span",{className:d["snippetsCard__footer-menuItem-text"]},"Open library")))),s.createElement("li",{className:d["snippetsCard__footer-menuItem"]},s.createElement("a",{target:"_blank",rel:"noreferrer",href:(0,p.Um)().snippetsSettings,onClick:()=>{b("customize")}},s.createElement("span",{className:d["snippetsCard__footer-menuItem-icon"]},s.createElement(E,null)),s.createElement("span",{className:d["snippetsCard__footer-menuItem-textGroup"]},s.createElement("span",{className:d["snippetsCard__footer-menuItem-text"]},"Edit shortcut"),s.createElement("span",{className:d["snippetsCard__footer-shortcut"]},s.createElement("span",{...(0,i.Sh)(d.buttonTip,d["snippetsCard__footer-editShortcut"])},e.triggerSequence))))))))},f=e=>s.createElement("dt",{className:d["snippetsCard__snippet-name"]},s.createElement("span",{...(0,i.Sh)(d["snippetsCard__snippet-logo"],"PERSONAL"===e.match.snippet.hierarchy?d["snippetsCard__snippet-logo-personal"]:d["snippetsCard__snippet-logo-global"])}),s.createElement("span",{className:d["snippetsCard__snippet-name-match"]},e.triggerSequence),e.match.location===a.C2.name?s.createElement(s.Fragment,null,e.match.snippet.name.slice(0,e.match.range.start),s.createElement("span",{className:d["snippetsCard__snippet-name-match"]},e.match.snippet.name.slice(e.match.range.start,e.match.range.end)),e.match.snippet.name.slice(e.match.range.end)):s.createElement(s.Fragment,null,e.match.snippet.name)),y=e=>s.createElement("dd",{className:d["snippetsCard__snippet-content"]},e.match.location===a.C2.content?s.createElement(s.Fragment,null,e.content.prefix,s.createElement("span",{className:d["snippetsCard__snippet-content-match"]},e.content.content),e.content.suffix):s.createElement(s.Fragment,null,e.content.content)),w=e=>s.createElement("div",{className:d.snippetsCard__empty},s.createElement("div",{className:d["snippetsCard__empty-pic"]}),s.createElement("span",{className:d["snippetsCard__empty-title"]},"Your search did not match any snippets"),s.createElement("div",{className:d["snippetsCard__empty-shortcut"]},"To create one, press ",s.createElement("span",{...(0,i.Sh)(d.buttonTip)},m()),"+",s.createElement("span",{...(0,i.Sh)(d.buttonTip)},e.creationShortcut.toUpperCase()))),x=e=>(s.useEffect((()=>{e.onShow()}),[]),s.createElement("div",{className:d.snippetsCreateBtn},s.createElement("span",{className:d.snippetsCreateBtn__logo},s.createElement("svg",{viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M10.97,0C4.912,0 0,4.91 0,10.968C0,17.026 4.912,21.938 10.97,21.938C17.03,21.938 21.94,17.026 21.94,10.968C21.94,4.91 17.03,0 10.97,0ZM17.133,16.713C17.133,17.169 16.748,17.529 16.276,17.443C15.916,17.379 15.696,17.041 15.696,16.677L15.696,15.97L15.821,15.188C14.601,16.595 12.827,17.401 10.965,17.394C7.281,17.394 4.315,14.344 4.528,10.612C4.713,7.402 7.308,4.746 10.514,4.532C12.978,4.366 15.166,5.609 16.384,7.454L16.38,7.454C16.572,7.864 16.484,8.24 16.163,8.464C16.038,8.552 15.889,8.599 15.736,8.599C15.494,8.599 15.267,8.48 15.128,8.282L15.128,8.274C14.246,7.044 12.708,6.007 10.956,6.007C7.593,6.007 5.012,9.377 6.368,12.912C6.965,14.468 8.38,15.582 10.028,15.84C12.051,16.158 13.902,15.462 14.968,13.898L14.302,14.015L13.152,14.015C12.788,14.015 12.45,13.795 12.385,13.435C12.3,12.965 12.66,12.58 13.115,12.58L17.133,12.58L17.133,16.713Z"}))),s.createElement("span",{className:d.snippetsCreateBtn__textGroup},s.createElement("span",{onClick:()=>e.openEditor(),className:d.snippetsCreateBtn__text},"Create a snippet"),s.createElement("span",{onClick:()=>e.openEditor(),className:d.snippetsCreateBtn__shortcut},s.createElement("span",{className:d.buttonTip},m())," +"," ",s.createElement("span",{className:d.buttonTip},e.creationShortcut.toUpperCase()))),s.createElement(o.u,{offset:{vertical:-12},message:"Turn highlighted text into a snippet to use it later.",showDelay:300},s.createElement("span",{className:d.snippetsCreateBtn__tooltip},"?"))))},40293:(e,t,n)=>{n.d(t,{M:()=>l});var s=n(90023),i=n(92379),r=n(79608),p=n(12518),a=n(58303),o=n(57066);const c={nameEmpty:"Name cannot be empty.",nameTooLong:"Snippet names cannot exceed 30 characters.",textEmpty:"Snippet cannot be empty.",textTooLong:`Snippets cannot exceed ${r.B.CONTENT_LENGTH_LIMIT} characters.`},l=e=>{const[t,n]=i.useState(""),[l,d]=i.useState(e.content),[u,h]=i.useState(""),[m,_]=i.useState(""),g=(t,n)=>{(0,s.zG)(r.B.validate(t,n,c),p.g_((e=>{(0,s.zG)(e.nameError,a.g_((()=>h("")),h)),(0,s.zG)(e.contentError,a.g_((()=>_("")),_))}),(()=>{e.addSnippet(t,n),h(""),_("")})))};return i.createElement("div",{className:o.snippetsEditor,onKeyUp:e=>{"Enter"===e.key&&g(t,l)}},i.createElement("div",{className:o.snippetsEditor__topWrapper},i.createElement("input",{onMouseDown:e=>e.stopPropagation(),onChange:e=>{const t=e.target;n(t.value)},autoFocus:!0,className:o.snippetsEditor__topWrapper_name,placeholder:"New snippet",name:"snippet-name-input"}),u.length?i.createElement("div",{className:o.snippetsEditor__topWrapper_nameError},u):null,i.createElement("textarea",{onMouseDown:e=>e.stopPropagation(),onChange:e=>{const t=e.target;d(t.value)},className:o.snippetsEditor__topWrapper_content,placeholder:"Write a snippet of text that can be used again and again.",value:l,name:"snippet-content-input"}),m.length?i.createElement("div",{className:o.snippetsEditor__topWrapper_contentError},m):null),i.createElement("div",{className:o.snippetsEditor__bottomWrapper},i.createElement("div",{className:o.snippetsEditor__bottomWrapper_logo},i.createElement("svg",{viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M10.97,0C4.912,0 0,4.91 0,10.968C0,17.026 4.912,21.938 10.97,21.938C17.03,21.938 21.94,17.026 21.94,10.968C21.94,4.91 17.03,0 10.97,0ZM17.133,16.713C17.133,17.169 16.748,17.529 16.276,17.443C15.916,17.379 15.696,17.041 15.696,16.677L15.696,15.97L15.821,15.188C14.601,16.595 12.827,17.401 10.965,17.394C7.281,17.394 4.315,14.344 4.528,10.612C4.713,7.402 7.308,4.746 10.514,4.532C12.978,4.366 15.166,5.609 16.384,7.454L16.38,7.454C16.572,7.864 16.484,8.24 16.163,8.464C16.038,8.552 15.889,8.599 15.736,8.599C15.494,8.599 15.267,8.48 15.128,8.282L15.128,8.274C14.246,7.044 12.708,6.007 10.956,6.007C7.593,6.007 5.012,9.377 6.368,12.912C6.965,14.468 8.38,15.582 10.028,15.84C12.051,16.158 13.902,15.462 14.968,13.898L14.302,14.015L13.152,14.015C12.788,14.015 12.45,13.795 12.385,13.435C12.3,12.965 12.66,12.58 13.115,12.58L17.133,12.58L17.133,16.713Z"}))),i.createElement("div",{className:o.snippetsEditor__bottomWrapper_text},"This snippet will be added to your default collection. To use it later, type",i.createElement("span",{className:o.buttonTip},e.triggerSequence)),i.createElement("div",{className:o.snippetsEditor__bottomWrapper_buttons},i.createElement("div",{onClick:()=>e.dismiss(),className:o.snippetsEditor__bottomWrapper_cancelBtn,"data-name":"cancel-snippet-button"},"Cancel"),i.createElement("div",{onClick:()=>g(t,l),className:o.snippetsEditor__bottomWrapper_saveBtn,"data-name":"save-snippet-button"},"Save"))))}},78136:(e,t,n)=>{n.d(t,{q:()=>i});var s=n(92379);const i=e=>s.createElement("div",{onKeyDown:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation()},e.children)},57066:e=>{e.exports={snippetsEditor:"igUqv",snippetsEditor__topWrapper:"NdPJC",snippetsEditor__topWrapper_name:"AQyZX",snippetsEditor__topWrapper_nameError:"VYFmy",snippetsEditor__topWrapper_content:"lyWj9",snippetsEditor__topWrapper_contentError:"h8EXg",snippetsEditor__bottomWrapper:"gplIn",snippetsEditor__bottomWrapper_logo:"TMR5J",snippetsEditor__bottomWrapper_text:"XTBlB",snippetsEditor__bottomWrapper_buttons:"V71h0",snippetsEditor__bottomWrapper_cancelBtn:"QjlVw",snippetsEditor__bottomWrapper_saveBtn:"m3H6c",snippetsCreateBtn:"hWTDz",snippetsCreateBtn__logo:"gw5Ma",snippetsCreateBtn__textGroup:"dJ_Sb",snippetsCreateBtn__text:"j4i2d",snippetsCreateBtn__shortcut:"zGRMe",snippetsCreateBtn__tooltip:"EOOEz",snippetsCard:"RuyGy",snippetsCard__snippets:"JendO",snippetsCard__snippet:"UNhhl",snippetsCard__snippet_active:"a_Eej","snippetsCard__snippet-logo":"EIQls","snippetsCard__snippet-logo-personal":"PQHUg","snippetsCard__snippet-logo-global":"luE5K","snippetsCard__snippet-name":"JhypS","snippetsCard__snippet-name-match":"h9hHI","snippetsCard__snippet-content":"uDeBL","snippetsCard__snippet-content-match":"veKIf",snippetsCard__footer:"g1Jue","snippetsCard__footer-logo":"Gd_W9","snippetsCard__footer-shortcut":"eFTGO","snippetsCard__footer-hints":"OYNqN","snippetsCard__footer-menuButton":"Wvuh7","snippetsCard__footer-menuButton_active":"jP25n","snippetsCard__footer-editShortcut":"iBiq4","snippetsCard__footer-menu":"THTqk","snippetsCard__footer-menuItem":"azm2J","snippetsCard__footer-menuItem-text":"n1zYx","snippetsCard__footer-menuItem-icon":"V5lh4","snippetsCard__footer-menuItem-textGroup":"M7kb8",snippetsCard__empty:"b9RUX","snippetsCard__empty-pic":"j3NQL","snippetsCard__empty-title":"fJLFQ","snippetsCard__empty-shortcut":"DT7J3",buttonTip:"gLNn3",buttonTip__group:"mvPjS"}}}]);