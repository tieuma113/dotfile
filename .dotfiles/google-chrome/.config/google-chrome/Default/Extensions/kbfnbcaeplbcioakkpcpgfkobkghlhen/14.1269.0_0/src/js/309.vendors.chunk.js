(self.webpackChunk=self.webpackChunk||[]).push([[309],{9363:(e,t,r)=>{r.d(t,{T5:()=>v,YX:()=>u,a9:()=>q,v0:()=>h,yn:()=>k});var n=r(62482),s=r(24961),i=r(36661),a=(0,i.S)((function(e){return(0,s.wf)(o(e),e.struct({}))(e)})),o=(0,i.S)((function(e){return e.struct({id:e.number,agentId:e.string,correlationId:e.string})})),u=(0,i.S)((function(e){return(0,s.wf)(o(e),e.struct({}))(e)})),c=((0,i.S)((function(e){return h(e)})),(0,i.S)((function(e){var t;return e.sum("kind")(((t={}).sensitivity=l(e),t.badRequest=d(e),t.serviceLimitExceeded=f(e),t.unsupportedLanguage=g(e),t.updateClient=p(e),t.backendError=m(e),t.other=_(e),t))}))),l=(0,i.S)((function(e){return e.struct({kind:e.literal("sensitivity")})})),d=(0,i.S)((function(e){return e.intersect(e.partial({errorCode:e.number}))(e.struct({kind:e.literal("badRequest")}))})),f=(0,i.S)((function(e){return e.struct({kind:e.literal("serviceLimitExceeded")})})),g=(0,i.S)((function(e){return e.struct({kind:e.literal("unsupportedLanguage")})})),p=(0,i.S)((function(e){return e.struct({kind:e.literal("updateClient")})})),m=(0,i.S)((function(e){return e.struct({kind:e.literal("backendError")})})),_=(0,i.S)((function(e){return e.struct({kind:e.literal("other"),type:e.string})})),h=(0,i.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:request"]=S(e),t["agent_generic:response"]=v(e),t["agent_generic:feedbackRequest"]=b(e),t["agent_generic:feedbackResponse"]=k(e),t["agent_generic:error"]=q(e),t))})),S=(0,i.S)((function(e){return(0,s.wf)(a(e),o(e),e.struct({action:e.literal("agent_generic:request"),commandId:e.string,payload:e.string}))(e)})),v=(0,i.S)((function(e){return(0,s.wf)(o(e),u(e),e.struct({action:e.literal("agent_generic:response"),payload:e.string,kind:R(e)}))(e)})),b=(0,i.S)((function(e){return(0,s.wf)(a(e),o(e),e.struct({action:e.literal("agent_generic:feedbackRequest"),eventName:e.string,eventData:e.string}))(e)})),k=(0,i.S)((function(e){return(0,s.wf)(o(e),u(e),e.struct({action:e.literal("agent_generic:feedbackResponse"),errorMessage:e.string,result:w(e)}))(e)})),q=(0,i.S)((function(e){return(0,s.wf)(o(e),u(e),e.struct({action:e.literal("agent_generic:error"),errorType:c(e),title:e.string,details:e.string}))(e)})),w=(0,s.Dd)(n.e),R=(0,s.Dd)(n.P);(0,i.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:request"]=S(e),t["agent_generic:feedbackRequest"]=b(e),t))})),(0,i.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:request"]=S(e),t["agent_generic:response"]=v(e),t["agent_generic:feedbackRequest"]=b(e),t["agent_generic:feedbackResponse"]=k(e),t["agent_generic:error"]=q(e),t))})),(0,i.S)((function(e){var t;return e.sum("action")(((t={})["agent_generic:response"]=v(e),t["agent_generic:feedbackResponse"]=k(e),t["agent_generic:error"]=q(e),t))}))},62482:(e,t,r)=>{var n,s;r.d(t,{P:()=>s,e:()=>n}),function(e){e.Success="success",e.FailedValidation="failed_validation",e.Error="error"}(n||(n={})),function(e){e.Final="final",e.Partial="partial"}(s||(s={}))},98705:(e,t,r)=>{r.d(t,{g:()=>n,u:()=>i});var n=(e=>(e.Forbidden="Forbidden: User not assigned to feature",e.Unauthorized="Unauthorized: User not assigned to feature",e.UnprocessableContent="Document did not pass pre-filtering",e.Sensitivity="Document did not pass sensitivity filtering",e.InternalServerError="Internal server error",e.ServiceLimitExceeded="Service limit exceeded",e.UnsupportedLanguage="Unsupported language",e.UpdateClient="Client has to be updated to process the result of the requested action",e.Other="Other error",e.NothingToImprove="Nothing to improve",e))(n||{});const s=class e extends Error{constructor(e,t){super(`[${e}] ${t}`),this.kind=e}static fromMessageError(t){return new e(e.getKind(t),t.title)}};s.getKind=e=>{switch(e.errorType.kind){case"sensitivity":return"Document did not pass sensitivity filtering";case"serviceLimitExceeded":return"Service limit exceeded";case"unsupportedLanguage":return"Unsupported language";case"updateClient":return"Client has to be updated to process the result of the requested action";case"backendError":return"Internal server error";case"badRequest":switch(e.errorType.errorCode){case 403:return"Forbidden: User not assigned to feature";case 401:return"Unauthorized: User not assigned to feature";case 422:return"Document did not pass pre-filtering";default:return"Internal server error"}default:return"Other error"}};let i=s},28357:(e,t,r)=>{r.d(t,{W:()=>n});var n,s=r(35547),i=r(46189),a=r(55341),o=r(64443),u=r(92054),c=r(68822),l=r(12518),d=r(90023),f=r(67177),g=r(98705),p=r(62482),m=Object.defineProperty,_=Object.defineProperties,h=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&k(e,r,t[r]);if(S)for(var r of S(t))b.call(t,r)&&k(e,r,t[r]);return e},w=(e,t)=>_(e,h(t));(n||(n={})).create=e=>{const t=o.C8.Logging.getLogger("AgentGenericService"),r=new c.PJ(6e4,"AgentGeneric"),n=new c.PJ(5e3,"AgentGenericFeedback"),m=new Map,_=e=>e.action.startsWith("agent_generic")?(((0,s._j)(e)||(0,s.OK)(e))&&(e=>{const i=m.get(e.correlationId);i?(0,s._j)(e)?(t.debug("Received streamed response",e),i.next(l.F2(e)),"final"===e.kind&&(i.complete(),m.delete(e.correlationId))):(0,s.OK)(e)&&(t.debug("Received streamed error",e),i.next(l.t$(g.u.fromMessageError(e))),i.complete(),m.delete(e.correlationId)):((0,s._j)(e)&&"final"===e.kind&&(t.debug("Received message",e),r.onValue(e.correlationId,e)),(0,s.OK)(e)&&(t.debug("Received error",e),r.onError(e.correlationId,g.u.fromMessageError(e))),(0,s.wP)(e)&&(t.debug("Received feedback response",e),e.result===p.e.Success?n.onValue(e.correlationId,e):n.onError(e.correlationId,{name:e.result,message:e.errorMessage})))})(e),i._.Result.STOP_HANDLING):i._.Result.CONTINUE_HANDLING;return e.registerExternalMessageHandler(_),{request:(n,s)=>((n,s)=>{t.debug("Sending message",n);const i=(0,u.Z)();return(0,d.zG)(e.enqueueExternalCommand((({id:e})=>q({id:e,correlationId:i},n))),f.tS((()=>()=>r.watchRequest(i,null==s?void 0:s.timeout))))})(w(q({},n),{action:"agent_generic:request"}),s),requestWithStreaming:r=>(r=>{t.debug("Sending message with streaming",r);const n=(0,u.Z)(),s=new a.t;return m.set(n,s),(0,d.zG)(e.enqueueExternalCommand((({id:e})=>q({id:e,correlationId:n},r))),f.UI((()=>s)))})(w(q({},r),{action:"agent_generic:request"})),sendFeedback:r=>((r,s)=>{t.debug("Sending feedback message",r);const i=(0,u.Z)();return(0,d.zG)(e.enqueueExternalCommand((({id:e})=>q({id:e,correlationId:i},r))),f.tS((()=>()=>n.watchRequest(i,null==s?void 0:s.timeout))))})(w(q({},r),{action:"agent_generic:feedbackRequest"})),dispose:()=>{e.unregisterExternalMessageHandler(_)}}}},35547:(e,t,r)=>{r.d(t,{OK:()=>o,_j:()=>a,rE:()=>u,wP:()=>c});var n=r(6824),s=r(36661),i=r(9363);const a=s.n(n.Schemable)(i.T5).is,o=s.n(n.Schemable)(i.a9).is,u=s.n(n.Schemable)(i.YX).is,c=(s.n(n.Schemable)(i.v0).is,s.n(n.Schemable)(i.yn).is)},29594:(e,t,r)=>{r.d(t,{Js:()=>w,Ob:()=>I,QD:()=>y,ZF:()=>v,a9:()=>E,iN:()=>S,k3:()=>C,rt:()=>R,v0:()=>h});var n=r(9119),s=r(24961),i=r(36661),a=(0,i.S)((function(e){return(0,s.wf)(o(e),e.struct({}))(e)})),o=(0,i.S)((function(e){return e.struct({id:e.number,fileIdentifier:e.string})})),u=(0,i.S)((function(e){return(0,s.wf)(o(e),e.struct({}))(e)})),c=((0,i.S)((function(e){return h(e)})),(0,i.S)((function(e){var t;return e.sum("kind")(((t={}).sensitivity=l(e),t.unsupportedLanguage=d(e),t.failedProcessing=f(e),t.checksumMismatch=g(e),t.unsupportedFileFormat=p(e),t.other=m(e),t))}))),l=(0,i.S)((function(e){return e.struct({kind:e.literal("sensitivity")})})),d=(0,i.S)((function(e){return e.struct({kind:e.literal("unsupportedLanguage")})})),f=(0,i.S)((function(e){return e.struct({kind:e.literal("failedProcessing")})})),g=(0,i.S)((function(e){return e.struct({kind:e.literal("checksumMismatch")})})),p=(0,i.S)((function(e){return e.struct({kind:e.literal("unsupportedFileFormat")})})),m=(0,i.S)((function(e){return e.struct({kind:e.literal("other"),type:e.string})})),_=(0,s.Dd)(n.d),h=(0,i.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlRequest"]=S(e),t["assistant_file_upload:uploadUrlResponse"]=v(e),t["assistant_file_upload:processFile"]=w(e),t["assistant_file_upload:success"]=R(e),t["assistant_file_upload:error"]=E(e),t["assistant_file_upload:removePersistedData"]=y(e),t["assistant_file_upload:removeFile"]=I(e),t["assistant_file_upload:fileRemoved"]=C(e),t))})),S=(0,i.S)((function(e){return(0,s.wf)(a(e),o(e),e.struct({action:e.literal("assistant_file_upload:uploadUrlRequest")}))(e)})),v=(0,i.S)((function(e){return(0,s.wf)(o(e),u(e),e.struct({action:e.literal("assistant_file_upload:uploadUrlResponse"),s3UploadPath:e.string}))(e)})),b=(0,i.S)((function(e){var t;return e.sum("kind")(((t={}).customTone=k(e),t.customAudience=q(e),t))})),k=(0,i.S)((function(e){return e.struct({kind:e.literal("customTone"),name:e.string})})),q=(0,i.S)((function(e){return e.struct({kind:e.literal("customAudience"),name:e.string})})),w=(0,i.S)((function(e){return(0,s.wf)(a(e),o(e),e.intersect(e.partial({useCaseParameters:b(e)}))(e.struct({action:e.literal("assistant_file_upload:processFile"),fileFormat:_(e),useCase:P(e)})))(e)})),R=(0,i.S)((function(e){return(0,s.wf)(o(e),u(e),e.struct({action:e.literal("assistant_file_upload:success"),fileFormat:_(e),fileContent:e.string}))(e)})),E=(0,i.S)((function(e){return(0,s.wf)(o(e),u(e),e.struct({action:e.literal("assistant_file_upload:error"),errorType:c(e),title:e.string}))(e)})),x=(0,i.S)((function(e){var t;return e.sum("kind")(((t={}).customTone=k(e),t.customAudience=q(e),t))})),y=(0,i.S)((function(e){return(0,s.wf)(a(e),o(e),e.intersect(e.partial({useCaseParameters:x(e)}))(e.struct({action:e.literal("assistant_file_upload:removePersistedData"),useCase:P(e)})))(e)})),I=(0,i.S)((function(e){return(0,s.wf)(a(e),o(e),e.struct({action:e.literal("assistant_file_upload:removeFile")}))(e)})),C=(0,i.S)((function(e){return(0,s.wf)(o(e),u(e),e.struct({action:e.literal("assistant_file_upload:fileRemoved")}))(e)})),P=(0,s.Dd)(n._);(0,i.S)((function(e){return e.struct({supportedFileFormats:e.readonly(e.array(_(e))),maxFileSize:e.number})})),(0,i.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlRequest"]=S(e),t["assistant_file_upload:processFile"]=w(e),t["assistant_file_upload:removePersistedData"]=y(e),t["assistant_file_upload:removeFile"]=I(e),t))})),(0,i.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlRequest"]=S(e),t["assistant_file_upload:uploadUrlResponse"]=v(e),t["assistant_file_upload:processFile"]=w(e),t["assistant_file_upload:success"]=R(e),t["assistant_file_upload:error"]=E(e),t["assistant_file_upload:removePersistedData"]=y(e),t["assistant_file_upload:removeFile"]=I(e),t["assistant_file_upload:fileRemoved"]=C(e),t))})),(0,i.S)((function(e){var t;return e.sum("action")(((t={})["assistant_file_upload:uploadUrlResponse"]=v(e),t["assistant_file_upload:success"]=R(e),t["assistant_file_upload:error"]=E(e),t["assistant_file_upload:fileRemoved"]=C(e),t))}))},9119:(e,t,r)=>{var n,s;r.d(t,{_:()=>s,d:()=>n}),function(e){e.Txt="txt",e.Rtf="rtf",e.Doc="doc",e.Docx="docx",e.Pdf="pdf",e.Md="md",e.Json="json",e.Xml="xml",e.Html="html",e.Htm="htm",e.Csv="csv",e.Xls="xls",e.Xlsx="xlsx",e.Ppt="ppt",e.Pptx="pptx"}(n||(n={})),function(e){e.Assistant="assistant",e.CustomTone="customTone",e.CustomAudience="customAudience",e.AiGraderRubrics="aiGraderRubrics"}(s||(s={}))},20154:(e,t,r)=>{r.d(t,{Iz:()=>g,Sy:()=>f,WT:()=>c,Xl:()=>a,bm:()=>l,eJ:()=>p,gs:()=>d,r2:()=>o,wV:()=>u});var n=r(6824),s=r(36661),i=r(29594);const a=s.n(n.Schemable)(i.Js).is,o=s.n(n.Schemable)(i.rt).is,u=s.n(n.Schemable)(i.a9).is,c=s.n(n.Schemable)(i.iN).is,l=s.n(n.Schemable)(i.ZF).is,d=s.n(n.Schemable)(i.Ob).is,f=s.n(n.Schemable)(i.k3).is,g=s.n(n.Schemable)(i.QD).is,p=s.n(n.Schemable)(i.v0).is},25077:(e,t,r)=>{r.d(t,{Dl:()=>c,Xl:()=>u,oy:()=>l,ps:()=>o});var n=r(6824),s=r(36661),i=r(52168),a=r(42203);const o=e=>"action"in e&&"text_actions"===e.action,u=(0,s.n)(n.Schemable)(i.nO).is,c=(0,s.n)(n.Schemable)(i.WV).is,l=(0,s.n)(n.Schemable)(i.a9).is;(0,s.n)(n.Schemable)(i.YX).is,(0,s.n)(n.Schemable)(i.v0).is,(0,a.W9)((0,a.Kg)(u,c),(e=>"partial"===e.kind)),(0,a.W9)((0,a.Kg)(u,c),(e=>"final"===e.kind))},46189:(e,t,r)=>{var n,s,i;r.d(t,{_:()=>n}),s=n||(n={}),(i=s.Result||(s.Result={}))[i.CONTINUE_HANDLING=0]="CONTINUE_HANDLING",i[i.STOP_HANDLING=1]="STOP_HANDLING"},68822:(e,t,r)=>{r.d(t,{EP:()=>o,PJ:()=>c,W5:()=>a,YG:()=>u});var n=r(12518),s=r(64443),i=r(32103);class a extends i.sH{constructor(e){super(Boolean(e)?e:"Timeout"),this.name="TimeoutError"}static isTimeoutError(e){return e instanceof a}}class o extends i.sH{constructor(e){super(Boolean(e)?e:"Dropped"),this.name="DroppedError"}static isDroppedError(e){return e instanceof o}}class u extends i.sH{constructor(e){super(Boolean(e)?e:"Not Connected to WS"),this.name="NotConnectedError"}static isNotConnectedError(e){return e instanceof u}}class c{constructor(e=5e3,t="",r=new a){this._timeout=e,this.name=t,this._timeoutError=r,this._requests=new Map,this._log=s.C8.Logging.getLogger("coreclients.valueRequester"+(t.length>0?"."+t:""))}watchRequest(e,t=this._timeout){return this._startRequestWatch(e,t)}hasRequest(e){return this._requests.has(e)}onValue(e,t){this._stopRequest(e,n.F2(t))}onError(e,t){this._log.trace(`onError:(${e})`),this._stopRequest(e,n.t$(t))}clear(e){this._log.trace("clearing request watches: "+e),this._requests.forEach(((t,r)=>{this.onError(r,new o(`command (${this.name}) can not be executed, reason: ${e}`))}))}_startRequestWatch(e,t){this._log.debug(`Starting request watch: ${e}`),(0,i.kG)(!this._requests.has(e),"must not start watch for same request twice, request already watched: "+e);const r={};return r.promise=new Promise((e=>{r.resolve=e})),r.timer=self.setTimeout((()=>this._stopRequest(e,n.t$(this._timeoutError))),t),this._requests.set(e,r),r.promise}_stopRequest(e,t){this._log.trace(`_stopRequest: stopping request watch: ${e}`,t);const r=this._requests.get(e);void 0===r?this._log.warn("Got result for unknown request or request has already expired.",{id:e,result:t}):(clearTimeout(r.timer),r.resolve(t),this._requests.delete(e))}}}}]);