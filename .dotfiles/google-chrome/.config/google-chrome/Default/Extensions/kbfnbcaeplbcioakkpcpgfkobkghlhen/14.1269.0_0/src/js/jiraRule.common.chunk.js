(self.webpackChunk=self.webpackChunk||[]).push([[5213],{71739:(e,t,a)=>{a.d(t,{v:()=>k});var i=a(70843),n=a(44287),r=a(90023),o=a(12518),c=a(49260),l=a(42203),s=a(948),d=a(78335),g=a(15082),u=a(85452),p=a(26742);var m=a(13391),f=a(58303),v=a(36769),h=a(78103),x=a(27079);const C=e=>e.createDocument?e.createDocument:t=>x._A.create((e=>e.getDocumentId?e.getDocumentId:()=>{})(e)(t));var y=a(55673),I=a(48490),S=a(15838);const F={ruleName:"isKnowledgeHubEnabled",match:(e,t)=>"test"===t.experimentClient.getTreatment(i.p.KnowledgeHubAtlassian)},T=".ak-renderer-document",k=(M="Jira",w=e=>({createLayout:()=>new n.A7(e.field),validationRules:[F,{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(T)}],textMap:{createFieldTextMap:e=>new u.Z(e,((e,t)=>u.Z.defaultFilterNode(e,t)&&(e=>!e.classList.contains("expand-content-wrapper"))(e)))}}),b=T,{kind:S.A.readonly,name:`readonlyContent.${M}`,contentSelector:b,match:e=>{const t=((e,t,a,i)=>{const n=a(e),o=n.target||e.field,c=n.textMap||{createFieldTextMap:u.Z.create},m=(n.createSelectionSource||(()=>(0,g.B)(o)))();return{target:o,initialState:e.state,integrationName:`contentEditable.${t}`,validationRules:[{ruleName:"notABody",match:(0,l.ff)(d.XD)},{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(i)}],textMap:c,expiration:d.Jj,createSelectionSource:()=>(0,g.B)(o),mapChange:r.yR,...n,selectionSource:m,createTextObserver:()=>new p.j(o,s.k.fromDiff,m,void 0,c.createFieldTextMap)}})(e,M,w,b);return(0,r.zG)((0,y.O)(t.target,e,t.integrationName,t.validationRules),o.UI((()=>({targetField:t.target,matchExpires:t.expiration(t.target),execute:e=>{var a;const i=I.Y.decorate((0,r.zG)(((e,t)=>{var a;const i=t.createTextObserver(),n=t.createHighlightsFilterFactory?t.createHighlightsFilterFactory(i):h.u,r=t.createLayout(t.target);return{doc:C(e)(t.target),textField:t.target,textFieldId:e.fieldId,domain:e.pageContext.domain,url:e.pageContext.url,layout:r,createCheckingService:t=>e.createCheckingService(t),mapChange:t.mapChange,state:m.h.create(t.initialState),actions:e.actions,fieldSettings:e.fieldSettings,notifications:(0,v.Cq)(e.app.notifications,"ctx.app.notifications"),gnar:e.gnar,productMetricsCSClient:e.productMetricsCSClient,felog:e.felog,config:e.pageContext.config,experimentClient:e.experimentClient,isCurrentFieldFocused:m.h.create(!1),selectionSource:t.selectionSource,textObserver:i,createAlertProcessor:t.createAlertProcessor,createTextRevisionManager:t.createTextRevisionManager,geometryProvider:t.highlightGeometryProvider,customizations:{...t.customizations,getDocEvents:(null===(a=t.customizations)||void 0===a?void 0:a.getDocEvents)||e.getDocEvents,isGbuttonVisible:m.h.create(!1)},highlightsFilterFactory:n,iframeConnectionId:e.iframeConnectionId,eventPropagationHandler:e.eventPropagationHandler,forceIntegrationEntirelyInsideIframe:e.forceIntegrationEntirelyInsideIframe,pageIntegrationId:e.pageContext.id,integrationName:t.integrationName,fieldIntegrationStore:e.pageContext.fieldIntegrationStore,vBarsIntegrationInfo:f.YP,integrationResultTracker:e.integrationResultTracker}})(e,t),c.kC,r.a9),t.integrationName,t.target);return null===(a=t.onCreate)||void 0===a||a.call(t),{update(e){i.update(e)},dispose(){var e;i.dispose(),null===(e=t.onDispose)||void 0===e||e.call(t)}}},desiredCustomizations:{capiStartSessionOptions:{...e.capiStartSessionOptions,mode:"READ_ONLY"}}}))))}});var M,w,b},5529:(e,t,a)=>{a.r(t),a.d(t,{Jira:()=>n});var i,n,r=a(44287),o=a(22234),c=a(22086),l=a(55673),s=a(71739),d=a(3670),g=a(18122),u=a(36344),p=a(64271),m=a(14969),f=a(29479),v=a(58303),h=a(78335),x=a(15307),C=a(26761),y=a(45523),I=a(85452);function S(){return x.M.generic((e=>({overwriteGenericOpts:{validationRules:C.u,createLayout:()=>new r.A7(e.field.closest(".ak-editor-content-area, .content-area")||e.field),expiration:e=>{const t=e.closest("body > span > div"),a=t?y.x.observeStyle(t).pipe((0,m.P)((e=>"0"===e.opacity)),(0,f.h)(void 0)):(0,u.c)();return(0,p.T)((0,h.Jj)(e),a)},textMap:{createFieldTextMap:i.createTextMap},getVBarsIntegrationInfo:t=>v.G({kind:"jiraProseMirror",integrationName:t,domain:e.pageContext.domain,isInsideIFrame:!1})}})))}!function(e){e.createTextMap=t=>new I.Z(t,(t=>!e.hasPlaceholder(t))),e.hasPlaceholder=e=>!!e.querySelector(".placeholder-decoration")}(i||(i={})),function(e){const t=S(),a=o.T.textarea("Jira.issuePageDescription",(e=>({validate:(e,t)=>(0,l.O)(e.field,e,t,[{ruleName:"isNearDescriptionWikiEditField",match:e=>!!e.closest("#description-wiki-edit")}]),createLayout:()=>new r.A7(e.field)})));e.page=(0,d.$W)({name:"JIRA-readonly",domain:g.fI},[t,a,(0,c.q)("Jira"),o.T.contentEditable("Jira",(e=>({createLayout:()=>new r.A7(e.field)}))),o.T.textarea("Jira",(e=>({createLayout:()=>new r.A7(e.field)}))),s.v])}(n||(n={}))}}]);