(self.webpackChunk=self.webpackChunk||[]).push([[5260],{88257:(e,t,s)=>{s.d(t,{D:()=>m,T:()=>o});var i,n,r,o,a=s(13391),c=s(32103),l=s(20161),d=s(84714),u=s(59179),v=e=>{throw TypeError(e)},p=(e,t,s)=>t.has(e)||v("Cannot "+s),h=(e,t,s)=>(p(e,t,"read from private field"),s?s.call(e):t.get(e)),b=(e,t,s)=>t.has(e)?v("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),y=(e,t,s,i)=>(p(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);class m{constructor(e){b(this,i),b(this,n),b(this,r),y(this,i,new DisposableStack),y(this,n,h(this,i).adopt(new Map,(e=>{e.forEach((e=>e[Symbol.dispose]())),e.clear()}))),y(this,r,a.h.create({kind:"noActiveSession",session:null})),this.activeSession=h(this,r).view();const t=e.activeDocument.pipe((0,l.w)((t=>{var s;return null!==t&&t.supportsAgents&&e.canCreateSession?null==(s=e.canCreateSession)?void 0:s.call(e,t.id).pipe((0,u.U)((e=>e?t:null))):(0,d.of)(t)})));h(this,i).adopt(t.subscribe((t=>{if(null===t)return void h(this,r).set({kind:"noActiveSession",session:null});if(!t.supportsAgents)return void h(this,r).set({kind:"documentNotSupported",session:null});const s=h(this,n).get(t.id);if(s)h(this,r).set({kind:"activeSession",session:s});else{const s=e.createNewSession(t.id);h(this,n).set(t.id,s),h(this,r).set({kind:"activeSession",session:s})}})),(e=>e.unsubscribe())),h(this,i).adopt(e.documentSessionDisposed.subscribe((e=>this.deleteSession(e))),(e=>e.unsubscribe()))}deleteSession(e){const t=h(this,n).get(e);t&&(h(this,n).delete(e),t===h(this,r).get().session&&h(this,r).set({kind:"noActiveSession",session:null}),t[Symbol.dispose]())}[Symbol.dispose](){h(this,i).dispose()}}i=new WeakMap,n=new WeakMap,r=new WeakMap,(o||(o={})).match=function(e){return t=>{switch(t.kind){case"activeSession":return e.activeSession(t.session);case"noActiveSession":return e.noActiveSession();case"documentNotSupported":return e.documentNotSupported();default:(0,c.L0)(t)}}}},75588:(e,t,s)=>{function i(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(e,t){return e.get(i(e,t))}function o(e,t,s){n(e,t),t.set(e,s)}function a(e,t,s){return e.set(i(e,t),s),s}function c(e,t){n(e,t),t.add(e)}function l(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{Rh:()=>c,SH:()=>a,_x:()=>l,mj:()=>i,sv:()=>o,y1:()=>r})},64152:(e,t,s)=>{function i(e,t){return null!=t?"".concat(t,"/").concat(e):e}s.d(t,{t:()=>re});var n=s(75588),r=s(59692);function o(e){return(0,r.r)()&&JSON.parse(JSON.stringify(e)),e}function a(){return performance.timeOrigin+performance.now()}function c(e){const{key:t,parameterValue:s,prefix:n}=e;return"".concat(i(t,n)).concat(s?"/".concat(s):"")}function l(e,t,s,i){return!("publish"!==e.kind||e.key!==i||void 0!==e.toClientId&&e.toClientId!==t||void 0!==e.toSubscriptionId&&e.toSubscriptionId!==s||void 0!==e.excludeSubscriptionIds&&e.excludeSubscriptionIds.includes(s))}function d(e,t){const s=Object.keys(t).find((t=>{const s=t.match(/^(.*)\/:.*$/);if(!s)return!1;const[i,n]=s;return n===e}));return null!=s?s:e}var u=s(48739),v=new WeakMap,p=new WeakMap,h=new WeakMap,b=new WeakMap,y=new WeakMap,m=new WeakMap,f=new WeakMap,S=new WeakMap;class k{constructor(e){var t,s;(0,n.sv)(this,v,new DisposableStack),(0,n.sv)(this,p,void 0),(0,n.sv)(this,h,void 0),(0,n.sv)(this,b,void 0),(0,n.sv)(this,y,void 0),(0,n.sv)(this,m,void 0),(0,n.sv)(this,f,!1),(0,n.sv)(this,S,void 0),(0,n.SH)(p,this,e.port),(0,n.SH)(h,this,e.schema),(0,n.SH)(y,this,e.keyPrefix),(0,n.SH)(m,this,e.eventFactory),(0,n.SH)(b,this,e.clientId),(0,n.SH)(f,this,null!==(t=e.ensureSerializableInDevMode)&&void 0!==t&&t),(0,n.SH)(S,this,null!==(s=e.generateSubscriptionUUID)&&void 0!==s?s:e=>"".concat((0,u.v)(),"(").concat(e,")"))}getEvent(e,t){const s=void 0!==t?d(String(e),(0,n.y1)(h,this)):String(e),i=(0,n.y1)(h,this)[s],r=c({key:e,parameterValue:t,prefix:(0,n.y1)(y,this)}),o={subscribe:e=>{const t=(0,n.y1)(v,this).use(new DisposableStack),s=(0,n.y1)(S,this).call(this,r);return t.defer((()=>{var t;(0,n.y1)(p,this).send({kind:"unsubscribe",subscriptionId:s}),null==e||null===(t=e.complete)||void 0===t||t.call(e)})),t.use((0,n.y1)(p,this).subscribe((o=>{if(l(o,(0,n.y1)(b,this),s,r))try{var a;const t=i.codec?i.codec.decode(o.value):o.value;null==e||null===(a=e.next)||void 0===a||a.call(e,t)}catch(s){var c;null==e||null===(c=e.error)||void 0===c||c.call(e,s instanceof Error?s:new Error(String(s))),t.dispose()}}))),(0,n.y1)(p,this).send({kind:"subscribe",key:r,timestamp:a(),clientId:(0,n.y1)(b,this),subscriptionId:s}),{unsubscribe:()=>t.dispose()}}};return(0,n.y1)(m,this).call(this,o)}emit(e,t,s){const i=void 0!==s?d(String(e),(0,n.y1)(h,this)):String(e),r=(0,n.y1)(h,this)[i],l=c({key:e,parameterValue:s,prefix:(0,n.y1)(y,this)}),u=r.codec?r.codec.encode(t):t;(0,n.y1)(f,this)&&o(u),(0,n.y1)(p,this).send({kind:"publish",key:l,value:u,timestamp:a(),clientId:(0,n.y1)(b,this)})}[Symbol.dispose](){(0,n.y1)(v,this).dispose()}}var w=s(7167),g=new WeakMap,I=new WeakMap,x=new WeakMap,M=new WeakMap,P=new WeakMap,E=new WeakMap,W=new WeakMap,D=new WeakMap,F=new WeakMap,C=new WeakMap,H=new WeakSet;class R{constructor(e){var t,s;(0,n.Rh)(this,H),(0,n.sv)(this,g,new DisposableStack),(0,n.sv)(this,I,void 0),(0,n.sv)(this,x,void 0),(0,n.sv)(this,M,void 0),(0,n.sv)(this,P,!1),(0,n.sv)(this,E,void 0),(0,n.sv)(this,W,void 0),(0,n.sv)(this,D,void 0),(0,n.sv)(this,F,void 0),(0,n.sv)(this,C,new FinalizationRegistry((e=>{(0,n.y1)(I,this).send({kind:"unsubscribe",subscriptionId:e})}))),(0,n.SH)(I,this,e.port),(0,n.SH)(M,this,e.keyPrefix),(0,n.SH)(P,this,null!==(t=e.ensureSerializableInDevMode)&&void 0!==t&&t),(0,n.SH)(W,this,e.writableStateFactory),(0,n.SH)(E,this,e.readableStateFactory),(0,n.SH)(x,this,e.clientId),(0,n.SH)(D,this,e.schema),(0,n.SH)(F,this,null!==(s=e.generateSubscriptionUUID)&&void 0!==s?s:e=>"".concat((0,u.v)(),"(").concat(e,")"))}createState(e,t,s){return(0,n.mj)(H,this,j).call(this,"write",e,t,s)}viewState(e,t,s){return(0,n.mj)(H,this,j).call(this,"read",e,t,s)}[Symbol.dispose](){(0,n.y1)(g,this).dispose()}}function j(e,t,s,i){const r=void 0!==i?d(String(t),(0,n.y1)(D,this)):String(t),u=c({key:t,parameterValue:i,prefix:(0,n.y1)(M,this)}),v=(0,n.y1)(D,this)[r],p=Object.create(null),h=(0,n.y1)(F,this).call(this,u);let b=null;(0,n.y1)(g,this).defer((()=>{var e;null===(e=b)||void 0===e||e.dispose(),b=null}));const y={subscribe:t=>{const i=(0,n.y1)(g,this).use(new DisposableStack);if(b)return(0,w.P)("Already subscribed to remote. Ignoring double subscription."),{unsubscribe:()=>i.dispose()};b=i,i.defer((()=>b=null)),i.use((0,n.y1)(I,this).subscribe((e=>{if(l(e,(0,n.y1)(x,this),h,u))try{var s;const i=v.codec?v.codec.decode(e.value):e.value;null==t||null===(s=t.next)||void 0===s||s.call(t,i)}catch(e){var r;null==t||null===(r=t.error)||void 0===r||r.call(t,e instanceof Error?e:new Error(String(e))),i.dispose()}})));try{const t=v.codec?v.codec.encode(s):s;(0,n.y1)(P,this)&&o(t),(0,n.y1)(I,this).send({kind:"subscribe",timestamp:a(),clientId:(0,n.y1)(x,this),subscriptionId:h,key:u,retain:{kind:e,value:t}})}catch(e){var r;null==t||null===(r=t.error)||void 0===r||r.call(t,e instanceof Error?e:new Error(String(e)))}return i.defer((()=>{var e;(0,n.y1)(C,this).unregister(p),(0,n.y1)(I,this).send({kind:"unsubscribe",subscriptionId:h}),null==t||null===(e=t.complete)||void 0===e||e.call(t)})),{unsubscribe:()=>i.dispose()}}},m="read"===e?(0,n.y1)(E,this).call(this,{subscribable:y,initialValue:s,releaseReference:()=>{var e;return null===(e=b)||void 0===e?void 0:e[Symbol.dispose]()}}):(0,n.y1)(W,this).call(this,{subscribable:y,initialValue:s,publishChangeToRemote:e=>{if(!b)return void(0,w.P)("State has been disposed, ignoring state update.");const t=v.codec?v.codec.encode(e):e;(0,n.y1)(P,this)&&o(t),(0,n.y1)(I,this).send({kind:"publish",timestamp:a(),clientId:(0,n.y1)(x,this),key:u,value:t})},releaseReference:()=>{var e;return null===(e=b)||void 0===e?void 0:e[Symbol.dispose]()}});return(0,n.y1)(C,this).register(m,h,p),m}function A(e){const t=new DisposableStack,s=new R(e);return t.use(s),new Proxy({},{get:(e,i)=>i===Symbol.dispose?()=>t.dispose():{create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,o]=2===t.length?t:[void 0,t[0]];return s.createState(String(i),o,r)},view:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,o]=2===t.length?t:[void 0,t[0]];return s.viewState(String(i),o,r)}}})}var N=s(38605);const T=e=>{const t=new DisposableStack,{subscribe:s,get:i,set:n}=t.use(q(e));return{subscribe:s,get:i,set:n,[Symbol.dispose]:()=>t.dispose()}},V=e=>{const t=new DisposableStack,{subscribe:s,get:i}=t.use(q({...e,publishChangeToRemote:()=>{}}));return{subscribe:s,get:i,[Symbol.dispose]:()=>t.dispose()}},q=e=>{let t=e.initialValue;const s=new N.x,i=new DisposableStack;return i.defer((()=>e.releaseReference())),i.adopt(e.subscribable.subscribe({next:e=>{t=e,s.next()},error:e=>(0,w.P)("Error in SubscribableState subscribable",e),complete:()=>i.dispose()}),(e=>e.unsubscribe())),{subscribe:e=>{var i;null==e||null===(i=e.next)||void 0===i||i.call(e,t);const n=s.subscribe({next:()=>{var s;return null==e||null===(s=e.next)||void 0===s?void 0:s.call(e,t)}});return{unsubscribe:()=>n[Symbol.dispose]()}},get:()=>t,set:i=>{t=i,e.publishChangeToRemote(i),s.next()},[Symbol.dispose]:()=>i.dispose()}};const U={"provider/:serviceInstanceName":(0,s(67546).x)()};function B(e){return A({port:e.port,clientId:e.clientId,keyPrefix:i("@@rpc",e.keyPrefix),schema:U,writableStateFactory:T,readableStateFactory:V})}var O=s(73375);function z(e){return{subscribe:t=>{var s;return null==t||null===(s=t.error)||void 0===s||s.call(t,e),{unsubscribe:()=>{}}}}}function L(e){return new $(e)}var _=new WeakMap,J=new WeakMap,K=new WeakMap,G=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakSet;class ${constructor(e){var t;(0,n.Rh)(this,Z),(0,n.sv)(this,_,new DisposableStack),(0,n.sv)(this,J,void 0),(0,n.sv)(this,K,void 0),(0,n.sv)(this,G,void 0),(0,n.sv)(this,Q,void 0),(0,n.sv)(this,X,!1),(0,n.sv)(this,Y,void 0),(0,n.SH)(J,this,e.port),(0,n.SH)(K,this,e.clientId),(0,n.SH)(G,this,e.serviceName),(0,n.SH)(Q,this,e.keyPrefix),(0,n.SH)(X,this,null!==(t=e.ensureSerializableInDevMode)&&void 0!==t&&t),(0,n.SH)(Y,this,(0,n.y1)(_,this).use(B(e))),(0,n.mj)(Z,this,ee).call(this,e.service,e.schema)}[Symbol.dispose](){return(0,n.y1)(_,this).dispose()}}function ee(e,t){const s=i("rpc:request/".concat((0,n.y1)(G,this)),(0,n.y1)(Q,this)),r="".concat((0,u.v)(),"(").concat(s,")"),o=(0,n.y1)(_,this).adopt(new AbortController,(e=>e.abort()));(0,n.y1)(_,this).defer((()=>{(0,n.y1)(J,this).send({kind:"unsubscribe",subscriptionId:r})})),(0,n.y1)(_,this).use((0,n.y1)(J,this).subscribe((c=>{if(l(c,(0,n.y1)(K,this),r,s)){const s=i("rpc:response/".concat((0,n.y1)(G,this)),(0,n.y1)(Q,this));(0,n.mj)(Z,this,te).call(this,c.value,e,o.signal,t,(0,n.y1)(X,this),(e=>{(0,n.y1)(J,this).send({kind:"publish",clientId:(0,n.y1)(K,this),timestamp:a(),key:s,toClientId:c.clientId,value:e})}))}}))),(0,n.y1)(J,this).send({kind:"subscribe",clientId:(0,n.y1)(K,this),timestamp:a(),key:s,subscriptionId:r}),(0,n.y1)(_,this).use((0,n.y1)(Y,this).provider.create((0,n.y1)(G,this),{clientId:(0,n.y1)(K,this)}))}async function te(e,t,s,i,n,r){const a=function(e){if("object"==typeof e&&null!==e&&"kind"in e&&"request"===e.kind&&"id"in e&&"string"==typeof e.id&&"method"in e&&"string"==typeof e.method)return e;return null}(e);var c;if(null===a)return r({kind:"response",id:null!==(c=se(e))&&void 0!==c?c:"<unknown_request_id>",error:{message:"Invalid request"},done:!0});const l=(d=s,new Promise((e=>{d.aborted?e():d.addEventListener("abort",(()=>e()),{once:!0})})));var d;const u=new DisposableStack,v=()=>{r({kind:"response",id:a.id,error:{message:"Request aborted: ".concat(a.method)},done:!0}),u.dispose()};s.addEventListener("abort",v,{once:!0}),u.defer((()=>s.removeEventListener("abort",v)));try{var p;const e=await Promise.race([t,l.then((()=>null))]);if(null===e)return;if("function"!=typeof e[a.method])return r({kind:"response",id:a.id,error:{message:"Method not found: ".concat(a.method)},done:!0});const s=i[a.method].result.codec,c=(null!==(p=a.params)&&void 0!==p?p:[]).map(((e,t)=>{var s;const n=null===(s=i[a.method].params[t])||void 0===s?void 0:s.codec;try{return n?n.decode(e):e}catch(e){throw new Error(function(e,t){return"Failed to decode parameter at index ".concat(e,": ")+(t instanceof Error?t.message:String(t))}(t,e))}})),d=e[a.method](...c),v=await Promise.race([Promise.resolve(d).then((e=>({status:"ok",response:e}))),l.then((()=>({status:"aborted"})))]);if("aborted"===v.status)return;if("pushStream"===i[a.method].result.kind){if(!v.response||"object"!=typeof v.response||!("subscribe"in v.response)||"function"!=typeof v.response.subscribe)return u.dispose(),r({kind:"response",id:a.id,error:{message:"Method ".concat(a.method," did not return a Subscribable")},done:!0});u.adopt(v.response.subscribe({next:e=>{try{const t=s?s.encode(e):e;n&&o(t),r({kind:"response",id:a.id,result:t,done:!1})}catch(e){r({kind:"response",id:a.id,error:{message:ie(e)},done:!0}),u.dispose()}},error:e=>{r({kind:"response",id:a.id,error:{message:e instanceof Error?e.message:String(e)},done:!0})},complete:()=>{r({kind:"response",id:a.id,done:!0})}}),(e=>e.unsubscribe()))}else try{const e=s?s.encode(v.response):v.response;return r({kind:"response",id:a.id,result:e,done:!0})}catch(e){return r({kind:"response",id:a.id,error:{message:ie(e)},done:!0})}finally{u.dispose()}}catch(e){return u.dispose(),r({kind:"response",id:a.id,error:{message:"Internal error: "+(e instanceof Error?e.message:String(e))},done:!0})}}function se(e){return e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id?e.id:null}function ie(e){return"Internal error: Failed to encode result: "+(e instanceof Error?e.message:String(e))}function ne(e){const t=new DisposableStack;return new Proxy({},{get:(s,n)=>n===Symbol.dispose?()=>t.dispose():{createClient:(s,r)=>{const v=void 0!==s?d(String(n),e.schema):String(n);return t.use(function(e){const t=new DisposableStack,s=t.use(B(e)),n=t.use(s.provider.view(e.serviceName,{clientId:null})),r=(0,O.B)();t.adopt(n.subscribe({next:e=>{null!==e.clientId&&r.resolve()}}),(e=>e.unsubscribe()));const c=i("rpc:request/".concat(e.serviceName),e.keyPrefix),d=i("rpc:response/".concat(e.serviceName),e.keyPrefix),v="".concat((0,u.v)(),"(").concat(c,")"),p=new Map;return t.defer((()=>{e.port.send({kind:"unsubscribe",subscriptionId:v});for(const{observer:e}of p.values()){var t;null==e||null===(t=e.error)||void 0===t||t.call(e,new Error("RPC client disposed"))}p.clear()})),t.use(e.port.subscribe((t=>{if(l(t,e.clientId,v,d)){const e=function(e){return"object"==typeof e&&null!==e&&"kind"in e&&"response"===e.kind&&"id"in e&&"string"==typeof e.id?e:null}(t.value);if(null===e)return;const l=p.get(e.id);if(l)if((e.done||void 0!==e.error)&&p.delete(e.id),void 0!==e.error){var s,i;null===(s=l.observer)||void 0===s||null===(i=s.error)||void 0===i||i.call(s,new Error(e.error.message))}else{if("value"===l.resultKind||!e.done)try{var n,r;const t=l.codec?l.codec.decode(e.result):e.result;null===(n=l.observer)||void 0===n||null===(r=n.next)||void 0===r||r.call(n,t)}catch(t){var o,a;const s="Internal error: Failed to decode result: "+(t instanceof Error?t.message:String(t));null===(o=l.observer)||void 0===o||null===(a=o.error)||void 0===a||a.call(o,new Error(s)),p.delete(e.id)}var c,u;e.done&&(null===(c=l.observer)||void 0===c||null===(u=c.complete)||void 0===u||u.call(c))}}}))),e.port.send({kind:"subscribe",clientId:e.clientId,timestamp:a(),key:d,subscriptionId:v}),new Proxy({},{get:(s,i)=>i===Symbol.dispose?()=>t.dispose():function(){for(var s,l=arguments.length,d=new Array(l),v=0;v<l;v++)d[v]=arguments[v];const h=null!==(s=e.schema[i].result.kind)&&void 0!==s?s:"value",b=e.schema[i].result.codec;if(t.disposed){const e=new Error("RPC client disposed");return"value"===h?Promise.reject(e):z(e)}const y={subscribe:s=>{var l,v,y,m;const f=(0,u.v)();p.set(f,{resultKind:h,codec:b,observer:s});const S=null!==(l=e.schema[i].params.length)&&void 0!==l?l:0,k=d.length>S?d[S]:void 0,w="value"===h?null!==(v=null!==(y=null==k?void 0:k.timeoutMs)&&void 0!==y?y:null==e?void 0:e.timeoutMs)&&void 0!==v?v:5e3:null!==(m=null==k?void 0:k.timeoutFirstMs)&&void 0!==m?m:null==e?void 0:e.timeoutFirstMs;void 0!==w&&t.adopt(setTimeout((()=>{var e;p.has(f)&&(p.delete(f),null==s||null===(e=s.error)||void 0===e||e.call(s,new Error("RPC request timed out")))}),w),(e=>clearTimeout(e)));const g=d.slice(0,S).map(((t,n)=>{var r;const a=null===(r=e.schema[i].params[n])||void 0===r?void 0:r.codec;try{const s=a?a.encode(t):t;return e.ensureSerializableInDevMode&&o(s),s}catch(e){var c;return null==s||null===(c=s.error)||void 0===c||c.call(s,new Error("Internal error: Failed to encode parameter at index ".concat(n,": ").concat(e instanceof Error?e.message:String(e)))),p.delete(f),null}})),I=()=>{p.has(f)&&e.port.send({kind:"publish",clientId:e.clientId,toClientId:e.toClientId,timestamp:a(),key:c,value:{kind:"request",id:f,method:i,params:g}})};return null!==n.get().clientId?I():r.promise.then(I),{unsubscribe:()=>{var e;null==s||null===(e=s.complete)||void 0===e||e.call(s),p.delete(f)}}}};return"value"===h?new Promise(((e,t)=>y.subscribe({next:t=>e(t),error:e=>t(e),complete:()=>{}}))):e.streamFactory(y)}})}({...e,...r,serviceName:c({key:String(n),parameterValue:s}),schema:e.schema[v]}))},register:function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];const[o,a]=2===i.length?i:[void 0,i[0]],l=void 0!==o?d(String(n),e.schema):String(n);return t.use(L({...e,serviceName:c({key:String(n),parameterValue:o}),schema:e.schema[l],service:a}))}}})}function re(e){var t,s,n,r,o,a;const c=new DisposableStack,l=i("events",e.keyPrefix),d=i("state",e.keyPrefix),u=i("services",e.keyPrefix),{factories:v,...p}=e,h=c.use(function(e){const t=new DisposableStack,s=new k(e);return t.use(s),new Proxy({},{get:(e,i)=>i===Symbol.dispose?()=>t.dispose():{emit:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,o]=2===t.length?t:[void 0,t[0]];return s.emit(String(i),o,r)},view:e=>s.getEvent(String(i),e)}})}({...p,keyPrefix:l,schema:null!==(t=null===(s=e.schema)||void 0===s?void 0:s.events)&&void 0!==t?t:{},eventFactory:e.factories.eventFactory}));return{events:h,state:c.use(A({...p,keyPrefix:d,schema:null!==(n=null===(r=e.schema)||void 0===r?void 0:r.state)&&void 0!==n?n:{},writableStateFactory:e.factories.writableStateFactory,readableStateFactory:e.factories.readableStateFactory})),services:c.use(ne({...p,keyPrefix:u,schema:null!==(o=null===(a=e.schema)||void 0===a?void 0:a.services)&&void 0!==o?o:{},streamFactory:e.factories.streamFactory})),[Symbol.dispose]:()=>c.dispose()}}},81484:(e,t,s)=>{s.d(t,{i:()=>o});var i=s(13391),n=s(7167);var r=s(8867);const o={eventFactory:e=>new r.y(e.subscribe.bind(e)),streamFactory:e=>new r.y(e.subscribe.bind(e)),writableStateFactory:e=>{const t=i.h.create(e.initialValue),s=new DisposableStack;return s.defer((()=>e.releaseReference())),s.adopt(e.subscribable.subscribe({next:e=>t.set(e),error:e=>(0,n.P)("Error in DisposableAtom subscribable",e),complete:()=>s.dispose()}),(e=>e.unsubscribe())),new Proxy(t,{get:(t,i,n)=>"set"===i?s=>{t.set(s),e.publishChangeToRemote(s)}:"modify"===i?s=>{const i=s(t.get());t.set(i),e.publishChangeToRemote(i)}:i===Symbol.dispose?()=>s.dispose():Reflect.get(t,i,n)})},readableStateFactory:e=>{const t=i.h.create(e.initialValue),s=new DisposableStack;return s.defer((()=>e.releaseReference())),s.adopt(e.subscribable.subscribe({next:e=>t.set(e),error:e=>(0,n.P)("Error in DisposableAtom subscribable",e),complete:()=>s.dispose()}),(e=>e.unsubscribe())),new Proxy(t.view(),{get:(e,t,i)=>t===Symbol.dispose?()=>s.dispose():Reflect.get(e,t,i)})}}},38605:(e,t,s)=>{s.d(t,{x:()=>r});var i=s(75588),n=new WeakMap;class r{constructor(){(0,i.sv)(this,n,new Set)}next(e){for(const s of(0,i.y1)(n,this)){var t;null===(t=s.next)||void 0===t||t.call(s,e)}}subscribe(e){return(0,i.y1)(n,this).add(e),{[Symbol.dispose]:()=>(0,i.y1)(n,this).delete(e)}}[Symbol.dispose](){for(const t of(0,i.y1)(n,this)){var e;null===(e=t.complete)||void 0===e||e.call(t)}(0,i.y1)(n,this).clear()}}},48739:(e,t,s)=>{s.d(t,{v:()=>n});var i=s(59692);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.r)();const t=crypto.randomUUID(),s=t.replace(/-/g,""),n=new Uint8Array(s.match(/.{1,2}/g).map((e=>parseInt(e,16))));function r(e){let t="",s=BigInt(0);for(e.forEach((e=>{s=s<<BigInt(8)|BigInt(e)}));s>0;){const e=s%BigInt(62);t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Number(e)]+t,s/=BigInt(62)}return t.padStart(22,"0")}const o=r(n);return e?o.slice(0,8):o}},59692:(e,t,s)=>{function i(){var e;const t="undefined"!=typeof globalThis?globalThis.process:void 0,s=(null==t||null===(e=t.env)||void 0===e?void 0:e.NODE_ENV)||void 0;return"dev"===s||"development"===s}s.d(t,{r:()=>i})},73375:(e,t,s)=>{function i(){let e,t;return{promise:new Promise(((s,i)=>{e=s,t=i})),resolve:e,reject:t}}s.d(t,{B:()=>i})},7167:(e,t,s)=>{s.d(t,{P:()=>n});var i=s(59692);function n(){(0,i.r)()&&console.warn(...arguments)}}}]);