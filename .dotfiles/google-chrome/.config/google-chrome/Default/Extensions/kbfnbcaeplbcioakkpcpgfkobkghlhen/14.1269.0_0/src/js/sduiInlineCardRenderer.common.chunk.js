(self.webpackChunk=self.webpackChunk||[]).push([[3384],{22110:(e,t,n)=>{var r;n.d(t,{X:()=>r,_:()=>o}),function(e){e.accept="accept",e.rewriteOptions="rewriteOptions",e.customPrompt="customPrompt",e.revert="revert"}(r||(r={}));const o=new Set(Object.values(r))},9699:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(972);function o(e){let t="";return e.forEach((([e,n])=>{switch(e){case r.FS.Operation.RETAIN:t+=n+", ";break;case r.FS.Operation.INSERT:" "===n?t+="insert, space, ":(t+="insert, ",t+=i(n),t+=", ");break;case r.FS.Operation.DELETE:" "===n?t+="delete, space, ":(t+="delete, ",t+=i(n),t+=", ")}})),t}function i(e){return e.replace(/\n/gm," line break ").replace(/¶/gm," paragraph ").replace(/•/gm," bullet point ").replace(/,/gm," comma ").replace(/\./gm," period ").replace(/\(/gm," open parenthesis ").replace(/\)/gm," closed parenthesis ").replace(/-/gm," hyphen ").replace(/–/gm," en dash ").replace(/—/gm," em dash ").replace(/:/gm," colon ").replace(/;/gm," semicolon ").replace(/!/gm," exclamation mark ").replace(/\?/gm," question mark ").replace(/…/gm," ellipsis ").replace(/\*/gm," asterisk ").replace(/'/gm," apostrophe ").replace(/`/gm," grave accent ").replace(/"/gm," quotation mark ").replace(/"/gm," quotation mark ").replace(/'/gm," quotation mark ").replace(/'/gm," quotation mark ")}},46651:(e,t,n)=>{n.d(t,{a7:()=>c,kZ:()=>u,uz:()=>f});var r=n(90023),o=n(92379),i=n(84308),s=n(22110);const a=o.createContext({shouldShowTooltip:!1,sideline:null,currentStep:s.X.accept,acceptCount:0,rootElement:null,incrementAcceptCount:r.Q1,incrementRevertPresentedCount:r.Q1,onNextStep:r.Q1,onHide:r.Q1}),l={accept:{tooltipText:"Accept all changes to your paragraph",ctaText:"Next"},rewriteOptions:{tooltipText:"Try different ways to write it",ctaText:"Next"},customPrompt:{tooltipText:"Tell us how to change it",ctaText:"Try it"}};function u({onboardingService:e,children:t,rootElement:n,sideline:r}){const[s,l]=o.useState({shouldShowTooltip:e.shouldShowTooltip.get(),sideline:r,currentStep:e.currentStep.get(),acceptCount:e.acceptCount.get(),rootElement:n,incrementAcceptCount:()=>e.incrementAcceptCount(),incrementRevertPresentedCount:()=>e.incrementRevertPresentedCount(),onNextStep:t=>e.onNextStep(t),onHide:t=>e.onHide(t)});return o.useEffect((()=>{l((e=>({...e,rootElement:n})))}),[n]),o.useEffect((()=>{l((e=>({...e,sideline:r})))}),[r]),o.useEffect((()=>{const t=(0,i.a)([e.shouldShowTooltip,e.currentStep,e.acceptCount]).subscribe((([e,t,n])=>l((r=>({...r,shouldShowTooltip:e,currentStep:t,acceptCount:n})))));return()=>t.unsubscribe()}),[e]),o.createElement(a.Provider,{value:s},t)}function c(e){const{currentStep:t,shouldShowTooltip:n,sideline:r,rootElement:i,incrementAcceptCount:s,onNextStep:u,onHide:c}=o.useContext(a),{tooltipText:f,ctaText:p}=l[e];return{ctaText:p,rootElement:i,showTooltip:n&&t===e,tooltipText:f,incrementAcceptCount:s,onNextStep:()=>u(r),onHide:()=>c(r)}}function f(){const{currentStep:e,shouldShowTooltip:t,incrementRevertPresentedCount:n}=o.useContext(a);return{showOnboarding:t&&e===s.X.revert,onShow:()=>n()}}},76609:(e,t,n)=>{n.d(t,{q:()=>o});var r=n(92379);const o=({as:e="div",className:t,show:n,transitionDurationMs:o=250,display:i="inline-block",ariaHidden:s,children:a})=>{const[l,u]=r.useState(!1),[c,f]=r.useState(!1);r.useEffect((()=>{let e;u(!0),n||(e=self.setTimeout((()=>u(!1)),o)),f(!n);const t=self.setTimeout((()=>f(n)),0);return()=>[e,t].forEach(clearTimeout)}),[n]);const p={display:i,opacity:c?1:0,transition:`opacity ${o}ms`},d=e;return l&&a?r.createElement(d,{className:t,style:p,"data-testid":"grammarly-g2-fade-wrapper","aria-hidden":s},a):null}},10886:(e,t,n)=>{n.d(t,{s:()=>i});var r=n(63349);const o={filter:`blur(${r.ux.px(3)})`,userSelect:"none"},i=r.ux.stylesheet({sidelineCardRewriteDiff:[{margin:0}],sidelineCardRewriteDiffBlurred:[o],sidelineCardRewriteDiffRevertButton:[{width:0,height:0,margin:0,padding:0,border:"none",cursor:"pointer"}],sidelineCardRewriteDiffPopoverWrapper:[{height:0,width:0}]})},28604:(e,t,n)=>{n.d(t,{V:()=>B});var r=n(90023),o=n(92379),i=n(52654),s=n(61483),a=n(31702),l=n(85837),u=n(53186),c=n(58303),f=n(9699),p=n(972),d=n(18647),h=n(46651),m=n(76609),E=n(78953),g=n(63349),x=n(53768);const y={position:"relative",borderRadius:`${g.ux.px(0)} ${g.ux.px(4.5)} ${g.ux.px(4.5)} ${g.ux.px(4.5)}`,border:`${g.ux.px(1.5)} solid ${s.I.Background.Base.Inverse}`,backgroundColor:"transparent"},v={$nest:{"&&":{padding:`${g.ux.px(2)} ${g.ux.px(4)}`,fontSize:g.ux.px(12),color:s.I.Text.Base.Inverse,borderRadius:`${g.ux.px(3)} ${g.ux.px(3)} ${g.ux.px(3)} ${g.ux.px(0)}`,backgroundColor:s.I.Background.Base.Inverse,lineHeight:g.ux.px(18)}}},S={animationName:g.ux.keyframes({"0%":{stroke:x.NeutralGray100},"50%":{stroke:x.NeutralGray40},"100%":{stroke:x.NeutralGray100}}),animationDuration:g.ux.milliseconds(833),animationIterationCount:3},D=g.ux.stylesheet({revertibleRewriteDiff:[y],revertibleRewriteDiffLabel:[v],revertibleRewriteDiffButton:[{cursor:"pointer",outline:"none"}],revertibleRewriteDiffOutlineOnboarding:[S]}),w=o.forwardRef((({children:e,diffs:t,diffAccessibilityLabel:n,onHidePopover:r,onMount:i,onRevert:s,onRedo:a,onShowPopover:l,groupID:u},c)=>{const f=o.useRef(null),p=o.useRef(null);o.useEffect((()=>{i&&f.current&&p.current&&i({diffs:t,referenceElement:f.current,diffSpanElement:p.current,groupID:u})}),[]);const d=null!=s?s:a;if(!d)return o.createElement("span",null,e);const h=()=>{f.current&&p.current&&l({diffs:t,referenceElement:f.current,diffSpanElement:p.current,groupID:u})};return o.createElement("span",{ref:(0,E.l)([c,f]),"data-testid":"grammarly-g2-revertible-rewrite-diff",role:"button",className:D.revertibleRewriteDiffButton,"aria-label":`Undo ${n||""} this cannot be redone. Focus will be on the next undoable rewrite`,tabIndex:0,onBlur:r,onClick:()=>d(t),onFocus:h,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),d(t))},onMouseOver:h},o.createElement("span",{ref:p,"aria-hidden":!0},e))}));w.displayName="RevertibleRewriteDiff";const T={position:"absolute",inset:`auto auto ${g.ux.px(0)} ${g.ux.px(0)}`,pointerEvents:"none"},R=g.ux.stylesheet({svg:[T],path:[{pointerEvents:"auto",fill:"transparent"}]}),b=e=>{const{x:t,y:n,width:r,height:o}=e;return[{x:t,y:n},{x:t+r,y:n},{x:t+r,y:n+o},{x:t,y:n+o}]},I=({largeArcFlag:e=0,radius:t=2,isClockwise:n=!0,end:r})=>`a ${t},${t} 0 ${e} ${n?1:0} ${r.dx},${r.dy} `,k=(e=!0)=>I({end:{dx:2,dy:2},isClockwise:e}),C=(e=!0)=>I({end:{dx:-2,dy:2},isClockwise:e}),N=(e=!0)=>I({end:{dx:-2,dy:-2},isClockwise:e}),O=(e=!0)=>I({end:{dx:2,dy:-2},isClockwise:e}),A=({className:e,rects:t,referenceRect:n,...r})=>{const i=(e=>{const t=[];let n={x:0,y:0},r="";const[o,i,s]=b(e[0]),a=o;r+=`M ${o.x+2} ${o.y} `,r+=`H ${i.x-2} `,r+=k(),n=s,e.forEach((e=>{const[o,i,s,a]=b(e),l=i.x>n.x;i.x!==n.x&&(r+=l?k(!1):C(),r+=`H ${i.x+(l?-2:2)} `,r+=l?k():C(!1)),r+=`V ${s.y-2} `,t.push(o,a),n=s}));const l=t[t.length-1];for(r+=C(),r+=`H ${l.x+2} `,r+=N(),n=l;t.length>0;){const e=t.pop(),o=t.pop(),i=e.x>n.x;e.x!==n.x&&(r+=i?O():N(!1),r+=`H ${e.x+(i?-2:2)} `,r+=i?O(!1):N()),r+=`V ${o.y+2} `,n=o}return r+=`V ${a.y} Z`,r})(t.map((e=>({x:e.x-n.x-2,y:e.y-n.y-2,width:e.width+4,height:e.height+4})))),a={width:n.width,height:n.height};return o.createElement("svg",{...(0,l.Sh)(R.svg,e),style:a,"data-testid":"grammarly-g2-revertible-rewrite-outline",...r},o.createElement("path",{className:R.path,d:i,stroke:s.I.Background.Base.Inverse,strokeWidth:"2px"}))};var $=n(10886);const F=e=>{const{children:t,renderer:n}=e,r=t.split("\n");return o.createElement(o.Fragment,null,r.map(((e,t)=>t>0?0===e.length?o.createElement("br",{key:`${t}_br`}):[o.createElement("br",{key:`${t}_br`}),o.createElement(o.Fragment,{key:t},n(e))]:0===e.length?[]:o.createElement(o.Fragment,{key:t},n(e)))).flat())},L={styleInsert:{color:s.I.Text.Addition.Default,background:"rgba(177, 240, 232, 0.5)",fontWeight:"bold"},styleDelete:{color:"#696969",backgroundColor:"rgba(156, 156, 156, 0.2)",textDecoration:"line-through"},styleRetain:{color:s.I.Text.Base.Default},styleRedo:{color:s.I.Text.Base.Default,textDecoration:"underline"}},B=({diff:e,displayDeletes:t,blur:n,diffStyles:s=L,isSduiTarget:E=!1,onRevert:g=r.Q1,onRedo:x=r.Q1,onFocusLost:y=r.Q1})=>{const[v,S]=o.useState(!1),{showOnboarding:T,onShow:R}=(0,h.uz)(),[b,I]=o.useState(T),[k,C]=o.useState(null),[N,O]=o.useState(null),[B,P]=o.useState(null),[G,M]=o.useState([]),[U,_]=o.useState(0),[H,z]=o.useState(null),{styles:q,attributes:Q}=(0,i.D)(B,H,{placement:"top-start",modifiers:[{name:"offset",options:{offset:[-3,2]}}]}),{styleInsert:V,styleDelete:W,styleRetain:j,styleRedo:K}=s,Y=o.useRef(null),Z=o.useRef(new Map);o.useEffect((()=>(b&&(Y.current=self.setTimeout((()=>{I(!1),S(!1),R()}),2500)),()=>{Y.current&&self.clearTimeout(Y.current)})),[b]),o.useEffect((()=>{N&&P({getBoundingClientRect:()=>N.getClientRects()[0],contextElement:N.ownerDocument.body})}),[N]);const X=({diffs:e,referenceElement:t,diffSpanElement:n,groupID:r})=>{S(!0),C((0,d.bp)(t)),O(n),M(e),_(r)},J=()=>{I(!1),Y.current&&self.clearTimeout(Y.current)},ee=({diffs:e,referenceElement:t,diffSpanElement:n,groupID:r})=>{I(!0),X({diffs:e,referenceElement:t,diffSpanElement:n,groupID:r})},te=()=>S(!1),ne=()=>{S(!0),J()},re=({diffs:e,referenceElement:t,diffSpanElement:n,groupID:r})=>{J(),X({diffs:e,referenceElement:t,diffSpanElement:n,groupID:r})},oe=()=>{g(G),S(!1),O(null),M([]),_(0),E||setTimeout((()=>{const e=Array.from(Z.current.keys()).sort(((e,t)=>e-t)),t=e.findIndex((e=>e>U)),n=Z.current.get(e[t])||Z.current.values().next().value;n?n.focus():y()}),0)},ie=()=>{x(G),S(!1),O(null),M([]),_(0)},se=(0,p.jy)(e);let ae=!1;const le=E&&{onPointerDown:e=>e.stopPropagation()},ue=se.find((e=>e.groupID===U)),ce=Boolean(E&&ue&&ue.diffs.some((([e,,t])=>e===p.FS.Operation.RETAIN&&Boolean(t))));return o.createElement("p",{...(0,l.Sh)($.s.sidelineCardRewriteDiff,n&&$.s.sidelineCardRewriteDiffBlurred),"data-testid":"grammarly-g2-sideline-card-rewrite-diff"},se.map((({groupID:e,diffs:i,showDeletions:s,showRetainsAsInserts:l})=>{const d=i.some((([e])=>e===p.FS.Operation.DELETE||e===p.FS.Operation.INSERT)),h=i.some((([e,,t])=>e===p.FS.Operation.RETAIN&&t)),m=d&&t&&!n,g=h&&E&&!n,x=t&&(s||E),y=m&&!ae&&b,v=(0,r.zG)(i,u.nI,c.UI(f.G),c.FS);return ae=ae||m,o.createElement(w,{key:e,groupID:e,diffs:i,diffAccessibilityLabel:v,onHidePopover:te,onMount:y?ee:void 0,onRevert:m?oe:void 0,onRedo:g?ie:void 0,onShowPopover:re,ref:t=>{t?Z.current.set(e,t):Z.current.delete(e)}},i.map(((e,t)=>{const[n,r,s]=e;switch(n){case p.FS.Operation.DELETE:return x?o.createElement(a.x,{as:"span",variant:"text-small",key:t,style:W},r):null;case p.FS.Operation.INSERT:{const e=i.length,n=" "===r&&e>1?j:V;return o.createElement(F,{key:t,renderer:e=>o.createElement(a.x,{as:"span",variant:"text-small",style:n},e)},r)}case p.FS.Operation.RETAIN:{let e=l?V:j;return s&&(e=K),o.createElement(F,{key:t,renderer:t=>o.createElement(a.x,{as:"span",variant:"text-small",style:e},t)},r)}}})))})),o.createElement("span",{"aria-hidden":"true"},k&&N&&o.createElement(m.q,{className:$.s.sidelineCardRewriteDiffPopoverWrapper,as:"span",show:v,transitionDurationMs:400,display:"block",ariaHidden:!0},o.createElement("button",{className:$.s.sidelineCardRewriteDiffRevertButton,type:"button",onMouseOver:ne,onMouseLeave:te,onFocus:ne,onBlur:te,onClick:ce?ie:oe,...le},o.createElement(a.x,{as:"span","data-testid":"grammarly-g2-revertible-rewrite-diff-undo",ref:z,className:D.revertibleRewriteDiffLabel,style:q.popper,...Q.popper},(ce?"Redo":"Undo")+" change"),o.createElement(A,{...(0,l.Sh)(b&&D.revertibleRewriteDiffOutlineOnboarding),rects:Array.from(N.getClientRects()),referenceRect:k.getBoundingClientRect()})))))}},972:(e,t,n)=>{n.d(t,{FS:()=>b,Ns:()=>R,jy:()=>g});var r=n(60213),o=n(12518),i=n(53186),s=n(90023),a=n(78767);const l=/\s/;function u(e,t){const n=e.split(l),[r,...o]=n;t(r);let i=r.length;for(const n of o){t(e[i]),i+=n.length+1,t(n)}}function c(e,t){const n=new r.diff_match_patch,[o,i,s]=function(e,t){const n=[],r=new Map,o=e=>t=>{if(""===t)return;const o=r.get(t)||String.fromCharCode(r.size);r.has(t)||(n.push(t),r.set(t,o)),e.push(o)},i=[];u(e,o(i));const s=[];return u(t,o(s)),[i.join(""),s.join(""),n]}(e,t),a=n.diff_main(o,i,!1);return n.diff_charsToLines_(a,s),n.diff_cleanupSemantic(a),a}const f=/([.!?] )/;function p(e){const t=e.split(f),n=[];for(let e=0;e<t.length;e++){const r=t[e],o=t[e+1];let i=r;f.test(r)||(f.test(o)?(i+=o[0],n.push(i),n.push(" ")):n.push(i))}return n}function d(e){const t=[];for(const n of e){const[e,r]=n;if(e===b.Operation.INSERT&&f.test(r)){const n=p(r);for(const r of n)t.push([e,r])}else t.push(n)}return t}const h=/(\p{Punctuation}|\s)+/mu,m=e=>e[0],E=e=>e[1],g=e=>{const t=function(e){let t=0,n=0;for(const r of e){const[e,o]=r;e===b.Operation.DELETE&&(t+=o.length),e!==b.Operation.DELETE&&e!==b.Operation.RETAIN||(n+=o.length)}return t/n}(e),n=[],r=e=>({groupID:e,diffs:[],showDeletions:t<.4});let o,i=-1,a=r(i);for(const t of e){const[e,s,l]=t;switch(e){case b.Operation.INSERT:!o||m(o)!==b.Operation.DELETE&&m(o)!==b.Operation.INSERT?(i+=1,n.push(a),a=r(i),a.diffs.push(t)):a.diffs.push(t);break;case b.Operation.DELETE:i+=1,a.diffs.length>0&&n.push(a),a=r(i),a.diffs.push(t);break;case b.Operation.RETAIN:l?(i+=1,n.push(a),a=r(i),a.diffs.push(t)):w(s).map((t=>[e,t,l])).forEach((e=>{i+=1,a.diffs.length>0&&n.push(a),a=r(i),a.diffs.push(e)}))}o=t}return a.diffs.length>0&&n.push(a),(0,s.zG)(n,x,y,v,T)};function x(e){return e.map((e=>{const t=e.diffs.every((([e])=>e===b.Operation.DELETE));return{...e,showDeletions:t||e.showDeletions}}))}function y(e){return e.map((e=>{const{diffs:t,showDeletions:n}=e;if(2!==t.length||!n)return e;const[r,o]=t,[i,s]=r,[a,l]=o,u=i===b.Operation.DELETE&&a===b.Operation.INSERT&&s.toLocaleUpperCase()===l;return{...e,showDeletions:!u&&n}}))}function v(e){return e.map((e=>{const{diffs:t,showDeletions:n}=e;if(2!==t.length||!n)return e;const[r,o]=t,[i,s]=r,[a,l]=o,u=i===b.Operation.DELETE&&a===b.Operation.INSERT&&s.length===l.length;return{...e,showDeletions:!u&&n}}))}function S(e){const{diffs:t}=e;if(1===t.length){const[e]=t,[n,r]=e;return(n===b.Operation.INSERT||n===b.Operation.DELETE)&&!h.test(r)}if(2===t.length){const[e,n]=t,[r,o]=e,[i,s]=n;return r===b.Operation.DELETE&&i===b.Operation.INSERT&&o.length===s.length&&!h.test(o)&&!h.test(s)}return!1}function D(e){const{diffs:t}=e;return function(e){const{diffs:t}=e;return 1===t.length&&m(t[0])===b.Operation.RETAIN}(e)&&!h.test(E(t[0]))}function w(e){const t=e.split(h);if(1===t.length)return[e];const n=[],r=t[0],o=t[t.length-1];let i=0;return r&&(n.push(r),i=r.length),o?(n.push(e.substring(i,e.length-o.length)),n.push(o)):n.push(e.substring(i)),n}function T(e){const t=[];let n,r=[],o=[],i=!1,s=0;const a=()=>{s>=2&&i?t.push(...o):t.push(...r),r=[],o=[],n=void 0,s=0,i=!1};for(const l of e)void 0===n?S(l)||D(l)?(r.push(l),n={groupID:l.groupID,diffs:[...l.diffs],showRetainsAsInserts:!0,showDeletions:!1},o.push(n)):t.push(l):S(l)?(r.push(l),s++,n.diffs.push(...l.diffs)):D(l)?(r.push(l),s>0&&(i=!0),n.diffs.push(...l.diffs)):(a(),t.push(l));return a(),t}const R=(e,t)=>{const n=new r.diff_match_patch,o=n.patch_make(e,t),[i]=n.patch_apply(o,e);return i};var b;!function(e){let t;e.getDiff=(t,n)=>(0,s.zG)(o.Y3((()=>{if(t===n)return""===t?[]:[[e.Operation.RETAIN,t]];return d(c(t,n))}),o.KC),o.tS((0,s.ls)(i.nI,o.Yo((()=>new Error("Diff is empty")))))),function(e){e[e.DELETE=-1]="DELETE",e[e.RETAIN=0]="RETAIN",e[e.INSERT=1]="INSERT"}(t=e.Operation||(e.Operation={})),e.matchOperation=function({onInsert:e,onDelete:n,onRetain:r}){return o=>{const i=m(o);switch(i){case t.INSERT:return e(E(o));case t.DELETE:return n(E(o));case t.RETAIN:return r(E(o));default:(0,a.vE)(i)}}}}(b||(b={}))},29611:(e,t,n)=>{n.r(t),n.d(t,{SduiCard:()=>$});var r=n(90023),o=n(92379),i=n(71783),s=n(58303),a=n(52429),l=n(56642),u=n(72785),c=n(66199),f=n(43336),p=n(55916),d=n(27982),h=n(90189),m=n(53768),E=n(86211),g=n(28604),x=n(59833),y=n(972);const v=([e])=>e!==y.FS.Operation.RETAIN,S=(0,r.ls)((e=>(0,r.zG)(e,x.cx(v),s.UI((t=>e.slice(t))),s.fS((()=>e)))),(e=>(0,r.zG)(e,x.GY,x.cx(v),s.UI((t=>e.slice(0,e.length-t))),s.fS((()=>e))))),D=(e,t)=>e.reduce(((e,n)=>{const[r,o,i]=n;return t.find((([e,t,n])=>e===r&&t===o&&n===i))?r===y.FS.Operation.DELETE?e.push([y.FS.Operation.RETAIN,o,i]):r===y.FS.Operation.RETAIN&&e.push(n):e.push(n),e}),[]),w={styleInsert:{color:m.Blue40,fontWeight:"bold"},styleDelete:{color:m.Red60,fontWeight:"bold",textDecoration:"line-through"},styleRetain:{color:m.NeutralGray100},styleRedo:{color:m.NeutralGray100,textDecoration:"underline",textDecorationColor:m.NeutralGray40}},T=e=>{const t=(n=e.groupedDiffs,(r=n,r.map((e=>{const{textOperation:t}=e;return 2===t.length&&"Insert"===t[0].type&&"Delete"===t[1].type?{...e,textOperation:[t[1],t[0]]}:e}))).reduce(((e,t)=>(t.textOperation.forEach((({type:n,text:r=""})=>{let o=y.FS.Operation.RETAIN;"Insert"===n&&(o=y.FS.Operation.INSERT),"Delete"===n&&(o=y.FS.Operation.DELETE);const i=[o,r],s=t.id;s&&i.push(s),e.push(i)})),e)),[]));var n,r;const i=S(t),[s,a]=o.useState(t),l=o.useRef(i);return o.createElement(g.V,{diff:s,displayDeletes:e.showDeletions,...(0,E.qc)()?{}:{diffStyles:w},blur:!1,isSduiTarget:!0,onRevert:t=>{const n=D(s,t),r=D(l.current,t),[[,,o]]=t;o&&e.onUndoChange(o),a(n),l.current=r,e.setUndoDiff(r)},onRedo:n=>{const r=new Set(n.map((([,,e])=>e)).filter((e=>Boolean(e)))),o=e=>{const t=new Map;return e.forEach((e=>{var n;const[,,r]=e;if(!r)return;const o=null!==(n=t.get(r))&&void 0!==n?n:[];o.push(e),t.set(r,o)})),t},u=(e,t)=>{const n=[],o=new Set;return e.forEach((e=>{var i;const[,,s]=e;s&&r.has(s)?o.has(s)||(n.push(...null!==(i=t.get(s))&&void 0!==i?i:[]),o.add(s)):n.push(e)})),n},c=o(t),f=o(i),p=u(s,c),d=u(l.current,f),[[,,h]]=n;h&&e.onUndoChange(h),a(p),l.current=d,e.setUndoDiff(d)}})};var R=n(63349),b=n(20785);const I=R.ux.style({padding:R.ux.px(4)}),k=()=>o.createElement(b.T,{type:"mini",size:16,className:I});var C;function N(e){const{onSduiUndoDiff:t}=e,n=t&&{nativeUndoableTextChanges:e=>o.createElement(T,{...e,setUndoDiff:t})},r=(0,h.OB)().experimentClient.isGateEnabled(d.K.Add1PasswordBypass);return{...c.k,button:r?{...c.k.button,secondary:e=>{const t=c.k.button.secondary;return"openGM"!==e.name?o.createElement(t,{...e}):o.createElement(t,{...e,style:{position:"relative"},text:o.createElement(o.Fragment,null,e.text,o.createElement(p.L,null))})}}:c.k.button,inlineCard:(0,f.I)(C.of(13.5),C.of(20.25)),icon:{...l.y,[u.Tb.GButtonSmall]:k},...n}}!function(e){e.of=e=>e}(C||(C={}));var O=n(39963);const A=({children:e})=>o.createElement(i.G.DefaultProvider,null,e),$=({model:e,onSduiUndoDiff:t})=>{const n={onSduiUndoDiff:t};return o.useEffect((()=>{(0,O.Tb)().sdui.renderSduiInlineCard()}),[]),o.createElement(A,null,o.createElement(a.P,{key:e.sdui.id,sduiRootId:e.sdui.id,content:e.sdui.content,prevContent:s.YP,transitions:[],designSystem:N(n),onMount:r.Q1,onAnimationEnd:r.Q1,notify:e.notify}))}},58704:(e,t,n)=>{n.d(t,{Zq:()=>i,kR:()=>o,r3:()=>r});const r=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},o=e=>{if(e&&"window"in e&&e.window===e)return e;return r(e).defaultView||self};function i(e){return null!==(t=e)&&"object"==typeof t&&"nodeType"in t&&"number"==typeof t.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e;var t}},82882:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(95751);function o(e){return!(0!==e.mozInputSource||!e.isTrusted)||((0,r.Dt)()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}},95751:(e,t,n)=>{function r(e){var t;return"undefined"!=typeof self&&null!=self.navigator&&((null===(t=self.navigator.userAgentData)||void 0===t?void 0:t.brands.some((t=>e.test(t.brand))))||e.test(self.navigator.userAgent))}function o(e){var t;return"undefined"!=typeof self&&null!=self.navigator&&e.test((null===(t=self.navigator.userAgentData)||void 0===t?void 0:t.platform)||self.navigator.platform)}function i(e){let t=null;return()=>(null==t&&(t=e()),t)}n.d(t,{Dt:()=>f,V5:()=>s});const s=i((function(){return o(/^Mac/i)})),a=i((function(){return o(/^iPhone/i)})),l=i((function(){return o(/^iPad/i)||s()&&navigator.maxTouchPoints>1})),u=i((function(){return a()||l()})),c=(i((function(){return s()||u()})),i((function(){return r(/AppleWebKit/i)&&!c()})),i((function(){return r(/Chrome/i)}))),f=i((function(){return r(/Android/i)}));i((function(){return r(/Firefox/i)}))},95833:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(29943),o=n(92379);function i(e){const t=(0,o.useRef)(null);return(0,r.b)((()=>{t.current=e}),[e]),(0,o.useCallback)(((...e)=>{const n=t.current;return null==n?void 0:n(...e)}),[])}},29943:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(92379);const o="undefined"!=typeof document?r.useLayoutEffect:()=>{}}}]);