var ab=Object.defineProperty;var ub=(e,t,n)=>t in e?ab(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ir=(e,t,n)=>ub(e,typeof t!="symbol"?t+"":t,n);import{r as ob}from"./index-Bm4tEXCw.js";import{at as Mt,au as Et,av as iu,aw as cb,$ as Er,Z as Dn,S as Rr,ax as Gn,ay as bs,r as ii,az as Nr,aA as wr,D as la,aB as Du,ao as Tr,aC as lb,a9 as Va,aD as fn,aE as fb,aF as sb,ai as rr,aG as Uv,x as Ai,aH as Hi,aI as Ju,aq as Is,aj as Qu,aJ as Dv,B as Gc,ak as db,al as hb,am as vb,an as mb,ap as gb,A as pb,ar as _b,as as yb,l as gu}from"./start-BFd-djfI.js";import{o as vi}from"./of-Boi_-3cC.js";import{c as tf,d as Lv,m as nf,a as bb,i as Ib}from"./delay-D1mS6Jaf.js";import{s as Ss}from"./startWith-PVWOuAJK.js";import{t as Ka,i as Sb}from"./timer--E-2U5R1.js";import{m as qv}from"./merge-obdQTFL6.js";import{d as Bv}from"./debounceTime-DnL_PUPV.js";import{d as au}from"./distinctUntilChanged-GMQNSCXg.js";import{s as Ei}from"./switchMap-BkKtxKb2.js";import{E as qr,p as Xu,a as Hc,i as Ab,b as Eb,m as jv}from"./mergeAll-D275NTmK.js";import{t as Gv}from"./tap-BNGPOE-c.js";import{s as Hv}from"./share-CW4-5mF1.js";import{c as Rb,R as zv,b as Vv,a as wb,s as Tb}from"./skip-wo5YLe13.js";import{A as Kv,a as $v,S as Ob}from"./AsyncScheduler-BhBy18pz.js";import{t as Yv,T as Cb}from"./timeout-B7YJiIXx.js";import{a as Mb,s as kb,t as Pb,b as Nb}from"./throttleTime-CTmwR84S.js";import{a as Wb}from"./asap-_5Afx9lb.js";import{a as fa,b as Fb}from"./async-BZW1XXsj.js";import{b as Ub,f as Db}from"./finalize-u5oIwZfS.js";import{a as uu,b as Lb,r as qb}from"./race-BWu18h02.js";import{a as Jv,c as Qv}from"./concat-Bl9EyBSW.js";import{d as As}from"./defer-DJy-7hgl.js";import{t as Es}from"./take-gJdc_Sb0.js";import{p as Bb}from"./pairwise-CN9hSkDF.js";import{d as jb}from"./dateTimestampProvider-CV0dHcg-.js";import{c as Gb}from"./RemoteEntity-CN-1WB86-yD3y8ldD.js";function Xv(){return Mt(function(e,t){var n=null;e._refCount++;var r=Et(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){n=null;return}var i=e._connection,a=n;n=null,i&&(!a||i===a)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var zc=function(e){iu(t,e);function t(n,r){var i=e.call(this)||this;return i.source=n,i.subjectFactory=r,i._subject=null,i._refCount=0,i._connection=null,cb(n)&&(i.lift=n.lift),i}return t.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},t.prototype.getSubject=function(){var n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var n=this._connection;this._subject=this._connection=null,n==null||n.unsubscribe()},t.prototype.connect=function(){var n=this,r=this._connection;if(!r){r=this._connection=new Er;var i=this.getSubject();r.add(this.source.subscribe(Et(i,void 0,function(){n._teardown(),i.complete()},function(a){n._teardown(),i.error(a)},function(){return n._teardown()}))),r.closed&&(this._connection=null,r=Er.EMPTY)}return r},t.prototype.refCount=function(){return Xv()(this)},t}(Dn),Zv=function(e){iu(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._value=null,n._hasValue=!1,n._isComplete=!1,n}return t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,a=r._hasValue,u=r._value,o=r.thrownError,l=r.isStopped,f=r._isComplete;i?n.error(o):(l||f)&&(a&&n.next(u),n.complete())},t.prototype.next=function(n){this.isStopped||(this._value=n,this._hasValue=!0)},t.prototype.complete=function(){var n=this,r=n._hasValue,i=n._value,a=n._isComplete;a||(this._isComplete=!0,r&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},t}(Rr),Hb=function(e){iu(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.schedule=function(n,r){return r===void 0&&(r=0),r>0?e.prototype.schedule.call(this,n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)},t.prototype.execute=function(n,r){return r>0||this.closed?e.prototype.execute.call(this,n,r):this._execute(n,r)},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.flush(this),0)},t}(Kv),zb=function(e){iu(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}($v),Vb=new zb(Hb),Kb=function(e){iu(t,e);function t(n,r){n===void 0&&(n=xv),r===void 0&&(r=1/0);var i=e.call(this,n,function(){return i.frame})||this;return i.maxFrames=r,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var n=this,r=n.actions,i=n.maxFrames,a,u;(u=r[0])&&u.delay<=i&&(r.shift(),this.frame=u.delay,!(a=u.execute(u.state,u.delay))););if(a){for(;u=r.shift();)u.unsubscribe();throw a}},t.frameTimeFactor=10,t}($v),xv=function(e){iu(t,e);function t(n,r,i){i===void 0&&(i=n.index+=1);var a=e.call(this,n,r)||this;return a.scheduler=n,a.work=r,a.index=i,a.active=!0,a.index=n.index=i,a}return t.prototype.schedule=function(n,r){if(r===void 0&&(r=0),Number.isFinite(r)){if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)}else return Er.EMPTY},t.prototype.requestAsyncId=function(n,r,i){i===void 0&&(i=0),this.delay=n.frame+i;var a=n.actions;return a.push(this),a.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(n,r,i){},t.prototype._execute=function(n,r){if(this.active===!0)return e.prototype._execute.call(this,n,r)},t.sortActions=function(n,r){return n.delay===r.delay?n.index===r.index?0:n.index>r.index?1:-1:n.delay>r.delay?1:-1},t}(Kv);function em(e,t){var n=Gn(e)?e:function(){return e},r=function(i){return i.error(n())};return new Dn(t?function(i){return t.schedule(r,0,i)}:r)}var Td;(function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"})(Td||(Td={}));var To=function(){function e(t,n,r){this.kind=t,this.value=n,this.error=r,this.hasValue=t==="N"}return e.prototype.observe=function(t){return tm(this,t)},e.prototype.do=function(t,n,r){var i=this,a=i.kind,u=i.value,o=i.error;return a==="N"?t==null?void 0:t(u):a==="E"?n==null?void 0:n(o):r==null?void 0:r()},e.prototype.accept=function(t,n,r){var i;return Gn((i=t)===null||i===void 0?void 0:i.next)?this.observe(t):this.do(t,n,r)},e.prototype.toObservable=function(){var t=this,n=t.kind,r=t.value,i=t.error,a=n==="N"?vi(r):n==="E"?em(function(){return i}):n==="C"?qr:0;if(!a)throw new TypeError("Unexpected notification kind "+n);return a},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function tm(e,t){var n,r,i,a=e,u=a.kind,o=a.value,l=a.error;if(typeof u!="string")throw new TypeError('Invalid notification, missing "kind"');u==="N"?(n=t.next)===null||n===void 0||n.call(t,o):u==="E"?(r=t.error)===null||r===void 0||r.call(t,l):(i=t.complete)===null||i===void 0||i.call(t)}function $b(e){return!!e&&(e instanceof Dn||Gn(e.lift)&&Gn(e.subscribe))}var rf=bs(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),Yb=bs(function(e){return function(n){e(this),this.name="NotFoundError",this.message=n}}),Jb=bs(function(e){return function(n){e(this),this.name="SequenceError",this.message=n}}),Qb=Array.isArray;function Xb(e,t){return Qb(t)?e.apply(void 0,Nr([],wr(t))):e(t)}function Zu(e){return ii(function(t){return Xb(e,t)})}var Zb=Array.isArray,xb=Object.getPrototypeOf,eI=Object.prototype,tI=Object.keys;function nI(e){if(e.length===1){var t=e[0];if(Zb(t))return{args:t,keys:null};if(rI(t)){var n=tI(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function rI(e){return e&&typeof e=="object"&&xb(e)===eI}function iI(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function Vc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xu(e),r=Hc(e),i=nI(e),a=i.args,u=i.keys;if(a.length===0)return la([],n);var o=new Dn(nm(a,n,u?function(l){return iI(u,l)}:Tr));return r?o.pipe(Zu(r)):o}function nm(e,t,n){return n===void 0&&(n=Tr),function(r){Od(t,function(){for(var i=e.length,a=new Array(i),u=i,o=i,l=function(h){Od(t,function(){var d=la(e[h],t),_=!1;d.subscribe(Et(r,function(R){a[h]=R,_||(_=!0,o--),o||r.next(n(a.slice()))},function(){--u||r.complete()}))},r)},f=0;f<i;f++)l(f)},r)}}function Od(e,t,n){e?Du(n,e,t):t()}var aI=["addListener","removeListener"],uI=["addEventListener","removeEventListener"],oI=["on","off"];function af(e,t,n,r){if(Gn(n)&&(r=n,n=void 0),r)return af(e,t,n).pipe(Zu(r));var i=wr(fI(e)?uI.map(function(o){return function(l){return e[o](t,l,n)}}):cI(e)?aI.map(Cd(e,t)):lI(e)?oI.map(Cd(e,t)):[],2),a=i[0],u=i[1];if(!a&&lb(e))return Va(function(o){return af(o,t,n)})(fn(e));if(!a)throw new TypeError("Invalid event target");return new Dn(function(o){var l=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return o.next(1<f.length?f:f[0])};return a(l),function(){return u(l)}})}function Cd(e,t){return function(n){return function(r){return e[n](t,r)}}}function cI(e){return Gn(e.addListener)&&Gn(e.removeListener)}function lI(e){return Gn(e.on)&&Gn(e.off)}function fI(e){return Gn(e.addEventListener)&&Gn(e.removeEventListener)}function rm(e,t,n){return n?rm(e,t).pipe(Zu(n)):new Dn(function(r){var i=function(){for(var u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];return r.next(u.length===1?u[0]:u)},a=e(i);return Gn(t)?function(){return t(i,a)}:void 0})}function sI(e,t,n,r,i){var a,u,o,l;arguments.length===1?(a=e,l=a.initialState,t=a.condition,n=a.iterate,u=a.resultSelector,o=u===void 0?Tr:u,i=a.scheduler):(l=e,!r||Ab(r)?(o=Tr,i=r):o=r);function f(){var h;return sb(this,function(d){switch(d.label){case 0:h=l,d.label=1;case 1:return!t||t(h)?[4,o(h)]:[3,4];case 2:d.sent(),d.label=3;case 3:return h=n(h),[3,1];case 4:return[2]}})}return As(i?function(){return fb(f(),i)}:f)}function dI(e,t,n){return As(function(){return e()?t:n})}function Bo(e,t){return e===void 0&&(e=0),t===void 0&&(t=fa),e<0&&(e=0),Ka(e,e,t)}var hI=new Dn(rr);function im(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=uu(e);return new Dn(function(r){var i=0,a=function(){if(i<n.length){var u=void 0;try{u=fn(n[i++])}catch{a();return}var o=new Uv(r,void 0,rr,rr);u.subscribe(o),o.add(a)}else r.complete()};a()})}function vI(e,t){return la(Object.entries(e),t)}function am(e,t){return function(n,r){return!e.call(t,n,r)}}function mI(e,t,n){return[Ai(t,n)(fn(e)),Ai(am(t,n))(fn(e))]}function gI(e,t,n){if(t==null&&(t=e,e=0),t<=0)return qr;var r=t+e;return new Dn(n?function(i){var a=e;return n.schedule(function(){a<r?(i.next(a++),this.schedule()):i.complete()})}:function(i){for(var a=e;a<r&&!i.closed;)i.next(a++);i.complete()})}function pI(e,t){return new Dn(function(n){var r=e(),i=t(r),a=i?fn(i):qr;return a.subscribe(n),function(){r&&r.unsubscribe()}})}function Rs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Hc(e),r=uu(e);return r.length?new Dn(function(i){var a=r.map(function(){return[]}),u=r.map(function(){return!1});i.add(function(){a=u=null});for(var o=function(f){fn(r[f]).subscribe(Et(i,function(h){if(a[f].push(h),a.every(function(_){return _.length})){var d=a.map(function(_){return _.shift()});i.next(n?n.apply(void 0,Nr([],wr(d))):d),a.some(function(_,R){return!_.length&&u[R]})&&i.complete()}},function(){u[f]=!0,!a[f].length&&i.complete()}))},l=0;!i.closed&&l<r.length;l++)o(l);return function(){a=u=null}}):qr}var _I=Object.freeze({__proto__:null});function um(e){return Mt(function(t,n){var r=!1,i=null,a=null,u=!1,o=function(){if(a==null||a.unsubscribe(),a=null,r){r=!1;var f=i;i=null,n.next(f)}u&&n.complete()},l=function(){a=null,u&&n.complete()};t.subscribe(Et(n,function(f){r=!0,i=f,a||fn(e(f)).subscribe(a=Et(n,o,l))},function(){u=!0,(!r||!a||a.closed)&&n.complete()}))})}function yI(e,t){return t===void 0&&(t=fa),um(function(){return Ka(e,t)})}function bI(e,t){return t===void 0&&(t=null),t=t!=null?t:e,Mt(function(n,r){var i=[],a=0;n.subscribe(Et(r,function(u){var o,l,f,h,d=null;a++%t===0&&i.push([]);try{for(var _=Hi(i),R=_.next();!R.done;R=_.next()){var A=R.value;A.push(u),e<=A.length&&(d=d!=null?d:[],d.push(A))}}catch(I){o={error:I}}finally{try{R&&!R.done&&(l=_.return)&&l.call(_)}finally{if(o)throw o.error}}if(d)try{for(var E=Hi(d),g=E.next();!g.done;g=E.next()){var A=g.value;Ju(i,A),r.next(A)}}catch(I){f={error:I}}finally{try{g&&!g.done&&(h=E.return)&&h.call(E)}finally{if(f)throw f.error}}},function(){var u,o;try{for(var l=Hi(i),f=l.next();!f.done;f=l.next()){var h=f.value;r.next(h)}}catch(d){u={error:d}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(u)throw u.error}}r.complete()},void 0,function(){i=null}))})}function II(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(t=Xu(r))!==null&&t!==void 0?t:fa,u=(n=r[0])!==null&&n!==void 0?n:null,o=r[1]||1/0;return Mt(function(l,f){var h=[],d=!1,_=function(E){var g=E.buffer,I=E.subs;I.unsubscribe(),Ju(h,E),f.next(g),d&&R()},R=function(){if(h){var E=new Er;f.add(E);var g=[],I={buffer:g,subs:E};h.push(I),Du(E,a,function(){return _(I)},e)}};u!==null&&u>=0?Du(f,a,R,u,!0):d=!0,R();var A=Et(f,function(E){var g,I,C=h.slice();try{for(var k=Hi(C),L=k.next();!L.done;L=k.next()){var q=L.value,G=q.buffer;G.push(E),o<=G.length&&_(q)}}catch(D){g={error:D}}finally{try{L&&!L.done&&(I=k.return)&&I.call(k)}finally{if(g)throw g.error}}},function(){for(;h!=null&&h.length;)f.next(h.shift().buffer);A==null||A.unsubscribe(),f.complete(),f.unsubscribe()},void 0,function(){return h=null});l.subscribe(A)})}function SI(e,t){return Mt(function(n,r){var i=[];fn(e).subscribe(Et(r,function(a){var u=[];i.push(u);var o=new Er,l=function(){Ju(i,u),r.next(u),o.unsubscribe()};o.add(fn(t(a)).subscribe(Et(r,l,rr)))},rr)),n.subscribe(Et(r,function(a){var u,o;try{for(var l=Hi(i),f=l.next();!f.done;f=l.next()){var h=f.value;h.push(a)}}catch(d){u={error:d}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(u)throw u.error}}},function(){for(;i.length>0;)r.next(i.shift());r.complete()}))})}function AI(e){return Mt(function(t,n){var r=null,i=null,a=function(){i==null||i.unsubscribe();var u=r;r=[],u&&n.next(u),fn(e()).subscribe(i=Et(n,a,rr))};a(),t.subscribe(Et(n,function(u){return r==null?void 0:r.push(u)},function(){r&&n.next(r),n.complete()},void 0,function(){return r=i=null}))})}function Kc(e){return Mt(function(t,n){var r=null,i=!1,a;r=t.subscribe(Et(n,void 0,void 0,function(u){a=fn(e(u,Kc(e)(t))),r?(r.unsubscribe(),r=null,a.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(n))})}function xu(e,t){return Mt(Rb(e,t,arguments.length>=2,!1,!0))}var EI=function(e,t){return e.push(t),e};function om(){return Mt(function(e,t){xu(EI,[])(e).subscribe(t)})}function cm(e,t){return Is(om(),Va(function(n){return e(n)}),t?Zu(t):Tr)}function RI(e){return cm(Vc,e)}var wI=RI;function lm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Hc(e);return n?Is(lm.apply(void 0,Nr([],wr(e))),Zu(n)):Mt(function(r,i){nm(Nr([r],wr(uu(e))))(i)})}function TI(e,t){return Gn(t)?tf(function(){return e},t):tf(function(){return e})}function OI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xu(e);return Mt(function(r,i){Jv()(la(Nr([r],wr(e)),n)).subscribe(i)})}function CI(e){return new Dn(function(t){return e.subscribe(t)})}var MI={connector:function(){return new Rr}};function fm(e,t){t===void 0&&(t=MI);var n=t.connector;return Mt(function(r,i){var a=n();fn(e(CI(a))).subscribe(i),i.add(r.subscribe(a))})}function kI(e){return xu(function(t,n,r){return!e||e(n,r)?t+1:t},0)}function PI(e){return Mt(function(t,n){var r=!1,i=null,a=null,u=function(){if(a==null||a.unsubscribe(),a=null,r){r=!1;var o=i;i=null,n.next(o)}};t.subscribe(Et(n,function(o){a==null||a.unsubscribe(),r=!0,i=o,a=Et(n,u,rr),fn(e(o)).subscribe(a)},function(){u(),n.complete()},void 0,function(){i=a=null}))})}function $c(e){return Mt(function(t,n){var r=!1;t.subscribe(Et(n,function(i){r=!0,n.next(i)},function(){r||n.next(e),n.complete()}))})}function NI(){return Mt(function(e,t){e.subscribe(Et(t,function(n){return tm(n,t)}))})}function WI(e,t){return Mt(function(n,r){var i=new Set;n.subscribe(Et(r,function(a){var u=e?e(a):a;i.has(u)||(i.add(u),r.next(a))})),t&&fn(t).subscribe(Et(r,function(){return i.clear()},rr))})}function FI(e,t){return au(function(n,r){return t?t(n[e],r[e]):n[e]===r[e]})}function Yc(e){return e===void 0&&(e=UI),Mt(function(t,n){var r=!1;t.subscribe(Et(n,function(i){r=!0,n.next(i)},function(){return r?n.complete():n.error(e())}))})}function UI(){return new Qu}function DI(e,t){if(e<0)throw new rf;var n=arguments.length>=2;return function(r){return r.pipe(Ai(function(i,a){return a===e}),Es(1),n?$c(t):Yc(function(){return new rf}))}}function LI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return Qv(n,vi.apply(void 0,Nr([],wr(e))))}}function qI(e,t){return Mt(function(n,r){var i=0;n.subscribe(Et(r,function(a){e.call(t,a,i++,n)||(r.next(!1),r.complete())},function(){r.next(!0),r.complete()}))})}function ws(e,t){return t?function(n){return n.pipe(ws(function(r,i){return fn(e(r,i)).pipe(ii(function(a,u){return t(r,a,i,u)}))}))}:Mt(function(n,r){var i=0,a=null,u=!1;n.subscribe(Et(r,function(o){a||(a=Et(r,void 0,function(){a=null,u&&r.complete()}),fn(e(o,i++)).subscribe(a))},function(){u=!0,!a&&r.complete()}))})}function BI(){return ws(Tr)}var jI=BI;function GI(e,t,n){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,Mt(function(r,i){return Dv(r,i,e,t,void 0,!0,n)})}function HI(e,t){return Mt(sm(e,t,"value"))}function sm(e,t,n){var r=n==="index";return function(i,a){var u=0;i.subscribe(Et(a,function(o){var l=u++;e.call(t,o,l,i)&&(a.next(r?l:o),a.complete())},function(){a.next(r?-1:void 0),a.complete()}))}}function zI(e,t){return Mt(sm(e,t,"index"))}function VI(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ai(function(i,a){return e(i,a,r)}):Tr,Es(1),n?$c(t):Yc(function(){return new Qu}))}}function KI(e,t,n,r){return Mt(function(i,a){var u;!t||typeof t=="function"?u=t:(n=t.duration,u=t.element,r=t.connector);var o=new Map,l=function(A){o.forEach(A),A(a)},f=function(A){return l(function(E){return E.error(A)})},h=0,d=!1,_=new Uv(a,function(A){try{var E=e(A),g=o.get(E);if(!g){o.set(E,g=r?r():new Rr);var I=R(E,g);if(a.next(I),n){var C=Et(g,function(){g.complete(),C==null||C.unsubscribe()},void 0,void 0,function(){return o.delete(E)});_.add(fn(n(I)).subscribe(C))}}g.next(u?u(A):A)}catch(k){f(k)}},function(){return l(function(A){return A.complete()})},f,function(){return o.clear()},function(){return d=!0,h===0});i.subscribe(_);function R(A,E){var g=new Dn(function(I){h++;var C=E.subscribe(I);return function(){C.unsubscribe(),--h===0&&d&&_.unsubscribe()}});return g.key=A,g}})}function $I(){return Mt(function(e,t){e.subscribe(Et(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}function Ts(e){return e<=0?function(){return qr}:Mt(function(t,n){var r=[];t.subscribe(Et(n,function(i){r.push(i),e<r.length&&r.shift()},function(){var i,a;try{for(var u=Hi(r),o=u.next();!o.done;o=u.next()){var l=o.value;n.next(l)}}catch(f){i={error:f}}finally{try{o&&!o.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}n.complete()},void 0,function(){r=null}))})}function YI(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ai(function(i,a){return e(i,a,r)}):Tr,Ts(1),n?$c(t):Yc(function(){return new Qu}))}}function JI(){return Mt(function(e,t){e.subscribe(Et(t,function(n){t.next(To.createNext(n))},function(){t.next(To.createComplete()),t.complete()},function(n){t.next(To.createError(n)),t.complete()}))})}function QI(e){return xu(Gn(e)?function(t,n){return e(t,n)>0?t:n}:function(t,n){return t>n?t:n})}function XI(e,t,n){return n===void 0&&(n=1/0),Gn(t)?Va(function(){return e},t,n):(typeof t=="number"&&(n=t),Va(function(){return e},n))}function ZI(e,t,n){return n===void 0&&(n=1/0),Mt(function(r,i){var a=t;return Dv(r,i,function(u,o){return e(a,u,o)},n,function(u){a=u},!1,void 0,function(){return a=null})})}function xI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xu(e),r=Eb(e,1/0);return e=uu(e),Mt(function(i,a){jv(r)(la(Nr([i],wr(e)),n)).subscribe(a)})}function eS(e){return xu(Gn(e)?function(t,n){return e(t,n)<0?t:n}:function(t,n){return t<n?t:n})}function Os(e,t){var n=Gn(e)?e:function(){return e};return Gn(t)?fm(t,{connector:n}):function(r){return new zc(r,n)}}function tS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=uu(e);return function(r){return im.apply(void 0,Nr([r],wr(n)))}}var nS=tS;function rS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(n===0)throw new Error("list of properties cannot be empty.");return ii(function(r){for(var i=r,a=0;a<n;a++){var u=i==null?void 0:i[e[a]];if(typeof u<"u")i=u;else return}return i})}function iS(e){return e?function(t){return fm(e)(t)}:function(t){return Os(new Rr)(t)}}function aS(e){return function(t){var n=new Gc(e);return new zc(t,function(){return n})}}function uS(){return function(e){var t=new Zv;return new zc(e,function(){return t})}}function oS(e,t,n,r){n&&!Gn(n)&&(r=n);var i=Gn(n)?n:void 0;return function(a){return Os(new zv(e,t,r),i)(a)}}function cS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?Mt(function(n,r){Lb(Nr([n],wr(e)))(r)}):Tr}function lS(e){var t,n=1/0,r;return e!=null&&(typeof e=="object"?(t=e.count,n=t===void 0?1/0:t,r=e.delay):n=e),n<=0?function(){return qr}:Mt(function(i,a){var u=0,o,l=function(){if(o==null||o.unsubscribe(),o=null,r!=null){var h=typeof r=="number"?Ka(r):fn(r(u)),d=Et(a,function(){d.unsubscribe(),f()});h.subscribe(d)}else f()},f=function(){var h=!1;o=i.subscribe(Et(a,void 0,function(){++u<n?o?l():h=!0:a.complete()})),h&&l()};f()})}function fS(e){return Mt(function(t,n){var r,i=!1,a,u=!1,o=!1,l=function(){return o&&u&&(n.complete(),!0)},f=function(){return a||(a=new Rr,fn(e(a)).subscribe(Et(n,function(){r?h():i=!0},function(){u=!0,l()}))),a},h=function(){o=!1,r=t.subscribe(Et(n,void 0,function(){o=!0,!l()&&f().next()})),i&&(r.unsubscribe(),r=null,i=!1,h())};h()})}function dm(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var n=t.count,r=n===void 0?1/0:n,i=t.delay,a=t.resetOnSuccess,u=a===void 0?!1:a;return r<=0?Tr:Mt(function(o,l){var f=0,h,d=function(){var _=!1;h=o.subscribe(Et(l,function(R){u&&(f=0),l.next(R)},void 0,function(R){if(f++<r){var A=function(){h?(h.unsubscribe(),h=null,d()):_=!0};if(i!=null){var E=typeof i=="number"?Ka(i):fn(i(R,f)),g=Et(l,function(){g.unsubscribe(),A()},function(){l.complete()});E.subscribe(g)}else A()}else l.error(R)})),_&&(h.unsubscribe(),h=null,d())};d()})}function sS(e){return Mt(function(t,n){var r,i=!1,a,u=function(){r=t.subscribe(Et(n,void 0,void 0,function(o){a||(a=new Rr,fn(e(a)).subscribe(Et(n,function(){return r?u():i=!0}))),a&&a.next(o)})),i&&(r.unsubscribe(),r=null,i=!1,u())};u()})}function hm(e){return Mt(function(t,n){var r=!1,i=null;t.subscribe(Et(n,function(a){r=!0,i=a})),fn(e).subscribe(Et(n,function(){if(r){r=!1;var a=i;i=null,n.next(a)}},rr))})}function dS(e,t){return t===void 0&&(t=fa),hm(Bo(e,t))}function hS(e,t){return t===void 0&&(t=function(n,r){return n===r}),Mt(function(n,r){var i=Md(),a=Md(),u=function(l){r.next(l),r.complete()},o=function(l,f){var h=Et(r,function(d){var _=f.buffer,R=f.complete;_.length===0?R?u(!1):l.buffer.push(d):!t(d,_.shift())&&u(!1)},function(){l.complete=!0;var d=f.complete,_=f.buffer;d&&u(_.length===0),h==null||h.unsubscribe()});return h};n.subscribe(o(i,a)),fn(e).subscribe(o(a,i))})}function Md(){return{buffer:[],complete:!1}}function vS(e){return Mt(function(t,n){var r=!1,i,a=!1,u=0;t.subscribe(Et(n,function(o){a=!0,(!e||e(o,u++,t))&&(r&&n.error(new Jb("Too many matching values")),r=!0,i=o)},function(){r?(n.next(i),n.complete()):n.error(a?new Yb("No matching values"):new Qu)}))})}function mS(e){return e<=0?Tr:Mt(function(t,n){var r=new Array(e),i=0;return t.subscribe(Et(n,function(a){var u=i++;if(u<e)r[u]=a;else{var o=u%e,l=r[o];r[o]=a,n.next(l)}})),function(){r=null}})}function gS(e){return Mt(function(t,n){var r=!1,i=Et(n,function(){i==null||i.unsubscribe(),r=!0},rr);fn(e).subscribe(i),t.subscribe(Et(n,function(a){return r&&n.next(a)}))})}function pS(){return Ei(Tr)}function vm(e,t){return Gn(t)?Ei(function(){return e},t):Ei(function(){return e})}function _S(e){return Mt(function(t,n){fn(e).subscribe(Et(n,function(){return n.complete()},rr)),!n.closed&&t.subscribe(n)})}function Cs(e,t){return t===void 0&&(t=!1),Mt(function(n,r){var i=0;n.subscribe(Et(r,function(a){var u=e(a,i++);(u||t)&&r.next(a),!u&&r.complete()}))})}function yS(e){return e===void 0&&(e=fa),Mt(function(t,n){var r=e.now();t.subscribe(Et(n,function(i){var a=e.now(),u=a-r;r=a,n.next(new bS(i,u))}))})}var bS=function(){function e(t,n){this.value=t,this.interval=n}return e}();function IS(e,t,n){var r,i,a;if(n=n!=null?n:Fb,Sb(e)?r=e:typeof e=="number"&&(i=e),t)a=function(){return t};else throw new TypeError("No observable provided to switch to");if(r==null&&i==null)throw new TypeError("No timeout provided.");return Yv({first:r,each:i,scheduler:n,with:a})}function SS(e){return e===void 0&&(e=jb),ii(function(t){return{value:t,timestamp:e.now()}})}function AS(e){return Mt(function(t,n){var r=new Rr;n.next(r.asObservable());var i=function(a){r.error(a),n.error(a)};return t.subscribe(Et(n,function(a){return r==null?void 0:r.next(a)},function(){r.complete(),n.complete()},i)),fn(e).subscribe(Et(n,function(){r.complete(),n.next(r=new Rr)},rr,i)),function(){r==null||r.unsubscribe(),r=null}})}function ES(e,t){t===void 0&&(t=0);var n=t>0?t:e;return Mt(function(r,i){var a=[new Rr],u=[],o=0;i.next(a[0].asObservable()),r.subscribe(Et(i,function(l){var f,h;try{for(var d=Hi(a),_=d.next();!_.done;_=d.next()){var R=_.value;R.next(l)}}catch(g){f={error:g}}finally{try{_&&!_.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}var A=o-e+1;if(A>=0&&A%n===0&&a.shift().complete(),++o%n===0){var E=new Rr;a.push(E),i.next(E.asObservable())}},function(){for(;a.length>0;)a.shift().complete();i.complete()},function(l){for(;a.length>0;)a.shift().error(l);i.error(l)},function(){u=null,a=null}))})}function RS(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(t=Xu(r))!==null&&t!==void 0?t:fa,u=(n=r[0])!==null&&n!==void 0?n:null,o=r[1]||1/0;return Mt(function(l,f){var h=[],d=!1,_=function(g){var I=g.window,C=g.subs;I.complete(),C.unsubscribe(),Ju(h,g),d&&R()},R=function(){if(h){var g=new Er;f.add(g);var I=new Rr,C={window:I,subs:g,seen:0};h.push(C),f.next(I.asObservable()),Du(g,a,function(){return _(C)},e)}};u!==null&&u>=0?Du(f,a,R,u,!0):d=!0,R();var A=function(g){return h.slice().forEach(g)},E=function(g){A(function(I){var C=I.window;return g(C)}),g(f),f.unsubscribe()};return l.subscribe(Et(f,function(g){A(function(I){I.window.next(g),o<=++I.seen&&_(I)})},function(){return E(function(g){return g.complete()})},function(g){return E(function(I){return I.error(g)})})),function(){h=null}})}function wS(e,t){return Mt(function(n,r){var i=[],a=function(u){for(;0<i.length;)i.shift().error(u);r.error(u)};fn(e).subscribe(Et(r,function(u){var o=new Rr;i.push(o);var l=new Er,f=function(){Ju(i,o),o.complete(),l.unsubscribe()},h;try{h=fn(t(u))}catch(d){a(d);return}r.next(o.asObservable()),l.add(h.subscribe(Et(r,f,rr,a)))},rr)),n.subscribe(Et(r,function(u){var o,l,f=i.slice();try{for(var h=Hi(f),d=h.next();!d.done;d=h.next()){var _=d.value;_.next(u)}}catch(R){o={error:R}}finally{try{d&&!d.done&&(l=h.return)&&l.call(h)}finally{if(o)throw o.error}}},function(){for(;0<i.length;)i.shift().complete();r.complete()},a,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}function TS(e){return Mt(function(t,n){var r,i,a=function(o){r.error(o),n.error(o)},u=function(){i==null||i.unsubscribe(),r==null||r.complete(),r=new Rr,n.next(r.asObservable());var o;try{o=fn(e())}catch(l){a(l);return}o.subscribe(i=Et(n,u,u,a))};u(),t.subscribe(Et(n,function(o){return r.next(o)},function(){r.complete(),n.complete()},a,function(){i==null||i.unsubscribe(),r=null}))})}function OS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Hc(e);return Mt(function(r,i){for(var a=e.length,u=new Array(a),o=e.map(function(){return!1}),l=!1,f=function(d){fn(e[d]).subscribe(Et(i,function(_){u[d]=_,!l&&!o[d]&&(o[d]=!0,(l=o.every(Tr))&&(o=null))},rr))},h=0;h<a;h++)f(h);r.subscribe(Et(i,function(d){if(l){var _=Nr([d],wr(u));i.next(n?n.apply(void 0,Nr([],wr(_))):_)}}))})}function CS(e){return cm(Rs,e)}function MS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Mt(function(n,r){Rs.apply(void 0,Nr([n],wr(e))).subscribe(r)})}function kS(e,t){return function(r,i){return t(r(e(i)),i)}}function kd(e){const t=[];let n;for(;!(n=e.next()).done;)t.push(n.value);return t}function PS(e){return e!=null&&typeof e.then=="function"}function jo(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function Tl(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const NS=function(){const e=Object.prototype.toString;return e.call(arguments)==="[object Arguments]"?function(n){return e.call(n)==="[object Arguments]"}:function(n){return jo("callee",n)}}(),Pd=function(){const e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){return arguments.propertyIsEnumerable("length")}(),r=function(a,u){for(var o=0;o<a.length;){if(a[o]===u)return!0;o+=1}return!1};return typeof Object.keys=="function"&&!n?function(a){return Object(a)!==a?[]:Object.keys(a)}:function(a){if(Object(a)!==a)return[];let u,o;const l=[],f=n&&NS(a);for(u in a)jo(u,a)&&(!f||u!=="length")&&(l[l.length]=u);if(e)for(o=t.length-1;o>=0;)u=t[o],jo(u,a)&&!r(l,u)&&(l[l.length]=u),o-=1;return l}}();function Ol(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}function ti(e,t,n=[],r=[]){if(Tl(e,t))return!0;if(Ol(e)!==Ol(t)||e==null||t==null)return!1;if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(Ol(e)){case"Arguments":case"Array":case"Object":if(PS(e))return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Tl(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Tl(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break;case"Map":case"Set":if(!ti(kd(e.entries()),kd(t.entries()),n,r))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":break;case"ArrayBuffer":break;default:return!1}const i=Pd(e);if(i.length!==Pd(t).length)return!1;let a=n.length-1;for(;a>=0;){if(n[a]===e)return r[a]===t;a-=1}for(n.push(e),r.push(t),a=i.length-1;a>=0;){const u=i[a];if(!(jo(u,t)&&ti(t[u],e[u],n,r)))return!1;a-=1}return n.pop(),r.pop(),!0}const WS=typeof process<"u"&&!1;function Nd(e,t,n){if(e in n&&ti(t,n[e]))return n;{const r={};for(const i in n)r[i]=n[i];return r[e]=t,r}}function FS(e){typeof console<"u"&&typeof console.error=="function"&&console.error("[Focal]: "+e);try{throw new Error(e)}catch{}}const US=new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"return\\s","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));function DS(e){const t=US,n=2,r=e.match(t);if(r&&r[n])return r[n].split(".");throw new TypeError('Expected a property expression, got "'.concat(e,'".\n\n      A property expression should be a referentially transparent (no side-effects),\n      single-expression "getter" function.\n\n      Correct example: "function (x) { return x.some }" or "x => x.some".\n      Incorrect example: "function (x) { var y = x.some; return y }" or "({some}) => some"'))}function LS(e){return DS(e.toString())}function Go(e){return e===void 0?t=>uf(n=>n[t],(n,r)=>Nd(t,n,r)):uf(t=>t[e],(t,n)=>Nd(e,t,n))}let Wd=0;function qS(e){if(Wd<10){Wd++;const t="x.".concat(e.join(".")),n="'".concat(e.join("', '"),"'");FS("The property expression overload of Atom.lens and Lens.prop are deprecated and will be removed in next versions of Focal. Please use the key name overload for Atom.lens and Lens.key instead. "+"You can convert your code by changing the calls:\n  a.lens(x => ".concat(t,") to a.lens(").concat(n,"),\n  Lens.prop((x: T) => ").concat(t,") to Lens.key<T>()(").concat(n,")."))}}function BS(e){const t=LS(e);return WS&&qS(t),Ms(...t.map(Go()))}function uf(e,t){return{get:e,set:t,modify:kS(e,t),compose(n){return uf(r=>n.get(e(r)),(r,i)=>t(n.set(r,e(i)),i))}}}function Ms(...e){if(e.length===0)throw new TypeError("Can not compose zero lenses. You probably want `Lens.identity`.");if(e.length===1)return e[0];{let t=e[0];return e.slice(1).forEach(n=>{t=t.compose(n)}),t}}function jS(e,t){return function(n){return[Ai(e,t)(n),Ai(am(e,t))(n)]}}function GS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cS.apply(void 0,Nr([],wr(uu(e))))}class ks extends Gc{view(...t){return t[0]!==void 0?typeof t[0]=="function"?new Ml(this,t[0]):typeof t[0]=="string"?new Ml(this,Ms(...t.map(Go())).get):new Ml(this,n=>t[0].get(n)):this}}class mm extends ks{set(t){this.modify(()=>t)}lens(t,...n){return typeof t=="function"?new Cl(this,BS(t),ti):typeof t=="string"?new Cl(this,Ms(Go(t),...n.map(r=>Go(r))),ti):new Cl(this,t,ti)}}class HS extends mm{constructor(t){super(t)}get(){return this.getValue()}modify(t){const n=this.getValue(),r=t(n);ti(n,r)||this.next(r)}set(t){const n=this.getValue();ti(n,t)||this.next(t)}}class Cl extends mm{constructor(n,r,i=ti){super(void 0);ir(this,"_source");ir(this,"_lens");ir(this,"_eq");ir(this,"_subscription",null);ir(this,"_refCount",0);this._source=n,this._lens=r,this._eq=i}get(){return this._subscription?this.getValue():this._lens.get(this._source.get())}modify(n){this._source.modify(r=>this._lens.modify(n,r))}set(n){this._source.modify(r=>this._lens.set(n,r))}_onSourceValue(n){const r=this.getValue(),i=this._lens.get(n);this._eq(r,i)||this.next(i)}subscribe(...n){this._subscription||(this._subscription=this._source.subscribe(i=>this._onSourceValue(i))),this._refCount++;const r=new Er(()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)});return r.add(super.subscribe(...n)),r}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class Ml extends ks{constructor(n,r,i=ti){super(void 0);ir(this,"_source");ir(this,"_getter");ir(this,"_eq");ir(this,"_subscription",null);ir(this,"_refCount",0);this._source=n,this._getter=r,this._eq=i}get(){return this._subscription?this.getValue():this._getter(this._source.get())}_onSourceValue(n){const r=this.getValue(),i=this._getter(n);this._eq(r,i)||this.next(i)}subscribe(...n){this._subscription||(this._subscription=this._source.subscribe(i=>this._onSourceValue(i))),this._refCount++;const r=new Er(()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)});return r.add(super.subscribe(...n)),r}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class zS extends ks{constructor(n,r,i=ti){super(void 0);ir(this,"_sources");ir(this,"_combineFn");ir(this,"_eq");ir(this,"_subscription",null);ir(this,"_refCount",0);this._sources=n,this._combineFn=r,this._eq=i}get(){return this._subscription?this.getValue():this._combineFn(this._sources.map(n=>n.get()))}_onSourceValues(n){const r=this.getValue(),i=this._combineFn(n);this._eq(r,i)||this.next(i)}subscribe(...n){this._subscription||(this._subscription=Vc(this._sources).subscribe(i=>this._onSourceValues(i))),this._refCount++;const r=new Er(()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)});return r.add(super.subscribe(...n)),r}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}var $a;(function(e){function t(a){return new HS(a)}e.create=t;function n(a,u){const o=(f,h,d)=>console.log("%c"+f,"color: ".concat(h,"; font-weight: bold"),d);let l=a.get();return a.subscribe(f=>{typeof u=="function"?u(l,f):(console.group("UPDATE ".concat(u?"TYPE: ".concat(u," "):"","@ ").concat(new Date().toTimeString())),o("prev state","#9E9E9E",l),o("next state","#4CAF50",f),console.groupEnd()),l=f}),a}e.log=n;function r(...a){return new zS(a.slice(void 0,-1),u=>a[a.length-1](...u))}e.combine=r;function i(a){const u=new Gc(null),o=a.pipe(Gv(l=>{const f=u.value;f===null?u.next(e.create(l)):f.set(l)}),Hv());return new Dn(l=>{const f=new Er;return f.add(u.pipe(Ai(h=>!!h)).subscribe(l)),f.add(o.subscribe(void 0,h=>l.error(h),()=>l.complete())),f})}e.fromObservable=i})($a||($a={}));var VS=Object.create,Ps=Object.defineProperty,KS=Object.getOwnPropertyDescriptor,Ns=Object.getOwnPropertyNames,$S=Object.getPrototypeOf,YS=Object.prototype.hasOwnProperty,ou=(e,t)=>function(){return e&&(t=(0,e[Ns(e)[0]])(e=0)),t},wt=(e,t)=>function(){return t||(0,e[Ns(e)[0]])((t={exports:{}}).exports,t),t.exports},In=(e,t)=>{for(var n in t)Ps(e,n,{get:t[n],enumerable:!0})},gm=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ns(t))!YS.call(e,i)&&i!==n&&Ps(e,i,{get:()=>t[i],enumerable:!(r=KS(t,i))||r.enumerable});return e},Br=(e,t,n)=>(gm(e,t,"default"),n),Me=(e,t,n)=>(n=e!=null?VS($S(e)):{},gm(t||!e||!e.__esModule?Ps(n,"default",{value:e,enumerable:!0}):n,e)),it=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/function.js"(e){var t=e&&e.__spreadArray||function(D,Y,fe){if(fe||arguments.length===2)for(var $=0,x=Y.length,Re;$<x;$++)(Re||!($ in Y))&&(Re||(Re=Array.prototype.slice.call(Y,0,$)),Re[$]=Y[$]);return D.concat(Re||Array.prototype.slice.call(Y))};Object.defineProperty(e,"__esModule",{value:!0}),e.dual=e.getEndomorphismMonoid=e.not=e.SK=e.hole=e.pipe=e.untupled=e.tupled=e.absurd=e.decrement=e.increment=e.tuple=e.flow=e.flip=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.constant=e.unsafeCoerce=e.identity=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0;var n=function(D){return function(){return{meet:function(Y,fe){return function($){return D.meet(Y($),fe($))}},join:function(Y,fe){return function($){return D.join(Y($),fe($))}},zero:function(){return D.zero},one:function(){return D.one},implies:function(Y,fe){return function($){return D.implies(Y($),fe($))}},not:function(Y){return function(fe){return D.not(Y(fe))}}}}};e.getBooleanAlgebra=n;var r=function(D){return function(){return{concat:function(Y,fe){return function($){return D.concat(Y($),fe($))}}}}};e.getSemigroup=r;var i=function(D){var Y=(0,e.getSemigroup)(D);return function(){return{concat:Y().concat,empty:function(){return D.empty}}}};e.getMonoid=i;var a=function(D){return{add:function(Y,fe){return function($){return D.add(Y($),fe($))}},zero:function(){return D.zero},mul:function(Y,fe){return function($){return D.mul(Y($),fe($))}},one:function(){return D.one}}};e.getSemiring=a;var u=function(D){var Y=(0,e.getSemiring)(D);return{add:Y.add,mul:Y.mul,one:Y.one,zero:Y.zero,sub:function(fe,$){return function(x){return D.sub(fe(x),$(x))}}}};e.getRing=u;var o=function(D){return function(Y){return Y(D)}};e.apply=o;function l(D){return D}e.identity=l,e.unsafeCoerce=l;function f(D){return function(){return D}}e.constant=f,e.constTrue=f(!0),e.constFalse=f(!1),e.constNull=f(null),e.constUndefined=f(void 0),e.constVoid=e.constUndefined;function h(D){return function(){for(var Y=[],fe=0;fe<arguments.length;fe++)Y[fe]=arguments[fe];return Y.length>1?D(Y[1],Y[0]):function($){return D($)(Y[0])}}}e.flip=h;function d(D,Y,fe,$,x,Re,N,P,s){switch(arguments.length){case 1:return D;case 2:return function(){return Y(D.apply(this,arguments))};case 3:return function(){return fe(Y(D.apply(this,arguments)))};case 4:return function(){return $(fe(Y(D.apply(this,arguments))))};case 5:return function(){return x($(fe(Y(D.apply(this,arguments)))))};case 6:return function(){return Re(x($(fe(Y(D.apply(this,arguments))))))};case 7:return function(){return N(Re(x($(fe(Y(D.apply(this,arguments)))))))};case 8:return function(){return P(N(Re(x($(fe(Y(D.apply(this,arguments))))))))};case 9:return function(){return s(P(N(Re(x($(fe(Y(D.apply(this,arguments)))))))))}}}e.flow=d;function _(){for(var D=[],Y=0;Y<arguments.length;Y++)D[Y]=arguments[Y];return D}e.tuple=_;function R(D){return D+1}e.increment=R;function A(D){return D-1}e.decrement=A;function E(D){throw new Error("Called `absurd` function which should be uncallable")}e.absurd=E;function g(D){return function(Y){return D.apply(void 0,Y)}}e.tupled=g;function I(D){return function(){for(var Y=[],fe=0;fe<arguments.length;fe++)Y[fe]=arguments[fe];return D(Y)}}e.untupled=I;function C(D,Y,fe,$,x,Re,N,P,s){switch(arguments.length){case 1:return D;case 2:return Y(D);case 3:return fe(Y(D));case 4:return $(fe(Y(D)));case 5:return x($(fe(Y(D))));case 6:return Re(x($(fe(Y(D)))));case 7:return N(Re(x($(fe(Y(D))))));case 8:return P(N(Re(x($(fe(Y(D)))))));case 9:return s(P(N(Re(x($(fe(Y(D))))))));default:{for(var S=arguments[0],M=1;M<arguments.length;M++)S=arguments[M](S);return S}}}e.pipe=C,e.hole=E;var k=function(D,Y){return Y};e.SK=k;function L(D){return function(Y){return!D(Y)}}e.not=L;var q=function(){return{concat:function(D,Y){return d(D,Y)},empty:l}};e.getEndomorphismMonoid=q;var G=function(D,Y){var fe=typeof D=="number"?function($){return $.length>=D}:D;return function(){var $=Array.from(arguments);return fe(arguments)?Y.apply(this,$):function(x){return Y.apply(void 0,t([x],$,!1))}}};e.dual=G}}),Wn=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/internal.js"(e){var t=e&&e.__spreadArray||function(D,Y,fe){if(fe||arguments.length===2)for(var $=0,x=Y.length,Re;$<x;$++)(Re||!($ in Y))&&(Re||(Re=Array.prototype.slice.call(Y,0,$)),Re[$]=Y[$]);return D.concat(Re||Array.prototype.slice.call(Y))};Object.defineProperty(e,"__esModule",{value:!0}),e.flatMapReader=e.flatMapTask=e.flatMapIO=e.flatMapEither=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.fromReadonlyNonEmptyArray=e.has=e.emptyRecord=e.emptyReadonlyArray=e.tail=e.head=e.isNonEmpty=e.singleton=e.right=e.left=e.isRight=e.isLeft=e.some=e.none=e.isSome=e.isNone=void 0;var n=it(),r=function(D){return D._tag==="None"};e.isNone=r;var i=function(D){return D._tag==="Some"};e.isSome=i,e.none={_tag:"None"};var a=function(D){return{_tag:"Some",value:D}};e.some=a;var u=function(D){return D._tag==="Left"};e.isLeft=u;var o=function(D){return D._tag==="Right"};e.isRight=o;var l=function(D){return{_tag:"Left",left:D}};e.left=l;var f=function(D){return{_tag:"Right",right:D}};e.right=f;var h=function(D){return[D]};e.singleton=h;var d=function(D){return D.length>0};e.isNonEmpty=d;var _=function(D){return D[0]};e.head=_;var R=function(D){return D.slice(1)};e.tail=R,e.emptyReadonlyArray=[],e.emptyRecord={},e.has=Object.prototype.hasOwnProperty;var A=function(D){return t([D[0]],D.slice(1),!0)};e.fromReadonlyNonEmptyArray=A;var E=function(D){return function(Y,fe){return function(){for(var $=[],x=0;x<arguments.length;x++)$[x]=arguments[x];var Re=Y.apply(void 0,$);return D.fromEither(Re==null?(0,e.left)(fe.apply(void 0,$)):(0,e.right)(Re))}}};e.liftNullable=E;var g=function(D){return function(Y,fe){return function(){for(var $=[],x=0;x<arguments.length;x++)$[x]=arguments[x];var Re=Y.apply(void 0,$);return D.fromEither((0,e.isNone)(Re)?(0,e.left)(fe.apply(void 0,$)):(0,e.right)(Re.value))}}};e.liftOption=g;var I=function(D,Y){return(0,n.dual)(3,function(fe,$,x){return Y.flatMap(fe,(0,e.liftNullable)(D)($,x))})};e.flatMapNullable=I;var C=function(D,Y){return(0,n.dual)(3,function(fe,$,x){return Y.flatMap(fe,(0,e.liftOption)(D)($,x))})};e.flatMapOption=C;var k=function(D,Y){return(0,n.dual)(2,function(fe,$){return Y.flatMap(fe,function(x){return D.fromEither($(x))})})};e.flatMapEither=k;var L=function(D,Y){return(0,n.dual)(2,function(fe,$){return Y.flatMap(fe,function(x){return D.fromIO($(x))})})};e.flatMapIO=L;var q=function(D,Y){return(0,n.dual)(2,function(fe,$){return Y.flatMap(fe,function(x){return D.fromTask($(x))})})};e.flatMapTask=q;var G=function(D,Y){return(0,n.dual)(2,function(fe,$){return Y.flatMap(fe,function(x){return D.fromReader($(x))})})};e.flatMapReader=G}}),Jn=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Apply.js"(e){var t=e&&e.__createBinding||(Object.create?function(I,C,k,L){L===void 0&&(L=k);var q=Object.getOwnPropertyDescriptor(C,k);(!q||("get"in q?!C.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return C[k]}}),Object.defineProperty(I,L,q)}:function(I,C,k,L){L===void 0&&(L=k),I[L]=C[k]}),n=e&&e.__setModuleDefault||(Object.create?function(I,C){Object.defineProperty(I,"default",{enumerable:!0,value:C})}:function(I,C){I.default=C}),r=e&&e.__importStar||function(I){if(I&&I.__esModule)return I;var C={};if(I!=null)for(var k in I)k!=="default"&&Object.prototype.hasOwnProperty.call(I,k)&&t(C,I,k);return n(C,I),C};Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceS=e.sequenceT=e.getApplySemigroup=e.apS=e.apSecond=e.apFirst=e.ap=void 0;var i=it(),a=r(Wn());function u(I,C){return function(k){return function(L){return I.ap(I.map(L,function(q){return function(G){return C.ap(q,G)}}),k)}}}e.ap=u;function o(I){return function(C){return function(k){return I.ap(I.map(k,function(L){return function(){return L}}),C)}}}e.apFirst=o;function l(I){return function(C){return function(k){return I.ap(I.map(k,function(){return function(L){return L}}),C)}}}e.apSecond=l;function f(I){return function(C,k){return function(L){return I.ap(I.map(L,function(q){return function(G){var D;return Object.assign({},q,(D={},D[C]=G,D))}}),k)}}}e.apS=f;function h(I){return function(C){return{concat:function(k,L){return I.ap(I.map(k,function(q){return function(G){return C.concat(q,G)}}),L)}}}}e.getApplySemigroup=h;function d(I,C,k){return function(L){for(var q=Array(k.length+1),G=0;G<k.length;G++)q[G]=k[G];return q[k.length]=L,C===0?I.apply(null,q):d(I,C-1,q)}}var _={1:function(I){return[I]},2:function(I){return function(C){return[I,C]}},3:function(I){return function(C){return function(k){return[I,C,k]}}},4:function(I){return function(C){return function(k){return function(L){return[I,C,k,L]}}}},5:function(I){return function(C){return function(k){return function(L){return function(q){return[I,C,k,L,q]}}}}}};function R(I){return a.has.call(_,I)||(_[I]=d(i.tuple,I-1,[])),_[I]}function A(I){return function(){for(var C=[],k=0;k<arguments.length;k++)C[k]=arguments[k];for(var L=C.length,q=R(L),G=I.map(C[0],q),D=1;D<L;D++)G=I.ap(G,C[D]);return G}}e.sequenceT=A;function E(I){var C=I.length;switch(C){case 1:return function(k){var L;return L={},L[I[0]]=k,L};case 2:return function(k){return function(L){var q;return q={},q[I[0]]=k,q[I[1]]=L,q}};case 3:return function(k){return function(L){return function(q){var G;return G={},G[I[0]]=k,G[I[1]]=L,G[I[2]]=q,G}}};case 4:return function(k){return function(L){return function(q){return function(G){var D;return D={},D[I[0]]=k,D[I[1]]=L,D[I[2]]=q,D[I[3]]=G,D}}}};case 5:return function(k){return function(L){return function(q){return function(G){return function(D){var Y;return Y={},Y[I[0]]=k,Y[I[1]]=L,Y[I[2]]=q,Y[I[3]]=G,Y[I[4]]=D,Y}}}}};default:return d(function(){for(var k=[],L=0;L<arguments.length;L++)k[L]=arguments[L];for(var q={},G=0;G<C;G++)q[I[G]]=k[G];return q},C-1,[])}}function g(I){return function(C){for(var k=Object.keys(C),L=k.length,q=E(k),G=I.map(C[k[0]],q),D=1;D<L;D++)G=I.ap(G,C[k[D]]);return G}}e.sequenceS=g}}),On=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Functor.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asUnit=e.as=e.getFunctorComposition=e.let=e.bindTo=e.flap=e.map=void 0;var t=it();function n(f,h){return function(d){return function(_){return f.map(_,function(R){return h.map(R,d)})}}}e.map=n;function r(f){return function(h){return function(d){return f.map(d,function(_){return _(h)})}}}e.flap=r;function i(f){return function(h){return function(d){return f.map(d,function(_){var R;return R={},R[h]=_,R})}}}e.bindTo=i;function a(f){return function(h,d){return function(_){return f.map(_,function(R){var A;return Object.assign({},R,(A={},A[h]=d(R),A))})}}}e.let=a;function u(f,h){var d=n(f,h);return{map:function(_,R){return(0,t.pipe)(_,d(R))}}}e.getFunctorComposition=u;function o(f){return function(h,d){return f.map(h,function(){return d})}}e.as=o;function l(f){var h=o(f);return function(d){return h(d,void 0)}}e.asUnit=l}}),sa=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Applicative.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getApplicativeComposition=e.getApplicativeMonoid=void 0;var t=Jn(),n=it(),r=On();function i(u){var o=(0,t.getApplySemigroup)(u);return function(l){return{concat:o(l).concat,empty:u.of(l.empty)}}}e.getApplicativeMonoid=i;function a(u,o){var l=(0,r.getFunctorComposition)(u,o).map,f=(0,t.ap)(u,o);return{map:l,of:function(h){return u.of(o.of(h))},ap:function(h,d){return(0,n.pipe)(h,f(d))}}}e.getApplicativeComposition=a}}),or=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Chain.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bind=e.tap=e.chainFirst=void 0;function t(i){var a=n(i);return function(u){return function(o){return a(o,u)}}}e.chainFirst=t;function n(i){return function(a,u){return i.chain(a,function(o){return i.map(u(o),function(){return o})})}}e.tap=n;function r(i){return function(a,u){return function(o){return i.chain(o,function(l){return i.map(u(l),function(f){var h;return Object.assign({},l,(h={},h[a]=f,h))})})}}}e.bind=r}}),da=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/FromEither.js"(e){var t=e&&e.__createBinding||(Object.create?function(g,I,C,k){k===void 0&&(k=C);var L=Object.getOwnPropertyDescriptor(I,C);(!L||("get"in L?!I.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return I[C]}}),Object.defineProperty(g,k,L)}:function(g,I,C,k){k===void 0&&(k=C),g[k]=I[C]}),n=e&&e.__setModuleDefault||(Object.create?function(g,I){Object.defineProperty(g,"default",{enumerable:!0,value:I})}:function(g,I){g.default=I}),r=e&&e.__importStar||function(g){if(g&&g.__esModule)return g;var I={};if(g!=null)for(var C in g)C!=="default"&&Object.prototype.hasOwnProperty.call(g,C)&&t(I,g,C);return n(I,g),I};Object.defineProperty(e,"__esModule",{value:!0}),e.tapEither=e.filterOrElse=e.chainFirstEitherK=e.chainEitherK=e.fromEitherK=e.chainOptionK=e.fromOptionK=e.fromPredicate=e.fromOption=void 0;var i=or(),a=it(),u=r(Wn());function o(g){return function(I){return function(C){return g.fromEither(u.isNone(C)?u.left(I()):u.right(C.value))}}}e.fromOption=o;function l(g){return function(I,C){return function(k){return g.fromEither(I(k)?u.right(k):u.left(C(k)))}}}e.fromPredicate=l;function f(g){var I=o(g);return function(C){var k=I(C);return function(L){return(0,a.flow)(L,k)}}}e.fromOptionK=f;function h(g,I){var C=f(g);return function(k){var L=C(k);return function(q){return function(G){return I.chain(G,L(q))}}}}e.chainOptionK=h;function d(g){return function(I){return(0,a.flow)(I,g.fromEither)}}e.fromEitherK=d;function _(g,I){var C=d(g);return function(k){return function(L){return I.chain(L,C(k))}}}e.chainEitherK=_;function R(g,I){var C=E(g,I);return function(k){return function(L){return C(L,k)}}}e.chainFirstEitherK=R;function A(g,I){return function(C,k){return function(L){return I.chain(L,function(q){return g.fromEither(C(q)?u.right(q):u.left(k(q)))})}}}e.filterOrElse=A;function E(g,I){var C=d(g),k=(0,i.tap)(I);return function(L,q){return k(L,C(q))}}e.tapEither=E}}),pm=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Predicate.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.and=e.or=e.not=e.Contravariant=e.getMonoidAll=e.getSemigroupAll=e.getMonoidAny=e.getSemigroupAny=e.URI=e.contramap=void 0;var t=it(),n=function(d,_){return(0,t.pipe)(d,(0,e.contramap)(_))},r=function(d){return function(_){return(0,t.flow)(d,_)}};e.contramap=r,e.URI="Predicate";var i=function(){return{concat:function(d,_){return(0,t.pipe)(d,(0,e.or)(_))}}};e.getSemigroupAny=i;var a=function(){return{concat:(0,e.getSemigroupAny)().concat,empty:t.constFalse}};e.getMonoidAny=a;var u=function(){return{concat:function(d,_){return(0,t.pipe)(d,(0,e.and)(_))}}};e.getSemigroupAll=u;var o=function(){return{concat:(0,e.getSemigroupAll)().concat,empty:t.constTrue}};e.getMonoidAll=o,e.Contravariant={URI:e.URI,contramap:n};var l=function(d){return function(_){return!d(_)}};e.not=l;var f=function(d){return function(_){return function(R){return _(R)||d(R)}}};e.or=f;var h=function(d){return function(_){return function(R){return _(R)&&d(R)}}};e.and=h}}),JS=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Magma.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=e.endo=e.filterSecond=e.filterFirst=e.reverse=void 0;var t=function(u){return{concat:function(o,l){return u.concat(l,o)}}};e.reverse=t;var n=function(u){return function(o){return{concat:function(l,f){return u(l)?o.concat(l,f):f}}}};e.filterFirst=n;var r=function(u){return function(o){return{concat:function(l,f){return u(f)?o.concat(l,f):l}}}};e.filterSecond=r;var i=function(u){return function(o){return{concat:function(l,f){return o.concat(u(l),u(f))}}}};e.endo=i;var a=function(u){return function(o){return function(l){return l.reduce(function(f,h){return u.concat(f,h)},o)}}};e.concatAll=a}}),jr=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Eq.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.eqDate=e.eqNumber=e.eqString=e.eqBoolean=e.eq=e.strictEqual=e.getStructEq=e.getTupleEq=e.Contravariant=e.getMonoid=e.getSemigroup=e.eqStrict=e.URI=e.contramap=e.tuple=e.struct=e.fromEquals=void 0;var t=it(),n=function(h){return{equals:function(d,_){return d===_||h(d,_)}}};e.fromEquals=n;var r=function(h){return(0,e.fromEquals)(function(d,_){for(var R in h)if(!h[R].equals(d[R],_[R]))return!1;return!0})};e.struct=r;var i=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];return(0,e.fromEquals)(function(_,R){return h.every(function(A,E){return A.equals(_[E],R[E])})})};e.tuple=i;var a=function(h,d){return(0,t.pipe)(h,(0,e.contramap)(d))},u=function(h){return function(d){return(0,e.fromEquals)(function(_,R){return d.equals(h(_),h(R))})}};e.contramap=u,e.URI="Eq",e.eqStrict={equals:function(h,d){return h===d}};var o={equals:function(){return!0}},l=function(){return{concat:function(h,d){return(0,e.fromEquals)(function(_,R){return h.equals(_,R)&&d.equals(_,R)})}}};e.getSemigroup=l;var f=function(){return{concat:(0,e.getSemigroup)().concat,empty:o}};e.getMonoid=f,e.Contravariant={URI:e.URI,contramap:a},e.getTupleEq=e.tuple,e.getStructEq=e.struct,e.strictEqual=e.eqStrict.equals,e.eq=e.Contravariant,e.eqBoolean=e.eqStrict,e.eqString=e.eqStrict,e.eqNumber=e.eqStrict,e.eqDate={equals:function(h,d){return h.valueOf()===d.valueOf()}}}}),Wr=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Ord.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ordDate=e.ordNumber=e.ordString=e.ordBoolean=e.ord=e.getDualOrd=e.getTupleOrd=e.between=e.clamp=e.max=e.min=e.geq=e.leq=e.gt=e.lt=e.equals=e.trivial=e.Contravariant=e.getMonoid=e.getSemigroup=e.URI=e.contramap=e.reverse=e.tuple=e.fromCompare=e.equalsDefault=void 0;var t=jr(),n=it(),r=function(G){return function(D,Y){return D===Y||G(D,Y)===0}};e.equalsDefault=r;var i=function(G){return{equals:(0,e.equalsDefault)(G),compare:function(D,Y){return D===Y?0:G(D,Y)}}};e.fromCompare=i;var a=function(){for(var G=[],D=0;D<arguments.length;D++)G[D]=arguments[D];return(0,e.fromCompare)(function(Y,fe){for(var $=0;$<G.length-1;$++){var x=G[$].compare(Y[$],fe[$]);if(x!==0)return x}return G[$].compare(Y[$],fe[$])})};e.tuple=a;var u=function(G){return(0,e.fromCompare)(function(D,Y){return G.compare(Y,D)})};e.reverse=u;var o=function(G,D){return(0,n.pipe)(G,(0,e.contramap)(D))},l=function(G){return function(D){return(0,e.fromCompare)(function(Y,fe){return D.compare(G(Y),G(fe))})}};e.contramap=l,e.URI="Ord";var f=function(){return{concat:function(G,D){return(0,e.fromCompare)(function(Y,fe){var $=G.compare(Y,fe);return $!==0?$:D.compare(Y,fe)})}}};e.getSemigroup=f;var h=function(){return{concat:(0,e.getSemigroup)().concat,empty:(0,e.fromCompare)(function(){return 0})}};e.getMonoid=h,e.Contravariant={URI:e.URI,contramap:o},e.trivial={equals:n.constTrue,compare:(0,n.constant)(0)};var d=function(G){return function(D){return function(Y){return Y===D||G.compare(Y,D)===0}}};e.equals=d;var _=function(G){return function(D,Y){return G.compare(D,Y)===-1}};e.lt=_;var R=function(G){return function(D,Y){return G.compare(D,Y)===1}};e.gt=R;var A=function(G){return function(D,Y){return G.compare(D,Y)!==1}};e.leq=A;var E=function(G){return function(D,Y){return G.compare(D,Y)!==-1}};e.geq=E;var g=function(G){return function(D,Y){return D===Y||G.compare(D,Y)<1?D:Y}};e.min=g;var I=function(G){return function(D,Y){return D===Y||G.compare(D,Y)>-1?D:Y}};e.max=I;var C=function(G){var D=(0,e.min)(G),Y=(0,e.max)(G);return function(fe,$){return function(x){return Y(D(x,$),fe)}}};e.clamp=C;var k=function(G){var D=(0,e.lt)(G),Y=(0,e.gt)(G);return function(fe,$){return function(x){return!(D(x,fe)||Y(x,$))}}};e.between=k,e.getTupleOrd=e.tuple,e.getDualOrd=e.reverse,e.ord=e.Contravariant;function L(G,D){return G<D?-1:G>D?1:0}var q={equals:t.eqStrict.equals,compare:L};e.ordBoolean=q,e.ordString=q,e.ordNumber=q,e.ordDate=(0,n.pipe)(e.ordNumber,(0,e.contramap)(function(G){return G.valueOf()}))}}),cu=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Semigroup.js"(e){var t=e&&e.__createBinding||(Object.create?function(C,k,L,q){q===void 0&&(q=L);var G=Object.getOwnPropertyDescriptor(k,L);(!G||("get"in G?!k.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return k[L]}}),Object.defineProperty(C,q,G)}:function(C,k,L,q){q===void 0&&(q=L),C[q]=k[L]}),n=e&&e.__setModuleDefault||(Object.create?function(C,k){Object.defineProperty(C,"default",{enumerable:!0,value:k})}:function(C,k){C.default=k}),r=e&&e.__importStar||function(C){if(C&&C.__esModule)return C;var k={};if(C!=null)for(var L in C)L!=="default"&&Object.prototype.hasOwnProperty.call(C,L)&&t(k,C,L);return n(k,C),k};Object.defineProperty(e,"__esModule",{value:!0}),e.semigroupProduct=e.semigroupSum=e.semigroupString=e.getFunctionSemigroup=e.semigroupAny=e.semigroupAll=e.fold=e.getIntercalateSemigroup=e.getMeetSemigroup=e.getJoinSemigroup=e.getDualSemigroup=e.getStructSemigroup=e.getTupleSemigroup=e.getFirstSemigroup=e.getLastSemigroup=e.getObjectSemigroup=e.semigroupVoid=e.concatAll=e.last=e.first=e.intercalate=e.tuple=e.struct=e.reverse=e.constant=e.max=e.min=void 0;var i=it(),a=r(Wn()),u=r(JS()),o=r(Wr()),l=function(C){return{concat:o.min(C)}};e.min=l;var f=function(C){return{concat:o.max(C)}};e.max=f;var h=function(C){return{concat:function(){return C}}};e.constant=h,e.reverse=u.reverse;var d=function(C){return{concat:function(k,L){var q={};for(var G in C)a.has.call(C,G)&&(q[G]=C[G].concat(k[G],L[G]));return q}}};e.struct=d;var _=function(){for(var C=[],k=0;k<arguments.length;k++)C[k]=arguments[k];return{concat:function(L,q){return C.map(function(G,D){return G.concat(L[D],q[D])})}}};e.tuple=_;var R=function(C){return function(k){return{concat:function(L,q){return k.concat(L,k.concat(C,q))}}}};e.intercalate=R;var A=function(){return{concat:i.identity}};e.first=A;var E=function(){return{concat:function(C,k){return k}}};e.last=E,e.concatAll=u.concatAll,e.semigroupVoid=(0,e.constant)(void 0);var g=function(){return{concat:function(C,k){return Object.assign({},C,k)}}};e.getObjectSemigroup=g,e.getLastSemigroup=e.last,e.getFirstSemigroup=e.first,e.getTupleSemigroup=e.tuple,e.getStructSemigroup=e.struct,e.getDualSemigroup=e.reverse,e.getJoinSemigroup=e.max,e.getMeetSemigroup=e.min,e.getIntercalateSemigroup=e.intercalate;function I(C){var k=(0,e.concatAll)(C);return function(L,q){return q===void 0?k(L):k(L)(q)}}e.fold=I,e.semigroupAll={concat:function(C,k){return C&&k}},e.semigroupAny={concat:function(C,k){return C||k}},e.getFunctionSemigroup=i.getSemigroup,e.semigroupString={concat:function(C,k){return C+k}},e.semigroupSum={concat:function(C,k){return C+k}},e.semigroupProduct={concat:function(C,k){return C*k}}}}),wi=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Separated.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.right=e.left=e.flap=e.Functor=e.Bifunctor=e.URI=e.bimap=e.mapLeft=e.map=e.separated=void 0;var t=it(),n=On(),r=function(_,R){return{left:_,right:R}};e.separated=r;var i=function(_,R){return(0,t.pipe)(_,(0,e.map)(R))},a=function(_,R){return(0,t.pipe)(_,(0,e.mapLeft)(R))},u=function(_,R,A){return(0,t.pipe)(_,(0,e.bimap)(R,A))},o=function(_){return function(R){return(0,e.separated)((0,e.left)(R),_((0,e.right)(R)))}};e.map=o;var l=function(_){return function(R){return(0,e.separated)(_((0,e.left)(R)),(0,e.right)(R))}};e.mapLeft=l;var f=function(_,R){return function(A){return(0,e.separated)(_((0,e.left)(A)),R((0,e.right)(A)))}};e.bimap=f,e.URI="Separated",e.Bifunctor={URI:e.URI,mapLeft:a,bimap:u},e.Functor={URI:e.URI,map:i},e.flap=(0,n.flap)(e.Functor);var h=function(_){return _.left};e.left=h;var d=function(_){return _.right};e.right=d}}),$i=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Witherable.js"(e){var t=e&&e.__createBinding||(Object.create?function(l,f,h,d){d===void 0&&(d=h);var _=Object.getOwnPropertyDescriptor(f,h);(!_||("get"in _?!f.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(l,d,_)}:function(l,f,h,d){d===void 0&&(d=h),l[d]=f[h]}),n=e&&e.__setModuleDefault||(Object.create?function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}:function(l,f){l.default=f}),r=e&&e.__importStar||function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var h in l)h!=="default"&&Object.prototype.hasOwnProperty.call(l,h)&&t(f,l,h);return n(f,l),f};Object.defineProperty(e,"__esModule",{value:!0}),e.filterE=e.witherDefault=e.wiltDefault=void 0;var i=r(Wn());function a(l,f){return function(h){var d=l.traverse(h);return function(_,R){return h.map(d(_,R),f.separate)}}}e.wiltDefault=a;function u(l,f){return function(h){var d=l.traverse(h);return function(_,R){return h.map(d(_,R),f.compact)}}}e.witherDefault=u;function o(l){return function(f){var h=l.wither(f);return function(d){return function(_){return h(_,function(R){return f.map(d(R),function(A){return A?i.some(R):i.none})})}}}}e.filterE=o}}),Ws=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Zero.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.guard=void 0;function t(n,r){return function(i){return i?r.of(void 0):n.zero()}}e.guard=t}}),kn=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Option.js"(e){var t=e&&e.__createBinding||(Object.create?function(se,we,Be,gt){gt===void 0&&(gt=Be);var ft=Object.getOwnPropertyDescriptor(we,Be);(!ft||("get"in ft?!we.__esModule:ft.writable||ft.configurable))&&(ft={enumerable:!0,get:function(){return we[Be]}}),Object.defineProperty(se,gt,ft)}:function(se,we,Be,gt){gt===void 0&&(gt=Be),se[gt]=we[Be]}),n=e&&e.__setModuleDefault||(Object.create?function(se,we){Object.defineProperty(se,"default",{enumerable:!0,value:we})}:function(se,we){se.default=we}),r=e&&e.__importStar||function(se){if(se&&se.__esModule)return se;var we={};if(se!=null)for(var Be in se)Be!=="default"&&Object.prototype.hasOwnProperty.call(se,Be)&&t(we,se,Be);return n(we,se),we};Object.defineProperty(e,"__esModule",{value:!0}),e.Witherable=e.wilt=e.wither=e.Traversable=e.sequence=e.traverse=e.Filterable=e.partitionMap=e.partition=e.filterMap=e.filter=e.Compactable=e.separate=e.compact=e.Extend=e.extend=e.Alternative=e.guard=e.Zero=e.zero=e.Alt=e.alt=e.altW=e.orElse=e.Foldable=e.reduceRight=e.foldMap=e.reduce=e.Monad=e.Chain=e.flatMap=e.Applicative=e.Apply=e.ap=e.Pointed=e.of=e.asUnit=e.as=e.Functor=e.map=e.getMonoid=e.getOrd=e.getEq=e.getShow=e.URI=e.getRight=e.getLeft=e.fromPredicate=e.some=e.none=void 0,e.getFirstMonoid=e.getApplyMonoid=e.getApplySemigroup=e.option=e.mapNullable=e.getRefinement=e.chainFirst=e.chain=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apS=e.bind=e.let=e.bindTo=e.Do=e.exists=e.elem=e.toUndefined=e.toNullable=e.chainNullableK=e.fromNullableK=e.tryCatchK=e.tryCatch=e.fromNullable=e.chainFirstEitherK=e.chainEitherK=e.fromEitherK=e.duplicate=e.tapEither=e.tap=e.flatten=e.apSecond=e.apFirst=e.flap=e.getOrElse=e.getOrElseW=e.fold=e.match=e.foldW=e.matchW=e.isNone=e.isSome=e.FromEither=e.fromEither=e.MonadThrow=e.throwError=void 0,e.getLastMonoid=void 0;var i=sa(),a=Jn(),u=r(or()),o=da(),l=it(),f=On(),h=r(Wn()),d=pm(),_=cu(),R=wi(),A=$i(),E=Ws();e.none=h.none,e.some=h.some;function g(se){return function(we){return se(we)?(0,e.some)(we):e.none}}e.fromPredicate=g;var I=function(se){return se._tag==="Right"?e.none:(0,e.some)(se.left)};e.getLeft=I;var C=function(se){return se._tag==="Left"?e.none:(0,e.some)(se.right)};e.getRight=C;var k=function(se,we){return(0,l.pipe)(se,(0,e.map)(we))},L=function(se,we){return(0,l.pipe)(se,(0,e.ap)(we))},q=function(se,we,Be){return(0,l.pipe)(se,(0,e.reduce)(we,Be))},G=function(se){var we=(0,e.foldMap)(se);return function(Be,gt){return(0,l.pipe)(Be,we(gt))}},D=function(se,we,Be){return(0,l.pipe)(se,(0,e.reduceRight)(we,Be))},Y=function(se){var we=(0,e.traverse)(se);return function(Be,gt){return(0,l.pipe)(Be,we(gt))}},fe=function(se,we){return(0,l.pipe)(se,(0,e.alt)(we))},$=function(se,we){return(0,l.pipe)(se,(0,e.filter)(we))},x=function(se,we){return(0,l.pipe)(se,(0,e.filterMap)(we))},Re=function(se,we){return(0,l.pipe)(se,(0,e.extend)(we))},N=function(se,we){return(0,l.pipe)(se,(0,e.partition)(we))},P=function(se,we){return(0,l.pipe)(se,(0,e.partitionMap)(we))};e.URI="Option";var s=function(se){return{show:function(we){return(0,e.isNone)(we)?"none":"some(".concat(se.show(we.value),")")}}};e.getShow=s;var S=function(se){return{equals:function(we,Be){return we===Be||((0,e.isNone)(we)?(0,e.isNone)(Be):(0,e.isNone)(Be)?!1:se.equals(we.value,Be.value))}}};e.getEq=S;var M=function(se){return{equals:(0,e.getEq)(se).equals,compare:function(we,Be){return we===Be?0:(0,e.isSome)(we)?(0,e.isSome)(Be)?se.compare(we.value,Be.value):1:-1}}};e.getOrd=M;var c=function(se){return{concat:function(we,Be){return(0,e.isNone)(we)?Be:(0,e.isNone)(Be)?we:(0,e.some)(se.concat(we.value,Be.value))},empty:e.none}};e.getMonoid=c;var p=function(se){return function(we){return(0,e.isNone)(we)?e.none:(0,e.some)(se(we.value))}};e.map=p,e.Functor={URI:e.URI,map:k},e.as=(0,l.dual)(2,(0,f.as)(e.Functor)),e.asUnit=(0,f.asUnit)(e.Functor),e.of=e.some,e.Pointed={URI:e.URI,of:e.of};var U=function(se){return function(we){return(0,e.isNone)(we)||(0,e.isNone)(se)?e.none:(0,e.some)(we.value(se.value))}};e.ap=U,e.Apply={URI:e.URI,map:k,ap:L},e.Applicative={URI:e.URI,map:k,ap:L,of:e.of},e.flatMap=(0,l.dual)(2,function(se,we){return(0,e.isNone)(se)?e.none:we(se.value)}),e.Chain={URI:e.URI,map:k,ap:L,chain:e.flatMap},e.Monad={URI:e.URI,map:k,ap:L,of:e.of,chain:e.flatMap};var j=function(se,we){return function(Be){return(0,e.isNone)(Be)?se:we(se,Be.value)}};e.reduce=j;var ae=function(se){return function(we){return function(Be){return(0,e.isNone)(Be)?se.empty:we(Be.value)}}};e.foldMap=ae;var V=function(se,we){return function(Be){return(0,e.isNone)(Be)?se:we(Be.value,se)}};e.reduceRight=V,e.Foldable={URI:e.URI,reduce:q,foldMap:G,reduceRight:D},e.orElse=(0,l.dual)(2,function(se,we){return(0,e.isNone)(se)?we():se}),e.altW=e.orElse,e.alt=e.orElse,e.Alt={URI:e.URI,map:k,alt:fe};var Q=function(){return e.none};e.zero=Q,e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,E.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:k,ap:L,of:e.of,alt:fe,zero:e.zero};var me=function(se){return function(we){return(0,e.isNone)(we)?e.none:(0,e.some)(se(we))}};e.extend=me,e.Extend={URI:e.URI,map:k,extend:Re},e.compact=(0,e.flatMap)(l.identity);var Ie=(0,R.separated)(e.none,e.none),Ee=function(se){return(0,e.isNone)(se)?Ie:(0,R.separated)((0,e.getLeft)(se.value),(0,e.getRight)(se.value))};e.separate=Ee,e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate};var Ge=function(se){return function(we){return(0,e.isNone)(we)?e.none:se(we.value)?we:e.none}};e.filter=Ge;var Ke=function(se){return function(we){return(0,e.isNone)(we)?e.none:se(we.value)}};e.filterMap=Ke;var K=function(se){return function(we){return(0,R.separated)($(we,(0,d.not)(se)),$(we,se))}};e.partition=K;var pe=function(se){return(0,l.flow)((0,e.map)(se),e.separate)};e.partitionMap=pe,e.Filterable={URI:e.URI,map:k,compact:e.compact,separate:e.separate,filter:$,filterMap:x,partition:N,partitionMap:P};var De=function(se){return function(we){return function(Be){return(0,e.isNone)(Be)?se.of(e.none):se.map(we(Be.value),e.some)}}};e.traverse=De;var Ze=function(se){return function(we){return(0,e.isNone)(we)?se.of(e.none):se.map(we.value,e.some)}};e.sequence=Ze,e.Traversable={URI:e.URI,map:k,reduce:q,foldMap:G,reduceRight:D,traverse:Y,sequence:e.sequence};var rt=(0,A.witherDefault)(e.Traversable,e.Compactable),W=(0,A.wiltDefault)(e.Traversable,e.Compactable),J=function(se){var we=rt(se);return function(Be){return function(gt){return we(gt,Be)}}};e.wither=J;var ne=function(se){var we=W(se);return function(Be){return function(gt){return we(gt,Be)}}};e.wilt=ne,e.Witherable={URI:e.URI,map:k,reduce:q,foldMap:G,reduceRight:D,traverse:Y,sequence:e.sequence,compact:e.compact,separate:e.separate,filter:$,filterMap:x,partition:N,partitionMap:P,wither:rt,wilt:W};var Se=function(){return e.none};e.throwError=Se,e.MonadThrow={URI:e.URI,map:k,ap:L,of:e.of,chain:e.flatMap,throwError:e.throwError},e.fromEither=e.getRight,e.FromEither={URI:e.URI,fromEither:e.fromEither},e.isSome=h.isSome;var Xe=function(se){return se._tag==="None"};e.isNone=Xe;var ot=function(se,we){return function(Be){return(0,e.isNone)(Be)?se():we(Be.value)}};e.matchW=ot,e.foldW=e.matchW,e.match=e.matchW,e.fold=e.match;var at=function(se){return function(we){return(0,e.isNone)(we)?se():we.value}};e.getOrElseW=at,e.getOrElse=e.getOrElseW,e.flap=(0,f.flap)(e.Functor),e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.flatten=e.compact,e.tap=(0,l.dual)(2,u.tap(e.Chain)),e.tapEither=(0,l.dual)(2,(0,o.tapEither)(e.FromEither,e.Chain)),e.duplicate=(0,e.extend)(l.identity),e.fromEitherK=(0,o.fromEitherK)(e.FromEither),e.chainEitherK=(0,o.chainEitherK)(e.FromEither,e.Chain),e.chainFirstEitherK=e.tapEither;var Tt=function(se){return se==null?e.none:(0,e.some)(se)};e.fromNullable=Tt;var Nt=function(se){try{return(0,e.some)(se())}catch{return e.none}};e.tryCatch=Nt;var Wt=function(se){return function(){for(var we=[],Be=0;Be<arguments.length;Be++)we[Be]=arguments[Be];return(0,e.tryCatch)(function(){return se.apply(void 0,we)})}};e.tryCatchK=Wt;var Oe=function(se){return(0,l.flow)(se,e.fromNullable)};e.fromNullableK=Oe;var Pe=function(se){return function(we){return(0,e.isNone)(we)?e.none:(0,e.fromNullable)(se(we.value))}};e.chainNullableK=Pe,e.toNullable=(0,e.match)(l.constNull,l.identity),e.toUndefined=(0,e.match)(l.constUndefined,l.identity);function Ye(se){return function(we,Be){if(Be===void 0){var gt=Ye(se);return function(ft){return gt(we,ft)}}return(0,e.isNone)(Be)?!1:se.equals(we,Be.value)}}e.elem=Ye;var ze=function(se){return function(we){return(0,e.isNone)(we)?!1:se(we.value)}};e.exists=ze,e.Do=(0,e.of)(h.emptyRecord),e.bindTo=(0,f.bindTo)(e.Functor);var et=(0,f.let)(e.Functor);e.let=et,e.bind=u.bind(e.Chain),e.apS=(0,a.apS)(e.Apply),e.ApT=(0,e.of)(h.emptyReadonlyArray);var tt=function(se){return function(we){var Be=se(0,h.head(we));if((0,e.isNone)(Be))return e.none;for(var gt=[Be.value],ft=1;ft<we.length;ft++){var ye=se(ft,we[ft]);if((0,e.isNone)(ye))return e.none;gt.push(ye.value)}return(0,e.some)(gt)}};e.traverseReadonlyNonEmptyArrayWithIndex=tt;var de=function(se){var we=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(se);return function(Be){return h.isNonEmpty(Be)?we(Be):e.ApT}};e.traverseReadonlyArrayWithIndex=de,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var ue=function(se){return(0,e.traverseReadonlyArrayWithIndex)(function(we,Be){return se(Be)})};e.traverseArray=ue,e.sequenceArray=(0,e.traverseArray)(l.identity),e.chain=e.flatMap,e.chainFirst=e.tap;function ke(se){return function(we){return(0,e.isSome)(se(we))}}e.getRefinement=ke,e.mapNullable=e.chainNullableK,e.option={URI:e.URI,map:k,of:e.of,ap:L,chain:e.flatMap,reduce:q,foldMap:G,reduceRight:D,traverse:Y,sequence:e.sequence,zero:e.zero,alt:fe,extend:Re,compact:e.compact,separate:e.separate,filter:$,filterMap:x,partition:N,partitionMap:P,wither:rt,wilt:W,throwError:e.throwError},e.getApplySemigroup=(0,a.getApplySemigroup)(e.Apply),e.getApplyMonoid=(0,i.getApplicativeMonoid)(e.Applicative);var oe=function(){return(0,e.getMonoid)((0,_.first)())};e.getFirstMonoid=oe;var Le=function(){return(0,e.getMonoid)((0,_.last)())};e.getLastMonoid=Le}}),_m=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/ChainRec.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tailRec=void 0;var t=function(n,r){for(var i=r(n);i._tag==="Left";)i=r(i.left);return i.right};e.tailRec=t}}),Fn=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Either.js"(e){var t=e&&e.__createBinding||(Object.create?function(de,ue,ke,oe){oe===void 0&&(oe=ke);var Le=Object.getOwnPropertyDescriptor(ue,ke);(!Le||("get"in Le?!ue.__esModule:Le.writable||Le.configurable))&&(Le={enumerable:!0,get:function(){return ue[ke]}}),Object.defineProperty(de,oe,Le)}:function(de,ue,ke,oe){oe===void 0&&(oe=ke),de[oe]=ue[ke]}),n=e&&e.__setModuleDefault||(Object.create?function(de,ue){Object.defineProperty(de,"default",{enumerable:!0,value:ue})}:function(de,ue){de.default=ue}),r=e&&e.__importStar||function(de){if(de&&de.__esModule)return de;var ue={};if(de!=null)for(var ke in de)ke!=="default"&&Object.prototype.hasOwnProperty.call(de,ke)&&t(ue,de,ke);return n(ue,de),ue};Object.defineProperty(e,"__esModule",{value:!0}),e.match=e.foldW=e.matchW=e.isRight=e.isLeft=e.fromOption=e.fromPredicate=e.FromEither=e.MonadThrow=e.throwError=e.ChainRec=e.Extend=e.extend=e.Alt=e.alt=e.altW=e.Bifunctor=e.mapLeft=e.bimap=e.Traversable=e.sequence=e.traverse=e.Foldable=e.reduceRight=e.foldMap=e.reduce=e.Monad=e.Chain=e.Applicative=e.Apply=e.ap=e.apW=e.Pointed=e.of=e.asUnit=e.as=e.Functor=e.map=e.getAltValidation=e.getApplicativeValidation=e.getWitherable=e.getFilterable=e.getCompactable=e.getSemigroup=e.getEq=e.getShow=e.URI=e.flatMap=e.right=e.left=void 0,e.chainFirstW=e.chainFirst=e.chain=e.chainW=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apSW=e.apS=e.bindW=e.bind=e.let=e.bindTo=e.Do=e.exists=e.elem=e.toError=e.toUnion=e.chainNullableK=e.fromNullableK=e.tryCatchK=e.tryCatch=e.fromNullable=e.orElse=e.orElseW=e.swap=e.filterOrElseW=e.filterOrElse=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.chainOptionKW=e.chainOptionK=e.fromOptionK=e.duplicate=e.flatten=e.flattenW=e.tap=e.apSecondW=e.apSecond=e.apFirstW=e.apFirst=e.flap=e.getOrElse=e.getOrElseW=e.fold=void 0,e.getValidation=e.getValidationMonoid=e.getValidationSemigroup=e.getApplyMonoid=e.getApplySemigroup=e.either=e.stringifyJSON=e.parseJSON=void 0;var i=sa(),a=Jn(),u=r(or()),o=_m(),l=da(),f=it(),h=On(),d=r(Wn()),_=wi(),R=$i();e.left=d.left,e.right=d.right,e.flatMap=(0,f.dual)(2,function(de,ue){return(0,e.isLeft)(de)?de:ue(de.right)});var A=function(de,ue){return(0,f.pipe)(de,(0,e.map)(ue))},E=function(de,ue){return(0,f.pipe)(de,(0,e.ap)(ue))},g=function(de,ue,ke){return(0,f.pipe)(de,(0,e.reduce)(ue,ke))},I=function(de){return function(ue,ke){var oe=(0,e.foldMap)(de);return(0,f.pipe)(ue,oe(ke))}},C=function(de,ue,ke){return(0,f.pipe)(de,(0,e.reduceRight)(ue,ke))},k=function(de){var ue=(0,e.traverse)(de);return function(ke,oe){return(0,f.pipe)(ke,ue(oe))}},L=function(de,ue,ke){return(0,f.pipe)(de,(0,e.bimap)(ue,ke))},q=function(de,ue){return(0,f.pipe)(de,(0,e.mapLeft)(ue))},G=function(de,ue){return(0,f.pipe)(de,(0,e.alt)(ue))},D=function(de,ue){return(0,f.pipe)(de,(0,e.extend)(ue))},Y=function(de,ue){return(0,o.tailRec)(ue(de),function(ke){return(0,e.isLeft)(ke)?(0,e.right)((0,e.left)(ke.left)):(0,e.isLeft)(ke.right)?(0,e.left)(ue(ke.right.left)):(0,e.right)((0,e.right)(ke.right.right))})};e.URI="Either";var fe=function(de,ue){return{show:function(ke){return(0,e.isLeft)(ke)?"left(".concat(de.show(ke.left),")"):"right(".concat(ue.show(ke.right),")")}}};e.getShow=fe;var $=function(de,ue){return{equals:function(ke,oe){return ke===oe||((0,e.isLeft)(ke)?(0,e.isLeft)(oe)&&de.equals(ke.left,oe.left):(0,e.isRight)(oe)&&ue.equals(ke.right,oe.right))}}};e.getEq=$;var x=function(de){return{concat:function(ue,ke){return(0,e.isLeft)(ke)?ue:(0,e.isLeft)(ue)?ke:(0,e.right)(de.concat(ue.right,ke.right))}}};e.getSemigroup=x;var Re=function(de){var ue=(0,e.left)(de.empty);return{URI:e.URI,_E:void 0,compact:function(ke){return(0,e.isLeft)(ke)?ke:ke.right._tag==="None"?ue:(0,e.right)(ke.right.value)},separate:function(ke){return(0,e.isLeft)(ke)?(0,_.separated)(ke,ke):(0,e.isLeft)(ke.right)?(0,_.separated)((0,e.right)(ke.right.left),ue):(0,_.separated)(ue,(0,e.right)(ke.right.right))}}};e.getCompactable=Re;var N=function(de){var ue=(0,e.left)(de.empty),ke=(0,e.getCompactable)(de),oe=ke.compact,Le=ke.separate,se=function(Be,gt){return(0,e.isLeft)(Be)||gt(Be.right)?Be:ue},we=function(Be,gt){return(0,e.isLeft)(Be)?(0,_.separated)(Be,Be):gt(Be.right)?(0,_.separated)(ue,(0,e.right)(Be.right)):(0,_.separated)((0,e.right)(Be.right),ue)};return{URI:e.URI,_E:void 0,map:A,compact:oe,separate:Le,filter:se,filterMap:function(Be,gt){if((0,e.isLeft)(Be))return Be;var ft=gt(Be.right);return ft._tag==="None"?ue:(0,e.right)(ft.value)},partition:we,partitionMap:function(Be,gt){if((0,e.isLeft)(Be))return(0,_.separated)(Be,Be);var ft=gt(Be.right);return(0,e.isLeft)(ft)?(0,_.separated)((0,e.right)(ft.left),ue):(0,_.separated)(ue,(0,e.right)(ft.right))}}};e.getFilterable=N;var P=function(de){var ue=(0,e.getFilterable)(de),ke=(0,e.getCompactable)(de);return{URI:e.URI,_E:void 0,map:A,compact:ue.compact,separate:ue.separate,filter:ue.filter,filterMap:ue.filterMap,partition:ue.partition,partitionMap:ue.partitionMap,traverse:k,sequence:e.sequence,reduce:g,foldMap:I,reduceRight:C,wither:(0,R.witherDefault)(e.Traversable,ke),wilt:(0,R.wiltDefault)(e.Traversable,ke)}};e.getWitherable=P;var s=function(de){return{URI:e.URI,_E:void 0,map:A,ap:function(ue,ke){return(0,e.isLeft)(ue)?(0,e.isLeft)(ke)?(0,e.left)(de.concat(ue.left,ke.left)):ue:(0,e.isLeft)(ke)?ke:(0,e.right)(ue.right(ke.right))},of:e.of}};e.getApplicativeValidation=s;var S=function(de){return{URI:e.URI,_E:void 0,map:A,alt:function(ue,ke){if((0,e.isRight)(ue))return ue;var oe=ke();return(0,e.isLeft)(oe)?(0,e.left)(de.concat(ue.left,oe.left)):oe}}};e.getAltValidation=S;var M=function(de){return function(ue){return(0,e.isLeft)(ue)?ue:(0,e.right)(de(ue.right))}};e.map=M,e.Functor={URI:e.URI,map:A},e.as=(0,f.dual)(2,(0,h.as)(e.Functor)),e.asUnit=(0,h.asUnit)(e.Functor),e.of=e.right,e.Pointed={URI:e.URI,of:e.of};var c=function(de){return function(ue){return(0,e.isLeft)(ue)?ue:(0,e.isLeft)(de)?de:(0,e.right)(ue.right(de.right))}};e.apW=c,e.ap=e.apW,e.Apply={URI:e.URI,map:A,ap:E},e.Applicative={URI:e.URI,map:A,ap:E,of:e.of},e.Chain={URI:e.URI,map:A,ap:E,chain:e.flatMap},e.Monad={URI:e.URI,map:A,ap:E,of:e.of,chain:e.flatMap};var p=function(de,ue){return function(ke){return(0,e.isLeft)(ke)?de:ue(de,ke.right)}};e.reduce=p;var U=function(de){return function(ue){return function(ke){return(0,e.isLeft)(ke)?de.empty:ue(ke.right)}}};e.foldMap=U;var j=function(de,ue){return function(ke){return(0,e.isLeft)(ke)?de:ue(ke.right,de)}};e.reduceRight=j,e.Foldable={URI:e.URI,reduce:g,foldMap:I,reduceRight:C};var ae=function(de){return function(ue){return function(ke){return(0,e.isLeft)(ke)?de.of((0,e.left)(ke.left)):de.map(ue(ke.right),e.right)}}};e.traverse=ae;var V=function(de){return function(ue){return(0,e.isLeft)(ue)?de.of((0,e.left)(ue.left)):de.map(ue.right,e.right)}};e.sequence=V,e.Traversable={URI:e.URI,map:A,reduce:g,foldMap:I,reduceRight:C,traverse:k,sequence:e.sequence};var Q=function(de,ue){return function(ke){return(0,e.isLeft)(ke)?(0,e.left)(de(ke.left)):(0,e.right)(ue(ke.right))}};e.bimap=Q;var me=function(de){return function(ue){return(0,e.isLeft)(ue)?(0,e.left)(de(ue.left)):ue}};e.mapLeft=me,e.Bifunctor={URI:e.URI,bimap:L,mapLeft:q};var Ie=function(de){return function(ue){return(0,e.isLeft)(ue)?de():ue}};e.altW=Ie,e.alt=e.altW,e.Alt={URI:e.URI,map:A,alt:G};var Ee=function(de){return function(ue){return(0,e.isLeft)(ue)?ue:(0,e.right)(de(ue))}};e.extend=Ee,e.Extend={URI:e.URI,map:A,extend:D},e.ChainRec={URI:e.URI,map:A,ap:E,chain:e.flatMap,chainRec:Y},e.throwError=e.left,e.MonadThrow={URI:e.URI,map:A,ap:E,of:e.of,chain:e.flatMap,throwError:e.throwError},e.FromEither={URI:e.URI,fromEither:f.identity},e.fromPredicate=(0,l.fromPredicate)(e.FromEither),e.fromOption=(0,l.fromOption)(e.FromEither),e.isLeft=d.isLeft,e.isRight=d.isRight;var Ge=function(de,ue){return function(ke){return(0,e.isLeft)(ke)?de(ke.left):ue(ke.right)}};e.matchW=Ge,e.foldW=e.matchW,e.match=e.matchW,e.fold=e.match;var Ke=function(de){return function(ue){return(0,e.isLeft)(ue)?de(ue.left):ue.right}};e.getOrElseW=Ke,e.getOrElse=e.getOrElseW,e.flap=(0,h.flap)(e.Functor),e.apFirst=(0,a.apFirst)(e.Apply),e.apFirstW=e.apFirst,e.apSecond=(0,a.apSecond)(e.Apply),e.apSecondW=e.apSecond,e.tap=(0,f.dual)(2,u.tap(e.Chain)),e.flattenW=(0,e.flatMap)(f.identity),e.flatten=e.flattenW,e.duplicate=(0,e.extend)(f.identity),e.fromOptionK=(0,l.fromOptionK)(e.FromEither),e.chainOptionK=(0,l.chainOptionK)(e.FromEither,e.Chain),e.chainOptionKW=e.chainOptionK;var K={fromEither:e.FromEither.fromEither};e.liftNullable=d.liftNullable(K),e.liftOption=d.liftOption(K);var pe={flatMap:e.flatMap};e.flatMapNullable=d.flatMapNullable(K,pe),e.flatMapOption=d.flatMapOption(K,pe),e.filterOrElse=(0,l.filterOrElse)(e.FromEither,e.Chain),e.filterOrElseW=e.filterOrElse;var De=function(de){return(0,e.isLeft)(de)?(0,e.right)(de.left):(0,e.left)(de.right)};e.swap=De;var Ze=function(de){return function(ue){return(0,e.isLeft)(ue)?de(ue.left):ue}};e.orElseW=Ze,e.orElse=e.orElseW;var rt=function(de){return function(ue){return ue==null?(0,e.left)(de):(0,e.right)(ue)}};e.fromNullable=rt;var W=function(de,ue){try{return(0,e.right)(de())}catch(ke){return(0,e.left)(ue(ke))}};e.tryCatch=W;var J=function(de,ue){return function(){for(var ke=[],oe=0;oe<arguments.length;oe++)ke[oe]=arguments[oe];return(0,e.tryCatch)(function(){return de.apply(void 0,ke)},ue)}};e.tryCatchK=J;var ne=function(de){var ue=(0,e.fromNullable)(de);return function(ke){return(0,f.flow)(ke,ue)}};e.fromNullableK=ne;var Se=function(de){var ue=(0,e.fromNullableK)(de);return function(ke){return(0,e.flatMap)(ue(ke))}};e.chainNullableK=Se,e.toUnion=(0,e.foldW)(f.identity,f.identity);function Xe(de){return de instanceof Error?de:new Error(String(de))}e.toError=Xe;function ot(de){return function(ue,ke){if(ke===void 0){var oe=ot(de);return function(Le){return oe(ue,Le)}}return(0,e.isLeft)(ke)?!1:de.equals(ue,ke.right)}}e.elem=ot;var at=function(de){return function(ue){return(0,e.isLeft)(ue)?!1:de(ue.right)}};e.exists=at,e.Do=(0,e.of)(d.emptyRecord),e.bindTo=(0,h.bindTo)(e.Functor);var Tt=(0,h.let)(e.Functor);e.let=Tt,e.bind=u.bind(e.Chain),e.bindW=e.bind,e.apS=(0,a.apS)(e.Apply),e.apSW=e.apS,e.ApT=(0,e.of)(d.emptyReadonlyArray);var Nt=function(de){return function(ue){var ke=de(0,d.head(ue));if((0,e.isLeft)(ke))return ke;for(var oe=[ke.right],Le=1;Le<ue.length;Le++){var se=de(Le,ue[Le]);if((0,e.isLeft)(se))return se;oe.push(se.right)}return(0,e.right)(oe)}};e.traverseReadonlyNonEmptyArrayWithIndex=Nt;var Wt=function(de){var ue=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(de);return function(ke){return d.isNonEmpty(ke)?ue(ke):e.ApT}};e.traverseReadonlyArrayWithIndex=Wt,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var Oe=function(de){return(0,e.traverseReadonlyArrayWithIndex)(function(ue,ke){return de(ke)})};e.traverseArray=Oe,e.sequenceArray=(0,e.traverseArray)(f.identity),e.chainW=e.flatMap,e.chain=e.flatMap,e.chainFirst=e.tap,e.chainFirstW=e.tap;function Pe(de,ue){return(0,e.tryCatch)(function(){return JSON.parse(de)},ue)}e.parseJSON=Pe;var Ye=function(de,ue){return(0,e.tryCatch)(function(){var ke=JSON.stringify(de);if(typeof ke!="string")throw new Error("Converting unsupported structure to JSON");return ke},ue)};e.stringifyJSON=Ye,e.either={URI:e.URI,map:A,of:e.of,ap:E,chain:e.flatMap,reduce:g,foldMap:I,reduceRight:C,traverse:k,sequence:e.sequence,bimap:L,mapLeft:q,alt:G,extend:D,chainRec:Y,throwError:e.throwError},e.getApplySemigroup=(0,a.getApplySemigroup)(e.Apply),e.getApplyMonoid=(0,i.getApplicativeMonoid)(e.Applicative);var ze=function(de,ue){return(0,a.getApplySemigroup)((0,e.getApplicativeValidation)(de))(ue)};e.getValidationSemigroup=ze;var et=function(de,ue){return(0,i.getApplicativeMonoid)((0,e.getApplicativeValidation)(de))(ue)};e.getValidationMonoid=et;function tt(de){var ue=(0,e.getApplicativeValidation)(de).ap,ke=(0,e.getAltValidation)(de).alt;return{URI:e.URI,_E:void 0,map:A,of:e.of,chain:e.flatMap,bimap:L,mapLeft:q,reduce:g,foldMap:I,reduceRight:C,extend:D,traverse:k,sequence:e.sequence,chainRec:Y,throwError:e.throwError,ap:ue,alt:ke}}e.getValidation=tt}}),Fs=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/FromIO.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tapIO=e.chainFirstIOK=e.chainIOK=e.fromIOK=void 0;var t=or(),n=it();function r(o){return function(l){return(0,n.flow)(l,o.fromIO)}}e.fromIOK=r;function i(o,l){return function(f){var h=(0,n.flow)(f,o.fromIO);return function(d){return l.chain(d,h)}}}e.chainIOK=i;function a(o,l){var f=u(o,l);return function(h){return function(d){return f(d,h)}}}e.chainFirstIOK=a;function u(o,l){var f=(0,t.tap)(l);return function(h,d){return f(h,(0,n.flow)(d,o.fromIO))}}e.tapIO=u}}),Jc=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Task.js"(e){var t=e&&e.__createBinding||(Object.create?function(P,s,S,M){M===void 0&&(M=S);var c=Object.getOwnPropertyDescriptor(s,S);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[S]}}),Object.defineProperty(P,M,c)}:function(P,s,S,M){M===void 0&&(M=S),P[M]=s[S]}),n=e&&e.__setModuleDefault||(Object.create?function(P,s){Object.defineProperty(P,"default",{enumerable:!0,value:s})}:function(P,s){P.default=s}),r=e&&e.__importStar||function(P){if(P&&P.__esModule)return P;var s={};if(P!=null)for(var S in P)S!=="default"&&Object.prototype.hasOwnProperty.call(P,S)&&t(s,P,S);return n(s,P),s};Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceSeqArray=e.traverseSeqArray=e.traverseSeqArrayWithIndex=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndexSeq=e.traverseReadonlyNonEmptyArrayWithIndexSeq=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apS=e.bind=e.let=e.bindTo=e.Do=e.never=e.FromTask=e.chainFirstIOK=e.chainIOK=e.fromIOK=e.tapIO=e.tap=e.flatMapIO=e.FromIO=e.MonadTask=e.fromTask=e.MonadIO=e.Monad=e.Chain=e.ApplicativeSeq=e.ApplySeq=e.ApplicativePar=e.apSecond=e.apFirst=e.ApplyPar=e.Pointed=e.flap=e.asUnit=e.as=e.Functor=e.getRaceMonoid=e.URI=e.flatten=e.flatMap=e.of=e.ap=e.map=e.delay=e.fromIO=void 0,e.getMonoid=e.getSemigroup=e.taskSeq=e.task=e.chainFirst=e.chain=void 0;var i=sa(),a=Jn(),u=r(or()),o=Fs(),l=it(),f=On(),h=r(Wn()),d=function(P){return function(){return Promise.resolve().then(P)}};e.fromIO=d;function _(P){return function(s){return function(){return new Promise(function(S){setTimeout(function(){Promise.resolve().then(s).then(S)},P)})}}}e.delay=_;var R=function(P,s){return(0,l.pipe)(P,(0,e.map)(s))},A=function(P,s){return(0,l.pipe)(P,(0,e.ap)(s))},E=function(P,s){return(0,e.flatMap)(P,function(S){return(0,l.pipe)(s,(0,e.map)(S))})},g=function(P){return function(s){return function(){return Promise.resolve().then(s).then(P)}}};e.map=g;var I=function(P){return function(s){return function(){return Promise.all([Promise.resolve().then(s),Promise.resolve().then(P)]).then(function(S){var M=S[0],c=S[1];return M(c)})}}};e.ap=I;var C=function(P){return function(){return Promise.resolve(P)}};e.of=C,e.flatMap=(0,l.dual)(2,function(P,s){return function(){return Promise.resolve().then(P).then(function(S){return s(S)()})}}),e.flatten=(0,e.flatMap)(l.identity),e.URI="Task";function k(){return{concat:function(P,s){return function(){return Promise.race([Promise.resolve().then(P),Promise.resolve().then(s)])}},empty:e.never}}e.getRaceMonoid=k,e.Functor={URI:e.URI,map:R},e.as=(0,l.dual)(2,(0,f.as)(e.Functor)),e.asUnit=(0,f.asUnit)(e.Functor),e.flap=(0,f.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.ApplyPar={URI:e.URI,map:R,ap:A},e.apFirst=(0,a.apFirst)(e.ApplyPar),e.apSecond=(0,a.apSecond)(e.ApplyPar),e.ApplicativePar={URI:e.URI,map:R,ap:A,of:e.of},e.ApplySeq={URI:e.URI,map:R,ap:E},e.ApplicativeSeq={URI:e.URI,map:R,ap:E,of:e.of},e.Chain={URI:e.URI,map:R,ap:A,chain:e.flatMap},e.Monad={URI:e.URI,map:R,of:e.of,ap:A,chain:e.flatMap},e.MonadIO={URI:e.URI,map:R,of:e.of,ap:A,chain:e.flatMap,fromIO:e.fromIO},e.fromTask=l.identity,e.MonadTask={URI:e.URI,map:R,of:e.of,ap:A,chain:e.flatMap,fromIO:e.fromIO,fromTask:e.fromTask},e.FromIO={URI:e.URI,fromIO:e.fromIO};var L={flatMap:e.flatMap},q={fromIO:e.FromIO.fromIO};e.flatMapIO=h.flatMapIO(q,L),e.tap=(0,l.dual)(2,u.tap(e.Chain)),e.tapIO=(0,l.dual)(2,(0,o.tapIO)(e.FromIO,e.Chain)),e.fromIOK=(0,o.fromIOK)(e.FromIO),e.chainIOK=e.flatMapIO,e.chainFirstIOK=e.tapIO,e.FromTask={URI:e.URI,fromIO:e.fromIO,fromTask:e.fromTask};var G=function(){return new Promise(function(P){})};e.never=G,e.Do=(0,e.of)(h.emptyRecord),e.bindTo=(0,f.bindTo)(e.Functor);var D=(0,f.let)(e.Functor);e.let=D,e.bind=u.bind(e.Chain),e.apS=(0,a.apS)(e.ApplyPar),e.ApT=(0,e.of)(h.emptyReadonlyArray);var Y=function(P){return function(s){return function(){return Promise.all(s.map(function(S,M){return Promise.resolve().then(function(){return P(M,S)()})}))}}};e.traverseReadonlyNonEmptyArrayWithIndex=Y;var fe=function(P){var s=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(P);return function(S){return h.isNonEmpty(S)?s(S):e.ApT}};e.traverseReadonlyArrayWithIndex=fe;var $=function(P){return function(s){return function(){return h.tail(s).reduce(function(S,M,c){return S.then(function(p){return Promise.resolve().then(P(c+1,M)).then(function(U){return p.push(U),p})})},Promise.resolve().then(P(0,h.head(s))).then(h.singleton))}}};e.traverseReadonlyNonEmptyArrayWithIndexSeq=$;var x=function(P){var s=(0,e.traverseReadonlyNonEmptyArrayWithIndexSeq)(P);return function(S){return h.isNonEmpty(S)?s(S):e.ApT}};e.traverseReadonlyArrayWithIndexSeq=x,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var Re=function(P){return(0,e.traverseReadonlyArrayWithIndex)(function(s,S){return P(S)})};e.traverseArray=Re,e.sequenceArray=(0,e.traverseArray)(l.identity),e.traverseSeqArrayWithIndex=e.traverseReadonlyArrayWithIndexSeq;var N=function(P){return(0,e.traverseReadonlyArrayWithIndexSeq)(function(s,S){return P(S)})};e.traverseSeqArray=N,e.sequenceSeqArray=(0,e.traverseSeqArray)(l.identity),e.chain=e.flatMap,e.chainFirst=e.tap,e.task={URI:e.URI,map:R,of:e.of,ap:A,chain:e.flatMap,fromIO:e.fromIO,fromTask:e.fromTask},e.taskSeq={URI:e.URI,map:R,of:e.of,ap:E,chain:e.flatMap,fromIO:e.fromIO,fromTask:e.fromTask},e.getSemigroup=(0,a.getApplySemigroup)(e.ApplySeq),e.getMonoid=(0,i.getApplicativeMonoid)(e.ApplicativeSeq)}}),Us=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Compactable.js"(e){var t=e&&e.__createBinding||(Object.create?function(d,_,R,A){A===void 0&&(A=R);var E=Object.getOwnPropertyDescriptor(_,R);(!E||("get"in E?!_.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return _[R]}}),Object.defineProperty(d,A,E)}:function(d,_,R,A){A===void 0&&(A=R),d[A]=_[R]}),n=e&&e.__setModuleDefault||(Object.create?function(d,_){Object.defineProperty(d,"default",{enumerable:!0,value:_})}:function(d,_){d.default=_}),r=e&&e.__importStar||function(d){if(d&&d.__esModule)return d;var _={};if(d!=null)for(var R in d)R!=="default"&&Object.prototype.hasOwnProperty.call(d,R)&&t(_,d,R);return n(_,d),_};Object.defineProperty(e,"__esModule",{value:!0}),e.getCompactableComposition=e.separate=e.compact=void 0;var i=it(),a=On(),u=kn(),o=r(wi());function l(d,_){return function(R){return d.map(R,_.compact)}}e.compact=l;function f(d,_,R){var A=l(d,_),E=(0,a.map)(d,R);return function(g){return o.separated(A((0,i.pipe)(g,E(u.getLeft))),A((0,i.pipe)(g,E(u.getRight))))}}e.separate=f;function h(d,_){var R=(0,a.getFunctorComposition)(d,_).map;return{map:R,compact:l(d,_),separate:f(d,_,_)}}e.getCompactableComposition=h}}),ym=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/EitherT.js"(e){var t=e&&e.__createBinding||(Object.create?function(p,U,j,ae){ae===void 0&&(ae=j);var V=Object.getOwnPropertyDescriptor(U,j);(!V||("get"in V?!U.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return U[j]}}),Object.defineProperty(p,ae,V)}:function(p,U,j,ae){ae===void 0&&(ae=j),p[ae]=U[j]}),n=e&&e.__setModuleDefault||(Object.create?function(p,U){Object.defineProperty(p,"default",{enumerable:!0,value:U})}:function(p,U){p.default=U}),r=e&&e.__importStar||function(p){if(p&&p.__esModule)return p;var U={};if(p!=null)for(var j in p)j!=="default"&&Object.prototype.hasOwnProperty.call(p,j)&&t(U,p,j);return n(U,p),U};Object.defineProperty(e,"__esModule",{value:!0}),e.getEitherM=e.toUnion=e.swap=e.orLeft=e.tapError=e.orElseFirst=e.orElse=e.getOrElse=e.matchE=e.match=e.altValidation=e.mapError=e.mapLeft=e.mapBoth=e.bimap=e.alt=e.flatMap=e.chain=e.ap=e.map=e.chainNullableK=e.fromNullableK=e.fromNullable=e.leftF=e.rightF=e.left=e.right=void 0;var i=Jn(),a=r(Fn()),u=it(),o=On();function l(p){return(0,u.flow)(a.right,p.of)}e.right=l;function f(p){return(0,u.flow)(a.left,p.of)}e.left=f;function h(p){return function(U){return p.map(U,a.right)}}e.rightF=h;function d(p){return function(U){return p.map(U,a.left)}}e.leftF=d;function _(p){return function(U){return(0,u.flow)(a.fromNullable(U),p.of)}}e.fromNullable=_;function R(p){var U=_(p);return function(j){var ae=U(j);return function(V){return(0,u.flow)(V,ae)}}}e.fromNullableK=R;function A(p){var U=I(p),j=R(p);return function(ae){var V=j(ae);return function(Q){return U(V(Q))}}}e.chainNullableK=A;function E(p){return(0,o.map)(p,a.Functor)}e.map=E;function g(p){return(0,i.ap)(p,a.Apply)}e.ap=g;function I(p){var U=C(p);return function(j){return function(ae){return U(ae,j)}}}e.chain=I;function C(p){return function(U,j){return p.chain(U,function(ae){return a.isLeft(ae)?p.of(ae):j(ae.right)})}}e.flatMap=C;function k(p){return function(U){return function(j){return p.chain(j,function(ae){return a.isLeft(ae)?U():p.of(ae)})}}}e.alt=k;function L(p){var U=q(p);return function(j,ae){return function(V){return U(V,j,ae)}}}e.bimap=L;function q(p){return function(U,j,ae){return p.map(U,a.bimap(j,ae))}}e.mapBoth=q;function G(p){var U=D(p);return function(j){return function(ae){return U(ae,j)}}}e.mapLeft=G;function D(p){return function(U,j){return p.map(U,a.mapLeft(j))}}e.mapError=D;function Y(p,U){return function(j){return function(ae){return p.chain(ae,a.match(function(V){return p.map(j(),a.mapLeft(function(Q){return U.concat(V,Q)}))},l(p)))}}}e.altValidation=Y;function fe(p){return function(U,j){return function(ae){return p.map(ae,a.match(U,j))}}}e.match=fe;function $(p){return function(U,j){return function(ae){return p.chain(ae,a.match(U,j))}}}e.matchE=$;function x(p){return function(U){return function(j){return p.chain(j,a.match(U,p.of))}}}e.getOrElse=x;function Re(p){return function(U){return function(j){return p.chain(j,function(ae){return a.isLeft(ae)?U(ae.left):p.of(ae)})}}}e.orElse=Re;function N(p){var U=P(p);return function(j){return function(ae){return U(ae,j)}}}e.orElseFirst=N;function P(p){var U=Re(p);return function(j,ae){return(0,u.pipe)(j,U(function(V){return p.map(ae(V),function(Q){return a.isLeft(Q)?Q:a.left(V)})}))}}e.tapError=P;function s(p){return function(U){return function(j){return p.chain(j,a.match(function(ae){return p.map(U(ae),a.left)},function(ae){return p.of(a.right(ae))}))}}}e.orLeft=s;function S(p){return function(U){return p.map(U,a.swap)}}e.swap=S;function M(p){return function(U){return p.map(U,a.toUnion)}}e.toUnion=M;function c(p){var U=g(p),j=E(p),ae=I(p),V=k(p),Q=L(p),me=G(p),Ie=$(p),Ee=x(p),Ge=Re(p);return{map:function(Ke,K){return(0,u.pipe)(Ke,j(K))},ap:function(Ke,K){return(0,u.pipe)(Ke,U(K))},of:l(p),chain:function(Ke,K){return(0,u.pipe)(Ke,ae(K))},alt:function(Ke,K){return(0,u.pipe)(Ke,V(K))},bimap:function(Ke,K,pe){return(0,u.pipe)(Ke,Q(K,pe))},mapLeft:function(Ke,K){return(0,u.pipe)(Ke,me(K))},fold:function(Ke,K,pe){return(0,u.pipe)(Ke,Ie(K,pe))},getOrElse:function(Ke,K){return(0,u.pipe)(Ke,Ee(K))},orElse:function(Ke,K){return(0,u.pipe)(Ke,Ge(K))},swap:S(p),rightM:h(p),leftM:d(p),left:f(p)}}e.getEitherM=c}}),bm=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Filterable.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getFilterableComposition=e.partitionMap=e.partition=e.filterMap=e.filter=void 0;var t=Us(),n=it(),r=On(),i=kn(),a=pm(),u=wi();function o(_,R){return function(A){return function(E){return _.map(E,function(g){return R.filter(g,A)})}}}e.filter=o;function l(_,R){return function(A){return function(E){return _.map(E,function(g){return R.filterMap(g,A)})}}}e.filterMap=l;function f(_,R){var A=o(_,R);return function(E){var g=A((0,a.not)(E)),I=A(E);return function(C){return(0,u.separated)(g(C),I(C))}}}e.partition=f;function h(_,R){var A=l(_,R);return function(E){return function(g){return(0,u.separated)((0,n.pipe)(g,A(function(I){return(0,i.getLeft)(E(I))})),(0,n.pipe)(g,A(function(I){return(0,i.getRight)(E(I))})))}}}e.partitionMap=h;function d(_,R){var A=(0,r.getFunctorComposition)(_,R).map,E=(0,t.compact)(_,R),g=(0,t.separate)(_,R,R),I=o(_,R),C=l(_,R),k=f(_,R),L=h(_,R);return{map:A,compact:E,separate:g,filter:function(q,G){return(0,n.pipe)(q,I(G))},filterMap:function(q,G){return(0,n.pipe)(q,C(G))},partition:function(q,G){return(0,n.pipe)(q,k(G))},partitionMap:function(q,G){return(0,n.pipe)(q,L(G))}}}e.getFilterableComposition=d}}),QS=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/FromTask.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tapTask=e.chainFirstTaskK=e.chainTaskK=e.fromTaskK=void 0;var t=or(),n=it();function r(o){return function(l){return(0,n.flow)(l,o.fromTask)}}e.fromTaskK=r;function i(o,l){return function(f){var h=(0,n.flow)(f,o.fromTask);return function(d){return l.chain(d,h)}}}e.chainTaskK=i;function a(o,l){var f=u(o,l);return function(h){return function(d){return f(d,h)}}}e.chainFirstTaskK=a;function u(o,l){var f=(0,t.tap)(l);return function(h,d){return f(h,(0,n.flow)(d,o.fromTask))}}e.tapTask=u}}),Ds=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/TaskEither.js"(e){var t=e&&e.__createBinding||(Object.create?function(J,ne,Se,Xe){Xe===void 0&&(Xe=Se);var ot=Object.getOwnPropertyDescriptor(ne,Se);(!ot||("get"in ot?!ne.__esModule:ot.writable||ot.configurable))&&(ot={enumerable:!0,get:function(){return ne[Se]}}),Object.defineProperty(J,Xe,ot)}:function(J,ne,Se,Xe){Xe===void 0&&(Xe=Se),J[Xe]=ne[Se]}),n=e&&e.__setModuleDefault||(Object.create?function(J,ne){Object.defineProperty(J,"default",{enumerable:!0,value:ne})}:function(J,ne){J.default=ne}),r=e&&e.__importStar||function(J){if(J&&J.__esModule)return J;var ne={};if(J!=null)for(var Se in J)Se!=="default"&&Object.prototype.hasOwnProperty.call(J,Se)&&t(ne,J,Se);return n(ne,J),ne},i=e&&e.__awaiter||function(J,ne,Se,Xe){function ot(at){return at instanceof Se?at:new Se(function(Tt){Tt(at)})}return new(Se||(Se=Promise))(function(at,Tt){function Nt(Pe){try{Oe(Xe.next(Pe))}catch(Ye){Tt(Ye)}}function Wt(Pe){try{Oe(Xe.throw(Pe))}catch(Ye){Tt(Ye)}}function Oe(Pe){Pe.done?at(Pe.value):ot(Pe.value).then(Nt,Wt)}Oe((Xe=Xe.apply(J,ne||[])).next())})},a=e&&e.__generator||function(J,ne){var Se={label:0,sent:function(){if(at[0]&1)throw at[1];return at[1]},trys:[],ops:[]},Xe,ot,at,Tt;return Tt={next:Nt(0),throw:Nt(1),return:Nt(2)},typeof Symbol=="function"&&(Tt[Symbol.iterator]=function(){return this}),Tt;function Nt(Oe){return function(Pe){return Wt([Oe,Pe])}}function Wt(Oe){if(Xe)throw new TypeError("Generator is already executing.");for(;Tt&&(Tt=0,Oe[0]&&(Se=0)),Se;)try{if(Xe=1,ot&&(at=Oe[0]&2?ot.return:Oe[0]?ot.throw||((at=ot.return)&&at.call(ot),0):ot.next)&&!(at=at.call(ot,Oe[1])).done)return at;switch(ot=0,at&&(Oe=[Oe[0]&2,at.value]),Oe[0]){case 0:case 1:at=Oe;break;case 4:return Se.label++,{value:Oe[1],done:!1};case 5:Se.label++,ot=Oe[1],Oe=[0];continue;case 7:Oe=Se.ops.pop(),Se.trys.pop();continue;default:if(at=Se.trys,!(at=at.length>0&&at[at.length-1])&&(Oe[0]===6||Oe[0]===2)){Se=0;continue}if(Oe[0]===3&&(!at||Oe[1]>at[0]&&Oe[1]<at[3])){Se.label=Oe[1];break}if(Oe[0]===6&&Se.label<at[1]){Se.label=at[1],at=Oe;break}if(at&&Se.label<at[2]){Se.label=at[2],Se.ops.push(Oe);break}at[2]&&Se.ops.pop(),Se.trys.pop();continue}Oe=ne.call(J,Se)}catch(Pe){Oe=[6,Pe],ot=0}finally{Xe=at=0}if(Oe[0]&5)throw Oe[1];return{value:Oe[0]?Oe[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=e.of=e.altW=e.alt=e.flatten=e.flattenW=e.flatMap=e.apW=e.ap=e.mapLeft=e.mapError=e.bimap=e.mapBoth=e.map=e.fromIOEitherK=e.chainTaskOptionK=e.chainTaskOptionKW=e.fromTaskOptionK=e.swap=e.orLeft=e.orElseFirstTaskK=e.orElseFirstIOK=e.tapError=e.orElseW=e.orElse=e.chainNullableK=e.fromNullableK=e.fromNullable=e.toUnion=e.tryCatchK=e.tryCatch=e.getOrElseW=e.getOrElse=e.foldW=e.matchEW=e.fold=e.matchE=e.matchW=e.match=e.fromTaskOption=e.fromIOEither=e.fromEither=e.fromTask=e.fromIO=e.leftIO=e.rightIO=e.leftTask=e.rightTask=e.right=e.left=void 0,e.fromPredicate=e.chainFirstEitherKW=e.chainFirstEitherK=e.chainEitherKW=e.chainEitherK=e.flatMapTaskOption=e.flatMapIOEither=e.flatMapTask=e.flatMapIO=e.flatMapEither=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.chainOptionKW=e.chainOptionK=e.fromOptionK=e.fromOption=e.Alt=e.Bifunctor=e.tapTask=e.tapIO=e.tapEither=e.tap=e.FromTask=e.FromIO=e.FromEither=e.MonadThrow=e.MonadTask=e.MonadIO=e.Monad=e.Chain=e.ApplicativeSeq=e.ApplySeq=e.ApplicativePar=e.apSecondW=e.apSecond=e.apFirstW=e.apFirst=e.ApplyPar=e.Pointed=e.flap=e.asUnit=e.as=e.Functor=e.getFilterable=e.getCompactable=e.getAltTaskValidation=e.getApplicativeTaskValidation=e.URI=void 0,e.getTaskValidation=e.getSemigroup=e.getApplyMonoid=e.getApplySemigroup=e.taskEitherSeq=e.taskEither=e.orElseFirstW=e.orElseFirst=e.chainFirstW=e.chainFirst=e.chainW=e.chain=e.sequenceSeqArray=e.traverseSeqArray=e.traverseSeqArrayWithIndex=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndexSeq=e.traverseReadonlyNonEmptyArrayWithIndexSeq=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apSW=e.apS=e.bindW=e.bind=e.let=e.bindTo=e.Do=e.bracketW=e.bracket=e.taskify=e.chainIOEitherK=e.chainIOEitherKW=e.chainFirstTaskK=e.chainTaskK=e.fromTaskK=e.chainFirstIOK=e.chainIOK=e.fromIOK=e.fromEitherK=e.filterOrElseW=e.filterOrElse=void 0;var u=sa(),o=Jn(),l=r(or()),f=Us(),h=r(Fn()),d=r(ym()),_=bm(),R=da(),A=Fs(),E=QS(),g=it(),I=On(),C=r(Wn()),k=r(Jc());e.left=d.left(k.Pointed),e.right=d.right(k.Pointed),e.rightTask=d.rightF(k.Functor),e.leftTask=d.leftF(k.Functor),e.rightIO=(0,g.flow)(k.fromIO,e.rightTask),e.leftIO=(0,g.flow)(k.fromIO,e.leftTask),e.fromIO=e.rightIO,e.fromTask=e.rightTask,e.fromEither=k.of,e.fromIOEither=k.fromIO;var L=function(J){return k.map(h.fromOption(J))};e.fromTaskOption=L,e.match=d.match(k.Functor),e.matchW=e.match,e.matchE=d.matchE(k.Monad),e.fold=e.matchE,e.matchEW=e.matchE,e.foldW=e.matchEW,e.getOrElse=d.getOrElse(k.Monad),e.getOrElseW=e.getOrElse;var q=function(J,ne){return function(){return i(void 0,void 0,void 0,function(){var Se;return a(this,function(Xe){switch(Xe.label){case 0:return Xe.trys.push([0,2,,3]),[4,J().then(C.right)];case 1:return[2,Xe.sent()];case 2:return Se=Xe.sent(),[2,C.left(ne(Se))];case 3:return[2]}})})}};e.tryCatch=q;var G=function(J,ne){return function(){for(var Se=[],Xe=0;Xe<arguments.length;Xe++)Se[Xe]=arguments[Xe];return(0,e.tryCatch)(function(){return J.apply(void 0,Se)},ne)}};e.tryCatchK=G,e.toUnion=d.toUnion(k.Functor),e.fromNullable=d.fromNullable(k.Pointed),e.fromNullableK=d.fromNullableK(k.Pointed),e.chainNullableK=d.chainNullableK(k.Monad),e.orElse=d.orElse(k.Monad),e.orElseW=e.orElse,e.tapError=(0,g.dual)(2,d.tapError(k.Monad));var D=function(J){return(0,e.tapError)((0,e.fromIOK)(J))};e.orElseFirstIOK=D;var Y=function(J){return(0,e.tapError)((0,e.fromTaskK)(J))};e.orElseFirstTaskK=Y,e.orLeft=d.orLeft(k.Monad),e.swap=d.swap(k.Functor);var fe=function(J){var ne=(0,e.fromTaskOption)(J);return function(Se){return(0,g.flow)(Se,ne)}};e.fromTaskOptionK=fe;var $=function(J){return function(ne){return function(Se){return(0,e.flatMap)(Se,(0,e.fromTaskOptionK)(J)(ne))}}};e.chainTaskOptionKW=$,e.chainTaskOptionK=e.chainTaskOptionKW;var x=function(J){return(0,g.flow)(J,e.fromIOEither)};e.fromIOEitherK=x;var Re=function(J,ne){return(0,g.pipe)(J,(0,e.map)(ne))},N=function(J,ne){return(0,g.pipe)(J,(0,e.ap)(ne))},P=function(J,ne){return(0,e.flatMap)(J,function(Se){return(0,g.pipe)(ne,(0,e.map)(Se))})},s=function(J,ne){return(0,g.pipe)(J,(0,e.alt)(ne))};e.map=d.map(k.Functor),e.mapBoth=(0,g.dual)(3,d.mapBoth(k.Functor)),e.bimap=e.mapBoth,e.mapError=(0,g.dual)(2,d.mapError(k.Functor)),e.mapLeft=e.mapError,e.ap=d.ap(k.ApplyPar),e.apW=e.ap,e.flatMap=(0,g.dual)(2,d.flatMap(k.Monad)),e.flattenW=(0,e.flatMap)(g.identity),e.flatten=e.flattenW,e.alt=d.alt(k.Monad),e.altW=e.alt,e.of=e.right,e.throwError=e.left,e.URI="TaskEither";function S(J,ne){var Se=(0,o.ap)(J,h.getApplicativeValidation(ne));return{URI:e.URI,_E:void 0,map:Re,ap:function(Xe,ot){return(0,g.pipe)(Xe,Se(ot))},of:e.of}}e.getApplicativeTaskValidation=S;function M(J){var ne=d.altValidation(k.Monad,J);return{URI:e.URI,_E:void 0,map:Re,alt:function(Se,Xe){return(0,g.pipe)(Se,ne(Xe))}}}e.getAltTaskValidation=M;var c=function(J){var ne=h.getCompactable(J);return{URI:e.URI,_E:void 0,compact:(0,f.compact)(k.Functor,ne),separate:(0,f.separate)(k.Functor,ne,h.Functor)}};e.getCompactable=c;function p(J){var ne=h.getFilterable(J),Se=(0,e.getCompactable)(J),Xe=(0,_.filter)(k.Functor,ne),ot=(0,_.filterMap)(k.Functor,ne),at=(0,_.partition)(k.Functor,ne),Tt=(0,_.partitionMap)(k.Functor,ne);return{URI:e.URI,_E:void 0,map:Re,compact:Se.compact,separate:Se.separate,filter:function(Nt,Wt){return(0,g.pipe)(Nt,Xe(Wt))},filterMap:function(Nt,Wt){return(0,g.pipe)(Nt,ot(Wt))},partition:function(Nt,Wt){return(0,g.pipe)(Nt,at(Wt))},partitionMap:function(Nt,Wt){return(0,g.pipe)(Nt,Tt(Wt))}}}e.getFilterable=p,e.Functor={URI:e.URI,map:Re},e.as=(0,g.dual)(2,(0,I.as)(e.Functor)),e.asUnit=(0,I.asUnit)(e.Functor),e.flap=(0,I.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.ApplyPar={URI:e.URI,map:Re,ap:N},e.apFirst=(0,o.apFirst)(e.ApplyPar),e.apFirstW=e.apFirst,e.apSecond=(0,o.apSecond)(e.ApplyPar),e.apSecondW=e.apSecond,e.ApplicativePar={URI:e.URI,map:Re,ap:N,of:e.of},e.ApplySeq={URI:e.URI,map:Re,ap:P},e.ApplicativeSeq={URI:e.URI,map:Re,ap:P,of:e.of},e.Chain={URI:e.URI,map:Re,ap:N,chain:e.flatMap},e.Monad={URI:e.URI,map:Re,ap:N,chain:e.flatMap,of:e.of},e.MonadIO={URI:e.URI,map:Re,ap:N,chain:e.flatMap,of:e.of,fromIO:e.fromIO},e.MonadTask={URI:e.URI,map:Re,ap:N,chain:e.flatMap,of:e.of,fromIO:e.fromIO,fromTask:e.fromTask},e.MonadThrow={URI:e.URI,map:Re,ap:N,chain:e.flatMap,of:e.of,throwError:e.throwError},e.FromEither={URI:e.URI,fromEither:e.fromEither},e.FromIO={URI:e.URI,fromIO:e.fromIO},e.FromTask={URI:e.URI,fromIO:e.fromIO,fromTask:e.fromTask},e.tap=(0,g.dual)(2,l.tap(e.Chain)),e.tapEither=(0,g.dual)(2,(0,R.tapEither)(e.FromEither,e.Chain)),e.tapIO=(0,g.dual)(2,(0,A.tapIO)(e.FromIO,e.Chain)),e.tapTask=(0,g.dual)(2,(0,E.tapTask)(e.FromTask,e.Chain)),e.Bifunctor={URI:e.URI,bimap:e.mapBoth,mapLeft:e.mapError},e.Alt={URI:e.URI,map:Re,alt:s},e.fromOption=(0,R.fromOption)(e.FromEither),e.fromOptionK=(0,R.fromOptionK)(e.FromEither),e.chainOptionK=(0,R.chainOptionK)(e.FromEither,e.Chain),e.chainOptionKW=e.chainOptionK;var U={fromEither:e.FromEither.fromEither};e.liftNullable=C.liftNullable(U),e.liftOption=C.liftOption(U);var j={flatMap:e.flatMap},ae={fromIO:e.FromIO.fromIO},V={fromTask:e.fromTask};e.flatMapNullable=C.flatMapNullable(U,j),e.flatMapOption=C.flatMapOption(U,j),e.flatMapEither=C.flatMapEither(U,j),e.flatMapIO=C.flatMapIO(ae,j),e.flatMapTask=C.flatMapTask(V,j),e.flatMapIOEither=(0,g.dual)(2,function(J,ne){return(0,e.flatMap)(J,(0,e.fromIOEitherK)(ne))}),e.flatMapTaskOption=(0,g.dual)(3,function(J,ne,Se){return(0,e.flatMap)(J,function(Xe){return(0,e.fromTaskOption)(function(){return Se(Xe)})(ne(Xe))})}),e.chainEitherK=e.flatMapEither,e.chainEitherKW=e.flatMapEither,e.chainFirstEitherK=e.tapEither,e.chainFirstEitherKW=e.tapEither,e.fromPredicate=(0,R.fromPredicate)(e.FromEither),e.filterOrElse=(0,R.filterOrElse)(e.FromEither,e.Chain),e.filterOrElseW=e.filterOrElse,e.fromEitherK=(0,R.fromEitherK)(e.FromEither),e.fromIOK=(0,A.fromIOK)(e.FromIO),e.chainIOK=e.flatMapIO,e.chainFirstIOK=e.tapIO,e.fromTaskK=(0,E.fromTaskK)(e.FromTask),e.chainTaskK=e.flatMapTask,e.chainFirstTaskK=e.tapTask,e.chainIOEitherKW=e.flatMapIOEither,e.chainIOEitherK=e.flatMapIOEither;function Q(J){return function(){var ne=Array.prototype.slice.call(arguments);return function(){return new Promise(function(Se){var Xe=function(ot,at){return ot!=null?Se(C.left(ot)):Se(C.right(at))};J.apply(null,ne.concat(Xe))})}}}e.taskify=Q;var me=function(J,ne,Se){return(0,e.bracketW)(J,ne,Se)};e.bracket=me;var Ie=function(J,ne,Se){return(0,e.flatMap)(J,function(Xe){return k.flatMap(ne(Xe),function(ot){return(0,e.flatMap)(Se(Xe,ot),function(){return k.of(ot)})})})};e.bracketW=Ie,e.Do=(0,e.of)(C.emptyRecord),e.bindTo=(0,I.bindTo)(e.Functor);var Ee=(0,I.let)(e.Functor);e.let=Ee,e.bind=l.bind(e.Chain),e.bindW=e.bind,e.apS=(0,o.apS)(e.ApplyPar),e.apSW=e.apS,e.ApT=(0,e.of)(C.emptyReadonlyArray);var Ge=function(J){return(0,g.flow)(k.traverseReadonlyNonEmptyArrayWithIndex(J),k.map(h.traverseReadonlyNonEmptyArrayWithIndex(g.SK)))};e.traverseReadonlyNonEmptyArrayWithIndex=Ge;var Ke=function(J){var ne=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(J);return function(Se){return C.isNonEmpty(Se)?ne(Se):e.ApT}};e.traverseReadonlyArrayWithIndex=Ke;var K=function(J){return function(ne){return function(){return C.tail(ne).reduce(function(Se,Xe,ot){return Se.then(function(at){return C.isLeft(at)?Se:J(ot+1,Xe)().then(function(Tt){return C.isLeft(Tt)?Tt:(at.right.push(Tt.right),at)})})},J(0,C.head(ne))().then(h.map(C.singleton)))}}};e.traverseReadonlyNonEmptyArrayWithIndexSeq=K;var pe=function(J){var ne=(0,e.traverseReadonlyNonEmptyArrayWithIndexSeq)(J);return function(Se){return C.isNonEmpty(Se)?ne(Se):e.ApT}};e.traverseReadonlyArrayWithIndexSeq=pe,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var De=function(J){return(0,e.traverseReadonlyArrayWithIndex)(function(ne,Se){return J(Se)})};e.traverseArray=De,e.sequenceArray=(0,e.traverseArray)(g.identity),e.traverseSeqArrayWithIndex=e.traverseReadonlyArrayWithIndexSeq;var Ze=function(J){return(0,e.traverseReadonlyArrayWithIndexSeq)(function(ne,Se){return J(Se)})};e.traverseSeqArray=Ze,e.sequenceSeqArray=(0,e.traverseSeqArray)(g.identity),e.chain=e.flatMap,e.chainW=e.flatMap,e.chainFirst=e.tap,e.chainFirstW=e.tap,e.orElseFirst=e.tapError,e.orElseFirstW=e.tapError,e.taskEither={URI:e.URI,bimap:e.mapBoth,mapLeft:e.mapError,map:Re,of:e.of,ap:N,chain:e.flatMap,alt:s,fromIO:e.fromIO,fromTask:e.fromTask,throwError:e.throwError},e.taskEitherSeq={URI:e.URI,bimap:e.mapBoth,mapLeft:e.mapError,map:Re,of:e.of,ap:P,chain:e.flatMap,alt:s,fromIO:e.fromIO,fromTask:e.fromTask,throwError:e.throwError},e.getApplySemigroup=(0,o.getApplySemigroup)(e.ApplySeq),e.getApplyMonoid=(0,u.getApplicativeMonoid)(e.ApplicativeSeq);var rt=function(J){return(0,o.getApplySemigroup)(k.ApplySeq)(h.getSemigroup(J))};e.getSemigroup=rt;function W(J){var ne=S(k.ApplicativePar,J),Se=M(J);return{URI:e.URI,_E:void 0,map:Re,ap:ne.ap,of:e.of,chain:e.flatMap,bimap:e.mapBoth,mapLeft:e.mapError,alt:Se.alt,fromIO:e.fromIO,fromTask:e.fromTask,throwError:e.throwError}}e.getTaskValidation=W}}),XS=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Endomorphism.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMonoid=e.getSemigroup=e.URI=void 0;var t=it();e.URI="Endomorphism";var n=function(){return{concat:function(i,a){return(0,t.flow)(i,a)}}};e.getSemigroup=n;var r=function(){return{concat:(0,e.getSemigroup)().concat,empty:t.identity}};e.getMonoid=r}}),Yi=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Monoid.js"(e){var t=e&&e.__createBinding||(Object.create?function(E,g,I,C){C===void 0&&(C=I);var k=Object.getOwnPropertyDescriptor(g,I);(!k||("get"in k?!g.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return g[I]}}),Object.defineProperty(E,C,k)}:function(E,g,I,C){C===void 0&&(C=I),E[C]=g[I]}),n=e&&e.__setModuleDefault||(Object.create?function(E,g){Object.defineProperty(E,"default",{enumerable:!0,value:g})}:function(E,g){E.default=g}),r=e&&e.__importStar||function(E){if(E&&E.__esModule)return E;var g={};if(E!=null)for(var I in E)I!=="default"&&Object.prototype.hasOwnProperty.call(E,I)&&t(g,E,I);return n(g,E),g};Object.defineProperty(e,"__esModule",{value:!0}),e.monoidProduct=e.monoidSum=e.monoidString=e.getEndomorphismMonoid=e.getFunctionMonoid=e.monoidAny=e.monoidAll=e.fold=e.getMeetMonoid=e.getJoinMonoid=e.getDualMonoid=e.getStructMonoid=e.getTupleMonoid=e.monoidVoid=e.concatAll=e.tuple=e.struct=e.reverse=e.max=e.min=void 0;var i=XS(),a=it(),u=r(Wn()),o=r(cu()),l=function(E){return{concat:o.min(E).concat,empty:E.top}};e.min=l;var f=function(E){return{concat:o.max(E).concat,empty:E.bottom}};e.max=f;var h=function(E){return{concat:o.reverse(E).concat,empty:E.empty}};e.reverse=h;var d=function(E){var g={};for(var I in E)u.has.call(E,I)&&(g[I]=E[I].empty);return{concat:o.struct(E).concat,empty:g}};e.struct=d;var _=function(){for(var E=[],g=0;g<arguments.length;g++)E[g]=arguments[g];return{concat:o.tuple.apply(o,E).concat,empty:E.map(function(I){return I.empty})}};e.tuple=_;var R=function(E){return o.concatAll(E)(E.empty)};e.concatAll=R,e.monoidVoid={concat:o.semigroupVoid.concat,empty:void 0},e.getTupleMonoid=e.tuple,e.getStructMonoid=e.struct,e.getDualMonoid=e.reverse,e.getJoinMonoid=e.max,e.getMeetMonoid=e.min,e.fold=e.concatAll,e.monoidAll={concat:o.semigroupAll.concat,empty:!0},e.monoidAny={concat:o.semigroupAny.concat,empty:!1},e.getFunctionMonoid=a.getMonoid;var A=function(){return(0,e.reverse)((0,i.getMonoid)())};e.getEndomorphismMonoid=A,e.monoidString={concat:o.semigroupString.concat,empty:""},e.monoidSum={concat:o.semigroupSum.concat,empty:0},e.monoidProduct={concat:o.semigroupProduct.concat,empty:1}}}),Ls=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/pipeable.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.pipe=e.pipeable=e.compose=e.promap=e.partitionMapWithIndex=e.partitionWithIndex=e.filterMapWithIndex=e.filterWithIndex=e.partitionMap=e.partition=e.filterMap=e.filter=e.alt=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=e.reduceRight=e.foldMap=e.reduce=e.extend=e.mapLeft=e.bimap=e.chain=e.ap=e.mapWithIndex=e.contramap=e.map=void 0;var t=Jn(),n=or(),r=it();function i(K){return function(pe){return function(De){return K.map(De,pe)}}}e.map=i;function a(K){return function(pe){return function(De){return K.contramap(De,pe)}}}e.contramap=a;function u(K){return function(pe){return function(De){return K.mapWithIndex(De,pe)}}}e.mapWithIndex=u;function o(K){return function(pe){return function(De){return K.ap(De,pe)}}}e.ap=o;function l(K){return function(pe){return function(De){return K.chain(De,pe)}}}e.chain=l;function f(K){return function(pe,De){return function(Ze){return K.bimap(Ze,pe,De)}}}e.bimap=f;function h(K){return function(pe){return function(De){return K.mapLeft(De,pe)}}}e.mapLeft=h;function d(K){return function(pe){return function(De){return K.extend(De,pe)}}}e.extend=d;function _(K){return function(pe,De){return function(Ze){return K.reduce(Ze,pe,De)}}}e.reduce=_;function R(K){return function(pe){var De=K.foldMap(pe);return function(Ze){return function(rt){return De(rt,Ze)}}}}e.foldMap=R;function A(K){return function(pe,De){return function(Ze){return K.reduceRight(Ze,pe,De)}}}e.reduceRight=A;function E(K){return function(pe,De){return function(Ze){return K.reduceWithIndex(Ze,pe,De)}}}e.reduceWithIndex=E;function g(K){return function(pe){var De=K.foldMapWithIndex(pe);return function(Ze){return function(rt){return De(rt,Ze)}}}}e.foldMapWithIndex=g;function I(K){return function(pe,De){return function(Ze){return K.reduceRightWithIndex(Ze,pe,De)}}}e.reduceRightWithIndex=I;function C(K){return function(pe){return function(De){return K.alt(De,pe)}}}e.alt=C;function k(K){return function(pe){return function(De){return K.filter(De,pe)}}}e.filter=k;function L(K){return function(pe){return function(De){return K.filterMap(De,pe)}}}e.filterMap=L;function q(K){return function(pe){return function(De){return K.partition(De,pe)}}}e.partition=q;function G(K){return function(pe){return function(De){return K.partitionMap(De,pe)}}}e.partitionMap=G;function D(K){return function(pe){return function(De){return K.filterWithIndex(De,pe)}}}e.filterWithIndex=D;function Y(K){return function(pe){return function(De){return K.filterMapWithIndex(De,pe)}}}e.filterMapWithIndex=Y;function fe(K){return function(pe){return function(De){return K.partitionWithIndex(De,pe)}}}e.partitionWithIndex=fe;function $(K){return function(pe){return function(De){return K.partitionMapWithIndex(De,pe)}}}e.partitionMapWithIndex=$;function x(K){return function(pe,De){return function(Ze){return K.promap(Ze,pe,De)}}}e.promap=x;function Re(K){return function(pe){return function(De){return K.compose(De,pe)}}}e.compose=Re;var N=function(K){return typeof K.map=="function"},P=function(K){return typeof K.contramap=="function"},s=function(K){return typeof K.mapWithIndex=="function"},S=function(K){return typeof K.ap=="function"},M=function(K){return typeof K.chain=="function"},c=function(K){return typeof K.bimap=="function"},p=function(K){return typeof K.extend=="function"},U=function(K){return typeof K.reduce=="function"},j=function(K){return typeof K.reduceWithIndex=="function"},ae=function(K){return typeof K.alt=="function"},V=function(K){return typeof K.compact=="function"},Q=function(K){return typeof K.filter=="function"},me=function(K){return typeof K.filterWithIndex=="function"},Ie=function(K){return typeof K.promap=="function"},Ee=function(K){return typeof K.compose=="function"},Ge=function(K){return typeof K.throwError=="function"};function Ke(K){var pe={};if(N(K)&&(pe.map=i(K)),P(K)&&(pe.contramap=a(K)),s(K)&&(pe.mapWithIndex=u(K)),S(K)&&(pe.ap=o(K),pe.apFirst=(0,t.apFirst)(K),pe.apSecond=(0,t.apSecond)(K)),M(K)&&(pe.chain=l(K),pe.chainFirst=(0,n.chainFirst)(K),pe.flatten=pe.chain(r.identity)),c(K)&&(pe.bimap=f(K),pe.mapLeft=h(K)),p(K)&&(pe.extend=d(K),pe.duplicate=pe.extend(r.identity)),U(K)&&(pe.reduce=_(K),pe.foldMap=R(K),pe.reduceRight=A(K)),j(K)&&(pe.reduceWithIndex=E(K),pe.foldMapWithIndex=g(K),pe.reduceRightWithIndex=I(K)),ae(K)&&(pe.alt=C(K)),V(K)&&(pe.compact=K.compact,pe.separate=K.separate),Q(K)&&(pe.filter=k(K),pe.filterMap=L(K),pe.partition=q(K),pe.partitionMap=G(K)),me(K)&&(pe.filterWithIndex=D(K),pe.filterMapWithIndex=Y(K),pe.partitionWithIndex=fe(K),pe.partitionMapWithIndex=$(K)),Ie(K)&&(pe.promap=x(K)),Ee(K)&&(pe.compose=Re(K)),Ge(K)){var De=function(J){return function(ne){return ne._tag==="None"?K.throwError(J()):K.of(ne.value)}},Ze=function(J){return J._tag==="Left"?K.throwError(J.left):K.of(J.right)},rt=function(J,ne){return function(Se){return J(Se)?K.of(Se):K.throwError(ne(Se))}},W=function(J,ne){return function(Se){return K.chain(Se,function(Xe){return J(Xe)?K.of(Xe):K.throwError(ne(Xe))})}};pe.fromOption=De,pe.fromEither=Ze,pe.fromPredicate=rt,pe.filterOrElse=W}return pe}e.pipeable=Ke,e.pipe=r.pipe}}),ZS=wt({"../../node_modules/.pnpm/retry-ts@0.1.4_fp-ts@2.16.2/node_modules/retry-ts/lib/index.js"(e){var t=e&&e.__createBinding||(Object.create?function(E,g,I,C){C===void 0&&(C=I),Object.defineProperty(E,C,{enumerable:!0,get:function(){return g[I]}})}:function(E,g,I,C){C===void 0&&(C=I),E[C]=g[I]}),n=e&&e.__setModuleDefault||(Object.create?function(E,g){Object.defineProperty(E,"default",{enumerable:!0,value:g})}:function(E,g){E.default=g}),r=e&&e.__importStar||function(E){if(E&&E.__esModule)return E;var g={};if(E!=null)for(var I in E)I!=="default"&&Object.prototype.hasOwnProperty.call(E,I)&&t(g,E,I);return n(g,E),g};Object.defineProperty(e,"__esModule",{value:!0}),e.monoidRetryPolicy=e.applyPolicy=e.defaultRetryStatus=e.exponentialBackoff=e.capDelay=e.constantDelay=e.limitRetriesByDelay=e.limitRetries=e.Monoid=void 0;var i=r(Yi()),a=r(kn()),u=cu(),o=Wr(),l=Ls();e.Monoid=i.getFunctionMonoid(a.getApplyMonoid({concat:u.getJoinSemigroup(o.ordNumber).concat,empty:0}))();function f(E){return function(g){return g.iterNumber>=E?a.none:a.some(0)}}e.limitRetries=f;function h(E,g){return function(I){return l.pipe(I,g,a.filter(function(C){return C<E}))}}e.limitRetriesByDelay=h;function d(E){return function(){return a.some(E)}}e.constantDelay=d;function _(E,g){return function(I){return l.pipe(I,g,a.map(function(C){return Math.min(E,C)}))}}e.capDelay=_;function R(E){return function(g){return a.some(E*Math.pow(2,g.iterNumber))}}e.exponentialBackoff=R,e.defaultRetryStatus={iterNumber:0,cumulativeDelay:0,previousDelay:a.none};function A(E,g){var I=E(g);return{iterNumber:g.iterNumber+1,cumulativeDelay:g.cumulativeDelay+a.getOrElse(function(){return 0})(I),previousDelay:I}}e.applyPolicy=A,e.monoidRetryPolicy=e.Monoid}}),lu=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/ReadonlyNonEmptyArray.js"(e){var t=e&&e.__createBinding||(Object.create?function(v,y,O,z){z===void 0&&(z=O);var ve=Object.getOwnPropertyDescriptor(y,O);(!ve||("get"in ve?!y.__esModule:ve.writable||ve.configurable))&&(ve={enumerable:!0,get:function(){return y[O]}}),Object.defineProperty(v,z,ve)}:function(v,y,O,z){z===void 0&&(z=O),v[z]=y[O]}),n=e&&e.__setModuleDefault||(Object.create?function(v,y){Object.defineProperty(v,"default",{enumerable:!0,value:y})}:function(v,y){v.default=y}),r=e&&e.__importStar||function(v){if(v&&v.__esModule)return v;var y={};if(v!=null)for(var O in v)O!=="default"&&Object.prototype.hasOwnProperty.call(v,O)&&t(y,v,O);return n(y,v),y},i=e&&e.__spreadArray||function(v,y,O){if(O||arguments.length===2)for(var z=0,ve=y.length,ie;z<ve;z++)(ie||!(z in y))&&(ie||(ie=Array.prototype.slice.call(y,0,z)),ie[z]=y[z]);return v.concat(ie||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.reduceRight=e.foldMap=e.reduce=e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.flatMap=e.ap=e.alt=e.altW=e.of=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.modifyAt=e.updateAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.fromArray=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromReadonlyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=e.empty=void 0,e.groupSort=e.chain=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.let=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=void 0,e.readonlyNonEmptyArray=e.fold=e.prependToAll=e.insertAt=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=void 0;var a=Jn(),u=or(),o=jr(),l=it(),f=On(),h=r(Wn()),d=Wr(),_=r(cu());e.empty=h.emptyReadonlyArray,e.isNonEmpty=h.isNonEmpty;var R=function(v,y){return v<0||v>=y.length};e.isOutOfBound=R;var A=function(v){return function(y){return i([v],y,!0)}};e.prependW=A,e.prepend=e.prependW;var E=function(v){return function(y){return i(i([],y,!0),[v],!1)}};e.appendW=E,e.append=e.appendW;var g=function(v,y,O){if((0,e.isNonEmpty)(O)){var z=h.fromReadonlyNonEmptyArray(O);return z.splice(v,0,y),z}return[y]};e.unsafeInsertAt=g;var I=function(v,y,O){if(O[v]===y)return O;var z=h.fromReadonlyNonEmptyArray(O);return z[v]=y,z};e.unsafeUpdateAt=I;var C=function(v){return function(y){if(y.length===1)return y;for(var O=[(0,e.head)(y)],z=(0,e.tail)(y),ve=function(qe){O.every(function(ct){return!v.equals(ct,qe)})&&O.push(qe)},ie=0,F=z;ie<F.length;ie++){var ge=F[ie];ve(ge)}return O}};e.uniq=C;var k=function(v){if((0,e.isNonEmpty)(v)){var y=(0,d.getMonoid)();return(0,e.sort)(v.reduce(y.concat,y.empty))}return l.identity};e.sortBy=k;var L=function(v){var y=(0,e.uniq)(v);return function(O){return function(z){return y((0,l.pipe)(z,P(O)))}}};e.union=L;var q=function(v){return function(y){var O=y.length,z=Math.round(v)%O;if((0,e.isOutOfBound)(Math.abs(z),y)||z===0)return y;if(z<0){var ve=(0,e.splitAt)(-z)(y),ie=ve[0],F=ve[1];return(0,l.pipe)(F,P(ie))}else return(0,e.rotate)(z-O)(y)}};e.rotate=q;var G=function(v){return(0,e.isNonEmpty)(v)?h.some(v):h.none};e.fromReadonlyArray=G;var D=function(v){return function(y){for(var O=Math.max(0,Math.floor(y)),z=[v(0)],ve=1;ve<O;ve++)z.push(v(ve));return z}};e.makeBy=D;var Y=function(v){return(0,e.makeBy)(function(){return v})};e.replicate=Y;var fe=function(v,y){return v<=y?(0,e.makeBy)(function(O){return v+O})(y-v+1):[v]};e.range=fe;var $=function(v){return[(0,e.head)(v),(0,e.tail)(v)]};e.unprepend=$;var x=function(v){return[(0,e.init)(v),(0,e.last)(v)]};e.unappend=x;var Re=function(v){return(0,e.fromReadonlyArray)(v.slice())};e.fromArray=Re;function N(v){return function(y){return y.concat(v)}}e.concatW=N;function P(v,y){return y?v.concat(y):function(O){return O.concat(v)}}e.concat=P;var s=function(v){return v.length===1?v:i([(0,e.last)(v)],v.slice(0,-1).reverse(),!0)};e.reverse=s;function S(v){return function(y){var O=y.length;if(O===0)return e.empty;for(var z=[],ve=y[0],ie=[ve],F=1;F<O;F++){var ge=y[F];v.equals(ge,ve)?ie.push(ge):(z.push(ie),ve=ge,ie=[ve])}return z.push(ie),z}}e.group=S;var M=function(v){return function(y){for(var O={},z=0,ve=y;z<ve.length;z++){var ie=ve[z],F=v(ie);h.has.call(O,F)?O[F].push(ie):O[F]=[ie]}return O}};e.groupBy=M;var c=function(v){return function(y){return y.length===1?y:y.slice().sort(v.compare)}};e.sort=c;var p=function(v,y){return(0,e.modifyAt)(v,function(){return y})};e.updateAt=p;var U=function(v,y){return function(O){return(0,e.isOutOfBound)(v,O)?h.none:h.some((0,e.unsafeUpdateAt)(v,y(O[v]),O))}};e.modifyAt=U;var j=function(v,y,O){for(var z=[O(v[0],y[0])],ve=Math.min(v.length,y.length),ie=1;ie<ve;ie++)z[ie]=O(v[ie],y[ie]);return z};e.zipWith=j;function ae(v,y){return y===void 0?function(O){return ae(O,v)}:(0,e.zipWith)(v,y,function(O,z){return[O,z]})}e.zip=ae;var V=function(v){for(var y=[v[0][0]],O=[v[0][1]],z=1;z<v.length;z++)y[z]=v[z][0],O[z]=v[z][1];return[y,O]};e.unzip=V;var Q=function(v){return function(y){for(var O=[v,y[0]],z=1;z<y.length;z++)O.push(v,y[z]);return O}};e.prependAll=Q;var me=function(v){return function(y){var O=(0,e.tail)(y);return(0,e.isNonEmpty)(O)?(0,l.pipe)(O,(0,e.prependAll)(v),(0,e.prepend)((0,e.head)(y))):y}};e.intersperse=me;var Ie=function(v){return function(y){for(var O=h.fromReadonlyNonEmptyArray(v(0,(0,e.head)(y))),z=1;z<y.length;z++)O.push.apply(O,v(z,y[z]));return O}};e.chainWithIndex=Ie;var Ee=function(v){return function(y){for(var O=v(y),z=O[0],ve=O[1],ie=[z],F=ve;(0,e.isNonEmpty)(F);){var ge=v(F),qe=ge[0],ct=ge[1];ie.push(qe),F=ct}return ie}};e.chop=Ee;var Ge=function(v){return function(y){var O=Math.max(1,v);return O>=y.length?[y,e.empty]:[(0,l.pipe)(y.slice(1,O),(0,e.prepend)((0,e.head)(y))),y.slice(O)]}};e.splitAt=Ge;var Ke=function(v){return(0,e.chop)((0,e.splitAt)(v))};e.chunksOf=Ke;var K=function(v,y){return(0,l.pipe)(v,(0,e.map)(y))},pe=function(v,y){return(0,l.pipe)(v,(0,e.mapWithIndex)(y))},De=function(v,y){return(0,l.pipe)(v,(0,e.ap)(y))},Ze=function(v,y){return(0,l.pipe)(v,(0,e.extend)(y))},rt=function(v,y,O){return(0,l.pipe)(v,(0,e.reduce)(y,O))},W=function(v){var y=(0,e.foldMap)(v);return function(O,z){return(0,l.pipe)(O,y(z))}},J=function(v,y,O){return(0,l.pipe)(v,(0,e.reduceRight)(y,O))},ne=function(v){var y=(0,e.traverse)(v);return function(O,z){return(0,l.pipe)(O,y(z))}},Se=function(v,y){return(0,l.pipe)(v,(0,e.alt)(y))},Xe=function(v,y,O){return(0,l.pipe)(v,(0,e.reduceWithIndex)(y,O))},ot=function(v){var y=(0,e.foldMapWithIndex)(v);return function(O,z){return(0,l.pipe)(O,y(z))}},at=function(v,y,O){return(0,l.pipe)(v,(0,e.reduceRightWithIndex)(y,O))},Tt=function(v){var y=(0,e.traverseWithIndex)(v);return function(O,z){return(0,l.pipe)(O,y(z))}};e.of=h.singleton;var Nt=function(v){return function(y){return(0,l.pipe)(y,N(v()))}};e.altW=Nt,e.alt=e.altW;var Wt=function(v){return(0,e.flatMap)(function(y){return(0,l.pipe)(v,(0,e.map)(y))})};e.ap=Wt,e.flatMap=(0,l.dual)(2,function(v,y){return(0,l.pipe)(v,(0,e.chainWithIndex)(function(O,z){return y(z,O)}))});var Oe=function(v){return function(y){for(var O=(0,e.tail)(y),z=[v(y)];(0,e.isNonEmpty)(O);)z.push(v(O)),O=(0,e.tail)(O);return z}};e.extend=Oe,e.duplicate=(0,e.extend)(l.identity),e.flatten=(0,e.flatMap)(l.identity);var Pe=function(v){return(0,e.mapWithIndex)(function(y,O){return v(O)})};e.map=Pe;var Ye=function(v){return function(y){for(var O=[v(0,(0,e.head)(y))],z=1;z<y.length;z++)O.push(v(z,y[z]));return O}};e.mapWithIndex=Ye;var ze=function(v,y){return(0,e.reduceWithIndex)(v,function(O,z,ve){return y(z,ve)})};e.reduce=ze;var et=function(v){return function(y){return function(O){return O.slice(1).reduce(function(z,ve){return v.concat(z,y(ve))},y(O[0]))}}};e.foldMap=et;var tt=function(v,y){return(0,e.reduceRightWithIndex)(v,function(O,z,ve){return y(z,ve)})};e.reduceRight=tt;var de=function(v,y){return function(O){return O.reduce(function(z,ve,ie){return y(ie,z,ve)},v)}};e.reduceWithIndex=de;var ue=function(v){return function(y){return function(O){return O.slice(1).reduce(function(z,ve,ie){return v.concat(z,y(ie+1,ve))},y(0,O[0]))}}};e.foldMapWithIndex=ue;var ke=function(v,y){return function(O){return O.reduceRight(function(z,ve,ie){return y(ie,ve,z)},v)}};e.reduceRightWithIndex=ke;var oe=function(v){var y=(0,e.traverseWithIndex)(v);return function(O){return y(function(z,ve){return O(ve)})}};e.traverse=oe;var Le=function(v){return(0,e.traverseWithIndex)(v)(l.SK)};e.sequence=Le;var se=function(v){return function(y){return function(O){for(var z=v.map(y(0,(0,e.head)(O)),e.of),ve=1;ve<O.length;ve++)z=v.ap(v.map(z,function(ie){return function(F){return(0,l.pipe)(ie,(0,e.append)(F))}}),y(ve,O[ve]));return z}}};e.traverseWithIndex=se,e.extract=h.head,e.URI="ReadonlyNonEmptyArray";var we=function(v){return{show:function(y){return"[".concat(y.map(v.show).join(", "),"]")}}};e.getShow=we;var Be=function(){return{concat:P}};e.getSemigroup=Be;var gt=function(v){return(0,o.fromEquals)(function(y,O){return y.length===O.length&&y.every(function(z,ve){return v.equals(z,O[ve])})})};e.getEq=gt;var ft=function(v){var y=(0,e.union)(v);return{concat:function(O,z){return y(z)(O)}}};e.getUnionSemigroup=ft,e.Functor={URI:e.URI,map:K},e.flap=(0,f.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:K,mapWithIndex:pe},e.Apply={URI:e.URI,map:K,ap:De},e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:K,ap:De,of:e.of},e.Chain={URI:e.URI,map:K,ap:De,chain:e.flatMap},e.chainFirst=(0,u.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:K,ap:De,of:e.of,chain:e.flatMap},e.Foldable={URI:e.URI,reduce:rt,foldMap:W,reduceRight:J},e.FoldableWithIndex={URI:e.URI,reduce:rt,foldMap:W,reduceRight:J,reduceWithIndex:Xe,foldMapWithIndex:ot,reduceRightWithIndex:at},e.Traversable={URI:e.URI,map:K,reduce:rt,foldMap:W,reduceRight:J,traverse:ne,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:K,mapWithIndex:pe,reduce:rt,foldMap:W,reduceRight:J,traverse:ne,sequence:e.sequence,reduceWithIndex:Xe,foldMapWithIndex:ot,reduceRightWithIndex:at,traverseWithIndex:Tt},e.Alt={URI:e.URI,map:K,alt:Se},e.Comonad={URI:e.URI,map:K,extend:Ze,extract:e.extract},e.Do=(0,e.of)(h.emptyRecord),e.bindTo=(0,f.bindTo)(e.Functor);var ye=(0,f.let)(e.Functor);e.let=ye,e.bind=(0,u.bind)(e.Chain),e.apS=(0,a.apS)(e.Apply),e.head=e.extract,e.tail=h.tail;var w=function(v){return v[v.length-1]};e.last=w;var he=function(v){return v.slice(0,-1)};e.init=he;var _e=function(v){var y=_.min(v);return function(O){return O.reduce(y.concat)}};e.min=_e;var Te=function(v){var y=_.max(v);return function(O){return O.reduce(y.concat)}};e.max=Te;var Ne=function(v){return function(y){return y.reduce(v.concat)}};e.concatAll=Ne;var je=function(v){return function(y){return v((0,e.head)(y),(0,e.tail)(y))}};e.matchLeft=je;var Qe=function(v){return function(y){return v((0,e.init)(y),(0,e.last)(y))}};e.matchRight=Qe;var X=function(v){return function(y){return i([v((0,e.head)(y))],(0,e.tail)(y),!0)}};e.modifyHead=X;var re=function(v){return(0,e.modifyHead)(function(){return v})};e.updateHead=re;var be=function(v){return function(y){return(0,l.pipe)((0,e.init)(y),(0,e.append)(v((0,e.last)(y))))}};e.modifyLast=be;var We=function(v){return(0,e.modifyLast)(function(){return v})};e.updateLast=We;var st=function(v){var y=(0,e.concatAll)(v);return function(O){return(0,l.flow)((0,e.intersperse)(O),y)}};e.intercalate=st,e.chain=e.flatMap;function _t(v){var y=(0,e.sort)(v),O=S(v);return function(z){return(0,e.isNonEmpty)(z)?O(y(z)):e.empty}}e.groupSort=_t;function Dt(v){return(0,e.filterWithIndex)(function(y,O){return v(O)})}e.filter=Dt;var yn=function(v){return function(y){return(0,e.fromReadonlyArray)(y.filter(function(O,z){return v(z,O)}))}};e.filterWithIndex=yn,e.uncons=e.unprepend,e.unsnoc=e.unappend;function Z(v,y){return y===void 0?(0,e.prepend)(v):(0,l.pipe)(y,(0,e.prepend)(v))}e.cons=Z;var ce=function(v,y){return(0,l.pipe)(v,P([y]))};e.snoc=ce;var b=function(v,y){return function(O){return v<0||v>O.length?h.none:h.some((0,e.unsafeInsertAt)(v,y,O))}};e.insertAt=b,e.prependToAll=e.prependAll,e.fold=e.concatAll,e.readonlyNonEmptyArray={URI:e.URI,of:e.of,map:K,mapWithIndex:pe,ap:De,chain:e.flatMap,extend:Ze,extract:e.extract,reduce:rt,foldMap:W,reduceRight:J,traverse:ne,sequence:e.sequence,reduceWithIndex:Xe,foldMapWithIndex:ot,reduceRightWithIndex:at,traverseWithIndex:Tt,alt:Se}}}),ha=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/NonEmptyArray.js"(e){var t=e&&e.__createBinding||(Object.create?function(X,re,be,We){We===void 0&&(We=be);var st=Object.getOwnPropertyDescriptor(re,be);(!st||("get"in st?!re.__esModule:st.writable||st.configurable))&&(st={enumerable:!0,get:function(){return re[be]}}),Object.defineProperty(X,We,st)}:function(X,re,be,We){We===void 0&&(We=be),X[We]=re[be]}),n=e&&e.__setModuleDefault||(Object.create?function(X,re){Object.defineProperty(X,"default",{enumerable:!0,value:re})}:function(X,re){X.default=re}),r=e&&e.__importStar||function(X){if(X&&X.__esModule)return X;var re={};if(X!=null)for(var be in X)be!=="default"&&Object.prototype.hasOwnProperty.call(X,be)&&t(re,X,be);return n(re,X),re},i=e&&e.__spreadArray||function(X,re,be){if(be||arguments.length===2)for(var We=0,st=re.length,_t;We<st;We++)(_t||!(We in re))&&(_t||(_t=Array.prototype.slice.call(re,0,We)),_t[We]=re[We]);return X.concat(_t||Array.prototype.slice.call(re))};Object.defineProperty(e,"__esModule",{value:!0}),e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.flatMap=e.ap=e.alt=e.altW=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.foldMap=e.foldMapWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.of=e.copy=e.modifyAt=e.updateAt=e.insertAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromArray=e.fromReadonlyNonEmptyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=void 0,e.chain=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.let=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=void 0,e.nonEmptyArray=e.fold=e.prependToAll=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=e.groupSort=void 0;var a=Jn(),u=or(),o=it(),l=On(),f=r(Wn()),h=Wr(),d=r(lu()),_=function(X){return X.length>0};e.isNonEmpty=_;var R=function(X,re){return X<0||X>=re.length};e.isOutOfBound=R;var A=function(X){return function(re){return i([X],re,!0)}};e.prependW=A,e.prepend=e.prependW;var E=function(X){return function(re){return i(i([],re,!0),[X],!1)}};e.appendW=E,e.append=e.appendW;var g=function(X,re,be){if((0,e.isNonEmpty)(be)){var We=(0,e.fromReadonlyNonEmptyArray)(be);return We.splice(X,0,re),We}return[re]};e.unsafeInsertAt=g;var I=function(X,re,be){var We=(0,e.fromReadonlyNonEmptyArray)(be);return We[X]=re,We};e.unsafeUpdateAt=I;var C=function(X){return function(re){if(re.length===1)return(0,e.copy)(re);for(var be=[(0,e.head)(re)],We=(0,e.tail)(re),st=function(Z){be.every(function(ce){return!X.equals(ce,Z)})&&be.push(Z)},_t=0,Dt=We;_t<Dt.length;_t++){var yn=Dt[_t];st(yn)}return be}};e.uniq=C;var k=function(X){if((0,e.isNonEmpty)(X)){var re=(0,h.getMonoid)();return(0,e.sort)(X.reduce(re.concat,re.empty))}return e.copy};e.sortBy=k;var L=function(X){var re=(0,e.uniq)(X);return function(be){return function(We){return re((0,o.pipe)(We,N(be)))}}};e.union=L;var q=function(X){return function(re){var be=re.length,We=Math.round(X)%be;if((0,e.isOutOfBound)(Math.abs(We),re)||We===0)return(0,e.copy)(re);if(We<0){var st=(0,e.splitAt)(-We)(re),_t=st[0],Dt=st[1];return(0,o.pipe)(Dt,N(_t))}else return(0,e.rotate)(We-be)(re)}};e.rotate=q,e.fromReadonlyNonEmptyArray=f.fromReadonlyNonEmptyArray;var G=function(X){return(0,e.isNonEmpty)(X)?f.some(X):f.none};e.fromArray=G;var D=function(X){return function(re){for(var be=Math.max(0,Math.floor(re)),We=[X(0)],st=1;st<be;st++)We.push(X(st));return We}};e.makeBy=D;var Y=function(X){return(0,e.makeBy)(function(){return X})};e.replicate=Y;var fe=function(X,re){return X<=re?(0,e.makeBy)(function(be){return X+be})(re-X+1):[X]};e.range=fe;var $=function(X){return[(0,e.head)(X),(0,e.tail)(X)]};e.unprepend=$;var x=function(X){return[(0,e.init)(X),(0,e.last)(X)]};e.unappend=x;function Re(X){return function(re){return re.concat(X)}}e.concatW=Re;function N(X,re){return re?X.concat(re):function(be){return be.concat(X)}}e.concat=N;var P=function(X){return i([(0,e.last)(X)],X.slice(0,-1).reverse(),!0)};e.reverse=P;function s(X){return function(re){var be=re.length;if(be===0)return[];for(var We=[],st=re[0],_t=[st],Dt=1;Dt<be;Dt++){var yn=re[Dt];X.equals(yn,st)?_t.push(yn):(We.push(_t),st=yn,_t=[st])}return We.push(_t),We}}e.group=s;var S=function(X){return function(re){for(var be={},We=0,st=re;We<st.length;We++){var _t=st[We],Dt=X(_t);f.has.call(be,Dt)?be[Dt].push(_t):be[Dt]=[_t]}return be}};e.groupBy=S;var M=function(X){return function(re){return re.slice().sort(X.compare)}};e.sort=M;var c=function(X,re){return function(be){return X<0||X>be.length?f.none:f.some((0,e.unsafeInsertAt)(X,re,be))}};e.insertAt=c;var p=function(X,re){return(0,e.modifyAt)(X,function(){return re})};e.updateAt=p;var U=function(X,re){return function(be){return(0,e.isOutOfBound)(X,be)?f.none:f.some((0,e.unsafeUpdateAt)(X,re(be[X]),be))}};e.modifyAt=U,e.copy=e.fromReadonlyNonEmptyArray;var j=function(X){return[X]};e.of=j;var ae=function(X,re,be){for(var We=[be(X[0],re[0])],st=Math.min(X.length,re.length),_t=1;_t<st;_t++)We[_t]=be(X[_t],re[_t]);return We};e.zipWith=ae;function V(X,re){return re===void 0?function(be){return V(be,X)}:(0,e.zipWith)(X,re,function(be,We){return[be,We]})}e.zip=V;var Q=function(X){for(var re=[X[0][0]],be=[X[0][1]],We=1;We<X.length;We++)re[We]=X[We][0],be[We]=X[We][1];return[re,be]};e.unzip=Q;var me=function(X){return function(re){for(var be=[X,re[0]],We=1;We<re.length;We++)be.push(X,re[We]);return be}};e.prependAll=me;var Ie=function(X){return function(re){var be=(0,e.tail)(re);return(0,e.isNonEmpty)(be)?(0,o.pipe)(be,(0,e.prependAll)(X),(0,e.prepend)((0,e.head)(re))):(0,e.copy)(re)}};e.intersperse=Ie,e.foldMapWithIndex=d.foldMapWithIndex,e.foldMap=d.foldMap;var Ee=function(X){return function(re){for(var be=(0,e.fromReadonlyNonEmptyArray)(X(0,(0,e.head)(re))),We=1;We<re.length;We++)be.push.apply(be,X(We,re[We]));return be}};e.chainWithIndex=Ee;var Ge=function(X){return function(re){for(var be=X(re),We=be[0],st=be[1],_t=[We],Dt=st;(0,e.isNonEmpty)(Dt);){var yn=X(Dt),Z=yn[0],ce=yn[1];_t.push(Z),Dt=ce}return _t}};e.chop=Ge;var Ke=function(X){return function(re){var be=Math.max(1,X);return be>=re.length?[(0,e.copy)(re),[]]:[(0,o.pipe)(re.slice(1,be),(0,e.prepend)((0,e.head)(re))),re.slice(be)]}};e.splitAt=Ke;var K=function(X){return(0,e.chop)((0,e.splitAt)(X))};e.chunksOf=K;var pe=function(X,re){return(0,o.pipe)(X,(0,e.map)(re))},De=function(X,re){return(0,o.pipe)(X,(0,e.mapWithIndex)(re))},Ze=function(X,re){return(0,o.pipe)(X,(0,e.ap)(re))},rt=function(X,re){return(0,o.pipe)(X,(0,e.extend)(re))},W=function(X,re,be){return(0,o.pipe)(X,(0,e.reduce)(re,be))},J=function(X){var re=(0,e.foldMap)(X);return function(be,We){return(0,o.pipe)(be,re(We))}},ne=function(X,re,be){return(0,o.pipe)(X,(0,e.reduceRight)(re,be))},Se=function(X){var re=(0,e.traverse)(X);return function(be,We){return(0,o.pipe)(be,re(We))}},Xe=function(X,re){return(0,o.pipe)(X,(0,e.alt)(re))},ot=function(X,re,be){return(0,o.pipe)(X,(0,e.reduceWithIndex)(re,be))},at=function(X){var re=(0,e.foldMapWithIndex)(X);return function(be,We){return(0,o.pipe)(be,re(We))}},Tt=function(X,re,be){return(0,o.pipe)(X,(0,e.reduceRightWithIndex)(re,be))},Nt=function(X){var re=(0,e.traverseWithIndex)(X);return function(be,We){return(0,o.pipe)(be,re(We))}},Wt=function(X){return function(re){return(0,o.pipe)(re,Re(X()))}};e.altW=Wt,e.alt=e.altW;var Oe=function(X){return(0,e.flatMap)(function(re){return(0,o.pipe)(X,(0,e.map)(re))})};e.ap=Oe,e.flatMap=(0,o.dual)(2,function(X,re){return(0,o.pipe)(X,(0,e.chainWithIndex)(function(be,We){return re(We,be)}))});var Pe=function(X){return function(re){for(var be=(0,e.tail)(re),We=[X(re)];(0,e.isNonEmpty)(be);)We.push(X(be)),be=(0,e.tail)(be);return We}};e.extend=Pe,e.duplicate=(0,e.extend)(o.identity),e.flatten=(0,e.flatMap)(o.identity);var Ye=function(X){return(0,e.mapWithIndex)(function(re,be){return X(be)})};e.map=Ye;var ze=function(X){return function(re){for(var be=[X(0,(0,e.head)(re))],We=1;We<re.length;We++)be.push(X(We,re[We]));return be}};e.mapWithIndex=ze,e.reduce=d.reduce,e.reduceWithIndex=d.reduceWithIndex,e.reduceRight=d.reduceRight,e.reduceRightWithIndex=d.reduceRightWithIndex;var et=function(X){var re=(0,e.traverseWithIndex)(X);return function(be){return re(function(We,st){return be(st)})}};e.traverse=et;var tt=function(X){return(0,e.traverseWithIndex)(X)(function(re,be){return be})};e.sequence=tt;var de=function(X){return function(re){return function(be){for(var We=X.map(re(0,(0,e.head)(be)),e.of),st=1;st<be.length;st++)We=X.ap(X.map(We,function(_t){return function(Dt){return(0,o.pipe)(_t,(0,e.append)(Dt))}}),re(st,be[st]));return We}}};e.traverseWithIndex=de,e.extract=d.head,e.URI="NonEmptyArray",e.getShow=d.getShow;var ue=function(){return{concat:N}};e.getSemigroup=ue,e.getEq=d.getEq;var ke=function(X){var re=(0,e.union)(X);return{concat:function(be,We){return re(We)(be)}}};e.getUnionSemigroup=ke,e.Functor={URI:e.URI,map:pe},e.flap=(0,l.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:pe,mapWithIndex:De},e.Apply={URI:e.URI,map:pe,ap:Ze},e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:pe,ap:Ze,of:e.of},e.Chain={URI:e.URI,map:pe,ap:Ze,chain:e.flatMap},e.chainFirst=(0,u.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:pe,ap:Ze,of:e.of,chain:e.flatMap},e.Foldable={URI:e.URI,reduce:W,foldMap:J,reduceRight:ne},e.FoldableWithIndex={URI:e.URI,reduce:W,foldMap:J,reduceRight:ne,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:Tt},e.Traversable={URI:e.URI,map:pe,reduce:W,foldMap:J,reduceRight:ne,traverse:Se,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:pe,mapWithIndex:De,reduce:W,foldMap:J,reduceRight:ne,traverse:Se,sequence:e.sequence,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:Tt,traverseWithIndex:Nt},e.Alt={URI:e.URI,map:pe,alt:Xe},e.Comonad={URI:e.URI,map:pe,extend:rt,extract:e.extract},e.Do=(0,e.of)(f.emptyRecord),e.bindTo=(0,l.bindTo)(e.Functor);var oe=(0,l.let)(e.Functor);e.let=oe,e.bind=(0,u.bind)(e.Chain),e.apS=(0,a.apS)(e.Apply),e.head=d.head;var Le=function(X){return X.slice(1)};e.tail=Le,e.last=d.last;var se=function(X){return X.slice(0,-1)};e.init=se,e.min=d.min,e.max=d.max;var we=function(X){return function(re){return re.reduce(X.concat)}};e.concatAll=we;var Be=function(X){return function(re){return X((0,e.head)(re),(0,e.tail)(re))}};e.matchLeft=Be;var gt=function(X){return function(re){return X((0,e.init)(re),(0,e.last)(re))}};e.matchRight=gt;var ft=function(X){return function(re){return i([X((0,e.head)(re))],(0,e.tail)(re),!0)}};e.modifyHead=ft;var ye=function(X){return(0,e.modifyHead)(function(){return X})};e.updateHead=ye;var w=function(X){return function(re){return(0,o.pipe)((0,e.init)(re),(0,e.append)(X((0,e.last)(re))))}};e.modifyLast=w;var he=function(X){return(0,e.modifyLast)(function(){return X})};e.updateLast=he,e.intercalate=d.intercalate,e.chain=e.flatMap;function _e(X){var re=(0,e.sort)(X),be=s(X);return function(We){return(0,e.isNonEmpty)(We)?be(re(We)):[]}}e.groupSort=_e;function Te(X){return(0,e.filterWithIndex)(function(re,be){return X(be)})}e.filter=Te;var Ne=function(X){return function(re){return(0,e.fromArray)(re.filter(function(be,We){return X(We,be)}))}};e.filterWithIndex=Ne,e.uncons=e.unprepend,e.unsnoc=e.unappend;function je(X,re){return re===void 0?(0,e.prepend)(X):(0,o.pipe)(re,(0,e.prepend)(X))}e.cons=je;var Qe=function(X,re){return(0,o.pipe)(X,(0,e.append)(re))};e.snoc=Qe,e.prependToAll=e.prependAll,e.fold=d.concatAll,e.nonEmptyArray={URI:e.URI,of:e.of,map:pe,mapWithIndex:De,ap:Ze,chain:e.flatMap,extend:rt,extract:e.extract,reduce:W,foldMap:J,reduceRight:ne,traverse:Se,sequence:e.sequence,reduceWithIndex:ot,foldMapWithIndex:at,reduceRightWithIndex:Tt,traverseWithIndex:Nt,alt:Xe}}}),qs=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/number.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Field=e.MonoidProduct=e.MonoidSum=e.SemigroupProduct=e.SemigroupSum=e.MagmaSub=e.Show=e.Bounded=e.Ord=e.Eq=e.isNumber=void 0;var t=function(n){return typeof n=="number"};e.isNumber=t,e.Eq={equals:function(n,r){return n===r}},e.Ord={equals:e.Eq.equals,compare:function(n,r){return n<r?-1:n>r?1:0}},e.Bounded={equals:e.Eq.equals,compare:e.Ord.compare,top:1/0,bottom:-1/0},e.Show={show:function(n){return JSON.stringify(n)}},e.MagmaSub={concat:function(n,r){return n-r}},e.SemigroupSum={concat:function(n,r){return n+r}},e.SemigroupProduct={concat:function(n,r){return n*r}},e.MonoidSum={concat:e.SemigroupSum.concat,empty:0},e.MonoidProduct={concat:e.SemigroupProduct.concat,empty:1},e.Field={add:e.SemigroupSum.concat,zero:0,mul:e.SemigroupProduct.concat,one:1,sub:e.MagmaSub.concat,degree:function(n){return 1},div:function(n,r){return n/r},mod:function(n,r){return n%r}}}}),va=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/ReadonlyArray.js"(e){var t=e&&e.__createBinding||(Object.create?function(B,H,te,Ue){Ue===void 0&&(Ue=te);var nt=Object.getOwnPropertyDescriptor(H,te);(!nt||("get"in nt?!H.__esModule:nt.writable||nt.configurable))&&(nt={enumerable:!0,get:function(){return H[te]}}),Object.defineProperty(B,Ue,nt)}:function(B,H,te,Ue){Ue===void 0&&(Ue=te),B[Ue]=H[te]}),n=e&&e.__setModuleDefault||(Object.create?function(B,H){Object.defineProperty(B,"default",{enumerable:!0,value:H})}:function(B,H){B.default=H}),r=e&&e.__importStar||function(B){if(B&&B.__esModule)return B;var H={};if(B!=null)for(var te in B)te!=="default"&&Object.prototype.hasOwnProperty.call(B,te)&&t(H,B,te);return n(H,B),H},i=e&&e.__spreadArray||function(B,H,te){if(te||arguments.length===2)for(var Ue=0,nt=H.length,lt;Ue<nt;Ue++)(lt||!(Ue in H))&&(lt||(lt=Array.prototype.slice.call(H,0,Ue)),lt[Ue]=H[Ue]);return B.concat(lt||Array.prototype.slice.call(H))};Object.defineProperty(e,"__esModule",{value:!0}),e.sort=e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.foldMap=e.reduce=e.foldMapWithIndex=e.duplicate=e.extend=e.filterWithIndex=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.compact=e.filterMap=e.filterMapWithIndex=e.filter=e.separate=e.mapWithIndex=e.map=e.flatten=e.flatMap=e.ap=e.alt=e.altW=e.zero=e.of=e._chainRecBreadthFirst=e._chainRecDepthFirst=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=void 0,e.toArray=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.Witherable=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.chainFirst=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=e.traverseWithIndex=void 0,e.readonlyArray=e.prependToAll=e.snoc=e.cons=e.range=e.chain=e.apS=e.bind=e.let=e.bindTo=e.Do=e.intercalate=e.exists=e.some=e.every=e.empty=e.fromArray=void 0;var a=Jn(),u=or(),o=jr(),l=da(),f=it(),h=On(),d=r(Wn()),_=r(qs()),R=Wr(),A=r(lu()),E=wi(),g=$i(),I=Ws(),C=function(B){return B.length===0};e.isEmpty=C,e.isNonEmpty=A.isNonEmpty,e.prepend=A.prepend,e.prependW=A.prependW,e.append=A.append,e.appendW=A.appendW;var k=function(B,H){return B<=0?e.empty:A.makeBy(H)(B)};e.makeBy=k;var L=function(B,H){return(0,e.makeBy)(B,function(){return H})};e.replicate=L;function q(B){return function(H){return B(H)?[H]:e.empty}}e.fromPredicate=q;var G=function(B){return d.isNone(B)?e.empty:[B.value]};e.fromOption=G;var D=function(B){return d.isLeft(B)?e.empty:[B.right]};e.fromEither=D;var Y=function(B,H){return function(te){return(0,e.isNonEmpty)(te)?H(te):B()}};e.matchW=Y,e.match=e.matchW;var fe=function(B,H){return function(te){return(0,e.isNonEmpty)(te)?H(A.head(te),A.tail(te)):B()}};e.matchLeftW=fe,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var $=function(B,H){return function(te){return(0,e.isNonEmpty)(te)?H(A.init(te),A.last(te)):B()}};e.matchRightW=$,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var x=function(B){return function(H){if((0,e.isEmpty)(H))return e.empty;for(var te=[],Ue=0;Ue<H.length;Ue++)te.push.apply(te,B(Ue,H[Ue]));return te}};e.chainWithIndex=x;var Re=function(B,H){return function(te){var Ue=te.length,nt=new Array(Ue+1);nt[0]=B;for(var lt=0;lt<Ue;lt++)nt[lt+1]=H(nt[lt],te[lt]);return nt}};e.scanLeft=Re;var N=function(B,H){return function(te){var Ue=te.length,nt=new Array(Ue+1);nt[Ue]=B;for(var lt=Ue-1;lt>=0;lt--)nt[lt]=H(te[lt],nt[lt+1]);return nt}};e.scanRight=N;var P=function(B){return B.length};e.size=P,e.isOutOfBound=A.isOutOfBound;function s(B,H){return H===void 0?function(te){return s(B,te)}:(0,e.isOutOfBound)(B,H)?d.none:d.some(H[B])}e.lookup=s;var S=function(B){return(0,e.isNonEmpty)(B)?d.some(A.head(B)):d.none};e.head=S;var M=function(B){return(0,e.isNonEmpty)(B)?d.some(A.last(B)):d.none};e.last=M;var c=function(B){return(0,e.isNonEmpty)(B)?d.some(A.tail(B)):d.none};e.tail=c;var p=function(B){return(0,e.isNonEmpty)(B)?d.some(A.init(B)):d.none};e.init=p;var U=function(B){return function(H){return(0,e.isOutOfBound)(B,H)?H:B===0?e.empty:H.slice(0,B)}};e.takeLeft=U;var j=function(B){return function(H){return(0,e.isOutOfBound)(B,H)?H:B===0?e.empty:H.slice(-B)}};e.takeRight=j;function ae(B){return function(H){for(var te=[],Ue=0,nt=H;Ue<nt.length;Ue++){var lt=nt[Ue];if(!B(lt))break;te.push(lt)}var Ln=te.length;return Ln===H.length?H:Ln===0?e.empty:te}}e.takeLeftWhile=ae;var V=function(B,H){for(var te=B.length,Ue=0;Ue<te&&H(B[Ue]);Ue++);return Ue};function Q(B){return function(H){var te=(0,e.splitAt)(V(H,B))(H),Ue=te[0],nt=te[1];return{init:Ue,rest:nt}}}e.spanLeft=Q;var me=function(B){return function(H){return B<=0||(0,e.isEmpty)(H)?H:B>=H.length?e.empty:H.slice(B,H.length)}};e.dropLeft=me;var Ie=function(B){return function(H){return B<=0||(0,e.isEmpty)(H)?H:B>=H.length?e.empty:H.slice(0,H.length-B)}};e.dropRight=Ie;function Ee(B){return function(H){var te=V(H,B);return te===0?H:te===H.length?e.empty:H.slice(te)}}e.dropLeftWhile=Ee;var Ge=function(B){return function(H){for(var te=0;te<H.length;te++)if(B(H[te]))return d.some(te);return d.none}};e.findIndex=Ge;function Ke(B){return function(H){for(var te=0;te<H.length;te++)if(B(H[te]))return d.some(H[te]);return d.none}}e.findFirst=Ke;var K=function(B){return function(H){for(var te=0;te<H.length;te++){var Ue=B(H[te]);if(d.isSome(Ue))return Ue}return d.none}};e.findFirstMap=K;function pe(B){return function(H){for(var te=H.length-1;te>=0;te--)if(B(H[te]))return d.some(H[te]);return d.none}}e.findLast=pe;var De=function(B){return function(H){for(var te=H.length-1;te>=0;te--){var Ue=B(H[te]);if(d.isSome(Ue))return Ue}return d.none}};e.findLastMap=De;var Ze=function(B){return function(H){for(var te=H.length-1;te>=0;te--)if(B(H[te]))return d.some(te);return d.none}};e.findLastIndex=Ze;var rt=function(B,H){return function(te){return B<0||B>te.length?d.none:d.some(A.unsafeInsertAt(B,H,te))}};e.insertAt=rt;var W=function(B,H){return(0,e.modifyAt)(B,function(){return H})};e.updateAt=W;var J=function(B){return function(H){return(0,e.isOutOfBound)(B,H)?d.none:d.some((0,e.unsafeDeleteAt)(B,H))}};e.deleteAt=J;var ne=function(B,H){return function(te){return(0,e.isOutOfBound)(B,te)?d.none:d.some((0,e.unsafeUpdateAt)(B,H(te[B]),te))}};e.modifyAt=ne;var Se=function(B){return B.length<=1?B:B.slice().reverse()};e.reverse=Se;var Xe=function(B){for(var H=[],te=0;te<B.length;te++){var Ue=B[te];Ue._tag==="Right"&&H.push(Ue.right)}return H};e.rights=Xe;var ot=function(B){for(var H=[],te=0;te<B.length;te++){var Ue=B[te];Ue._tag==="Left"&&H.push(Ue.left)}return H};e.lefts=ot;var at=function(B){return function(H){return H.length<=1?H:H.slice().sort(B.compare)}};e.sort=at;var Tt=function(B,H,te){for(var Ue=[],nt=Math.min(B.length,H.length),lt=0;lt<nt;lt++)Ue[lt]=te(B[lt],H[lt]);return Ue};e.zipWith=Tt;function Nt(B,H){return H===void 0?function(te){return Nt(te,B)}:(0,e.zipWith)(B,H,function(te,Ue){return[te,Ue]})}e.zip=Nt;var Wt=function(B){for(var H=[],te=[],Ue=0;Ue<B.length;Ue++)H[Ue]=B[Ue][0],te[Ue]=B[Ue][1];return[H,te]};e.unzip=Wt;var Oe=function(B){var H=A.prependAll(B);return function(te){return(0,e.isNonEmpty)(te)?H(te):te}};e.prependAll=Oe;var Pe=function(B){var H=A.intersperse(B);return function(te){return(0,e.isNonEmpty)(te)?H(te):te}};e.intersperse=Pe;var Ye=function(B){var H=A.rotate(B);return function(te){return(0,e.isNonEmpty)(te)?H(te):te}};e.rotate=Ye;function ze(B){return function(H,te){if(te===void 0){var Ue=ze(B);return function(Ln){return Ue(H,Ln)}}for(var nt=function(Ln){return B.equals(Ln,H)},lt=0;lt<te.length;lt++)if(nt(te[lt]))return!0;return!1}}e.elem=ze;var et=function(B){var H=A.uniq(B);return function(te){return(0,e.isNonEmpty)(te)?H(te):te}};e.uniq=et;var tt=function(B){var H=A.sortBy(B);return function(te){return(0,e.isNonEmpty)(te)?H(te):te}};e.sortBy=tt;var de=function(B){var H=A.chop(B);return function(te){return(0,e.isNonEmpty)(te)?H(te):e.empty}};e.chop=de;var ue=function(B){return function(H){return B>=1&&(0,e.isNonEmpty)(H)?A.splitAt(B)(H):(0,e.isEmpty)(H)?[H,e.empty]:[e.empty,H]}};e.splitAt=ue;var ke=function(B){var H=A.chunksOf(B);return function(te){return(0,e.isNonEmpty)(te)?H(te):e.empty}};e.chunksOf=ke;var oe=function(B){return function(){for(var H=[],te=0;te<arguments.length;te++)H[te]=arguments[te];return(0,e.fromOption)(B.apply(void 0,H))}};e.fromOptionK=oe;function Le(B,H,te){te===void 0&&(te=function(){return!0});var Ue=function(nt,lt){return(0,e.isNonEmpty)(lt)?(0,e.flatMap)(A.head(lt),function(Ln){return Ue((0,f.pipe)(nt,(0,e.append)(Ln)),A.tail(lt))}):te.apply(void 0,nt)?[H.apply(void 0,nt)]:e.empty};return Ue(e.empty,B)}e.comprehension=Le;var se=function(B){return function(H){return(0,e.isEmpty)(H)?B:(0,e.isEmpty)(B)?H:H.concat(B)}};e.concatW=se,e.concat=e.concatW;function we(B){var H=A.union(B);return function(te,Ue){if(Ue===void 0){var nt=we(B);return function(lt){return nt(lt,te)}}return(0,e.isNonEmpty)(te)&&(0,e.isNonEmpty)(Ue)?H(Ue)(te):(0,e.isNonEmpty)(te)?te:Ue}}e.union=we;function Be(B){var H=ze(B);return function(te,Ue){if(Ue===void 0){var nt=Be(B);return function(lt){return nt(lt,te)}}return te.filter(function(lt){return H(lt,Ue)})}}e.intersection=Be;function gt(B){var H=ze(B);return function(te,Ue){if(Ue===void 0){var nt=gt(B);return function(lt){return nt(lt,te)}}return te.filter(function(lt){return!H(lt,Ue)})}}e.difference=gt;var ft=function(B,H){return(0,f.pipe)(B,(0,e.map)(H))},ye=function(B,H){return(0,f.pipe)(B,(0,e.mapWithIndex)(H))},w=function(B,H){return(0,f.pipe)(B,(0,e.ap)(H))},he=function(B,H){return(0,f.pipe)(B,(0,e.filter)(H))},_e=function(B,H){return(0,f.pipe)(B,(0,e.filterMap)(H))},Te=function(B,H){return(0,f.pipe)(B,(0,e.partition)(H))},Ne=function(B,H){return(0,f.pipe)(B,(0,e.partitionMap)(H))},je=function(B,H){return(0,f.pipe)(B,(0,e.partitionWithIndex)(H))},Qe=function(B,H){return(0,f.pipe)(B,(0,e.partitionMapWithIndex)(H))},X=function(B,H){return(0,f.pipe)(B,(0,e.alt)(H))},re=function(B,H,te){return(0,f.pipe)(B,(0,e.reduce)(H,te))},be=function(B){var H=(0,e.foldMap)(B);return function(te,Ue){return(0,f.pipe)(te,H(Ue))}},We=function(B,H,te){return(0,f.pipe)(B,(0,e.reduceRight)(H,te))},st=function(B,H,te){return(0,f.pipe)(B,(0,e.reduceWithIndex)(H,te))},_t=function(B){var H=(0,e.foldMapWithIndex)(B);return function(te,Ue){return(0,f.pipe)(te,H(Ue))}},Dt=function(B,H,te){return(0,f.pipe)(B,(0,e.reduceRightWithIndex)(H,te))},yn=function(B,H){return(0,f.pipe)(B,(0,e.filterMapWithIndex)(H))},Z=function(B,H){return(0,f.pipe)(B,(0,e.filterWithIndex)(H))},ce=function(B,H){return(0,f.pipe)(B,(0,e.extend)(H))},b=function(B){var H=(0,e.traverse)(B);return function(te,Ue){return(0,f.pipe)(te,H(Ue))}},v=function(B){var H=(0,e.traverseWithIndex)(B);return function(te,Ue){return(0,f.pipe)(te,H(Ue))}},y=function(B,H){return(0,f.pipe)(B,(0,e.chainRecDepthFirst)(H))};e._chainRecDepthFirst=y;var O=function(B,H){return(0,f.pipe)(B,(0,e.chainRecBreadthFirst)(H))};e._chainRecBreadthFirst=O,e.of=A.of;var z=function(){return e.empty};e.zero=z;var ve=function(B){return function(H){return H.concat(B())}};e.altW=ve,e.alt=e.altW;var ie=function(B){return(0,e.flatMap)(function(H){return(0,f.pipe)(B,(0,e.map)(H))})};e.ap=ie,e.flatMap=(0,f.dual)(2,function(B,H){return(0,f.pipe)(B,(0,e.chainWithIndex)(function(te,Ue){return H(Ue,te)}))}),e.flatten=(0,e.flatMap)(f.identity);var F=function(B){return function(H){return H.map(function(te){return B(te)})}};e.map=F;var ge=function(B){return function(H){return H.map(function(te,Ue){return B(Ue,te)})}};e.mapWithIndex=ge;var qe=function(B){for(var H=[],te=[],Ue=0,nt=B;Ue<nt.length;Ue++){var lt=nt[Ue];lt._tag==="Left"?H.push(lt.left):te.push(lt.right)}return(0,E.separated)(H,te)};e.separate=qe;var ct=function(B){return function(H){return H.filter(B)}};e.filter=ct;var vt=function(B){return function(H){for(var te=[],Ue=0;Ue<H.length;Ue++){var nt=B(Ue,H[Ue]);d.isSome(nt)&&te.push(nt.value)}return te}};e.filterMapWithIndex=vt;var yt=function(B){return(0,e.filterMapWithIndex)(function(H,te){return B(te)})};e.filterMap=yt,e.compact=(0,e.filterMap)(f.identity);var Lt=function(B){return(0,e.partitionWithIndex)(function(H,te){return B(te)})};e.partition=Lt;var sn=function(B){return function(H){for(var te=[],Ue=[],nt=0;nt<H.length;nt++){var lt=H[nt];B(nt,lt)?Ue.push(lt):te.push(lt)}return(0,E.separated)(te,Ue)}};e.partitionWithIndex=sn;var cn=function(B){return(0,e.partitionMapWithIndex)(function(H,te){return B(te)})};e.partitionMap=cn;var Yt=function(B){return function(H){for(var te=[],Ue=[],nt=0;nt<H.length;nt++){var lt=B(nt,H[nt]);lt._tag==="Left"?te.push(lt.left):Ue.push(lt.right)}return(0,E.separated)(te,Ue)}};e.partitionMapWithIndex=Yt;var pa=function(B){return function(H){return H.filter(function(te,Ue){return B(Ue,te)})}};e.filterWithIndex=pa;var _a=function(B){return function(H){return H.map(function(te,Ue){return B(H.slice(Ue))})}};e.extend=_a,e.duplicate=(0,e.extend)(f.identity);var pl=function(B){return function(H){return function(te){return te.reduce(function(Ue,nt,lt){return B.concat(Ue,H(lt,nt))},B.empty)}}};e.foldMapWithIndex=pl;var _l=function(B,H){return(0,e.reduceWithIndex)(B,function(te,Ue,nt){return H(Ue,nt)})};e.reduce=_l;var vu=function(B){var H=(0,e.foldMapWithIndex)(B);return function(te){return H(function(Ue,nt){return te(nt)})}};e.foldMap=vu;var mu=function(B,H){return function(te){for(var Ue=te.length,nt=B,lt=0;lt<Ue;lt++)nt=H(lt,nt,te[lt]);return nt}};e.reduceWithIndex=mu;var yl=function(B,H){return(0,e.reduceRightWithIndex)(B,function(te,Ue,nt){return H(Ue,nt)})};e.reduceRight=yl;var bl=function(B,H){return function(te){return te.reduceRight(function(Ue,nt,lt){return H(lt,nt,Ue)},B)}};e.reduceRightWithIndex=bl;var Il=function(B){var H=(0,e.traverseWithIndex)(B);return function(te){return H(function(Ue,nt){return te(nt)})}};e.traverse=Il;var Sl=function(B){return function(H){return re(H,B.of((0,e.zero)()),function(te,Ue){return B.ap(B.map(te,function(nt){return function(lt){return(0,f.pipe)(nt,(0,e.append)(lt))}}),Ue)})}};e.sequence=Sl;var ee=function(B){return function(H){return(0,e.reduceWithIndex)(B.of((0,e.zero)()),function(te,Ue,nt){return B.ap(B.map(Ue,function(lt){return function(Ln){return(0,f.pipe)(lt,(0,e.append)(Ln))}}),H(te,nt))})}};e.traverseWithIndex=ee;var le=function(B){var H=El(B);return function(te){return function(Ue){return H(Ue,te)}}};e.wither=le;var Ce=function(B){var H=Rl(B);return function(te){return function(Ue){return H(Ue,te)}}};e.wilt=Ce;var Je=function(B,H){for(var te=[],Ue=B;;){var nt=H(Ue);if(d.isSome(nt)){var lt=nt.value,Ln=lt[0],Xi=lt[1];te.push(Ln),Ue=Xi}else break}return te};e.unfold=Je,e.URI="ReadonlyArray";var It=function(B){return{show:function(H){return"[".concat(H.map(B.show).join(", "),"]")}}};e.getShow=It;var Rt=function(){return{concat:function(B,H){return(0,e.isEmpty)(B)?H:(0,e.isEmpty)(H)?B:B.concat(H)}}};e.getSemigroup=Rt;var Qi=function(){return{concat:(0,e.getSemigroup)().concat,empty:e.empty}};e.getMonoid=Qi;var Al=function(B){return(0,o.fromEquals)(function(H,te){return H.length===te.length&&H.every(function(Ue,nt){return B.equals(Ue,te[nt])})})};e.getEq=Al;var G0=function(B){return(0,R.fromCompare)(function(H,te){for(var Ue=H.length,nt=te.length,lt=Math.min(Ue,nt),Ln=0;Ln<lt;Ln++){var Xi=B.compare(H[Ln],te[Ln]);if(Xi!==0)return Xi}return _.Ord.compare(Ue,nt)})};e.getOrd=G0;var H0=function(B){var H=we(B);return{concat:function(te,Ue){return H(Ue)(te)}}};e.getUnionSemigroup=H0;var z0=function(B){return{concat:(0,e.getUnionSemigroup)(B).concat,empty:e.empty}};e.getUnionMonoid=z0;var V0=function(B){var H=Be(B);return{concat:function(te,Ue){return H(Ue)(te)}}};e.getIntersectionSemigroup=V0;var K0=function(B){var H=gt(B);return{concat:function(te,Ue){return H(Ue)(te)}}};e.getDifferenceMagma=K0,e.Functor={URI:e.URI,map:ft},e.flap=(0,h.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:ft,mapWithIndex:ye},e.Apply={URI:e.URI,map:ft,ap:w},e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:ft,ap:w,of:e.of},e.Chain={URI:e.URI,map:ft,ap:w,chain:e.flatMap},e.Monad={URI:e.URI,map:ft,ap:w,of:e.of,chain:e.flatMap},e.chainFirst=(0,u.chainFirst)(e.Chain),e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:ft,alt:X},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,I.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:ft,ap:w,of:e.of,alt:X,zero:e.zero},e.Extend={URI:e.URI,map:ft,extend:ce},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:ft,compact:e.compact,separate:e.separate,filter:he,filterMap:_e,partition:Te,partitionMap:Ne},e.FilterableWithIndex={URI:e.URI,map:ft,mapWithIndex:ye,compact:e.compact,separate:e.separate,filter:he,filterMap:_e,partition:Te,partitionMap:Ne,partitionMapWithIndex:Qe,partitionWithIndex:je,filterMapWithIndex:yn,filterWithIndex:Z},e.Foldable={URI:e.URI,reduce:re,foldMap:be,reduceRight:We},e.FoldableWithIndex={URI:e.URI,reduce:re,foldMap:be,reduceRight:We,reduceWithIndex:st,foldMapWithIndex:_t,reduceRightWithIndex:Dt},e.Traversable={URI:e.URI,map:ft,reduce:re,foldMap:be,reduceRight:We,traverse:b,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:ft,mapWithIndex:ye,reduce:re,foldMap:be,reduceRight:We,reduceWithIndex:st,foldMapWithIndex:_t,reduceRightWithIndex:Dt,traverse:b,sequence:e.sequence,traverseWithIndex:v};var $0=function(B){return function(H){for(var te=i([],B(H),!0),Ue=[];te.length>0;){var nt=te.shift();d.isLeft(nt)?te.unshift.apply(te,B(nt.left)):Ue.push(nt.right)}return Ue}};e.chainRecDepthFirst=$0,e.ChainRecDepthFirst={URI:e.URI,map:ft,ap:w,chain:e.flatMap,chainRec:e._chainRecDepthFirst};var Y0=function(B){return function(H){var te=B(H),Ue=[],nt=[];function lt(wl){d.isLeft(wl)?B(wl.left).forEach(function(ib){return Ue.push(ib)}):nt.push(wl.right)}for(var Ln=0,Xi=te;Ln<Xi.length;Ln++){var rb=Xi[Ln];lt(rb)}for(;Ue.length>0;)lt(Ue.shift());return nt}};e.chainRecBreadthFirst=Y0,e.ChainRecBreadthFirst={URI:e.URI,map:ft,ap:w,chain:e.flatMap,chainRec:e._chainRecBreadthFirst};var El=(0,g.witherDefault)(e.Traversable,e.Compactable),Rl=(0,g.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:ft,compact:e.compact,separate:e.separate,filter:he,filterMap:_e,partition:Te,partitionMap:Ne,reduce:re,foldMap:be,reduceRight:We,traverse:b,sequence:e.sequence,wither:El,wilt:Rl},e.filterE=(0,g.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,l.fromEitherK)(e.FromEither),e.unsafeInsertAt=A.unsafeInsertAt;var J0=function(B,H,te){return(0,e.isNonEmpty)(te)?A.unsafeUpdateAt(B,H,te):te};e.unsafeUpdateAt=J0;var Q0=function(B,H){var te=H.slice();return te.splice(B,1),te};e.unsafeDeleteAt=Q0;var X0=function(B){return B.slice()};e.toArray=X0;var Z0=function(B){return(0,e.isEmpty)(B)?e.empty:B.slice()};e.fromArray=Z0,e.empty=A.empty;function x0(B){return function(H){return H.every(B)}}e.every=x0;var eb=function(B){return function(H){return H.some(B)}};e.some=eb,e.exists=e.some;var tb=function(B){var H=A.intercalate(B);return function(te){return(0,e.match)(function(){return B.empty},H(te))}};e.intercalate=tb,e.Do=(0,e.of)(d.emptyRecord),e.bindTo=(0,h.bindTo)(e.Functor);var nb=(0,h.let)(e.Functor);e.let=nb,e.bind=(0,u.bind)(e.Chain),e.apS=(0,a.apS)(e.Apply),e.chain=e.flatMap,e.range=A.range,e.cons=A.cons,e.snoc=A.snoc,e.prependToAll=e.prependAll,e.readonlyArray={URI:e.URI,compact:e.compact,separate:e.separate,map:ft,ap:w,of:e.of,chain:e.flatMap,filter:he,filterMap:_e,partition:Te,partitionMap:Ne,mapWithIndex:ye,partitionMapWithIndex:Qe,partitionWithIndex:je,filterMapWithIndex:yn,filterWithIndex:Z,alt:X,zero:e.zero,unfold:e.unfold,reduce:re,foldMap:be,reduceRight:We,traverse:b,sequence:e.sequence,reduceWithIndex:st,foldMapWithIndex:_t,reduceRightWithIndex:Dt,traverseWithIndex:v,extend:ce,wither:El,wilt:Rl}}}),ui=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Array.js"(e){var t=e&&e.__createBinding||(Object.create?function(ee,le,Ce,Je){Je===void 0&&(Je=Ce);var It=Object.getOwnPropertyDescriptor(le,Ce);(!It||("get"in It?!le.__esModule:It.writable||It.configurable))&&(It={enumerable:!0,get:function(){return le[Ce]}}),Object.defineProperty(ee,Je,It)}:function(ee,le,Ce,Je){Je===void 0&&(Je=Ce),ee[Je]=le[Ce]}),n=e&&e.__setModuleDefault||(Object.create?function(ee,le){Object.defineProperty(ee,"default",{enumerable:!0,value:le})}:function(ee,le){ee.default=le}),r=e&&e.__importStar||function(ee){if(ee&&ee.__esModule)return ee;var le={};if(ee!=null)for(var Ce in ee)Ce!=="default"&&Object.prototype.hasOwnProperty.call(ee,Ce)&&t(le,ee,Ce);return n(le,ee),le};Object.defineProperty(e,"__esModule",{value:!0}),e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.copy=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=e.foldMapWithIndex=e.foldMap=e.duplicate=e.extend=e.filterWithIndex=e.alt=e.altW=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.filter=e.separate=e.compact=e.filterMap=e.filterMapWithIndex=e.mapWithIndex=e.flatten=e.flatMap=e.ap=e.map=e.zero=e.of=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.sort=void 0,e.some=e.every=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=void 0,e.array=e.prependToAll=e.snoc=e.cons=e.empty=e.range=e.chain=e.apS=e.bind=e.let=e.bindTo=e.Do=e.intercalate=e.exists=void 0;var i=Jn(),a=or(),u=da(),o=it(),l=On(),f=r(Wn()),h=r(ha()),d=r(va()),_=wi(),R=$i(),A=Ws(),E=function(ee){return ee.length===0};e.isEmpty=E,e.isNonEmpty=h.isNonEmpty,e.prepend=h.prepend,e.prependW=h.prependW,e.append=h.append,e.appendW=h.appendW;var g=function(ee,le){return ee<=0?[]:h.makeBy(le)(ee)};e.makeBy=g;var I=function(ee,le){return(0,e.makeBy)(ee,function(){return le})};e.replicate=I;function C(ee){return function(le){return ee(le)?[le]:[]}}e.fromPredicate=C;var k=function(ee){return f.isNone(ee)?[]:[ee.value]};e.fromOption=k;var L=function(ee){return f.isLeft(ee)?[]:[ee.right]};e.fromEither=L;var q=function(ee,le){return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):ee()}};e.matchW=q,e.match=e.matchW;var G=function(ee,le){return function(Ce){return(0,e.isNonEmpty)(Ce)?le(h.head(Ce),h.tail(Ce)):ee()}};e.matchLeftW=G,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var D=function(ee,le){return function(Ce){return(0,e.isNonEmpty)(Ce)?le(h.init(Ce),h.last(Ce)):ee()}};e.matchRightW=D,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var Y=function(ee){return function(le){for(var Ce=[],Je=0;Je<le.length;Je++)Ce.push.apply(Ce,ee(Je,le[Je]));return Ce}};e.chainWithIndex=Y;var fe=function(ee,le){return function(Ce){var Je=Ce.length,It=new Array(Je+1);It[0]=ee;for(var Rt=0;Rt<Je;Rt++)It[Rt+1]=le(It[Rt],Ce[Rt]);return It}};e.scanLeft=fe;var $=function(ee,le){return function(Ce){var Je=Ce.length,It=new Array(Je+1);It[Je]=ee;for(var Rt=Je-1;Rt>=0;Rt--)It[Rt]=le(Ce[Rt],It[Rt+1]);return It}};e.scanRight=$;var x=function(ee){return ee.length};e.size=x,e.isOutOfBound=h.isOutOfBound,e.lookup=d.lookup,e.head=d.head,e.last=d.last;var Re=function(ee){return(0,e.isNonEmpty)(ee)?f.some(h.tail(ee)):f.none};e.tail=Re;var N=function(ee){return(0,e.isNonEmpty)(ee)?f.some(h.init(ee)):f.none};e.init=N;var P=function(ee){return function(le){return(0,e.isOutOfBound)(ee,le)?(0,e.copy)(le):le.slice(0,ee)}};e.takeLeft=P;var s=function(ee){return function(le){return(0,e.isOutOfBound)(ee,le)?(0,e.copy)(le):ee===0?[]:le.slice(-ee)}};e.takeRight=s;function S(ee){return function(le){for(var Ce=[],Je=0,It=le;Je<It.length;Je++){var Rt=It[Je];if(!ee(Rt))break;Ce.push(Rt)}return Ce}}e.takeLeftWhile=S;var M=function(ee,le){for(var Ce=ee.length,Je=0;Je<Ce&&le(ee[Je]);Je++);return Je};function c(ee){return function(le){var Ce=(0,e.splitAt)(M(le,ee))(le),Je=Ce[0],It=Ce[1];return{init:Je,rest:It}}}e.spanLeft=c;var p=function(ee){return function(le){return ee<=0||(0,e.isEmpty)(le)?(0,e.copy)(le):ee>=le.length?[]:le.slice(ee,le.length)}};e.dropLeft=p;var U=function(ee){return function(le){return ee<=0||(0,e.isEmpty)(le)?(0,e.copy)(le):ee>=le.length?[]:le.slice(0,le.length-ee)}};e.dropRight=U;function j(ee){return function(le){return le.slice(M(le,ee))}}e.dropLeftWhile=j,e.findIndex=d.findIndex;function ae(ee){return d.findFirst(ee)}e.findFirst=ae,e.findFirstMap=d.findFirstMap;function V(ee){return d.findLast(ee)}e.findLast=V,e.findLastMap=d.findLastMap,e.findLastIndex=d.findLastIndex;var Q=function(ee){return ee.slice()};e.copy=Q;var me=function(ee,le){return function(Ce){return ee<0||ee>Ce.length?f.none:f.some((0,e.unsafeInsertAt)(ee,le,Ce))}};e.insertAt=me;var Ie=function(ee,le){return(0,e.modifyAt)(ee,function(){return le})};e.updateAt=Ie;var Ee=function(ee){return function(le){return(0,e.isOutOfBound)(ee,le)?f.none:f.some((0,e.unsafeDeleteAt)(ee,le))}};e.deleteAt=Ee;var Ge=function(ee,le){return function(Ce){return(0,e.isOutOfBound)(ee,Ce)?f.none:f.some((0,e.unsafeUpdateAt)(ee,le(Ce[ee]),Ce))}};e.modifyAt=Ge;var Ke=function(ee){return(0,e.isEmpty)(ee)?[]:ee.slice().reverse()};e.reverse=Ke;var K=function(ee){for(var le=[],Ce=0;Ce<ee.length;Ce++){var Je=ee[Ce];Je._tag==="Right"&&le.push(Je.right)}return le};e.rights=K;var pe=function(ee){for(var le=[],Ce=0;Ce<ee.length;Ce++){var Je=ee[Ce];Je._tag==="Left"&&le.push(Je.left)}return le};e.lefts=pe;var De=function(ee){return function(le){return le.length<=1?(0,e.copy)(le):le.slice().sort(ee.compare)}};e.sort=De;var Ze=function(ee,le,Ce){for(var Je=[],It=Math.min(ee.length,le.length),Rt=0;Rt<It;Rt++)Je[Rt]=Ce(ee[Rt],le[Rt]);return Je};e.zipWith=Ze;function rt(ee,le){return le===void 0?function(Ce){return rt(Ce,ee)}:(0,e.zipWith)(ee,le,function(Ce,Je){return[Ce,Je]})}e.zip=rt;var W=function(ee){for(var le=[],Ce=[],Je=0;Je<ee.length;Je++)le[Je]=ee[Je][0],Ce[Je]=ee[Je][1];return[le,Ce]};e.unzip=W;var J=function(ee){var le=h.prependAll(ee);return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):[]}};e.prependAll=J;var ne=function(ee){var le=h.intersperse(ee);return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):(0,e.copy)(Ce)}};e.intersperse=ne;var Se=function(ee){var le=h.rotate(ee);return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):(0,e.copy)(Ce)}};e.rotate=Se,e.elem=d.elem;var Xe=function(ee){var le=h.uniq(ee);return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):(0,e.copy)(Ce)}};e.uniq=Xe;var ot=function(ee){var le=h.sortBy(ee);return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):(0,e.copy)(Ce)}};e.sortBy=ot;var at=function(ee){var le=h.chop(ee);return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):[]}};e.chop=at;var Tt=function(ee){return function(le){return ee>=1&&(0,e.isNonEmpty)(le)?h.splitAt(ee)(le):(0,e.isEmpty)(le)?[(0,e.copy)(le),[]]:[[],(0,e.copy)(le)]}};e.splitAt=Tt;var Nt=function(ee){var le=h.chunksOf(ee);return function(Ce){return(0,e.isNonEmpty)(Ce)?le(Ce):[]}};e.chunksOf=Nt;var Wt=function(ee){return function(){for(var le=[],Ce=0;Ce<arguments.length;Ce++)le[Ce]=arguments[Ce];return(0,e.fromOption)(ee.apply(void 0,le))}};e.fromOptionK=Wt;function Oe(ee,le,Ce){Ce===void 0&&(Ce=function(){return!0});var Je=function(It,Rt){return(0,e.isNonEmpty)(Rt)?(0,e.flatMap)(h.head(Rt),function(Qi){return Je((0,o.pipe)(It,(0,e.append)(Qi)),h.tail(Rt))}):Ce.apply(void 0,It)?[le.apply(void 0,It)]:[]};return Je([],ee)}e.comprehension=Oe;var Pe=function(ee){return function(le){return(0,e.isEmpty)(le)?(0,e.copy)(ee):(0,e.isEmpty)(ee)?(0,e.copy)(le):le.concat(ee)}};e.concatW=Pe,e.concat=e.concatW;function Ye(ee){var le=h.union(ee);return function(Ce,Je){if(Je===void 0){var It=Ye(ee);return function(Rt){return It(Rt,Ce)}}return(0,e.isNonEmpty)(Ce)&&(0,e.isNonEmpty)(Je)?le(Je)(Ce):(0,e.isNonEmpty)(Ce)?(0,e.copy)(Ce):(0,e.copy)(Je)}}e.union=Ye;function ze(ee){var le=(0,e.elem)(ee);return function(Ce,Je){if(Je===void 0){var It=ze(ee);return function(Rt){return It(Rt,Ce)}}return Ce.filter(function(Rt){return le(Rt,Je)})}}e.intersection=ze;function et(ee){var le=(0,e.elem)(ee);return function(Ce,Je){if(Je===void 0){var It=et(ee);return function(Rt){return It(Rt,Ce)}}return Ce.filter(function(Rt){return!le(Rt,Je)})}}e.difference=et;var tt=function(ee,le){return(0,o.pipe)(ee,(0,e.map)(le))},de=function(ee,le){return(0,o.pipe)(ee,(0,e.mapWithIndex)(le))},ue=function(ee,le){return(0,o.pipe)(ee,(0,e.ap)(le))},ke=function(ee,le){return(0,o.pipe)(ee,(0,e.filter)(le))},oe=function(ee,le){return(0,o.pipe)(ee,(0,e.filterMap)(le))},Le=function(ee,le){return(0,o.pipe)(ee,(0,e.partition)(le))},se=function(ee,le){return(0,o.pipe)(ee,(0,e.partitionMap)(le))},we=function(ee,le){return(0,o.pipe)(ee,(0,e.partitionWithIndex)(le))},Be=function(ee,le){return(0,o.pipe)(ee,(0,e.partitionMapWithIndex)(le))},gt=function(ee,le){return(0,o.pipe)(ee,(0,e.alt)(le))},ft=function(ee,le,Ce){return(0,o.pipe)(ee,(0,e.reduce)(le,Ce))},ye=function(ee){var le=(0,e.foldMap)(ee);return function(Ce,Je){return(0,o.pipe)(Ce,le(Je))}},w=function(ee,le,Ce){return(0,o.pipe)(ee,(0,e.reduceRight)(le,Ce))},he=function(ee,le,Ce){return(0,o.pipe)(ee,(0,e.reduceWithIndex)(le,Ce))},_e=function(ee){var le=(0,e.foldMapWithIndex)(ee);return function(Ce,Je){return(0,o.pipe)(Ce,le(Je))}},Te=function(ee,le,Ce){return(0,o.pipe)(ee,(0,e.reduceRightWithIndex)(le,Ce))},Ne=function(ee,le){return(0,o.pipe)(ee,(0,e.filterMapWithIndex)(le))},je=function(ee,le){return(0,o.pipe)(ee,(0,e.filterWithIndex)(le))},Qe=function(ee,le){return(0,o.pipe)(ee,(0,e.extend)(le))},X=function(ee){var le=(0,e.traverse)(ee);return function(Ce,Je){return(0,o.pipe)(Ce,le(Je))}},re=function(ee){var le=(0,e.traverseWithIndex)(ee);return function(Ce,Je){return(0,o.pipe)(Ce,le(Je))}},be=d._chainRecDepthFirst,We=d._chainRecBreadthFirst;e.of=h.of;var st=function(){return[]};e.zero=st;var _t=function(ee){return function(le){return le.map(function(Ce){return ee(Ce)})}};e.map=_t;var Dt=function(ee){return(0,e.flatMap)(function(le){return(0,o.pipe)(ee,(0,e.map)(le))})};e.ap=Dt,e.flatMap=(0,o.dual)(2,function(ee,le){return(0,o.pipe)(ee,(0,e.chainWithIndex)(function(Ce,Je){return le(Je,Ce)}))}),e.flatten=(0,e.flatMap)(o.identity);var yn=function(ee){return function(le){return le.map(function(Ce,Je){return ee(Je,Ce)})}};e.mapWithIndex=yn;var Z=function(ee){return function(le){for(var Ce=[],Je=0;Je<le.length;Je++){var It=ee(Je,le[Je]);f.isSome(It)&&Ce.push(It.value)}return Ce}};e.filterMapWithIndex=Z;var ce=function(ee){return(0,e.filterMapWithIndex)(function(le,Ce){return ee(Ce)})};e.filterMap=ce,e.compact=(0,e.filterMap)(o.identity);var b=function(ee){for(var le=[],Ce=[],Je=0,It=ee;Je<It.length;Je++){var Rt=It[Je];Rt._tag==="Left"?le.push(Rt.left):Ce.push(Rt.right)}return(0,_.separated)(le,Ce)};e.separate=b;var v=function(ee){return function(le){return le.filter(ee)}};e.filter=v;var y=function(ee){return(0,e.partitionWithIndex)(function(le,Ce){return ee(Ce)})};e.partition=y;var O=function(ee){return function(le){for(var Ce=[],Je=[],It=0;It<le.length;It++){var Rt=le[It];ee(It,Rt)?Je.push(Rt):Ce.push(Rt)}return(0,_.separated)(Ce,Je)}};e.partitionWithIndex=O;var z=function(ee){return(0,e.partitionMapWithIndex)(function(le,Ce){return ee(Ce)})};e.partitionMap=z;var ve=function(ee){return function(le){for(var Ce=[],Je=[],It=0;It<le.length;It++){var Rt=ee(It,le[It]);Rt._tag==="Left"?Ce.push(Rt.left):Je.push(Rt.right)}return(0,_.separated)(Ce,Je)}};e.partitionMapWithIndex=ve;var ie=function(ee){return function(le){return le.concat(ee())}};e.altW=ie,e.alt=e.altW;var F=function(ee){return function(le){return le.filter(function(Ce,Je){return ee(Je,Ce)})}};e.filterWithIndex=F;var ge=function(ee){return function(le){return le.map(function(Ce,Je){return ee(le.slice(Je))})}};e.extend=ge,e.duplicate=(0,e.extend)(o.identity),e.foldMap=d.foldMap,e.foldMapWithIndex=d.foldMapWithIndex,e.reduce=d.reduce,e.reduceWithIndex=d.reduceWithIndex,e.reduceRight=d.reduceRight,e.reduceRightWithIndex=d.reduceRightWithIndex;var qe=function(ee){var le=(0,e.traverseWithIndex)(ee);return function(Ce){return le(function(Je,It){return Ce(It)})}};e.traverse=qe;var ct=function(ee){return function(le){return ft(le,ee.of((0,e.zero)()),function(Ce,Je){return ee.ap(ee.map(Ce,function(It){return function(Rt){return(0,o.pipe)(It,(0,e.append)(Rt))}}),Je)})}};e.sequence=ct;var vt=function(ee){return function(le){return(0,e.reduceWithIndex)(ee.of((0,e.zero)()),function(Ce,Je,It){return ee.ap(ee.map(Je,function(Rt){return function(Qi){return(0,o.pipe)(Rt,(0,e.append)(Qi))}}),le(Ce,It))})}};e.traverseWithIndex=vt;var yt=function(ee){var le=vu(ee);return function(Ce){return function(Je){return le(Je,Ce)}}};e.wither=yt;var Lt=function(ee){var le=mu(ee);return function(Ce){return function(Je){return le(Je,Ce)}}};e.wilt=Lt;var sn=function(ee,le){for(var Ce=[],Je=ee;;){var It=le(Je);if(f.isSome(It)){var Rt=It.value,Qi=Rt[0],Al=Rt[1];Ce.push(Qi),Je=Al}else break}return Ce};e.unfold=sn,e.URI="Array",e.getShow=d.getShow;var cn=function(){return{concat:function(ee,le){return ee.concat(le)}}};e.getSemigroup=cn;var Yt=function(){return{concat:(0,e.getSemigroup)().concat,empty:[]}};e.getMonoid=Yt,e.getEq=d.getEq,e.getOrd=d.getOrd;var pa=function(ee){var le=Ye(ee);return{concat:function(Ce,Je){return le(Je)(Ce)}}};e.getUnionSemigroup=pa;var _a=function(ee){return{concat:(0,e.getUnionSemigroup)(ee).concat,empty:[]}};e.getUnionMonoid=_a;var pl=function(ee){var le=ze(ee);return{concat:function(Ce,Je){return le(Je)(Ce)}}};e.getIntersectionSemigroup=pl;var _l=function(ee){var le=et(ee);return{concat:function(Ce,Je){return le(Je)(Ce)}}};e.getDifferenceMagma=_l,e.Functor={URI:e.URI,map:tt},e.flap=(0,l.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:tt,mapWithIndex:de},e.Apply={URI:e.URI,map:tt,ap:ue},e.apFirst=(0,i.apFirst)(e.Apply),e.apSecond=(0,i.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:tt,ap:ue,of:e.of},e.Chain={URI:e.URI,map:tt,ap:ue,chain:e.flatMap},e.chainFirst=(0,a.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:tt,ap:ue,of:e.of,chain:e.flatMap},e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:tt,alt:gt},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,A.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:tt,ap:ue,of:e.of,alt:gt,zero:e.zero},e.Extend={URI:e.URI,map:tt,extend:Qe},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:tt,compact:e.compact,separate:e.separate,filter:ke,filterMap:oe,partition:Le,partitionMap:se},e.FilterableWithIndex={URI:e.URI,map:tt,mapWithIndex:de,compact:e.compact,separate:e.separate,filter:ke,filterMap:oe,partition:Le,partitionMap:se,partitionMapWithIndex:Be,partitionWithIndex:we,filterMapWithIndex:Ne,filterWithIndex:je},e.Foldable={URI:e.URI,reduce:ft,foldMap:ye,reduceRight:w},e.FoldableWithIndex={URI:e.URI,reduce:ft,foldMap:ye,reduceRight:w,reduceWithIndex:he,foldMapWithIndex:_e,reduceRightWithIndex:Te},e.Traversable={URI:e.URI,map:tt,reduce:ft,foldMap:ye,reduceRight:w,traverse:X,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:tt,mapWithIndex:de,reduce:ft,foldMap:ye,reduceRight:w,reduceWithIndex:he,foldMapWithIndex:_e,reduceRightWithIndex:Te,traverse:X,sequence:e.sequence,traverseWithIndex:re};var vu=(0,R.witherDefault)(e.Traversable,e.Compactable),mu=(0,R.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:tt,compact:e.compact,separate:e.separate,filter:ke,filterMap:oe,partition:Le,partitionMap:se,reduce:ft,foldMap:ye,reduceRight:w,traverse:X,sequence:e.sequence,wither:vu,wilt:mu},e.chainRecDepthFirst=d.chainRecDepthFirst,e.ChainRecDepthFirst={URI:e.URI,map:tt,ap:ue,chain:e.flatMap,chainRec:be},e.chainRecBreadthFirst=d.chainRecBreadthFirst,e.ChainRecBreadthFirst={URI:e.URI,map:tt,ap:ue,chain:e.flatMap,chainRec:We},e.filterE=(0,R.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,u.fromEitherK)(e.FromEither),e.unsafeInsertAt=h.unsafeInsertAt;var yl=function(ee,le,Ce){return(0,e.isNonEmpty)(Ce)?h.unsafeUpdateAt(ee,le,Ce):[]};e.unsafeUpdateAt=yl;var bl=function(ee,le){var Ce=le.slice();return Ce.splice(ee,1),Ce};e.unsafeDeleteAt=bl,e.every=d.every;var Il=function(ee){return function(le){return le.some(ee)}};e.some=Il,e.exists=e.some,e.intercalate=d.intercalate,e.Do=(0,e.of)(f.emptyRecord),e.bindTo=(0,l.bindTo)(e.Functor);var Sl=(0,l.let)(e.Functor);e.let=Sl,e.bind=(0,a.bind)(e.Chain),e.apS=(0,i.apS)(e.Apply),e.chain=e.flatMap,e.range=h.range,e.empty=[],e.cons=h.cons,e.snoc=h.snoc,e.prependToAll=e.prependAll,e.array={URI:e.URI,compact:e.compact,separate:e.separate,map:tt,ap:ue,of:e.of,chain:e.flatMap,filter:ke,filterMap:oe,partition:Le,partitionMap:se,mapWithIndex:de,partitionMapWithIndex:Be,partitionWithIndex:we,filterMapWithIndex:Ne,filterWithIndex:je,alt:gt,zero:e.zero,unfold:e.unfold,reduce:ft,foldMap:ye,reduceRight:w,traverse:X,sequence:e.sequence,reduceWithIndex:he,foldMapWithIndex:_e,reduceRightWithIndex:Te,traverseWithIndex:re,extend:Qe,wither:vu,wilt:mu}}}),Bs=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/string.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.endsWith=e.startsWith=e.includes=e.split=e.size=e.isEmpty=e.slice=e.trimRight=e.trimLeft=e.trim=e.replace=e.toLowerCase=e.toUpperCase=e.isString=e.Show=e.Ord=e.Monoid=e.empty=e.Semigroup=e.Eq=void 0;var t=lu();e.Eq={equals:function(g,I){return g===I}},e.Semigroup={concat:function(g,I){return g+I}},e.empty="",e.Monoid={concat:e.Semigroup.concat,empty:e.empty},e.Ord={equals:e.Eq.equals,compare:function(g,I){return g<I?-1:g>I?1:0}},e.Show={show:function(g){return JSON.stringify(g)}};var n=function(g){return typeof g=="string"};e.isString=n;var r=function(g){return g.toUpperCase()};e.toUpperCase=r;var i=function(g){return g.toLowerCase()};e.toLowerCase=i;var a=function(g,I){return function(C){return C.replace(g,I)}};e.replace=a;var u=function(g){return g.trim()};e.trim=u;var o=function(g){return g.trimLeft()};e.trimLeft=o;var l=function(g){return g.trimRight()};e.trimRight=l;var f=function(g,I){return function(C){return C.slice(g,I)}};e.slice=f;var h=function(g){return g.length===0};e.isEmpty=h;var d=function(g){return g.length};e.size=d;var _=function(g){return function(I){var C=I.split(g);return(0,t.isNonEmpty)(C)?C:[I]}};e.split=_;var R=function(g,I){return function(C){return C.includes(g,I)}};e.includes=R;var A=function(g,I){return function(C){return C.startsWith(g,I)}};e.startsWith=A;var E=function(g,I){return function(C){return C.endsWith(g,I)}};e.endsWith=E}}),Im=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/ReadonlyRecord.js"(e){var t=e&&e.__createBinding||(Object.create?function(Z,ce,b,v){v===void 0&&(v=b);var y=Object.getOwnPropertyDescriptor(ce,b);(!y||("get"in y?!ce.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return ce[b]}}),Object.defineProperty(Z,v,y)}:function(Z,ce,b,v){v===void 0&&(v=b),Z[v]=ce[b]}),n=e&&e.__setModuleDefault||(Object.create?function(Z,ce){Object.defineProperty(Z,"default",{enumerable:!0,value:ce})}:function(Z,ce){Z.default=ce}),r=e&&e.__importStar||function(Z){if(Z&&Z.__esModule)return Z;var ce={};if(Z!=null)for(var b in Z)b!=="default"&&Object.prototype.hasOwnProperty.call(Z,b)&&t(ce,Z,b);return n(ce,Z),ce};Object.defineProperty(e,"__esModule",{value:!0}),e._partition=e._filterMap=e._filter=e._reduceRight=e._foldMap=e._reduce=e._mapWithIndex=e._map=e.difference=e.intersection=e.union=e.elem=e.some=e.every=e.fromEntries=e.toEntries=e.fromFoldableMap=e.fromFoldable=e.filterWithIndex=e.filterMapWithIndex=e.partitionWithIndex=e.partitionMapWithIndex=e.wilt=e.wither=e.sequence=e.traverse=e.traverseWithIndex=e.singleton=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=e.map=e.mapWithIndex=e.empty=e.lookup=e.isSubrecord=e.pop=e.modifyAt=e.updateAt=e.deleteAt=e.has=e.upsertAt=e.toUnfoldable=e.toReadonlyArray=e.collect=e.keys=e.isEmpty=e.size=e.toRecord=e.fromRecord=void 0,e.readonlyRecord=e.hasOwnProperty=e.insertAt=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getWitherable=e.getTraversableWithIndex=e.getTraversable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.getFoldableWithIndex=e.getFoldable=e.FunctorWithIndex=e.flap=e.Functor=e.getMonoid=e.getEq=e.getShow=e.URI=e.separate=e.compact=e.reduceRight=e.foldMap=e.reduce=e.partitionMap=e.partition=e.filterMap=e.filter=e._sequence=e._traverse=e._filterWithIndex=e._filterMapWithIndex=e._partitionWithIndex=e._partitionMapWithIndex=e._reduceRightWithIndex=e._foldMapWithIndex=e._reduceWithIndex=e._partitionMap=void 0;var i=jr(),a=it(),u=On(),o=r(Wn()),l=wi(),f=r(Bs()),h=$i(),d=function(Z){return Object.assign({},Z)};e.fromRecord=d;var _=function(Z){return Object.assign({},Z)};e.toRecord=_;var R=function(Z){return Object.keys(Z).length};e.size=R;var A=function(Z){for(var ce in Z)if(o.has.call(Z,ce))return!1;return!0};e.isEmpty=A;var E=function(Z){return function(ce){return Object.keys(ce).sort(Z.compare)}};e.keys=E(f.Ord);function g(Z){if(typeof Z=="function")return g(f.Ord)(Z);var ce=E(Z);return function(b){return function(v){for(var y=[],O=0,z=ce(v);O<z.length;O++){var ve=z[O];y.push(b(ve,v[ve]))}return y}}}e.collect=g,e.toReadonlyArray=g(f.Ord)(function(Z,ce){return[Z,ce]});function I(Z){return function(ce){var b=(0,e.toReadonlyArray)(ce),v=b.length;return Z.unfold(0,function(y){return y<v?o.some([b[y],y+1]):o.none})}}e.toUnfoldable=I;var C=function(Z,ce){return function(b){if(o.has.call(b,Z)&&b[Z]===ce)return b;var v=Object.assign({},b);return v[Z]=ce,v}};e.upsertAt=C;var k=function(Z,ce){return o.has.call(ce,Z)};e.has=k;function L(Z){return function(ce){if(!o.has.call(ce,Z))return ce;var b=Object.assign({},ce);return delete b[Z],b}}e.deleteAt=L;var q=function(Z,ce){return function(b){if(!(0,e.has)(Z,b))return o.none;if(b[Z]===ce)return o.some(b);var v=Object.assign({},b);return v[Z]=ce,o.some(v)}};e.updateAt=q;var G=function(Z,ce){return function(b){if(!(0,e.has)(Z,b))return o.none;var v=ce(b[Z]);if(v===b[Z])return o.some(b);var y=Object.assign({},b);return y[Z]=v,o.some(y)}};e.modifyAt=G;function D(Z){var ce=L(Z);return function(b){var v=fe(Z,b);return o.isNone(v)?o.none:o.some([v.value,ce(b)])}}e.pop=D;function Y(Z){return function(ce,b){if(b===void 0){var v=Y(Z);return function(O){return v(O,ce)}}for(var y in ce)if(!o.has.call(b,y)||!Z.equals(ce[y],b[y]))return!1;return!0}}e.isSubrecord=Y;function fe(Z,ce){return ce===void 0?function(b){return fe(Z,b)}:o.has.call(ce,Z)?o.some(ce[Z]):o.none}e.lookup=fe,e.empty={};function $(Z){return function(ce){var b={};for(var v in ce)o.has.call(ce,v)&&(b[v]=Z(v,ce[v]));return b}}e.mapWithIndex=$;function x(Z){return $(function(ce,b){return Z(b)})}e.map=x;function Re(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];if(Z.length===2)return Re(f.Ord).apply(void 0,Z);var b=E(Z[0]);return function(v,y){return function(O){for(var z=v,ve=b(O),ie=ve.length,F=0;F<ie;F++){var ge=ve[F];z=y(ge,z,O[ge])}return z}}}e.reduceWithIndex=Re;function N(Z){if("compare"in Z){var ce=E(Z);return function(b){return function(v){return function(y){for(var O=b.empty,z=ce(y),ve=z.length,ie=0;ie<ve;ie++){var F=z[ie];O=b.concat(O,v(F,y[F]))}return O}}}}return N(f.Ord)(Z)}e.foldMapWithIndex=N;function P(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];if(Z.length===2)return P(f.Ord).apply(void 0,Z);var b=E(Z[0]);return function(v,y){return function(O){for(var z=v,ve=b(O),ie=ve.length,F=ie-1;F>=0;F--){var ge=ve[F];z=y(ge,O[ge],z)}return z}}}e.reduceRightWithIndex=P;var s=function(Z,ce){var b;return b={},b[Z]=ce,b};e.singleton=s;function S(Z){var ce=ue(f.Ord)(Z);return function(b){return function(v){return ce(v,b)}}}e.traverseWithIndex=S;function M(Z){var ce=(0,e._traverse)(f.Ord)(Z);return function(b){return function(v){return ce(v,b)}}}e.traverse=M;function c(Z){return(0,e._sequence)(f.Ord)(Z)}e.sequence=c;var p=function(Z){var ce=M(Z);return function(b){return function(v){return Z.map((0,a.pipe)(v,ce(b)),e.compact)}}};e.wither=p;var U=function(Z){var ce=M(Z);return function(b){return function(v){return Z.map((0,a.pipe)(v,ce(b)),e.separate)}}};e.wilt=U;function j(Z){return function(ce){var b={},v={};for(var y in ce)if(o.has.call(ce,y)){var O=Z(y,ce[y]);switch(O._tag){case"Left":b[y]=O.left;break;case"Right":v[y]=O.right;break}}return(0,l.separated)(b,v)}}e.partitionMapWithIndex=j;function ae(Z){return function(ce){var b={},v={};for(var y in ce)if(o.has.call(ce,y)){var O=ce[y];Z(y,O)?v[y]=O:b[y]=O}return(0,l.separated)(b,v)}}e.partitionWithIndex=ae;function V(Z){return function(ce){var b={};for(var v in ce)if(o.has.call(ce,v)){var y=Z(v,ce[v]);o.isSome(y)&&(b[v]=y.value)}return b}}e.filterMapWithIndex=V;function Q(Z){return function(ce){var b={},v=!1;for(var y in ce)if(o.has.call(ce,y)){var O=ce[y];Z(y,O)?b[y]=O:v=!0}return v?b:ce}}e.filterWithIndex=Q;function me(Z,ce){var b=Ie(Z,ce);return function(v){return b(v,a.identity)}}e.fromFoldable=me;function Ie(Z,ce){return function(b,v){return ce.reduce(b,{},function(y,O){var z=v(O),ve=z[0],ie=z[1];return y[ve]=o.has.call(y,ve)?Z.concat(y[ve],ie):ie,y})}}e.fromFoldableMap=Ie,e.toEntries=e.toReadonlyArray;var Ee=function(Z){for(var ce={},b=0,v=Z;b<v.length;b++){var y=v[b];ce[y[0]]=y[1]}return ce};e.fromEntries=Ee;function Ge(Z){return function(ce){for(var b in ce)if(!Z(ce[b]))return!1;return!0}}e.every=Ge;function Ke(Z){return function(ce){for(var b in ce)if(Z(ce[b]))return!0;return!1}}e.some=Ke;function K(Z){return function(ce,b){if(b===void 0){var v=K(Z);return function(O){return v(ce,O)}}for(var y in b)if(Z.equals(b[y],ce))return!0;return!1}}e.elem=K;var pe=function(Z){return function(ce){return function(b){if((0,e.isEmpty)(b))return ce;if((0,e.isEmpty)(ce))return b;var v={};for(var y in b)(0,e.has)(y,ce)?v[y]=Z.concat(b[y],ce[y]):v[y]=b[y];for(var y in ce)(0,e.has)(y,v)||(v[y]=ce[y]);return v}}};e.union=pe;var De=function(Z){return function(ce){return function(b){if((0,e.isEmpty)(b)||(0,e.isEmpty)(ce))return e.empty;var v={};for(var y in b)(0,e.has)(y,ce)&&(v[y]=Z.concat(b[y],ce[y]));return v}}};e.intersection=De;var Ze=function(Z){return function(ce){if((0,e.isEmpty)(ce))return Z;if((0,e.isEmpty)(Z))return ce;var b={};for(var v in ce)(0,e.has)(v,Z)||(b[v]=ce[v]);for(var v in Z)(0,e.has)(v,ce)||(b[v]=Z[v]);return b}};e.difference=Ze;var rt=function(Z,ce){return(0,a.pipe)(Z,x(ce))};e._map=rt;var W=function(Z,ce){return(0,a.pipe)(Z,$(ce))};e._mapWithIndex=W;var J=function(Z){var ce=we(Z);return function(b,v,y){return(0,a.pipe)(b,ce(v,y))}};e._reduce=J;var ne=function(Z){return function(ce){var b=Be(Z)(ce);return function(v,y){return(0,a.pipe)(v,b(y))}}};e._foldMap=ne;var Se=function(Z){var ce=gt(Z);return function(b,v,y){return(0,a.pipe)(b,ce(v,y))}};e._reduceRight=Se;var Xe=function(Z,ce){return(0,a.pipe)(Z,(0,e.filter)(ce))};e._filter=Xe;var ot=function(Z,ce){return(0,a.pipe)(Z,(0,e.filterMap)(ce))};e._filterMap=ot;var at=function(Z,ce){return(0,a.pipe)(Z,(0,e.partition)(ce))};e._partition=at;var Tt=function(Z,ce){return(0,a.pipe)(Z,(0,e.partitionMap)(ce))};e._partitionMap=Tt;var Nt=function(Z){var ce=Re(Z);return function(b,v,y){return(0,a.pipe)(b,ce(v,y))}};e._reduceWithIndex=Nt;var Wt=function(Z){var ce=N(Z);return function(b){var v=ce(b);return function(y,O){return(0,a.pipe)(y,v(O))}}};e._foldMapWithIndex=Wt;var Oe=function(Z){var ce=P(Z);return function(b,v,y){return(0,a.pipe)(b,ce(v,y))}};e._reduceRightWithIndex=Oe;var Pe=function(Z,ce){return(0,a.pipe)(Z,j(ce))};e._partitionMapWithIndex=Pe;var Ye=function(Z,ce){return(0,a.pipe)(Z,ae(ce))};e._partitionWithIndex=Ye;var ze=function(Z,ce){return(0,a.pipe)(Z,V(ce))};e._filterMapWithIndex=ze;var et=function(Z,ce){return(0,a.pipe)(Z,Q(ce))};e._filterWithIndex=et;var tt=function(Z){var ce=ue(Z);return function(b){var v=ce(b);return function(y,O){return v(y,(0,a.flow)(a.SK,O))}}};e._traverse=tt;var de=function(Z){var ce=(0,e._traverse)(Z);return function(b){var v=ce(b);return function(y){return v(y,a.identity)}}};e._sequence=de;var ue=function(Z){return function(ce){var b=E(Z);return function(v,y){var O=b(v);if(O.length===0)return ce.of(e.empty);for(var z=ce.of({}),ve=function(qe){z=ce.ap(ce.map(z,function(ct){return function(vt){var yt;return Object.assign({},ct,(yt={},yt[qe]=vt,yt))}}),y(qe,v[qe]))},ie=0,F=O;ie<F.length;ie++){var ge=F[ie];ve(ge)}return z}}},ke=function(Z){return Q(function(ce,b){return Z(b)})};e.filter=ke;var oe=function(Z){return V(function(ce,b){return Z(b)})};e.filterMap=oe;var Le=function(Z){return ae(function(ce,b){return Z(b)})};e.partition=Le;var se=function(Z){return j(function(ce,b){return Z(b)})};e.partitionMap=se;function we(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];if(Z.length===1){var b=Re(Z[0]);return function(v,y){return b(v,function(O,z,ve){return y(z,ve)})}}return we(f.Ord).apply(void 0,Z)}e.reduce=we;function Be(Z){if("compare"in Z){var ce=N(Z);return function(b){var v=ce(b);return function(y){return v(function(O,z){return y(z)})}}}return Be(f.Ord)(Z)}e.foldMap=Be;function gt(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];if(Z.length===1){var b=P(Z[0]);return function(v,y){return b(v,function(O,z,ve){return y(z,ve)})}}return gt(f.Ord).apply(void 0,Z)}e.reduceRight=gt;var ft=function(Z){var ce={};for(var b in Z)if(o.has.call(Z,b)){var v=Z[b];o.isSome(v)&&(ce[b]=v.value)}return ce};e.compact=ft;var ye=function(Z){var ce={},b={};for(var v in Z)if(o.has.call(Z,v)){var y=Z[v];o.isLeft(y)?ce[v]=y.left:b[v]=y.right}return(0,l.separated)(ce,b)};e.separate=ye,e.URI="ReadonlyRecord";function w(Z){return"compare"in Z?function(ce){return{show:function(b){var v=g(Z)(function(y,O){return"".concat(JSON.stringify(y),": ").concat(ce.show(O))})(b).join(", ");return v===""?"{}":"{ ".concat(v," }")}}}:w(f.Ord)(Z)}e.getShow=w;function he(Z){var ce=Y(Z);return(0,i.fromEquals)(function(b,v){return ce(b)(v)&&ce(v)(b)})}e.getEq=he;function _e(Z){return{concat:function(ce,b){if((0,e.isEmpty)(ce))return b;if((0,e.isEmpty)(b))return ce;var v=Object.assign({},ce);for(var y in b)o.has.call(b,y)&&(v[y]=o.has.call(ce,y)?Z.concat(ce[y],b[y]):b[y]);return v},empty:e.empty}}e.getMonoid=_e,e.Functor={URI:e.URI,map:e._map},e.flap=(0,u.flap)(e.Functor),e.FunctorWithIndex={URI:e.URI,map:e._map,mapWithIndex:e._mapWithIndex};var Te=function(Z){return{URI:e.URI,reduce:(0,e._reduce)(Z),foldMap:(0,e._foldMap)(Z),reduceRight:(0,e._reduceRight)(Z)}};e.getFoldable=Te;var Ne=function(Z){return{URI:e.URI,reduce:(0,e._reduce)(Z),foldMap:(0,e._foldMap)(Z),reduceRight:(0,e._reduceRight)(Z),reduceWithIndex:(0,e._reduceWithIndex)(Z),foldMapWithIndex:(0,e._foldMapWithIndex)(Z),reduceRightWithIndex:(0,e._reduceRightWithIndex)(Z)}};e.getFoldableWithIndex=Ne,e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:e._map,compact:e.compact,separate:e.separate,filter:e._filter,filterMap:e._filterMap,partition:e._partition,partitionMap:e._partitionMap},e.FilterableWithIndex={URI:e.URI,map:e._map,mapWithIndex:e._mapWithIndex,compact:e.compact,separate:e.separate,filter:e._filter,filterMap:e._filterMap,partition:e._partition,partitionMap:e._partitionMap,filterMapWithIndex:e._filterMapWithIndex,filterWithIndex:e._filterWithIndex,partitionMapWithIndex:e._partitionMapWithIndex,partitionWithIndex:e._partitionWithIndex};var je=function(Z){return{URI:e.URI,map:e._map,reduce:(0,e._reduce)(Z),foldMap:(0,e._foldMap)(Z),reduceRight:(0,e._reduceRight)(Z),traverse:(0,e._traverse)(Z),sequence:(0,e._sequence)(Z)}};e.getTraversable=je;var Qe=function(Z){return{URI:e.URI,map:e._map,mapWithIndex:e._mapWithIndex,reduce:(0,e._reduce)(Z),foldMap:(0,e._foldMap)(Z),reduceRight:(0,e._reduceRight)(Z),reduceWithIndex:(0,e._reduceWithIndex)(Z),foldMapWithIndex:(0,e._foldMapWithIndex)(Z),reduceRightWithIndex:(0,e._reduceRightWithIndex)(Z),traverse:(0,e._traverse)(Z),sequence:(0,e._sequence)(Z),traverseWithIndex:ue(Z)}};e.getTraversableWithIndex=Qe;var X=function(Z){var ce=(0,e.getTraversable)(Z);return{URI:e.URI,map:e._map,reduce:(0,e._reduce)(Z),foldMap:(0,e._foldMap)(Z),reduceRight:(0,e._reduceRight)(Z),traverse:ce.traverse,sequence:ce.sequence,compact:e.compact,separate:e.separate,filter:e._filter,filterMap:e._filterMap,partition:e._partition,partitionMap:e._partitionMap,wither:(0,h.witherDefault)(ce,e.Compactable),wilt:(0,h.wiltDefault)(ce,e.Compactable)}};e.getWitherable=X;var re=function(Z){var ce=(0,e.union)(Z);return{concat:function(b,v){return ce(v)(b)}}};e.getUnionSemigroup=re;var be=function(Z){return{concat:(0,e.getUnionSemigroup)(Z).concat,empty:e.empty}};e.getUnionMonoid=be;var We=function(Z){var ce=(0,e.intersection)(Z);return{concat:function(b,v){return ce(v)(b)}}};e.getIntersectionSemigroup=We;var st=function(){return{concat:function(Z,ce){return(0,e.difference)(ce)(Z)}}};e.getDifferenceMagma=st,e.Foldable={URI:e.URI,reduce:(0,e._reduce)(f.Ord),foldMap:(0,e._foldMap)(f.Ord),reduceRight:(0,e._reduceRight)(f.Ord)},e.FoldableWithIndex={URI:e.URI,reduce:(0,e._reduce)(f.Ord),foldMap:(0,e._foldMap)(f.Ord),reduceRight:(0,e._reduceRight)(f.Ord),reduceWithIndex:(0,e._reduceWithIndex)(f.Ord),foldMapWithIndex:(0,e._foldMapWithIndex)(f.Ord),reduceRightWithIndex:(0,e._reduceRightWithIndex)(f.Ord)},e.Traversable={URI:e.URI,map:e._map,reduce:(0,e._reduce)(f.Ord),foldMap:(0,e._foldMap)(f.Ord),reduceRight:(0,e._reduceRight)(f.Ord),traverse:(0,e._traverse)(f.Ord),sequence:c},e.TraversableWithIndex={URI:e.URI,map:e._map,mapWithIndex:e._mapWithIndex,reduce:(0,e._reduce)(f.Ord),foldMap:(0,e._foldMap)(f.Ord),reduceRight:(0,e._reduceRight)(f.Ord),reduceWithIndex:(0,e._reduceWithIndex)(f.Ord),foldMapWithIndex:(0,e._foldMapWithIndex)(f.Ord),reduceRightWithIndex:(0,e._reduceRightWithIndex)(f.Ord),traverse:(0,e._traverse)(f.Ord),sequence:c,traverseWithIndex:ue(f.Ord)};var _t=(0,h.witherDefault)(e.Traversable,e.Compactable),Dt=(0,h.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:e._map,reduce:(0,e._reduce)(f.Ord),foldMap:(0,e._foldMap)(f.Ord),reduceRight:(0,e._reduceRight)(f.Ord),traverse:(0,e._traverse)(f.Ord),sequence:c,compact:e.compact,separate:e.separate,filter:e._filter,filterMap:e._filterMap,partition:e._partition,partitionMap:e._partitionMap,wither:_t,wilt:Dt},e.insertAt=e.upsertAt;function yn(Z,ce){return o.has.call(ce===void 0?this:ce,Z)}e.hasOwnProperty=yn,e.readonlyRecord={URI:e.URI,map:e._map,reduce:(0,e._reduce)(f.Ord),foldMap:(0,e._foldMap)(f.Ord),reduceRight:(0,e._reduceRight)(f.Ord),traverse:(0,e._traverse)(f.Ord),sequence:c,compact:e.compact,separate:e.separate,filter:e._filter,filterMap:e._filterMap,partition:e._partition,partitionMap:e._partitionMap,mapWithIndex:e._mapWithIndex,reduceWithIndex:(0,e._reduceWithIndex)(f.Ord),foldMapWithIndex:(0,e._foldMapWithIndex)(f.Ord),reduceRightWithIndex:(0,e._reduceRightWithIndex)(f.Ord),filterMapWithIndex:e._filterMapWithIndex,filterWithIndex:e._filterWithIndex,partitionMapWithIndex:e._partitionMapWithIndex,partitionWithIndex:e._partitionWithIndex,traverseWithIndex:ue(f.Ord),wither:_t,wilt:Dt}}}),Sm=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Record.js"(e){var t=e&&e.__assign||function(){return t=Object.assign||function(oe){for(var Le,se=1,we=arguments.length;se<we;se++){Le=arguments[se];for(var Be in Le)Object.prototype.hasOwnProperty.call(Le,Be)&&(oe[Be]=Le[Be])}return oe},t.apply(this,arguments)},n=e&&e.__createBinding||(Object.create?function(oe,Le,se,we){we===void 0&&(we=se);var Be=Object.getOwnPropertyDescriptor(Le,se);(!Be||("get"in Be?!Le.__esModule:Be.writable||Be.configurable))&&(Be={enumerable:!0,get:function(){return Le[se]}}),Object.defineProperty(oe,we,Be)}:function(oe,Le,se,we){we===void 0&&(we=se),oe[we]=Le[se]}),r=e&&e.__setModuleDefault||(Object.create?function(oe,Le){Object.defineProperty(oe,"default",{enumerable:!0,value:Le})}:function(oe,Le){oe.default=Le}),i=e&&e.__importStar||function(oe){if(oe&&oe.__esModule)return oe;var Le={};if(oe!=null)for(var se in oe)se!=="default"&&Object.prototype.hasOwnProperty.call(oe,se)&&n(Le,oe,se);return r(Le,oe),Le};Object.defineProperty(e,"__esModule",{value:!0}),e.getShow=e.URI=e.separate=e.compact=e.reduceRight=e.foldMap=e.reduce=e.partitionMap=e.partition=e.filterMap=e.filter=e.difference=e.intersection=e.union=e.elem=e.some=e.every=e.fromFoldableMap=e.fromEntries=e.toEntries=e.fromFoldable=e.filterWithIndex=e.filterMapWithIndex=e.partitionWithIndex=e.partitionMapWithIndex=e.wilt=e.wither=e.sequence=e.traverse=e.traverseWithIndex=e.singleton=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=e.map=e.mapWithIndex=e.lookup=e.isSubrecord=e.pop=e.modifyAt=e.updateAt=e.deleteAt=e.has=e.upsertAt=e.toUnfoldable=e.toArray=e.collect=e.keys=e.isEmpty=e.size=void 0,e.record=e.hasOwnProperty=e.insertAt=e.empty=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getWitherable=e.getTraversableWithIndex=e.getTraversable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.getFoldableWithIndex=e.getFoldable=e.FunctorWithIndex=e.flap=e.Functor=e.getMonoid=e.getEq=void 0;var a=i(ui()),u=it(),o=On(),l=i(Wn()),f=i(Im()),h=i(cu()),d=i(Bs()),_=$i();e.size=f.size,e.isEmpty=f.isEmpty;var R=function(oe){return function(Le){return Object.keys(Le).sort(oe.compare)}};e.keys=R(d.Ord);function A(oe){if(typeof oe=="function")return A(d.Ord)(oe);var Le=R(oe);return function(se){return function(we){for(var Be=[],gt=0,ft=Le(we);gt<ft.length;gt++){var ye=ft[gt];Be.push(se(ye,we[ye]))}return Be}}}e.collect=A,e.toArray=A(d.Ord)(function(oe,Le){return[oe,Le]});function E(oe){return function(Le){var se=(0,e.toArray)(Le),we=se.length;return oe.unfold(0,function(Be){return Be<we?l.some([se[Be],Be+1]):l.none})}}e.toUnfoldable=E,e.upsertAt=f.upsertAt,e.has=f.has;function g(oe){return function(Le){if(!l.has.call(Le,oe))return Le;var se=Object.assign({},Le);return delete se[oe],se}}e.deleteAt=g;var I=function(oe,Le){return(0,e.modifyAt)(oe,function(){return Le})};e.updateAt=I;var C=function(oe,Le){return function(se){if(!(0,e.has)(oe,se))return l.none;var we=Object.assign({},se);return we[oe]=Le(se[oe]),l.some(we)}};e.modifyAt=C;function k(oe){var Le=g(oe);return function(se){var we=(0,e.lookup)(oe,se);return l.isNone(we)?l.none:l.some([we.value,Le(se)])}}e.pop=k,e.isSubrecord=f.isSubrecord,e.lookup=f.lookup,e.mapWithIndex=f.mapWithIndex,e.map=f.map;function L(){for(var oe=[],Le=0;Le<arguments.length;Le++)oe[Le]=arguments[Le];return oe.length===1?f.reduceWithIndex(oe[0]):f.reduceWithIndex(d.Ord).apply(void 0,oe)}e.reduceWithIndex=L;function q(oe){return"compare"in oe?f.foldMapWithIndex(oe):f.foldMapWithIndex(d.Ord)(oe)}e.foldMapWithIndex=q;function G(){for(var oe=[],Le=0;Le<arguments.length;Le++)oe[Le]=arguments[Le];return oe.length===1?f.reduceRightWithIndex(oe[0]):f.reduceRightWithIndex(d.Ord).apply(void 0,oe)}e.reduceRightWithIndex=G,e.singleton=f.singleton;function D(oe){return f.traverseWithIndex(oe)}e.traverseWithIndex=D;function Y(oe){return f.traverse(oe)}e.traverse=Y;function fe(oe){return f.sequence(oe)}e.sequence=fe;var $=function(oe){var Le=Y(oe);return function(se){return function(we){return oe.map((0,u.pipe)(we,Le(se)),e.compact)}}};e.wither=$;var x=function(oe){var Le=Y(oe);return function(se){return function(we){return oe.map((0,u.pipe)(we,Le(se)),e.separate)}}};e.wilt=x,e.partitionMapWithIndex=f.partitionMapWithIndex;function Re(oe){return f.partitionWithIndex(oe)}e.partitionWithIndex=Re,e.filterMapWithIndex=f.filterMapWithIndex;function N(oe){return f.filterWithIndex(oe)}e.filterWithIndex=N;function P(oe,Le){return f.fromFoldable(oe,Le)}e.fromFoldable=P,e.toEntries=e.toArray;var s=function(oe){return P(h.last(),a.Foldable)(oe)};e.fromEntries=s;function S(oe,Le){return f.fromFoldableMap(oe,Le)}e.fromFoldableMap=S,e.every=f.every,e.some=f.some,e.elem=f.elem;var M=function(oe){var Le=f.union(oe);return function(se){return function(we){return(0,e.isEmpty)(we)?t({},se):(0,e.isEmpty)(se)?t({},we):Le(se)(we)}}};e.union=M;var c=function(oe){return function(Le){return function(se){return(0,e.isEmpty)(se)||(0,e.isEmpty)(Le)?{}:f.intersection(oe)(Le)(se)}}};e.intersection=c;var p=function(oe){return function(Le){return(0,e.isEmpty)(Le)?t({},oe):(0,e.isEmpty)(oe)?t({},Le):f.difference(oe)(Le)}};e.difference=p;var U=f._map,j=f._mapWithIndex,ae=f._reduce,V=f._foldMap,Q=f._reduceRight,me=f._filter,Ie=f._filterMap,Ee=f._partition,Ge=f._partitionMap,Ke=f._reduceWithIndex,K=f._foldMapWithIndex,pe=f._reduceRightWithIndex,De=f._partitionMapWithIndex,Ze=f._partitionWithIndex,rt=f._filterMapWithIndex,W=f._filterWithIndex,J=f._traverse,ne=f._sequence,Se=function(oe){return function(Le){var se=R(oe);return function(we,Be){var gt=se(we);if(gt.length===0)return Le.of({});for(var ft=Le.of({}),ye=function(Te){ft=Le.ap(Le.map(ft,function(Ne){return function(je){return Ne[Te]=je,Ne}}),Be(Te,we[Te]))},w=0,he=gt;w<he.length;w++){var _e=he[w];ye(_e)}return ft}}};e.filter=f.filter,e.filterMap=f.filterMap,e.partition=f.partition,e.partitionMap=f.partitionMap;function Xe(){for(var oe=[],Le=0;Le<arguments.length;Le++)oe[Le]=arguments[Le];return oe.length===1?f.reduce(oe[0]):f.reduce(d.Ord).apply(void 0,oe)}e.reduce=Xe;function ot(oe){return"compare"in oe?f.foldMap(oe):f.foldMap(d.Ord)(oe)}e.foldMap=ot;function at(){for(var oe=[],Le=0;Le<arguments.length;Le++)oe[Le]=arguments[Le];return oe.length===1?f.reduceRight(oe[0]):f.reduceRight(d.Ord).apply(void 0,oe)}e.reduceRight=at,e.compact=f.compact,e.separate=f.separate,e.URI="Record";function Tt(oe){return"compare"in oe?f.getShow(oe):f.getShow(d.Ord)(oe)}e.getShow=Tt,e.getEq=f.getEq,e.getMonoid=f.getMonoid,e.Functor={URI:e.URI,map:U},e.flap=(0,o.flap)(e.Functor),e.FunctorWithIndex={URI:e.URI,map:U,mapWithIndex:j};var Nt=function(oe){return{URI:e.URI,reduce:ae(oe),foldMap:V(oe),reduceRight:Q(oe)}};e.getFoldable=Nt;var Wt=function(oe){return{URI:e.URI,reduce:ae(oe),foldMap:V(oe),reduceRight:Q(oe),reduceWithIndex:Ke(oe),foldMapWithIndex:K(oe),reduceRightWithIndex:pe(oe)}};e.getFoldableWithIndex=Wt,e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:U,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge},e.FilterableWithIndex={URI:e.URI,map:U,mapWithIndex:j,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge,filterMapWithIndex:rt,filterWithIndex:W,partitionMapWithIndex:De,partitionWithIndex:Ze};var Oe=function(oe){return{URI:e.URI,map:U,reduce:ae(oe),foldMap:V(oe),reduceRight:Q(oe),traverse:J(oe),sequence:ne(oe)}};e.getTraversable=Oe;var Pe=function(oe){return{URI:e.URI,map:U,mapWithIndex:j,reduce:ae(oe),foldMap:V(oe),reduceRight:Q(oe),reduceWithIndex:Ke(oe),foldMapWithIndex:K(oe),reduceRightWithIndex:pe(oe),traverse:J(oe),sequence:ne(oe),traverseWithIndex:Se(oe)}};e.getTraversableWithIndex=Pe;var Ye=function(oe){var Le=(0,e.getTraversable)(oe);return{URI:e.URI,map:U,reduce:ae(oe),foldMap:V(oe),reduceRight:Q(oe),traverse:Le.traverse,sequence:Le.sequence,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge,wither:(0,_.witherDefault)(Le,e.Compactable),wilt:(0,_.wiltDefault)(Le,e.Compactable)}};e.getWitherable=Ye;var ze=function(oe){var Le=(0,e.union)(oe);return{concat:function(se,we){return Le(we)(se)}}};e.getUnionSemigroup=ze;var et=function(oe){return{concat:(0,e.getUnionSemigroup)(oe).concat,empty:{}}};e.getUnionMonoid=et;var tt=function(oe){var Le=(0,e.intersection)(oe);return{concat:function(se,we){return Le(we)(se)}}};e.getIntersectionSemigroup=tt;var de=function(){return{concat:function(oe,Le){return(0,e.difference)(Le)(oe)}}};e.getDifferenceMagma=de,e.Foldable={URI:e.URI,reduce:ae(d.Ord),foldMap:V(d.Ord),reduceRight:Q(d.Ord)},e.FoldableWithIndex={URI:e.URI,reduce:ae(d.Ord),foldMap:V(d.Ord),reduceRight:Q(d.Ord),reduceWithIndex:Ke(d.Ord),foldMapWithIndex:K(d.Ord),reduceRightWithIndex:pe(d.Ord)},e.Traversable={URI:e.URI,map:U,reduce:ae(d.Ord),foldMap:V(d.Ord),reduceRight:Q(d.Ord),traverse:J(d.Ord),sequence:fe},e.TraversableWithIndex={URI:e.URI,map:U,mapWithIndex:j,reduce:ae(d.Ord),foldMap:V(d.Ord),reduceRight:Q(d.Ord),reduceWithIndex:Ke(d.Ord),foldMapWithIndex:K(d.Ord),reduceRightWithIndex:pe(d.Ord),traverse:J(d.Ord),sequence:fe,traverseWithIndex:Se(d.Ord)};var ue=(0,_.witherDefault)(e.Traversable,e.Compactable),ke=(0,_.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:U,reduce:ae(d.Ord),foldMap:V(d.Ord),reduceRight:Q(d.Ord),traverse:J(d.Ord),sequence:fe,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge,wither:ue,wilt:ke},e.empty={},e.insertAt=e.upsertAt,e.hasOwnProperty=f.hasOwnProperty,e.record={URI:e.URI,map:U,reduce:ae(d.Ord),foldMap:V(d.Ord),reduceRight:Q(d.Ord),traverse:J(d.Ord),sequence:fe,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge,mapWithIndex:j,reduceWithIndex:Ke(d.Ord),foldMapWithIndex:K(d.Ord),reduceRightWithIndex:pe(d.Ord),filterMapWithIndex:rt,filterWithIndex:W,partitionMapWithIndex:De,partitionWithIndex:Ze,traverseWithIndex:Se(d.Ord),wither:ue,wilt:ke}}}),xS=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/ReadonlyMap.js"(e){var t=e&&e.__createBinding||(Object.create?function(ye,w,he,_e){_e===void 0&&(_e=he);var Te=Object.getOwnPropertyDescriptor(w,he);(!Te||("get"in Te?!w.__esModule:Te.writable||Te.configurable))&&(Te={enumerable:!0,get:function(){return w[he]}}),Object.defineProperty(ye,_e,Te)}:function(ye,w,he,_e){_e===void 0&&(_e=he),ye[_e]=w[he]}),n=e&&e.__setModuleDefault||(Object.create?function(ye,w){Object.defineProperty(ye,"default",{enumerable:!0,value:w})}:function(ye,w){ye.default=w}),r=e&&e.__importStar||function(ye){if(ye&&ye.__esModule)return ye;var w={};if(ye!=null)for(var he in ye)he!=="default"&&Object.prototype.hasOwnProperty.call(ye,he)&&t(w,ye,he);return n(w,ye),w};Object.defineProperty(e,"__esModule",{value:!0}),e.foldMap=e.reduce=e.Filterable=e.Compactable=e.getFunctorWithIndex=e.flap=e.Functor=e.getFilterableWithIndex=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.URI=e.separate=e.partitionMap=e.partition=e.mapWithIndex=e.map=e.filterMap=e.filter=e.compact=e.filterWithIndex=e.filterMapWithIndex=e.partitionWithIndex=e.partitionMapWithIndex=e.fromFoldable=e.singleton=e.getMonoid=e.getEq=e.empty=e.isSubmap=e.lookup=e.lookupWithKey=e.pop=e.modifyAt=e.updateAt=e.deleteAt=e.upsertAt=e.toUnfoldable=e.toReadonlyArray=e.collect=e.values=e.keys=e.elem=e.member=e.isEmpty=e.size=e.getShow=e.toMap=e.fromMap=void 0,e.readonlyMap=e.insertAt=e.difference=e.intersection=e.union=e.getWitherable=e.getTraversableWithIndex=e.getTraversable=e.getFoldableWithIndex=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=e.getFoldable=e.reduceRight=void 0;var i=jr(),a=it(),u=On(),o=r(Wn()),l=r(kn()),f=wi(),h=$i(),d=function(ye){return new Map(ye)};e.fromMap=d;function _(ye){return new Map(ye)}e.toMap=_;function R(ye,w){return{show:function(he){var _e=[];return he.forEach(function(Te,Ne){_e.push("[".concat(ye.show(Ne),", ").concat(w.show(Te),"]"))}),"new Map([".concat(_e.sort().join(", "),"])")}}}e.getShow=R;var A=function(ye){return ye.size};e.size=A;var E=function(ye){return ye.size===0};e.isEmpty=E;function g(ye){var w=N(ye);return function(he,_e){if(_e===void 0){var Te=g(ye);return function(Ne){return Te(he,Ne)}}return o.isSome(w(he,_e))}}e.member=g;function I(ye){return function(w,he){if(he===void 0){var _e=I(ye);return function(Qe){return _e(w,Qe)}}for(var Te=he.values(),Ne;!(Ne=Te.next()).done;){var je=Ne.value;if(ye.equals(w,je))return!0}return!1}}e.elem=I;var C=function(ye){return function(w){return Array.from(w.keys()).sort(ye.compare)}};e.keys=C;var k=function(ye){return function(w){return Array.from(w.values()).sort(ye.compare)}};e.values=k;function L(ye){var w=(0,e.keys)(ye);return function(he){return function(_e){for(var Te=[],Ne=w(_e),je=0,Qe=Ne;je<Qe.length;je++){var X=Qe[je];Te.push(he(X,_e.get(X)))}return Te}}}e.collect=L;var q=function(ye){return L(ye)(function(w,he){return[w,he]})};e.toReadonlyArray=q;function G(ye,w){var he=(0,e.toReadonlyArray)(ye);return function(_e){var Te=he(_e),Ne=Te.length;return w.unfold(0,function(je){return je<Ne?o.some([Te[je],je+1]):o.none})}}e.toUnfoldable=G;var D=function(ye){var w=Re(ye);return function(he,_e){var Te=w(he);return function(Ne){var je=Te(Ne);if(o.isNone(je)){var Qe=new Map(Ne);return Qe.set(he,_e),Qe}else if(je.value[1]!==_e){var Qe=new Map(Ne);return Qe.set(je.value[0],_e),Qe}return Ne}}};e.upsertAt=D;var Y=function(ye){var w=Re(ye);return function(he){return function(_e){var Te=w(he,_e);if(o.isSome(Te)){var Ne=new Map(_e);return Ne.delete(Te.value[0]),Ne}return _e}}};e.deleteAt=Y;var fe=function(ye){var w=(0,e.modifyAt)(ye);return function(he,_e){return w(he,function(){return _e})}};e.updateAt=fe;var $=function(ye){var w=Re(ye);return function(he,_e){return function(Te){var Ne=w(he,Te);if(o.isNone(Ne))return o.none;var je=Ne.value,Qe=je[0],X=je[1],re=_e(X);if(re===X)return o.some(Te);var be=new Map(Te);return be.set(Qe,re),o.some(be)}}};e.modifyAt=$;function x(ye){var w=N(ye),he=(0,e.deleteAt)(ye);return function(_e){var Te=he(_e);return function(Ne){return(0,a.pipe)(w(_e,Ne),l.map(function(je){return[je,Te(Ne)]}))}}}e.pop=x;function Re(ye){return function(w,he){if(he===void 0){var _e=Re(ye);return function(re){return _e(w,re)}}for(var Te=he.entries(),Ne;!(Ne=Te.next()).done;){var je=Ne.value,Qe=je[0],X=je[1];if(ye.equals(Qe,w))return o.some([Qe,X])}return o.none}}e.lookupWithKey=Re;function N(ye){var w=Re(ye);return function(he,_e){if(_e===void 0){var Te=N(ye);return function(Ne){return Te(he,Ne)}}return(0,a.pipe)(w(he,_e),l.map(function(Ne){Ne[0];var je=Ne[1];return je}))}}e.lookup=N;function P(ye,w){var he=Re(ye);return function(_e,Te){if(Te===void 0){var Ne=P(ye,w);return function(st){return Ne(st,_e)}}for(var je=_e.entries(),Qe;!(Qe=je.next()).done;){var X=Qe.value,re=X[0],be=X[1],We=he(re,Te);if(o.isNone(We)||!ye.equals(re,We.value[0])||!w.equals(be,We.value[1]))return!1}return!0}}e.isSubmap=P,e.empty=new Map;function s(ye,w){var he=P(ye,w);return(0,i.fromEquals)(function(_e,Te){return he(_e,Te)&&he(Te,_e)})}e.getEq=s;function S(ye,w){var he=Re(ye);return{concat:function(_e,Te){if((0,e.isEmpty)(_e))return Te;if((0,e.isEmpty)(Te))return _e;for(var Ne=new Map(_e),je=Te.entries(),Qe;!(Qe=je.next()).done;){var X=Qe.value,re=X[0],be=X[1],We=he(re,_e);o.isSome(We)?Ne.set(We.value[0],w.concat(We.value[1],be)):Ne.set(re,be)}return Ne},empty:e.empty}}e.getMonoid=S;var M=function(ye,w){return new Map([[ye,w]])};e.singleton=M;function c(ye,w,he){return function(_e){var Te=Re(ye);return he.reduce(_e,new Map,function(Ne,je){var Qe=je[0],X=je[1],re=Te(Qe,Ne);return o.isSome(re)?Ne.set(re.value[0],w.concat(re.value[1],X)):Ne.set(Qe,X),Ne})}}e.fromFoldable=c;var p=function(ye,w){for(var he=new Map,_e=ye.entries(),Te;!(Te=_e.next()).done;){var Ne=Te.value,je=Ne[0],Qe=Ne[1];he.set(je,w(je,Qe))}return he},U=function(ye){return function(w){for(var he=new Map,_e=new Map,Te=w.entries(),Ne;!(Ne=Te.next()).done;){var je=Ne.value,Qe=je[0],X=je[1],re=ye(Qe,X);o.isLeft(re)?he.set(Qe,re.left):_e.set(Qe,re.right)}return(0,f.separated)(he,_e)}};e.partitionMapWithIndex=U;function j(ye){return function(w){for(var he=new Map,_e=new Map,Te=w.entries(),Ne;!(Ne=Te.next()).done;){var je=Ne.value,Qe=je[0],X=je[1];ye(Qe,X)?_e.set(Qe,X):he.set(Qe,X)}return(0,f.separated)(he,_e)}}e.partitionWithIndex=j;var ae=function(ye){return function(w){for(var he=new Map,_e=w.entries(),Te;!(Te=_e.next()).done;){var Ne=Te.value,je=Ne[0],Qe=Ne[1],X=ye(je,Qe);o.isSome(X)&&he.set(je,X.value)}return he}};e.filterMapWithIndex=ae;function V(ye){return function(w){for(var he=new Map,_e=w.entries(),Te;!(Te=_e.next()).done;){var Ne=Te.value,je=Ne[0],Qe=Ne[1];ye(je,Qe)&&he.set(je,Qe)}return he}}e.filterWithIndex=V;var Q=function(ye,w){return p(ye,function(he,_e){return w(_e)})},me=function(ye,w){return Ke(ye,function(he,_e){return w(_e)})},Ie=function(ye,w){return K(ye,function(he,_e){return w(_e)})},Ee=function(ye,w){return pe(ye,function(he,_e){return w(_e)})},Ge=function(ye,w){return De(ye,function(he,_e){return w(_e)})},Ke=function(ye,w){return(0,a.pipe)(ye,V(w))},K=function(ye,w){return(0,a.pipe)(ye,(0,e.filterMapWithIndex)(w))},pe=function(ye,w){return(0,a.pipe)(ye,j(w))},De=function(ye,w){return(0,a.pipe)(ye,(0,e.partitionMapWithIndex)(w))},Ze=function(ye){for(var w=new Map,he=ye.entries(),_e;!(_e=he.next()).done;){var Te=_e.value,Ne=Te[0],je=Te[1];o.isSome(je)&&w.set(Ne,je.value)}return w};e.compact=Ze;var rt=function(ye){return function(w){return me(w,ye)}};e.filter=rt;var W=function(ye){return function(w){return Ie(w,ye)}};e.filterMap=W;var J=function(ye){return function(w){return Q(w,ye)}};e.map=J;var ne=function(ye){return function(w){return p(w,ye)}};e.mapWithIndex=ne;var Se=function(ye){return function(w){return Ee(w,ye)}};e.partition=Se;var Xe=function(ye){return function(w){return Ge(w,ye)}};e.partitionMap=Xe;var ot=function(ye){for(var w=new Map,he=new Map,_e=ye.entries(),Te;!(Te=_e.next()).done;){var Ne=Te.value,je=Ne[0],Qe=Ne[1];o.isLeft(Qe)?w.set(je,Qe.left):he.set(je,Qe.right)}return(0,f.separated)(w,he)};e.separate=ot,e.URI="ReadonlyMap";var at=function(ye,w){var he=(0,e.union)(ye,w);return{concat:function(_e,Te){return he(Te)(_e)}}};e.getUnionSemigroup=at;var Tt=function(ye,w){return{concat:(0,e.getUnionSemigroup)(ye,w).concat,empty:e.empty}};e.getUnionMonoid=Tt;var Nt=function(ye,w){var he=(0,e.intersection)(ye,w);return{concat:function(_e,Te){return he(Te)(_e)}}};e.getIntersectionSemigroup=Nt;var Wt=function(ye){return function(){var w=(0,e.difference)(ye);return{concat:function(he,_e){return w(_e)(he)}}}};e.getDifferenceMagma=Wt;function Oe(){return{URI:e.URI,_E:void 0,map:Q,mapWithIndex:p,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge,partitionMapWithIndex:De,partitionWithIndex:pe,filterMapWithIndex:K,filterWithIndex:Ke}}e.getFilterableWithIndex=Oe,e.Functor={URI:e.URI,map:Q},e.flap=(0,u.flap)(e.Functor);var Pe=function(){return{URI:e.URI,_E:void 0,map:Q,mapWithIndex:p}};e.getFunctorWithIndex=Pe,e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:Q,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge};var Ye=function(ye){var w=(0,e.reduceWithIndex)(ye);return function(he,_e){return w(he,function(Te,Ne,je){return _e(Ne,je)})}};e.reduce=Ye;var ze=function(ye){var w=(0,e.foldMapWithIndex)(ye);return function(he){var _e=w(he);return function(Te){return _e(function(Ne,je){return Te(je)})}}};e.foldMap=ze;var et=function(ye){var w=(0,e.reduceRightWithIndex)(ye);return function(he,_e){return w(he,function(Te,Ne,je){return _e(Ne,je)})}};e.reduceRight=et;var tt=function(ye){var w=(0,e.reduce)(ye),he=(0,e.foldMap)(ye),_e=(0,e.reduceRight)(ye);return{URI:e.URI,_E:void 0,reduce:function(Te,Ne,je){return(0,a.pipe)(Te,w(Ne,je))},foldMap:function(Te){var Ne=he(Te);return function(je,Qe){return(0,a.pipe)(je,Ne(Qe))}},reduceRight:function(Te,Ne,je){return(0,a.pipe)(Te,_e(Ne,je))}}};e.getFoldable=tt;var de=function(ye){var w=(0,e.keys)(ye);return function(he,_e){return function(Te){for(var Ne=he,je=0,Qe=w(Te);je<Qe.length;je++){var X=Qe[je];Ne=_e(X,Ne,Te.get(X))}return Ne}}};e.reduceWithIndex=de;var ue=function(ye){var w=(0,e.keys)(ye);return function(he){return function(_e){return function(Te){for(var Ne=he.empty,je=0,Qe=w(Te);je<Qe.length;je++){var X=Qe[je];Ne=he.concat(Ne,_e(X,Te.get(X)))}return Ne}}}};e.foldMapWithIndex=ue;var ke=function(ye){var w=(0,e.keys)(ye);return function(he,_e){return function(Te){for(var Ne=he,je=w(Te),Qe=je.length,X=Qe-1;X>=0;X--){var re=je[X];Ne=_e(re,Te.get(re),Ne)}return Ne}}};e.reduceRightWithIndex=ke;var oe=function(ye){var w=(0,e.getFoldable)(ye),he=(0,e.reduceWithIndex)(ye),_e=(0,e.foldMapWithIndex)(ye),Te=(0,e.reduceRightWithIndex)(ye);return{URI:e.URI,_E:void 0,reduce:w.reduce,foldMap:w.foldMap,reduceRight:w.reduceRight,reduceWithIndex:function(Ne,je,Qe){return(0,a.pipe)(Ne,he(je,Qe))},foldMapWithIndex:function(Ne){var je=_e(Ne);return function(Qe,X){return(0,a.pipe)(Qe,je(X))}},reduceRightWithIndex:function(Ne,je,Qe){return(0,a.pipe)(Ne,Te(je,Qe))}}};e.getFoldableWithIndex=oe;var Le=function(ye){var w=(0,e.getTraversableWithIndex)(ye),he=(0,e.getFoldable)(ye);return{URI:e.URI,_E:void 0,map:Q,reduce:he.reduce,foldMap:he.foldMap,reduceRight:he.reduceRight,traverse:w.traverse,sequence:w.sequence}};e.getTraversable=Le;var se=function(ye){var w=(0,e.getFoldableWithIndex)(ye),he=(0,e.keys)(ye),_e=function(je){return function(Qe,X){for(var re=je.of(new Map),be=he(Qe),We=be.length,st=function(Dt){var yn=be[Dt],Z=Qe.get(yn);re=je.ap(je.map(re,function(ce){return function(b){return ce.set(yn,b)}}),X(yn,Z))},_t=0;_t<We;_t++)st(_t);return re}},Te=function(je){var Qe=_e(je);return function(X,re){return Qe(X,function(be,We){return re(We)})}},Ne=function(je){var Qe=_e(je);return function(X){return Qe(X,a.SK)}};return{URI:e.URI,_E:void 0,map:Q,mapWithIndex:p,reduce:w.reduce,foldMap:w.foldMap,reduceRight:w.reduceRight,reduceWithIndex:w.reduceWithIndex,foldMapWithIndex:w.foldMapWithIndex,reduceRightWithIndex:w.reduceRightWithIndex,traverse:Te,sequence:Ne,traverseWithIndex:_e}};e.getTraversableWithIndex=se;function we(ye){var w=(0,e.getTraversableWithIndex)(ye);return{URI:e.URI,_E:void 0,map:Q,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge,reduce:w.reduce,foldMap:w.foldMap,reduceRight:w.reduceRight,traverse:w.traverse,sequence:w.sequence,mapWithIndex:p,reduceWithIndex:w.reduceWithIndex,foldMapWithIndex:w.foldMapWithIndex,reduceRightWithIndex:w.reduceRightWithIndex,traverseWithIndex:w.traverseWithIndex,wilt:(0,h.wiltDefault)(w,e.Compactable),wither:(0,h.witherDefault)(w,e.Compactable)}}e.getWitherable=we;var Be=function(ye,w){var he=N(ye);return function(_e){return function(Te){if((0,e.isEmpty)(Te))return _e;if((0,e.isEmpty)(_e))return Te;for(var Ne=new Map,je=Te.entries(),Qe;!(Qe=je.next()).done;){var X=Qe.value,re=X[0],be=X[1],We=he(re)(_e);o.isSome(We)?Ne.set(re,w.concat(be,We.value)):Ne.set(re,be)}for(var st=_e.entries();!(Qe=st.next()).done;){var _t=Qe.value,re=_t[0],be=_t[1],We=he(re)(Ne);o.isNone(We)&&Ne.set(re,be)}return Ne}}};e.union=Be;var gt=function(ye,w){var he=N(ye);return function(_e){return function(Te){if((0,e.isEmpty)(Te)||(0,e.isEmpty)(_e))return e.empty;for(var Ne=new Map,je=Te.entries(),Qe;!(Qe=je.next()).done;){var X=Qe.value,re=X[0],be=X[1],We=he(re)(_e);o.isSome(We)&&Ne.set(re,w.concat(be,We.value))}return Ne}}};e.intersection=gt;var ft=function(ye){var w=g(ye);return function(he){return function(_e){if((0,e.isEmpty)(_e))return he;if((0,e.isEmpty)(he))return _e;for(var Te=new Map,Ne=_e.entries(),je;!(je=Ne.next()).done;){var Qe=je.value,X=Qe[0],re=Qe[1];w(X)(he)||Te.set(X,re)}for(var be=he.entries();!(je=be.next()).done;){var We=je.value,X=We[0],re=We[1];w(X)(_e)||Te.set(X,re)}return Te}}};e.difference=ft,e.insertAt=e.upsertAt,e.readonlyMap={URI:e.URI,map:Q,compact:e.compact,separate:e.separate,filter:me,filterMap:Ie,partition:Ee,partitionMap:Ge}}}),js=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Map.js"(e){var t=e&&e.__assign||function(){return t=Object.assign||function(Oe){for(var Pe,Ye=1,ze=arguments.length;Ye<ze;Ye++){Pe=arguments[Ye];for(var et in Pe)Object.prototype.hasOwnProperty.call(Pe,et)&&(Oe[et]=Pe[et])}return Oe},t.apply(this,arguments)},n=e&&e.__createBinding||(Object.create?function(Oe,Pe,Ye,ze){ze===void 0&&(ze=Ye);var et=Object.getOwnPropertyDescriptor(Pe,Ye);(!et||("get"in et?!Pe.__esModule:et.writable||et.configurable))&&(et={enumerable:!0,get:function(){return Pe[Ye]}}),Object.defineProperty(Oe,ze,et)}:function(Oe,Pe,Ye,ze){ze===void 0&&(ze=Ye),Oe[ze]=Pe[Ye]}),r=e&&e.__setModuleDefault||(Object.create?function(Oe,Pe){Object.defineProperty(Oe,"default",{enumerable:!0,value:Pe})}:function(Oe,Pe){Oe.default=Pe}),i=e&&e.__importStar||function(Oe){if(Oe&&Oe.__esModule)return Oe;var Pe={};if(Oe!=null)for(var Ye in Oe)Ye!=="default"&&Object.prototype.hasOwnProperty.call(Oe,Ye)&&n(Pe,Oe,Ye);return r(Pe,Oe),Pe};Object.defineProperty(e,"__esModule",{value:!0}),e.getTraversableWithIndex=e.getFoldableWithIndex=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=e.getFoldable=e.reduceRight=e.foldMap=e.reduce=e.getWitherable=e.getFilterableWithIndex=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.URI=e.separate=e.partitionMap=e.partition=e.mapWithIndex=e.map=e.filterMap=e.filter=e.compact=e.filterWithIndex=e.filterMapWithIndex=e.partitionWithIndex=e.partitionMapWithIndex=e.fromFoldable=e.singleton=e.getMonoid=e.getEq=e.isSubmap=e.lookup=e.lookupWithKey=e.pop=e.modifyAt=e.updateAt=e.deleteAt=e.upsertAt=e.toUnfoldable=e.toArray=e.collect=e.values=e.keys=e.elem=e.member=e.isEmpty=e.size=e.getShow=void 0,e.map_=e.insertAt=e.empty=e.difference=e.intersection=e.union=e.Filterable=e.Compactable=e.flap=e.Functor=void 0;var a=it(),u=On(),o=i(Wn()),l=i(kn()),f=i(xS()),h=wi(),d=$i();e.getShow=f.getShow,e.size=f.size,e.isEmpty=f.isEmpty,e.member=f.member,e.elem=f.elem;var _=function(Oe){return function(Pe){return Array.from(Pe.keys()).sort(Oe.compare)}};e.keys=_;var R=function(Oe){return function(Pe){return Array.from(Pe.values()).sort(Oe.compare)}};e.values=R;function A(Oe){var Pe=(0,e.keys)(Oe);return function(Ye){return function(ze){for(var et=[],tt=Pe(ze),de=0,ue=tt;de<ue.length;de++){var ke=ue[de];et.push(Ye(ke,ze.get(ke)))}return et}}}e.collect=A;function E(Oe){return A(Oe)(function(Pe,Ye){return[Pe,Ye]})}e.toArray=E;function g(Oe,Pe){var Ye=E(Oe);return function(ze){var et=Ye(ze),tt=et.length;return Pe.unfold(0,function(de){return de<tt?o.some([et[de],de+1]):o.none})}}e.toUnfoldable=g;var I=function(Oe){var Pe=G(Oe);return function(Ye,ze){var et=Pe(Ye);return function(tt){var de=et(tt);if(o.isNone(de)){var ue=new Map(tt);return ue.set(Ye,ze),ue}else if(de.value[1]!==ze){var ue=new Map(tt);return ue.set(de.value[0],ze),ue}return tt}}};e.upsertAt=I;var C=function(Oe){var Pe=G(Oe);return function(Ye){return function(ze){var et=Pe(Ye,ze);if(o.isSome(et)){var tt=new Map(ze);return tt.delete(et.value[0]),tt}return ze}}};e.deleteAt=C;var k=function(Oe){var Pe=(0,e.modifyAt)(Oe);return function(Ye,ze){return Pe(Ye,function(){return ze})}};e.updateAt=k;var L=function(Oe){var Pe=G(Oe);return function(Ye,ze){return function(et){var tt=Pe(Ye,et);if(o.isNone(tt))return o.none;var de=new Map(et);return de.set(tt.value[0],ze(tt.value[1])),o.some(de)}}};e.modifyAt=L;function q(Oe){var Pe=(0,e.lookup)(Oe),Ye=(0,e.deleteAt)(Oe);return function(ze){var et=Ye(ze);return function(tt){return(0,a.pipe)(Pe(ze,tt),l.map(function(de){return[de,et(tt)]}))}}}e.pop=q;function G(Oe){return function(Pe,Ye){if(Ye===void 0){var ze=G(Oe);return function(oe){return ze(Pe,oe)}}for(var et=Ye.entries(),tt;!(tt=et.next()).done;){var de=tt.value,ue=de[0],ke=de[1];if(Oe.equals(ue,Pe))return o.some([ue,ke])}return o.none}}e.lookupWithKey=G,e.lookup=f.lookup,e.isSubmap=f.isSubmap,e.getEq=f.getEq;function D(Oe,Pe){var Ye=G(Oe);return{concat:function(ze,et){if((0,e.isEmpty)(ze))return et;if((0,e.isEmpty)(et))return ze;for(var tt=new Map(ze),de=et.entries(),ue;!(ue=de.next()).done;){var ke=ue.value,oe=ke[0],Le=ke[1],se=Ye(oe,ze);o.isSome(se)?tt.set(se.value[0],Pe.concat(se.value[1],Le)):tt.set(oe,Le)}return tt},empty:new Map}}e.getMonoid=D;var Y=function(Oe,Pe){return new Map([[Oe,Pe]])};e.singleton=Y;function fe(Oe,Pe,Ye){return function(ze){var et=G(Oe);return Ye.reduce(ze,new Map,function(tt,de){var ue=de[0],ke=de[1],oe=et(ue,tt);return o.isSome(oe)?tt.set(oe.value[0],Pe.concat(oe.value[1],ke)):tt.set(ue,ke),tt})}}e.fromFoldable=fe;var $=function(Oe,Pe){for(var Ye=new Map,ze=Oe.entries(),et;!(et=ze.next()).done;){var tt=et.value,de=tt[0],ue=tt[1];Ye.set(de,Pe(de,ue))}return Ye},x=function(Oe){return function(Pe){for(var Ye=new Map,ze=new Map,et=Pe.entries(),tt;!(tt=et.next()).done;){var de=tt.value,ue=de[0],ke=de[1],oe=Oe(ue,ke);o.isLeft(oe)?Ye.set(ue,oe.left):ze.set(ue,oe.right)}return(0,h.separated)(Ye,ze)}};e.partitionMapWithIndex=x;function Re(Oe){return function(Pe){for(var Ye=new Map,ze=new Map,et=Pe.entries(),tt;!(tt=et.next()).done;){var de=tt.value,ue=de[0],ke=de[1];Oe(ue,ke)?ze.set(ue,ke):Ye.set(ue,ke)}return(0,h.separated)(Ye,ze)}}e.partitionWithIndex=Re;var N=function(Oe){return function(Pe){for(var Ye=new Map,ze=Pe.entries(),et;!(et=ze.next()).done;){var tt=et.value,de=tt[0],ue=tt[1],ke=Oe(de,ue);o.isSome(ke)&&Ye.set(de,ke.value)}return Ye}};e.filterMapWithIndex=N;function P(Oe){return function(Pe){for(var Ye=new Map,ze=Pe.entries(),et;!(et=ze.next()).done;){var tt=et.value,de=tt[0],ue=tt[1];Oe(de,ue)&&Ye.set(de,ue)}return Ye}}e.filterWithIndex=P;var s=function(Oe,Pe){return $(Oe,function(Ye,ze){return Pe(ze)})},S=function(Oe,Pe){return U(Oe,function(Ye,ze){return Pe(ze)})},M=function(Oe,Pe){return j(Oe,function(Ye,ze){return Pe(ze)})},c=function(Oe,Pe){return ae(Oe,function(Ye,ze){return Pe(ze)})},p=function(Oe,Pe){return V(Oe,function(Ye,ze){return Pe(ze)})},U=function(Oe,Pe){return(0,a.pipe)(Oe,P(Pe))},j=function(Oe,Pe){return(0,a.pipe)(Oe,(0,e.filterMapWithIndex)(Pe))},ae=function(Oe,Pe){return(0,a.pipe)(Oe,Re(Pe))},V=function(Oe,Pe){return(0,a.pipe)(Oe,(0,e.partitionMapWithIndex)(Pe))},Q=function(Oe){for(var Pe=new Map,Ye=Oe.entries(),ze;!(ze=Ye.next()).done;){var et=ze.value,tt=et[0],de=et[1];o.isSome(de)&&Pe.set(tt,de.value)}return Pe};e.compact=Q;var me=function(Oe){return function(Pe){return S(Pe,Oe)}};e.filter=me;var Ie=function(Oe){return function(Pe){return M(Pe,Oe)}};e.filterMap=Ie;var Ee=function(Oe){return function(Pe){return s(Pe,Oe)}};e.map=Ee;var Ge=function(Oe){return function(Pe){return $(Pe,Oe)}};e.mapWithIndex=Ge;var Ke=function(Oe){return function(Pe){return c(Pe,Oe)}};e.partition=Ke;var K=function(Oe){return function(Pe){return p(Pe,Oe)}};e.partitionMap=K;var pe=function(Oe){for(var Pe=new Map,Ye=new Map,ze=Oe.entries(),et;!(et=ze.next()).done;){var tt=et.value,de=tt[0],ue=tt[1];o.isLeft(ue)?Pe.set(de,ue.left):Ye.set(de,ue.right)}return(0,h.separated)(Pe,Ye)};e.separate=pe,e.URI="Map";var De=function(Oe,Pe){var Ye=(0,e.union)(Oe,Pe);return{concat:function(ze,et){return Ye(et)(ze)}}};e.getUnionSemigroup=De;var Ze=function(Oe,Pe){return{concat:(0,e.getUnionSemigroup)(Oe,Pe).concat,empty:new Map}};e.getUnionMonoid=Ze;var rt=function(Oe,Pe){var Ye=(0,e.intersection)(Oe,Pe);return{concat:function(ze,et){return Ye(et)(ze)}}};e.getIntersectionSemigroup=rt;var W=function(Oe){return function(){var Pe=(0,e.difference)(Oe);return{concat:function(Ye,ze){return Pe(ze)(Ye)}}}};e.getDifferenceMagma=W;function J(){return{URI:e.URI,_E:void 0,map:s,mapWithIndex:$,compact:e.compact,separate:e.separate,filter:S,filterMap:M,partition:c,partitionMap:p,partitionMapWithIndex:V,partitionWithIndex:ae,filterMapWithIndex:j,filterWithIndex:U}}e.getFilterableWithIndex=J;function ne(Oe){var Pe=(0,e.getTraversableWithIndex)(Oe);return{URI:e.URI,_E:void 0,map:s,compact:e.compact,separate:e.separate,filter:S,filterMap:M,partition:c,partitionMap:p,reduce:Pe.reduce,foldMap:Pe.foldMap,reduceRight:Pe.reduceRight,traverse:Pe.traverse,sequence:Pe.sequence,mapWithIndex:$,reduceWithIndex:Pe.reduceWithIndex,foldMapWithIndex:Pe.foldMapWithIndex,reduceRightWithIndex:Pe.reduceRightWithIndex,traverseWithIndex:Pe.traverseWithIndex,wilt:(0,d.wiltDefault)(Pe,e.Compactable),wither:(0,d.witherDefault)(Pe,e.Compactable)}}e.getWitherable=ne,e.reduce=f.reduce,e.foldMap=f.foldMap,e.reduceRight=f.reduceRight;var Se=function(Oe){return t(t({},f.getFoldable(Oe)),{URI:e.URI})};e.getFoldable=Se,e.reduceWithIndex=f.reduceWithIndex,e.foldMapWithIndex=f.foldMapWithIndex,e.reduceRightWithIndex=f.reduceRightWithIndex;var Xe=function(Oe){return t(t({},f.getFoldableWithIndex(Oe)),{URI:e.URI})};e.getFoldableWithIndex=Xe;var ot=function(Oe){var Pe=(0,e.getFoldableWithIndex)(Oe),Ye=(0,e.keys)(Oe),ze=function(de){return function(ue,ke){for(var oe=de.of(new Map),Le=Ye(ue),se=Le.length,we=function(gt){var ft=Le[gt],ye=ue.get(ft);oe=de.ap(de.map(oe,function(w){return function(he){return w.set(ft,he)}}),ke(ft,ye))},Be=0;Be<se;Be++)we(Be);return oe}},et=function(de){var ue=ze(de);return function(ke,oe){return ue(ke,function(Le,se){return oe(se)})}},tt=function(de){var ue=ze(de);return function(ke){return ue(ke,function(oe,Le){return Le})}};return{URI:e.URI,_E:void 0,map:s,mapWithIndex:$,reduce:Pe.reduce,foldMap:Pe.foldMap,reduceRight:Pe.reduceRight,reduceWithIndex:Pe.reduceWithIndex,foldMapWithIndex:Pe.foldMapWithIndex,reduceRightWithIndex:Pe.reduceRightWithIndex,traverse:et,sequence:tt,traverseWithIndex:ze}};e.getTraversableWithIndex=ot,e.Functor={URI:e.URI,map:s},e.flap=(0,u.flap)(e.Functor),e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:s,compact:e.compact,separate:e.separate,filter:S,filterMap:M,partition:c,partitionMap:p};var at=function(Oe){return new Map(Oe)},Tt=function(Oe,Pe){var Ye=f.union(Oe,Pe);return function(ze){return function(et){return(0,e.isEmpty)(et)?at(ze):(0,e.isEmpty)(ze)?at(et):Ye(ze)(et)}}};e.union=Tt;var Nt=function(Oe,Pe){var Ye=f.intersection(Oe,Pe);return function(ze){return function(et){return(0,e.isEmpty)(et)||(0,e.isEmpty)(ze)?new Map:Ye(ze)(et)}}};e.intersection=Nt;var Wt=function(Oe){var Pe=f.difference(Oe);return function(Ye){return function(ze){return(0,e.isEmpty)(ze)?at(Ye):(0,e.isEmpty)(Ye)?at(ze):Pe(Ye)(ze)}}};e.difference=Wt,e.empty=new Map,e.insertAt=e.upsertAt,e.map_=e.Filterable}}),eA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Identity.js"(e){var t=e&&e.__createBinding||(Object.create?function(N,P,s,S){S===void 0&&(S=s);var M=Object.getOwnPropertyDescriptor(P,s);(!M||("get"in M?!P.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return P[s]}}),Object.defineProperty(N,S,M)}:function(N,P,s,S){S===void 0&&(S=s),N[S]=P[s]}),n=e&&e.__setModuleDefault||(Object.create?function(N,P){Object.defineProperty(N,"default",{enumerable:!0,value:P})}:function(N,P){N.default=P}),r=e&&e.__importStar||function(N){if(N&&N.__esModule)return N;var P={};if(N!=null)for(var s in N)s!=="default"&&Object.prototype.hasOwnProperty.call(N,s)&&t(P,N,s);return n(P,N),P};Object.defineProperty(e,"__esModule",{value:!0}),e.identity=e.chain=e.apS=e.bind=e.let=e.bindTo=e.Do=e.ChainRec=e.Comonad=e.Alt=e.Traversable=e.Foldable=e.chainFirst=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.Pointed=e.flap=e.Functor=e.getEq=e.getShow=e.URI=e.alt=e.altW=e.sequence=e.traverse=e.reduceRight=e.foldMap=e.reduce=e.flatten=e.duplicate=e.extract=e.extend=e.flatMap=e.of=e.ap=e.map=void 0;var i=Jn(),a=or(),u=_m(),o=it(),l=On(),f=r(Wn()),h=function(N,P){return(0,o.pipe)(N,(0,e.map)(P))},d=function(N,P){return(0,o.pipe)(N,(0,e.ap)(P))},_=function(N,P,s){return(0,o.pipe)(N,(0,e.reduce)(P,s))},R=function(N){return function(P,s){return(0,o.pipe)(P,(0,e.foldMap)(N)(s))}},A=function(N,P,s){return(0,o.pipe)(N,(0,e.reduceRight)(P,s))},E=function(N,P){return(0,o.pipe)(N,(0,e.alt)(P))},g=function(N,P){return(0,o.pipe)(N,(0,e.extend)(P))},I=function(N){var P=(0,e.traverse)(N);return function(s,S){return(0,o.pipe)(s,P(S))}},C=u.tailRec,k=function(N){return function(P){return N(P)}};e.map=k;var L=function(N){return function(P){return P(N)}};e.ap=L,e.of=o.identity,e.flatMap=(0,o.dual)(2,function(N,P){return P(N)});var q=function(N){return function(P){return N(P)}};e.extend=q,e.extract=o.identity,e.duplicate=(0,e.extend)(o.identity),e.flatten=(0,e.flatMap)(o.identity);var G=function(N,P){return function(s){return P(N,s)}};e.reduce=G;var D=function(){return function(N){return function(P){return N(P)}}};e.foldMap=D;var Y=function(N,P){return function(s){return P(s,N)}};e.reduceRight=Y;var fe=function(N){return function(P){return function(s){return N.map(P(s),o.identity)}}};e.traverse=fe;var $=function(N){return function(P){return N.map(P,o.identity)}};e.sequence=$;var x=function(){return o.identity};e.altW=x,e.alt=e.altW,e.URI="Identity",e.getShow=o.identity,e.getEq=o.identity,e.Functor={URI:e.URI,map:h},e.flap=(0,l.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.Apply={URI:e.URI,map:h,ap:d},e.apFirst=(0,i.apFirst)(e.Apply),e.apSecond=(0,i.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:h,ap:d,of:e.of},e.Chain={URI:e.URI,map:h,ap:d,chain:e.flatMap},e.Monad={URI:e.URI,map:h,ap:d,of:e.of,chain:e.flatMap},e.chainFirst=(0,a.chainFirst)(e.Chain),e.Foldable={URI:e.URI,reduce:_,foldMap:R,reduceRight:A},e.Traversable={URI:e.URI,map:h,reduce:_,foldMap:R,reduceRight:A,traverse:I,sequence:e.sequence},e.Alt={URI:e.URI,map:h,alt:E},e.Comonad={URI:e.URI,map:h,extend:g,extract:e.extract},e.ChainRec={URI:e.URI,map:h,ap:d,chain:e.flatMap,chainRec:C},e.Do=(0,e.of)(f.emptyRecord),e.bindTo=(0,l.bindTo)(e.Functor);var Re=(0,l.let)(e.Functor);e.let=Re,e.bind=(0,a.bind)(e.Chain),e.apS=(0,i.apS)(e.Apply),e.chain=e.flatMap,e.identity={URI:e.URI,map:h,ap:d,of:e.of,chain:e.flatMap,reduce:_,foldMap:R,reduceRight:A,traverse:I,sequence:e.sequence,alt:E,extract:e.extract,extend:g,chainRec:C}}}),tA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Const.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.const_=e.Bifunctor=e.Contravariant=e.flap=e.Functor=e.URI=e.mapLeft=e.bimap=e.map=e.contramap=e.getApplicative=e.getApply=e.getBooleanAlgebra=e.getHeytingAlgebra=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBounded=e.getOrd=e.getEq=e.getShow=e.make=void 0;var t=it(),n=On();e.make=t.unsafeCoerce;function r(A){return{show:function(E){return"make(".concat(A.show(E),")")}}}e.getShow=r,e.getEq=t.identity,e.getOrd=t.identity,e.getBounded=t.identity,e.getSemigroup=t.identity,e.getMonoid=t.identity,e.getSemiring=t.identity,e.getRing=t.identity,e.getHeytingAlgebra=t.identity,e.getBooleanAlgebra=t.identity;function i(A){return{URI:e.URI,_E:void 0,map:o,ap:function(E,g){return(0,e.make)(A.concat(E,g))}}}e.getApply=i;function a(A){var E=i(A);return{URI:e.URI,_E:void 0,map:E.map,ap:E.ap,of:function(){return(0,e.make)(A.empty)}}}e.getApplicative=a;var u=function(A,E){return(0,t.pipe)(A,(0,e.contramap)(E))},o=function(A,E){return(0,t.pipe)(A,(0,e.map)(E))},l=function(A,E,g){return(0,t.pipe)(A,(0,e.bimap)(E,g))},f=function(A,E){return(0,t.pipe)(A,(0,e.mapLeft)(E))},h=function(){return t.unsafeCoerce};e.contramap=h;var d=function(){return t.unsafeCoerce};e.map=d;var _=function(A){return function(E){return(0,e.make)(A(E))}};e.bimap=_;var R=function(A){return function(E){return(0,e.make)(A(E))}};e.mapLeft=R,e.URI="Const",e.Functor={URI:e.URI,map:o},e.flap=(0,n.flap)(e.Functor),e.Contravariant={URI:e.URI,contramap:u},e.Bifunctor={URI:e.URI,bimap:l,mapLeft:f},e.const_={URI:e.URI,map:o,contramap:u,bimap:l,mapLeft:f}}}),Qc=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/These.js"(e){var t=e&&e.__createBinding||(Object.create?function(W,J,ne,Se){Se===void 0&&(Se=ne);var Xe=Object.getOwnPropertyDescriptor(J,ne);(!Xe||("get"in Xe?!J.__esModule:Xe.writable||Xe.configurable))&&(Xe={enumerable:!0,get:function(){return J[ne]}}),Object.defineProperty(W,Se,Xe)}:function(W,J,ne,Se){Se===void 0&&(Se=ne),W[Se]=J[ne]}),n=e&&e.__setModuleDefault||(Object.create?function(W,J){Object.defineProperty(W,"default",{enumerable:!0,value:J})}:function(W,J){W.default=J}),r=e&&e.__importStar||function(W){if(W&&W.__esModule)return W;var J={};if(W!=null)for(var ne in W)ne!=="default"&&Object.prototype.hasOwnProperty.call(W,ne)&&t(J,W,ne);return n(J,W),J};Object.defineProperty(e,"__esModule",{value:!0}),e.toTuple=e.toTuple2=e.exists=e.elem=e.fromOptionK=e.fromOption=e.fromPredicate=e.FromEither=e.Traversable=e.Foldable=e.FromThese=e.Bifunctor=e.Pointed=e.flap=e.Functor=e.URI=e.of=e.sequence=e.traverse=e.reduceRight=e.foldMap=e.reduce=e.map=e.mapLeft=e.bimap=e.fromOptions=e.getRightOnly=e.getLeftOnly=e.rightOrBoth=e.leftOrBoth=e.getRight=e.getLeft=e.getMonad=e.getChain=e.getApplicative=e.getApply=e.getSemigroup=e.getEq=e.getShow=e.swap=e.fold=e.match=e.foldW=e.matchW=e.both=e.right=e.left=e.isBoth=e.isRight=e.isLeft=void 0,e.these=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=void 0;var i=jr(),a=da(),u=it(),o=On(),l=r(Wn()),f=function(W){return W._tag==="Left"};e.isLeft=f;var h=function(W){return W._tag==="Right"};e.isRight=h;function d(W){return W._tag==="Both"}e.isBoth=d;function _(W){return{_tag:"Left",left:W}}e.left=_;function R(W){return{_tag:"Right",right:W}}e.right=R;function A(W,J){return{_tag:"Both",left:W,right:J}}e.both=A;var E=function(W,J,ne){return function(Se){switch(Se._tag){case"Left":return W(Se.left);case"Right":return J(Se.right);case"Both":return ne(Se.left,Se.right)}}};e.matchW=E,e.foldW=e.matchW,e.match=e.matchW,e.fold=e.match,e.swap=(0,e.match)(R,_,function(W,J){return A(J,W)});function g(W,J){return{show:(0,e.match)(function(ne){return"left(".concat(W.show(ne),")")},function(ne){return"right(".concat(J.show(ne),")")},function(ne,Se){return"both(".concat(W.show(ne),", ").concat(J.show(Se),")")})}}e.getShow=g;function I(W,J){return(0,i.fromEquals)(function(ne,Se){return(0,e.isLeft)(ne)?(0,e.isLeft)(Se)&&W.equals(ne.left,Se.left):(0,e.isRight)(ne)?(0,e.isRight)(Se)&&J.equals(ne.right,Se.right):d(Se)&&W.equals(ne.left,Se.left)&&J.equals(ne.right,Se.right)})}e.getEq=I;function C(W,J){return{concat:function(ne,Se){return(0,e.isLeft)(ne)?(0,e.isLeft)(Se)?_(W.concat(ne.left,Se.left)):(0,e.isRight)(Se)?A(ne.left,Se.right):A(W.concat(ne.left,Se.left),Se.right):(0,e.isRight)(ne)?(0,e.isLeft)(Se)?A(Se.left,ne.right):(0,e.isRight)(Se)?R(J.concat(ne.right,Se.right)):A(Se.left,J.concat(ne.right,Se.right)):(0,e.isLeft)(Se)?A(W.concat(ne.left,Se.left),ne.right):(0,e.isRight)(Se)?A(ne.left,J.concat(ne.right,Se.right)):A(W.concat(ne.left,Se.left),J.concat(ne.right,Se.right))}}}e.getSemigroup=C;var k=function(W){return{URI:e.URI,_E:void 0,map:P,ap:function(J,ne){return(0,e.isLeft)(J)?(0,e.isLeft)(ne)?_(W.concat(J.left,ne.left)):(0,e.isRight)(ne)?_(J.left):_(W.concat(J.left,ne.left)):(0,e.isRight)(J)?(0,e.isLeft)(ne)?_(ne.left):(0,e.isRight)(ne)?R(J.right(ne.right)):A(ne.left,J.right(ne.right)):(0,e.isLeft)(ne)?_(W.concat(J.left,ne.left)):(0,e.isRight)(ne)?A(J.left,J.right(ne.right)):A(W.concat(J.left,ne.left),J.right(ne.right))}}};e.getApply=k;function L(W){var J=(0,e.getApply)(W);return{URI:e.URI,_E:void 0,map:P,ap:J.ap,of:e.of}}e.getApplicative=L;function q(W){var J=(0,e.getApply)(W),ne=function(Se,Xe){if((0,e.isLeft)(Se))return Se;if((0,e.isRight)(Se))return Xe(Se.right);var ot=Xe(Se.right);return(0,e.isLeft)(ot)?_(W.concat(Se.left,ot.left)):(0,e.isRight)(ot)?A(Se.left,ot.right):A(W.concat(Se.left,ot.left),ot.right)};return{URI:e.URI,_E:void 0,map:P,ap:J.ap,chain:ne}}e.getChain=q;function G(W){var J=q(W);return{URI:e.URI,_E:void 0,map:P,of:e.of,ap:J.ap,chain:J.chain,throwError:_}}e.getMonad=G;function D(W){return(0,e.isLeft)(W)?l.some(W.left):(0,e.isRight)(W)?l.none:l.some(W.left)}e.getLeft=D;function Y(W){return(0,e.isLeft)(W)?l.none:((0,e.isRight)(W),l.some(W.right))}e.getRight=Y;function fe(W){return function(J){return l.isNone(J)?_(W):A(W,J.value)}}e.leftOrBoth=fe;function $(W){return function(J){return l.isNone(J)?R(W):A(J.value,W)}}e.rightOrBoth=$;function x(W){return(0,e.isLeft)(W)?l.some(W.left):l.none}e.getLeftOnly=x;function Re(W){return(0,e.isRight)(W)?l.some(W.right):l.none}e.getRightOnly=Re;var N=function(W,J){return l.isNone(W)?l.isNone(J)?l.none:l.some(R(J.value)):l.isNone(J)?l.some(_(W.value)):l.some(A(W.value,J.value))};e.fromOptions=N;var P=function(W,J){return(0,u.pipe)(W,(0,e.map)(J))},s=function(W,J,ne){return(0,u.pipe)(W,(0,e.bimap)(J,ne))},S=function(W,J){return(0,u.pipe)(W,(0,e.mapLeft)(J))},M=function(W,J,ne){return(0,u.pipe)(W,(0,e.reduce)(J,ne))},c=function(W){var J=(0,e.foldMap)(W);return function(ne,Se){return(0,u.pipe)(ne,J(Se))}},p=function(W,J,ne){return(0,u.pipe)(W,(0,e.reduceRight)(J,ne))},U=function(W){var J=(0,e.traverse)(W);return function(ne,Se){return(0,u.pipe)(ne,J(Se))}},j=function(W,J){return function(ne){return(0,e.isLeft)(ne)?_(W(ne.left)):(0,e.isRight)(ne)?R(J(ne.right)):A(W(ne.left),J(ne.right))}};e.bimap=j;var ae=function(W){return function(J){return(0,e.isLeft)(J)?_(W(J.left)):d(J)?A(W(J.left),J.right):J}};e.mapLeft=ae;var V=function(W){return function(J){return(0,e.isLeft)(J)?J:(0,e.isRight)(J)?R(W(J.right)):A(J.left,W(J.right))}};e.map=V;var Q=function(W,J){return function(ne){return(0,e.isLeft)(ne)?W:J(W,ne.right)}};e.reduce=Q;var me=function(W){return function(J){return function(ne){return(0,e.isLeft)(ne)?W.empty:J(ne.right)}}};e.foldMap=me;var Ie=function(W,J){return function(ne){return(0,e.isLeft)(ne)?W:J(ne.right,W)}};e.reduceRight=Ie;var Ee=function(W){return function(J){return function(ne){return(0,e.isLeft)(ne)?W.of(ne):(0,e.isRight)(ne)?W.map(J(ne.right),R):W.map(J(ne.right),function(Se){return A(ne.left,Se)})}}};e.traverse=Ee;var Ge=function(W){return function(J){return(0,e.isLeft)(J)?W.of(J):(0,e.isRight)(J)?W.map(J.right,R):W.map(J.right,function(ne){return A(J.left,ne)})}};e.sequence=Ge,e.of=R,e.URI="These",e.Functor={URI:e.URI,map:P},e.flap=(0,o.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.Bifunctor={URI:e.URI,bimap:s,mapLeft:S},e.FromThese={URI:e.URI,fromThese:u.identity},e.Foldable={URI:e.URI,reduce:M,foldMap:c,reduceRight:p},e.Traversable={URI:e.URI,map:P,reduce:M,foldMap:c,reduceRight:p,traverse:U,sequence:e.sequence},e.FromEither={URI:e.URI,fromEither:u.identity},e.fromPredicate=(0,a.fromPredicate)(e.FromEither),e.fromOption=(0,a.fromOption)(e.FromEither),e.fromOptionK=(0,a.fromOptionK)(e.FromEither);var Ke=function(W){return function(J){return function(ne){return(0,e.isLeft)(ne)?!1:W.equals(J,ne.right)}}};e.elem=Ke;var K=function(W){return function(J){return(0,e.isLeft)(J)?!1:W(J.right)}};e.exists=K;var pe=function(W,J){return function(ne){return(0,e.isLeft)(ne)?[ne.left,J()]:(0,e.isRight)(ne)?[W(),ne.right]:[ne.left,ne.right]}};e.toTuple2=pe;var De=function(W,J){return(0,e.toTuple2)(function(){return W},function(){return J})};e.toTuple=De,e.ApT=(0,e.of)(l.emptyReadonlyArray);var Ze=function(W){return function(J){return function(ne){var Se=l.none,Xe=J(0,l.head(ne));if((0,e.isLeft)(Xe))return Xe;d(Xe)&&(Se=l.some(Xe.left));for(var ot=[Xe.right],at=1;at<ne.length;at++){var Tt=J(at,ne[at]);if((0,e.isLeft)(Tt))return Tt;d(Tt)&&(Se=l.isNone(Se)?l.some(Tt.left):l.some(W.concat(Se.value,Tt.left))),ot.push(Tt.right)}return l.isNone(Se)?R(ot):A(Se.value,ot)}}};e.traverseReadonlyNonEmptyArrayWithIndex=Ze;var rt=function(W){return function(J){var ne=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(W)(J);return function(Se){return l.isNonEmpty(Se)?ne(Se):e.ApT}}};e.traverseReadonlyArrayWithIndex=rt,e.these={URI:e.URI,map:P,bimap:s,mapLeft:S,reduce:M,foldMap:c,reduceRight:p,traverse:U,sequence:e.sequence}}}),nA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Group.js"(e){Object.defineProperty(e,"__esModule",{value:!0})}}),Am=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Reader.js"(e){var t=e&&e.__createBinding||(Object.create?function(s,S,M,c){c===void 0&&(c=M);var p=Object.getOwnPropertyDescriptor(S,M);(!p||("get"in p?!S.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return S[M]}}),Object.defineProperty(s,c,p)}:function(s,S,M,c){c===void 0&&(c=M),s[c]=S[M]}),n=e&&e.__setModuleDefault||(Object.create?function(s,S){Object.defineProperty(s,"default",{enumerable:!0,value:S})}:function(s,S){s.default=S}),r=e&&e.__importStar||function(s){if(s&&s.__esModule)return s;var S={};if(s!=null)for(var M in s)M!=="default"&&Object.prototype.hasOwnProperty.call(s,M)&&t(S,s,M);return n(S,s),S};Object.defineProperty(e,"__esModule",{value:!0}),e.chainW=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apSW=e.apS=e.Do=e.bindW=e.bind=e.let=e.bindTo=e.Choice=e.Strong=e.Category=e.Profunctor=e.tap=e.Monad=e.Chain=e.Applicative=e.apSecondW=e.apSecond=e.apFirstW=e.apFirst=e.Apply=e.Pointed=e.flap=e.Functor=e.URI=e.right=e.left=e.second=e.first=e.id=e.promap=e.compose=e.flatten=e.flattenW=e.flatMap=e.of=e.ap=e.apW=e.map=e.asksReader=e.asksReaderW=e.local=e.asks=e.ask=void 0,e.getMonoid=e.getSemigroup=e.reader=e.chainFirstW=e.chainFirst=e.chain=void 0;var i=sa(),a=Jn(),u=r(or()),o=r(Fn()),l=it(),f=On(),h=r(Wn()),d=function(){return l.identity};e.ask=d,e.asks=l.identity;var _=function(s){return function(S){return function(M){return S(s(M))}}};e.local=_;var R=function(s){return function(S){return s(S)(S)}};e.asksReaderW=R,e.asksReader=e.asksReaderW;var A=function(s,S){return(0,l.pipe)(s,(0,e.map)(S))},E=function(s,S){return(0,l.pipe)(s,(0,e.ap)(S))},g=function(s,S){return(0,l.pipe)(s,(0,e.compose)(S))},I=function(s,S,M){return(0,l.pipe)(s,(0,e.promap)(S,M))},C=function(s){return function(S){return function(M){return s(S(M))}}};e.map=C;var k=function(s){return function(S){return function(M){return S(M)(s(M))}}};e.apW=k,e.ap=e.apW,e.of=l.constant,e.flatMap=(0,l.dual)(2,function(s,S){return function(M){return S(s(M))(M)}}),e.flattenW=(0,e.flatMap)(l.identity),e.flatten=e.flattenW;var L=function(s){return function(S){return(0,l.flow)(s,S)}};e.compose=L;var q=function(s,S){return function(M){return function(c){return S(M(s(c)))}}};e.promap=q;var G=function(){return l.identity};e.id=G;var D=function(s){return function(S){var M=S[0],c=S[1];return[s(M),c]}};e.first=D;var Y=function(s){return function(S){var M=S[0],c=S[1];return[M,s(c)]}};e.second=Y;var fe=function(s){return o.fold(function(S){return h.left(s(S))},o.right)};e.left=fe;var $=function(s){return o.fold(o.left,function(S){return h.right(s(S))})};e.right=$,e.URI="Reader",e.Functor={URI:e.URI,map:A},e.flap=(0,f.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.Apply={URI:e.URI,map:A,ap:E},e.apFirst=(0,a.apFirst)(e.Apply),e.apFirstW=e.apFirst,e.apSecond=(0,a.apSecond)(e.Apply),e.apSecondW=e.apSecond,e.Applicative={URI:e.URI,map:A,ap:E,of:e.of},e.Chain={URI:e.URI,map:A,ap:E,chain:e.flatMap},e.Monad={URI:e.URI,map:A,of:e.of,ap:E,chain:e.flatMap},e.tap=(0,l.dual)(2,u.tap(e.Chain)),e.Profunctor={URI:e.URI,map:A,promap:I},e.Category={URI:e.URI,compose:g,id:e.id},e.Strong={URI:e.URI,map:A,promap:I,first:e.first,second:e.second},e.Choice={URI:e.URI,map:A,promap:I,left:e.left,right:e.right},e.bindTo=(0,f.bindTo)(e.Functor);var x=(0,f.let)(e.Functor);e.let=x,e.bind=u.bind(e.Chain),e.bindW=e.bind,e.Do=(0,e.of)(h.emptyRecord),e.apS=(0,a.apS)(e.Apply),e.apSW=e.apS,e.ApT=(0,e.of)(h.emptyReadonlyArray);var Re=function(s){return function(S){return function(M){for(var c=[s(0,h.head(S))(M)],p=1;p<S.length;p++)c.push(s(p,S[p])(M));return c}}};e.traverseReadonlyNonEmptyArrayWithIndex=Re;var N=function(s){var S=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(s);return function(M){return h.isNonEmpty(M)?S(M):e.ApT}};e.traverseReadonlyArrayWithIndex=N,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var P=function(s){return(0,e.traverseReadonlyArrayWithIndex)(function(S,M){return s(M)})};e.traverseArray=P,e.sequenceArray=(0,e.traverseArray)(l.identity),e.chainW=e.flatMap,e.chain=e.flatMap,e.chainFirst=e.tap,e.chainFirstW=e.tap,e.reader={URI:e.URI,map:A,of:e.of,ap:E,chain:e.flatMap,promap:I,compose:g,id:e.id,first:e.first,second:e.second,left:e.left,right:e.right},e.getSemigroup=(0,a.getApplySemigroup)(e.Apply),e.getMonoid=(0,i.getApplicativeMonoid)(e.Applicative)}}),Em=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/IO.js"(e){var t=e&&e.__createBinding||(Object.create?function(k,L,q,G){G===void 0&&(G=q);var D=Object.getOwnPropertyDescriptor(L,q);(!D||("get"in D?!L.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return L[q]}}),Object.defineProperty(k,G,D)}:function(k,L,q,G){G===void 0&&(G=q),k[G]=L[q]}),n=e&&e.__setModuleDefault||(Object.create?function(k,L){Object.defineProperty(k,"default",{enumerable:!0,value:L})}:function(k,L){k.default=L}),r=e&&e.__importStar||function(k){if(k&&k.__esModule)return k;var L={};if(k!=null)for(var q in k)q!=="default"&&Object.prototype.hasOwnProperty.call(k,q)&&t(L,k,q);return n(L,k),L};Object.defineProperty(e,"__esModule",{value:!0}),e.getMonoid=e.getSemigroup=e.io=e.chainFirst=e.chain=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apS=e.bind=e.let=e.bindTo=e.Do=e.FromIO=e.ChainRec=e.MonadIO=e.fromIO=e.tap=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.Pointed=e.flap=e.asUnit=e.as=e.Functor=e.URI=e.flatten=e.flatMap=e.of=e.ap=e.map=void 0;var i=sa(),a=Jn(),u=r(or()),o=it(),l=On(),f=r(Wn()),h=function(k,L){return function(){return L(k())}},d=function(k,L){return function(){return k()(L())}},_=function(k,L){return function(){for(var q=L(k)();q._tag==="Left";)q=L(q.left)();return q.right}},R=function(k){return function(L){return h(L,k)}};e.map=R;var A=function(k){return function(L){return d(L,k)}};e.ap=A,e.of=o.constant,e.flatMap=(0,o.dual)(2,function(k,L){return function(){return L(k())()}}),e.flatten=(0,e.flatMap)(o.identity),e.URI="IO",e.Functor={URI:e.URI,map:h},e.as=(0,o.dual)(2,(0,l.as)(e.Functor)),e.asUnit=(0,l.asUnit)(e.Functor),e.flap=(0,l.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.Apply={URI:e.URI,map:h,ap:d},e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:h,ap:d,of:e.of},e.Chain={URI:e.URI,map:h,ap:d,chain:e.flatMap},e.Monad={URI:e.URI,map:h,ap:d,of:e.of,chain:e.flatMap},e.tap=(0,o.dual)(2,u.tap(e.Chain)),e.fromIO=o.identity,e.MonadIO={URI:e.URI,map:h,ap:d,of:e.of,chain:e.flatMap,fromIO:e.fromIO},e.ChainRec={URI:e.URI,map:h,ap:d,chain:e.flatMap,chainRec:_},e.FromIO={URI:e.URI,fromIO:o.identity},e.Do=(0,e.of)(f.emptyRecord),e.bindTo=(0,l.bindTo)(e.Functor);var E=(0,l.let)(e.Functor);e.let=E,e.bind=u.bind(e.Chain),e.apS=(0,a.apS)(e.Apply),e.ApT=(0,e.of)(f.emptyReadonlyArray);var g=function(k){return function(L){return function(){for(var q=[k(0,f.head(L))()],G=1;G<L.length;G++)q.push(k(G,L[G])());return q}}};e.traverseReadonlyNonEmptyArrayWithIndex=g;var I=function(k){var L=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(k);return function(q){return f.isNonEmpty(q)?L(q):e.ApT}};e.traverseReadonlyArrayWithIndex=I,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var C=function(k){return(0,e.traverseReadonlyArrayWithIndex)(function(L,q){return k(q)})};e.traverseArray=C,e.sequenceArray=(0,e.traverseArray)(o.identity),e.chain=e.flatMap,e.chainFirst=e.tap,e.io={URI:e.URI,map:h,of:e.of,ap:d,chain:e.flatMap,fromIO:e.fromIO,chainRec:_},e.getSemigroup=(0,a.getApplySemigroup)(e.Apply),e.getMonoid=(0,i.getApplicativeMonoid)(e.Applicative)}}),rA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/ReadonlyTuple.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readonlyTuple=e.Traversable=e.Foldable=e.Comonad=e.Semigroupoid=e.Bifunctor=e.mapLeft=e.map=e.flap=e.Functor=e.URI=e.sequence=e.traverse=e.reduceRight=e.foldMap=e.reduce=e.duplicate=e.extract=e.extend=e.compose=e.mapSnd=e.mapFst=e.bimap=e.getChainRec=e.getMonad=e.getChain=e.getApplicative=e.getApply=e.swap=e.snd=e.fst=void 0;var t=it(),n=On();function r(s){return s[0]}e.fst=r;function i(s){return s[1]}e.snd=i;var a=function(s){return[i(s),r(s)]};e.swap=a;function u(s){return{URI:e.URI,_E:void 0,map:R,ap:function(S,M){return[r(S)(r(M)),s.concat(i(S),i(M))]}}}e.getApply=u;var o=function(s){return function(S){return[S,s.empty]}};function l(s){var S=u(s);return{URI:e.URI,_E:void 0,map:R,ap:S.ap,of:o(s)}}e.getApplicative=l;function f(s){var S=u(s);return{URI:e.URI,_E:void 0,map:R,ap:S.ap,chain:function(M,c){var p=c(r(M)),U=p[0],j=p[1];return[U,s.concat(i(M),j)]}}}e.getChain=f;function h(s){var S=f(s);return{URI:e.URI,_E:void 0,map:R,ap:S.ap,chain:S.chain,of:o(s)}}e.getMonad=h;function d(s){var S=function(c,p){for(var U=p(c),j=s.empty,ae=r(U);ae._tag==="Left";)j=s.concat(j,i(U)),U=p(ae.left),ae=r(U);return[ae.right,s.concat(j,i(U))]},M=f(s);return{URI:e.URI,_E:void 0,map:R,ap:M.ap,chain:M.chain,chainRec:S}}e.getChainRec=d;var _=function(s,S){return(0,t.pipe)(s,(0,e.compose)(S))},R=function(s,S){return(0,t.pipe)(s,(0,e.mapFst)(S))},A=function(s,S,M){return(0,t.pipe)(s,(0,e.bimap)(S,M))},E=function(s,S){return(0,t.pipe)(s,(0,e.mapSnd)(S))},g=function(s,S){return(0,t.pipe)(s,(0,e.extend)(S))},I=function(s,S,M){return(0,t.pipe)(s,(0,e.reduce)(S,M))},C=function(s){var S=(0,e.foldMap)(s);return function(M,c){return(0,t.pipe)(M,S(c))}},k=function(s,S,M){return(0,t.pipe)(s,(0,e.reduceRight)(S,M))},L=function(s){var S=(0,e.traverse)(s);return function(M,c){return(0,t.pipe)(M,S(c))}},q=function(s,S){return function(M){return[S(r(M)),s(i(M))]}};e.bimap=q;var G=function(s){return function(S){return[s(r(S)),i(S)]}};e.mapFst=G;var D=function(s){return function(S){return[r(S),s(i(S))]}};e.mapSnd=D;var Y=function(s){return function(S){return[r(S),i(s)]}};e.compose=Y;var fe=function(s){return function(S){return[s(S),i(S)]}};e.extend=fe,e.extract=r,e.duplicate=(0,e.extend)(t.identity);var $=function(s,S){return function(M){return S(s,r(M))}};e.reduce=$;var x=function(){return function(s){return function(S){return s(r(S))}}};e.foldMap=x;var Re=function(s,S){return function(M){return S(r(M),s)}};e.reduceRight=Re;var N=function(s){return function(S){return function(M){return s.map(S(r(M)),function(c){return[c,i(M)]})}}};e.traverse=N;var P=function(s){return function(S){return s.map(r(S),function(M){return[M,i(S)]})}};e.sequence=P,e.URI="ReadonlyTuple",e.Functor={URI:e.URI,map:R},e.flap=(0,n.flap)(e.Functor),e.map=e.mapFst,e.mapLeft=e.mapSnd,e.Bifunctor={URI:e.URI,bimap:A,mapLeft:E},e.Semigroupoid={URI:e.URI,compose:_},e.Comonad={URI:e.URI,map:R,extend:g,extract:e.extract},e.Foldable={URI:e.URI,reduce:I,foldMap:C,reduceRight:k},e.Traversable={URI:e.URI,map:R,reduce:I,foldMap:C,reduceRight:k,traverse:L,sequence:e.sequence},e.readonlyTuple={URI:e.URI,compose:_,map:R,bimap:A,mapLeft:E,extract:e.extract,extend:g,reduce:I,foldMap:C,reduceRight:k,traverse:L,sequence:e.sequence}}}),iA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Tuple.js"(e){var t=e&&e.__createBinding||(Object.create?function(P,s,S,M){M===void 0&&(M=S);var c=Object.getOwnPropertyDescriptor(s,S);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[S]}}),Object.defineProperty(P,M,c)}:function(P,s,S,M){M===void 0&&(M=S),P[M]=s[S]}),n=e&&e.__setModuleDefault||(Object.create?function(P,s){Object.defineProperty(P,"default",{enumerable:!0,value:s})}:function(P,s){P.default=s}),r=e&&e.__importStar||function(P){if(P&&P.__esModule)return P;var s={};if(P!=null)for(var S in P)S!=="default"&&Object.prototype.hasOwnProperty.call(P,S)&&t(s,P,S);return n(s,P),s};Object.defineProperty(e,"__esModule",{value:!0}),e.tuple=e.mapLeft=e.map=e.Traversable=e.Foldable=e.Comonad=e.Semigroupoid=e.Bifunctor=e.flap=e.Functor=e.URI=e.sequence=e.traverse=e.reduceRight=e.reduce=e.foldMap=e.extract=e.duplicate=e.extend=e.compose=e.mapSnd=e.mapFst=e.bimap=e.getChainRec=e.getMonad=e.getChain=e.getApplicative=e.getApply=e.swap=e.snd=e.fst=void 0;var i=it(),a=On(),u=r(rA());e.fst=u.fst,e.snd=u.snd;var o=function(P){return[(0,e.snd)(P),(0,e.fst)(P)]};e.swap=o;function l(P){return{URI:e.URI,_E:void 0,map:E,ap:function(s,S){return[(0,e.fst)(s)((0,e.fst)(S)),P.concat((0,e.snd)(s),(0,e.snd)(S))]}}}e.getApply=l;var f=function(P){return function(s){return[s,P.empty]}};function h(P){var s=l(P);return{URI:e.URI,_E:void 0,map:s.map,ap:s.ap,of:f(P)}}e.getApplicative=h;function d(P){var s=l(P);return{URI:e.URI,_E:void 0,map:s.map,ap:s.ap,chain:function(S,M){var c=M((0,e.fst)(S)),p=c[0],U=c[1];return[p,P.concat((0,e.snd)(S),U)]}}}e.getChain=d;function _(P){var s=d(P);return{URI:e.URI,_E:void 0,map:s.map,ap:s.ap,chain:s.chain,of:f(P)}}e.getMonad=_;function R(P){var s=function(M,c){for(var p=c(M),U=P.empty,j=(0,e.fst)(p);j._tag==="Left";)U=P.concat(U,(0,e.snd)(p)),p=c(j.left),j=(0,e.fst)(p);return[j.right,P.concat(U,(0,e.snd)(p))]},S=d(P);return{URI:e.URI,_E:void 0,map:S.map,ap:S.ap,chain:S.chain,chainRec:s}}e.getChainRec=R;var A=function(P,s){return(0,i.pipe)(P,(0,e.compose)(s))},E=function(P,s){return(0,i.pipe)(P,(0,e.mapFst)(s))},g=function(P,s,S){return(0,i.pipe)(P,(0,e.bimap)(s,S))},I=function(P,s){return(0,i.pipe)(P,(0,e.mapSnd)(s))},C=function(P,s){return(0,i.pipe)(P,(0,e.extend)(s))},k=function(P,s,S){return(0,i.pipe)(P,(0,e.reduce)(s,S))},L=function(P){var s=(0,e.foldMap)(P);return function(S,M){return(0,i.pipe)(S,s(M))}},q=function(P,s,S){return(0,i.pipe)(P,(0,e.reduceRight)(s,S))};function G(P){var s=(0,e.traverse)(P);return function(S,M){return(0,i.pipe)(S,s(M))}}var D=function(P,s){return function(S){return[s((0,e.fst)(S)),P((0,e.snd)(S))]}};e.bimap=D;var Y=function(P){return function(s){return[P((0,e.fst)(s)),(0,e.snd)(s)]}};e.mapFst=Y;var fe=function(P){return function(s){return[(0,e.fst)(s),P((0,e.snd)(s))]}};e.mapSnd=fe;var $=function(P){return function(s){return[(0,e.fst)(s),(0,e.snd)(P)]}};e.compose=$;var x=function(P){return function(s){return[P(s),(0,e.snd)(s)]}};e.extend=x,e.duplicate=(0,e.extend)(i.identity),e.extract=u.extract,e.foldMap=u.foldMap,e.reduce=u.reduce,e.reduceRight=u.reduceRight;var Re=function(P){return function(s){return function(S){return P.map(s((0,e.fst)(S)),function(M){return[M,(0,e.snd)(S)]})}}};e.traverse=Re;var N=function(P){return function(s){return P.map((0,e.fst)(s),function(S){return[S,(0,e.snd)(s)]})}};e.sequence=N,e.URI="Tuple",e.Functor={URI:e.URI,map:E},e.flap=(0,a.flap)(e.Functor),e.Bifunctor={URI:e.URI,bimap:g,mapLeft:I},e.Semigroupoid={URI:e.URI,compose:A},e.Comonad={URI:e.URI,map:E,extend:C,extract:e.extract},e.Foldable={URI:e.URI,reduce:k,foldMap:L,reduceRight:q},e.Traversable={URI:e.URI,map:E,reduce:k,foldMap:L,reduceRight:q,traverse:G,sequence:e.sequence},e.map=e.mapFst,e.mapLeft=e.mapSnd,e.tuple={URI:e.URI,compose:A,map:E,bimap:g,mapLeft:I,extract:e.extract,extend:C,reduce:k,foldMap:L,reduceRight:q,traverse:G,sequence:e.sequence}}}),aA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Bounded.js"(e){var t=e&&e.__createBinding||(Object.create?function(o,l,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(l,f);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(o,h,d)}:function(o,l,f,h){h===void 0&&(h=f),o[h]=l[f]}),n=e&&e.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),r=e&&e.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var f in o)f!=="default"&&Object.prototype.hasOwnProperty.call(o,f)&&t(l,o,f);return n(l,o),l};Object.defineProperty(e,"__esModule",{value:!0}),e.boundedNumber=e.reverse=e.clamp=void 0;var i=r(Wr()),a=function(o){return i.clamp(o)(o.bottom,o.top)};e.clamp=a;var u=function(o){var l=i.reverse(o);return{equals:l.equals,compare:l.compare,top:o.bottom,bottom:o.top}};e.reverse=u,e.boundedNumber={equals:i.ordNumber.equals,compare:i.ordNumber.compare,top:1/0,bottom:-1/0}}}),eo=wt({"../../node_modules/.pnpm/io-ts@2.2.16_fp-ts@2.16.2/node_modules/io-ts/lib/index.js"(e){var t=e&&e.__extends||function(){var b=function(v,y){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,z){O.__proto__=z}||function(O,z){for(var ve in z)Object.prototype.hasOwnProperty.call(z,ve)&&(O[ve]=z[ve])},b(v,y)};return function(v,y){b(v,y);function O(){this.constructor=v}v.prototype=y===null?Object.create(y):(O.prototype=y.prototype,new O)}}(),n=e&&e.__assign||function(){return n=Object.assign||function(b){for(var v,y=1,O=arguments.length;y<O;y++){v=arguments[y];for(var z in v)Object.prototype.hasOwnProperty.call(v,z)&&(b[z]=v[z])}return b},n.apply(this,arguments)},r=e&&e.__spreadArrays||function(){for(var b=0,v=0,y=arguments.length;v<y;v++)b+=arguments[v].length;for(var O=Array(b),z=0,v=0;v<y;v++)for(var ve=arguments[v],ie=0,F=ve.length;ie<F;ie++,z++)O[z]=ve[ie];return O};Object.defineProperty(e,"__esModule",{value:!0}),e.partial=e.PartialType=e.type=e.InterfaceType=e.array=e.ArrayType=e.recursion=e.RecursiveType=e.Int=e.brand=e.RefinementType=e.keyof=e.KeyofType=e.literal=e.LiteralType=e.void=e.undefined=e.null=e.UnknownRecord=e.AnyDictionaryType=e.UnknownArray=e.AnyArrayType=e.boolean=e.BooleanType=e.bigint=e.BigIntType=e.number=e.NumberType=e.string=e.StringType=e.unknown=e.UnknownType=e.voidType=e.VoidType=e.UndefinedType=e.nullType=e.NullType=e.getIndex=e.getTags=e.emptyTags=e.mergeAll=e.getDomainKeys=e.appendContext=e.getContextEntry=e.getFunctionName=e.identity=e.Type=e.success=e.failure=e.failures=void 0,e.alias=e.clean=e.StrictType=e.dictionary=e.Integer=e.refinement=e.object=e.ObjectType=e.Dictionary=e.any=e.AnyType=e.never=e.NeverType=e.getDefaultContext=e.getValidationError=e.interface=e.Array=e.taggedUnion=e.TaggedUnionType=e.Function=e.FunctionType=e.exact=e.ExactType=e.strict=e.readonlyArray=e.ReadonlyArrayType=e.readonly=e.ReadonlyType=e.tuple=e.TupleType=e.intersection=e.IntersectionType=e.union=e.UnionType=e.record=e.DictionaryType=void 0;var i=Fn();e.failures=i.left;var a=function(b,v,y){return e.failures([{value:b,context:v,message:y}])};e.failure=a,e.success=i.right;var u=function(){function b(v,y,O,z){this.name=v,this.is=y,this.validate=O,this.encode=z,this.decode=this.decode.bind(this)}return b.prototype.pipe=function(v,y){var O=this;return y===void 0&&(y="pipe("+this.name+", "+v.name+")"),new b(y,v.is,function(z,ve){var ie=O.validate(z,ve);return i.isLeft(ie)?ie:v.validate(ie.right,ve)},this.encode===e.identity&&v.encode===e.identity?e.identity:function(z){return O.encode(v.encode(z))})},b.prototype.asDecoder=function(){return this},b.prototype.asEncoder=function(){return this},b.prototype.decode=function(v){return this.validate(v,[{key:"",type:this,actual:v}])},b}();e.Type=u;var o=function(b){return b};e.identity=o;function l(b){return b.displayName||b.name||"<function"+b.length+">"}e.getFunctionName=l;function f(b,v){return{key:b,type:v}}e.getContextEntry=f;function h(b,v,y,O){for(var z=b.length,ve=Array(z+1),ie=0;ie<z;ie++)ve[ie]=b[ie];return ve[z]={key:v,type:y,actual:O},ve}e.appendContext=h;function d(b,v){for(var y=v.length,O=0;O<y;O++)b.push(v[O])}var _=Object.prototype.hasOwnProperty;function R(b){return Object.keys(b).map(function(v){return v+": "+b[v].name}).join(", ")}function A(b){for(var v=0;v<b.length;v++)if(b[v].encode!==e.identity)return!1;return!0}function E(b){return"{ "+R(b)+" }"}function g(b){return"Partial<"+b+">"}function I(b,v,y,O){O===void 0&&(O="{ [K in "+v.name+"]: "+y.name+" }");var z=b.length;return new ue(O,function(ve){return e.UnknownRecord.is(ve)&&b.every(function(ie){return y.is(ve[ie])})},function(ve,ie){var F=e.UnknownRecord.validate(ve,ie);if(i.isLeft(F))return F;for(var ge=F.right,qe={},ct=[],vt=!1,yt=0;yt<z;yt++){var Lt=b[yt],sn=ge[Lt],cn=y.validate(sn,h(ie,Lt,y,sn));if(i.isLeft(cn))d(ct,cn.left);else{var Yt=cn.right;vt=vt||Yt!==sn,qe[Lt]=Yt}}return ct.length>0?e.failures(ct):e.success(vt||Object.keys(ge).length!==z?qe:ge)},y.encode===e.identity?e.identity:function(ve){for(var ie={},F=0;F<z;F++){var ge=b[F];ie[ge]=y.encode(ve[ge])}return ie},v,y)}function C(b){var v;if(P(b)){var y=b.value;if(e.string.is(y))return v={},v[y]=null,v}else{if(s(b))return b.keys;if(ae(b)){var O=b.types.map(function(z){return C(z)});return O.some(Ke.is)?void 0:Object.assign.apply(Object,r([{}],O))}}}e.getDomainKeys=C;function k(b,v,y){return y===void 0&&(y="{ [K in "+b.name+"]: "+v.name+" }"),new ue(y,function(O){return e.UnknownRecord.is(O)?Object.keys(O).every(function(z){return b.is(z)&&v.is(O[z])}):N(v)&&Array.isArray(O)},function(O,z){if(e.UnknownRecord.is(O)){for(var ve={},ie=[],F=Object.keys(O),ge=F.length,qe=!1,ct=0;ct<ge;ct++){var vt=F[ct],yt=O[vt],Lt=b.validate(vt,h(z,vt,b,vt));if(i.isLeft(Lt))d(ie,Lt.left);else{var sn=Lt.right;qe=qe||sn!==vt,vt=sn;var cn=v.validate(yt,h(z,vt,v,yt));if(i.isLeft(cn))d(ie,cn.left);else{var Yt=cn.right;qe=qe||Yt!==yt,ve[vt]=Yt}}}return ie.length>0?e.failures(ie):e.success(qe?ve:O)}return N(v)&&Array.isArray(O)?e.success(O):e.failure(O,z)},b.encode===e.identity&&v.encode===e.identity?e.identity:function(O){for(var z={},ve=Object.keys(O),ie=ve.length,F=0;F<ie;F++){var ge=ve[F];z[String(b.encode(ge))]=v.encode(O[ge])}return z},b,v)}function L(b){return"("+b.map(function(v){return v.name}).join(" | ")+")"}function q(b,v){for(var y=!0,O=!0,z=!e.UnknownRecord.is(b),ve=0,ie=v;ve<ie.length;ve++){var F=ie[ve];F!==b&&(y=!1),e.UnknownRecord.is(F)&&(O=!1)}if(y)return b;if(O)return v[v.length-1];for(var ge={},qe=0,ct=v;qe<ct.length;qe++){var F=ct[qe];for(var vt in F)(!ge.hasOwnProperty(vt)||z||F[vt]!==b[vt])&&(ge[vt]=F[vt])}return ge}e.mergeAll=q;function G(b){switch(b._tag){case"RefinementType":case"ReadonlyType":return G(b.type);case"InterfaceType":case"StrictType":case"PartialType":return b.props;case"IntersectionType":return b.types.reduce(function(v,y){return Object.assign(v,G(y))},{})}}function D(b,v){for(var y=Object.getOwnPropertyNames(b),O=!1,z={},ve=0;ve<y.length;ve++){var ie=y[ve];_.call(v,ie)?z[ie]=b[ie]:O=!0}return O?z:b}function Y(b){return S(b)?"{| "+R(b.props)+" |}":M(b)?g("{| "+R(b.props)+" |}"):"Exact<"+b.name+">"}function fe(b){return b.length>0}e.emptyTags={};function $(b,v){for(var y=[],O=0,z=b;O<z.length;O++){var ve=z[O];v.indexOf(ve)!==-1&&y.push(ve)}return y}function x(b,v){if(b===e.emptyTags)return v;if(v===e.emptyTags)return b;var y=Object.assign({},b);for(var O in v)if(b.hasOwnProperty(O)){var z=$(b[O],v[O]);if(fe(z))y[O]=z;else{y=e.emptyTags;break}}else y[O]=v[O];return y}function Re(b,v){if(b===e.emptyTags||v===e.emptyTags)return e.emptyTags;var y=e.emptyTags;for(var O in b)if(v.hasOwnProperty(O)){var z=$(b[O],v[O]);z.length===0&&(y===e.emptyTags&&(y={}),y[O]=b[O].concat(v[O]))}return y}function N(b){return b._tag==="AnyType"}function P(b){return b._tag==="LiteralType"}function s(b){return b._tag==="KeyofType"}function S(b){return b._tag==="InterfaceType"}function M(b){return b._tag==="PartialType"}function c(b){return b._tag==="StrictType"}function p(b){return b._tag==="ExactType"}function U(b){return b._tag==="RefinementType"}function j(b){return b._tag==="IntersectionType"}function ae(b){return b._tag==="UnionType"}function V(b){return b._tag==="RecursiveType"}var Q=[];function me(b){if(Q.indexOf(b)!==-1)return e.emptyTags;if(S(b)||c(b)){var v=e.emptyTags;for(var y in b.props){var O=b.props[y];P(O)&&(v===e.emptyTags&&(v={}),v[y]=[O.value])}return v}else{if(p(b)||U(b))return me(b.type);if(j(b))return b.types.reduce(function(ve,ie){return x(ve,me(ie))},e.emptyTags);if(ae(b))return b.types.slice(1).reduce(function(ve,ie){return Re(ve,me(ie))},me(b.types[0]));if(V(b)){Q.push(b);var z=me(b.type);return Q.pop(),z}}return e.emptyTags}e.getTags=me;function Ie(b){var v=me(b[0]),y=Object.keys(v),O=b.length,z=function(qe){for(var ct=v[qe].slice(),vt=[v[qe]],yt=1;yt<O;yt++){var Lt=b[yt],sn=me(Lt),cn=sn[qe];if(cn===void 0)return"continue-keys";if(cn.some(function(Yt){return ct.indexOf(Yt)!==-1}))return"continue-keys";ct.push.apply(ct,cn),vt.push(cn)}return{value:[qe,vt]}};e:for(var ve=0,ie=y;ve<ie.length;ve++){var F=ie[ve],ge=z(F);if(typeof ge=="object")return ge.value;switch(ge){case"continue-keys":continue e}}}e.getIndex=Ie;var Ee=function(b){t(v,b);function v(){var y=b.call(this,"null",function(O){return O===null},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="NullType",y}return v}(u);e.NullType=Ee,e.nullType=new Ee,e.null=e.nullType;var Ge=function(b){t(v,b);function v(){var y=b.call(this,"undefined",function(O){return O===void 0},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="UndefinedType",y}return v}(u);e.UndefinedType=Ge;var Ke=new Ge;e.undefined=Ke;var K=function(b){t(v,b);function v(){var y=b.call(this,"void",Ke.is,Ke.validate,e.identity)||this;return y._tag="VoidType",y}return v}(u);e.VoidType=K,e.voidType=new K,e.void=e.voidType;var pe=function(b){t(v,b);function v(){var y=b.call(this,"unknown",function(O){return!0},e.success,e.identity)||this;return y._tag="UnknownType",y}return v}(u);e.UnknownType=pe,e.unknown=new pe;var De=function(b){t(v,b);function v(){var y=b.call(this,"string",function(O){return typeof O=="string"},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="StringType",y}return v}(u);e.StringType=De,e.string=new De;var Ze=function(b){t(v,b);function v(){var y=b.call(this,"number",function(O){return typeof O=="number"},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="NumberType",y}return v}(u);e.NumberType=Ze,e.number=new Ze;var rt=function(b){t(v,b);function v(){var y=b.call(this,"bigint",function(O){return typeof O=="bigint"},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="BigIntType",y}return v}(u);e.BigIntType=rt,e.bigint=new rt;var W=function(b){t(v,b);function v(){var y=b.call(this,"boolean",function(O){return typeof O=="boolean"},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="BooleanType",y}return v}(u);e.BooleanType=W,e.boolean=new W;var J=function(b){t(v,b);function v(){var y=b.call(this,"UnknownArray",Array.isArray,function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="AnyArrayType",y}return v}(u);e.AnyArrayType=J,e.UnknownArray=new J,e.Array=e.UnknownArray;var ne=function(b){t(v,b);function v(){var y=b.call(this,"UnknownRecord",function(O){var z=Object.prototype.toString.call(O);return z==="[object Object]"||z==="[object Window]"},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="AnyDictionaryType",y}return v}(u);e.AnyDictionaryType=ne,e.UnknownRecord=new ne;var Se=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.value=ie,F._tag="LiteralType",F}return v}(u);e.LiteralType=Se;function Xe(b,v){v===void 0&&(v=JSON.stringify(b));var y=function(O){return O===b};return new Se(v,y,function(O,z){return y(O)?e.success(b):e.failure(O,z)},e.identity,b)}e.literal=Xe;var ot=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.keys=ie,F._tag="KeyofType",F}return v}(u);e.KeyofType=ot;function at(b,v){v===void 0&&(v=Object.keys(b).map(function(O){return JSON.stringify(O)}).join(" | "));var y=function(O){return e.string.is(O)&&_.call(b,O)};return new ot(v,y,function(O,z){return y(O)?e.success(O):e.failure(O,z)},e.identity,b)}e.keyof=at;var Tt=function(b){t(v,b);function v(y,O,z,ve,ie,F){var ge=b.call(this,y,O,z,ve)||this;return ge.type=ie,ge.predicate=F,ge._tag="RefinementType",ge}return v}(u);e.RefinementType=Tt;function Nt(b,v,y){return Dt(b,v,y)}e.brand=Nt,e.Int=Nt(e.number,function(b){return Number.isInteger(b)},"Int");var Wt=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.runDefinition=ie,F._tag="RecursiveType",F}return v}(u);e.RecursiveType=Wt,Object.defineProperty(Wt.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function Oe(b,v){var y,O=function(){return y||(y=v(z),y.name=b),y},z=new Wt(b,function(ve){return O().is(ve)},function(ve,ie){return O().validate(ve,ie)},function(ve){return O().encode(ve)},O);return z}e.recursion=Oe;var Pe=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.type=ie,F._tag="ArrayType",F}return v}(u);e.ArrayType=Pe;function Ye(b,v){return v===void 0&&(v="Array<"+b.name+">"),new Pe(v,function(y){return e.UnknownArray.is(y)&&y.every(b.is)},function(y,O){var z=e.UnknownArray.validate(y,O);if(i.isLeft(z))return z;for(var ve=z.right,ie=ve.length,F=ve,ge=[],qe=0;qe<ie;qe++){var ct=ve[qe],vt=b.validate(ct,h(O,String(qe),b,ct));if(i.isLeft(vt))d(ge,vt.left);else{var yt=vt.right;yt!==ct&&(F===ve&&(F=ve.slice()),F[qe]=yt)}}return ge.length>0?e.failures(ge):e.success(F)},b.encode===e.identity?e.identity:function(y){return y.map(b.encode)},b)}e.array=Ye;var ze=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.props=ie,F._tag="InterfaceType",F}return v}(u);e.InterfaceType=ze;function et(b,v){v===void 0&&(v=E(b));var y=Object.keys(b),O=y.map(function(ve){return b[ve]}),z=y.length;return new ze(v,function(ve){if(e.UnknownRecord.is(ve)){for(var ie=0;ie<z;ie++){var F=y[ie],ge=ve[F];if(ge===void 0&&!_.call(ve,F)||!O[ie].is(ge))return!1}return!0}return!1},function(ve,ie){var F=e.UnknownRecord.validate(ve,ie);if(i.isLeft(F))return F;for(var ge=F.right,qe=ge,ct=[],vt=0;vt<z;vt++){var yt=y[vt],Lt=qe[yt],sn=O[vt],cn=sn.validate(Lt,h(ie,yt,sn,Lt));if(i.isLeft(cn))d(ct,cn.left);else{var Yt=cn.right;(Yt!==Lt||Yt===void 0&&!_.call(qe,yt))&&(qe===ge&&(qe=n({},ge)),qe[yt]=Yt)}}return ct.length>0?e.failures(ct):e.success(qe)},A(O)?e.identity:function(ve){for(var ie=n({},ve),F=0;F<z;F++){var ge=y[F],qe=O[F].encode;qe!==e.identity&&(ie[ge]=qe(ve[ge]))}return ie},b)}e.type=et,e.interface=et;var tt=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.props=ie,F._tag="PartialType",F}return v}(u);e.PartialType=tt;function de(b,v){v===void 0&&(v=g(E(b)));var y=Object.keys(b),O=y.map(function(ve){return b[ve]}),z=y.length;return new tt(v,function(ve){if(e.UnknownRecord.is(ve)){for(var ie=0;ie<z;ie++){var F=y[ie],ge=ve[F];if(ge!==void 0&&!b[F].is(ge))return!1}return!0}return!1},function(ve,ie){var F=e.UnknownRecord.validate(ve,ie);if(i.isLeft(F))return F;for(var ge=F.right,qe=ge,ct=[],vt=0;vt<z;vt++){var yt=y[vt],Lt=qe[yt],sn=b[yt],cn=sn.validate(Lt,h(ie,yt,sn,Lt));if(i.isLeft(cn))Lt!==void 0&&d(ct,cn.left);else{var Yt=cn.right;Yt!==Lt&&(qe===ge&&(qe=n({},ge)),qe[yt]=Yt)}}return ct.length>0?e.failures(ct):e.success(qe)},A(O)?e.identity:function(ve){for(var ie=n({},ve),F=0;F<z;F++){var ge=y[F],qe=ve[ge];qe!==void 0&&(ie[ge]=O[F].encode(qe))}return ie},b)}e.partial=de;var ue=function(b){t(v,b);function v(y,O,z,ve,ie,F){var ge=b.call(this,y,O,z,ve)||this;return ge.domain=ie,ge.codomain=F,ge._tag="DictionaryType",ge}return v}(u);e.DictionaryType=ue;function ke(b,v,y){var O=C(b);return O?I(Object.keys(O),b,v,y):k(b,v,y)}e.record=ke;var oe=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.types=ie,F._tag="UnionType",F}return v}(u);e.UnionType=oe;function Le(b,v){v===void 0&&(v=L(b));var y=Ie(b);if(y!==void 0&&b.length>0){var O=y[0],z=y[1],ve=z.length,ie=function(F){for(var ge=0;ge<ve;ge++)if(z[ge].indexOf(F)!==-1)return ge};return new Qe(v,function(F){if(e.UnknownRecord.is(F)){var ge=ie(F[O]);return ge!==void 0?b[ge].is(F):!1}return!1},function(F,ge){var qe=e.UnknownRecord.validate(F,ge);if(i.isLeft(qe))return qe;var ct=qe.right,vt=ie(ct[O]);if(vt===void 0)return e.failure(F,ge);var yt=b[vt];return yt.validate(ct,h(ge,String(vt),yt,ct))},A(b)?e.identity:function(F){var ge=ie(F[O]);if(ge===void 0)throw new Error("no codec found to encode value in union codec "+v);return b[ge].encode(F)},b,O)}else return new oe(v,function(F){return b.some(function(ge){return ge.is(F)})},function(F,ge){for(var qe=[],ct=0;ct<b.length;ct++){var vt=b[ct],yt=vt.validate(F,h(ge,String(ct),vt,F));if(i.isLeft(yt))d(qe,yt.left);else return e.success(yt.right)}return e.failures(qe)},A(b)?e.identity:function(F){for(var ge=0,qe=b;ge<qe.length;ge++){var ct=qe[ge];if(ct.is(F))return ct.encode(F)}throw new Error("no codec found to encode value in union type "+v)},b)}e.union=Le;var se=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.types=ie,F._tag="IntersectionType",F}return v}(u);e.IntersectionType=se;function we(b,v){v===void 0&&(v="("+b.map(function(O){return O.name}).join(" & ")+")");var y=b.length;return new se(v,function(O){return b.every(function(z){return z.is(O)})},b.length===0?e.success:function(O,z){for(var ve=[],ie=[],F=0;F<y;F++){var ge=b[F],qe=ge.validate(O,h(z,String(F),ge,O));i.isLeft(qe)?d(ie,qe.left):ve.push(qe.right)}return ie.length>0?e.failures(ie):e.success(q(O,ve))},b.length===0?e.identity:function(O){return q(O,b.map(function(z){return z.encode(O)}))},b)}e.intersection=we;var Be=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.types=ie,F._tag="TupleType",F}return v}(u);e.TupleType=Be;function gt(b,v){v===void 0&&(v="["+b.map(function(O){return O.name}).join(", ")+"]");var y=b.length;return new Be(v,function(O){return e.UnknownArray.is(O)&&O.length===y&&b.every(function(z,ve){return z.is(O[ve])})},function(O,z){var ve=e.UnknownArray.validate(O,z);if(i.isLeft(ve))return ve;for(var ie=ve.right,F=ie.length>y?ie.slice(0,y):ie,ge=[],qe=0;qe<y;qe++){var ct=ie[qe],vt=b[qe],yt=vt.validate(ct,h(z,String(qe),vt,ct));if(i.isLeft(yt))d(ge,yt.left);else{var Lt=yt.right;Lt!==ct&&(F===ie&&(F=ie.slice()),F[qe]=Lt)}}return ge.length>0?e.failures(ge):e.success(F)},A(b)?e.identity:function(O){return b.map(function(z,ve){return z.encode(O[ve])})},b)}e.tuple=gt;var ft=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.type=ie,F._tag="ReadonlyType",F}return v}(u);e.ReadonlyType=ft;function ye(b,v){return v===void 0&&(v="Readonly<"+b.name+">"),new ft(v,b.is,b.validate,b.encode,b)}e.readonly=ye;var w=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.type=ie,F._tag="ReadonlyArrayType",F}return v}(u);e.ReadonlyArrayType=w;function he(b,v){v===void 0&&(v="ReadonlyArray<"+b.name+">");var y=Ye(b);return new w(v,y.is,y.validate,y.encode,b)}e.readonlyArray=he;var _e=function(b,v){return Ne(et(b),v)};e.strict=_e;var Te=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.type=ie,F._tag="ExactType",F}return v}(u);e.ExactType=Te;function Ne(b,v){v===void 0&&(v=Y(b));var y=G(b);return new Te(v,b.is,function(O,z){var ve=e.UnknownRecord.validate(O,z);if(i.isLeft(ve))return ve;var ie=b.validate(O,z);return i.isLeft(ie)?ie:i.right(D(ie.right,y))},function(O){return b.encode(D(O,y))},b)}e.exact=Ne;var je=function(b){t(v,b);function v(){var y=b.call(this,"Function",function(O){return typeof O=="function"},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="FunctionType",y}return v}(u);e.FunctionType=je,e.Function=new je;var Qe=function(b){t(v,b);function v(y,O,z,ve,ie,F){var ge=b.call(this,y,O,z,ve,ie)||this;return ge.tag=F,ge}return v}(oe);e.TaggedUnionType=Qe;var X=function(b,v,y){y===void 0&&(y=L(v));var O=Le(v,y);return O instanceof Qe?O:(console.warn("[io-ts] Cannot build a tagged union for "+y+", returning a de-optimized union"),new Qe(y,O.is,O.validate,O.encode,v,b))};e.taggedUnion=X;var re=function(b,v){return{value:b,context:v}};e.getValidationError=re;var be=function(b){return[{key:"",type:b}]};e.getDefaultContext=be;var We=function(b){t(v,b);function v(){var y=b.call(this,"never",function(O){return!1},function(O,z){return e.failure(O,z)},function(){throw new Error("cannot encode never")})||this;return y._tag="NeverType",y}return v}(u);e.NeverType=We,e.never=new We;var st=function(b){t(v,b);function v(){var y=b.call(this,"any",function(O){return!0},e.success,e.identity)||this;return y._tag="AnyType",y}return v}(u);e.AnyType=st,e.any=new st,e.Dictionary=e.UnknownRecord;var _t=function(b){t(v,b);function v(){var y=b.call(this,"object",function(O){return O!==null&&typeof O=="object"},function(O,z){return y.is(O)?e.success(O):e.failure(O,z)},e.identity)||this;return y._tag="ObjectType",y}return v}(u);e.ObjectType=_t,e.object=new _t;function Dt(b,v,y){return y===void 0&&(y="("+b.name+" | "+l(v)+")"),new Tt(y,function(O){return b.is(O)&&v(O)},function(O,z){var ve=b.validate(O,z);if(i.isLeft(ve))return ve;var ie=ve.right;return v(ie)?e.success(ie):e.failure(ie,z)},b.encode,b,v)}e.refinement=Dt,e.Integer=Dt(e.number,Number.isInteger,"Integer"),e.dictionary=ke;var yn=function(b){t(v,b);function v(y,O,z,ve,ie){var F=b.call(this,y,O,z,ve)||this;return F.props=ie,F._tag="StrictType",F}return v}(u);e.StrictType=yn;function Z(b){return b}e.clean=Z;function ce(b){return function(){return b}}e.alias=ce}}),Rm=wt({"../../node_modules/.pnpm/io-ts@2.2.16_fp-ts@2.16.2/node_modules/io-ts/lib/PathReporter.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PathReporter=e.success=e.failure=void 0;var t=eo(),n=Fn();function r(l){return typeof l=="function"?t.getFunctionName(l):typeof l=="number"&&!isFinite(l)?isNaN(l)?"NaN":l>0?"Infinity":"-Infinity":JSON.stringify(l)}function i(l){return l.map(function(f){var h=f.key,d=f.type;return h+": "+d.name}).join("/")}function a(l){return l.message!==void 0?l.message:"Invalid value "+r(l.value)+" supplied to "+i(l.context)}function u(l){return l.map(a)}e.failure=u;function o(){return["No errors!"]}e.success=o,e.PathReporter={report:n.fold(u,o)}}}),uA=wt({"../../node_modules/.pnpm/fast-diff@1.3.0/node_modules/fast-diff/diff.js"(e,t){var n=-1,r=1,i=0;function a(N,P,s,S,M){if(N===P)return N?[[i,N]]:[];if(s!=null){var c=x(N,P,s);if(c)return c}var p=f(N,P),U=N.substring(0,p);N=N.substring(p),P=P.substring(p),p=d(N,P);var j=N.substring(N.length-p);N=N.substring(0,N.length-p),P=P.substring(0,P.length-p);var ae=u(N,P);return U&&ae.unshift([i,U]),j&&ae.push([i,j]),L(ae,M),S&&R(ae),ae}function u(N,P){var s;if(!N)return[[r,P]];if(!P)return[[n,N]];var S=N.length>P.length?N:P,M=N.length>P.length?P:N,c=S.indexOf(M);if(c!==-1)return s=[[r,S.substring(0,c)],[i,M],[r,S.substring(c+M.length)]],N.length>P.length&&(s[0][0]=s[2][0]=n),s;if(M.length===1)return[[n,N],[r,P]];var p=_(N,P);if(p){var U=p[0],j=p[1],ae=p[2],V=p[3],Q=p[4],me=a(U,ae),Ie=a(j,V);return me.concat([[i,Q]],Ie)}return o(N,P)}function o(N,P){for(var s=N.length,S=P.length,M=Math.ceil((s+S)/2),c=M,p=2*M,U=new Array(p),j=new Array(p),ae=0;ae<p;ae++)U[ae]=-1,j[ae]=-1;U[c+1]=0,j[c+1]=0;for(var V=s-S,Q=V%2!==0,me=0,Ie=0,Ee=0,Ge=0,Ke=0;Ke<M;Ke++){for(var K=-Ke+me;K<=Ke-Ie;K+=2){var pe=c+K,De;K===-Ke||K!==Ke&&U[pe-1]<U[pe+1]?De=U[pe+1]:De=U[pe-1]+1;for(var Ze=De-K;De<s&&Ze<S&&N.charAt(De)===P.charAt(Ze);)De++,Ze++;if(U[pe]=De,De>s)Ie+=2;else if(Ze>S)me+=2;else if(Q){var rt=c+V-K;if(rt>=0&&rt<p&&j[rt]!==-1){var W=s-j[rt];if(De>=W)return l(N,P,De,Ze)}}}for(var J=-Ke+Ee;J<=Ke-Ge;J+=2){var rt=c+J,W;J===-Ke||J!==Ke&&j[rt-1]<j[rt+1]?W=j[rt+1]:W=j[rt-1]+1;for(var ne=W-J;W<s&&ne<S&&N.charAt(s-W-1)===P.charAt(S-ne-1);)W++,ne++;if(j[rt]=W,W>s)Ge+=2;else if(ne>S)Ee+=2;else if(!Q){var pe=c+V-J;if(pe>=0&&pe<p&&U[pe]!==-1){var De=U[pe],Ze=c+De-pe;if(W=s-W,De>=W)return l(N,P,De,Ze)}}}}return[[n,N],[r,P]]}function l(N,P,s,S){var M=N.substring(0,s),c=P.substring(0,S),p=N.substring(s),U=P.substring(S),j=a(M,c),ae=a(p,U);return j.concat(ae)}function f(N,P){if(!N||!P||N.charAt(0)!==P.charAt(0))return 0;for(var s=0,S=Math.min(N.length,P.length),M=S,c=0;s<M;)N.substring(c,M)==P.substring(c,M)?(s=M,c=s):S=M,M=Math.floor((S-s)/2+s);return q(N.charCodeAt(M-1))&&M--,M}function h(N,P){var s=N.length,S=P.length;if(s==0||S==0)return 0;s>S?N=N.substring(s-S):s<S&&(P=P.substring(0,s));var M=Math.min(s,S);if(N==P)return M;for(var c=0,p=1;;){var U=N.substring(M-p),j=P.indexOf(U);if(j==-1)return c;p+=j,(j==0||N.substring(M-p)==P.substring(0,p))&&(c=p,p++)}}function d(N,P){if(!N||!P||N.slice(-1)!==P.slice(-1))return 0;for(var s=0,S=Math.min(N.length,P.length),M=S,c=0;s<M;)N.substring(N.length-M,N.length-c)==P.substring(P.length-M,P.length-c)?(s=M,c=s):S=M,M=Math.floor((S-s)/2+s);return G(N.charCodeAt(N.length-M))&&M--,M}function _(N,P){var s=N.length>P.length?N:P,S=N.length>P.length?P:N;if(s.length<4||S.length*2<s.length)return null;function M(Ie,Ee,Ge){for(var Ke=Ie.substring(Ge,Ge+Math.floor(Ie.length/4)),K=-1,pe="",De,Ze,rt,W;(K=Ee.indexOf(Ke,K+1))!==-1;){var J=f(Ie.substring(Ge),Ee.substring(K)),ne=d(Ie.substring(0,Ge),Ee.substring(0,K));pe.length<ne+J&&(pe=Ee.substring(K-ne,K)+Ee.substring(K,K+J),De=Ie.substring(0,Ge-ne),Ze=Ie.substring(Ge+J),rt=Ee.substring(0,K-ne),W=Ee.substring(K+J))}return pe.length*2>=Ie.length?[De,Ze,rt,W,pe]:null}var c=M(s,S,Math.ceil(s.length/4)),p=M(s,S,Math.ceil(s.length/2)),U;if(!c&&!p)return null;p?c?U=c[4].length>p[4].length?c:p:U=p:U=c;var j,ae,V,Q;N.length>P.length?(j=U[0],ae=U[1],V=U[2],Q=U[3]):(V=U[0],Q=U[1],j=U[2],ae=U[3]);var me=U[4];return[j,ae,V,Q,me]}function R(N){for(var P=!1,s=[],S=0,M=null,c=0,p=0,U=0,j=0,ae=0;c<N.length;)N[c][0]==i?(s[S++]=c,p=j,U=ae,j=0,ae=0,M=N[c][1]):(N[c][0]==r?j+=N[c][1].length:ae+=N[c][1].length,M&&M.length<=Math.max(p,U)&&M.length<=Math.max(j,ae)&&(N.splice(s[S-1],0,[n,M]),N[s[S-1]+1][0]=r,S--,S--,c=S>0?s[S-1]:-1,p=0,U=0,j=0,ae=0,M=null,P=!0)),c++;for(P&&L(N),k(N),c=1;c<N.length;){if(N[c-1][0]==n&&N[c][0]==r){var V=N[c-1][1],Q=N[c][1],me=h(V,Q),Ie=h(Q,V);me>=Ie?(me>=V.length/2||me>=Q.length/2)&&(N.splice(c,0,[i,Q.substring(0,me)]),N[c-1][1]=V.substring(0,V.length-me),N[c+1][1]=Q.substring(me),c++):(Ie>=V.length/2||Ie>=Q.length/2)&&(N.splice(c,0,[i,V.substring(0,Ie)]),N[c-1][0]=r,N[c-1][1]=Q.substring(0,Q.length-Ie),N[c+1][0]=n,N[c+1][1]=V.substring(Ie),c++),c++}c++}}var A=/[^a-zA-Z0-9]/,E=/\s/,g=/[\r\n]/,I=/\n\r?\n$/,C=/^\r?\n\r?\n/;function k(N){function P(Ie,Ee){if(!Ie||!Ee)return 6;var Ge=Ie.charAt(Ie.length-1),Ke=Ee.charAt(0),K=Ge.match(A),pe=Ke.match(A),De=K&&Ge.match(E),Ze=pe&&Ke.match(E),rt=De&&Ge.match(g),W=Ze&&Ke.match(g),J=rt&&Ie.match(I),ne=W&&Ee.match(C);return J||ne?5:rt||W?4:K&&!De&&Ze?3:De||Ze?2:K||pe?1:0}for(var s=1;s<N.length-1;){if(N[s-1][0]==i&&N[s+1][0]==i){var S=N[s-1][1],M=N[s][1],c=N[s+1][1],p=d(S,M);if(p){var U=M.substring(M.length-p);S=S.substring(0,S.length-p),M=U+M.substring(0,M.length-p),c=U+c}for(var j=S,ae=M,V=c,Q=P(S,M)+P(M,c);M.charAt(0)===c.charAt(0);){S+=M.charAt(0),M=M.substring(1)+c.charAt(0),c=c.substring(1);var me=P(S,M)+P(M,c);me>=Q&&(Q=me,j=S,ae=M,V=c)}N[s-1][1]!=j&&(j?N[s-1][1]=j:(N.splice(s-1,1),s--),N[s][1]=ae,V?N[s+1][1]=V:(N.splice(s+1,1),s--))}s++}}function L(N,P){N.push([i,""]);for(var s=0,S=0,M=0,c="",p="",U;s<N.length;){if(s<N.length-1&&!N[s][1]){N.splice(s,1);continue}switch(N[s][0]){case r:M++,p+=N[s][1],s++;break;case n:S++,c+=N[s][1],s++;break;case i:var j=s-M-S-1;if(P){if(j>=0&&Y(N[j][1])){var ae=N[j][1].slice(-1);if(N[j][1]=N[j][1].slice(0,-1),c=ae+c,p=ae+p,!N[j][1]){N.splice(j,1),s--;var V=j-1;N[V]&&N[V][0]===r&&(M++,p=N[V][1]+p,V--),N[V]&&N[V][0]===n&&(S++,c=N[V][1]+c,V--),j=V}}if(D(N[s][1])){var ae=N[s][1].charAt(0);N[s][1]=N[s][1].slice(1),c+=ae,p+=ae}}if(s<N.length-1&&!N[s][1]){N.splice(s,1);break}if(c.length>0||p.length>0){c.length>0&&p.length>0&&(U=f(p,c),U!==0&&(j>=0?N[j][1]+=p.substring(0,U):(N.splice(0,0,[i,p.substring(0,U)]),s++),p=p.substring(U),c=c.substring(U)),U=d(p,c),U!==0&&(N[s][1]=p.substring(p.length-U)+N[s][1],p=p.substring(0,p.length-U),c=c.substring(0,c.length-U)));var Q=M+S;c.length===0&&p.length===0?(N.splice(s-Q,Q),s=s-Q):c.length===0?(N.splice(s-Q,Q,[r,p]),s=s-Q+1):p.length===0?(N.splice(s-Q,Q,[n,c]),s=s-Q+1):(N.splice(s-Q,Q,[n,c],[r,p]),s=s-Q+2)}s!==0&&N[s-1][0]===i?(N[s-1][1]+=N[s][1],N.splice(s,1)):s++,M=0,S=0,c="",p="";break}}N[N.length-1][1]===""&&N.pop();var me=!1;for(s=1;s<N.length-1;)N[s-1][0]===i&&N[s+1][0]===i&&(N[s][1].substring(N[s][1].length-N[s-1][1].length)===N[s-1][1]?(N[s][1]=N[s-1][1]+N[s][1].substring(0,N[s][1].length-N[s-1][1].length),N[s+1][1]=N[s-1][1]+N[s+1][1],N.splice(s-1,1),me=!0):N[s][1].substring(0,N[s+1][1].length)==N[s+1][1]&&(N[s-1][1]+=N[s+1][1],N[s][1]=N[s][1].substring(N[s+1][1].length)+N[s+1][1],N.splice(s+1,1),me=!0)),s++;me&&L(N,P)}function q(N){return N>=55296&&N<=56319}function G(N){return N>=56320&&N<=57343}function D(N){return G(N.charCodeAt(0))}function Y(N){return q(N.charCodeAt(N.length-1))}function fe(N){for(var P=[],s=0;s<N.length;s++)N[s][1].length>0&&P.push(N[s]);return P}function $(N,P,s,S){return Y(N)||D(S)?null:fe([[i,N],[n,P],[r,s],[i,S]])}function x(N,P,s){var S=typeof s=="number"?{index:s,length:0}:s.oldRange,M=typeof s=="number"?null:s.newRange,c=N.length,p=P.length;if(S.length===0&&(M===null||M.length===0)){var U=S.index,j=N.slice(0,U),ae=N.slice(U),V=M?M.index:null;e:{var Q=U+p-c;if(V!==null&&V!==Q||Q<0||Q>p)break e;var me=P.slice(0,Q),Ie=P.slice(Q);if(Ie!==ae)break e;var Ee=Math.min(U,Q),Ge=j.slice(0,Ee),Ke=me.slice(0,Ee);if(Ge!==Ke)break e;var K=j.slice(Ee),pe=me.slice(Ee);return $(Ge,K,pe,ae)}e:{if(V!==null&&V!==U)break e;var De=U,me=P.slice(0,De),Ie=P.slice(De);if(me!==j)break e;var Ze=Math.min(c-De,p-De),rt=ae.slice(ae.length-Ze),W=Ie.slice(Ie.length-Ze);if(rt!==W)break e;var K=ae.slice(0,ae.length-Ze),pe=Ie.slice(0,Ie.length-Ze);return $(j,K,pe,rt)}}if(S.length>0&&M&&M.length===0)e:{var Ge=N.slice(0,S.index),rt=N.slice(S.index+S.length),Ee=Ge.length,Ze=rt.length;if(p<Ee+Ze)break e;var Ke=P.slice(0,Ee),W=P.slice(p-Ze);if(Ge!==Ke||rt!==W)break e;var K=N.slice(Ee,c-Ze),pe=P.slice(Ee,p-Ze);return $(Ge,K,pe,rt)}return null}function Re(N,P,s,S){return a(N,P,s,S,!0)}Re.INSERT=r,Re.DELETE=n,Re.EQUAL=i,t.exports=Re}});function wm(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}var Tm=ou({"../../node_modules/.pnpm/@swc+helpers@0.5.11/node_modules/@swc/helpers/esm/_iterable_to_array.js"(){}});function of(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Om=ou({"../../node_modules/.pnpm/@swc+helpers@0.5.11/node_modules/@swc/helpers/esm/_array_like_to_array.js"(){}});function Gs(e,t){if(e){if(typeof e=="string")return of(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return of(e,t)}}var Hs=ou({"../../node_modules/.pnpm/@swc+helpers@0.5.11/node_modules/@swc/helpers/esm/_unsupported_iterable_to_array.js"(){Om()}});function oA(e){if(Array.isArray(e))return of(e)}var cA=ou({"../../node_modules/.pnpm/@swc+helpers@0.5.11/node_modules/@swc/helpers/esm/_array_without_holes.js"(){Om()}});function lA(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var fA=ou({"../../node_modules/.pnpm/@swc+helpers@0.5.11/node_modules/@swc/helpers/esm/_non_iterable_spread.js"(){}});function Dr(e){return oA(e)||wm(e)||Gs(e)||lA()}var to=ou({"../../node_modules/.pnpm/@swc+helpers@0.5.11/node_modules/@swc/helpers/esm/_to_consumable_array.js"(){cA(),Tm(),fA(),Hs()}}),sA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/IOEither.js"(e){var t=e&&e.__createBinding||(Object.create?function(Ie,Ee,Ge,Ke){Ke===void 0&&(Ke=Ge);var K=Object.getOwnPropertyDescriptor(Ee,Ge);(!K||("get"in K?!Ee.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return Ee[Ge]}}),Object.defineProperty(Ie,Ke,K)}:function(Ie,Ee,Ge,Ke){Ke===void 0&&(Ke=Ge),Ie[Ke]=Ee[Ge]}),n=e&&e.__setModuleDefault||(Object.create?function(Ie,Ee){Object.defineProperty(Ie,"default",{enumerable:!0,value:Ee})}:function(Ie,Ee){Ie.default=Ee}),r=e&&e.__importStar||function(Ie){if(Ie&&Ie.__esModule)return Ie;var Ee={};if(Ie!=null)for(var Ge in Ie)Ge!=="default"&&Object.prototype.hasOwnProperty.call(Ie,Ge)&&t(Ee,Ie,Ge);return n(Ee,Ie),Ee};Object.defineProperty(e,"__esModule",{value:!0}),e.apFirst=e.ApplyPar=e.Bifunctor=e.Pointed=e.flap=e.asUnit=e.as=e.Functor=e.getFilterable=e.getCompactable=e.getAltIOValidation=e.getApplicativeIOValidation=e.URI=e.throwError=e.altW=e.alt=e.flatten=e.flattenW=e.flatMap=e.of=e.apW=e.ap=e.mapLeft=e.mapError=e.bimap=e.mapBoth=e.map=e.swap=e.orLeft=e.orElseFirstIOK=e.tapError=e.orElseW=e.orElse=e.toUnion=e.tryCatchK=e.tryCatch=e.getOrElseW=e.getOrElse=e.foldW=e.matchEW=e.fold=e.matchE=e.matchW=e.match=e.fromIO=e.fromEither=e.leftIO=e.rightIO=e.right=e.left=void 0,e.traverseReadonlyArrayWithIndexSeq=e.traverseReadonlyNonEmptyArrayWithIndexSeq=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apSW=e.apS=e.bindW=e.bind=e.let=e.bindTo=e.Do=e.bracketW=e.bracket=e.fromEitherK=e.filterOrElseW=e.filterOrElse=e.fromPredicate=e.chainFirstEitherKW=e.chainFirstEitherK=e.chainEitherKW=e.chainEitherK=e.chainIOK=e.flatMapIO=e.flatMapEither=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.chainOptionKW=e.chainOptionK=e.fromOptionK=e.fromOption=e.chainFirstIOK=e.fromIOK=e.MonadThrow=e.MonadIO=e.Alt=e.tapIO=e.tapEither=e.tap=e.FromIO=e.FromEither=e.Monad=e.Chain=e.ApplicativeSeq=e.ApplicativePar=e.apSecondW=e.apSecond=e.apFirstW=void 0,e.getIOValidation=e.getSemigroup=e.getApplyMonoid=e.getApplySemigroup=e.ioEither=e.orElseFirstW=e.orElseFirst=e.chainFirstW=e.chainFirst=e.chainW=e.chain=e.Applicative=e.sequenceSeqArray=e.traverseSeqArray=e.traverseSeqArrayWithIndex=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=void 0;var i=sa(),a=Jn(),u=r(or()),o=Us(),l=r(Fn()),f=r(ym()),h=bm(),d=da(),_=Fs(),R=it(),A=On(),E=r(Wn()),g=r(Em());e.left=f.left(g.Pointed),e.right=f.right(g.Pointed),e.rightIO=f.rightF(g.Functor),e.leftIO=f.leftF(g.Functor),e.fromEither=g.of,e.fromIO=e.rightIO,e.match=f.match(g.Functor),e.matchW=e.match,e.matchE=f.matchE(g.Monad),e.fold=e.matchE,e.matchEW=e.matchE,e.foldW=e.matchEW,e.getOrElse=f.getOrElse(g.Monad),e.getOrElseW=e.getOrElse;var I=function(Ie,Ee){return function(){return l.tryCatch(Ie,Ee)}};e.tryCatch=I;var C=function(Ie,Ee){return function(){for(var Ge=[],Ke=0;Ke<arguments.length;Ke++)Ge[Ke]=arguments[Ke];return(0,e.tryCatch)(function(){return Ie.apply(void 0,Ge)},Ee)}};e.tryCatchK=C,e.toUnion=f.toUnion(g.Functor),e.orElse=f.orElse(g.Monad),e.orElseW=e.orElse,e.tapError=(0,R.dual)(2,f.tapError(g.Monad));var k=function(Ie){return(0,e.tapError)((0,e.fromIOK)(Ie))};e.orElseFirstIOK=k,e.orLeft=f.orLeft(g.Monad),e.swap=f.swap(g.Functor);var L=function(Ie,Ee){return(0,R.pipe)(Ie,(0,e.map)(Ee))},q=function(Ie,Ee){return(0,R.pipe)(Ie,(0,e.ap)(Ee))},G=function(Ie,Ee){return(0,e.flatMap)(Ie,function(Ge){return(0,R.pipe)(Ee,(0,e.map)(Ge))})},D=function(Ie,Ee){return(0,R.pipe)(Ie,(0,e.alt)(Ee))};e.map=f.map(g.Functor),e.mapBoth=(0,R.dual)(3,f.mapBoth(g.Functor)),e.bimap=e.mapBoth,e.mapError=(0,R.dual)(2,f.mapError(g.Functor)),e.mapLeft=e.mapError,e.ap=f.ap(g.Apply),e.apW=e.ap,e.of=e.right,e.flatMap=(0,R.dual)(2,f.flatMap(g.Monad)),e.flattenW=(0,e.flatMap)(R.identity),e.flatten=e.flattenW,e.alt=f.alt(g.Monad),e.altW=e.alt,e.throwError=e.left,e.URI="IOEither";function Y(Ie){var Ee=(0,a.ap)(g.Apply,l.getApplicativeValidation(Ie));return{URI:e.URI,_E:void 0,map:L,ap:function(Ge,Ke){return(0,R.pipe)(Ge,Ee(Ke))},of:e.of}}e.getApplicativeIOValidation=Y;function fe(Ie){var Ee=f.altValidation(g.Monad,Ie);return{URI:e.URI,_E:void 0,map:L,alt:function(Ge,Ke){return(0,R.pipe)(Ge,Ee(Ke))}}}e.getAltIOValidation=fe;var $=function(Ie){var Ee=l.getCompactable(Ie);return{URI:e.URI,_E:void 0,compact:(0,o.compact)(g.Functor,Ee),separate:(0,o.separate)(g.Functor,Ee,l.Functor)}};e.getCompactable=$;function x(Ie){var Ee=l.getFilterable(Ie),Ge=(0,e.getCompactable)(Ie),Ke=(0,h.filter)(g.Functor,Ee),K=(0,h.filterMap)(g.Functor,Ee),pe=(0,h.partition)(g.Functor,Ee),De=(0,h.partitionMap)(g.Functor,Ee);return{URI:e.URI,_E:void 0,map:L,compact:Ge.compact,separate:Ge.separate,filter:function(Ze,rt){return(0,R.pipe)(Ze,Ke(rt))},filterMap:function(Ze,rt){return(0,R.pipe)(Ze,K(rt))},partition:function(Ze,rt){return(0,R.pipe)(Ze,pe(rt))},partitionMap:function(Ze,rt){return(0,R.pipe)(Ze,De(rt))}}}e.getFilterable=x,e.Functor={URI:e.URI,map:L},e.as=(0,R.dual)(2,(0,A.as)(e.Functor)),e.asUnit=(0,A.asUnit)(e.Functor),e.flap=(0,A.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.Bifunctor={URI:e.URI,bimap:e.mapBoth,mapLeft:e.mapError},e.ApplyPar={URI:e.URI,map:L,ap:q},e.apFirst=(0,a.apFirst)(e.ApplyPar),e.apFirstW=e.apFirst,e.apSecond=(0,a.apSecond)(e.ApplyPar),e.apSecondW=e.apSecond,e.ApplicativePar={URI:e.URI,map:L,ap:q,of:e.of},e.ApplicativeSeq={URI:e.URI,map:L,ap:G,of:e.of},e.Chain={URI:e.URI,map:L,ap:q,chain:e.flatMap},e.Monad={URI:e.URI,map:L,ap:q,of:e.of,chain:e.flatMap},e.FromEither={URI:e.URI,fromEither:e.fromEither},e.FromIO={URI:e.URI,fromIO:e.fromIO},e.tap=(0,R.dual)(2,u.tap(e.Chain)),e.tapEither=(0,R.dual)(2,(0,d.tapEither)(e.FromEither,e.Chain)),e.tapIO=(0,R.dual)(2,(0,_.tapIO)(e.FromIO,e.Chain)),e.Alt={URI:e.URI,map:L,alt:D},e.MonadIO={URI:e.URI,map:L,ap:q,of:e.of,chain:e.flatMap,fromIO:e.fromIO},e.MonadThrow={URI:e.URI,map:L,ap:q,of:e.of,chain:e.flatMap,throwError:e.throwError},e.fromIOK=(0,_.fromIOK)(e.FromIO),e.chainFirstIOK=e.tapIO,e.fromOption=(0,d.fromOption)(e.FromEither),e.fromOptionK=(0,d.fromOptionK)(e.FromEither),e.chainOptionK=(0,d.chainOptionK)(e.FromEither,e.Chain),e.chainOptionKW=e.chainOptionK;var Re={fromEither:e.FromEither.fromEither},N={fromIO:e.fromIO};e.liftNullable=E.liftNullable(Re),e.liftOption=E.liftOption(Re);var P={flatMap:e.flatMap};e.flatMapNullable=E.flatMapNullable(Re,P),e.flatMapOption=E.flatMapOption(Re,P),e.flatMapEither=E.flatMapEither(Re,P),e.flatMapIO=E.flatMapIO(N,P),e.chainIOK=e.flatMapIO,e.chainEitherK=e.flatMapEither,e.chainEitherKW=e.flatMapEither,e.chainFirstEitherK=e.tapEither,e.chainFirstEitherKW=e.tapEither,e.fromPredicate=(0,d.fromPredicate)(e.FromEither),e.filterOrElse=(0,d.filterOrElse)(e.FromEither,e.Chain),e.filterOrElseW=e.filterOrElse,e.fromEitherK=(0,d.fromEitherK)(e.FromEither);var s=function(Ie,Ee,Ge){return(0,e.bracketW)(Ie,Ee,Ge)};e.bracket=s;var S=function(Ie,Ee,Ge){return(0,e.flatMap)(Ie,function(Ke){return g.flatMap(Ee(Ke),function(K){return(0,e.flatMap)(Ge(Ke,K),function(){return g.of(K)})})})};e.bracketW=S,e.Do=(0,e.of)(E.emptyRecord),e.bindTo=(0,A.bindTo)(e.Functor);var M=(0,A.let)(e.Functor);e.let=M,e.bind=u.bind(e.Chain),e.bindW=e.bind,e.apS=(0,a.apS)(e.ApplyPar),e.apSW=e.apS,e.ApT=(0,e.of)(E.emptyReadonlyArray);var c=function(Ie){return(0,R.flow)(g.traverseReadonlyNonEmptyArrayWithIndex(Ie),g.map(l.traverseReadonlyNonEmptyArrayWithIndex(R.SK)))};e.traverseReadonlyNonEmptyArrayWithIndex=c;var p=function(Ie){var Ee=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(Ie);return function(Ge){return E.isNonEmpty(Ge)?Ee(Ge):e.ApT}};e.traverseReadonlyArrayWithIndex=p;var U=function(Ie){return function(Ee){return function(){var Ge=Ie(0,E.head(Ee))();if(E.isLeft(Ge))return Ge;for(var Ke=[Ge.right],K=1;K<Ee.length;K++){var pe=Ie(K,Ee[K])();if(E.isLeft(pe))return pe;Ke.push(pe.right)}return E.right(Ke)}}};e.traverseReadonlyNonEmptyArrayWithIndexSeq=U;var j=function(Ie){var Ee=(0,e.traverseReadonlyNonEmptyArrayWithIndexSeq)(Ie);return function(Ge){return E.isNonEmpty(Ge)?Ee(Ge):e.ApT}};e.traverseReadonlyArrayWithIndexSeq=j,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var ae=function(Ie){return(0,e.traverseReadonlyArrayWithIndex)(function(Ee,Ge){return Ie(Ge)})};e.traverseArray=ae,e.sequenceArray=(0,e.traverseArray)(R.identity),e.traverseSeqArrayWithIndex=e.traverseReadonlyArrayWithIndexSeq;var V=function(Ie){return(0,e.traverseReadonlyArrayWithIndexSeq)(function(Ee,Ge){return Ie(Ge)})};e.traverseSeqArray=V,e.sequenceSeqArray=(0,e.traverseSeqArray)(R.identity),e.Applicative=e.ApplicativePar,e.chain=e.flatMap,e.chainW=e.flatMap,e.chainFirst=e.tap,e.chainFirstW=e.tap,e.orElseFirst=e.tapError,e.orElseFirstW=e.tapError,e.ioEither={URI:e.URI,bimap:e.mapBoth,mapLeft:e.mapError,map:L,of:e.of,ap:q,chain:e.flatMap,alt:D,fromIO:e.fromIO,throwError:e.throwError},e.getApplySemigroup=(0,a.getApplySemigroup)(e.ApplyPar),e.getApplyMonoid=(0,i.getApplicativeMonoid)(e.ApplicativePar);var Q=function(Ie){return(0,a.getApplySemigroup)(g.Apply)(l.getSemigroup(Ie))};e.getSemigroup=Q;function me(Ie){var Ee=Y(Ie),Ge=fe(Ie);return{URI:e.URI,_E:void 0,map:L,ap:Ee.ap,of:e.of,chain:e.flatMap,bimap:e.mapBoth,mapLeft:e.mapError,alt:Ge.alt,fromIO:e.fromIO,throwError:e.throwError}}e.getIOValidation=me}}),Xc=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Show.js"(e){var t=e&&e.__createBinding||(Object.create?function(o,l,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(l,f);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(o,h,d)}:function(o,l,f,h){h===void 0&&(h=f),o[h]=l[f]}),n=e&&e.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),r=e&&e.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var f in o)f!=="default"&&Object.prototype.hasOwnProperty.call(o,f)&&t(l,o,f);return n(l,o),l};Object.defineProperty(e,"__esModule",{value:!0}),e.showNumber=e.showString=e.showBoolean=e.getStructShow=e.getTupleShow=e.tuple=e.struct=void 0;var i=r(Wn()),a=function(o){return{show:function(l){var f="{";for(var h in o)i.has.call(o,h)&&(f+=" ".concat(h,": ").concat(o[h].show(l[h]),","));return f.length>1&&(f=f.slice(0,-1)+" "),f+="}",f}}};e.struct=a;var u=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return{show:function(f){return"[".concat(f.map(function(h,d){return o[d].show(h)}).join(", "),"]")}}};e.tuple=u,e.getTupleShow=e.tuple,e.getStructShow=e.struct,e.showBoolean={show:function(o){return JSON.stringify(o)}},e.showString={show:function(o){return JSON.stringify(o)}},e.showNumber={show:function(o){return JSON.stringify(o)}}}}),dA=wt({"../../node_modules/.pnpm/fp-ts@2.16.2/node_modules/fp-ts/lib/Ordering.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.monoidOrdering=e.eqOrdering=e.semigroupOrdering=e.invert=e.sign=e.Monoid=e.Semigroup=e.Eq=e.reverse=e.match=e.matchW=void 0;var t=function(i,a,u){return function(o){return o===-1?i():o===0?a():u()}};e.matchW=t,e.match=e.matchW;var n=function(i){return i===-1?1:i===1?-1:0};e.reverse=n,e.Eq={equals:function(i,a){return i===a}},e.Semigroup={concat:function(i,a){return i!==0?i:a}},e.Monoid={concat:e.Semigroup.concat,empty:0};var r=function(i){return i<=-1?-1:i>=1?1:0};e.sign=r,e.invert=e.reverse,e.semigroupOrdering=e.Semigroup,e.eqOrdering=e.Eq,e.monoidOrdering=e.Monoid}}),Cn={};In(Cn,{LogColor:()=>Pa,LogLevel:()=>vn});var hA=Object.defineProperty,vA=Object.defineProperties,mA=Object.getOwnPropertyDescriptors,Fd=Object.getOwnPropertySymbols,gA=Object.prototype.hasOwnProperty,pA=Object.prototype.propertyIsEnumerable,Ud=(e,t,n)=>t in e?hA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_A=(e,t)=>{for(var n in t||(t={}))gA.call(t,n)&&Ud(e,n,t[n]);if(Fd)for(var n of Fd(t))pA.call(t,n)&&Ud(e,n,t[n]);return e},yA=(e,t)=>vA(e,mA(t)),vn=(e=>(e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL",e[e.OFF=6]="OFF",e))(vn||{});(e=>{function t(n){switch(n){case"TRACE":return 0;case"DEBUG":return 1;case"INFO":return 2;case"WARN":return 3;case"ERROR":return 4;case"FATAL":return 5;case"OFF":return 6;default:const r=n;throw new TypeError("Unrecognized log level string '".concat(r,"'"))}}e.fromString=t})(vn||(vn={}));var Pa;(e=>{(n=>{n.getContrastTextColor=r=>({hue:0,saturation:0,lightness:r.lightness>50?0:100}),n.toString=r=>"hsl(".concat(r.hue,", ").concat(r.saturation,"%, ").concat(r.lightness,"%)")})(e.HSL||(e.HSL={})),(n=>{n.base={hue:43,saturation:74,lightness:66},n.getColor=t(n.base)})(e.Model||(e.Model={})),(n=>{n.base={hue:12,saturation:76,lightness:61},n.getColor=t(n.base)})(e.ViewModel||(e.ViewModel={})),(n=>{n.base={hue:173,saturation:58,lightness:39},n.getColor=t(n.base)})(e.Manager||(e.Manager={}));function t(n){return r=>{let i=0;if(r==null||r.length===0)return n;for(let a=0;a<r.length;a++)i=r.charCodeAt(a)+((i<<5)-i),i=i&i;return i=(i%50+50)%50,yA(_A({},n),{lightness:n.lightness-i})}}})(Pa||(Pa={}));var bA=Object.defineProperty,IA=Object.defineProperties,SA=Object.getOwnPropertyDescriptors,Dd=Object.getOwnPropertySymbols,AA=Object.prototype.hasOwnProperty,EA=Object.prototype.propertyIsEnumerable,Ld=(e,t,n)=>t in e?bA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RA=(e,t)=>{for(var n in t||(t={}))AA.call(t,n)&&Ld(e,n,t[n]);if(Dd)for(var n of Dd(t))EA.call(t,n)&&Ld(e,n,t[n]);return e},wA=(e,t)=>IA(e,SA(t)),Lu;(e=>{function t(n){const r=n;return r!=null&&(r.message!==void 0&&r.name!==void 0||r.stack!==void 0)}e.isErrorLike=t})(Lu||(Lu={}));var cf;(e=>{function t(i){return r(i,[i],Lu.isErrorLike(i))}e.fromAny=t;function n(i,a){if(i==null||typeof i=="number"||typeof i=="string"||typeof i=="boolean")return i;if(typeof i=="object"){if(i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i.toString();if(i instanceof Set)return Array.from(i,u=>n(u,a));if(i instanceof Map)return Array.from(i).reduce((u,[o,l])=>wA(RA({},u),{[o]:n(l,a)}),{});if(a.indexOf(i)===-1){a.push(i);const u=r(i,a,Lu.isErrorLike(i));return Object.keys(u).length>0?u:i}}}function r(i,a,u){if(!i)return{};const o={};return(u?Object.getOwnPropertyNames:Object.keys)(i).forEach(l=>{const f=i[l];o[l]=n(f,a)}),o}})(cf||(cf={}));var TA=/^(?!\.[\w])[\w.]*\w$/;function Cm(e){if(e==="")throw new Error("Empty name");if(!TA.test(e))throw new Error("Invalid name: ".concat(e,". Should be hierarchical dot separated string and may contain only word characters)"))}var Mm=function(e="(nomessage)"){Error.call(this,e),this.stack=new Error().stack,this.message=e,this.name=this.constructor.name};Mm.prototype=Object.create(Error.prototype);var lf=class extends Mm{},Ur=class{constructor(e,t){if(this.messageCount=e,this.timeframe=t,e<1)throw new lf("messagesCount should be > 1");if(t<=0)throw new lf("timeframe should be > 0");this._allowance=e,this._lastChecked=Date.now()}hit(){const e=Date.now(),t=e-this._lastChecked;return this._lastChecked=e,this._allowance+=t*(this.messageCount/this.timeframe),this._allowance>this.messageCount&&(this._allowance=this.messageCount),this._allowance<1?!1:(this._allowance-=1,!0)}toString(){return"[ messageCount: ".concat(this.messageCount,", timeframe: ").concat(this.timeframe,", allowance: ").concat(Math.trunc(this._allowance*1e3)/1e3,", _lastCheck: ").concat(this._lastChecked,"]")}};(e=>{class t{constructor(r,i){if(this._limiter=r,this._cooldownTime=i,this._lastLimiting=0,this._aboveThreshold=!1,i<0)throw new lf("cooldownTime should be non-negative")}hit(){const r=this._limiter.hit();let i=!1;return r?this._aboveThreshold&&Date.now()-this._cooldownTime>this._lastLimiting&&(this._aboveThreshold=!1,i=!0):(this._lastLimiting=Date.now(),this._aboveThreshold||(this._aboveThreshold=!0,i=!0)),{allow:r,aboveThreshold:this._aboveThreshold,wasTriggered:i}}}e.RateLimitIndicator=t})(Ur||(Ur={}));var km=class{constructor(e){this.capacity=e,this.size=0,this._keymap={}}put(e,t){var n;const r={key:e,value:t};if(this._keymap[e]=r,this._tail?(this._tail.newer=r,r.older=this._tail):this._head=r,this._tail=r,this.size===this.capacity)return(n=this.shift())==null?void 0:n.value;++this.size}get(e){const t=this._getImpl(e);return t&&t.value}peek(e){const t=this._keymap[e];return t==null?void 0:t.value}set(e,t){const n=this._getImpl(e),r=t(n&&n.value);return r!=null?n?n.value=r:this.put(e,r):n&&this.remove(e),r}getRef(e){return this._getImpl(e)}remove(e){const t=this._keymap[e];if(t!=null)return delete this._keymap[e],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this._head=t.newer):t.older?(t.older.newer=void 0,this._tail=t.older):this._head=this._tail=void 0,--this.size,t.value}forEach(e){for(const t in this._keymap)e(t,this._keymap[t].value)}shift(){const e=this._head;return this._head&&(this._head.newer?(this._head=this._head.newer,this._head.older=void 0):this._head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e}_getImpl(e){const t=this._keymap[e];if(t!=null)return t===this._tail||(t.newer&&(t===this._head&&(this._head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this._tail,this._tail&&(this._tail.newer=t),this._tail=t),t}},Pm=class Oo{constructor(t,n,r,i="."){this.name=t,this.timersSink=n,this.countersSink=r,this._nameSeparator=i,Cm(t)}getMetric(t){return this.createChild(t)}getTimer(t){return this.createChild(t)}getCounter(t){return this.createChild(t)}get parent(){const t=this.name.lastIndexOf(this._nameSeparator),n=this.name.substring(0,t===-1?0:t);return n===""?void 0:new Oo(n,this.timersSink,this.countersSink,this._nameSeparator)}get root(){const t=this.name.indexOf(this._nameSeparator),n=this.name.substring(0,t===-1?0:t);return n===""?this:new Oo(n,this.timersSink,this.countersSink,this._nameSeparator)}createName(t){return this.name+this._nameSeparator+t}start(){const t=Date.now(),n=this;return{stop(){n.recordTime(Date.now()-t)}}}recordTime(t){this.timersSink(this.name,t)}timing(t){const n=this.start();try{return t()}finally{try{n.stop()}catch{}}}increment(t=1){this.countersSink(this.name,t)}decrement(t=1){this.increment(-t)}createChild(t){return new Oo(this.createName(t),this.timersSink,this.countersSink,this._nameSeparator)}},OA=class extends Pm{constructor(e){super("MP",(t,n)=>e("TIMER: "+t+" = "+n),(t,n)=>e("COUNTER: "+t+" = "+n),".")}},zs=class Ru{static getRootMetric(){return Ru._metricsRoot==null&&(console.warn("[WARNING] Using default timeseries implementation."),Ru._metricsRoot=new OA(console.log)),Ru._metricsRoot}static configure(t){Ru._metricsRoot=t}},oa=class Co{constructor(t,n,r,i,a,u,o,l){this.level=t,this.message=n,this.logger=r,this.timestamp=i,this.exception=a,this.extra=u,this.context=o,this.logColor=l}dropContext(){return new Co(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,this.logColor)}addContext(t){return new Co(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,t,this.logColor)}changeLogger(t){return new Co(this.level,this.message,t,this.timestamp,this.exception,this.extra,this.context)}};(e=>{e.show=t=>"[".concat(t.logger,"]: ").concat(vn[t.level]," : ").concat(t.message," ").concat(t.extra?JSON.stringify(t.extra):""," ").concat(t.exception?JSON.stringify(t.exception):"")})(oa||(oa={}));var CA=Object.defineProperty,Ho=Object.getOwnPropertySymbols,Nm=Object.prototype.hasOwnProperty,Wm=Object.prototype.propertyIsEnumerable,qd=(e,t,n)=>t in e?CA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MA=(e,t)=>{for(var n in t||(t={}))Nm.call(t,n)&&qd(e,n,t[n]);if(Ho)for(var n of Ho(t))Wm.call(t,n)&&qd(e,n,t[n]);return e},kA=(e,t)=>{var n={};for(var r in e)Nm.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ho)for(var r of Ho(e))t.indexOf(r)<0&&Wm.call(e,r)&&(n[r]=e[r]);return n},Zc=class wu{constructor(t,n,r,i,a=!0){this._appName=t,this._appVersion=n,this._env=r,this._fetch=i,this._wrapExtra=a}static _parseException(t){if(t){const n=wu.toObject(t),{name:r="UnknownError",message:i="Unknown error message",stack:a}=n,u=kA(n,["name","message","stack"]),o=wu.toFormattedMessage(t);return{exceptionPart:{exception:MA({name:r,message:i,stack:a},o!=null?{info:o}:{})},exceptionDetailsPart:Object.keys(u).length>0?{exceptionDetails:u}:{}}}else return{exceptionPart:{},exceptionDetailsPart:{}}}append(t){return this._fetch(this._prepareData(t))}static toObject(t){return t==null||t instanceof Object&&!Array.isArray(t)?typeof(t==null?void 0:t.toJSON)=="function"?t.toJSON():t:{details:t}}static toFormattedMessage(t){const n=Object.getPrototypeOf(t);return n.constructor.name!=="Object"&&typeof n.toString=="function"?t.toString():null}_prepareData(t){const n=t.context?{context:t.context}:{},{exceptionPart:r,exceptionDetailsPart:i}=wu._parseException(t.exception),a=wu.toObject(t.extra),u=JSON.stringify(this._wrapExtra?Object.assign({},i,a):i),o=Object.assign({message:t.message,logger:t.logger,level:vn[t.level],application:this._appName,version:this._appVersion,env:this._env},cf.fromAny(n),r,u!=="{}"&&{details:u},!this._wrapExtra&&a&&{extra:a});return JSON.stringify(o,null,"")}},PA=class extends Zc{constructor(e,t,n,r,i,a=!0){super(t,n,r,u=>i(e,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:u}).then(()=>{}),a)}},NA=class extends Zc{constructor(e,t,n,r,i,a=!0){const u="".concat(e,"/log?json=");super(t,n,r,o=>i(u+encodeURIComponent(o),{mode:"no-cors",method:"get",cache:"no-cache"}).then(()=>{}),a)}};function WA(e){return zs.getRootMetric().getMetric(e)}function kl(e){return zs.getRootMetric().getCounter(e)}var FA=class{constructor(e){this._sink=e,this._counters=new Map;const t=WA("logging.levels");Object.keys(vn).map(n=>vn[n]).filter(n=>typeof n=="number").forEach(n=>this._counters.set(n,t.getCounter(vn[n])))}append(e){const t=this._counters.get(e.level);return t&&t.increment(),this._sink.append(e)}},UA=60*1e3,ff=class sf{constructor(t){this._sink=t,this._throttled=[],this._shortRateReporter={name:"short",indicator:new Ur.RateLimitIndicator(new Ur(30,2*1e3),10*1e3),counter:kl("logRates.short")},this._longRateReporter={name:"long",indicator:new Ur.RateLimitIndicator(new Ur(120,240*1e3),30*1e3),counter:kl("logRates.long")},this._counting=kl("logRates.either"),this._countingStarted=0,this._droppingLimiter=new Ur(2,UA),this._dropped=0}append(t){var n;const r=this._shortRateReporter.indicator.hit(),i=this._longRateReporter.indicator.hit();if((r.wasTriggered||i.wasTriggered)&&(r.wasTriggered&&r.aboveThreshold&&this._shortRateReporter.counter.increment(),i.wasTriggered&&i.aboveThreshold&&this._longRateReporter.counter.increment(),r.aboveThreshold||i.aboveThreshold?this._counts||(this._counting.increment(),this._counts=new km(50),this._countingStarted=Date.now(),this._sink.append(this._createTriggeredEvent(t,"Logging rate is above threshold",{short:r,long:i})).catch(console.warn)):(this._counts=void 0,this._throttled=[],this._sink.append(this._createTriggeredEvent(t,"Logging rate is back to normal",{dropped:this._dropped})).catch(console.warn))),this._counts){const a=this._eventToString(t),u=(n=this._counts.set(a,l=>(l!=null?l:0)+1))!=null?n:0,o=(Date.now()-this._countingStarted)/1e3;return u/o>sf.DROP_RATE&&u>sf.DROP_COUNT&&!this._droppingLimiter.hit()?(this._throttled.some(l=>l===t.message)||(this._throttled.push(t.message),this._sink.append(this._createTriggeredEvent(t,"Started throttling logs",{throttledLogs:t.message})).catch(console.warn)),this._drop(),Promise.reject("Log message discarded due to rate limiting: "+t.message)):this._sink.append(t)}else return this._sink.append(t)}_drop(){++this._dropped}_createTriggeredEvent(t,n,r){return new oa(vn.ERROR,n,"editor.logging.rate",Date.now(),t.exception,r,t.context)}_eventToString(t){return t.level+t.logger+t.message}};ff.DROP_RATE=.5,ff.DROP_COUNT=15;var DA=ff,Bd="_",LA=class Fm extends Pm{constructor(t,n){super(t,(r,i)=>n("TIMER: "+r+" = "+i),(r,i)=>n("COUNTER: "+r+" = "+i),Bd),this.name=t,this._fn=n}setContext(t){return console.log(this.name,t),this}getMetric(t){return this.createChild(t)}getCounter(t){return this.createChild(t)}getTimer(t){return this.createChild(t)}createChild(t){return new Fm(this.createName(t),this._fn)}createName(t){return this.name+Bd+t}},Vs=class Tu{static getRootMetric(){return Tu._femetricsRoot==null&&(console.warn("[WARNING] Using default femetrics timeseries implementation."),Tu._femetricsRoot=new LA("FM",console.log)),Tu._femetricsRoot}static configure(t){Tu._femetricsRoot=t}};function qA(e){return Vs.getRootMetric().getMetric(e)}function Pl(e){return Vs.getRootMetric().getCounter(e)}var BA=class{constructor(e){this._sink=e,this._counters=new Map;const t=qA("logging.levels");Object.keys(vn).map(n=>vn[n]).filter(n=>typeof n=="number").forEach(n=>this._counters.set(n,t.getCounter(vn[n])))}append(e){const t=this._counters.get(e.level);return t&&t.setContext({logger:e.logger}).increment(),this._sink.append(e)}},jA=60*1e3,df=class hf{constructor(t){this._sink=t,this._throttled=[],this._shortRateReporter={name:"short",indicator:new Ur.RateLimitIndicator(new Ur(30,2*1e3),10*1e3),counter:Pl("logRates.short")},this._longRateReporter={name:"long",indicator:new Ur.RateLimitIndicator(new Ur(120,240*1e3),30*1e3),counter:Pl("logRates.long")},this._counting=Pl("logRates.either"),this._countingStarted=0,this._droppingLimiter=new Ur(2,jA),this._dropped=0}append(t){var n;const r=this._shortRateReporter.indicator.hit(),i=this._longRateReporter.indicator.hit();if((r.wasTriggered||i.wasTriggered)&&(r.wasTriggered&&r.aboveThreshold&&this._shortRateReporter.counter.increment(),i.wasTriggered&&i.aboveThreshold&&this._longRateReporter.counter.increment(),r.aboveThreshold||i.aboveThreshold?this._counts||(this._counting.increment(),this._counts=new km(50),this._countingStarted=Date.now(),this._sink.append(this._createTriggeredEvent(t,"Logging rate is above threshold",{short:r,long:i})).catch(console.warn)):(this._counts=void 0,this._throttled=[],this._sink.append(this._createTriggeredEvent(t,"Logging rate is back to normal",{dropped:this._dropped})).catch(console.warn))),this._counts){const a=this._eventToString(t),u=(n=this._counts.set(a,l=>(l!=null?l:0)+1))!=null?n:0,o=(Date.now()-this._countingStarted)/1e3;return u/o>hf.DROP_RATE&&u>hf.DROP_COUNT&&!this._droppingLimiter.hit()?(this._throttled.some(l=>l===t.message)||(this._throttled.push(t.message),this._sink.append(this._createTriggeredEvent(t,"Started throttling logs",{throttledLogs:t.message})).catch(console.warn)),this._drop(),Promise.reject("Log message discarded due to rate limiting: "+t.message)):this._sink.append(t)}else return this._sink.append(t)}_drop(){++this._dropped}_createTriggeredEvent(t,n,r){return new oa(vn.ERROR,n,"editor.logging.rate",Date.now(),t.exception,r,t.context)}_eventToString(t){return t.level+t.logger+t.message}};df.DROP_RATE=.5,df.DROP_COUNT=15;var GA=df,Um={};In(Um,{AbstractLogger:()=>Dm,ConsoleLogger:()=>$s,CountingFelogWrapper:()=>FA,CountingFelogWrapperV2:()=>BA,CrashLogWrapper:()=>YA,FelogClientBase:()=>Zc,GetFelogClient:()=>NA,LogEvent:()=>oa,LogQueue:()=>KA,LoggingConfig:()=>Bm,PostFelogClient:()=>PA,RateLimitingFelogWrapper:()=>DA,RateLimitingFelogWrapperV2:()=>GA,RingBuffer:()=>Ks,SimpleLogger:()=>Lm,TreeContext:()=>vf});var Dm=class{constructor(e,t,n,r){this.name=e,this.level=t,this.context=n,this.logColor=r,Cm(e)}isEnabled(e){return e>=this.level}handler(e,t){return{trace:n=>{throw this.trace(e,n,t),n},debug:n=>{throw this.debug(e,n,t),n},info:n=>{throw this.info(e,n,t),n},warn:n=>{throw this.warn(e,n,t),n},error:n=>{throw this.error(e,n,t),n},fatal:n=>{throw this.fatal(e,n,t),n}}}trace(e,t,n){this.log(vn.TRACE,e,t,n)}debug(e,t,n){this.log(vn.DEBUG,e,t,n)}info(e,t,n){this.log(vn.INFO,e,t,n)}warn(e,t,n){this.log(vn.WARN,e,t,n)}error(e,t,n){this.log(vn.ERROR,e,t,n)}fatal(e,t,n){this.log(vn.FATAL,e,t,n)}log(e,t,n,r){this.isEnabled(e)&&(n&&r||Lu.isErrorLike(n)?this.logImpl(e,t,n,r):this.logImpl(e,t,void 0,r!=null?r:n))}},Ks=class{constructor(e,t=!1){if(this.capacity=e,this.allowOverflow=t,this._start=0,this._end=0,this._isFull=!1,this.toJSON=this.toArray,e<=0)throw new Error("Invalid capacity "+e);this._buffer=new Array(e)}get size(){return this._isFull?this._buffer.length:(this._end-this._start+this._buffer.length)%this._buffer.length}get isEmpty(){return this.size===0}get isFull(){return this._isFull}push(e){if(this.isFull)if(this.allowOverflow)++this._start,this._start===this.capacity&&(this._start=0);else throw new Error("Buffer is full");this._buffer[this._end++]=e,this._end===this.capacity&&(this._end=0),this._start===this._end&&(this._isFull=!0)}pop(){if(this.isEmpty)return;const e=this._buffer[this._start];return this._buffer[this._start]=void 0,this._start++,this._start===this.capacity&&(this._start=0),this._isFull=!1,e}get first(){return this.isEmpty?void 0:this._buffer[this._start]}get last(){return this.isEmpty?void 0:this._buffer[this._end===0?this.capacity-1:this._end-1]}clear(){this._buffer=new Array(this.capacity),this._start=this._end=0,this._isFull=!1}toArray(){let e;if(this.isEmpty)e=new Array(0);else if(this._start<this._end)e=this._buffer.slice(this._start,this._end);else{e=new Array(this.size);let t=0;for(let n=this._start;n<this.capacity;++n,++t)e[t]=this._buffer[n];for(let n=0;n<this._end;++n,++t)e[t]=this._buffer[n]}return e}},HA=class{constructor(e){this.event=e,this.promise=new Promise((t,n)=>{this.resolve=t}).then(()=>{}),this.promise=new Promise((t,n)=>{this.resolve=t}).then(()=>{})}},zA=300,VA=10*1e3,KA=class{constructor(e,t=zA,n=VA){this._sink=e,this._retryInterval=n,this._currentItem=null,this._skippedCounter=null,this._buffer=new Ks(t,!1)}append(e){if(this._buffer.isFull)return this._incSkippedCounter(),Promise.reject(new Error("Outgoing message buffer is full"));{const t=new HA(e);return this._buffer.push(t),this._doAppend(),t.promise}}_incSkippedCounter(){this._skippedCounter||(this._skippedCounter=new oa(vn.WARN,"Messages was skipped due to buffer overflow","logging_impl.LogQueue",Date.now(),void 0,{count:0})),this._skippedCounter.extra.count++}_doAppend(){if(this._buffer.isEmpty||this._currentItem)return;const e=this._buffer.first,t=this._sink.append(e.event);this._currentItem=e,t.then(()=>{e.resolve();const n=this._buffer.pop();if(n!==e&&n===this._currentItem)throw new Error("Illegal state");this._currentItem=null,this._skippedCounter&&(this.append(this._skippedCounter),this._skippedCounter=null),this._doAppend()}).catch(n=>{this._retryAppend(e)})}_retryAppend(e){setTimeout(()=>{var t;let n=(t=e.event.extra)!=null?t:{};n.appendRetries==null&&(n=e.event.extra=Object.assign({appendRetries:1},Zc.toObject(n))),++n.appendRetries,this._currentItem=null,this._doAppend()},this._retryInterval)}},$A=Me(it()),vf=class{constructor(e){this.parent=e,this._context=void 0}get(){const e=this.parent&&this.parent.get(),t=this._context;return e||t?Object.assign({},e,t):void 0}add(e){this._context=Object.assign({},this._context,e)}remove(e){this._context&&e.forEach(t=>{t in this._context&&delete this._context[t]})}clear(){this._context=void 0}},Lm=class qm extends Dm{constructor(t,n,r,i,a){super(t,n,i||new vf,a),this.appender=r,this.logColor=a}getLogger(t,n,r){return new qm(this.name+"."+t,n!=null?n:this.level,this.appender,new vf(this.context),r)}logImpl(t,n,r,i){const a=new oa(t,n,this.name,Date.now(),r,i,this.context.get());try{this.appender(a)}catch(u){console.trace("Failed processing log event",u);try{$s.printToConsole(a)}catch(o){console.error("No luck. Can't print the event",o)}}}},$s=class mf extends Lm{constructor(t,n,r){super(t,n,i=>i.level>=n&&mf.printToConsole(i),r)}static printToConsole(t){let n=console.log;t.level<=vn.TRACE||t.level<=vn.DEBUG?n=typeof console.debug=="function"?console.debug:console.log:t.level<=vn.INFO?n=console.log:t.level<=vn.WARN?n=console.warn:n=console.error,n.apply(console,(t.logColor?[...mf._getStyledLoggerName(t),"".concat(vn[t.level]," : ").concat(t.message),t.exception,t.extra]:["[".concat(t.logger,"]: ").concat(vn[t.level]," : ").concat(t.message),t.exception,t.extra]).filter(r=>!!r))}static _getStyledLoggerName(t){const n=(0,$A.pipe)(Pa.HSL.getContrastTextColor(t.logColor),Pa.HSL.toString),r=Pa.HSL.toString(t.logColor);return["%c".concat(t.logger),"color:".concat(n,";padding:4px;background:").concat(r,";border-radius:4px")]}},YA=class{constructor(e,t,n,r){this._crashLogger=n,this._eventFactory=r,this._crashLogged=!1,this.sink=i=>{this._buffer.push(i.dropContext()),this._trigger(i)&&this._sendCrashLog(i)},this._buffer=new Ks(e,!0),this._trigger=typeof t=="function"?t:i=>i.level>=t}get logs(){return this._buffer.toArray()}_sendCrashLog(e){if(!this._crashLogged||this._buffer.size>this._buffer.capacity/2){let t;try{t=JSON.stringify(this.logs,void 0,0)}catch(n){t=n}this._crashLogger(this._eventFactory(e.level,"CrashLog",Date.now(),void 0,{events:t,first:!this._crashLogged,trigger:{message:e.message,logger:e.logger}}).addContext(e.context)),this._crashLogged=!0,this._buffer.clear()}}},Bm=class ki{static getRootLogger(){return ki._rootLogger==null&&(ki._rootLogger=ki._createDefaultRootLogger(),ki._rootLogger.warn("Using DEFAULT root logger")),ki._rootLogger}static configure(t){ki._rootLogger=t,ki._rootLogger.debug("ROOT logger changed",t)}static _createDefaultRootLogger(){return new $s("DEFAULT",vn.DEBUG)}},jd=vn,Nn;(e=>{const t=class Ou{static configureLogLevelGetter(a){Ou._getLogLevel=a}static get root(){return Bm.getRootLogger()}static getLogger(a,u,o){const l=Ou._getLogLevel(a,u),f=Ou.root.getLogger(a,Ou._getLogLevel(a,u),o);return u!==l&&f.debug('Logger "'.concat(a,'" initialized with level "').concat(l!=null&&jd[l],'" instead of "').concat(u!=null&&jd[u],'"')),f}};t._getLogLevel=(i,a)=>a;let n=t;e.Logging=n;class r{static get root(){return zs.getRootMetric()}static get rootFemetrics(){return Vs.getRootMetric()}}e.TimeSeries=r})(Nn||(Nn={}));function jm(e,t=Cn.LogLevel.WARN){let n={};function r(){if(t<Cn.LogLevel.DEBUG)return;const o=Array.from(arguments);gu.verbose({context:e},String(o[0]),...o.slice(1))}function i(){if(t<Cn.LogLevel.INFO)return;const o=Array.from(arguments);gu.info(String(o[0]),{context:e})}function a(){if(t<Cn.LogLevel.WARN)return;const o=Array.from(arguments);gu.warn(String(o[0]),{context:e,delivery:!1})}function u(){const o=Array.from(arguments);o[1]instanceof Error?gu.error(String(o[0]),o[1],{context:e,delivery:!1}):gu.error(String(o[0]),{context:e,delivery:!1})}return{name:e,level:t,context:{get:()=>n,add:o=>Object.assign(n,o),remove:o=>o.forEach(l=>delete n[l]),clear:()=>{n={}}},trace:r,debug:r,info:i,warn:a,error:u,fatal:u,getLogger:(o,l)=>jm("".concat(e,"/").concat(o),l),handler:()=>new Proxy({},{get:()=>()=>{}}),isEnabled:o=>o>=t,log:()=>{}}}Um.LoggingConfig.configure(jm("vendor-sdui"));var JA=Me(it()),QA=function(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};function Ys(e){return e}function XA(e,t,n,r,i,a,u,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return u(a(i(r(n(t(e))))));case 8:return o(u(a(i(r(n(t(e)))))));case 9:return l(o(u(a(i(r(n(t(e))))))));default:{for(var f=arguments[0],h=1;h<arguments.length;h++)f=arguments[h](f);return f}}}var ZA=function(e,t){var n=function(r){return r.length>=e};return function(){var r=Array.from(arguments);return n(arguments)?t.apply(this,r):function(i){return t.apply(void 0,QA([i],r,!1))}}},xA=function(e){return e._tag==="Left"},eE=function(e){return e._tag==="Right"},tE=function(e){return{_tag:"Left",left:e}},nE=function(e){return{_tag:"Right",right:e}},rE=Object.prototype.hasOwnProperty,dr=XA,Ya=tE,Ja=nE,iE=ZA(2,function(e,t){return zi(e)?e:t(e.right)}),aE="Either",uE=function(e){return function(t){return zi(t)?t:Ja(e(t.right))}},oE=function(e,t){return function(n){return zi(n)?Ya(e(n.left)):Ja(t(n.right))}},cE=function(e){return function(t){return zi(t)?Ya(e(t.left)):t}},zi=xA,Gm=eE,lE=iE,hi=function(e){return{_tag:"Of",value:e}},Hm=function(e,t){return{_tag:"Concat",left:e,right:t}};function fE(){return{concat:Hm}}var Js="required",Qs="optional",sE=function(e,t){return{_tag:"Leaf",actual:e,error:t}},xc=function(e,t,n){return{_tag:"Key",key:e,kind:t,errors:n}},zm=function(e,t,n){return{_tag:"Index",index:e,kind:t,errors:n}},Gd=function(e,t){return{_tag:"Member",index:e,errors:t}},dE=function(e,t){return{_tag:"Lazy",id:e,errors:t}},hE=function(e){var t=function(n){switch(n._tag){case"Leaf":return e.Leaf(n.actual,n.error);case"Key":return e.Key(n.key,n.kind,n.errors);case"Index":return e.Index(n.index,n.kind,n.errors);case"Member":return e.Member(n.index,n.errors);case"Lazy":return e.Lazy(n.id,n.errors);case"Wrap":return e.Wrap(n.error,n.errors)}};return t};function vE(){return fE()}var Vm={};In(Vm,{Schemable:()=>bE,URI:()=>rg,UnknownArray:()=>tl,UnknownRecord:()=>ma,WithRefine:()=>AE,WithUnion:()=>SE,WithUnknownContainers:()=>IE,alt:()=>gE,array:()=>Jm,boolean:()=>ed,compose:()=>_E,id:()=>yE,intersect:()=>Zm,lazy:()=>tg,literal:()=>Xs,nullable:()=>Km,number:()=>xs,partial:()=>Ym,readonly:()=>ng,record:()=>Qm,refine:()=>ga,string:()=>Zs,struct:()=>td,sum:()=>eg,tuple:()=>Xm,type:()=>$m,union:()=>xm,zero:()=>pE});function el(e){var t=new Map;return function(n){if(!t.has(n)){var r=e(n);return t.set(n,r),r}return t.get(n)}}var Hd=function(e){return e===null?"null":typeof e},mE=function(e,t){if(e!==void 0&&t!==void 0){var n=Hd(e),r=Hd(t);if(n==="object"||r==="object")return Object.assign({},e,t)}return t},Xs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{is:function(n){return e.findIndex(function(r){return r===n})!==-1}}},Zs={is:function(e){return typeof e=="string"}},xs={is:function(e){return typeof e=="number"&&!isNaN(e)}},ed={is:function(e){return typeof e=="boolean"}},tl={is:Array.isArray},ma={is:function(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}},ga=function(e){return function(t){return{is:function(n){return t.is(n)&&e(n)}}}},Km=function(e){return{is:function(t){return t===null||e.is(t)}}},td=function(e){return dr(ma,ga(function(t){for(var n in e)if(!(n in t)||!e[n].is(t[n]))return!1;return!0}))},$m=td,Ym=function(e){return dr(ma,ga(function(t){for(var n in e){var r=t[n];if(r!==void 0&&!e[n].is(r))return!1}return!0}))},Jm=function(e){return dr(tl,ga(function(t){return t.every(e.is)}))},Qm=function(e){return dr(ma,ga(function(t){for(var n in t)if(!e.is(t[n]))return!1;return!0}))},Xm=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{is:function(n){return Array.isArray(n)&&n.length===e.length&&e.every(function(r,i){return r.is(n[i])})}}},Zm=function(e){return function(t){return{is:function(n){return t.is(n)&&e.is(n)}}}},xm=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{is:function(n){return e.some(function(r){return r.is(n)})}}},eg=function(e){return function(t){return dr(ma,ga(function(n){var r=n[e];return r in t?t[r].is(n):!1}))}},tg=function(e){var t=el(e);return{is:function(n){return t().is(n)}}},ng=Ys,gE=function(e){return function(t){return{is:function(n){return t.is(n)||e().is(n)}}}},pE=function(){return{is:function(e){return!1}}},_E=function(e){return function(t){return{is:function(n){return t.is(n)&&e.is(n)}}}},yE=function(){return{is:function(e){return!0}}},rg="io-ts/Guard",bE={URI:rg,literal:Xs,string:Zs,number:xs,boolean:ed,nullable:Km,type:$m,struct:td,partial:Ym,record:Qm,array:Jm,tuple:Xm,intersect:Zm,sum:eg,lazy:function(e,t){return tg(t)},readonly:ng},IE={UnknownArray:tl,UnknownRecord:ma},SE={union:xm},AE={refine:ga};function EE(e){return function(t,n){return{decode:function(r){return t(r)?e.of(r):e.throwError(n(r))}}}}function RE(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return{decode:function(i){return Xs.apply(Vm,n).is(i)?e.of(i):e.throwError(t(i,n))}}}}}function wE(e){return function(t){return function(n){return{decode:function(r){return r===null?e.of(null):e.bimap(n.decode(r),function(i){return t(r,i)},function(i){return i})}}}}}function TE(e){var t=nd(e);return function(n){return function(r){return{decode:function(i){return t(r,function(a,u){return e.mapLeft(u.decode(i[a]),function(o){return n(a,o)})})}}}}}function OE(e){var t=nd(e),n=e.of(Ja(void 0)),r=e.of(Ya(void 0));return function(i){return function(a){return{decode:function(u){return e.map(t(a,function(o,l){var f=u[o];return f===void 0?o in u?n:r:e.bimap(l.decode(f),function(h){return i(o,h)},function(h){return Ja(h)})}),UE)}}}}}function CE(e){var t=ig(e);return function(n){return function(r){return{decode:function(i){return t(i,function(a,u){return e.mapLeft(r.decode(u),function(o){return n(a,o)})})}}}}}function ME(e){var t=nd(e);return function(n){return function(r){return{decode:function(i){return t(i,function(a,u){return e.mapLeft(r.decode(u),function(o){return n(a,o)})})}}}}}function kE(e){var t=ig(e);return function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return{decode:function(a){return t(r,function(u,o){return e.mapLeft(o.decode(a[u]),function(l){return n(u,l)})})}}}}}function PE(e){return function(t){return function(n){return{decode:function(r){return e.ap(e.map(n.decode(r),function(i){return function(a){return mE(i,a)}}),t.decode(r))}}}}}function NE(e){return function(t){return function(n){return function(r){var i=Object.keys(r);return{decode:function(a){var u=a[n];return Object.prototype.hasOwnProperty.call(r,u)?r[u].decode(a):e.throwError(t(n,u,i))}}}}}}function WE(e){return function(t){return function(n,r){var i=el(r);return{decode:function(a){return e.mapLeft(i().decode(a),function(u){return t(n,u)})}}}}}function FE(e){return function(t){return function(n){return{decode:function(r){return e.chain(n.decode(r),t.decode)}}}}}var ig=function(e){return function(t,n){return t.reduce(function(r,i,a){return e.ap(e.map(r,function(u){return function(o){return u.push(o),u}}),n(a,i))},e.of([]))}},nd=function(e){return function(t,n){var r=Object.keys(t);if(r.length===0)return e.of({});for(var i=e.of({}),a=function(f){i=e.ap(e.map(i,function(h){return function(d){return h[f]=d,h}}),n(f,t[f]))},u=0,o=r;u<o.length;u++){var l=o[u];a(l)}return i}},UE=function(e){var t={};for(var n in e){var r=e[n];Gm(r)&&(t[n]=r.right)}return t},ag=vE(),DE=function(e,t){return zi(e)?zi(t)?Ya(ag.concat(e.left,t.left)):e:zi(t)?t:Ja(e.right(t.right))},Gr={URI:aE,_E:void 0,map:function(e,t){return dr(e,uE(t))},ap:DE,of:Ja,chain:function(e,t){return dr(e,lE(t))},throwError:Ya,bimap:function(e,t,n){return dr(e,oE(t,n))},mapLeft:function(e,t){return dr(e,cE(t))},alt:function(e,t){if(Gm(e))return e;var n=t();return zi(n)?Ya(ag.concat(e.left,n.left)):n}},nl=function(e,t){return hi(sE(e,t))},LE=function(e,t){return EE(Gr)(e,function(n){return nl(n,t)})},no=function(e,t){return LE(e.is,t)},qE=RE(Gr)(function(e,t){return nl(e,t.map(function(n){return JSON.stringify(n)}).join(" | "))}),BE=no(Zs,"string"),jE=no(xs,"number"),GE=no(ed,"boolean"),ug=no(tl,"Array<unknown>"),rl=no(ma,"Record<string, unknown>"),HE=wE(Gr)(function(e,t){return Hm(hi(Gd(0,nl(e,"null"))),hi(Gd(1,t)))}),zE=function(e){return TE(Gr)(function(t,n){return hi(xc(t,Js,n))})(e)},og=function(e){return dr(rl,fu(zE(e)))},VE=og,KE=function(e){return OE(Gr)(function(t,n){return hi(xc(t,Qs,n))})(e)},$E=function(e){return dr(rl,fu(KE(e)))},YE=function(e){return CE(Gr)(function(t,n){return hi(zm(t,Qs,n))})(e)},JE=function(e){return dr(ug,fu(YE(e)))},QE=function(e){return ME(Gr)(function(t,n){return hi(xc(t,Qs,n))})(e)},XE=function(e){return dr(rl,fu(QE(e)))},ZE=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return kE(Gr)(function(n,r){return hi(zm(n,Js,r))}).apply(void 0,e)},xE=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return dr(ug,fu(ZE.apply(void 0,e)))},eR=PE(Gr),tR=function(e){return function(t){return NE(Gr)(function(n,r,i){return hi(xc(n,Js,nl(r,i.length===0?"never":i.map(function(a){return JSON.stringify(a)}).join(" | "))))})(e)(t)}},nR=function(e){return function(t){return dr(rl,fu(tR(e)(t)))}},rR=WE(Gr)(function(e,t){return hi(dE(e,t))}),iR=Ys,fu=FE(Gr),aR="io-ts/Decoder",cg={URI:aR,literal:qE,string:BE,number:jE,boolean:GE,nullable:HE,type:VE,struct:og,partial:$E,record:XE,array:JE,tuple:xE,intersect:eR,sum:nR,lazy:rR,readonly:iR},uR=[],ya=function(e,t){return t===void 0&&(t=uR),{value:e,forest:t}},oR=function(e){return e.value+lg("\n",e.forest)},lg=function(e,t){for(var n="",r=t.length,i,a=0;a<r;a++){i=t[a];var u=a===r-1;n+=e+(u?"":"")+" "+i.value,n+=lg(e+(r>1&&!u?"  ":"   "),i.forest)}return n},cR=hE({Leaf:function(e,t){return ya("cannot decode ".concat(JSON.stringify(e),", should be ").concat(t))},Key:function(e,t,n){return ya("".concat(t," property ").concat(JSON.stringify(e)),wa(n))},Index:function(e,t,n){return ya("".concat(t," index ").concat(e),wa(n))},Member:function(e,t){return ya("member ".concat(e),wa(t))},Lazy:function(e,t){return ya("lazy type ".concat(e),wa(t))},Wrap:function(e,t){return ya(e,wa(t))}}),wa=function(e){for(var t=[],n=e,r=[];;)switch(n._tag){case"Of":{r.push(cR(n.value));var i=t.pop();if(i===void 0)return r;n=i}break;case"Concat":t.push(n.right),n=n.left;break}},fg=function(e){return wa(e).map(oR).join("\n")};function lR(e,t){return{decode:e.decode,encode:t.encode}}var il=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},fR=function(e){return il(function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0})},sR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return il(function(n,r){return e.every(function(i,a){return i.equals(n[a],r[a])})})},dR="Eq",ro={equals:function(e,t){return e===t}},hR=sR,vR=fR;ro.equals;var mR=ro,gR=ro,pR=ro,_R=function(e){return il(function(t,n){return t.length===n.length&&t.every(function(r,i){return e.equals(r,n[i])})})},yR=_R;function sg(e){return function(t,n){if(n===void 0){var r=sg(e);return function(a){return r(a,t)}}for(var i in t)if(!rE.call(n,i)||!e.equals(t[i],n[i]))return!1;return!0}}function bR(e){var t=sg(e);return il(function(n,r){return t(n)(r)&&t(r)(n)})}var IR=bR,SR=gR,AR=pR,ER=mR;function RR(e){return{equals:function(t,n){return t===null||n===null?t===n:e.equals(t,n)}}}var dg=vR,wR=dg;function TR(e){return{equals:function(t,n){for(var r in e){var i=t[r],a=n[r];if(!(i===void 0||a===void 0?i===a:e[r].equals(i,a)))return!1}return!0}}}var OR=IR,CR=yR,MR=hR,kR=function(e){return function(t){return{equals:function(n,r){return t.equals(n,r)&&e.equals(n,r)}}}};function PR(e){return function(t){return{equals:function(n,r){var i=n[e],a=r[e];return i!==a?!1:t[i].equals(n,r)}}}}function NR(e){var t=el(e);return{equals:function(n,r){return t().equals(n,r)}}}var WR=Ys,rd={URI:dR,literal:function(){return ro},string:SR,number:AR,boolean:ER,nullable:RR,type:wR,struct:dg,partial:TR,record:OR,array:CR,tuple:MR,intersect:kR,sum:PR,lazy:function(e,t){return NR(t)},readonly:WR};function Ae(e){return el(e)}function Qa(e){return function(t){return t(e)}}var Ti=function(e="(nomessage)"){Error.call(this,e),"captureStackTrace"in Error?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name=this.constructor.name};Ti.prototype=Object.create(Error.prototype);var Vi=class extends Ti{constructor(e,t="empty"){super("Invariant condition failed: "+(e||"(unnamed)")),this.input=t}toString(){return"".concat(this.message," on input[").concat(this.input,"]")}},FR=class extends Ti{constructor(e){super("Matching not exhaustive".concat(e?": unexpected value ".concat(JSON.stringify(e)):""))}};function bt(e,t,n){var r;if(!e){const i=new Vi(typeof t=="string"?t:t&&t(),n!==void 0&&typeof n!="string"?n():n);throw i.stack=(r=i.stack)==null?void 0:r.split("\n").filter(a=>a.indexOf("errors.")===-1).join("\n"),i}}function UR(e,t){if(e==null)throw new Vi(t);return e}function hn(e){throw new FR(e)}function lo(e,t){var n=window,r;n.ddebug=(r=n.ddebug)!==null&&r!==void 0?r:{},n.ddebug[e]=t}function DR(e,t){return e.size===t.size&&Array.from(e.values()).every(function(n){return t.has(n)})}function Zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t,n){return t&&zd(e.prototype,t),n&&zd(e,n),e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt={};In(Kt,{Buffer:()=>pf,deepEqual:()=>_g,deepUpdate:()=>id,filterKeys:()=>pg,filterKeysBy:()=>$R,fromEntries:()=>XR,immutableUpdate:()=>hg,immutableUpdateC:()=>HR,immutableUpdateOption:()=>vg,immutableUpdateOptionC:()=>zR,isEmptyObject:()=>jR,isEqual:()=>_f,isObject:()=>BR,keys:()=>gg,merge:()=>VR,modify:()=>KR,omit:()=>ZR,pick:()=>YR,pickProps:()=>JR,set:()=>QR,structuredClone:()=>qR,toArray:()=>GR,update:()=>mg});var gf=Me(kn(),1),LR=Me(it(),1),pf;(e=>{class t{constructor(r){this._predicate=r,this._queueMap=new Set,this._queue=[]}put(r){const i=new Set,a=r.reduce((u,o)=>(!i.has(o.id)&&!this._queueMap.has(o.id)&&this._predicate(o)&&(i.add(o.id),u.push(o)),u),[]);this._queue.push(...a),a.forEach(({id:u})=>this._queueMap.add(u))}take(r){let i=0;const a=[];for(;i<this._queue.length&&a.length<r;){const u=this._queue[i];this._predicate(u)&&a.push(u),this._queueMap.delete(u.id),i++}return this._queue=this._queue.slice(i),a}order(r){this._queue.sort(r)}get length(){return this._queue.length}get nonEmpty(){return this._queue.length>0}}e.LazyPredicateUniq=t})(pf||(pf={}));var qR=Cu;function Cu(e){if(typeof e!="object")return e;let t,n;const r=Object.prototype.toString.call(e);if(r==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){n=new e.constructor;for(t in e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=Cu(e[t]))}else{n={};for(t in e)t==="__proto__"?Object.defineProperty(n,t,{value:Cu(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=Cu(e[t])}return n}if(r==="[object Array]"){for(t=e.length,n=Array(t);t--;)n[t]=Cu(e[t]);return n}return r==="[object Date]"?new Date(+e):r==="[object RegExp]"?(n=new RegExp(e.source,e.flags),n.lastIndex=e.lastIndex,n):e}var Vd=Object.prototype.hasOwnProperty;function _f(e,t){let n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&_f(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Vd.call(e,n)&&++r&&!Vd.call(t,n)||!(n in t)||!_f(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function BR(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function jR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function GR(e){return Object.keys(e).map(t=>e[t])}function hg(e,t,n){const{[e]:r,...i}=n;return{[e]:t((0,gf.fromNullable)(r)),...i}}var HR=e=>t=>n=>hg(e,t,n);function vg(e,t,n){const{[e]:r,...i}=n,a=typeof t=="function"?t((0,gf.fromNullable)(r)):t;return(0,LR.pipe)(a,(0,gf.fold)(()=>i,u=>({[e]:u,...i})))}var zR=e=>t=>n=>vg(e,t,n);function VR(e,t){return yf(yf({},e),t)}function yf(e,t){var n;for(const r in t){const i=(n=e[r])!=null?n:{},a=t[r];a!=null&&i!=null&&a.constructor===Object&&i.constructor===Object?e[r]=yf(i,a):e[r]=a}return e}function mg(e,t){return Object.assign({},e,t)}function id(e,t){const n={};for(const r in e){const i=t[r];if(i===void 0){n[r]=e[r];continue}n[r]=typeof i=="object"?id(e[r],i):i}return n}function KR(e){return t=>mg(t,e)}function gg(e){return Object.keys(e)}function pg(e,t){return gg(e).filter(n=>t(e[n]))}function $R(e){return t=>pg(t,e)}function YR(e){return t=>t[e]}function JR(...e){return t=>e.reduce((n,r)=>({...n,[r]:t[r]}),{})}function QR(e){return(t,n)=>({...n,[e]:t})}function _g(e,t){if(e===t)return!0;if(Kd(e)||Kd(t))return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!(n in t)||!_g(e[n],t[n]))return!1;return!0}function Kd(e){return e!==Object(e)}function XR(e){return Array.from(e).reduce((t,[n,r])=>({...t,[n]:r}),{})}var ZR=(e,...t)=>{const n={...e};return t.forEach(r=>delete n[r]),n},xR=class{constructor(e){this.capacity=e,this.size=0,this._keymap={}}put(e,t){var n;const r={key:e,value:t};if(this._keymap[e]=r,this._tail?(this._tail.newer=r,r.older=this._tail):this._head=r,this._tail=r,this.size===this.capacity)return(n=this.shift())==null?void 0:n.value;++this.size}get(e){const t=this._getImpl(e);return t&&t.value}peek(e){const t=this._keymap[e];return t==null?void 0:t.value}set(e,t){const n=this._getImpl(e),r=t(n&&n.value);return r!=null?n?n.value=r:this.put(e,r):n&&this.remove(e),r}getRef(e){return this._getImpl(e)}remove(e){const t=this._keymap[e];if(t!=null)return delete this._keymap[e],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this._head=t.newer):t.older?(t.older.newer=void 0,this._tail=t.older):this._head=this._tail=void 0,--this.size,t.value}forEach(e){for(const t in this._keymap)e(t,this._keymap[t].value)}shift(){const e=this._head;return this._head&&(this._head.newer?(this._head=this._head.newer,this._head.older=void 0):this._head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e}_getImpl(e){const t=this._keymap[e];if(t!=null)return t===this._tail||(t.newer&&(t===this._head&&(this._head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this._tail,this._tail&&(this._tail.newer=t),this._tail=t),t}};function yg(e,t){return e+t}function zo(e){return t=>!e(t)}function Xa(...e){return t=>e.some(n=>n(t))}function ew(e){return Math.trunc(Math.random()*e)}function Za({length:e}){return e>0}var tw=e=>new Promise(t=>setTimeout(t,e)),bg=(e,t)=>n=>n?e:t,nw=50;function rw(e,t){const n=new xR(nw);return{[e.name]:function(...r){const i=r[0],a=n.get(i);if(!a){const u=e.apply(this,r);return n.put(i,u),u}return a}}[e.name]}function qu(e){return Ig(e,e.length-1,[])}function Ig(e,t,n){return function(r){const i=n.concat([r]);return t===0?e.apply(this,i):Ig(e,t-1,i)}}var ra={};In(ra,{alphanumeric:()=>Bw,camelize:()=>Tw,capitalize:()=>ww,charCount:()=>Nw,containsSpacesOnly:()=>jw,containsWordSeparator:()=>Gw,decode:()=>Cg,decodeHTMLCodes:()=>Dw,escapeRegExp:()=>Uw,formatPrice:()=>Fw,getFirstMatch:()=>Mw,getFirstWord:()=>kw,isBreakWordChar:()=>qw,nbsp:()=>Rw,padStart:()=>Tg,pluralize:()=>ko,replaceTabsWithSpaces:()=>Ww,sanitize:()=>ad,toLowerCaseStart:()=>Cw,toTitleCase:()=>Ow,trimToLastWholeWord:()=>Hw,urlContainsProtocol:()=>Og,urlToDomain:()=>Lw,wordCount:()=>Pw});var{entries:Sg,setPrototypeOf:$d,isFrozen:iw,getPrototypeOf:aw,getOwnPropertyDescriptor:uw}=Object,{freeze:hr,seal:Lr,create:Ag}=Object,{apply:bf,construct:If}=typeof Reflect<"u"&&Reflect;hr||(hr=function(t){return t});Lr||(Lr=function(t){return t});bf||(bf=function(t,n,r){return t.apply(n,r)});If||(If=function(t,n){return new t(...n)});var fo=vr(Array.prototype.forEach),ow=vr(Array.prototype.lastIndexOf),Yd=vr(Array.prototype.pop),pu=vr(Array.prototype.push),cw=vr(Array.prototype.splice),Mo=vr(String.prototype.toLowerCase),Nl=vr(String.prototype.toString),Jd=vr(String.prototype.match),_u=vr(String.prototype.replace),lw=vr(String.prototype.indexOf),fw=vr(String.prototype.trim),Kr=vr(Object.prototype.hasOwnProperty),cr=vr(RegExp.prototype.test),yu=sw(TypeError);function vr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return bf(e,t,r)}}function sw(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return If(e,n)}}function zt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mo;$d&&$d(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const a=n(i);a!==i&&(iw(t)||(t[r]=a),i=a)}e[i]=!0}return e}function dw(e){for(let t=0;t<e.length;t++)Kr(e,t)||(e[t]=null);return e}function ea(e){const t=Ag(null);for(const[n,r]of Sg(e))Kr(e,n)&&(Array.isArray(r)?t[n]=dw(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=ea(r):t[n]=r);return t}function bu(e,t){for(;e!==null;){const r=uw(e,t);if(r){if(r.get)return vr(r.get);if(typeof r.value=="function")return vr(r.value)}e=aw(e)}function n(){return null}return n}var Qd=hr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wl=hr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Fl=hr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),hw=hr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ul=hr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),vw=hr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xd=hr(["#text"]),Zd=hr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Dl=hr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xd=hr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),so=hr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mw=Lr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gw=Lr(/<%[\w\W]*|[\w\W]*%>/gm),pw=Lr(/\$\{[\w\W]*/gm),_w=Lr(/^data-[\-\w.\u00B7-\uFFFF]+$/),yw=Lr(/^aria-[\-\w]+$/),Eg=Lr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bw=Lr(/^(?:\w+script|data):/i),Iw=Lr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Rg=Lr(/^html$/i),Sw=Lr(/^[a-z][.\w]*(-[.\w]+)+$/i),eh=Object.freeze({__proto__:null,ARIA_ATTR:yw,ATTR_WHITESPACE:Iw,CUSTOM_ELEMENT:Sw,DATA_ATTR:_w,DOCTYPE_NAME:Rg,ERB_EXPR:gw,IS_ALLOWED_URI:Eg,IS_SCRIPT_OR_DATA:bw,MUSTACHE_EXPR:mw,TMPLIT_EXPR:pw}),Iu={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Aw=function(){return typeof window>"u"?null:window},Ew=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},th=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function wg(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Aw();const t=ie=>wg(ie);if(t.version="3.2.4",t.removed=[],!e||!e.document||e.document.nodeType!==Iu.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:u,Node:o,Element:l,NodeFilter:f,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:_,trustedTypes:R}=e,A=l.prototype,E=bu(A,"cloneNode"),g=bu(A,"remove"),I=bu(A,"nextSibling"),C=bu(A,"childNodes"),k=bu(A,"parentNode");if(typeof u=="function"){const ie=n.createElement("template");ie.content&&ie.content.ownerDocument&&(n=ie.content.ownerDocument)}let L,q="";const{implementation:G,createNodeIterator:D,createDocumentFragment:Y,getElementsByTagName:fe}=n,{importNode:$}=r;let x=th();t.isSupported=typeof Sg=="function"&&typeof k=="function"&&G&&G.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Re,ERB_EXPR:N,TMPLIT_EXPR:P,DATA_ATTR:s,ARIA_ATTR:S,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:c,CUSTOM_ELEMENT:p}=eh;let{IS_ALLOWED_URI:U}=eh,j=null;const ae=zt({},[...Qd,...Wl,...Fl,...Ul,...Xd]);let V=null;const Q=zt({},[...Zd,...Dl,...xd,...so]);let me=Object.seal(Ag(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,Ee=null,Ge=!0,Ke=!0,K=!1,pe=!0,De=!1,Ze=!0,rt=!1,W=!1,J=!1,ne=!1,Se=!1,Xe=!1,ot=!0,at=!1;const Tt="user-content-";let Nt=!0,Wt=!1,Oe={},Pe=null;const Ye=zt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const et=zt({},["audio","video","img","source","image","track"]);let tt=null;const de=zt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",ke="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xhtml";let Le=oe,se=!1,we=null;const Be=zt({},[ue,ke,oe],Nl);let gt=zt({},["mi","mo","mn","ms","mtext"]),ft=zt({},["annotation-xml"]);const ye=zt({},["title","style","font","a","script"]);let w=null;const he=["application/xhtml+xml","text/html"],_e="text/html";let Te=null,Ne=null;const je=n.createElement("form"),Qe=function(F){return F instanceof RegExp||F instanceof Function},X=function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ne&&Ne===F)){if((!F||typeof F!="object")&&(F={}),F=ea(F),w=he.indexOf(F.PARSER_MEDIA_TYPE)===-1?_e:F.PARSER_MEDIA_TYPE,Te=w==="application/xhtml+xml"?Nl:Mo,j=Kr(F,"ALLOWED_TAGS")?zt({},F.ALLOWED_TAGS,Te):ae,V=Kr(F,"ALLOWED_ATTR")?zt({},F.ALLOWED_ATTR,Te):Q,we=Kr(F,"ALLOWED_NAMESPACES")?zt({},F.ALLOWED_NAMESPACES,Nl):Be,tt=Kr(F,"ADD_URI_SAFE_ATTR")?zt(ea(de),F.ADD_URI_SAFE_ATTR,Te):de,ze=Kr(F,"ADD_DATA_URI_TAGS")?zt(ea(et),F.ADD_DATA_URI_TAGS,Te):et,Pe=Kr(F,"FORBID_CONTENTS")?zt({},F.FORBID_CONTENTS,Te):Ye,Ie=Kr(F,"FORBID_TAGS")?zt({},F.FORBID_TAGS,Te):{},Ee=Kr(F,"FORBID_ATTR")?zt({},F.FORBID_ATTR,Te):{},Oe=Kr(F,"USE_PROFILES")?F.USE_PROFILES:!1,Ge=F.ALLOW_ARIA_ATTR!==!1,Ke=F.ALLOW_DATA_ATTR!==!1,K=F.ALLOW_UNKNOWN_PROTOCOLS||!1,pe=F.ALLOW_SELF_CLOSE_IN_ATTR!==!1,De=F.SAFE_FOR_TEMPLATES||!1,Ze=F.SAFE_FOR_XML!==!1,rt=F.WHOLE_DOCUMENT||!1,ne=F.RETURN_DOM||!1,Se=F.RETURN_DOM_FRAGMENT||!1,Xe=F.RETURN_TRUSTED_TYPE||!1,J=F.FORCE_BODY||!1,ot=F.SANITIZE_DOM!==!1,at=F.SANITIZE_NAMED_PROPS||!1,Nt=F.KEEP_CONTENT!==!1,Wt=F.IN_PLACE||!1,U=F.ALLOWED_URI_REGEXP||Eg,Le=F.NAMESPACE||oe,gt=F.MATHML_TEXT_INTEGRATION_POINTS||gt,ft=F.HTML_INTEGRATION_POINTS||ft,me=F.CUSTOM_ELEMENT_HANDLING||{},F.CUSTOM_ELEMENT_HANDLING&&Qe(F.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(me.tagNameCheck=F.CUSTOM_ELEMENT_HANDLING.tagNameCheck),F.CUSTOM_ELEMENT_HANDLING&&Qe(F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(me.attributeNameCheck=F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),F.CUSTOM_ELEMENT_HANDLING&&typeof F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(me.allowCustomizedBuiltInElements=F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(Ke=!1),Se&&(ne=!0),Oe&&(j=zt({},Xd),V=[],Oe.html===!0&&(zt(j,Qd),zt(V,Zd)),Oe.svg===!0&&(zt(j,Wl),zt(V,Dl),zt(V,so)),Oe.svgFilters===!0&&(zt(j,Fl),zt(V,Dl),zt(V,so)),Oe.mathMl===!0&&(zt(j,Ul),zt(V,xd),zt(V,so))),F.ADD_TAGS&&(j===ae&&(j=ea(j)),zt(j,F.ADD_TAGS,Te)),F.ADD_ATTR&&(V===Q&&(V=ea(V)),zt(V,F.ADD_ATTR,Te)),F.ADD_URI_SAFE_ATTR&&zt(tt,F.ADD_URI_SAFE_ATTR,Te),F.FORBID_CONTENTS&&(Pe===Ye&&(Pe=ea(Pe)),zt(Pe,F.FORBID_CONTENTS,Te)),Nt&&(j["#text"]=!0),rt&&zt(j,["html","head","body"]),j.table&&(zt(j,["tbody"]),delete Ie.tbody),F.TRUSTED_TYPES_POLICY){if(typeof F.TRUSTED_TYPES_POLICY.createHTML!="function")throw yu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof F.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw yu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=F.TRUSTED_TYPES_POLICY,q=L.createHTML("")}else L===void 0&&(L=Ew(R,i)),L!==null&&typeof q=="string"&&(q=L.createHTML(""));hr&&hr(F),Ne=F}},re=zt({},[...Wl,...Fl,...hw]),be=zt({},[...Ul,...vw]),We=function(F){let ge=k(F);(!ge||!ge.tagName)&&(ge={namespaceURI:Le,tagName:"template"});const qe=Mo(F.tagName),ct=Mo(ge.tagName);return we[F.namespaceURI]?F.namespaceURI===ke?ge.namespaceURI===oe?qe==="svg":ge.namespaceURI===ue?qe==="svg"&&(ct==="annotation-xml"||gt[ct]):!!re[qe]:F.namespaceURI===ue?ge.namespaceURI===oe?qe==="math":ge.namespaceURI===ke?qe==="math"&&ft[ct]:!!be[qe]:F.namespaceURI===oe?ge.namespaceURI===ke&&!ft[ct]||ge.namespaceURI===ue&&!gt[ct]?!1:!be[qe]&&(ye[qe]||!re[qe]):!!(w==="application/xhtml+xml"&&we[F.namespaceURI]):!1},st=function(F){pu(t.removed,{element:F});try{k(F).removeChild(F)}catch{g(F)}},_t=function(F,ge){try{pu(t.removed,{attribute:ge.getAttributeNode(F),from:ge})}catch{pu(t.removed,{attribute:null,from:ge})}if(ge.removeAttribute(F),F==="is")if(ne||Se)try{st(ge)}catch{}else try{ge.setAttribute(F,"")}catch{}},Dt=function(F){let ge=null,qe=null;if(J)F="<remove></remove>"+F;else{const yt=Jd(F,/^[\r\n\t ]+/);qe=yt&&yt[0]}w==="application/xhtml+xml"&&Le===oe&&(F='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+F+"</body></html>");const ct=L?L.createHTML(F):F;if(Le===oe)try{ge=new _().parseFromString(ct,w)}catch{}if(!ge||!ge.documentElement){ge=G.createDocument(Le,"template",null);try{ge.documentElement.innerHTML=se?q:ct}catch{}}const vt=ge.body||ge.documentElement;return F&&qe&&vt.insertBefore(n.createTextNode(qe),vt.childNodes[0]||null),Le===oe?fe.call(ge,rt?"html":"body")[0]:rt?ge.documentElement:vt},yn=function(F){return D.call(F.ownerDocument||F,F,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Z=function(F){return F instanceof d&&(typeof F.nodeName!="string"||typeof F.textContent!="string"||typeof F.removeChild!="function"||!(F.attributes instanceof h)||typeof F.removeAttribute!="function"||typeof F.setAttribute!="function"||typeof F.namespaceURI!="string"||typeof F.insertBefore!="function"||typeof F.hasChildNodes!="function")},ce=function(F){return typeof o=="function"&&F instanceof o};function b(ie,F,ge){fo(ie,qe=>{qe.call(t,F,ge,Ne)})}const v=function(F){let ge=null;if(b(x.beforeSanitizeElements,F,null),Z(F))return st(F),!0;const qe=Te(F.nodeName);if(b(x.uponSanitizeElement,F,{tagName:qe,allowedTags:j}),F.hasChildNodes()&&!ce(F.firstElementChild)&&cr(/<[/\w]/g,F.innerHTML)&&cr(/<[/\w]/g,F.textContent)||F.nodeType===Iu.progressingInstruction||Ze&&F.nodeType===Iu.comment&&cr(/<[/\w]/g,F.data))return st(F),!0;if(!j[qe]||Ie[qe]){if(!Ie[qe]&&O(qe)&&(me.tagNameCheck instanceof RegExp&&cr(me.tagNameCheck,qe)||me.tagNameCheck instanceof Function&&me.tagNameCheck(qe)))return!1;if(Nt&&!Pe[qe]){const ct=k(F)||F.parentNode,vt=C(F)||F.childNodes;if(vt&&ct){const yt=vt.length;for(let Lt=yt-1;Lt>=0;--Lt){const sn=E(vt[Lt],!0);sn.__removalCount=(F.__removalCount||0)+1,ct.insertBefore(sn,I(F))}}}return st(F),!0}return F instanceof l&&!We(F)||(qe==="noscript"||qe==="noembed"||qe==="noframes")&&cr(/<\/no(script|embed|frames)/i,F.innerHTML)?(st(F),!0):(De&&F.nodeType===Iu.text&&(ge=F.textContent,fo([Re,N,P],ct=>{ge=_u(ge,ct," ")}),F.textContent!==ge&&(pu(t.removed,{element:F.cloneNode()}),F.textContent=ge)),b(x.afterSanitizeElements,F,null),!1)},y=function(F,ge,qe){if(ot&&(ge==="id"||ge==="name")&&(qe in n||qe in je))return!1;if(!(Ke&&!Ee[ge]&&cr(s,ge))){if(!(Ge&&cr(S,ge))){if(!V[ge]||Ee[ge]){if(!(O(F)&&(me.tagNameCheck instanceof RegExp&&cr(me.tagNameCheck,F)||me.tagNameCheck instanceof Function&&me.tagNameCheck(F))&&(me.attributeNameCheck instanceof RegExp&&cr(me.attributeNameCheck,ge)||me.attributeNameCheck instanceof Function&&me.attributeNameCheck(ge))||ge==="is"&&me.allowCustomizedBuiltInElements&&(me.tagNameCheck instanceof RegExp&&cr(me.tagNameCheck,qe)||me.tagNameCheck instanceof Function&&me.tagNameCheck(qe))))return!1}else if(!tt[ge]){if(!cr(U,_u(qe,c,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&F!=="script"&&lw(qe,"data:")===0&&ze[F])){if(!(K&&!cr(M,_u(qe,c,"")))){if(qe)return!1}}}}}}return!0},O=function(F){return F!=="annotation-xml"&&Jd(F,p)},z=function(F){b(x.beforeSanitizeAttributes,F,null);const{attributes:ge}=F;if(!ge||Z(F))return;const qe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V,forceKeepAttr:void 0};let ct=ge.length;for(;ct--;){const vt=ge[ct],{name:yt,namespaceURI:Lt,value:sn}=vt,cn=Te(yt);let Yt=yt==="value"?sn:fw(sn);if(qe.attrName=cn,qe.attrValue=Yt,qe.keepAttr=!0,qe.forceKeepAttr=void 0,b(x.uponSanitizeAttribute,F,qe),Yt=qe.attrValue,at&&(cn==="id"||cn==="name")&&(_t(yt,F),Yt=Tt+Yt),Ze&&cr(/((--!?|])>)|<\/(style|title)/i,Yt)){_t(yt,F);continue}if(qe.forceKeepAttr||(_t(yt,F),!qe.keepAttr))continue;if(!pe&&cr(/\/>/i,Yt)){_t(yt,F);continue}De&&fo([Re,N,P],_a=>{Yt=_u(Yt,_a," ")});const pa=Te(F.nodeName);if(y(pa,cn,Yt)){if(L&&typeof R=="object"&&typeof R.getAttributeType=="function"&&!Lt)switch(R.getAttributeType(pa,cn)){case"TrustedHTML":{Yt=L.createHTML(Yt);break}case"TrustedScriptURL":{Yt=L.createScriptURL(Yt);break}}try{Lt?F.setAttributeNS(Lt,yt,Yt):F.setAttribute(yt,Yt),Z(F)?st(F):Yd(t.removed)}catch{}}}b(x.afterSanitizeAttributes,F,null)},ve=function ie(F){let ge=null;const qe=yn(F);for(b(x.beforeSanitizeShadowDOM,F,null);ge=qe.nextNode();)b(x.uponSanitizeShadowNode,ge,null),v(ge),z(ge),ge.content instanceof a&&ie(ge.content);b(x.afterSanitizeShadowDOM,F,null)};return t.sanitize=function(ie){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,qe=null,ct=null,vt=null;if(se=!ie,se&&(ie="<!-->"),typeof ie!="string"&&!ce(ie))if(typeof ie.toString=="function"){if(ie=ie.toString(),typeof ie!="string")throw yu("dirty is not a string, aborting")}else throw yu("toString is not a function");if(!t.isSupported)return ie;if(W||X(F),t.removed=[],typeof ie=="string"&&(Wt=!1),Wt){if(ie.nodeName){const sn=Te(ie.nodeName);if(!j[sn]||Ie[sn])throw yu("root node is forbidden and cannot be sanitized in-place")}}else if(ie instanceof o)ge=Dt("<!---->"),qe=ge.ownerDocument.importNode(ie,!0),qe.nodeType===Iu.element&&qe.nodeName==="BODY"||qe.nodeName==="HTML"?ge=qe:ge.appendChild(qe);else{if(!ne&&!De&&!rt&&ie.indexOf("<")===-1)return L&&Xe?L.createHTML(ie):ie;if(ge=Dt(ie),!ge)return ne?null:Xe?q:""}ge&&J&&st(ge.firstChild);const yt=yn(Wt?ie:ge);for(;ct=yt.nextNode();)v(ct),z(ct),ct.content instanceof a&&ve(ct.content);if(Wt)return ie;if(ne){if(Se)for(vt=Y.call(ge.ownerDocument);ge.firstChild;)vt.appendChild(ge.firstChild);else vt=ge;return(V.shadowroot||V.shadowrootmode)&&(vt=$.call(r,vt,!0)),vt}let Lt=rt?ge.outerHTML:ge.innerHTML;return rt&&j["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&cr(Rg,ge.ownerDocument.doctype.name)&&(Lt="<!DOCTYPE "+ge.ownerDocument.doctype.name+">\n"+Lt),De&&fo([Re,N,P],sn=>{Lt=_u(Lt,sn," ")}),L&&Xe?L.createHTML(Lt):Lt},t.setConfig=function(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(ie),W=!0},t.clearConfig=function(){Ne=null,W=!1},t.isValidAttribute=function(ie,F,ge){Ne||X({});const qe=Te(ie),ct=Te(F);return y(qe,ct,ge)},t.addHook=function(ie,F){typeof F=="function"&&pu(x[ie],F)},t.removeHook=function(ie,F){if(F!==void 0){const ge=ow(x[ie],F);return ge===-1?void 0:cw(x[ie],ge,1)[0]}return Yd(x[ie])},t.removeHooks=function(ie){x[ie]=[]},t.removeAllHooks=function(){x=th()},t}var nh=wg(),Rw="";function ww(e){return e?e[0].toUpperCase()+e.slice(1):""}function Tw(e){return e?e.replace(/(?:^|[-_\s])(\w)/g,(t,n)=>n?n.toUpperCase():""):""}function Ow(e){return e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}function Cw(e){return e.charAt(0).toLowerCase()+e.substr(1)}var Sf;(e=>{e.URI_REGEXP=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i})(Sf||(Sf={}));function ad(e,t){var n;return!e||typeof window>"u"?"":t?nh.sanitize(e,{...(n=t.returnHTML)!=null&&n?{RETURN_DOM_FRAGMENT:!0,RETURN_DOM_IMPORT:!0}:{},...t.addTags?{ADD_TAGS:t.addTags}:{},...t.allowedTags?{ALLOWED_TAGS:t.allowedTags}:{},...t.forbidTags?{FORBID_TAGS:t.forbidTags}:{},...t.allowedAttrs?{ALLOWED_ATTR:t.allowedAttrs}:{},...typeof t.sanitizeDom=="boolean"?{SANITIZE_DOM:t.sanitizeDom}:{},...typeof t.allowDataAttrs=="boolean"?{ALLOW_DATA_ATTR:t.allowDataAttrs}:{},ALLOWED_URI_REGEXP:t.linkRegExp||Sf.URI_REGEXP}):nh.sanitize(e)}function Mw(e,t){const n=e.match(t);return n&&n[1]}function kw(e){return e.split(/\s+/)[0]}function Pw(e){if(!e)return 0;const t=e.replace(/[\W\d]/gi," ").replace(/\s+/gi," ").trim().split(" ");return t.length===1&&t[0]===""?0:t.length}function Nw(e){return Cg(e).length}function Ww(e){return e.replace(/\t/g,"    ")}function ko(e,t,n){return e===1?t:n}function Fw(e,t="en-US"){return e.toLocaleString(t,{minimumFractionDigits:2,maximumFractionDigits:2})}function Uw(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function Tg(e,t,n){return t=t>>0,n=String(n||" "),e.length>t?String(e):(t=t-e.length,t>n.length&&(n+=n.repeat(t/n.length)),n.slice(0,t)+String(e))}function Dw(e){var t,n;const r=document.createElement("div");return r.innerHTML=ad(e),(n=(t=r.textContent)!=null?t:r.innerText)!=null?n:""}function Lw(e){if(!e)return"";const t=document.createElement("a");return t.href=e,t.hostname}function Og(e){return!!e.match("\\w+\\:.*")}function qw(e){return e&&(e<48||e===58||e===59||e===63)||!1}var rh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Bw(e){if(e<0)throw new TypeError("Length should not be negative: ".concat(e));return Array.from({length:e},()=>rh.charAt(Math.random()*rh.length)).join("")}function jw(e){return e.match(/^[^\S\r\n]+$/)!==null}function Gw(e){return e.match(/[\s\r\n\t]/)!==null}function Hw(e,t){return e.length<=t?e:e.substr(0,t).split(" ").slice(0,-1).join(" ")}function Cg(e){const t=[];let n=0;const r=e.length;let i,a;for(;n<r;)i=e.charCodeAt(n++),(i&63488)===55296&&n<r?(a=e.charCodeAt(n++),(a&64512)===56320?t.push(((i&1023)<<10)+(a&1023)+65536):t.push(i,a)):t.push(i);return t}var di={};In(di,{UniqueArray:()=>Af,arraySubstract:()=>tT,compareInPairs:()=>rT,equals:()=>nT,existsOnEdgesOnly:()=>fT,findByPredicateList:()=>cT,findFrom:()=>eT,findIndexFrom:()=>kg,findIndexFromMap:()=>Xw,findLastIndexFrom:()=>Pg,findNotLower:()=>Jw,flatMap:()=>iT,generateSequence:()=>lT,lookAround:()=>Zw,lookAroundMap:()=>xw,lowerBound:()=>Mg,mapNTimes:()=>aT,omit:()=>uT,omitMutable:()=>oT,partition:()=>Vw,pickRandom:()=>Kw,pickRandomElement:()=>$w,shuffle:()=>Yw,sort:()=>Qw});var Yn=Me(kn(),1),zw=Me(Wr(),1),Vo=Me(it(),1);function Vw(e,t){return e.reduce((n,r)=>(t(r)?n[0].push(r):n[1].push(r),n),[[],[]])}function Kw(e,t,n){if(n>=e.length||t>=e.length)return e;const r=new Set,i=Math.floor(t+n>t?Math.random()*(n-t)+1:0);for(;r.size<i;){const a=Math.floor(Math.random()*e.length);r.add(a)}return Array.from(r).map(a=>e[a])}function $w(e){if(e.length<=0)return Yn.none;const t=Math.floor(e.length*Math.random());return Yn.some(e[t])}function Yw(e){const t=e.slice(0);let n=t.length;for(;n>0;){const r=Math.floor(Math.random()*n);n--,[t[n],t[r]]=[t[r],t[n]]}return t}function Mg(e,t){let n=-1,r=e.length;for(;n+1!==r;){const a=n+(r-n>>1);t(e[a])?n=a:r=a}const i=n+1;return i===e.length?Yn.none:Yn.some(i)}function Jw(e,t,n){return Mg(e,qu((0,zw.gt)(n))(t))}function Qw(e,...t){return e.sort((n,r)=>t.reduce((i,a)=>i!==0?i:a(n,r),0))}function kg(e,t,n){if(t>=0){for(let r=t;r<e.length;++r)if(n(e[r]))return Yn.some({index:r,value:e[r]})}return Yn.none}function Xw(e,t,n){if(t>=0)for(let r=t;r<e.length;++r){const i=n(e[r]);if(Yn.isSome(i))return Yn.some({index:r,value:i.value})}return Yn.none}function Pg(e,t,n){if(t<e.length){for(let r=t;r>=0;--r)if(n(e[r]))return Yn.some({index:r,value:e[r]})}return Yn.none}function ud(e,t,n,r){return(0,Vo.pipe)(kg(e,t,r),Yn.alt(()=>Pg(e,n,r)))}function Zw(e,t,n){return ud(e,t+1,t-1,n)}function xw(e,t,n){return(0,Vo.pipe)(ud(e,t+1,t-1,r=>Yn.isSome(n(r))),Yn.chain(r=>(0,Vo.pipe)(n(r.value),Yn.map(i=>({...r,value:i})))))}function eT(e,t,n){return ud(e,t,t-1,n)}function tT(e,t){for(let n=0;n<e.length;++n){const r=t.findIndex(i=>e[n].equals(i));r!==-1&&(e.splice(n--,1),t.splice(r,1))}return e}function nT(e,t){return e.length===t.length&&e.every((n,r)=>t[r].equals(n))}function rT(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}function iT(e){return e.reduce((t,n)=>t.concat(n),[])}function aT(e,t){return new Array(e).fill(!0).map((n,r)=>t(r))}function uT(e,t){const n=t.indexOf(e);return t.slice(0,n).concat(t.slice(n+1))}function oT(e,t){const n=t.indexOf(e);t.splice(n,1)}var cT=e=>t=>Ng(t,e,0);function Ng(e,t,n){return t.length<=n?Yn.none:(0,Vo.pipe)(Yn.fromNullable(e.find(t[n])),Yn.fold(()=>Ng(e,t,n+1),Yn.some))}var lT=e=>Array.from(Array(e).keys()),fT=e=>t=>{let n=-1;for(let r=0;r<t.length;r++){const i=t[r],a=t[r-1];if((!a||!e(a))&&e(i)&&(n=r),a&&e(a)&&!e(i)&&n!==0)return!1}return!0},Af;(e=>{e.from=t=>t,e.of=(...t)=>(0,e.from)(t)})(Af||(Af={}));var Na={};In(Na,{DAYS_IN_WEEK:()=>Lg,HOUR_IN_DAY:()=>Dg,Local:()=>Ko,MIN_IN_HOUR:()=>Ug,MS_IN_DAY:()=>od,MS_IN_HOUR:()=>Bg,MS_IN_MIN:()=>qg,MS_IN_SEC:()=>Wg,MS_IN_WEEK:()=>sT,SEC_IN_MIN:()=>Fg,UTC:()=>Ef,convertTimeToShortString:()=>hT,formatTime:()=>dT,secondsToTime:()=>jg});var Ll=Me(Fn(),1),Wg=1e3,Fg=60,Ug=60,Dg=24,Lg=7,qg=Fg*Wg,Bg=Ug*qg,od=Dg*Bg,sT=Lg*od;function jg(e){const t=Math.floor(e/3600),n=Math.floor((e-t*3600)/60),r=e-t*3600-n*60;return{h:t,m:n,s:r}}function ql(e){return Tg(String(e),2,"0")}function dT(e,{short:t=!1,withSec:n=!1}={}){const{h:r,m:i,s:a}=jg(e),u=[];return r>0&&u.push("".concat(ql(r)," ").concat(t?"h":ko(r,"hour","hours"))),(i>0||!n)&&u.push("".concat(ql(i)," ").concat(t?"min":ko(i,"minute","minutes"))),n&&u.push("".concat(ql(a)," ").concat(t?"sec":ko(a,"second","seconds"))),u.join(" ")}var hT=e=>e.h?"".concat(e.h," hr ").concat(e.m," min"):e.m>0?"".concat(e.m," min ").concat(e.s," sec"):"".concat(e.s," sec"),Ko;(e=>{const t=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d*[Z]$/,n=/^(\d{4}-\d{2}-\d{2}).(\d{2}:\d{2}:\d{2}(?:.\d+)?)$/;function r(A){return bt(t.test(A),"provided string should have timezone",A),new Date(A)}e.create=r;function i(A){return new Date(A)}e.copy=i,e.now=()=>new Date;function a(A,E){return new Date(A.getTime()+E.getTime())}e.add=a;function u(A,E){return new Date(A.getTime()-E.getTime())}e.subtract=u;function o(A){return Math.round(A.getTime()/1e3)}e.toSeconds=o;function l(A){return A.getTime()}e.toTimestamp=l;function f(A){let E=A.getHours();const g=E>=12?"pm":"am";E=E%12||12;const I="0".concat(E).slice(-2),C=A.getMinutes(),k="0".concat(C).slice(-2);return"".concat(I,":").concat(k," ").concat(g)}e.shortTime=f;function h(A){const E=A.toLocaleString("en-us",{month:"long"});return"".concat(E," ").concat(A.getDate(),", ").concat(A.getFullYear())}e.fullDate=h,(A=>{A.now=()=>l(e.now());function E(L,q){return L+q}A.add=E;function g(L,q){return L-q}A.subtract=g;function I(L){return Math.round(L/1e3)}A.toSeconds=I;function C(L){return new Date(L)}A.toLocal=C;function k(L){return e.Timestamp.toLocal(L).toISOString()}A.toISODate=k})(e.Timestamp||(e.Timestamp={}));function d(A,E){const g=E*od;return e.Timestamp.subtract(e.toTimestamp(A),g)}e.daysAgo=d;function _(A,E){const g=e.copy(A);return g.setMonth(A.getMonth()-E),e.toTimestamp(g)}e.monthsAgo=_;function R(A){let E=""+A;const g=E.match(n);if(g){const[,C,k]=g;E="".concat(C,"T").concat(k,"Z")}if(g||E.match(t))return Ll.fromNullable(new Error("Failed to parse date from: ".concat(A)))(e.create(E));const I=new Date(E);return isNaN(I.getTime())?Ll.left(new Error("Failed to parse date from: ".concat(A))):Ll.fromNullable(new Error("Failed to parse date from: ".concat(A)))(I)}e.parseDate=R,e.Eq={equals:(A,E)=>A.getTime()===E.getTime()}})(Ko||(Ko={}));var Ef;(e=>{(i=>{i.now=()=>e.toTimestamp(e.now())})(e.Timestamp||(e.Timestamp={}));function t(i){return i.getTime()}e.toTimestamp=t;function n(){return r(Ko.now())}e.now=n;function r(i){return new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds()))}e.fromLocal=r})(Ef||(Ef={}));var ho,vT=new Uint8Array(16);function mT(){if(!ho&&(ho=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ho))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ho(vT)}var xn=[];for(let e=0;e<256;++e)xn.push((e+256).toString(16).slice(1));function gT(e,t=0){return xn[e[t+0]]+xn[e[t+1]]+xn[e[t+2]]+xn[e[t+3]]+"-"+xn[e[t+4]]+xn[e[t+5]]+"-"+xn[e[t+6]]+xn[e[t+7]]+"-"+xn[e[t+8]]+xn[e[t+9]]+"-"+xn[e[t+10]]+xn[e[t+11]]+xn[e[t+12]]+xn[e[t+13]]+xn[e[t+14]]+xn[e[t+15]]}var pT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ih={randomUUID:pT};function _T(e,t,n){if(ih.randomUUID&&!t&&!e)return ih.randomUUID();e=e||{};const r=e.random||(e.rng||mT)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return gT(r)}var yT=_T,Su=Me(kn()),ah=Me(it()),xa;(function(e){var t=function(i){return(0,ah.pipe)((0,Su.fromNullable)(i),(0,Su.filter)(Za))},n=function(i){return(0,ah.pipe)((0,Su.fromNullable)(i),(0,Su.map)(function(a){return a.filter(Boolean)}),(0,Su.filter)(Za))};e.string=t,e.array=n})(xa||(xa={}));var Po=Me(js(),1),ia=Me(it(),1),Rf=Me(it()),uh=Me(kn()),oh=Me(Yi()),jn=Me(kn()),al=Me(it()),bT=Me(eA()),ch=Me(tA()),IT=Me(ui()),wf=function(e,t,n){var r;return n===e[t]?e:Object.assign({},e,(r={},r[t]=n,r))},ST=function(){function e(t,n){this.get=t,this.reverseGet=n,this._tag="Iso",this.unwrap=this.get,this.to=this.get,this.wrap=this.reverseGet,this.from=this.reverseGet}return e.prototype.reverse=function(){return new e(this.reverseGet,this.get)},e.prototype.modify=function(t){var n=this;return function(r){return n.reverseGet(t(n.get(r)))}},e.prototype.asLens=function(){var t=this;return new Gg(this.get,function(n){return function(r){return t.reverseGet(n)}})},e.prototype.asPrism=function(){var t=this;return new ul(function(n){return(0,jn.some)(t.get(n))},this.reverseGet)},e.prototype.asOptional=function(){var t=this;return new cd(function(n){return(0,jn.some)(t.get(n))},function(n){return function(r){return t.reverseGet(n)}})},e.prototype.asTraversal=function(){var t=this;return new ol(function(n){return function(r){return function(i){return n.map(r(t.get(i)),function(a){return t.reverseGet(a)})}}})},e.prototype.asFold=function(){var t=this;return new su(function(n){return function(r){return function(i){return r(t.get(i))}}})},e.prototype.asGetter=function(){var t=this;return new zg(function(n){return t.get(n)})},e.prototype.asSetter=function(){var t=this;return new io(function(n){return t.modify(n)})},e.prototype.compose=function(t){var n=this;return new e(function(r){return t.get(n.get(r))},function(r){return n.reverseGet(t.reverseGet(r))})},e.prototype.composeIso=function(t){return this.compose(t)},e.prototype.composeLens=function(t){return this.asLens().compose(t)},e.prototype.composePrism=function(t){return this.asPrism().compose(t)},e.prototype.composeOptional=function(t){return this.asOptional().compose(t)},e.prototype.composeTraversal=function(t){return this.asTraversal().compose(t)},e.prototype.composeFold=function(t){return this.asFold().compose(t)},e.prototype.composeGetter=function(t){return this.asGetter().compose(t)},e.prototype.composeSetter=function(t){return this.asSetter().compose(t)},e}(),Gg=function(){function e(t,n){this.get=t,this.set=n,this._tag="Lens"}return e.fromPath=function(){var t=e.fromProp();return function(n){var r=t(n[0]);return n.slice(1).reduce(function(i,a){return i.compose(t(a))},r)}},e.fromProp=function(){return function(t){return new e(function(n){return n[t]},function(n){return function(r){return wf(r,t,n)}})}},e.fromProps=function(){return function(t){var n=t.length;return new e(function(r){for(var i={},a=0;a<n;a++){var u=t[a];i[u]=r[u]}return i},function(r){return function(i){for(var a=0;a<n;a++){var u=t[a];if(r[u]!==i[u])return Object.assign({},i,r)}return i}})}},e.fromNullableProp=function(){return function(t,n){return new e(function(r){var i=(0,jn.fromNullable)(r[t]);return(0,jn.isNone)(i)?n:i.value},function(r){return function(i){return wf(i,t,r)}})}},e.prototype.modify=function(t){var n=this;return function(r){var i=n.get(r),a=t(i);return i===a?r:n.set(a)(r)}},e.prototype.asOptional=function(){var t=this;return new cd(function(n){return(0,jn.some)(t.get(n))},this.set)},e.prototype.asTraversal=function(){var t=this;return new ol(function(n){return function(r){return function(i){return n.map(r(t.get(i)),function(a){return t.set(a)(i)})}}})},e.prototype.asSetter=function(){var t=this;return new io(function(n){return t.modify(n)})},e.prototype.asGetter=function(){var t=this;return new zg(function(n){return t.get(n)})},e.prototype.asFold=function(){var t=this;return new su(function(n){return function(r){return function(i){return r(t.get(i))}}})},e.prototype.compose=function(t){var n=this;return new e(function(r){return t.get(n.get(r))},function(r){return function(i){return n.set(t.set(r)(n.get(i)))(i)}})},e.prototype.composeLens=function(t){return this.compose(t)},e.prototype.composeGetter=function(t){return this.asGetter().compose(t)},e.prototype.composeFold=function(t){return this.asFold().compose(t)},e.prototype.composeOptional=function(t){return this.asOptional().compose(t)},e.prototype.composeTraversal=function(t){return this.asTraversal().compose(t)},e.prototype.composeSetter=function(t){return this.asSetter().compose(t)},e.prototype.composeIso=function(t){return this.compose(t.asLens())},e.prototype.composePrism=function(t){return this.asOptional().compose(t.asOptional())},e}(),ul=function(){function e(t,n){this.getOption=t,this.reverseGet=n,this._tag="Prism"}return e.fromPredicate=function(t){return new e(function(n){return t(n)?(0,jn.some)(n):jn.none},al.identity)},e.some=function(){return Hg},e.prototype.modify=function(t){var n=this;return function(r){var i=n.modifyOption(t)(r);return(0,jn.isNone)(i)?r:i.value}},e.prototype.modifyOption=function(t){var n=this;return function(r){return jn.option.map(n.getOption(r),function(i){var a=t(i);return a===i?r:n.reverseGet(a)})}},e.prototype.set=function(t){return this.modify(function(){return t})},e.prototype.asOptional=function(){var t=this;return new cd(this.getOption,function(n){return t.set(n)})},e.prototype.asTraversal=function(){var t=this;return new ol(function(n){return function(r){return function(i){var a=t.getOption(i);return(0,jn.isNone)(a)?n.of(i):n.map(r(a.value),function(u){return t.set(u)(i)})}}})},e.prototype.asSetter=function(){var t=this;return new io(function(n){return t.modify(n)})},e.prototype.asFold=function(){var t=this;return new su(function(n){return function(r){return function(i){var a=t.getOption(i);return(0,jn.isNone)(a)?n.empty:r(a.value)}}})},e.prototype.compose=function(t){var n=this;return new e(function(r){return jn.option.chain(n.getOption(r),function(i){return t.getOption(i)})},function(r){return n.reverseGet(t.reverseGet(r))})},e.prototype.composePrism=function(t){return this.compose(t)},e.prototype.composeOptional=function(t){return this.asOptional().compose(t)},e.prototype.composeTraversal=function(t){return this.asTraversal().compose(t)},e.prototype.composeFold=function(t){return this.asFold().compose(t)},e.prototype.composeSetter=function(t){return this.asSetter().compose(t)},e.prototype.composeIso=function(t){return this.compose(t.asPrism())},e.prototype.composeLens=function(t){return this.asOptional().compose(t.asOptional())},e.prototype.composeGetter=function(t){return this.asFold().compose(t.asFold())},e}(),Hg=new ul(al.identity,jn.some),cd=function(){function e(t,n){this.getOption=t,this.set=n,this._tag="Optional"}return e.fromNullableProp=function(){return function(t){return new e(function(n){return(0,jn.fromNullable)(n[t])},function(n){return function(r){return wf(r,t,n)}})}},e.fromOptionProp=function(){var t=Gg.fromProp();return function(n){return t(n).composePrism(Hg)}},e.prototype.modify=function(t){var n=this;return function(r){var i=n.modifyOption(t)(r);return(0,jn.isNone)(i)?r:i.value}},e.prototype.modifyOption=function(t){var n=this;return function(r){return jn.option.map(n.getOption(r),function(i){var a=t(i);return a===i?r:n.set(a)(r)})}},e.prototype.asTraversal=function(){var t=this;return new ol(function(n){return function(r){return function(i){var a=t.getOption(i);return(0,jn.isNone)(a)?n.of(i):n.map(r(a.value),function(u){return t.set(u)(i)})}}})},e.prototype.asFold=function(){var t=this;return new su(function(n){return function(r){return function(i){var a=t.getOption(i);return(0,jn.isNone)(a)?n.empty:r(a.value)}}})},e.prototype.asSetter=function(){var t=this;return new io(function(n){return t.modify(n)})},e.prototype.compose=function(t){var n=this;return new e(function(r){return jn.option.chain(n.getOption(r),function(i){return t.getOption(i)})},function(r){return n.modify(t.set(r))})},e.prototype.composeOptional=function(t){return this.compose(t)},e.prototype.composeTraversal=function(t){return this.asTraversal().compose(t)},e.prototype.composeFold=function(t){return this.asFold().compose(t)},e.prototype.composeSetter=function(t){return this.asSetter().compose(t)},e.prototype.composeLens=function(t){return this.compose(t.asOptional())},e.prototype.composePrism=function(t){return this.compose(t.asOptional())},e.prototype.composeIso=function(t){return this.compose(t.asOptional())},e.prototype.composeGetter=function(t){return this.asFold().compose(t.asFold())},e}(),ol=function(){function e(t){this.modifyF=t,this._tag="Traversal"}return e.prototype.modify=function(t){var n=this;return function(r){return n.modifyF(bT.identity)(t)(r)}},e.prototype.set=function(t){return this.modify((0,al.constant)(t))},e.prototype.filter=function(t){return this.composePrism(ul.fromPredicate(t))},e.prototype.asFold=function(){var t=this;return new su(function(n){return function(r){return function(i){return t.modifyF((0,ch.getApplicative)(n))(function(a){return(0,ch.make)(r(a))})(i)}}})},e.prototype.asSetter=function(){var t=this;return new io(function(n){return t.modify(n)})},e.prototype.compose=function(t){var n=this;return new e(function(r){return function(i){return n.modifyF(r)(t.modifyF(r)(i))}})},e.prototype.composeTraversal=function(t){return this.compose(t)},e.prototype.composeFold=function(t){return this.asFold().compose(t)},e.prototype.composeSetter=function(t){return this.asSetter().compose(t)},e.prototype.composeOptional=function(t){return this.compose(t.asTraversal())},e.prototype.composeLens=function(t){return this.compose(t.asTraversal())},e.prototype.composePrism=function(t){return this.compose(t.asTraversal())},e.prototype.composeIso=function(t){return this.compose(t.asTraversal())},e.prototype.composeGetter=function(t){return this.asFold().compose(t.asFold())},e}(),zg=function(){function e(t){this.get=t,this._tag="Getter"}return e.prototype.asFold=function(){var t=this;return new su(function(n){return function(r){return function(i){return r(t.get(i))}}})},e.prototype.compose=function(t){var n=this;return new e(function(r){return t.get(n.get(r))})},e.prototype.composeGetter=function(t){return this.compose(t)},e.prototype.composeFold=function(t){return this.asFold().compose(t)},e.prototype.composeLens=function(t){return this.compose(t.asGetter())},e.prototype.composeIso=function(t){return this.compose(t.asGetter())},e.prototype.composeTraversal=function(t){return this.asFold().compose(t.asFold())},e.prototype.composeOptional=function(t){return this.asFold().compose(t.asFold())},e.prototype.composePrism=function(t){return this.asFold().compose(t.asFold())},e}(),su=function(){function e(t){this.foldMap=t,this._tag="Fold",this.getAll=t((0,IT.getMonoid)())(function(n){return[n]}),this.exist=t(oh.monoidAny),this.all=t(oh.monoidAll),this.foldMapFirst=t((0,jn.getFirstMonoid)())}return e.prototype.compose=function(t){var n=this;return new e(function(r){return function(i){return n.foldMap(r)(t.foldMap(r)(i))}})},e.prototype.composeFold=function(t){return this.compose(t)},e.prototype.composeGetter=function(t){return this.compose(t.asFold())},e.prototype.composeTraversal=function(t){return this.compose(t.asFold())},e.prototype.composeOptional=function(t){return this.compose(t.asFold())},e.prototype.composeLens=function(t){return this.compose(t.asFold())},e.prototype.composePrism=function(t){return this.compose(t.asFold())},e.prototype.composeIso=function(t){return this.compose(t.asFold())},e.prototype.find=function(t){return this.foldMapFirst((0,jn.fromPredicate)(t))},e.prototype.headOption=function(t){return this.find(function(){return!0})(t)},e}(),io=function(){function e(t){this.modify=t,this._tag="Setter"}return e.prototype.set=function(t){return this.modify((0,al.constant)(t))},e.prototype.compose=function(t){var n=this;return new e(function(r){return n.modify(t.modify(r))})},e.prototype.composeSetter=function(t){return this.compose(t)},e.prototype.composeTraversal=function(t){return this.compose(t.asSetter())},e.prototype.composeOptional=function(t){return this.compose(t.asSetter())},e.prototype.composeLens=function(t){return this.compose(t.asSetter())},e.prototype.composePrism=function(t){return this.compose(t.asSetter())},e.prototype.composeIso=function(t){return this.compose(t.asSetter())},e}(),AT=e=>e,Vg=e=>e,Bl=e=>e,ET=new ST(Rf.unsafeCoerce,Rf.unsafeCoerce);function du(){return ET}function Kg(e){return new ul(t=>e(t)?(0,uh.some)(t):uh.none,Rf.identity)}var mr=Me(kn(),1),dn=Me(Qc(),1),kr;(e=>{function t(g,I,C,k){return L=>{const q=tr.iso().unwrap(L);let G=g;return q.forEach((D,Y)=>{G=dn.fold(fe=>I(G,fe,Y),fe=>k(G,fe,Y),(fe,$)=>C(G,fe,$,Y))(D)}),G}}e.reduce=t;function n(g,I,C){return k=>e.fromMutation(L=>{(0,ia.pipe)(k,e.forEach((q,G)=>L.set(G,dn.left(g(G,q))),(q,G,D)=>(0,ia.pipe)(I(D,q,G),([Y,fe])=>L.set(D,dn.both(Y,fe))),(q,G)=>L.set(G,dn.right(C(G,q)))))})}e.mapWithIndex=n;function r(g,I,C){return n((k,L)=>g(L),(k,L,q)=>I(L,q),(k,L)=>C(L))}e.map=r;function i(g,I,C){return k=>e.fromMutation(L=>{(0,ia.pipe)(k,e.forEach((q,G)=>g(G,q)&&L.set(G,dn.left(q)),(q,G,D)=>I(D,q,G)&&L.set(D,dn.both(q,G)),(q,G)=>C(G,q)&&L.set(G,dn.right(q))))})}e.filterWithIndex=i;function a(g,I,C){return i((k,L)=>g(L),(k,L,q)=>I(L,q),(k,L)=>C(L))}e.filter=a;function u(g){return(I,C,k)=>L=>{const q=tr.iso().unwrap(L);let G=g.empty;return q.forEach((D,Y)=>{G=g.concat(G,dn.fold(fe=>I(Y,fe),fe=>k(Y,fe),(fe,$)=>C(Y,fe,$))(D))}),G}}e.foldMapWithIndex=u;function o(g){return(I,C,k)=>u(g)((L,q)=>I(q),(L,q,G)=>C(q,G),(L,q)=>k(q))}e.foldMap=o;function l(g,I,C){return k=>{tr.iso().unwrap(k).forEach((q,G)=>{dn.fold(D=>g(D,G),D=>C(D,G),(D,Y)=>I(D,Y,G))(q)})}}e.forEach=l;function f(g){const I=tr.empty();return g(I),tr.iso().wrap(I)}e.fromMutation=f,e.empty=()=>tr.iso().wrap(tr.empty());function h(g,I,C){const k=tr.iso();return k.wrap(tr.concat(g,k.unwrap(I),k.unwrap(C)))}e.concat=h;function d(g){const I=tr.iso();return(0,ia.pipe)(I.unwrap(g),Po.map(dn.swap),I.wrap)}e.inverse=d;function _(g,I){return AT(tr.getEq(g,I))}e.getEq=_;function R(g){return Array.from(tr.iso().unwrap(g))}e.toJSON=R;function A(g,I){return tr.getShow(g,I)}e.getShow=A;function E(g){return tr.iso().unwrap(g).size===0}e.isEmpty=E})(kr||(kr={}));var tr;(e=>{e.iso=()=>du(),e.empty=()=>new Map;const t=(a,u,o)=>dn.getEq(a,a).equals(u,o)?mr.some(o):dn.getEq(a,a).equals(u,dn.swap(o))?mr.none:dn.isLeft(u)?dn.fold(()=>mr.some(dn.left(u.left)),l=>mr.some(dn.both(u.left,l)),(l,f)=>a.equals(u.left,f)?mr.none:mr.some(dn.both(u.left,f)))(o):dn.isRight(u)?dn.fold(()=>mr.none,(0,ia.flow)(dn.right,mr.some),(l,f)=>mr.some(dn.right(f)))(o):dn.fold(()=>mr.some(dn.left(u.left)),(0,ia.flow)(dn.right,mr.some),(l,f)=>a.equals(u.left,f)?mr.none:mr.some(dn.both(u.left,f)))(o);function n(a,u,o){const l=new Map(u);return o.forEach((f,h)=>{l.has(h)?(0,ia.pipe)(t(a,l.get(h),f),mr.fold(()=>{l.delete(h)},d=>l.set(h,d))):l.set(h,f)}),l}e.concat=n,e.inverse=Po.map(dn.swap);function r(a,u){return Po.getEq(a,dn.getEq(u,u))}e.getEq=r;function i(a,u){return Po.getShow(a,dn.getShow(u,u))}e.getShow=i})(tr||(tr={}));var RT=tr.iso;function pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){T(e,i,n[i])})}return e}function wT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}function Pt(e,t){return t=t!=null?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wT(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var ei=Me(Fn(),1),ld=Me(it(),1);function TT(e){return new URLSearchParams(e.toString())}var $g=class Mu{constructor(t,n=new URLSearchParams){this.base=t,this.params=n;const r=Mu._toString(t,n).length;bt(r<Mu.MAX_URL_LENGTH,"url exceeded length limit",String(r));const i=t.toLowerCase();bt(i.startsWith("javascript:")===!1&&i.startsWith("data:")===!1,"url is not allowed to use javascript: or data: protocols",t)}addParams(t){const n=Object.entries(t).reduce((r,[i,a])=>(r.append(i,a),r),TT(this.params));return new Mu(this.base,n)}toString(){return Mu._toString(this.base,this.params)}static _toString(t,n){const r=n.toString();return"".concat(t).concat(r.length?"?".concat(r):"")}};$g.MAX_URL_LENGTH=2083;var Yg=$g,OT=["http","https","mailto","tel"];function CT(e){return Og(e)?e:"http://"+e}var Jg=e=>(0,ei.tryCatch)(()=>new URL(e),ei.toError),MT=e=>(0,ld.pipe)(e,Jg,(0,ei.map)(()=>e)),kT=e=>e.length<=Yg.MAX_URL_LENGTH,PT=e=>e.length>0,NT=(0,ld.flow)(Jg,(0,ei.fold)(()=>!1,e=>OT.includes(e.protocol.replace(":","")))),WT=(0,ei.fromPredicate)(kT,()=>new Error("URL is too long")),FT=(0,ei.fromPredicate)(PT,()=>new Error("URL is too short")),UT=(0,ei.fromPredicate)(NT,()=>new Error("Url contains invalid protocol"));(0,ld.flow)(ad,FT,(0,ei.map)(CT),(0,ei.chain)(MT),(0,ei.chain)(UT),(0,ei.chain)(WT));var Zn={};In(Zn,{comprehension:()=>jT,seededShuffle:()=>qT,traversePairs:()=>BT});var DT=Me(ui(),1);Br(Zn,Me(ui(),1));function LT(e){return Math.abs((1.3685032914*e+.7230964518)%1)}var qT=e=>t=>{const n=t.slice(0);let r=n.length,i;for(;r>0;){i=LT(e);const a=Math.floor(i*r--),u=n[a];n[a]=n[r],n[r]=u}return n};function BT(e){return t=>{if(t.length<2)return t;{const n=[];for(let r=0;r<t.length;r++)n.length===0?n.push(t[r]):n.push(...e(n.pop(),t[r]));return n}}}function jT(e,t,n=()=>!0){return DT.comprehension(e,t,n)}var Fe={};In(Fe,{chainLeft:()=>Xg,flatMap:()=>Zg,flatMapLeft:()=>VT,flattenLeft:()=>zT,map2:()=>KT,parseFiniteInt:()=>YT,parseFloat:()=>$T,tryCatchError:()=>HT,unsafeGet:()=>Qg});var GT=Me(Jn(),1),ai=Me(Fn(),1);Br(Fe,Me(Fn(),1));var Si=Me(it(),1),Qg=(0,ai.fold)(e=>{throw e},Si.identity),HT=e=>(0,ai.tryCatch)(e,ai.toError),Xg=e=>(0,ai.fold)(e,ai.right),zT=e=>ai.either.chain(e,Si.identity),VT=e=>t=>(0,Si.pipe)(t,Xg(n=>e)),KT=e=>([t,n])=>(0,ai.map)(([r,i])=>e(r,i))((0,GT.sequenceT)(ai.either)(t,n)),Zg=(0,Si.unsafeCoerce)(ai.chain),$T=e=>(0,Si.pipe)(parseFloat(e),(0,ai.fromPredicate)((0,Si.not)(isNaN),(0,Si.constant)(new Error('Could not parse float (got "'.concat(e,'")'))))),YT=e=>(0,Si.pipe)(parseInt(e,10),(0,ai.fromPredicate)(isFinite,(0,Si.constant)(new Error('Could not parse integer (got "'.concat(e,'")'))))),zn={};In(zn,{eqEmpty:()=>QT,eqToInvariant:()=>JT});Br(zn,Me(jr(),1));function JT(e){return{equals:(t,n)=>(bt(e.equals(t,n),"\nabsurd state accured",()=>"\n".concat(e.show(t),"\ndoes not equal to:\n").concat(e.show(n))),!0)}}var QT={equals:()=>!0},Xr={};In(Xr,{getNewtypeGroup:()=>xT,getStructGroup:()=>ZT,groupSum:()=>XT});var xg=Me(Yi(),1);Br(Xr,Me(nA(),1));var XT={...xg.monoidSum,inverse:e=>-e};function ZT(e){const t=n=>{const r={};for(const i of Object.keys(e))r[i]=e[i].inverse(n[i]);return r};return{...xg.getStructMonoid(e),inverse:t}}var xT=e=>e,ta={};In(ta,{Merger:()=>Tf,URI:()=>rp,diffKeys:()=>IO,getEqByValue:()=>pO,getFoldableWithIndex:()=>gO,leftToRight:()=>yO,rightToLeft:()=>bO,symmetricDiff:()=>_O});var eO=Me(js(),1);Br(ta,Me(js(),1));var Wa=Me(it(),1),m={};In(m,{contains:()=>dO,empty:()=>aO,forAll:()=>cO,fromRemoteData:()=>vO,is:()=>fO,map2:()=>oO,mapOrDefault:()=>uO,orElse:()=>lO,orNull:()=>rO,orUndefined:()=>iO,sequenceT:()=>hO,tap:()=>sO,tapLeft:()=>tp,unsafeGet:()=>nO});var ep=Me(Jn(),1),Vn=Me(kn(),1);Br(m,Me(kn(),1));var ao=Me(it(),1);function tO(e){return e.type==="Success"}var nO=(0,Vn.fold)(()=>{throw new Error("option has empty value")},ao.identity),rO=(0,Vn.getOrElse)(ao.constNull),iO=(0,Vn.getOrElse)(ao.constUndefined),aO=()=>Vn.none;function uO(e,t){return(0,Vn.fold)(()=>t,e)}var oO=e=>(t,n)=>(0,Vn.map)(([r,i])=>e(r,i))((0,ep.sequenceT)(Vn.option)(t,n));function cO(e){return t=>(0,Vn.isNone)(t)||(0,Vn.exists)(e)(t)}function lO(e){return(0,Vn.fold)(()=>e,Vn.some)}function fO(e){return(e==null?void 0:e._tag)==="None"||(e==null?void 0:e._tag)==="Some"}function sO(e){return(0,Vn.map)(t=>(e(t),t))}function tp(e){return(0,Vn.fold)((0,ao.flow)(e,()=>Vn.none),Vn.some)}function dO(e){return(0,ao.flow)((0,Vn.filter)(t=>t===e),Vn.isSome)}var hO=(0,ep.sequenceT)(Vn.option);function vO(e){return tO(e)?(0,Vn.some)(e.value):Vn.none}var $r={};In($r,{swap:()=>np});var mO=Me(Fn(),1),lh=Me(Qc(),1);Br($r,Me(Qc(),1));function np(e){return(0,lh.isBoth)(e)?(0,lh.both)(e.right,e.left):(0,mO.swap)(e)}var Rn=Me(Qc(),1),gn=Me(kn(),1),fh=Me(Fn(),1),rp="Map";function gO(){const e=(t,n,r)=>{let i=n;return t.forEach((a,u)=>i=r(u,i,a)),i};return{URI:rp,_E:void 0,reduce:(t,n,r)=>e(t,n,(i,a,u)=>r(a,u)),foldMap:t=>(n,r)=>e(n,t.empty,(i,a,u)=>t.concat(a,r(u))),reduceRight:(t,n,r)=>e(t,n,(i,a,u)=>r(u,a)),reduceWithIndex:e,reduceRightWithIndex:(t,n,r)=>e(t,n,(i,a,u)=>r(i,u,a)),foldMapWithIndex:t=>(n,r)=>e(n,t.empty,(i,a,u)=>t.concat(a,r(i,u)))}}function pO(e){return{equals:(t,n)=>{if(t===n)return!0;if(t.size===n.size){const r=t.keys();let i;for(;(i=r.next()).done===!1;)if(!n.has(i.value)||!e.equals(t.get(i.value),n.get(i.value)))return!1;return!0}else return!1}}}function _O(e){return(t,n)=>kr.fromMutation(r=>(t.forEach((i,a)=>{if(n.has(a)){const u=n.get(a);e.equals(i,u)||r.set(a,(0,Rn.both)(i,u))}else r.set(a,(0,Rn.left)(i))}),n.forEach((i,a)=>{if(t.has(a)){const u=t.get(a);e.equals(u,i)||r.set(a,(0,Rn.both)(u,i))}else r.set(a,(0,Rn.right)(i))}),r))}var yO=ip(Wa.identity),bO=ip(np),Tf;(e=>{function t(r){return i=>(0,Rn.fold)(a=>(0,gn.isNone)(i)?(0,Rn.left)("can not remove non existent entry: left(".concat(r.show(a),")")):r.equals(i.value,a)?(0,Rn.right)(gn.none):(0,Rn.left)("can not remove non equal entry: target(".concat(r.show(i.value),") left(").concat(r.show(a),")")),a=>(0,gn.isSome)(i)?(0,Rn.left)("can not add existent entry: target(".concat(r.show(i.value),") right(").concat(r.show(a),")")):(0,Rn.right)((0,gn.some)(a)),(a,u)=>r.equals(a,u)?(0,Rn.left)("can not apply update with equals parts: left(".concat(r.show(a),") right(").concat(r.show(u),")")):(0,gn.isNone)(i)?(0,Rn.left)("can not update non existent entry: left(".concat(r.show(a),") right(").concat(r.show(u),")")):r.equals(i.value,a)?(0,Rn.right)((0,gn.some)(u)):(0,Rn.left)("can not apply update on non equal entry: target(".concat(r.show(i.value),") left(").concat(r.show(a),") right(").concat(r.show(u),")")))}e.createStrict=t;function n(r){return i=>(0,Rn.fold)(a=>(0,gn.isNone)(i)?(0,Rn.left)("can not remove non existent entry: left(".concat(r.show(a),")")):r.equals(i.value,a)?(0,Rn.right)(gn.none):(0,Rn.both)("removed non equal entry: target(".concat(r.show(i.value),") left(").concat(r.show(a),")"),gn.none),a=>(0,gn.isSome)(i)?(0,Rn.both)("existent entry was overwritten: target(".concat(r.show(i.value),") right(").concat(r.show(a),")"),(0,gn.some)(a)):(0,Rn.right)((0,gn.some)(a)),(a,u)=>{const o=r.equals(a,u)?(0,gn.some)("unexpected equal parts in provided update"):gn.none;return(0,gn.isNone)(i)?(0,Rn.both)((0,Wa.pipe)(o,(0,gn.map)(l=>l+", "),(0,gn.getOrElse)(()=>""))+"update applied on non existent entry: left(".concat(r.show(a),") right(").concat(r.show(u),")"),(0,gn.some)(u)):r.equals(i.value,a)?(0,Wa.pipe)(o,(0,gn.map)(l=>l+": left(".concat(r.show(a),") right(").concat(r.show(u),")")),(0,gn.fold)(()=>(0,Rn.right)((0,gn.some)(u)),l=>(0,Rn.both)(l,(0,gn.some)(u)))):(0,Rn.both)((0,Wa.pipe)(o,(0,gn.map)(l=>l+", "),(0,gn.getOrElse)(()=>""))+"update applied on non equal entry: target(".concat(r.show(i.value),") left(").concat(r.show(a),") right(").concat(r.show(u),")"),(0,gn.some)(u))})}e.createLoose=n})(Tf||(Tf={}));function ip(e){return(t,n,r)=>{const i=new Map(n),a=new Map;return RT().unwrap(r).forEach((u,o)=>{(0,Wa.pipe)(u,e,t((0,gn.fromNullable)(i.get(o))),(0,Rn.bimap)(l=>a.set(o,l),(0,gn.fold)(()=>{i.delete(o)},l=>i.set(o,l))))}),a.size>0?(0,fh.left)({recovered:i,rejected:a}):(0,fh.right)(i)}}function IO(e){return(t,n)=>{const r=[],i=new Map(t);return n.forEach((a,u)=>{(0,Wa.pipe)(eO.lookupWithKey(e)(u,i),tp(()=>r.push(u)))}),r}}var Pn={};In(Pn,{fromNullableArray:()=>EO,unzip:()=>AO});var Of=Me(ha(),1);Br(Pn,Me(ha(),1));var SO=Me(it(),1),sh=Me(kn(),1);function AO(e){const t=(0,Of.of)(e[0][0]),n=(0,Of.of)(e[0][1]);for(let r=1;r<e.length;r++)t[r]=e[r][0],n[r]=e[r][1];return[t,n]}var EO=(0,SO.flow)(sh.fromNullable,(0,sh.chain)(Of.fromArray)),Di={};In(Di,{betweenExclusive:()=>RO});var dh=Me(Wr(),1);Br(Di,Me(Wr(),1));function RO(e){return(t,n)=>r=>(0,dh.gt)(e)(r,t)&&(0,dh.lt)(e)(r,n)}var Bu={};In(Bu,{composeS:()=>TO,createFrom:()=>wO});var ap=Me(Jn(),1),Cf=Me(Am(),1);Br(Bu,Me(Am(),1));var wO=e=>t=>Cf.reader.map((0,ap.sequenceT)(Cf.reader)(e,t),([n,r])=>id(n,r)),TO=(0,ap.sequenceS)(Cf.reader),pn={};In(pn,{chain:()=>hh.chain,flatMap:()=>kO,flatMapEither:()=>PO,flatMapEither2:()=>NO,flattenLeft:()=>MO,fromEither:()=>hh.fromEither,fromIOEitherEager:()=>UO,handleError:()=>FO,toPromise:()=>CO,tryDelay:()=>WO});var No=Me(Jc(),1),Pr=Me(Ds(),1);Br(pn,Me(Ds(),1));var hh=Me(Ds(),1),_i=Me(it(),1),OO=Me(kn(),1);function CO(e){return e().then(Qg)}var MO=e=>Pr.taskEither.chain(e,_i.identity),kO=(0,_i.unsafeCoerce)(Pr.chain),PO=e=>No.map(Zg(e)),NO=e=>t=>(0,_i.pipe)(t,(0,Pr.chain)(n=>(0,Pr.fromEither)(e(n))));function WO(e,t,n){return(0,_i.pipe)(e,(0,Pr.fold)(r=>{const i=(0,_i.pipe)((0,Pr.left)(r),No.delay(n));return(0,_i.pipe)(t(r),(0,OO.fold)(()=>(0,Pr.left)(r),a=>{const u=(0,_i.pipe)(a,No.chain(()=>(0,Pr.right)(void 0))),o=No.getRaceMonoid().concat(i,u);return(0,_i.pipe)(o,(0,Pr.chain)(()=>e))}))},r=>(0,Pr.right)(r)))}var FO=e=>(0,Pr.orElse)(t=>(0,_i.pipe)(e(t),(0,Pr.chain)(()=>(0,Pr.left)(t)))),UO=e=>()=>Promise.resolve(e()),DO=Me(ui(),1),gr=Me(Fn(),1),LO=Me(iA(),1),oi=Me(it(),1),Fa;(e=>{e.URI="RecoverableOperation",e.fromArray=u=>o=>(0,oi.pipe)(o.map(l=>(0,oi.pipe)(u(l),gr.mapLeft(f=>(0,oi.tuple)(f,l)))),DO.separate,a,(0,e.mapLeft)(l=>l.map(LO.snd))),e.map=u=>o=>(0,oi.pipe)(o,gr.bimap(l=>({rejected:l.rejected,recovered:u(l.recovered)}),u)),e.mapLeft=u=>o=>(0,oi.pipe)(o,gr.mapLeft(l=>({rejected:u(l.rejected),recovered:l.recovered}))),e.flatten=u=>o=>(0,oi.pipe)(o,gr.fold(l=>(0,oi.pipe)(l.recovered,gr.fold(f=>gr.left({rejected:u.concat(l.rejected,f.rejected),recovered:f.recovered}),f=>gr.left({rejected:l.rejected,recovered:f}))),oi.identity)),e.flatMap=(u,o)=>l=>(0,oi.pipe)(l,(0,e.map)(o),(0,e.flatten)(u));function t(u){return gr.fold(o=>(u(o.rejected),o.recovered),oi.identity)}e.recover=t;function n(u){return gr.mapLeft(o=>(u(o),o))}e.tapFailure=n;function r(u){return gr.fold(o=>u(o.recovered),u)}e.foldSuccess=r;function i(u,o){return o===void 0?gr.right(u):gr.left({recovered:u,rejected:o})}e.of=i;function a(u){return u.left.length>0?gr.left({rejected:u.left,recovered:u.right}):gr.right(u.right)}e.fromSeparatedArray=a})(Fa||(Fa={}));var Mf;(e=>{e.invariantContent=t=>typeof Proxy=="function"?new Proxy({},{get:(n,r)=>{if(n[r]==null)throw new Error("Please provide context using ".concat(t,".Context.Provider"));return n[r]}}):void 0})(Mf||(Mf={}));var qO=Me(Fn()),BO=Me(jr()),lr=Me(it()),vh=Me(aA()),Li=Me(Fn()),vo=Me(Yi()),Zr=Me(Wr()),Wo=Me(it()),tn;(function(e){e.monoid=vo.getStructMonoid({start:vo.getMeetMonoid(vh.boundedNumber),end:vo.getJoinMonoid(vh.boundedNumber),meta:vo.getStructMonoid({})});var t=e.create=function(o,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{start:o,end:l,meta:f}};e.empty=t(0,0);var n=e.map=function(o,l){return Pt(pt({},o),{meta:l(o.meta)})};e.extend=function(o,l){return Pt(pt({},o),{meta:l(o)})},e.copy=function(o){return n(o,Wo.identity)},e.compose=function(o){return function(l){return n(l,function(f){return pt({},f,o)})}},e.alterLeft=function(o,l){return(0,Wo.pipe)(o,Li.fromPredicate(function(f){return f.start-l<=o.end},JSON.stringify),Li.map(function(f){var h=n(f,Kt.immutableUpdateC("increasedLeft")(m.mapOrDefault(function(d){return d+l},l)));return h.start-=l,h}))},e.alterRight=function(o,l){return(0,Wo.pipe)(o,Li.fromPredicate(function(f){return f.start<=o.end+l},JSON.stringify),Li.map(function(f){var h=n(f,Kt.immutableUpdateC("increasedRight")(m.mapOrDefault(function(d){return d+l},l)));return h.end+=l,h}))};var r=e.size=function(o){return o.end-o.start};e.isEmpty=function(o){return r(o)===0},e.isValid=function(o){return function(l){return l.start>=0&&l.start<=l.end&&l.end<=o}};var i=e.isOverlap=function(o,l){return o.start<=l.end&&l.start<=o.end};e.contains=function(o,l){return o.start>=l.start&&o.end<=l.end},e.distanceFrom=function(o,l){return i(o,l)?0:o.start<l.start?l.start-o.end:o.start-l.end},e.join=function(o,l){return t(Math.min(o.start,l.start),Math.max(o.end,l.end))},e.intersection=function(o,l){return i(o,l)?m.some(t(Math.max(o.start,l.start),Math.min(o.end,l.end))):m.none};var a=e.ordStart=(0,Zr.contramap)(function(o){return o.start})(Zr.ordNumber),u=e.ordEnd=(0,Zr.contramap)(function(o){return o.end})(Zr.ordNumber);e.ord=(0,Zr.getSemigroup)().concat(u,a)})(tn||(tn={}));var Fo;(function(e){e.is=function(t){var n=t.meta;return typeof n.increasedLeft=="number"||typeof n.increasedRight=="number"},e.restore=function(t){return Fo.is(t)?(0,Wo.pipe)(t,function(n){return n.meta.increasedLeft?tn.alterLeft(n,-n.meta.increasedLeft):Li.right(n)},Li.chain(function(n){return n.meta.increasedRight?tn.alterRight(n,-n.meta.increasedRight):Li.right(n)})):Li.right(t)}})(Fo||(Fo={}));var mh;(function(e){e.is=function(t){return tn.isEmpty(t)}})(mh||(mh={}));var kf;(function(e){e.create=function(n){return tn.compose({value:n})};var t=e.ordWord=(0,Zr.contramap)(function(n){return n.meta.value})(Zr.ordString);e.ord=(0,Zr.getSemigroup)().concat(t,tn.ord)})(kf||(kf={}));var gh;(function(e){e.create=function(n){return tn.compose({clicks:n})};var t=e.ordClicks=(0,Zr.contramap)(function(n){return n.meta.clicks})(Zr.ordNumber);e.ord=(0,Zr.getSemigroup)().concat(t,kf.ord)})(gh||(gh={}));var ph=Me(Jc(),1),jO=Me(Rm(),1),$o;(e=>{function t(a){return Bu.local(u=>({...u,requestExtender:u.requestExtender?xr.Extender.compose(a,u.requestExtender):a}))}e.extend=t;class n extends Ti{constructor(u,o){super(u),this.message=u,this.details=o,this.name="ParseError"}toString(){return"Ajax response parsing error\n        Message ".concat(this.message,"\n        Details ").concat(jO.failure(this.details).join("\n"))}}e.ParseError=n,(a=>{a.json="application/json",a.form="application/x-www-form-urlencoded",a.multipart="multipart/form-data",a.pdf="application/pdf",a.txt="text/plain",a.stream="application/octet-stream",a.vnd="application/vnd",a.zip="application/zip",a.any="*/*"})(e.MimeType||(e.MimeType={}));function r(a,u,o){return o.removeBody(),e.mapToHTTPError(a,u,o)}e.mapToHTTPErrorWithoutBody=r;function i(a,u,o){return new GO({request:o,code:u.status,status:u.statusText,url:u.url,body:a})}e.mapToHTTPError=i})($o||($o={}));var GO=class extends Ti{constructor({code:e,status:t,url:n,message:r,body:i,request:a}){super(r||(t||i?t||i:"HTTPError")),this.name="HTTPError",this.url=n,this.code=e,this.body=i,this.status=t,this.request=a}toString(){return"Response\n      Message: ".concat(this.message,"\n      Status: ").concat(this.status,"\n      Code: ").concat(this.code,"\n      Body: ").concat(this.body,"\n      ").concat(this.request!==void 0?"\n"+this.request.toString():"Url: ".concat(this.url))}},Pf=class{constructor(e,t,n,r,i,a){this._url=e,this._method=t,this._headers=n,this._mime=r,this._body=i,this._keepalive=a}static get(...e){return xr.get(...e).build()}static post(...e){return xr.post(...e).build()}static put(...e){return xr.put(...e).build()}static del(...e){return xr.del(...e).build()}static head(...e){return xr.head(...e).build()}get url(){return this._url}get method(){return this._method}get headers(){return this._headers}get mime(){return this._mime}get keepalive(){var e;return(e=this._keepalive)!=null?e:!1}get body(){return m.fromNullable(this._body)}toString(){return"Request\n    Method: ".concat(this.method.toUpperCase(),"\n    Url: ").concat(this.url,"\n    Mime: ").concat(this.mime,"\n    Headers: ").concat(JSON.stringify(this.headers,void 0,2),"\n    Body:").concat(m.mapOrDefault(e=>HO(JSON.stringify(e instanceof URLSearchParams?zO(e):e,void 0,2),200),"empty")(this.body),"\n    ")}removeBody(){this._body=void 0}};(e=>{(t=>{t.GET="GET",t.POST="POST",t.PATCH="PATCH",t.PUT="PUT",t.OPTIONS="OPTIONS",t.HEAD="HEAD",t.TRACE="TRACE",t.DELETE="DELETE",t.CONNECT="CONNECT"})(e.Method||(e.Method={}))})(Pf||(Pf={}));function HO(e,t){return e.length<=t?e:e.slice(0,t)+"...."}var xr=class _r{constructor(t="",n=new URLSearchParams,r=[],i={},a,u,o,l=!1,f=!1){this._url=t,this._queryParams=n,this._cookies=r,this._headers=i,this._method=a,this._mime=u,this._body=o,this._preserveUrl=l,this._keepalive=f}static join(...t){const n=[].slice.call(t.filter(r=>r.length>0),0).join("/");return _r._normalize(n)}static _normalize(t){return t=t.replace(/:\//g,"://"),t=t.replace(/([^:\s])\/+/g,"$1/"),t=t.replace(/\/(\?|#)/g,"$1"),t}static get(...t){return _r.url(...t).method("GET")}static post(...t){return _r.url(...t).method("POST")}static put(...t){return _r.url(...t).method("PUT")}static patch(...t){return _r.url(...t).method("PATCH")}static del(...t){return _r.url(...t).method("DELETE")}static head(...t){return _r.url(...t).method("HEAD")}static url(...t){return new _r(_r.join(...t))}url(...t){if(this._url!=="")throw new Error("URL already set to "+this._url+", use join(string) to add additional parts to it");return this.join(_r.join(...t))}static create(){return new _r}method(t){if(this._method&&this._method!==t)throw new Error("Method already set to "+this._method+", but was overwritten by "+t);return this._method=t,this}join(t){return this._url=_r.join(this._url,t),this}pathParam(t){return this._url=_r.join(this._url,encodeURIComponent(t)),this}body(t){if(this._body)throw new Error("Body already set to "+this._body+", but was overwritten by "+t);return this._body=t,this}formParam(t,n){return(this._body=this._body instanceof URLSearchParams?this._body:new URLSearchParams).append(t,n),this}multipartFormData(t,n,r){const i=this._body instanceof FormData?this._body:new FormData;return r?i.append(t,n,r):i.append(t,n),this._body=i,this}header(t,n){return this._headers[t]=n,this}queryParam(t,n){return this._queryParams.append(t,n),this}queryParams(t){return Object.entries(t).forEach(([n,r])=>this._queryParams.append(n,r)),this}cookie(t,n){return this._cookies.push(t+"="+n),this}mime(t){if(this._mime&&this._mime!==t)throw new Error("MIME already set to "+this._mime+", but was overwritten by "+t);return this._mime=t,this}keepalive(){return this._keepalive=!0,this}json(t){return t?this.body(t).mime("application/json"):this.mime("application/json")}preserveUrl(){return this._preserveUrl=!0,this}build(){var t;if(!this._url||this._url.length===0)throw new Error("URL cannot be empty");if(this._preserveUrl||(this._url=this._url.replace(/\/$/,"")),"".concat(this._queryParams).length>0&&(this._url+="?"+this._queryParams),this._body instanceof URLSearchParams){if(this._mime&&this._mime!=="application/x-www-form-urlencoded")throw new Error("Only application/x-www-form-urlencoded can be used for form requests, don't specify it mandatory in mime() method");this._mime="application/x-www-form-urlencoded"}else if(this._body instanceof FormData&&this._mime&&this._mime!=="multipart/form-data")throw new Error("Only multipart/form-data can be used for multipart form data requests, don't specify it mandatory in mime() method");if(this._mime==="application/json"&&this._body&&(this._body=JSON.stringify(this._body)),!this._method)throw new Error("HTTP method was not set");if(this._method==="GET"&&this._body)throw new Error("Body is not supported for GET");if(this._mime&&(this._headers["Content-Type"]=this._mime),this._cookies.length>0){const n="Cookie";this._headers[n]=this._cookies.join("; ")}return new Pf(this._url,this._method,this._headers,this._mime||null,this._body,(t=this._keepalive)!=null?t:!1)}};(e=>{(t=>{t.identity=n=>ph.task.of(n),t.compose=(...n)=>r=>n.reduce(ph.task.chain,(0,t.identity)(r))})(e.Extender||(e.Extender={}))})(xr||(xr={}));function zO(e){const t={};return e.forEach((n,r)=>t[r]=n),t}var Nf;(e=>{function t(n){return VO({"X-Client-Version":n.clientVersion.toString(),"X-Client-Type":()=>n.clientName,"X-Container-Id":n.containerId,"X-CSRF-Token":n.csrfToken,...n.accessToken!==void 0&&{Authorization:["Bearer",n.accessToken]}})}e.toHeaderAppender=t})(Nf||(Nf={}));function VO(e){async function t(n){if(Array.isArray(n)){const[r,i]=n,a=await(typeof i=="function"?i():i);return a?[r,a].join(" "):void 0}return await(typeof n=="function"?n():n)}return n=>async()=>{for(const r in e){const i=await t(e[r]);i!==void 0&&n.header(r,i)}return n}}var Wf;(e=>{class t{}e.Base=t})(Wf||(Wf={}));var rn={};In(rn,{combineProperties:()=>hC,createNonStrictStringUnion:()=>mC,createStringEnum:()=>vC,date:()=>iC,emptyValue:()=>dd,fallback:()=>oC,fromProperties:()=>_C,getIsNEA:()=>fp,getIsOption:()=>sd,literalArray:()=>tC,literalUnion:()=>nC,literalUnionWithReplace:()=>rC,nonEmptyArray:()=>eC,opaque:()=>xO,option:()=>XO,optionStrict:()=>ZO,properties:()=>dC,property:()=>dp,set:()=>QO,stringFromNumber:()=>aC,withDefault:()=>uC});var ca=Me(it()),_h=Me(Sm()),kt=Me(eo()),KO=Me(Ls());function fd(e){return e==="null"||e==="undefined"||e===null||e===void 0}function $O(e){return typeof e=="object"}function up(e){if(e===null||e==="null"||typeof e=="boolean")return null;const t=Number(e);return Number.isNaN(t)?null:t}function op(e){return fd(e)?null:e==="true"?!0:e==="false"||e==="0"?!1:!!e}function YO(e,t){return fd(e)?t:e==="true"?!0:e==="false"||e==="0"?!1:!!e}function ju(e){try{return JSON.parse(decodeURIComponent(String(e)))}catch{return null}}function cp(e){try{return new Set(ju(e))}catch{return null}}function lp(e){try{return Object.entries(ju(e)).reduce((t,[n,r])=>(t.set(n,r),t),new Map)}catch{return null}}var yh=class{constructor(e){this._value=e}getStr(){return fd(this._value)?null:String(this._value)}getNum(){return up(this._value)}getBool(){return op(this._value)}getBoolOrDefault(e){return YO(this._value,e)}getObject(){return ju(this._value)}getArray(){return ju(this._value)}getSet(){return cp(this._value)}getMap(){return lp(this._value)}getObjProp(e){return $O(this._value)&&e in this._value?this._value[e]:null}},JO=e=>typeof e=="object"?(0,KO.pipe)(JSON.stringify(e,(t,n)=>n instanceof Set?Array.from(n):n instanceof Map?Object.fromEntries(n.entries()):n),encodeURI):e,ku=class Ff{getStr(t){return t in this?String(this[t]):null}getNum(t){return t in this?up(this[t]):null}getBool(t){return t in this?op(this[t]):null}getObject(t){return t in this?ju(this[t]):null}getSet(t){return t in this?cp(this[t]):null}getMap(t){return t in this?lp(this[t]):null}has(t){return t in this}ifPresent(t,n){this[t]&&n(this[t])}entries(){return Object.keys(this).map(t=>[t,new yh(this[t])])}static find(t,...n){const r=n.find(i=>i.has(t));return new yh(r&&r[t])}static of(...t){const n=new Ff;for(const r of t)for(const i in r){const a=r[i];n[i]=JO(a)}return n}static is(t){return t instanceof Ff}},bh=1024,Ih=["{","}",";","="];function QO(e){return new kt.Type("Set<".concat(e.name,">"),t=>t instanceof Set,(t,n)=>Fe.either.map(kt.array(e).validate(t!=null?Array.from(t):t,n),r=>new Set(r)),t=>Array.from(t))}function sd(e){return t=>m.is(t)&&(0,ca.pipe)(t,m.fold(()=>!0,e.is))}function XO(e){return new kt.Type("option:".concat(e.name),sd(e),(t,n)=>t==null?Fe.right(m.none):Fe.either.map(e.validate(t,n),m.some),m.fold(()=>{},hu(e)))}function ZO(e){return new kt.Type("option:".concat(e.name),sd(e),(t,n)=>dd(t)?Fe.right(m.none):Fe.either.map(e.validate(t,n),m.some),m.fold(()=>{},hu(e)))}var xO=e=>new kt.Type("Opaque",t=>typeof t=="string",(t,n)=>Fe.either.chain(e.validate(t,n),r=>kt.success(r)),t=>t);function fp(e){return t=>Array.isArray(t)&&t.length>0&&t.every(e.is)}var eC=e=>new kt.Type("NEA",fp(e),(t,n)=>Fe.either.chain(kt.array(e).validate(t,n),r=>r.length>0?kt.success(r):kt.failure(r,n,"Array is empty")),t=>m.unsafeGet(Pn.fromArray(t)));function tC(e){return e}function nC(e,t){return kt.union(t.map(n=>kt.literal(n)),"".concat(e,":string"))}function rC(e,t,n){const r=kt.union(t.map(a=>kt.literal(a)),"".concat(e,":string")),i=kt.union([...t,...Object.keys(n)].map(a=>kt.literal(a)),"".concat(e,":string"));return new kt.Type("".concat(e,":string"),i.is,(a,u)=>(0,ca.pipe)(kt.string.validate(a,u),Fe.chain(o=>i.validate(o,u)),Fe.map(o=>{var l;return(l=n[o])!=null?l:o}),Fe.chain(o=>r.validate(o,u))),a=>{var u;return(u=n[a])!=null?u:a})}function iC(){return new kt.Type("Date",e=>e instanceof Date,(e,t)=>{const n=Date.parse(e==null?void 0:e.toString()),r=isNaN(n)?e:n;return Fe.either.map(kt.number.validate(r,t),i=>new Date(i))},e=>e.getTime())}var Sh=e=>kt.string.is(e)&&!Number.isNaN(Number(e)),aC=new kt.Type("stringFromNumber",Sh,(e,t)=>Sh(e)?kt.success(e):typeof e=="number"&&!Number.isNaN(e)?kt.success(e.toString()):kt.failure(e,t),e=>Number(e));function dd(e){return e==="null"||e==="undefined"||e===null||e===void 0}function uC(e,t){return new kt.Type("withDefault(".concat(JSON.stringify(t),"):").concat(e.name),e.is,(n,r)=>e.validate(dd(n)?t:n,r),hu(e))}function oC(e,t){return new kt.Type("fallback(".concat(JSON.stringify(t),"):").concat(e.name),e.is,(n,r)=>{const i=e.validate(n,r);return Fe.isLeft(i)?Fe.right(t):i},hu(e))}var cC=e=>"{ ".concat(Object.keys(e).map(t=>"".concat(t,": ").concat(e[t].name)).join(", ")," }"),sp=(e,t)=>{Array.prototype.push.apply(e,t)},lC=["boolean","string","Date","number","Array","Set","object","Dictionary","StringEnum","Partial"],fC=e=>{const t=e.replace(/\w+\(.*?\):/,"");if(t[0]==="{"&&t[t.length-1]==="}")return"object";const n=t.split(":").pop();return n.indexOf("Date")===0?"Date":n.indexOf("Array<")===0?"Array":n.indexOf("Set<")===0?"Set":n.indexOf("StringEnum<")===0?"StringEnum":t.indexOf("Partial<")===0?"Partial":t.indexOf("UpstreamOnboarding")===0?"object":(bt(lC.indexOf(n)>-1,"unsupported prop type ".concat(e)),n)},sC=(e,t)=>{const n=fC(e);switch(n){case"boolean":return t.getBool();case"string":case"StringEnum":return t.getStr();case"Date":return t.getNum()===null?t.getStr():t.getNum();case"number":return t.getNum();case"Array":return t.getArray();case"Set":return t.getSet();case"object":case"Partial":case"Dictionary":return t.getObject();default:return hn(n)}},dC=(e,t="",n=cC(e))=>new kt.InterfaceType(n,r=>{if(!ku.is(r))return!1;for(const i in e)if(!e[i].is(r[i]))return!1;return!0},(r,i)=>{if(!Array.isArray(r)||r.some(o=>!ku.is(o)))return kt.failure(r,i);const a={},u=[];for(const o in e){const l=t!==""?"".concat(t,":").concat(o):o,f=ku.find(l,...r),h=e[o],d=sC(h.name,f),_=h.validate(d,kt.appendContext(i,o,h));(0,ca.pipe)(_,Fe.fold(R=>sp(u,R),R=>{a[o]=R}))}return u.length?kt.failures(u):kt.success(a)},r=>{const i={};for(const a in e){const u=t!==""?"".concat(t,":").concat(a):a,o=e[a],l=r[a];if(o.is(l)){const f=hu(o)(l);f!=null&&(i[u]=f)}}return ku.of(i)},e);function hC(e,t="(".concat(e.map(n=>n.name).join(" & "),")")){const n=e.length;return new kt.IntersectionType(t,r=>e.every(i=>i.is(r)),(r,i)=>{const a={},u=[];for(let o=0;o<n;o++){const f=e[o].validate(r,i);(0,ca.pipe)(f,Fe.fold(h=>sp(u,h),h=>Object.assign(a,h)))}return u.length?kt.failures(u):kt.success(a)},r=>ku.of(...e.map(i=>hu(i)(r))),e)}function vC(e,t){return kt.keyof(Object.values(e).reduce((n,r)=>(n[r]=null,n),{}),"StringEnum<".concat(t,">"))}function mC(e){return new kt.Type(e,t=>typeof t=="string",(t,n)=>typeof t=="string"?kt.success(t):kt.failure(t,n,"Unexpected type: ".concat(t)),kt.identity)}var hu=e=>t=>(0,ca.pipe)(Fe.tryCatchError(()=>e.encode(t)),Fe.fold(n=>{console.warn(n)},ca.identity)),gC=e=>!0,pC=(e,t)=>{const n=t[1].key,r=String(e);return r.length>bh?kt.failure(e,t,"Property ".concat(n," is too long (max length is ").concat(bh,")")):Ih.some(i=>r.indexOf(i)>=0)?kt.failure(e,t,"Property ".concat(n," has forbidden characters (").concat(Ih.join(", "),")")):kt.success(e)},dp=new kt.Type("property",gC,pC,kt.identity);function _C(e){return kt.type((0,ca.pipe)(e,_h.filter(t=>typeof t!="function"),_h.map(()=>dp)))}rn.literalArray;function Yo(e,t){return Yo=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Yo(e,t)}function cl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}function Jo(e){return Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Jo(e)}function hp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vp(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function yC(e,t){return t&&(vp(t)==="object"||typeof t=="function")?t:uo(e)}function ll(e){var t=hp();return function(){var r=Jo(e),i;if(t){var a=Jo(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return yC(this,i)}}function mp(e){if(Array.isArray(e))return e}Tm();function gp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Hs();function pp(e){return mp(e)||wm(e)||Gs(e)||gp()}var Qo;(function(e){e.is=r=>typeof r.meta.alertId=="string",e.create=r=>tn.compose({alertId:r});const t="|";e.getRangeId=(r,i,a)=>"".concat(r).concat(t).concat(i.btype,"%").concat(a);function n(r){const i=r.indexOf(t);return i<0?r:r.substring(0,i)}e.fromRangeIdToAlertId=n})(Qo||(Qo={}));var Vt;(function(e){let t;(function(a){(function(u){u.REPLACE="r",u.HIGHLIGHT="h",u.HIGHLIGHT_UPDATABLE="hu",u.APPLIED="a",u.CONTEXT="ctx"})(a.Behavior||(a.Behavior={})),function(u){u.MAIN="m",u.FOCUS="f",u.ENCLOSING="e",u.MAIN_START="ms"}(a.View||(a.View={}))})(t=e.Meta||(e.Meta={}));var n=e.isAbstract=a=>{const u=a.meta.btype;return u===t.Behavior.REPLACE||u===t.Behavior.CONTEXT};e.isApplied=a=>a.meta.btype===t.Behavior.APPLIED,e.isVisible=a=>{const u=a;return typeof u.meta.btype=="string"&&!n(u)&&typeof u.meta.vtype=="string"},e.create=(a,u)=>tn.compose({btype:a,vtype:u});function r(a){return u=>u.meta.btype===a}e.hasBehavior=r;const i=a=>u=>Vt.isVisible(u)&&u.meta.vtype===a;e.isMainView=i(t.View.MAIN),e.isFocusView=i(t.View.FOCUS),e.isEnclosingView=i(t.View.ENCLOSING),e.isMainStartView=i(t.View.MAIN_START)})(Vt||(Vt={}));var Xo;(function(e){var t=e.empty={cost:0,critical:0,advanced:0,free:0,freePremium:0,paid:0,unread:0,textLength:0,muted:0,priority:0};function n(r){return r.muted===0?r:Pt(pt({},t),{muted:r.muted})}e.toUnmutedOnly=n})(Xo||(Xo={}));var Zo=Me(Jn()),xo=Me(ui()),bC=Me(Em()),br=Me(sA()),aa=Me(Wr()),_p=Me(Xc()),Ah=Me(Jc()),$e=Me(it()),mo=Me(eo()),Eh=Me(jr(),1),jl=Me(it(),1),Rh=Me(Ls(),1),Gl=Me(eo(),1),IC=Me(Rm(),1),wh=m.getEq({equals:(e,t)=>e===t}),Th=zn.fromEquals(DR),Ua;(e=>{let t;(g=>{g.eq=zn.getStructEq({type:zn.eqString,citation:zn.eqString}),g.defaultAcademic={citation:"apa",type:"essay"},g.withCitationStyle=I=>C=>({...C,domain:m.some("academic"),outcomeContext:m.some({...g.defaultAcademic,citation:I})})})(t=e.OutcomeContext||(e.OutcomeContext={})),e.eq=zn.getStructEq({domain:m.getEq(Eh.eqStrict),goals:m.getEq(Th),audience:wh,style:wh,outcomeContext:m.getEq(t.eq)}),(g=>{g.eq=zn.getStructEq({domain:Eh.eqStrict,goals:Th,audience:zn.eqString,style:zn.eqString})})(e.Default||(e.Default={})),e.goals=rn.literalArray(["inform","describe","convince","tell_a_story","sell"]),e.goalsLabels=["Inform","Describe","Convince","Tell A Story"],e.audiences=rn.literalArray(["general","knowledgeable","expert"]),e.formalityLevels=rn.literalArray(["informal","neutral","formal"]),e.tone=rn.literalArray(["neutral","confident","joyful","optimistic","friendly","urgent","analytical","respectful"]),e.domains=rn.literalArray(["academic","business","general","mail","casual","creative"]),e.dialects=rn.literalArray(["american","british","canadian","australian","indian"]),e.writingIntents=rn.literalArray(["DEFAULT","ASSIGNMENT_WRITING"]),e.academicTypes=rn.literalArray(["essay","report","other"]),e.citation=rn.literalArray(["apa","mla","chicago","other"]);function n(g){return{...e.unset,domain:m.some(g)}}e.fromDomain=n;function r(g){return{...e.unset,goals:m.some(new Set(g))}}e.fromGoals=r,e.unset={goals:m.none,domain:m.none,audience:m.none,style:m.none,dialect:m.none,outcomeContext:m.none,writingIntent:m.none},e.defaultContextFallback={goals:new Set,domain:"general",audience:"knowledgeable",style:"neutral",dialect:m.none,writingIntent:m.none};function i(g,I){return I==="neutral"||(I==="formal"?g!=="creative"&&g!=="casual":g!=="academic")}e.isStyleValidWithDomain=i;const a=rn.literalUnionWithReplace("goal",e.goals,{tellStory:"tell_a_story"}),u=rn.set(a),o=rn.literalUnion("audience",e.audiences),l=rn.literalUnion("formality",e.formalityLevels);rn.literalUnion("tone",e.tone);const f=rn.literalUnion("domain",e.domains),h=rn.literalUnion("dialect",e.dialects),d=rn.literalUnion("writingIntent",e.writingIntents),_=rn.literalUnion("academicType",e.academicTypes);e.citationType=rn.literalUnion("citation",e.citation);const R=Gl.interface({type:_,citation:e.citationType});e.IOType=Gl.interface({goals:rn.option(u),domain:rn.option(f),audience:rn.option(o),style:rn.option(l),dialect:rn.optionStrict(h),writingIntent:rn.option(d),outcomeContext:rn.option(R)}),e.IOTypeDefault=Gl.interface({goals:u,domain:f,audience:o,style:l,dialect:rn.option(h),writingIntent:rn.option(d)}),e.tryParse=g=>I=>(0,Rh.pipe)(g(I),Fe.mapLeft(IC.failure),Fe.mapLeft(C=>(Nn.Logging.getLogger("coreclients.dox.context").warn("failed to parse document context",C),C))),e.parse=(0,jl.flow)(m.fromNullable,m.chain(g=>(0,Rh.pipe)(g,(0,e.tryParse)(e.IOType.decode),m.fromEither))),e.parseDefault=(0,jl.flow)(m.fromNullable,m.chain((0,jl.flow)((0,e.tryParse)(g=>e.IOTypeDefault.decode(g)),m.fromEither)));function A(g){return e.IOType.encode(g)}e.serialize=A;function E(g){return e.IOTypeDefault.encode(g)}e.serializeDefault=E})(Ua||(Ua={}));var SC=Me(it()),go=Me(uA()),ua;(function(e){var t=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;typeof u!="object"&&(u={}),typeof o!="object"&&(o={});var f=Kt.structuredClone(o);l||(f=Object.keys(f).reduce(function(d,_){return f[_]!=null&&(d[_]=f[_]),d},{}));for(var h in u)u[h]!==void 0&&o[h]===void 0&&(f[h]=u[h]);return Object.keys(f).length>0?f:void 0},n=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof u!="object"&&(u={}),typeof o!="object"&&(o={});var l=Object.keys(u).concat(Object.keys(o)).reduce(function(f,h){return Kt.isEqual(u[h],o[h])||(f[h]=o[h]===void 0?null:o[h]),f},{});return Object.keys(l).length>0?l:void 0},r=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};u=u!=null?u:{};var l=Object.keys(o).reduce(function(f,h){return o[h]!==u[h]&&u[h]!==void 0&&(f[h]=o[h]),f},{});return Object.keys(u).reduce(function(f,h){return u[h]!==o[h]&&o[h]===void 0&&(f[h]=null),f},l)},i=function(u,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof u!="object")return o;if(typeof o=="object"){if(!l)return o;var f=Object.keys(o).reduce(function(h,d){return u[d]===void 0&&(h[d]=o[d]),h},{});return Object.keys(f).length>0?f:void 0}};e.compose=t,e.diff=n,e.invert=r,e.transform=i})(ua||(ua={}));var AC=function(){function e(t){Zt(this,e),T(this,"ops",void 0),T(this,"index",void 0),T(this,"offset",void 0),this.ops=t,this.index=0,this.offset=0}return mn(e,[{key:"hasNext",value:function(){return this.peekLength()<1/0}},{key:"next",value:function(n){n||(n=1/0);var r=this.ops[this.index];if(r==null)return{retain:1/0};var i=this.offset,a=Uf(r);if(n>=a-i?(n=a-i,this.index+=1,this.offset=0):this.offset+=n,typeof r.delete=="number")return{delete:n};var u={};return r.attributes&&(u.attributes=r.attributes),typeof r.retain=="number"?u.retain=n:typeof r.insert=="string"?u.insert=r.insert.substr(i,n):u.insert=r.insert,u}},{key:"peek",value:function(){return this.ops[this.index]}},{key:"peekLength",value:function(){return this.ops[this.index]!=null?Uf(this.ops[this.index])-this.offset:1/0}},{key:"peekType",value:function(){return this.ops[this.index]==null?"retain":typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert"}},{key:"rest",value:function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var n=this.offset,r=this.index,i=this.next(),a=this.ops.slice(this.index);return this.offset=n,this.index=r,[i].concat(a)}else return[]}}]),e}();function Uf(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.insert=="string"?e.insert.length:1}var Df;(function(e){var t=function(r){return new AC(r)};e.iterator=t,e.length=Uf})(Df||(Df={}));var er=Df,EC="\0",hd=function(){function e(t){Zt(this,e),T(this,"ops",void 0),Array.isArray(t)?this.ops=t:t!=null&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}return mn(e,[{key:"insert",value:function(n,r){var i={};return typeof n=="string"&&n.length===0?this:(i.insert=n,r!=null&&typeof r=="object"&&Object.keys(r).length>0&&(i.attributes=r),this.push(i))}},{key:"delete",value:function(n){return n<=0?this:this.push({delete:n})}},{key:"retain",value:function(n,r){if(n<=0)return this;var i={retain:n};return r!=null&&typeof r=="object"&&Object.keys(r).length>0&&(i.attributes=r),this.push(i)}},{key:"push",value:function(n){var r=this.ops.length,i=this.ops[r-1];if(n=Kt.structuredClone(n),typeof i=="object"){if(typeof n.delete=="number"&&typeof i.delete=="number")return this.ops[r-1]={delete:i.delete+n.delete},this;if(typeof i.delete=="number"&&n.insert!=null&&(r-=1,i=this.ops[r-1],typeof i!="object"))return this.ops.unshift(n),this;if(Kt.isEqual(n.attributes,i.attributes)){if(typeof n.insert=="string"&&typeof i.insert=="string")return this.ops[r-1]={insert:i.insert+n.insert},typeof n.attributes=="object"&&(this.ops[r-1].attributes=n.attributes),this;if(typeof n.retain=="number"&&typeof i.retain=="number")return this.ops[r-1]={retain:i.retain+n.retain},typeof n.attributes=="object"&&(this.ops[r-1].attributes=n.attributes),this}}return r===this.ops.length?this.ops.push(n):this.ops.splice(r,0,n),this}},{key:"chop",value:function(){var n,r=this.ops[this.ops.length-1];return((n=r)===null||n===void 0?void 0:n.retain)!=null&&r.attributes==null&&this.ops.pop(),this}},{key:"filter",value:function(n){return this.ops.filter(n)}},{key:"forEach",value:function(n){this.ops.forEach(n)}},{key:"map",value:function(n){return this.ops.map(n)}},{key:"partition",value:function(n){var r=[],i=[];return this.forEach(function(a){var u=n(a)?r:i;u.push(a)}),[r,i]}},{key:"reduce",value:function(n,r){return this.ops.reduce(n,r)}},{key:"changeLength",value:function(){return this.reduce(function(n,r){return r.insert!=null?n+er.length(r):r.delete!=null?n-r.delete:n},0)}},{key:"length",value:function(){return this.reduce(function(n,r){return n+er.length(r)},0)}},{key:"slice",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,i=[],a=er.iterator(this.ops),u=0;u<r&&a.hasNext();){var o=void 0;u<n?o=a.next(n-u):(o=a.next(r-u),i.push(o)),u+=er.length(o)}return new e(i)}},{key:"compose",value:function(n){var r=er.iterator(this.ops),i=er.iterator(n.ops),a=[],u=i.peek();if(u!=null&&typeof u.retain=="number"&&u.attributes==null){for(var o=u.retain;r.peekType()==="insert"&&r.peekLength()<=o;)o-=r.peekLength(),a.push(r.next());u.retain-o>0&&i.next(u.retain-o)}for(var l=new e(a);r.hasNext()||i.hasNext();)if(i.peekType()==="insert")l.push(i.next());else if(r.peekType()==="delete")l.push(r.next());else{var f=Math.min(r.peekLength(),i.peekLength()),h=r.next(f),d=i.next(f);if(typeof d.retain=="number"){var _={};typeof h.retain=="number"?_.retain=f:_.insert=h.insert;var R=ua.compose(h.attributes,d.attributes,typeof h.retain=="number");if(R&&(_.attributes=R),l.push(_),!i.hasNext()&&Kt.isEqual(l.ops[l.ops.length-1],_)){var A=new e(r.rest());return l.concat(A).chop()}}else typeof d.delete=="number"&&typeof h.retain=="number"&&l.push(d)}return l.chop()}},{key:"concat",value:function(n){var r=new e(this.ops.slice());return n.ops.length>0&&(r.push(n.ops[0]),r.ops=r.ops.concat(n.ops.slice(1))),r}},{key:"diff",value:function(n,r){if(this.ops===n.ops)return new e;var i=[this,n].map(function(f){return f.map(function(h){if(h.insert!=null)return typeof h.insert=="string"?h.insert:EC;var d=f===n?"on":"with";throw new Error("diff() called "+d+" non-document")}).join("")}),a=new e,u=(0,go.default)(i[0],i[1],r),o=er.iterator(this.ops),l=er.iterator(n.ops);return u.forEach(function(f){for(var h=f[1].length;h>0;){var d=0;switch(f[0]){case go.default.INSERT:d=Math.min(l.peekLength(),h),a.push(l.next(d));break;case go.default.DELETE:d=Math.min(h,o.peekLength()),o.next(d),a.delete(d);break;case go.default.EQUAL:d=Math.min(o.peekLength(),l.peekLength(),h);var _=o.next(d),R=l.next(d);Kt.isEqual(_.insert,R.insert)?a.retain(d,ua.diff(_.attributes,R.attributes)):a.push(R).delete(d);break}h-=d}}),a.chop()}},{key:"eachLine",value:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"\n",i=er.iterator(this.ops),a=new e,u=0;i.hasNext();){if(i.peekType()!=="insert")return;var o=i.peek(),l=er.length(o)-i.peekLength(),f=typeof o.insert=="string"?o.insert.indexOf(r,l)-l:-1;if(f<0)a.push(i.next());else if(f>0)a.push(i.next(f));else{if(n(a,i.next(1).attributes||{},u)===!1)return;u+=1,a=new e}}a.length()>0&&n(a,{},u)}},{key:"invert",value:function(n){var r=new e;return this.reduce(function(i,a){if(a.insert)r.delete(er.length(a));else{if(a.retain&&a.attributes==null)return r.retain(a.retain),i+a.retain;if(a.delete||a.retain&&a.attributes!=null){var u=a.delete||a.retain,o=n.slice(i,i+u);return o.forEach(function(l){a.delete?r.push(l):a.retain&&a.attributes!=null&&r.retain(er.length(l),ua.invert(a.attributes,l.attributes))}),i+u}}return i},0),r.chop()}},{key:"transform",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r=!!r,typeof n=="number")return this.transformPosition(n,r);for(var i=n,a=er.iterator(this.ops),u=er.iterator(i.ops),o=new e;a.hasNext()||u.hasNext();)if(a.peekType()==="insert"&&(r||u.peekType()!=="insert"))o.retain(er.length(a.next()));else if(u.peekType()==="insert")o.push(u.next());else{var l=Math.min(a.peekLength(),u.peekLength()),f=a.next(l),h=u.next(l);if(f.delete!=null)continue;h.delete!=null?o.push(h):o.retain(l,ua.transform(f.attributes,h.attributes,r))}return o.chop()}},{key:"transformPosition",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r=!!r;for(var i=er.iterator(this.ops),a=0;i.hasNext()&&a<=n;){var u=i.peekLength(),o=i.peekType();if(i.next(),o==="delete"){n-=Math.min(u,n-a);continue}else o==="insert"&&(a<n||!r)&&(n+=u);a+=u}return n}}]),e}();T(hd,"Op",er);T(hd,"AttributeMap",ua);var RC=hd,$t=RC;function wC(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}Hs();function Ri(e,t){return mp(e)||wC(e,t)||Gs(e,t)||gp()}var TC=Me(jr()),OC=Me(ha()),ar=Me(kn()),ba=Me(it()),Xt;(function(e){var t=function(G,D){return f(G)||!G.attributes?ar.none:typeof D=="function"?(0,ba.pipe)(ar.fromNullable(Object.keys(G.attributes).find(D)),ar.map(function(Y){return G.attributes[Y]})):ar.fromNullable(G.attributes[D])},n=function(G){var D=_(ba.constTrue,ba.constTrue,function(Y){return!!Y.attributes});return G.ops.reduce(function(Y,fe){var $=Ri(Y,2),x=$[0],Re=$[1],N=R(fe),P=Re+N;return[(0,ba.pipe)(x,ar.fold(function(){return D(fe)?ar.some([Re,P]):ar.none},function(s){return D(fe)?ar.some([s[0],P]):ar.some(s)})),P]},[ar.none,0])[0]},r=function(G){return G.ops.reduce(function(D,Y){return _(function(fe){return D.insert(typeof fe.insert=="string"?"<".concat(d(fe),">"):"<embed>",C(fe.attributes))},function(fe){return D.delete(fe.delete)},function(fe){return D.retain(fe.retain,C(fe.attributes))})(Y)},new $t)},i=function(G){return G.reduce(function(D,Y){return D.compose(new $t(Y))},new $t)},a=function(G){return G.reduce(function(D,Y){return _(function(fe){return D.insert(fe.insert)},function(fe){return D.delete(fe.delete)},function(fe){return D.retain(fe.retain)})(Y)},new $t)},u=function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;return function(Y){for(var fe=0,$=0;fe<Y.ops.length;){var x=Y.ops[fe];if(G(x))return $+=D(x),ar.some($);$+=$t.Op.length(x),fe+=1}return ar.none}},o=e.isInsert=function(q){return"insert"in q},l=e.isInsertString=function(q){return o(q)&&typeof q.insert=="string"};e.isInsertEmbed=function(q){return o(q)&&!l(q)};var f=e.isDelete=function(q){return"delete"in q},h=e.isRetain=function(q){return"retain"in q};e.containsInsertsOnly=function(q){return q.ops.every(o)};var d=e.getInsertLength=$t.Op.length;e.getTrimmedInsertLength=function(q){return l(q)?q.insert.trim().length:1};var _=e.match=function(q,G,D){return function(Y){return o(Y)?q(Y):f(Y)?G(Y):D(Y)}};e.getAttr=t;var R=e.operationLength=$t.Op.length,A=function(q){return-q.delete};e.getOperationOffset=_($t.Op.length,A,$t.Op.length);var E=function(q){return function(G){return G.ops.map(q).reduce(yg,0)}},g=function(){return 0};e.calcDiffLength=E(_($t.Op.length,A,g)),e.calcAmountLength=E(_($t.Op.length,$t.Op.length,g)),e.calcAffectedLength=E(_(g,$t.Op.length,$t.Op.length)),e.rangeOfTheChange=n;var I=e.isEqual=function(q){return function(G,D){return _(function(Y){return o(D)&&Y.insert===D.insert&&q(Y.attributes,D.attributes)},function(Y){return f(D)&&Y.delete===D.delete},function(Y){return h(D)&&Y.retain===D.retain&&q(Y.attributes,D.attributes)})(G)}};e.deltaEq=TC.fromEquals(function(q,G){return q.ops.length===G.ops.length&&di.compareInPairs(q.ops,G.ops,I(Kt.deepEqual))}),e.normalizeDelta=function(q){return new $t().compose(q)};var C=function(q){return q&&Object.keys(q).reduce(function(G,D){return G[D]=typeof q[D]=="string"?"<".concat(q[D].length,">"):q[D],G},{})};e.anonymizeTextAndStringAttrs=r,e.squash=i,e.cleanAllAttrs=a;var k=function(q){return ar.fromNullable(q.attributes)};e.getAttrs=_(k,function(){return ar.none},k),e.skipAny=ba.constFalse;var L=" ";e.cleanDelta=function(q,G){return function(D){var Y=function(fe){return fe&&Object.keys(fe).filter(function($,x,Re){return G($,Re.slice(0))}).reduce(function($,x){return $[x]=fe[x],$},{})};return D.reduce(function(fe,$){return _(function(x){return fe.insert(typeof x.insert=="string"||q(x.insert)?x.insert:L,Y(x.attributes))},function(x){return fe.delete(x.delete)},function(x){return fe.retain(x.retain,Y(x.attributes))})($)},new $t)}},e.splitToDeleteThenInsert=function(q){return q.reduce(function(G,D){var Y=Ri(G,2),fe=Y[0],$=Y[1];return Xt.match(function(x){return[fe,$.push(x)]},function(x){return[fe.push(x),$]},function(x){return[fe.push({retain:x.retain}),$.push(x)]})(D)},[new $t,new $t]).map(function(G){return G.chop()})},e.nonEmpty=function(q){return q.ops.length>0},e.findInDelta=u,e.getOps=(0,ba.flow)(Kt.pick("ops"),ar.fromNullable,ar.chain(OC.fromArray))})(Xt||(Xt={}));var Oh;(function(e){e.split=function(t,n){return[t]}})(Oh||(Oh={}));var yi;(function(e){var t=function(A){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return new d(A,E)},n=function(E,g){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t(new $t().retain(E).insert(g),I)},r=function(E,g){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t(new $t().retain(E).delete(g),I)},i=function(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=arguments.length>2?arguments[2]:void 0;return t(new $t().retain(E,I),g)},a=function(E){return Xt.containsInsertsOnly(E)?Fe.right(new R(E)):Fe.left(new Error("Delta should contains only inserts to be Reset, but got ".concat(JSON.stringify(Xt.anonymizeTextAndStringAttrs(E)))))},u=function(E){return Fe.unsafeGet(a(new $t().insert(E)))},o=function(){return new _},l=function(E){return E.kind==="delta"},f=function(E){return E.kind==="reset"},h=function(E){return E.kind==="flush"};e.fromArrayOfDeltas=function(A,E){var g=E;return A.map(function(I){var C=yi.delta(I,g);return g+=Xt.calcDiffLength(I),C})};var d=function(){function A(E,g){Zt(this,A),T(this,"delta",void 0),T(this,"prevLen",void 0),T(this,"kind",void 0),T(this,"_length",void 0),T(this,"_amount",void 0),T(this,"_text",void 0),this.delta=E,this.prevLen=g,this.kind="delta",this._length=void 0,this._amount=void 0,this._text=void 0}return mn(A,[{key:"length",get:function(){return this._length?this._length:this._length=Xt.calcDiffLength(this.delta)}},{key:"amount",get:function(){return this._amount?this._amount:this._amount=Xt.calcAmountLength(this.delta)}},{key:"text",get:function(){var g=this;return this._text||(this._text=Fe.tryCatchError(function(){return g.delta.ops.reduce(function(I,C){return Xt.match(function(k){return"".concat(I).concat(k.insert)},function(){throw new Error("can not get text on delta with deletes")},function(){throw new Error("can not get text on delta with retains")})(C)},"")}))}},{key:"isEmpty",get:function(){return this.delta.ops.length===0}},{key:"compose",value:function(g){var I=this.delta.compose(g.delta);return new A(I,this.prevLen)}},{key:"transform",value:function(g){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,C=g.delta.transform(this.delta,I),k=this.prevLen+g.length;return new A(C,k)}},{key:"toJSON",value:function(){return{kind:this.kind,delta:Xt.anonymizeTextAndStringAttrs(this.delta),prevLen:this.prevLen,length:this.length,amount:this.amount}}},{key:"toString",value:function(){return"Delta(".concat(this.delta,", pl: ").concat(this.prevLen,")")}}]),A}(),_=function(){function A(){Zt(this,A),T(this,"kind","flush")}return mn(A,[{key:"toString",value:function(){return"Flush()"}}]),A}(),R=function(){function A(E){Zt(this,A),T(this,"delta",void 0),T(this,"kind",void 0),T(this,"_text",void 0),T(this,"_length",void 0),this.delta=E,this.kind="reset"}return mn(A,[{key:"text",get:function(){var g=this;return this._text||(this._text=Fe.tryCatchError(function(){return g.delta.ops.reduce(function(I,C){if(Xt.isInsert(C))return"".concat(I).concat(C.insert);throw Xt.isDelete(C)?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")},"")}))}},{key:"length",get:function(){return this._length?this._length:this._length=Xt.calcDiffLength(this.delta)}},{key:"compose",value:function(g){var I=this.delta.compose(g.delta);return a(I)}},{key:"toJSON",value:function(){return{kind:this.kind,delta:Xt.anonymizeTextAndStringAttrs(this.delta),length:this.length}}},{key:"toString",value:function(){return"Reset(".concat(this.delta,")")}}]),A}();e.delta=t,e.ins=n,e.del=r,e.ret=i,e.res=a,e.unsafeRes=(0,SC.flow)(a,Fe.unsafeGet),e.resFromText=u,e.flush=o,e.isDelta=l,e.isReset=f,e.isFlush=h})(yi||(yi={}));var Ch;(function(e){var t=function(r,i){var a=new $t().insert(r),u=new $t().insert(i);return yi.delta(a.diff(u),r.length)};e.diffAsChanges=t})(Ch||(Ch={}));var Xn={};In(Xn,{AbsRawTransform:()=>$n,AccessTokenWSHandler:()=>uM,AiStudioFeedbackType:()=>ic,AiStudioStageType:()=>Yf,AlertFeedbackType:()=>un,AlertRemoveHint:()=>lc,AlertsBatchFeedbackType:()=>nc,Alternative:()=>Ar,AlternativeOperation:()=>Ct,AlternativeReversed:()=>Bf,AssistantFeedbackType:()=>cc,AsyncCheckFinished:()=>es,AutoapplyFeedbackType:()=>Ui,Autocomplete:()=>zf,AutocompleteFeedbackType:()=>Fi,AutocorrectFeedbackType:()=>ja,BIG_TEXT_SIZE:()=>Ga,CAPIClientImpl:()=>Ap,CAPIConnection:()=>tM,CAPIEvent:()=>ts,CAPIFeature:()=>tc,CAPIHttpClient:()=>nM,CAPISessionOptionType:()=>$u,CardLayout:()=>Vf,DSLParser:()=>rs,DefaultCAPIEventHandler:()=>yp,DocumentStatistics:()=>Ii,DomainInfo:()=>Hf,Drilldown:()=>Gu,DrilldownFeedbackType:()=>zu,DroppedError:()=>sl,EmotionFeedbackType:()=>Ba,EmotionSentenceFeedbackType:()=>Vu,ErrorCode:()=>La,ErrorSeverity:()=>Kf,EventTransformer:()=>Ha,ExternalHandler:()=>ec,FeedbackSubtype:()=>Xf,FeedbackType:()=>Qf,G2FeedbackType:()=>ac,GbPromptFeedbackType:()=>Jf,KnowledgeHub:()=>Da,LatencyMeasuringWSHandler:()=>aM,LensFeedbackType:()=>qa,MAX_SAFE_ID:()=>jf,Message:()=>Ki,MutedAlerts:()=>Hu,MutedFeedbackType:()=>Ku,NotConnectedError:()=>Ta,NotReadyError:()=>Ip,PNameQualifier:()=>Zf,RawAlert:()=>ht,RawAttentionHeatmap:()=>qi,RawSduiItem:()=>Yu,RawTransform:()=>ur,RelRawTransform:()=>bi,SnippetsFeedbackType:()=>oc,SynonymFeedbackType:()=>pi,SystemFeedbackType:()=>uc,TextMaps:()=>xf,TimeoutError:()=>vd,TouchTypistFeedbackType:()=>Yr,WritingExpertFeedbackType:()=>rc,WritingExpertStageType:()=>$f,defaultConnectionFactory:()=>wp,nominal:()=>Gf,optimizedOTSerializer:()=>QC,windowPerformanceClientClock:()=>Rp});var ec;(function(e){(function(t){t[t.CONTINUE_HANDLING=0]="CONTINUE_HANDLING",t[t.STOP_HANDLING=1]="STOP_HANDLING"})(e.Result||(e.Result={}))})(ec||(ec={}));var Ot=function(){},yp=function e(){Zt(this,e),T(this,"onSessionStarted",Ot),T(this,"onWaitForOT",Ot),T(this,"onReady",Ot),T(this,"onSessionInbound",Ot),T(this,"beforeAlert",Ot),T(this,"onAlert",Ot),T(this,"onRemove",Ot),T(this,"onChange",Ot),T(this,"onSynonyms",Ot),T(this,"onSnippets",Ot),T(this,"onPlagiarism",Ot),T(this,"onBeforeAsyncCheckFinish",Ot),T(this,"onAsyncCheckFinish",Ot),T(this,"onError",Ot),T(this,"onBeforeFinish",Ot),T(this,"onFinish",Ot),T(this,"onStats",Ot),T(this,"onTextMaps",Ot),T(this,"onTextInfo",Ot),T(this,"onEmotions",Ot),T(this,"onPong",Ot),T(this,"onDebugInfo",Ot),T(this,"onConnect",Ot),T(this,"onDisconnect",Ot),T(this,"onClose",Ot),T(this,"onQueueMsgAccepted",Ot),T(this,"onQueueMsgDropped",Ot),T(this,"onAck",Ot),T(this,"onMessageReceived",Ot),T(this,"onMessageSent",Ot),T(this,"onAutoComplete",Ot),T(this,"onAttentionHeatmap",Ot),T(this,"onAttentionInfo",Ot),T(this,"onProofitAvailability",Ot),T(this,"onProofitCancelled",Ot),T(this,"onProofitCompleted",Ot),T(this,"onProofitProgress",Ot),T(this,"onProofitProgressProblem",Ot),T(this,"onProofitSubmit",Ot),T(this,"onShortenItFinished",Ot),T(this,"onSDUI",Ot),T(this,"onPublishedAck",Ot),T(this,"onGbRuleCreated",Ot),T(this,"onReconnectInfo",Ot),T(this,"onCheetahSetContext",Ot),T(this,"onCheetahChunk",Ot),T(this,"onCheetahResult",Ot),T(this,"onCheetahSearchReferencesResult",Ot),T(this,"onCheetahError",Ot),T(this,"onCheetahUpdateState",Ot),T(this,"onShowSurvey",Ot),T(this,"onAsyncCheckProgress",Ot),T(this,"onTouchTypistTriggerResponse",Ot)};function Mh(e,t,n,r,i,a,u){try{var o=e[a](u),l=o.value}catch(f){n(f);return}o.done?t(l):Promise.resolve(l).then(r,i)}function Hn(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function u(l){Mh(a,r,i,u,o,"next",l)}function o(l){Mh(a,r,i,u,o,"throw",l)}u(void 0)})}}function CC(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function eu(e,t){if(e==null)return{};var n=CC(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Un(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(f){return function(h){return l([f,h])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(h){f=[6,h],i=0}finally{r=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function kh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ph=Me(Fn()),Nh=Me(it()),Qn=Me(Fn()),MC=Me(Yi()),Au=Me(it()),Ia=Me(ZS()),kC=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5*Na.MS_IN_MIN;Zt(this,e),T(this,"_windowTime",void 0),T(this,"_count",void 0),T(this,"_timer",void 0),this._windowTime=t,this._count=0}return mn(e,[{key:"inc",value:function(){this._count++,this._startCounter()}},{key:"count",get:function(){return this._count}},{key:"_startCounter",value:function(){var n=this;this._timer=this._timer||setTimeout(function(){n._timer=void 0,n._count-- >0&&n._startCounter()},this._windowTime)}}]),e}(),PC=function(e){return e.error.status==="RUNTIME_ERROR"},Wi;(function(e){var t=function(R,A,E,g,I){var C=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"backOffReconnect";if(A.iterNumber>u)return Qn.left(new Error("Maximum number (".concat(u,") of reconnect attempts reached")));switch(R.code){case i.NORMAL_CLOSURE:case i.GOING_AWAY:return(0,Au.pipe)(I.canGoIdle?"idle":"backOffReconnect",Qn.right);case i.TOO_BIG:return Qn.left(new Error("WS closed because message was too big"));case i.UNEXPECTED_CONDITION:return(0,Au.pipe)(E>g?"idle":"backOffReconnect",Qn.right);case i.CLOSED_ABNORMALLY:case i.VIOLATED_POLICY:case i.SERVICE_RESTART:case i.SERVER_SHUTDOWN:case i.TOO_MANY_REQUESTS:return Qn.right("backOffReconnect");case i.NOT_FOUND:return Qn.left(new Error("WS closed due to not found error"));case i.UNAUTHORIZED:return Qn.left(new Error("WS closed due to unauthorized error"));case i.CLIENT_MALFUNCTION:case i.BLOCKED_BY_CLIENT:return!I.isStable&&A.iterNumber>o?Qn.left(new Error("Failed to init connection for the second time")):Qn.right("backOffReconnect");case i.NOT_CONSISTENT:return A.iterNumber>o?Qn.left(new Error("Tried to send invalid message for the second time in a row")):Qn.right("backOffReconnect");case i.PRECONDITION_FAILED:return Qn.left(new Error("Precondition failed"));default:return Qn.right(C)}},n=function(R){var A=Nn.Logging.getLogger("coreclients.".concat(a[R],".reconnect"),Cn.LogLevel.TRACE);return function(E,g){var I={client:R,code:E.code,reason:E.reason,reconnectCounter:g.retryStatus.iterNumber};return A.info("skipping reconnect ",I),Qn.right({kind:"idle"})}},r=function(R){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,E=Nn.Logging.getLogger("coreclients.".concat(a[R],".reconnect"),Cn.LogLevel.TRACE),g=new kC;return function(I,C,k){return PC(I)&&(E.debug("disconnected because of runtime error"),g.inc()),(0,Au.pipe)(t(I,C.retryStatus,g.count,A,k),Qn.chain(function(L){var q={client:R,code:I.code,reason:I.reason,reconnectDecision:L,reconnectStatus:C.retryStatus},G=function(){var D=Hn(function(Y){var fe;return Un(this,function($){switch($.label){case 0:return $.trys.push([0,2,,3]),[4,C.scheduleReconnect(Y)];case 1:return $.sent(),[3,3];case 2:return fe=$.sent(),E.warn("Reconnect failed due to error ",fe),[3,3];case 3:return[2]}})});return function(fe){return D.apply(this,arguments)}}();switch(L){case"idle":return E.debug("Skip reconnect, going idle",q),Qn.right({kind:"idle"});case"backOffReconnect":return E.debug("Trying to reconnect",q),Qn.right({kind:"scheduledReconnect",reconnect:G(C.retryStatus)});default:return Qn.left(new Error("unsupported reconnect decision: "+L))}}))}},i;(function(_){_[_.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",_[_.GOING_AWAY=1001]="GOING_AWAY",_[_.CLOSED_ABNORMALLY=1006]="CLOSED_ABNORMALLY",_[_.NOT_CONSISTENT=1007]="NOT_CONSISTENT",_[_.VIOLATED_POLICY=1008]="VIOLATED_POLICY",_[_.TOO_BIG=1009]="TOO_BIG",_[_.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",_[_.SERVICE_RESTART=1012]="SERVICE_RESTART",_[_.CLIENT_MALFUNCTION=3e3]="CLIENT_MALFUNCTION",_[_.BLOCKED_BY_CLIENT=4e3]="BLOCKED_BY_CLIENT",_[_.UNAUTHORIZED=4001]="UNAUTHORIZED",_[_.SERVER_SHUTDOWN=4002]="SERVER_SHUTDOWN",_[_.NOT_FOUND=4004]="NOT_FOUND",_[_.PRECONDITION_FAILED=4012]="PRECONDITION_FAILED",_[_.TOO_MANY_REQUESTS=4029]="TOO_MANY_REQUESTS",_[_.UNKNOWN_WS_ERROR=-1]="UNKNOWN_WS_ERROR"})(i=e.WsCodes||(e.WsCodes={}));var a;(function(_){_.capi="capi",_.dox="dox"})(a=e.ClientType||(e.ClientType={}));var u=10,o=1,l=5,f=Na.MS_IN_MIN;e.getIdleReconnect=n,e.getDefaultReconnect=r;var h=e.defaultRetryPolicy=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Na.MS_IN_SEC,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Na.MS_IN_MIN;return(0,Ia.capDelay)(R,(0,Ia.exponentialBackoff)(_))},d=function(){function _(R){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[h()],E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f;Zt(this,_),T(this,"_reconnect",void 0),T(this,"retryPolicies",void 0),T(this,"_resetTimeout",void 0),T(this,"_log",void 0),T(this,"_policy",void 0),T(this,"_resetTimeoutHandle",void 0),T(this,"retryStatus",void 0),this._reconnect=R,this.retryPolicies=A,this._resetTimeout=E,this._log=Nn.Logging.getLogger("coreclients.reconnect.scheduler"),this._resetTimeoutHandle=m.none,this._policy=MC.fold(Ia.monoidRetryPolicy)(A),this.retryStatus=Ia.defaultRetryStatus}return mn(_,[{key:"reset",value:function(){this.retryStatus=Ia.defaultRetryStatus,this._resetTimeoutHandle=m.none}},{key:"scheduleReconnect",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.retryStatus,E=this;return this.retryStatus=(0,Ia.applyPolicy)(this._policy,A),this._abortReset(),(0,Au.pipe)(this.retryStatus.previousDelay,m.tap(function(g){return E._log.debug("Reconnecting after timeout ".concat(g))}),m.fold(this._reconnect,function(g){return tw(g).then(E._reconnect)}),function(g){return g.then(function(I){return E._scheduleReset(),I})})}},{key:"_scheduleReset",value:function(){var A=this;this._resetTimeoutHandle=m.some(+setTimeout(function(){A._log.debug("Resetting reconnect scheduler due to a timeout"),A.reset()},this._resetTimeout))}},{key:"_abortReset",value:function(){var A=this;(0,Au.pipe)(this._resetTimeoutHandle,m.tap(function(E){A._resetTimeoutHandle=m.none,clearTimeout(E)}))}}]),_}();e.ReconnectSchedulerImpl=d})(Wi||(Wi={}));var wn=Me(Fn()),Bt=Me(kn()),an=Me(it());function Uo(e,t,n){return hp()?Uo=Reflect.construct:Uo=function(i,a,u){var o=[null];o.push.apply(o,a);var l=Function.bind.apply(i,o),f=new l;return u&&Yo(f,u.prototype),f},Uo.apply(null,arguments)}to();var Wh=11,NC=function(){function e(t,n,r,i){Zt(this,e),T(this,"from",void 0),T(this,"to",void 0),T(this,"event",void 0),T(this,"args",void 0),this.from=t,this.to=n,this.event=r,this.args=i}return mn(e,[{key:"toString",value:function(){return"Transition: From: "+this.from+" to: "+this.to+" (Args: "+this.args+")"}}]),e}(),bp=function(){function e(t,n,r){Zt(this,e),T(this,"_name",void 0),T(this,"_log",void 0),T(this,"_parents",void 0),T(this,"_transitions",void 0),T(this,"_scheduled",void 0),T(this,"_listeners",void 0),T(this,"_inTransition",void 0),T(this,"_current",void 0),T(this,"_final",void 0),T(this,"_verbose",void 0),T(this,"_states",void 0),T(this,"_events",void 0),T(this,"_id",void 0),this._name=t,this._log=Nn.Logging.getLogger("coreclients.fsm"),this._parents={},this._transitions={},this._scheduled=[],this._listeners={},this._inTransition=!1,this._verbose=!1,this._id=++e._ids,this._current=n,this._final=r!=null?r:null}return mn(e,[{key:"current",get:function(){return this._current}},{key:"isFinal",get:function(){return this._final===this._current}},{key:"transition",value:function(n,r,i){this._transitions[n<<Wh|i]=r}},{key:"parent",value:function(t,n){this._parents[t]=n}},{key:"is",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=this;return r.findIndex(function(u){return u===a._current})>=0}},{key:"from",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Uo(FC,[this].concat(Dr(r)))}},{key:"with",value:function(n){return new WC(this,n)}},{key:"verbose",value:function(n,r){return this._verbose=!0,this._states=n,this._events=r,this}},{key:"on",value:function(n,r){return this._addCallback(this._listeners,n,r),this}},{key:"event",value:function(t,n){var r=this;return Hn(function(){return Un(this,function(i){return[2,new Promise(function(){var a=Hn(function(u,o){var l,f,h,d;return Un(this,function(_){switch(_.label){case 0:if(l=function(){var R,A,E,g,I,C,k;return Un(this,function(L){switch(L.label){case 0:if(R=r._transitions[f<<Wh|t],R===void 0)return[3,10];r._inTransition=!0,A=r._listeners[R]?r._listeners[R]:[],E=new NC(r._current,R,t,n),L.label=1;case 1:L.trys.push([1,7,8,9]),g=function(q){return Un(this,function(G){switch(G.label){case 0:return[4,r.event(q.event,q.args).then(function(D){return q.done(D)}).catch(function(D){return q.fail(D)})];case 1:return G.sent(),[2]}})},r._verbose&&r._trace("Transition from ".concat(r._stateName(E.from)," to ").concat(r._stateName(E.to)," on ").concat(r._eventName(t)," ")+"Arguments: "+n),r._current=R,I=A.map(function(q){return Promise.resolve(q(E))}),r._inTransition=!1,C=r._scheduled.shift(),L.label=2;case 2:return C===void 0?[3,5]:[5,kh(g(C))];case 3:L.sent(),L.label=4;case 4:return C=r._scheduled.shift(),[3,2];case 5:return[4,Promise.all(I).then(function(q){return u(!0)})];case 6:return L.sent(),[3,9];case 7:return k=L.sent(),h=k,[3,9];case 8:return r._inTransition=!1,[7];case 9:return[2,"break"];case 10:return f=r._parents[f],[2]}})},r._verbose&&r._trace("Handling event ".concat(r._eventName(t),", currently in ").concat(r._stateName(r._current))),r._current===r._final)return r._trace("Cannot handle event ".concat(t,": FSM is in it's final state ").concat(r._current)),[2,u(!1)];if(r._inTransition)return r._scheduled.push(new DC(t,n,u,o)),[2];f=r._current,h=null,_.label=1;case 1:return f===void 0?[3,3]:[5,kh(l())];case 2:return d=_.sent(),d==="break"?[3,3]:[3,1];case 3:return h?o(h):u(!1),[2]}})});return function(u,o){return a.apply(this,arguments)}}())]})})()}},{key:"_addCallback",value:function(n,r,i){var a=n[r];return a||(a=[],n[r]=a),a.push(i),this}},{key:"_eventName",value:function(n){return this._events===void 0?n:this._events[n]}},{key:"_stateName",value:function(n){return this._states===void 0?n:this._states[n]}},{key:"_trace",value:function(n){this._log.trace("FSM#".concat(this._id).concat(this._name&&"_"+this._name," [VERBOSE]: ")+n)}}]),e}();T(bp,"_ids",0);var WC=function(){function e(t,n){Zt(this,e),T(this,"hsm",void 0),T(this,"state",void 0),this.hsm=t,this.state=n}return mn(e,[{key:"childrenOf",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=this;return r.forEach(function(u){return a.hsm.parent(a.state,u)}),this.hsm}},{key:"parentOf",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=this;return r.forEach(function(u){return a.hsm.parent(u,a.state)}),this.hsm}}]),e}(),FC=function(){function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Zt(this,e),T(this,"hsm",void 0),T(this,"_states",void 0),this.hsm=t,this._states=r}return mn(e,[{key:"to",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return new UC(this.hsm,this._states,r)}}]),e}(),UC=function(){function e(t,n,r){Zt(this,e),T(this,"hsm",void 0),T(this,"from",void 0),T(this,"to",void 0),this.hsm=t,this.from=n,this.to=r}return mn(e,[{key:"on",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=this;return r.forEach(function(u){return a.from.forEach(function(o){return a.to.forEach(function(l){return a.hsm.transition(o,l,u)})})}),this.hsm}}]),e}(),DC=function e(t,n,r,i){Zt(this,e),T(this,"event",void 0),T(this,"args",void 0),T(this,"done",void 0),T(this,"fail",void 0),this.event=t,this.args=n,this.done=r,this.fail=i},Fh=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;Zt(this,e),T(this,"_capacity",void 0),T(this,"_start",void 0),T(this,"_allowOverflow",void 0),T(this,"_nextId",void 0),this._capacity=t,this._start=n,this._allowOverflow=r,this._nextId=n}return mn(e,[{key:"id",get:function(){return this._nextId}},{key:"newId",value:function(){var n=this._nextId;if(n>this._capacity)if(this._allowOverflow)this._nextId=n=0;else throw new Vi("ids limit reached: "+this._capacity);return this._nextId++,n}},{key:"reset",value:function(){this._nextId=this._start}}]),e}();function fl(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var gi=Me(Fn()),LC=Me(it()),vd=function(e){cl(n,e);var t=ll(n);function n(r){Zt(this,n);var i;return i=t.call(this,r||"Timeout"),T(uo(i),"name","TimeoutError"),i}return mn(n,null,[{key:"isTimeoutError",value:function(i){return fl(i,n)}}]),n}(Ti),sl=function(e){cl(n,e);var t=ll(n);function n(r){Zt(this,n);var i;return i=t.call(this,r||"Dropped"),T(uo(i),"name","DroppedError"),i}return mn(n,null,[{key:"isDroppedError",value:function(i){return fl(i,n)}}]),n}(Ti),Ta=function(e){cl(n,e);var t=ll(n);function n(r){Zt(this,n);var i;return i=t.call(this,r||"Not Connected to WS"),T(uo(i),"name","NotConnectedError"),i}return mn(n,null,[{key:"isNotConnectedError",value:function(i){return fl(i,n)}}]),n}(Ti),Ip=function(e){cl(n,e);var t=ll(n);function n(r){Zt(this,n);var i;return i=t.call(this,r||"Not ready"),T(uo(i),"name","NotReady"),i}return mn(n,null,[{key:"isNotReadyError",value:function(i){return fl(i,n)}}]),n}(Ti),qC=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new vd;Zt(this,e),T(this,"_timeout",void 0),T(this,"_timeoutError",void 0),T(this,"_log",void 0),T(this,"_notifications",void 0),this._timeout=t,this._timeoutError=r,this._notifications=new Map,this._log=Nn.Logging.getLogger("coreclients.valueNotifier"+(n.length>0?"."+n:""))}return mn(e,[{key:"waitFor",value:function(n,r){var i=this;return function(){return i._startNotificationWatch(n,r)}}},{key:"notify",value:function(n){this._stopNotification(n,gi.right(void 0))}},{key:"error",value:function(t,n){this._log.trace("onError:(".concat(t,")")),this._stopNotification(t,gi.left(n))}},{key:"clear",value:function(n){var r=this;this._log.trace("clearing notification watches: "+n),this._notifications.forEach(function(i,a){r.error(a,new sl("clearing value notifier and dropping all pending notification watches:"+n))})}},{key:"_startNotificationWatch",value:function(n,r){var i=this;this._log.debug("Starting notification watch: ".concat(n)),bt(!this._notifications.has(n),"must not start watch for same notification twice, notification already watched: "+n);var a={};return a.promise=new Promise(function(u){a.notifyValue=function(){return u(gi.right(r))},a.notifyError=function(o){return u(gi.left(o))}}),a.timer=window.setTimeout(function(){return i._stopNotification(n,gi.left(i._timeoutError))},this._timeout),this._notifications.set(n,a),a.promise}},{key:"_stopNotification",value:function(n,r){this._log.trace("_stopNotification: stopping notification watch: ".concat(n),r);var i=this._notifications.get(n);i===void 0?this._log.error("Got result for unknown notification or notification has already expired.",{id:n,result:r}):(clearTimeout(i.timer),(0,LC.pipe)(r,gi.fold(function(a){return i.notifyError(a)},function(){return i.notifyValue()})),this._notifications.delete(n))}}]),e}(),Sa=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new vd;Zt(this,e),T(this,"_timeout",void 0),T(this,"name",void 0),T(this,"_timeoutError",void 0),T(this,"_log",void 0),T(this,"_requests",void 0),this._timeout=t,this.name=n,this._timeoutError=r,this._requests=new Map,this._log=Nn.Logging.getLogger("coreclients.valueRequester"+(n.length>0?"."+n:""))}return mn(e,[{key:"watchRequest",value:function(n){return this._startRequestWatch(n)}},{key:"onValue",value:function(n,r){this._stopRequest(n,gi.right(r))}},{key:"onError",value:function(n,r){this._log.trace("onError:(".concat(n,")")),this._stopRequest(n,gi.left(r))}},{key:"clear",value:function(n){var r=this;this._log.trace("clearing request watches: "+n),this._requests.forEach(function(i,a){r.onError(a,new sl("command (".concat(r.name,") can not be executed, reason: ").concat(n)))})}},{key:"_startRequestWatch",value:function(n){var r=this;this._log.debug("Starting request watch: ".concat(n)),bt(!this._requests.has(n),"must not start watch for same request twice, request already watched: "+n);var i={};return i.promise=new Promise(function(a){i.resolve=a}),i.timer=window.setTimeout(function(){return r._stopRequest(n,gi.left(r._timeoutError))},this._timeout),this._requests.set(n,i),i.promise}},{key:"_stopRequest",value:function(n,r){this._log.trace("_stopRequest: stopping request watch: ".concat(n),r);var i=this._requests.get(n);i===void 0?this._log.warn("Got result for unknown request or request has already expired.",{id:n,result:r}):(clearTimeout(i.timer),i.resolve(r),this._requests.delete(n))}}]),e}();to();var BC=Me(ui()),_n=Me(it()),qt=Me(eo());to();var Uh=Me(ui()),Oa=Me(ui()),Pu=Me(jr()),mi=Me(ha()),Hl=Me(Sm()),en=Me(it()),Lf=Me(qs()),qf=Me(Bs()),zl=Me(Fn()),Dh=Me(kn()),po=Me(it()),ur;(function(e){(function(n){function r(i){return i.e-i.s===0}n.isEmpty=r})(e.Range||(e.Range={}));var t;(function(n){(function(r){r.MAIN="main",r.IMPORTANT="important"})(n.Type||(n.Type={})),function(r){r.OPTIONAL_CONTEXT="optional_context"}(n.TypeExt||(n.TypeExt={}))})(t=e.Edit||(e.Edit={})),function(n){function r(a){return(0,po.pipe)(a,i,zl.fold(po.identity,po.identity))}n.unsafeFromDelta=r;function i(a){return(0,po.pipe)(a.ops,Dh.fromPredicate(function(l){return l.findIndex(u)===-1}),Dh.fold(function(){return zl.left({ops:o(a.ops)})},function(l){return zl.right({ops:l})}));function u(l,f){return f>0&&Xt.isRetain(l)&&l.attributes!==void 0&&l.attributes.type===t.TypeExt.OPTIONAL_CONTEXT}function o(l){return l.reduce(function(f,h,d){if(u(h,d)){var _=h.attributes;_.type;var R=eu(_,["type"]);f.push(Pt(pt({},h),{attributes:R}))}else f.push(h);return f},[])}}n.fromDelta=i}(e.AbsAlternative||(e.AbsAlternative={}))})(ur||(ur={}));var Ct;(function(e){var t=function(C){switch(C.type){case a.Main:case a.Important:return!0;case a.Optional:return!1;default:return hn(C.type)}},n=function(C){if(D(C.ops)){var k=pp(C.ops),L=k[0],q=k.slice(1),G={retain:L.retain,type:u.OptionalContext,group:m.none};return[G].concat(Dr(q.map(g)))}else return C.ops.map(g);function D(Y){var fe=Y[0];return!!fe&&"retain"in fe&&!!fe.attributes&&fe.attributes.type==="optional_context"}},r=function(C){var k;if(((k=C)===null||k===void 0?void 0:k.type)!=null)switch(C.type){case"main":return a.Main;case"important":return a.Important;default:return hn(C.type)}return a.Optional},i=function(C){return(0,en.pipe)(m.fromNullable(C),m.chain(function(k){return m.fromNullable(k.group)}))},a;(function(I){I.Important="important",I.Main="main",I.Optional="optional"})(a=e.Type||(e.Type={}));var u;(function(I){I.OptionalContext="optional_context"})(u=e.TypeExt||(e.TypeExt={}));var o=function(I){return typeof I=="object"&&I!==null},l=function(I,C){return o(I)&&o(C)?f.equals(I,C):Pu.eqStrict.equals(I,C)},f=e.eqAttributes=Hl.getEq(Pu.fromEquals(l));e.eq=Pu.getStructEq({type:Pu.eqStrict,group:m.getEq(qf.Eq),insert:qf.Eq,delete:Lf.Eq,retain:Lf.Eq,attributes:f});var h=e.isInsert=function(I){return"insert"in I};e.isInsertString=function(I){return h(I)&&d(I.insert)},e.isInsertGap=function(I){return h(I)&&_(I.insert)},e.isDelete=function(I){return"delete"in I},e.isRetain=function(I){return"retain"in I},e.isOptionalContextRetain=function(I){return"retain"in I&&Ct.isOptionalContextType(I.type)};var d=function(I){return typeof I=="string"},_=function(I){return typeof I=="object"&&I!==null&&"gap"in I};e.isMain=function(I){return I.type===Ct.Type.Main},e.isOptionalType=function(I){return I===Ct.Type.Optional},e.isOptionalContextType=function(I){return I===Ct.TypeExt.OptionalContext},e.isSignificant=t,e.fromRawAbsAlternative=n;var R=e.length=$t.Op.length;e.anonymize=function(I){return h(I)?Pt(pt({},I),{insert:typeof I.insert=="string"?"<".concat(R(I),">"):"<embed>"}):I};var A=function(){function I(C){Zt(this,I),T(this,"ops",void 0),T(this,"index",void 0),T(this,"offset",void 0),this.ops=C,this.index=0,this.offset=0}return mn(I,[{key:"hasNext",value:function(){return this.peekLength()<1/0}},{key:"next",value:function(k){k||(k=1/0);var L=this.ops[this.index];if(L){var q=L.type,G=this.offset,D=R(L);return k>=D-G?(k=D-G,this.index+=1,this.offset=0):this.offset+=k,Ct.isDelete(L)?{delete:k,type:q,group:L.group}:Ct.isRetain(L)?{retain:k,type:q,group:L.group,attributes:!Ct.isOptionalContextType(q)&&L.attributes}:Ct.isInsertString(L)?{insert:L.insert.substr(G,k),type:q,group:L.group,attributes:L.attributes}:L}else return{retain:1/0,type:a.Optional,group:m.none,attributes:{}}}},{key:"peekLength",value:function(){return this.ops[this.index]?R(this.ops[this.index])-this.offset:1/0}},{key:"peekType",value:function(){return this.ops[this.index]?Ct.isDelete(this.ops[this.index])?"delete":Ct.isRetain(this.ops[this.index])?"retain":"insert":"retain"}}]),I}();e.Iterator=A;var E=(0,en.flow)(m.fromNullable,m.map(Hl.deleteAt("type")),m.map(Hl.deleteAt("group")),m.getOrElse(function(){return{}})),g=function(I){var C=r(I.attributes),k=i(I.attributes);return"insert"in I?{insert:I.insert,type:C,group:k,attributes:E(I.attributes)}:"delete"in I?{delete:I.delete,type:C,group:k}:{retain:I.retain,type:C,group:k,attributes:E(I.attributes)}}})(Ct||(Ct={}));var Bf;(function(e){var t=e.fromAlternative=function(n){var r=n.alternative,i=n.fullText;return(0,en.pipe)(r.delta.invert(i),Ar.fromRawDelta)};e.fromAlternativeBoldified=function(n){var r=n.alternative,i=n.fullText,a=(0,en.pipe)(r.delta.map(Xt.match(function(u){return(0,en.pipe)(u,m.fromPredicate(Xt.isInsertString),m.chain(function(o){return(0,en.pipe)(m.fromNullable(o.attributes),m.map(function(l){return{attributes:l,retain:o.insert.length}}))}),m.filter(function(o){var l=o.attributes;return!!l.bold}),m.map(function(o){var l=o.retain;return{retain:l,attributes:{bold:!1}}}))},function(u){return m.none},function(u){return m.some({retain:u.retain})})),Oa.compact,function(u){return new $t(u)},function(u){return i.compose(u)});return t({alternative:r,fullText:a})},e.fromAlternativeListified=function(n){var r=n.alternative,i=n.fullText;return(0,en.pipe)(t({alternative:r,fullText:i}),function(a){return(0,en.pipe)(a.delta.ops,Oa.findLastIndex(function(u){return Xt.isInsertString(u)&&u.insert==="\n"&&(!u.attributes||!u.attributes.list)}),m.map(function(u){var o=a.delta.ops,l=o[u];return new $t(Dr(o.slice(0,u)).concat([Pt(pt({},l),{attributes:Pt(pt({},l.attributes),{list:!1})})],Dr(o.slice(u+1))))}),m.getOrElse(function(){return a.delta}))},Ar.fromRawDelta)}})(Bf||(Bf={}));var Ar;(function(e){var t=function(R){return!!R[0]&&Ct.isOptionalContextRetain(R[0])},n=function(R){return function(A){return Ct.isInsertGap(A)?Pt(pt({},A),{insert:R}):A}},r=function(R,A){var E=Oa.filterMap(function(k){return(0,en.pipe)(k.group,m.filter(function(L){return A.has(L)}),m.fold(function(){return m.some(k)},function(){return i(k)}))});if(Ar.hasOptionalContext(R.ops)){var g=pp(R.ops),I=g[0],C=g.slice(1);return o([I].concat(Dr((0,en.pipe)(C,E))))}return o((0,en.pipe)(R.ops,E))},i=function(R){return Ct.isDelete(R)?m.some({type:R.type,group:R.group,retain:R.delete,attributes:{}}):Ct.isInsert(R)?m.none:m.some(R)},a=function(R){var A=new Set;return R.ops.forEach(function(E){return(0,en.pipe)(E.group,m.tap(function(g){return A.add(g)}))}),A},u=function(R){return(0,en.pipe)(R.ops.filter(Ct.isDelete),Oa.map(function(A){return A.group}),Oa.compact)},o=function(R){return new d(R)},l=function(R,A){R.forEach(function(E,g){return(0,en.pipe)(E,Fe.fold(en.constVoid,function(I){R[g]=(0,en.pipe)(I.reversedAlternative.rebase(A.delta),Fe.fromOption(function(){return{error:new Error("Could not rebase reversed alternative to some alternative"),delta:I.reversedAlternative.delta,alternativeIndex:I.alternativeIndex}}),Fe.map(function(C){return Pt(pt({},I),{reversedAlternative:C})}))}))})},f=function(R){return Ar.create(R.filter(function(A){return!Ct.isOptionalType(A.type)}))};e.hasOptionalContext=t;var h;(function(_){_.Insert="insert",_.Remove="remove",_.Substitution="substitution"})(h=e.Type||(e.Type={})),function(_){_.eq=qf.Eq;function R(g){return g.type===Ct.Type.Main?m.some(Ct.isInsert(g)?h.Insert:h.Remove):m.none}_.fromOperation=R;var A=_.semigroup={concat:function(I,C){switch(I){case h.Insert:return C===h.Remove?h.Substitution:C;case h.Remove:return C===h.Insert?h.Substitution:C;case h.Substitution:return h.Substitution;default:return hn(I)}}},E=_.monoid=m.getMonoid(A);_.parse=(0,Uh.foldMap)(E)(R)}(h=e.Type||(e.Type={})),e.eq=Pu.getStructEq({lengthAffected:Lf.Eq,type:m.getEq(h.eq),ops:(0,Uh.getEq)(Ct.eq)}),e.fromRawDelta=(0,en.flow)(ur.AbsAlternative.unsafeFromDelta,Ct.fromRawAbsAlternative,o),e.fillGaps=function(_,R){return Ar.hasOptionalContext(_.ops)?o([_.ops[0]].concat(Dr(_.ops.slice(1).map(n(R))))):o(_.ops.map(n(R)))},e.dismissTransformGroups=r,e.getTransformGroups=a,e.getDeleteOpsGroupsList=u,e.create=o,e.validate=(0,en.flow)(function(_){return _.ops},Fe.fromPredicate(di.existsOnEdgesOnly(Ct.isOptionalContextRetain),function(_){return"Optional_context operations exist not only at the beginning or at the end of Delta"})),function(_){function R(E){return{context:E.context,alternatives:(0,en.pipe)(E.alternatives,mi.map(function(g){return g.ops}),mi.map(Ar.create))}}_.fromSerialized=R,_.fromSubalerts=function(E,g){return{context:E,alternatives:mi.map((0,en.flow)(Ct.fromRawAbsAlternative,o))(g)}};function A(E){return{context:mi.of(E.context),alternatives:mi.map((0,en.flow)(Ct.fromRawAbsAlternative,o))(E.alternatives)}}_.fromRawTransform=A,_.rebase=function(E){return function(g){return{context:(0,en.pipe)(g.context,mi.map(function(I){return{s:E.transformPosition(I.s,!0),e:E.transformPosition(I.e,!0)}})),alternatives:(0,en.pipe)(g.alternatives,mi.map(function(I){return(0,en.pipe)(I.rebase(E),m.fold(function(){return I},en.identity))}))}}},_.copy=function(E){return{context:mi.copy(E.context),alternatives:mi.copy(E.alternatives)}}}(e.Group||(e.Group={}));var d=function(){function _(R){Zt(this,_),T(this,"ops",void 0),T(this,"lengthAffected",void 0),T(this,"type",void 0),this.ops=R,this.type=h.parse(this.ops),this.lengthAffected=Xt.calcAffectedLength(this)}return mn(_,[{key:"rebase",value:function(A){var E=A.ops[0];if(!E||Xt.isRetain(E)&&(typeof E.attributes>"u"||Object.keys(E.attributes).length===0)&&$t.Op.length(E)>this.lengthAffected)return m.some(this);var g=this.ops.length>=2&&Xt.isDelete(this.ops[this.ops.length-2])&&Xt.isInsert(this.ops[this.ops.length-1]);return!E||g&&Xt.isRetain(E)&&(typeof E.attributes>"u"||Object.keys(E.attributes).length===0)&&$t.Op.length(E)===this.lengthAffected?m.some(this):this._internalRebase(A)}},{key:"_internalRebase",value:function(A){for(var E=this,g=$t.Op.iterator(A.ops),I=new Ct.Iterator(this.ops),C=m.some(new _([])),k=!1;I.hasNext();)if(g.peekType()==="insert"){if(k&&(0,en.pipe)(C,m.forAll(function(x){return x.ops[x.ops.length-1].type===Ct.Type.Main})))return m.none;var L=$t.Op.length(g.next()),q=(0,en.pipe)(C,m.map(function(x){return x.ops[x.ops.length-1]}),m.unsafeGet);if(k&&m.forAll(function(x){return x.lengthAffected>0})(C)){var G={retain:L,type:q.type,group:q.group,attributes:"attributes"in q&&!Ct.isOptionalContextType(q.type)?q.attributes:{}};C=_._pushOp(C,G)}else C=_._pushOp(C,{retain:L,type:Ct.Type.Optional,group:m.none,attributes:{}})}else if(I.peekType()==="insert"){var D=I.next();if(D.type===Ct.Type.Main&&g.peekType()==="delete"&&g.offset>0)return m.none;C=_._pushOp(C,D)}else{var Y=Math.min(g.peekLength(),I.peekLength()),fe=g.next(Y),$=I.next(Y);Xt.isDelete(fe)||(k=I.offset>0,C=_._pushOp(C,Ct.isDelete($)?$:Ct.isOptionalContextType($.type)?{retain:Y,type:Ct.TypeExt.OptionalContext,group:m.none}:{retain:Y,type:$.type,group:$.group,attributes:$.attributes}))}return(0,en.pipe)(C,m.map(function(x){return x.type=Ar.Type.parse(E.ops),x}))}},{key:"_push",value:function(A){var E=this.ops.length,g=this.ops[E-1];if(g){if(Ct.isOptionalContextRetain(A))return Ct.isOptionalContextRetain(g)?g.retain+=A.retain:Ct.isRetain(g)&&E<=2?E===2?(bt(Ct.isOptionalContextRetain(this.ops[0]),"OptionalContext is expected in the beginning of alternative but not found",JSON.stringify({ops:this.ops,newOp:A,index:E})),this.ops[0].retain+=A.retain):(this.ops[E]=g,this.ops[E-1]=A):bt(Ct.isOptionalContextRetain(g)||Ct.isRetain(g)&&E===1,"Attempted to push optional_context in the middle of alternative ops",JSON.stringify({ops:this.ops,newOp:A,index:E})),this.lengthAffected+=A.retain,this;if(Ct.isDelete(A)&&Ct.isDelete(g))return A.type===g.type?g.delete+=A.delete:this.ops.push(A),this.lengthAffected+=A.delete,this;if(Ct.isInsert(A)&&Ct.isInsert(g))return A.type===g.type&&typeof A.insert=="string"&&typeof g.insert=="string"&&Ct.eqAttributes.equals(A.attributes,g.attributes)?g.insert+=A.insert:this.ops.push(A),this;if(Ct.isRetain(A)&&Ct.isRetain(g))return A.type===g.type?g.retain+=A.retain:this.ops.push(A),this.lengthAffected+=A.retain,this;this.ops.push(A)}else this.ops=[A];return Ct.isInsert(A)||(this.lengthAffected+=Ct.length(A)),this}},{key:"delta",get:function(){return Xt.normalizeDelta(new $t(this))}},{key:"toJSON",value:function(){return{ops:this.ops}}}],[{key:"_pushOp",value:function(A,E){return(0,en.pipe)(A,m.chain(function(g){return(0,en.pipe)(Fe.tryCatchError(function(){return g._push(E)}),Fe.mapLeft(function(I){return Nn.Logging.getLogger("Alternative").error("Alternative push error",I),I}),m.fromEither)}))}}]),_}();e.compose=function(_,R){var A={composedDelta:new $t,currentFullText:R,reversedAlternatives:[]},E=_.reduce(function(I,C,k){var L=Ri(C,2),q=L[0],G=L[1];return(0,en.pipe)(q.rebase(I.composedDelta),m.fold(function(){I.reversedAlternatives.push(Fe.left({error:new Error("Could not rebase alternative to composed delta"),delta:q.delta,alternativeIndex:k}))},function(D){var Y=G({alternative:D,fullText:I.currentFullText});I.composedDelta=I.composedDelta.compose(D.delta),I.currentFullText=I.currentFullText.compose(D.delta),l(I.reversedAlternatives,D),I.reversedAlternatives.push(Fe.right({reversedAlternative:Y,alternativeIndex:k}))})),I},A),g=(0,en.pipe)(E.reversedAlternatives,Oa.separate,Fa.fromSeparatedArray);return Pt(pt({},E),{reversedAlternatives:g})},e.withoutOptionalOps=f})(Ar||(Ar={}));var jf=Math.pow(2,32)/2,tc;(function(e){e.alertsUpdate="alerts_update",e.textInfo="text_info",e.freeAdvancedChecks="free_inline_advanced_alerts",e.readability="readability_check",e.sentenceVariety="sentence_variety_check",e.fillerWords="filler_words_check",e.alertsChanges="alerts_changes",e.freeClarityChecks="free_clarity_alerts",e.superAlerts="super_alerts",e.consistency="consistency_check",e.setGoalsLink="set_goals_link",e.emogenieCheck="emogenie_check",e.toneCards="tone_cards",e.alternativeDeletesCard="alternative_deletes_card",e.voxCheck="vox_check",e.plagiarismAlertsUpdate="plagiarism_alerts_update",e.fullSentenceRewrite="full_sentence_rewrite_card",e.listCard="turn_to_list_card",e.userMutes="user_mutes",e.completions="completions",e.muteQuotedAlerts="mute_quoted_alerts",e.keyTakeaways="key_takeaways_v4",e.supportsFormatting="formatting",e.supportsButtonTransformCards="transform_with_button_card",e.priorityAlertsView="priority_alerts_view",e.proofit="realtime_proofit",e.freeOccasionalPremiumAlerts="free_occasional_premium_alerts",e.gapTransformCard="gap_transform_card",e.toneAI="tone_slider_card",e.ethicalAI="ethical_ai_card",e.enclosingHighlight="enclosing_highlight",e.mainStartHighlight="main_start_highlight",e.drilldownCard="drilldown_card",e.shortenIt="shorten_it",e.ideasGalleryLink="ideas_gallery_link",e.citations="citations",e.citation_detection_card="citation_detection_card",e.citation_gap="citation_gap",e.reconnect="reconnect",e.suggestedSnippets="suggested_snippets",e.knowledgeHubSuggestedTerms="knowledge_hub_suggested_terms",e.knowledgeHub="knowledge_hub",e.autoapply="autoapply",e.cheetah="cheetah",e.gbContext="gb_context",e.vbarAlerts="vbar_alerts",e.gDebugger="g_debugger",e.g2UI="g2_ui",e.individualPreviewReverts="INDIVIDUAL_PREVIEW_REVERTS",e.individualPreviewImportantRetains="INDIVIDUAL_PREVIEW_IMPORTANT_RETAINS",e.lockedUIDelayedUnlock="locked_ui_debounced_unlock_on_focus",e.touchtypist="touchtypist"})(tc||(tc={}));var Ki;(function(e){(function(t){t.READ_ONLY="READ_ONLY",t.AI_STUDIO_PREVIEW="AI_STUDIO_PREVIEW"})(e.SessionMode||(e.SessionMode={})),function(t){t.OK="OK",t.TOO_SMALL="TOO_SMALL",t.SENSITIVE="SENSITIVE",t.ERROR="ERROR"}(e.ScoresStatus||(e.ScoresStatus={})),function(t){var n={Clarity:0,Correctness:0,Engagement:0,Tone:0,"Style guide":0,GeneralScore:0};t.normalize=function(r){return pt({},n,r)}}(e.OutcomeScores||(e.OutcomeScores={})),function(t){function n(r){return"attentionScore"in r&&"showAttentionCard"in r}t.hasAttentionInfo=n}(e.AttentionHeatmap||(e.AttentionHeatmap={})),function(t){(function(n){(function(r){(function(i){i.gmail="gmail",i.ggo="ggo"})(r.Placement||(r.Placement={}))})(n.BaseSurvey||(n.BaseSurvey={})),function(r){r.type="score",function(i){i.declined="declined"}(r.Score||(r.Score={}))}(n.ScoreSurvey||(n.ScoreSurvey={})),function(r){r.type="open_answer_score",r.scoreStage="score",r.submitStage="submit"}(n.OpenAnswerScoreSurvey||(n.OpenAnswerScoreSurvey={}))})(t.Data||(t.Data={}))}(e.Survey||(e.Survey={}))})(Ki||(Ki={}));var Gf;Gf||(Gf={});var Da;(function(e){var t=e.RelatedMaterial=qt.type({iconUrl:qt.readonly(qt.string),title:qt.readonly(qt.string),link:qt.readonly(qt.string)});e.RelatedMaterials=qt.readonlyArray(t);var n=e.CommunicationMethod=qt.type({iconUrl:qt.readonly(qt.string),title:qt.readonly(qt.string),link:qt.readonly(qt.string)}),r=e.PointPerson=qt.type({firstName:qt.readonly(qt.string),lastName:qt.readonly(qt.string),displayName:qt.readonly(qt.string),jobTitle:qt.readonly(qt.union([qt.string,qt.undefined])),avatarUrl:qt.readonly(qt.union([qt.string,qt.undefined])),communicationMethods:qt.readonlyArray(n)});e.PointPeople=qt.readonlyArray(r),e.Aliases=qt.readonlyArray(qt.type({name:qt.readonly(qt.string)}))})(Da||(Da={}));var Gu;(function(e){var t=function(i){return i.length===0};e.empty=[],e.isLeaf=t;var n=e.Tree=qt.recursion("Tree",function(){return qt.array(qt.tuple([qt.number,n]))})})(Gu||(Gu={}));var Hf;(function(e){(function(t){t.sales_crm="sales_crm",t.sales_engagement="sales_engagement",t.sales_enablement="sales_enablement",t.marketing_email_automation="marketing_email_automation",t.marketing_content="marketing_content",t.customer_service="customer_service",t.customer_surveys_surveys="customer_surveys_surveys",t.recruiting="recruiting",t.training_learning="training_learning",t.project_management="project_management",t.legal="legal",t.contractors="contractors",t.human_resources="human_resources",t.email="email",t.business_chat="business_chat"})(e.DomainCategory||(e.DomainCategory={}))})(Hf||(Hf={}));var Hu;(function(e){(function(t){t.InQuotes="InQuotes"})(e.SpecialCategory||(e.SpecialCategory={})),function(t){t.GLOBAL="GLOBAL",t.SESSION="SESSION",t.DOCUMENT="DOCUMENT"}(e.ScopeType||(e.ScopeType={})),function(t){t.MUTED_BY_USER="MUTED_BY_USER",t.NOT_ELIGIBLE_FOR_INLINE="NOT_ELIGIBLE_FOR_INLINE",t.NOT_MUTED="NOT_MUTED"}(e.MutedByType||(e.MutedByType={}))})(Hu||(Hu={}));var zf;(function(e){(function(t){t.NOT_RELEVANT="NOT_RELEVANT",t.WRONG_TONE="WRONG_TONE",t.INCORRECT="INCORRECT",t.WRONG_GRAMMAR="WRONG_GRAMMAR",t.OFFENSIVE="OFFENSIVE",t.OTHER="OTHER"})(e.SuggestionRejectionReason||(e.SuggestionRejectionReason={}))})(zf||(zf={}));var Vf;(function(e){e.mock={bundle:"Test bundle",bundleRank:10,group:"Test Group",rank:1,outcome:"Correctness"}})(Vf||(Vf={}));var bi;(function(e){var t=function(a){return function(u){return{s:a.s+u.s,e:a.s+u.e,type:u.type}}},n=function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return a.s===0?_n.unsafeCoerce:function(o){return(0,_n.unsafeCoerce)({ops:[{retain:a.s,attributes:u?void 0:{type:ur.Edit.TypeExt.OPTIONAL_CONTEXT}}].concat(Dr(o.ops))})}},r=function(a){return $n.create({highlights:a.highlights.map(t(a.context)),alternatives:(0,_n.pipe)(a,m.fromPredicate(function(u){return u.alternatives!==void 0&&u.alternatives.length>0}),m.map(function(u){return Pt(pt({},u),{alternatives:Pn.map(n(u.context))(u.alternatives)})}),m.map(Ar.Group.fromRawTransform))})};e.prependContextToHighlight=t,e.prependContext=n,e.toAbs=r})(bi||(bi={}));var qi;(function(e){var t=function(a){return Pt(pt({},a),{add:a.add.map(r.fromAttentionHeatmapMessage),update:a.update.map(r.fromAttentionHeatmapMessage),remove:a.remove.map(n.create),attentionScore:(0,_n.pipe)(a,m.fromPredicate(Ki.AttentionHeatmap.hasAttentionInfo),m.map(Kt.pick("attentionScore"))),showAttentionCard:(0,_n.pipe)(a,m.fromPredicate(Ki.AttentionHeatmap.hasAttentionInfo),m.map(Kt.pick("showAttentionCard")))})},n;(function(i){i.create=function(a){return a.toString()}})(n=e.Id||(e.Id={}));var r;(function(i){function a(l,f){var h=f.transformPosition(l.begin,!0),d=f.transformPosition(l.end,!0),_=new $t().insert(l.text).compose(f.slice(l.begin)).reduce(function(R,A){return Xt.isInsert(A)?"".concat(R).concat(A.insert):R},"").slice(0,d-h);return Pt(pt({},l),{begin:h,end:d,text:_})}i.rebase=a;function u(l){return l.begin>=l.end}i.isSquashed=u;function o(l){return Pt(pt({},l),{id:n.create(l.id)})}i.fromAttentionHeatmapMessage=o})(r=e.Range||(e.Range={})),e.fromAttentionHeatmapMessage=t})(qi||(qi={}));var $n;(function(e){var t=function(o){return o.highlights.some(ur.Range.isEmpty)},n=function(o,l){var f=a(o),h=a(l);return!!di.compareInPairs(f.highlights,h.highlights,function(d,_){return d.e-d.s===_.e-_.s})&&di.compareInPairs(f.alternatives,h.alternatives,function(d,_){return di.compareInPairs(d.ops.filter(zo(Xt.isRetain)),_.ops.filter(zo(Xt.isRetain)),Xt.isEqual(function(){return!0}))})},r=function(o,l){return i({highlights:o.highlights.map(function(f){return{s:l.transformPosition(f.s,!0),e:l.transformPosition(f.e,!0),type:f.type}}),alternatives:(0,_n.pipe)(o.alternatives,m.map(Ar.Group.rebase(l)))})},i=e.create=function(u){return u};e.isSquashed=t,e.isValidAfterTransform=n,e.rebase=r;var a=function(u){return{highlights:u.highlights,alternatives:(0,_n.pipe)(u.alternatives,m.fold(function(){return[]},function(o){return o.alternatives.map(function(l){return l.delta})}))}}})($n||($n={}));var ht;(function(e){var t=function(p){return p.drilldownTree===void 0&&p.knowledgeHubSuggestCorrectionUrl===void 0&&p.knowledgeHubRelatedMaterials===void 0&&p.knowledgeHubPointPeople===void 0&&p.knowledgeHubAliases===void 0?p:Pt(pt({},p),{drilldownTree:p.drilldownTree===void 0?void 0:(0,_n.pipe)(p.drilldownTree,function(U){return typeof U=="object"?U:JSON.parse(U)},Gu.Tree.decode,Fe.unsafeGet),knowledgeHubRelatedMaterials:(0,_n.pipe)(p.knowledgeHubRelatedMaterials,m.fromNullable,m.chain(function(U){return(0,_n.pipe)(Fe.parseJSON(U,Fe.toError),Fe.chain((0,_n.flow)(Da.RelatedMaterials.decode,Fe.mapLeft(Fe.toError))),Fe.fold(function(j){return Nn.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubRelatedMaterials",j),m.none},m.some))}),m.toUndefined),knowledgeHubPointPeople:(0,_n.pipe)(p.knowledgeHubPointPeople,m.fromNullable,m.chain(function(U){return(0,_n.pipe)(Fe.parseJSON(U,Fe.toError),Fe.chain((0,_n.flow)(Da.PointPeople.decode,Fe.mapLeft(Fe.toError))),Fe.fold(function(j){return Nn.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubPointPeople",j),m.none},m.some))}),m.toUndefined),knowledgeHubAliases:(0,_n.pipe)(p.knowledgeHubAliases,m.fromNullable,m.chain(function(U){return(0,_n.pipe)(Fe.parseJSON(U,Fe.toError),Fe.chain((0,_n.flow)(Da.Aliases.decode,Fe.mapLeft(Fe.toError))),Fe.fold(function(j){return Nn.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubAliases",j),m.none},m.some))}),m.toUndefined)})},n=function(p){return Object.assign({},p,pt({id:ht.Id.create(p.id),cost:p.cost?p.cost:1,extra_properties:t(p.extra_properties)},p.transformJson?{transformJson:bi.toAbs(p.transformJson),highlightText:[p.highlightText]}:(0,_n.pipe)(Pn.fromNullableArray(p.subalerts),m.fold(function(){return{highlightText:[p.highlightText]}},function(U){return(0,_n.pipe)(i(U,m.fromNullable(p.labels)),Fe.getOrElse(function(j){return Nn.Logging.getLogger("coreclients.capi.data").error("Error repacking superalert",j),{highlightText:[]}}))}))))},r=function(p,U){(0,_n.pipe)(p.ops,BC.findFirst(function(j){return Xt.isInsert(j)&&(0,_n.pipe)(Xt.getAttr(j,"type"),m.exists(function(ae){return ae===ur.Edit.Type.MAIN}))&&typeof j.insert=="string"}),m.map(function(j){var ae=j.insert;return U(ae)}))},i=function(p,U){return(0,_n.pipe)(U,m.fold(function(){return Fe.left(new Error("Got corrupted superalert  the labels are missing"))},function(j){return a(p,j)}))},a=function(p,U){var j=function(K){var pe,De=p[K];if(ae.length>0){if(De.transformJson.alternatives===void 0)return{v:Fe.left(new Error("The alternatives are missing from subalert, expected length: ".concat(ae.length)))};if(De.transformJson.alternatives.length!==ae.length)return{v:Fe.left(new Error("Subalert has incorrect alternatives length: expected ".concat(ae.length,", got ").concat(De.transformJson.alternatives.length)))}}me=(0,_n.pipe)(me,m.map(function(Ze){var rt=function(Xe){var ot=De.transformJson.alternatives[Xe];r(ot,function(at){return ae[Xe].replacements.add(at)}),ne[Xe]=(0,_n.pipe)(new $t(ne[Xe]),function(at){return at.compose(at.transform(new $t(bi.prependContext(De.transformJson.context,!0)(ot)),!0))},ur.AbsAlternative.unsafeFromDelta)},W=Ri(Ze,2),J=W[0],ne=W[1];V[De.label].matches+=1,J.push(De.transformJson.context);for(var Se=0;Se<ne.length;Se++)rt(Se);return[J,ne]})),(pe=Ie).push.apply(pe,Dr(De.transformJson.highlights.map(bi.prependContextToHighlight(De.transformJson.context)))),Ee.push(De.highlightText)};if(p.length<2)return Fe.left(new Error("There should be more than one subalert, got "+p.length));var ae=U.map(function(K){return{matches:0,replacements:new Set,label:K}}),V=ae.reduce(function(K,pe){return K[pe.label]=pe,K},{}),Q=Pn.fromNullableArray(p[0].transformJson.alternatives);if(ae.length>0&&m.isNone(Q)||!(0,_n.pipe)(Q,m.forAll(function(K){return ae.length===K.length})))return Fe.left(new Error("Alternatives array length must match labels array length"));for(var me=(0,_n.pipe)(Q,m.map(Pn.mapWithIndex(function(K,pe){return r(pe,function(De){return ae[K].replacements.add(De)}),bi.prependContext(p[0].transformJson.context)(pe)})),m.map(function(K){return V[p[0].label].matches+=1,[Pn.of(p[0].transformJson.context),K]})),Ie=p[0].transformJson.highlights.map(bi.prependContextToHighlight(p[0].transformJson.context)),Ee=[p[0].highlightText],Ge=1;Ge<p.length;Ge++){var Ke=j(Ge);if(vp(Ke)==="object")return Ke.v}return Fe.right({subalerts:$n.create({alternatives:(0,_n.pipe)(me,m.map(function(K){var pe=Ri(K,2),De=pe[0],Ze=pe[1];return Ar.Group.fromSubalerts(De,Ze)})),highlights:Ie}),labels:ae.map(function(K){var pe=K.replacements,De=eu(K,["replacements"]);return Pt(pt({},De),{replacementTexts:Array.from(pe)})}),highlightText:Ee})},u=function(p){return p.full_sentence_rewrite==="true"||p.full_sentence_fluency_rewrite==="true"},o=function(p){var U=l(p);return Object.values(Hu.SpecialCategory).findIndex(U)!==-1},l=function(p){return function(U){switch(U){case Hu.SpecialCategory.InQuotes:return p.extra_properties.in_quotes==="true";default:return!1}}},f=function(p){return!d(p)&&!R(p)},h=function(p){return p.begin!==void 0&&p.end!==void 0&&p.highlightBegin!==void 0&&p.highlightEnd!==void 0},d=function(p){return p.cardLayout!==void 0&&p.transformJson!==void 0},_=function(p){return d(p)&&m.isSome(p.transformJson.alternatives)},R=function(p){return"labels"in p&&"subalerts"in p},A=function(p,U,j,ae){return f(p)?U(p):d(p)?j(p):ae(p)},E=function(p,U,j){return function(ae){return A(ae,p,U,j)}},g=function(p){return p.cardLayout!==void 0&&p.cardLayout.outcome==="Originality"},I=function(p){return p.extra_properties!==void 0&&"gap_transform"in p.extra_properties},C=function(p){return p.extra_properties!==void 0&&"takeawayScore"in p.extra_properties},k=function(p){return p.extra_properties!==void 0&&"drilldownTree"in p.extra_properties},L=function(p){return p.extra_properties!==void 0&&"shorten_it"in p.extra_properties},q=function(p){return p.extra_properties!==void 0&&"tone_slider"in p.extra_properties},G=function(p){return p.extra_properties!==void 0&&"ethical_ai_external_link"in p.extra_properties},D=function(p){return p.extra_properties!==void 0&&"citation_detection"in p.extra_properties},Y=function(p){return p.extra_properties!==void 0&&"suggested_snippet_text"in p.extra_properties&&"suggested_snippet_lib_link"in p.extra_properties},fe=function(p){return p.pname==="KnowledgeHub/SuggestedTerm/SuggestedTerm"},$=function(p){return p.hidden===!0},x=function(p){if(!p)return!1;var U=p;return Number.isInteger(U.rev)&&A(U,function(j){return Number.isInteger(j.begin)&&Number.isInteger(j.end)&&Number.isInteger(j.highlightBegin)&&Number.isInteger(j.highlightEnd)},function(j){return j.transformJson.highlights.length>0},function(j){return j.labels.length>0})},Re=function(p){p.text,p.replacements,p.highlightText,p.transformJson,p.transforms,p.details,p.explanation,p.examples;var U=eu(p,["text","replacements","highlightText","transformJson","transforms","details","explanation","examples"]);return U},N=function(p){return bt(h(p),"raw alert should have a position"),p},P=function(p){return bt(d(p),"raw alert should have transformJson"),p};(function(c){c.create=function(p){return p.toString()}})(e.Id||(e.Id={}));var s;(function(c){c.Critical="critical",c.Advanced="advanced"})(s=e.Impact||(e.Impact={}));var S;(function(c){c.all="all",c.priority="priority"})(S=e.View||(e.View={}));var M;(function(c){c.inline="inline",c.not_inline="not_inline"})(M=e.Inline||(e.Inline={})),e.parseExtraProperties=t,e.fromAlertMessage=n,e.isFullSentence=u,e.belongsToAnySpecialCategory=o,e.belongsToSpecialCategory=l,e.withPosition=f,e.hasPosition=h,e.withTransformJson=d,e.withAlternatives=_,e.withSubalerts=R,e.match=A,e.matchBy=E,function(c){function p(me,Ie){return{begin:me.begin+Ie,end:me.end+Ie,highlightBegin:me.highlightBegin+Ie,highlightEnd:me.highlightEnd+Ie}}c.shift=p;function U(me,Ie){return{begin:Ie.transformPosition(me.begin,!0),end:Ie.transformPosition(me.end,!0),highlightBegin:Ie.transformPosition(me.highlightBegin,!0),highlightEnd:Ie.transformPosition(me.highlightEnd,!0)}}c.rebase=U;function j(me){return me.end-me.begin}c.getReplacementLength=j;function ae(me){return me.highlightEnd-me.highlightBegin}c.getHighlightLength=ae;function V(me){return j(me)===0||ae(me)===0}c.isSquashed=V;function Q(me,Ie){return j(me)===j(Ie)&&ae(me)===ae(Ie)}c.hasEqualLength=Q}(e.Position||(e.Position={})),e.isPlagiarism=g,e.isOneGap=I,e.isTakeaway=C,e.hasDrilldownTree=k,e.isShortenIt=L,e.isToneAI=q,e.isEthicalAI=G,e.isCitationDetection=D,e.isSuggestedSnippet=Y,e.isKnowledgeHubSuggestedTerm=fe,e.isHidden=$,e.isRawAlert=x,e.mock={id:ht.Id.create(""),rev:0,pname:"Spelling/BritishVsAmerican/BrInstOfAm/BrInstOfAm",group:"ContextualSpelling",point:"BrInstOfAm",category:"BritishVsAmerican",categoryHuman:"British vs American",hidden:!1,text:"centralise",todo:"correct",minicardTitle:"correct",title:"Inconsistent spelling",cost:1,transforms:["<span class='gr_grammar_del'>centralise</span><span class='gr_grammar_ins'>centralize</span>"],details:"<p>One of&nbsp;the most obvious differences between American and British English is&nbsp;the spelling of&nbsp;certain words such as&nbsp;<b>color/colour, learned/learnt,</b> and <b>toward/towards</b>. Typically, the spelling of&nbsp;words like these only varies by&nbsp;one or&nbsp;two letters. In&nbsp;the interest of&nbsp;consistency and clarity, you should use the spelling that will be&nbsp;more familiar to&nbsp;your intended audience.\n",explanation:"<p>The word <b>centralise</b> is&nbsp;a&nbsp;British English spelling. In&nbsp;the interest of&nbsp;consistency, consider replacing it&nbsp;with the American English spelling.\n",examples:'<p><span class="grey">British: I&nbsp;wish you success in&nbsp;all your endeavours.</span><br/><span class="grey">American: I&nbsp;wish you success in&nbsp;all your endeavors.</span><br/><p><span class="grey">British: Sweet yoghurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><span class="grey">American: Sweet yogurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><p><span class="grey">British: Serena moved towards the blinking light.</span><br/><span class="grey">American: Serena moved toward the blinking light.</span><br/>',free:!0,impact:ht.Impact.Critical,highlightBegin:5092,highlightEnd:5102,highlightText:[""],begin:5092,end:5102,replacements:["centralize"],extra_properties:{priority:"2"},cardLayout:{bundle:"Fix spelling and grammar",bundleRank:10,group:"Spelling",rank:10,outcome:"Correctness"},transformJson:$n.create({highlights:[{s:5092,e:5102}],alternatives:m.none}),view:S.all,inline:M.inline},e.mockPlagiarism={id:ht.Id.create(""),rev:0,transforms:[],title:"Citation audit",cost:1,details:"",explanation:"",examples:"",free:!1,impact:ht.Impact.Advanced,hidden:!1,todo:"",minicardTitle:"",cardLayout:{bundle:"Plagiarism",bundleRank:10,group:"Unoriginal content",rank:0,outcome:"Originality"},category:"Plagiarism",categoryHuman:"Unoriginal content",begin:156,end:697,text:"",group:"Plagiarism",pname:"Plagiarism/Plagiarism/UnoriginalContent",point:"UnoriginalContent",highlightBegin:156,highlightEnd:697,highlightText:[""],replacements:[],extra_properties:{},transformJson:$n.create({highlights:[{s:1,e:40}],alternatives:m.none}),view:S.all,inline:M.not_inline},e.mockWithSubalerts={id:ht.Id.create(""),point:"Capitalization",title:"Inconsistent capitalization",details:"<p>For certain words, capitalization preferences can vary between style guides. <i>Internet</i> was once routinely capitalized, for example. However, in recent years many style guides have begun advising writers to lowercase the word: <i>internet</i>. Whether you choose to capitalize a particular term or not, its best to choose one style and use it consistently throughout the same document.\n",explanation:"<p>You wrote <b>Country</b> once and <b>country</b> twice. Both spellings are acceptable, but its best not to switch back and forth. Choose whether or not to capitalize this word throughout your text.\n",examples:'<p><span class="grey">Inconsistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>Internet</b>, too.</span><br/>',todo:"capitalize consistently",minicardTitle:"capitalize consistently",free:!1,hidden:!1,labels:[{label:"Country",matches:1,replacementTexts:["Country"]},{label:"country",matches:2,replacementTexts:["country"]}],highlightText:["Country","country"],cost:1,subalerts:$n.create({highlights:[{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],alternatives:m.some(Ar.Group.fromSubalerts([{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],[ur.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:ur.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:ur.Edit.Type.MAIN}},{insert:"Country",attributes:{type:ur.Edit.Type.MAIN}}]}),ur.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:ur.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:ur.Edit.Type.MAIN}},{insert:"country",attributes:{type:ur.Edit.Type.MAIN}}]})]))}),category:"Inconsistency",text:"",group:"Style",pname:"Style/Inconsistency/Capitalization/Capitalization",rev:0,replacements:[],impact:s.Advanced,extra_properties:{priority:"4"},cardLayout:{bundle:"Keep your style consistent",bundleRank:10,group:"Consistency",rank:160,outcome:"Correctness"},categoryHuman:"Text Inconsistencies",updatable:!0,view:S.all,inline:M.not_inline},e.clearUserTextFields=Re,e.unsafeGetPosition=N,e.unsafeGetTransformJson=P})(ht||(ht={}));var La;(function(e){e.NOT_AUTHORIZED="not_authorized",e.SESSION_NOT_INITIALIZED="session_not_initialized",e.BAD_REQUEST="bad_request",e.BACKEND_ERROR="backend_error",e.AUTH_ERROR="auth_error",e.RUNTIME_ERROR="runtime_error",e.ILLEGAL_DICT_WORD="illegal_dict_word",e.TIMEOUT="timeout",e.CANNOT_FIND_SYNONYM="cannot_find_synonym",e.CANNOT_GET_TEXT_STATS="cannot_get_text_stats",e.GB_RULE_ERROR="gb_rule_error"})(La||(La={}));var Kf;(function(e){e[e.INFO=0]="INFO",e[e.WARN=1]="WARN",e[e.ERROR=2]="ERROR"})(Kf||(Kf={}));var un;(function(e){e.RENDERED="RENDERED",e.IGNORE="IGNORE",e.ADD_TO_DICTIONARY="ADD_TO_DICTIONARY",e.LOOKED="LOOKED",e.ACCEPTED="ACCEPTED",e.CLOSED="CLOSED",e.ACKNOWLEDGED="ACKNOWLEDGED",e.HIDE="HIDE",e.UNLOCK="UNLOCK",e.LIKE="LIKE",e.DISLIKE="DISLIKE",e.WRONG_SUGGESTION="WRONG_SUGGESTION",e.OFFENSIVE_CONTENT="OFFENSIVE_CONTENT",e.EXPANDED="EXPANDED",e.IGNORE_BULK_ACCEPTED="IGNORE_BULK_ACCEPTED",e.USER_SATISFACTION_FEEDBACK="USER_SATISFACTION_FEEDBACK"})(un||(un={}));var zu;(function(e){e.DRILLDOWN="DRILLDOWN"})(zu||(zu={}));var nc;(function(e){e.BULK_ACCEPTED="BULK_ACCEPTED"})(nc||(nc={}));var qa;(function(e){e.LENS_CLOSE="LENS_CLOSE",e.LENS_OPEN="LENS_OPEN",e.DISMISS_BY_LENS="DISMISS_BY_LENS"})(qa||(qa={}));var Ba;(function(e){e.EMOTION_LIKE="EMOTION_LIKE",e.EMOTION_DISLIKE="EMOTION_DISLIKE",e.EMOTION_OFFENSIVE="EMOTION_OFFENSIVE"})(Ba||(Ba={}));var rc;(function(e){e.WritingExpert="WRITING_EXPERT"})(rc||(rc={}));var ic;(function(e){e.AiStudio="AI_STUDIO"})(ic||(ic={}));var ac;(function(e){e.G2_UI="G2_UI"})(ac||(ac={}));var Yr;(function(e){e.Apply="APPLY",e.Revert="REVERT",e.RevertLook="REVERT_LOOK",e.CardPreviewLooked="CARD_PREVIEW_LOOKED",e.Appeared="APPEARED",e.IndividualPreviewLook="INDIVIDUAL_PREVIEW_LOOK",e.IndividualPreviewApply="INDIVIDUAL_PREVIEW_APPLY",e.IndividualPreviewDismiss="INDIVIDUAL_PREVIEW_DISMISS",e.Skipped="SKIPPED"})(Yr||(Yr={}));var $f;(function(e){e.FEED_OPENED="FEED_OPENED",e.FEED_CLOSED="FEED_CLOSED",e.TRY_AGAIN="TRY_AGAIN"})($f||($f={}));var Yf;(function(e){e.FEED_OPENED="FEED_OPENED",e.FEED_CLOSED="FEED_CLOSED",e.TRY_AGAIN="TRY_AGAIN"})(Yf||(Yf={}));var Vu;(function(e){e.EMOTION_SENTENCE_LIKE="EMOTION_SENTENCE_LIKE",e.EMOTION_SENTENCE_DISLIKE="EMOTION_SENTENCE_DISLIKE"})(Vu||(Vu={}));var uc;(function(e){e.RECHECK_SHOWN="RECHECK_SHOWN"})(uc||(uc={}));var pi;(function(e){e.SYNONYM_ACCEPTED="SYNONYM_ACCEPTED",e.SYNONYM_DISMISSED="SYNONYM_DISMISSED"})(pi||(pi={}));var Ku;(function(e){e.MUTE="MUTE",e.UNMUTE="UNMUTE"})(Ku||(Ku={}));var ja;(function(e){e.AUTOCORRECT_ACCEPT="AUTOCORRECT_ACCEPT",e.AUTOCORRECT_DISMISS="AUTOCORRECT_DISMISS",e.AUTOCORRECT_REPLACE="AUTOCORRECT_REPLACE"})(ja||(ja={}));var Fi;(function(e){e.COMPLETION_SHOWN="COMPLETION_SHOWN",e.COMPLETION_IGNORED="COMPLETION_IGNORED",e.COMPLETION_ACCEPTED="COMPLETION_ACCEPTED",e.COMPLETION_REJECTED="COMPLETION_REJECTED"})(Fi||(Fi={}));var Ui;(function(e){e.AUTOAPPLY_TRIGGERED="AUTOAPPLY_TRIGGERED",e.AUTOAPPLY_LOOKED="AUTOAPPLY_LOOKED",e.AUTOAPPLY_REVERTED="AUTOAPPLY_REVERTED",e.AUTOAPPLY_ACCEPT="AUTOAPPLY_ACCEPT",e.AUTOAPPLY_AFFECTED_BY_TEXTCHANGE="AUTOAPPLY_AFFECTED_BY_TEXTCHANGE"})(Ui||(Ui={}));var oc;(function(e){e.SNIPPET_ACCEPTED="SNIPPET_ACCEPTED"})(oc||(oc={}));var cc;(function(e){e.ASSISTANT_OPENED="ASSISTANT_OPENED"})(cc||(cc={}));var Jf;(function(e){e.ACCEPTED="ACCEPTED",e.DISMISSED="DISMISSED"})(Jf||(Jf={}));var Qf;(function(e){var t=function(r){return r===un.IGNORE||r===un.OFFENSIVE_CONTENT||r===un.WRONG_SUGGESTION||r===un.ADD_TO_DICTIONARY||r===un.LIKE||r===un.DISLIKE||r===un.ACKNOWLEDGED||r===un.HIDE};e.willRemoveAlert=t})(Qf||(Qf={}));var Xf;(function(e){e.Inline="inline",e.Hover="hover",e.Click="click",e.SidebarPriority="sidebar-priority",e.Sidebar="sidebar",e.Vbar="vbar",e.UnderlineWithTeaser="underline_with_teaser"})(Xf||(Xf={}));var $u;(function(e){e.Context="context",e.GnarContainerId="gnar_containerId"})($u||($u={}));var Zf;(function(e){e.likelyToBeReadTakeaway="LikelyToRead",e.unlikelyToBeReadTakeaway="NotLikelyToRead"})(Zf||(Zf={}));var Ga=300,xf;(function(e){var t=function(r,i,a){var u=function(o,l){return Math.max(Math.trunc(o/l),ew(o))};return di.mapNTimes(u(r,2),function(o){return di.mapNTimes(u(i,3),function(l){return{value:Math.random()*a,alertIds:[],footprint:"".concat(o*100+l)}})})};e.generatePoints=t})(xf||(xf={}));var Yu;(function(e){(function(t){t.create=function(n){return n.toString()}})(e.Id||(e.Id={}))})(Yu||(Yu={}));var lc;(function(e){e.NotFixed="NOT_FIXED"})(lc||(lc={}));var es;(function(e){e.is=function(t){return function(n){return n.check===t}}})(es||(es={}));var ts;(function(e){var t=function(){for(var a=arguments.length,u=new Array(a),o=0;o<a;o++)u[o]=arguments[o];return function(l){return u.some(function(f){return f===l.kind})}},n=function(a){var u;return!!(!((u=a.outcomeScores)===null||u===void 0)&&u.GeneralScore)},r=function(a){return!!a.scoreStatus};e.is=t,e.isUserFeedbackWithGeneralScore=n,e.isUserFeedbackWithScoreStatus=r})(ts||(ts={}));to();var jC=Me(ui()),Hr=Me(kn()),_o=Me(it());to();var fr=Me(kn()),yo=Me(it()),Ha;(function(e){var t=e.transformPosition=function(n,r){var i=ht.Position.rebase(n,r);return(n.updatable===!0?ht.Position.isSquashed(i):!ht.Position.hasEqualLength(n,i))?fr.none:fr.some(Kt.update(n,i))};e.transformAlertChanged=function(n,r){if(r.delta.ops.length===0)return fr.some(Kt.update(n,{rev:r.revision}));if(n.transformJson!==void 0){var i=$n.rebase(n.transformJson,r.delta);return $n.isSquashed(i)?fr.none:fr.some(Kt.update(n,{transformJson:i,rev:r.revision}))}else return fr.some(n)},e.transformAlert=function(n,r){if(r.delta.ops.length===0)return fr.some(Kt.update(n,{rev:r.revision}));var i=(0,yo.pipe)(ht.hasPosition(n)?t(n,r.delta):fr.some(n),fr.map(function(a){return Kt.update(a,{rev:r.revision})}));return(0,yo.pipe)(i,fr.chain(ht.matchBy(fr.some,function(a){var u=$n.rebase(a.transformJson,r.delta);return(a.updatable===!0?$n.isSquashed(u):$n.isValidAfterTransform(a.transformJson,u)!==!0)?fr.none:fr.some(Kt.update(a,{transformJson:u}))},function(a){var u=$n.rebase(a.subalerts,r.delta);return $n.isSquashed(u)?fr.none:fr.some(Kt.update(a,{subalerts:u}))})))},e.transformAttentionHeatmap=function(n,r){var i=function(o){return o.map(function(l){return qi.Range.rebase(l,r.delta)})},a=i(n.update),u=a.filter(qi.Range.isSquashed).map(function(o){return o.id});return Kt.update(n,{rev:r.revision,add:i(n.add).filter((0,yo.not)(qi.Range.isSquashed)),update:a.filter((0,yo.not)(qi.Range.isSquashed)),remove:Dr(n.remove).concat(Dr(u))})}})(Ha||(Ha={}));function GC(e){for(var t=0,n=e.length,r,i,a=0;a<n;a++){if(r=e.charCodeAt(a),r>=55296&&r<57344&&r<56320&&a+1<n&&(i=e.charCodeAt(a+1),i>=56320&&i<57344)){t+=4,a++;continue}t+=r<128?1:r<2048?2:3}return t}function HC(e,t){var n=e.charCodeAt(t),r=e.charCodeAt(t+1);return n>=55296&&n<57344&&r>=56320&&r<57344}function Sp(e){return GC(e)/1e3}function zC(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;bt(n<t,"padding must be less than the max message size");var r=KC(e.length*3);if(r+n<t)return[e];var i=Sp(e);if(i<t-n)return[e];for(var a=Math.max(2,Math.floor(VC(t-n)/3)),u=Math.ceil(e.length/a),o=new Array(u),l=0,f=0;l<e.length;){var h=HC(e,l+a-1),d=h?a-1:a;o[f++]=e.substr(l,d),l+=d}return o}var VC=function(e){return e*1e3},KC=function(e){return e/1e3},Sr;(function(e){var t=function(o){return o.kind==="change"},n=function(o){return o.kind==="change_chunked"},r=function(o){return o.kind==="cmd"},i=function(o){return o.kind==="externalCmd"},a=function(o){return o.kind==="cmdIncRevision"};e.isChange=Xa(t,n),e.isFullChange=t,e.isChunkedChange=n,e.isCmd=r,e.isExternalCmd=i,e.isCmdIncRevision=a})(Sr||(Sr={}));var $C=100,YC=.1,JC=function(){function e(t,n,r,i,a){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:$C,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:YC,l=this;Zt(this,e),T(this,"_shouldIncreaseRevision",void 0),T(this,"_acceptHandler",void 0),T(this,"_dropHandler",void 0),T(this,"_stateChangeHandler",void 0),T(this,"_idGenerator",void 0),T(this,"_maxMessageSizeKb",void 0),T(this,"_messagePaddingKb",void 0),T(this,"_log",void 0),T(this,"_changes",void 0),T(this,"_staged",void 0),T(this,"_stagedOperationId",void 0),T(this,"_ackedRevisions",void 0),T(this,"_revision",void 0),T(this,"_stagedAmount",void 0),T(this,"transformChangeAgainstQueue",void 0),T(this,"_split",void 0),T(this,"_incRevision",void 0),T(this,"_acceptMessage",void 0),T(this,"_dropMessages",void 0),T(this,"_updateCheckedTextSize",void 0),this._shouldIncreaseRevision=t,this._acceptHandler=n,this._dropHandler=r,this._stateChangeHandler=i,this._idGenerator=a,this._maxMessageSizeKb=u,this._messagePaddingKb=o,this._log=Nn.Logging.getLogger("coreclients.capi.queue",Cn.LogLevel.DEBUG),this._changes=[],this._staged=[],this._stagedOperationId=null,this._stagedAmount=0,this.transformChangeAgainstQueue=function(f){var h=l._getQueuedDeltaAndLatestRevision(f.rev);return Ha.transformAlertChanged(f,h)},this._split=function(f){var h=JSON.stringify([f.delta]);return l._log.trace("change delta string",{deltasStr:h,size:Sp(h)}),zC(h,l._maxMessageSizeKb,l._messagePaddingKb)},this._incRevision=function(){return l._revision===void 0?l._revision=0:l._revision+=1},this._acceptMessage=function(f){l._updateCheckedTextSize(f),l._acceptHandler(f)},this._dropMessages=function(f,h){f.forEach(l._updateCheckedTextSize),l._dropHandler(f,h)},this._updateCheckedTextSize=function(f){Sr.isChange(f)?l._changeStagedAmount(-f.change.amount):(f.kind!=="externalCmd"&&l._shouldIncreaseRevision(f.cmd)||f.kind==="externalCmd"&&f.incrementsRevision)&&l._changeStagedAmount(-Ga)},this._log.debug("capi queue created",{maxMessageSizeKb:this._maxMessageSizeKb,messagePaddingKb:this._messagePaddingKb}),this.clear("init")}return mn(e,[{key:"pushChanges",value:function(n){var r=this,i=(0,_o.pipe)(this._tail(),Hr.filter(Sr.isChange));return(0,_o.pipe)(i,Hr.fold(function(){return r._log.trace("pushChanges() adding new change to queue"),r._enqueueChange(n,r._split(n))},function(a){r._log.trace("pushChanges() composing with latest change");var u=a.change.compose(n),o=r._split(u);if(r._replaceChange(r._changes.length-1,u,o),u.isEmpty===!0){var l=r._changes.pop();r._stateChangeHandler(r.isEmpty,r.isStaging),setTimeout(function(){return r._acceptMessage(l)},0)}return a.id}))}},{key:"pushCommand",value:function(n){var r=this._idGenerator();return this._shouldIncreaseRevision(n)?(this._changeStagedAmount(Ga),this._changes.push({kind:"cmdIncRevision",cmd:n,id:r,rev:this._incRevision()})):this._changes.push({kind:"cmd",cmd:n,id:r,rev:this.localRevision}),this._stateChangeHandler(this.isEmpty,this.isStaging),r}},{key:"pushExternalCommand",value:function(n,r){var i=this,a=this._idGenerator(),u=!1,o=r({id:a,sessionId:n,currentRevision:this.localRevision,nextRevision:function(){return u=!0,i._incRevision()}});u&&this._changeStagedAmount(Ga);var l=this.localRevision;return this._changes.push({kind:"externalCmd",cmd:o,id:a,rev:l,incrementsRevision:u}),this._stateChangeHandler(this.isEmpty,this.isStaging),a}},{key:"isStaging",get:function(){return this._staged.length>0}},{key:"isEmpty",get:function(){return this._changes.length===0}},{key:"hasCommitedChanges",get:function(){return this._changes.length>0}},{key:"localRevision",get:function(){return this._revision!==void 0?this._revision:0}},{key:"stagedAmount",get:function(){return this._stagedAmount}},{key:"hasChanges",get:function(){return this._changes.some(Sr.isChange)}},{key:"size",get:function(){return this._changes.length}},{key:"poll",value:function(){var n=this;return bt(this._stagedOperationId===null,"Should not be in staging mode"),(0,_o.pipe)(Hr.fromNullable(this._changes.shift()),Hr.map(function(r){return!Sr.isCmd(r)&&!(Sr.isExternalCmd(r)&&!r.incrementsRevision)&&n._staged.push(r),n._stagedOperationId=r.id,n._stateChangeHandler(n.isEmpty,n.isStaging),r}))}},{key:"shift",value:function(){var n=Hr.fromNullable(this._changes.shift());return this._stateChangeHandler(this.isEmpty,this.isStaging),n}},{key:"peek",value:function(){return this.isEmpty?Hr.none:Hr.fromNullable(this._changes[0])}},{key:"ackOperation",value:function(n){bt(!!this._stagedOperationId&&n===this._stagedOperationId,"Cannot ack operation by wrong id. Expected: '".concat(this._stagedOperationId,", got: '").concat(n,"'")),this._stagedOperationId=null}},{key:"ackRevision",value:function(n){this._ackedRevisions.add(n),this._cleanStaged()}},{key:"transformAlertAgainstQueue",value:function(n){var r=this._getQueuedDeltaAndLatestRevision(n.rev);return Ha.transformAlert(n,r)}},{key:"transformAttentionHeatmapAgainstQueue",value:function(n){var r=this._getQueuedDeltaAndLatestRevision(n.rev);return Ha.transformAttentionHeatmap(n,r)}},{key:"clear",value:function(n){var r=Dr(this._changes).concat(Dr(this._staged));this._changes=[],this._staged=[],this._stagedOperationId=null,this._ackedRevisions=new Set,this._revision=void 0,r.length>0&&this._dropMessages(r,n),this._stateChangeHandler(this.isEmpty,this.isStaging)}},{key:"_tail",value:function(){return this.isEmpty?Hr.none:Hr.fromNullable(this._changes[this._changes.length-1])}},{key:"_enqueueChange",value:function(n,r){var i=this,a,u=this._incRevision();if(this._changeStagedAmount(n.amount),r.length===1)a=this._idGenerator(),this._changes.push({kind:"change",change:n,id:a,rev:u,deltasString:r[0]});else{this._log.trace("change is larger than maximum allowed size, splitting to chunks",r.length);var o=r.map(function(l){return{id:i._idGenerator(),chunk:l}});a=this._idGenerator(),this._changes.push({kind:"change_chunked",change:n,id:a,rev:u,chunks:o})}return this._stateChangeHandler(this.isEmpty,this.isStaging),a}},{key:"_replaceChange",value:function(n,r,i){var a=this,u=this._changes[n];bt(Sr.isChange(u),"queued change should exist");var o=u;this._changeStagedAmount(-o.change.amount+r.amount),i.length>1?this._changes[n]=Pt(pt({},o),{kind:"change_chunked",chunks:i.map(function(l){return{id:a._idGenerator(),chunk:l}})}):this._changes[n]=Pt(pt({},o),{kind:"change",change:r,deltasString:i[0]})}},{key:"_cleanStaged",value:function(){for(;this._staged[0]!==void 0&&this._ackedRevisions.has(this._staged[0].rev);){var n=this._staged.shift();this._ackedRevisions.delete(n.rev),this._stateChangeHandler(this.isEmpty,this.isStaging),this._acceptMessage(n)}}},{key:"_changeStagedAmount",value:function(n){this._stagedAmount+=n}},{key:"_getQueuedDeltaAndLatestRevision",value:function(n){var r=this._staged.filter(function(i){return i.rev>n}).concat(this._changes).filter(Sr.isChange);return{delta:Xt.squash(r.map(function(i){return i.change.delta})),revision:(0,_o.pipe)(jC.last(r),Hr.map(function(i){return i.rev}),Hr.getOrElse(function(){return n}))}}},{key:"toJSON",value:function(){return{isEmpty:this.isEmpty,isStaging:this.isStaging,changes:this._changes.map(function(n){return Sr.isChange(n)?{kind:"change",prevLen:n.change.prevLen,changeDiff:n.change.length,changeAmount:n.change.amount}:n})}}}]),e}(),Ci=Me(kn()),Lh=Me(it()),ns;(function(e){var t=function(r){return Pt(pt({},r),{suggestionsCard:(0,Lh.pipe)(Ci.fromNullable(r.suggestionsCard),Ci.map(function(i){return{title:i.title,miniTitle:Ci.fromNullable(i.miniTitle)}})),successCard:(0,Lh.pipe)(Ci.fromNullable(r.successCard),Ci.map(function(i){return{title:i.title,miniTitle:Ci.fromNullable(i.miniTitle)}})),defaultCard:Pt(pt({},r.defaultCard),{miniTitle:Ci.fromNullable(r.defaultCard.miniTitle),details:Ci.fromNullable(r.defaultCard.details)})})};e.fromRaw=t})(ns||(ns={}));var Ii;(function(e){var t=function(u,o){var l=o/60,f=Na.secondsToTime(u/l);return f.s=f.h>0&&f.m>10?0:Math.floor(f.s),f},n=function(u){return t(u,250)},r=function(u){return t(u,130)},i=function(u,o){var l={words:u,chars:o,sentences:Math.floor(u/5),readingTime:{},speakingTime:{},uniqueWords:Math.random()*40,uniqueWordsIndex:Math.random()*100,rareWords:Math.random()*20,rareWordsIndex:Math.random()*100,wordLength:5.4,wordLengthIndex:Math.random()*100,sentenceLength:16.7,sentenceLengthIndex:Math.random()*100,readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return l.readingTime=Ii.calculateReadingTime(l.words),l.speakingTime=Ii.calculateSpeakingTime(l.words),l};e.calculateReadingTime=n,e.calculateSpeakingTime=r,e.generateStats=i})(Ii||(Ii={}));var mt;(function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.WAITING_FOR_OT=3]="WAITING_FOR_OT",e[e.WAITING_FOR_ACK=4]="WAITING_FOR_ACK",e[e.SESSION_INBOUND=5]="SESSION_INBOUND",e[e.ANY=6]="ANY",e[e.CLOSED=7]="CLOSED"})(mt||(mt={}));var En;(function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.WAIT=3]="WAIT",e[e.READY=4]="READY",e[e.SEND=5]="SEND",e[e.ACK=6]="ACK",e[e.CLOSE=7]="CLOSE"})(En||(En={}));var rs;(function(e){e.getUnsafe=function(){return(0,an.flow)(an.unsafeCoerce,wn.right)}})(rs||(rs={}));var QC=function(e){if(typeof e=="string")return e;if(e.action==="submit_ot"&&"deltasString"in e){var t=Pt(pt({},e),{deltasString:void 0,deltas:void 0}),n=JSON.stringify(t);return n.substring(0,n.length-1)+',"deltas": '.concat(e.deltasString,"}")}else return JSON.stringify(e)},XC=5,Ap=function(){function e(t,n,r,i){var a=t.context,u=a===void 0?void 0:a,o=t.dialect,l=o===void 0?"undefined":o,f=t.client,h=t.clientVersion,d=h===void 0?"":h,_=t.extDomain,R=_===void 0?void 0:_,A=t.sendDelay,E=A===void 0?50:A,g=t.docid,I=g===void 0?"":g,C=t.docIdIsTransient,k=C===void 0?void 0:C,L=t.clientSupports,q=L===void 0?[]:L,G=t.clientConfigs,D=G===void 0?void 0:G,Y=t.isDemoDoc,fe=Y===void 0?!1:Y,$=t.maxMessageSizeKb,x=t.messagePaddingKb,Re=t.startSessionOptions,N=Re===void 0?{}:Re,P=t.idGenerator,s=P===void 0?new Fh(jf,0,!1):P,S=t.shouldSendFeedback,M=S===void 0?an.constTrue:S,c=this;Zt(this,e),T(this,"_connectionOptions",void 0),T(this,"_log",void 0),T(this,"_fsm",void 0),T(this,"_idGenerator",void 0),T(this,"_shouldSendFeedback",void 0),T(this,"_queueIdGenerator",void 0),T(this,"_changesQueue",void 0),T(this,"_conn",void 0),T(this,"_timeout",void 0),T(this,"_textSize",void 0),T(this,"_handler",void 0),T(this,"_context",void 0),T(this,"_dialect",void 0),T(this,"_client",void 0),T(this,"_clientVersion",void 0),T(this,"_extDomain",void 0),T(this,"_sendDelay",void 0),T(this,"_docid",void 0),T(this,"_docIdIsTransient",void 0),T(this,"_asyncChecksManager",void 0),T(this,"_clientSupports",void 0),T(this,"_clientConfigs",void 0),T(this,"_isDemoDoc",void 0),T(this,"_startSessionOptions",void 0),T(this,"_reconnectInfo",void 0),T(this,"_lastPublishedReconnectInfo",void 0),T(this,"_cachedSessionUuid",void 0),T(this,"_pingsMap",void 0),T(this,"_validateAlert",void 0),T(this,"_externalHandlers",void 0),T(this,"_statsRequester",void 0),T(this,"_synonymsRequester",void 0),T(this,"_snippetsRequester",void 0),T(this,"_getTextRequester",void 0),T(this,"_commandsRequester",void 0),T(this,"_externalCommandsRequester",void 0),T(this,"_otChunksNotifier",void 0),T(this,"resetReconnectInfo",void 0),T(this,"reportLensFeedback",void 0),T(this,"reportSystemFeedback",void 0),T(this,"reportEmotionFeedback",void 0),T(this,"reportWritingExpertFeedback",void 0),T(this,"reportAiStudioFeedback",void 0),T(this,"reportG2UxInteractionFeedback",void 0),T(this,"reportTouchTypistPreviewFeedbacks",void 0),T(this,"reportTouchTypistApplyFeedback",void 0),T(this,"reportTouchTypistRevertFeedback",void 0),T(this,"reportTouchTypistAppearedFeedback",void 0),T(this,"reportTouchTypistCardPreviewLookedFeedback",void 0),T(this,"reportTouchTypistRevertLookFeedback",void 0),T(this,"reportEmotionSentenceFeedback",void 0),T(this,"reportMuteFeedback",void 0),T(this,"reportAutocorrectFeedback",void 0),T(this,"reportAutocompleteFeedback",void 0),T(this,"reportAutocompleteRejectedFeedback",void 0),T(this,"reportSnippetFeedback",void 0),T(this,"requestSynonyms",void 0),T(this,"requestSnippets",void 0),T(this,"shortenItSubmit",void 0),T(this,"requestDocStats",void 0),T(this,"enablePlagiarismSearch",void 0),T(this,"disablePlagiarismSearch",void 0),T(this,"enableWritingExpert",void 0),T(this,"disableWritingExpert",void 0),T(this,"enableAudienceAdapt",void 0),T(this,"disableAudienceAdapt",void 0),T(this,"enableAiStudio",void 0),T(this,"disableAiStudio",void 0),T(this,"realtimeProofitSubmit",void 0),T(this,"realtimeProofitCancel",void 0),T(this,"submitRecipients",void 0),T(this,"submitScoreSurveyResult",void 0),T(this,"submitSurvey",void 0),T(this,"ping",void 0),T(this,"canGoIdle",void 0),T(this,"isStable",void 0),T(this,"updateContextInfo",void 0),T(this,"published",void 0),T(this,"registerExternalMessageHandler",void 0),T(this,"enqueueExternalCommand",void 0),T(this,"_handleReconnectInfo",void 0),T(this,"_setReconnectInfo",void 0),T(this,"_setReconnecInfoForNewSession",void 0),T(this,"_resetIdGenerators",void 0),T(this,"_cleanupOldSession",void 0),T(this,"_supportsReconnect",void 0),T(this,"_initReconnection",void 0),T(this,"_startSession",void 0),T(this,"_handleNewSession",void 0),T(this,"_handleExistingSession",void 0),T(this,"_handleStart",void 0),T(this,"_waitForSubmitOt",void 0),T(this,"_sessionInbound",void 0),T(this,"_canSend",void 0),T(this,"_send",void 0),T(this,"_processQueueMessage",void 0),T(this,"_resetTimer",void 0),T(this,"_onQueueMsgAccepted",void 0),T(this,"_onQueueStateChanged",void 0),T(this,"_onQueueMsgDropped",void 0),this._connectionOptions=i,this._log=Nn.Logging.getLogger("coreclients.capi",Cn.LogLevel.TRACE),this._queueIdGenerator=new Fh(jf,0,!1),this._textSize=0,this._asyncChecksManager=new ZC,this._cachedSessionUuid=null,this._pingsMap=new Map,this._validateAlert=is.validate,this._externalHandlers=[],this._statsRequester=new Sa(15e3,"CAPI.DocStats"),this._synonymsRequester=new Sa(15e3,"CAPI.Synonyms"),this._snippetsRequester=new Sa(15e3,"CAPI.Snippets"),this._getTextRequester=new Sa(15e3,"CAPI.Text"),this._commandsRequester=new Sa(15e3,"CAPI.Commands"),this._externalCommandsRequester=new Sa(5e3,"CAPI.ExternalCommands"),this._otChunksNotifier=new qC(15e3,"CAPI.OT.Chunks"),this.resetReconnectInfo=function(){c._reconnectInfo=void 0,c._handleReconnectInfo()},this.reportLensFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:Q,lens:V},c._commandsRequester)},this.reportSystemFeedback=function(V){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V},c._commandsRequester)},this.reportEmotionFeedback=function(V,Q,me){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:Q,emotion:V,subtype:me},c._commandsRequester)},this.reportWritingExpertFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,weStage:Q},c._commandsRequester)},this.reportAiStudioFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,aiStudioStage:Q},c._commandsRequester)},this.reportG2UxInteractionFeedback=function(V,Q,me){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,userAction:me,vbarId:Q},c._commandsRequester)},this.reportTouchTypistPreviewFeedbacks=function(V,Q,me){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,touchTypistId:Q,previewId:me},c._commandsRequester)},this.reportTouchTypistApplyFeedback=function(V,Q,me){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,touchTypistId:Q,location:me},c._commandsRequester)},this.reportTouchTypistRevertFeedback=function(V,Q,me,Ie){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,touchTypistId:Q,location:Ie,revertId:me},c._commandsRequester)},this.reportTouchTypistAppearedFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,touchTypistId:Q},c._commandsRequester)},this.reportTouchTypistCardPreviewLookedFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,touchTypistId:Q},c._commandsRequester)},this.reportTouchTypistRevertLookFeedback=function(V,Q,me){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,touchTypistId:Q,revertId:me},c._commandsRequester)},this.reportEmotionSentenceFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:Q,alertId:V},c._commandsRequester)},this.reportMuteFeedback=function(V,Q,me){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:me,userMuteScope:Q,userMuteCategories:V},c._commandsRequester)},this.reportAutocorrectFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,before:Q.before,after:Q.after,context:Q.context,expected:Q.expected},c._commandsRequester)},this.reportAutocompleteFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,alertId:Q.alertId,begin:Q.begin,end:Q.end,context:Q.context,before:Q.before,after:Q.after,text:Q.text,pname:Q.pname},c._commandsRequester)},this.reportAutocompleteRejectedFeedback=function(V){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:Fi.COMPLETION_REJECTED,alertId:V.alertId,begin:V.begin,end:V.end,context:V.context,before:V.before,after:V.after,text:V.text,pname:V.pname,subtype:V.subtype},c._commandsRequester)},this.reportSnippetFeedback=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"feedback",type:V,snippetUuid:Q},c._commandsRequester)},this.requestSynonyms=function(V,Q){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"synonyms",begin:V,token:Q},c._synonymsRequester)},this.requestSnippets=function(V){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"get_snippets_list",institutionId:V},c._snippetsRequester)},this.shortenItSubmit=function(V){return(0,an.pipe)(pn.rightIO(function(){c._log.trace("shorten-it submit")}),pn.chain(function(){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"shorten_it_submit",alertId:V},c._commandsRequester)}))},this.requestDocStats=this._sendLazyInbandCommand(function(){return{id:c._idGenerator.newId(),action:"get_text_stats"}},this._statsRequester),this.enablePlagiarismSearch=(0,an.pipe)(pn.rightIO(function(){c._log.trace("Enable plagiarism search"),c._asyncChecksManager.resetCheck("plagiarism")}),pn.chain(function(){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!0}},c._commandsRequester)})),this.disablePlagiarismSearch=this._sendLazyInbandCommand(function(){return{id:c._idGenerator.newId(),action:"toggle_checks",checks:{plagiarism:!1}}},this._commandsRequester),this.enableWritingExpert=(0,an.pipe)(pn.rightIO(function(){c._log.trace("Enable writing expert"),c._asyncChecksManager.resetCheck("writing_expert_check")}),pn.chain(function(){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"toggle_checks",checks:{writing_expert_check:!0}},c._commandsRequester)})),this.disableWritingExpert=this._sendLazyInbandCommand(function(){return{id:c._idGenerator.newId(),action:"toggle_checks",checks:{writing_expert_check:!1}}},this._commandsRequester),this.enableAudienceAdapt=function(V){return(0,an.pipe)(pn.rightIO(function(){c._log.trace("Enable audience adapt"),c._asyncChecksManager.resetCheck("audience_adapt")}),pn.chain(function(){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"toggle_checks",checks:{audience_adapt:!0},params:{audience_adapt:{persona_id:V}}},c._commandsRequester)}))},this.disableAudienceAdapt=this._sendLazyInbandCommand(function(){return{id:c._idGenerator.newId(),action:"toggle_checks",checks:{audience_adapt:!1}}},this._commandsRequester),this.enableAiStudio=function(V){return(0,an.pipe)(pn.rightIO(function(){c._log.trace("Enable AI Studio"),c._asyncChecksManager.resetCheck("ai_studio")}),pn.chain(function(){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"toggle_checks",checks:{ai_studio:!0},params:{ai_studio:{playbook_id:V}}},c._commandsRequester)}))},this.disableAiStudio=this._sendLazyInbandCommand(function(){return{id:c._idGenerator.newId(),action:"toggle_checks",checks:{ai_studio:!1}}},this._commandsRequester),this.realtimeProofitSubmit=function(V){return c._log.trace("Submit real-time Proofit job"),c._sendInbandCommand({id:c._idGenerator.newId(),action:"realtime_proofit_submit",reconnect:V},c._commandsRequester)},this.realtimeProofitCancel=(0,an.pipe)(pn.rightIO(function(){c._log.trace("Cancel real-time Proofit job")}),pn.chain(function(){return c._sendInbandCommand({id:c._idGenerator.newId(),action:"realtime_proofit_cancel"},c._commandsRequester)})),this.submitRecipients=function(V){return c._log.trace("Submit recipients for better suggestions!"),c._sendInbandCommand({id:c._idGenerator.newId(),action:"submit_recipients",recipients:V},c._commandsRequester)},this.submitScoreSurveyResult=function(V,Q,me){return c._log.trace("Submit score survey result:",{placement:V,score:Q,detailed_placement:me}),c._sendInbandCommand({id:c._idGenerator.newId(),action:"submit_survey_result",type:Ki.Survey.Data.ScoreSurvey.type,placement:V,score:Q,detailed_placement:me},c._commandsRequester)},this.submitSurvey=function(V){return c._log.trace("Submit survey result:",pt({},V)),c._sendInbandCommand(pt({id:c._idGenerator.newId(),action:"submit_survey_result"},V),c._commandsRequester)},this.ping=this._sendLazyInbandCommand(function(){return{id:c._idGenerator.newId(),action:"ping"}},this._commandsRequester),this.canGoIdle=function(){return c._changesQueue.isEmpty&&!c._changesQueue.isStaging},this.isStable=function(V){var Q=V===void 0?c._idGenerator.id:c._idGenerator.id+1,me=V===void 0||V.action!=="error";return me&&Q>XC},this.updateContextInfo=function(V){return c._log.trace("Update thread context info"),c._sendInbandCommand({id:c._idGenerator.newId(),action:"update_context_info",docContext:V},c._commandsRequester)},this.published=function(){return c._log.trace("Send published event"),c._sendInbandCommand({id:c._idGenerator.newId(),action:"published"},c._commandsRequester)},this.registerExternalMessageHandler=function(V){c._externalHandlers.push(V)};var p=this;this.enqueueExternalCommand=function(V){return Hn(function(){var Q,me,Ie,Ee;return Un(this,function(Ge){switch(Ge.label){case 0:return Q=p._connectionOptions.getSessionId(),p._canSend()?[3,1]:[2,wn.left(new Ta("Cannot send commands as WS connection is down"))];case 1:return Bt.isNone(Q)?[2,wn.left(new Ta("Unexpected empty sessionId, while WS connection is up"))]:[3,2];case 2:return me=p._changesQueue.isEmpty,Ie=p._changesQueue.pushExternalCommand(Q.value,V),Ee=p._externalCommandsRequester.watchRequest(Ie),me?(p._log.trace("enqueueExternalCommand: Q.isEmpty, sending command immediately"),p._send()):(p._log.trace("enqueueExternalCommand: Q.notEmpty, delaying sending command"),p._trySend(p._fsm.current)),[4,Ee.then(wn.map(function(){return Ie}))];case 3:return[2,Ge.sent()];case 4:return[2]}})})},this._handleReconnectInfo=function(){var V,Q;!(!((V=c._changesQueue)===null||V===void 0)&&V.isEmpty)||!((Q=c._changesQueue)===null||Q===void 0)&&Q.isStaging?c._lastPublishedReconnectInfo!==void 0&&(c._lastPublishedReconnectInfo=void 0,c._handler.onReconnectInfo({kind:"reconnect_info_updated"})):c._lastPublishedReconnectInfo!==c._reconnectInfo&&(c._handler.onReconnectInfo({kind:"reconnect_info_updated",reconnectInfo:c._reconnectInfo}),c._lastPublishedReconnectInfo=c._reconnectInfo)},this._setReconnectInfo=function(V){c._reconnectInfo=V,c._handleReconnectInfo()},this._setReconnecInfoForNewSession=function(){c._cachedSessionUuid!==null?c._setReconnectInfo({sessionUuid:c._cachedSessionUuid}):c.resetReconnectInfo()},this._resetIdGenerators=function(){c._idGenerator.reset(),c._queueIdGenerator.reset(),c._queueIdGenerator.newId()},this._cleanupOldSession=function(V){c._clear(V),c._commandsRequester.clear(V),c._externalCommandsRequester.clear(V),c._statsRequester.clear(V),c._synonymsRequester.clear(V),c._getTextRequester.clear(V)},this._supportsReconnect=function(){return c._clientSupports.includes(tc.reconnect)};var U=this;this._initReconnection=Hn(function(){var V,Q;return Un(this,function(me){switch(me.label){case 0:return U._supportsReconnect()?[3,1]:(U._resetIdGenerators(),U._cachedSessionUuid!==null?[2,{sessionUuid:U._cachedSessionUuid}]:[2,void 0]);case 1:return U._reconnectInfo?[3,7]:U._cachedSessionUuid===null?[3,2]:(U._setReconnectInfo({sessionUuid:U._cachedSessionUuid}),[3,6]);case 2:return typeof U._startSessionOptions!="function"?[3,4]:[4,U._startSessionOptions()];case 3:return Q=me.sent(),[3,5];case 4:Q=U._startSessionOptions,me.label=5;case 5:V=Q,V.reconnectInfo&&U._setReconnectInfo(V.reconnectInfo),me.label=6;case 6:return U._resetIdGenerators(),[3,8];case 7:(!U._changesQueue.isEmpty||U._changesQueue.isStaging)&&(U._setReconnecInfoForNewSession(),U._resetIdGenerators()),me.label=8;case 8:return[2,U._reconnectInfo]}})});var j=this;this._startSession=Hn(function(){var V,Q,me,Ie;return Un(this,function(Ee){switch(Ee.label){case 0:return j._log.trace("_startSession"),typeof j._startSessionOptions!="function"?[3,2]:[4,j._startSessionOptions()];case 1:return Q=Ee.sent(),[3,3];case 2:Q=j._startSessionOptions,Ee.label=3;case 3:return V=Q,[4,j._initReconnection()];case 4:return me=Ee.sent(),Ie=pt(Pt(pt({id:j._idGenerator.newId(),action:"start",client:j._client.type,clientSubtype:j._client.sub,clientVersion:j._clientVersion,dialect:j._dialect,docid:j._docid,docIdIsTransient:j._docIdIsTransient,extDomain:j._extDomain,documentContext:j._context&&Ua.serialize(j._context),clientSupports:j._clientSupports,isDemoDoc:j._isDemoDoc},me!==null?{reconnectInfo:me}:{}),{clientConfigs:j._clientConfigs}),V),[4,j._fsm.event(En.SEND)];case 5:return Ee.sent(),j._sendMessage(Ie),[2]}})}),this._handleNewSession=function(V){c._reconnectInfo!==void 0&&c._log.debug("Exited old session: ".concat(c._reconnectInfo.sessionUuid)),c._log.debug("Starting new session: ".concat(V)),c._fsm.is(mt.CONNECTED)&&(c._cleanupOldSession("new session"),c._fsm.event(En.WAIT)),c._setReconnectInfo({sessionUuid:V,messagesReceived:1,messagesSent:1})},this._handleExistingSession=function(V){c._log.debug("Continuing session: ".concat(V)),c._fsm.is(mt.CONNECTED)?(c._fsm.event(En.READY),c._handler.onReady({kind:"ready"})):c._fsm.event(En.ACK)},this._handleStart=function(V){c._log.trace("_handleStart"),c._fsm.event(En.ACK);var Q=V.userMutedCategories,me=V.allowedFeatures,Ie=V.domainCategory,Ee=V.domainName,Ge=V.isEnterprise,Ke=V.defaultDocumentContext,K=V.sessionUuid,pe=V.reconnectedInfo,De=V.cheetahState,Ze=c._reconnectInfo===void 0||K!==c._reconnectInfo.sessionUuid;(c._cachedSessionUuid===null||c._supportsReconnect())&&(c._cachedSessionUuid=K),Ze?c._handleNewSession(K):c._handleExistingSession(K),c._handler.onSessionStarted({kind:"session_started",userMutedCategories:Q,allowedFeatures:me,domainCategory:Ie,domainName:Ee,isEnterprise:Ge,cheetahState:De,defaultDocumentContext:(0,an.pipe)(Ke,Bt.fromNullable,Bt.chain(Ua.parseDefault)),sessionUuid:K,reconnectedInfo:pe,isNewSession:Ze,maxWsMessageSize:V.maxWsMessageSize})},this._waitForSubmitOt=function(){c._handler.onWaitForOT({kind:"wait_for_ot"})},this._sessionInbound=function(V){c._handler.onSessionInbound({kind:"session_inbound"}),c._trySend(V)},this._canSend=function(){return!c._fsm.is(mt.DISCONNECTED,mt.CONNECTING,mt.CLOSED)};var ae=this;this._send=Hn(function(){var V,Q;return Un(this,function(me){switch(me.label){case 0:return ae._resetTimer(),ae._fsm.is(mt.SESSION_INBOUND)&&ae._changesQueue.hasCommitedChanges?[4,ae._fsm.event(En.SEND)]:[3,6];case 1:me.sent(),me.label=2;case 2:return me.trys.push([2,4,,5]),V=ae._changesQueue.poll(),[4,(0,an.pipe)(V,Bt.map(function(){var Ie=Hn(function(Ee){var Ge;return Un(this,function(Ke){switch(Ke.label){case 0:return Ge=Sr.isChange(Ee),[4,ae._sendMessage(ae._processQueueMessage(Ee))];case 1:return Ke.sent(),Ge?[3,3]:(ae._log.trace("message sent is not Change, firing CAPI FSM ACK immediately"),[4,ae._fsm.event(En.ACK)]);case 2:Ke.sent()?(ae._changesQueue.ackOperation(Ee.id),Ee.kind==="externalCmd"&&ae._externalCommandsRequester.onValue(Ee.id)):ae._log.debug("can not do ack for non change msg because we are in unexpected state",{state:mt[ae._fsm.current]}),Ke.label=3;case 3:return[2]}})});return function(Ee){return Ie.apply(this,arguments)}}()),Bt.getOrElse(function(){return Promise.resolve()}))];case 3:return me.sent(),[3,5];case 4:return Q=me.sent(),ae._log.error("unexpected error on sending",Q),[3,5];case 5:return[3,7];case 6:ae._trySend(ae._fsm.current),me.label=7;case 7:return[2]}})}),this._processQueueMessage=function(V){return Sr.isChange(V)?c._processSubmitOTMessage(V):V.kind==="externalCmd"?V.cmd:"rev"in V.cmd?Pt(pt({},V.cmd),{rev:V.rev,id:V.id}):Pt(pt({},V.cmd),{id:V.id})},this._resetTimer=function(){c._timeout!==void 0&&(clearTimeout(c._timeout),c._timeout=void 0)},this._onQueueMsgAccepted=function(V){c._handler.onQueueMsgAccepted({kind:"queue_msg_accepted",message:V})},this._onQueueStateChanged=function(){c._handleReconnectInfo()},this._onQueueMsgDropped=function(V,Q){V.filter(Sr.isCmd).forEach(function(me){var Ie=new sl("message dropped from queue:"+Q);switch(me.cmd.action){case"ping":case"option":case"toggle_checks":case"set_context":case"feedback":c._commandsRequester.onError(me.id,Ie);break;case"get_text_stats":c._statsRequester.onError(me.id,Ie);break;case"synonyms":c._synonymsRequester.onError(me.id,Ie);break;case"get_debug_info":c._getTextRequester.onError(me.id,Ie);break}}),c._handler.onQueueMsgDropped({kind:"queue_msgs_dropped",messages:V,reason:Q})},this._handler=n,this._context=u,this._dialect=l,this._client=f,this._clientVersion=d,this._extDomain=R,this._sendDelay=E,this._docid=I,this._docIdIsTransient=k,this._clientSupports=q,this._clientConfigs=D,this._isDemoDoc=fe,this._startSessionOptions=N,this._idGenerator=s,this._shouldSendFeedback=M,this._changesQueue=new JC(this._shouldHaveSeparateRevision,this._onQueueMsgAccepted,this._onQueueMsgDropped,this._onQueueStateChanged,function(){return c._queueIdGenerator.newId()},$,x),this._fsm=new bp("capi",mt.DISCONNECTED,mt.CLOSED).with(mt.ANY).parentOf(mt.CONNECTED,mt.CONNECTING,mt.DISCONNECTED,mt.WAITING_FOR_OT,mt.WAITING_FOR_ACK,mt.SESSION_INBOUND).from(mt.ANY).to(mt.CLOSED).on(En.CLOSE).from(mt.DISCONNECTED).to(mt.CONNECTING).on(En.CONNECT).from(mt.CONNECTING).to(mt.CONNECTING).on(En.CONNECT).from(mt.CONNECTING).to(mt.CONNECTED).on(En.CONNECTED).from(mt.CONNECTED,mt.WAITING_FOR_OT,mt.WAITING_FOR_ACK,mt.SESSION_INBOUND,mt.CONNECTING).to(mt.DISCONNECTED).on(En.DISCONNECT).from(mt.CONNECTED).to(mt.WAITING_FOR_OT).on(En.WAIT).from(mt.CONNECTED,mt.WAITING_FOR_OT).to(mt.SESSION_INBOUND).on(En.READY).from(mt.SESSION_INBOUND).to(mt.WAITING_FOR_ACK).on(En.SEND).from(mt.WAITING_FOR_ACK).to(mt.SESSION_INBOUND).on(En.ACK).on(mt.CONNECTED,this._startSession).on(mt.WAITING_FOR_OT,this._waitForSubmitOt).on(mt.SESSION_INBOUND,function(V){return c._sessionInbound(V.to)}),this._log.isEnabled(Cn.LogLevel.TRACE)&&this._fsm.verbose(mt,En),r.onConnecting(function(){return c._handleConnecting()}).onConnect(function(V){return c._handleConnect(V)}).onDisconnect(function(V){return c._handleDisconnect(V)}).onMessage(function(V,Q){return c._handleMessage(Q)}),lo("closeCapiSocket",function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1e3,Q=arguments.length>1?arguments[1]:void 0;c._conn!==null&&c._conn._ws.close(V,Q)}),lo("capiState",this),lo("capiReadyToReceive",function(){return c._fsm.is(mt.SESSION_INBOUND)&&c._changesQueue.isEmpty}),lo("capiRuntimeError",function(){var V=yi.ins(0,"test",100500);c.pushChanges(V)})}return mn(e,[{key:"pushChanges",value:function(n){return this._pushChangesTask(n)}},{key:"checkingState",get:function(){return this._checkedTextSize===0||this._textSize===1?"idle":this._checkedTextSize>Ga&&this._textSize>Ga/3?"full":"checking"}},{key:"asyncChecksState",get:function(){return this._asyncChecksManager.getState()}},{key:"setSessionOption",value:function(n){switch(n.kind){case $u.Context:return this.setContext(n.context);case $u.GnarContainerId:return this.setOption(n.kind,n.id);default:return hn(n)}}},{key:"setContext",value:function(n){return this._log.debug("setContext(...)"),this._context=n,this._sendInbandCommand({action:"set_context",id:this._idGenerator.newId(),rev:-1,documentContext:Ua.serialize(n)},this._commandsRequester)}},{key:"setOption",value:function(n,r){return this._log.trace("Set option "+r),this._sendInbandCommand({id:this._idGenerator.newId(),action:"option",name:n,value:r},this._commandsRequester)}},{key:"sendUserAction",value:function(n,r){var i=this;return this._log.debug("sendUserAction",{componentId:n,userAction:r}),this._canSend()?(0,an.pipe)(this._connectionOptions.getSessionId(),wn.fromOption(function(){return new Error("Can not sendUserAction because sessionId is empty")}),pn.fromEither,pn.chain(function(a){return(0,an.pipe)(i._sendTrackedInbandCommand({id:i._idGenerator.newId(),action:"user_action",sessionId:a,componentId:n,userAction:r},i._commandsRequester),pn.map(Kt.pick("queuedId")))})):pn.left(new Ta("Can not sendUserAction because connection is down"))}},{key:"sendDebugReport",value:function(n,r){return this._log.debug("sendDebugReport",{componentId:n,errorMessage:r}),this._sendInbandCommand({id:this._idGenerator.newId(),action:"debug_report",type:"sdui_decode_error",componentId:n,errorMessage:r},this._commandsRequester)}},{key:"sendFeedback",value:function(n){if(this._log.debug("sendFeedback",n.kind),!this._shouldSendFeedback(n))return this._log.debug("Skip sending ".concat(n.kind," based on CAPI Client configured, see 'shouldSendFeedback'")),pn.of(void 0);switch(n.kind){case un.ACCEPTED:return this._sendAlertAcceptedFeedback(n);case un.IGNORE:return this.reportIgnoreFeedback(n.id,n.reason,n.subtype,n.pnameQualifier,n.drilldownSuggestionIds);case un.ACKNOWLEDGED:return this.reportAcknowledgeFeedback(n.id,n.subtype,n.text,n.pnameQualifier);case un.ADD_TO_DICTIONARY:case un.RENDERED:case un.LOOKED:case un.CLOSED:case un.LIKE:case un.DISLIKE:case un.WRONG_SUGGESTION:case un.OFFENSIVE_CONTENT:case un.EXPANDED:case un.IGNORE_BULK_ACCEPTED:case un.HIDE:case un.UNLOCK:return this.reportAlertFeedback(n.id,n.kind,n.subtype);case un.USER_SATISFACTION_FEEDBACK:return this.reportAlertSatisfactionFeedback(n.id,n.kind,n.userSatisfactionDescription,n.subtype);case zu.DRILLDOWN:return this._reportDrilldownFeedback(n.id,n.alternativeIndex,n.drilldownSuggestionIds,n.subtype);case pi.SYNONYM_ACCEPTED:return this.reportSynonymFeedback(n.id,n.kind,n.replacementText,n.subtype);case pi.SYNONYM_DISMISSED:return this.reportSynonymFeedback(n.id,n.kind,n.subtype);case Ba.EMOTION_LIKE:case Ba.EMOTION_DISLIKE:case Ba.EMOTION_OFFENSIVE:return this.reportEmotionFeedback(n.emotionName,n.kind,n.subtype);case Vu.EMOTION_SENTENCE_LIKE:case Vu.EMOTION_SENTENCE_DISLIKE:return this.reportEmotionSentenceFeedback(n.id,n.kind);case Ku.MUTE:case Ku.UNMUTE:return this.reportMuteFeedback(n.userMuteCategories,n.userMuteScope,n.kind);case uc.RECHECK_SHOWN:return this.reportSystemFeedback(n.kind);case qa.LENS_CLOSE:case qa.LENS_OPEN:case qa.DISMISS_BY_LENS:return this.reportLensFeedback(n.lensName,n.kind);case ja.AUTOCORRECT_ACCEPT:case ja.AUTOCORRECT_DISMISS:case ja.AUTOCORRECT_REPLACE:return this.reportAutocorrectFeedback(n.kind,n);case Fi.COMPLETION_REJECTED:return this.reportAutocompleteRejectedFeedback(n);case Fi.COMPLETION_ACCEPTED:case Fi.COMPLETION_IGNORED:case Fi.COMPLETION_SHOWN:return this.reportAutocompleteFeedback(n.kind,n);case nc.BULK_ACCEPTED:return this.reportAlertsBatchFeedback(n.alertIds,n.kind,n.subtype);case oc.SNIPPET_ACCEPTED:return this.reportSnippetFeedback(n.kind,n.snippetUuid);case cc.ASSISTANT_OPENED:return this._reportAssistantFeedback(n.kind);case Ui.AUTOAPPLY_TRIGGERED:case Ui.AUTOAPPLY_LOOKED:case Ui.AUTOAPPLY_REVERTED:case Ui.AUTOAPPLY_ACCEPT:case Ui.AUTOAPPLY_AFFECTED_BY_TEXTCHANGE:return this._reportAutoapplyFeedback(n.alertId,n.kind,n.subtype);case rc.WritingExpert:return this.reportWritingExpertFeedback(n.kind,n.weStage);case ic.AiStudio:return this.reportAiStudioFeedback(n.kind,n.aiStudioStage);case ac.G2_UI:return this.reportG2UxInteractionFeedback(n.kind,n.vbarId,n.userAction);case Yr.IndividualPreviewApply:case Yr.IndividualPreviewDismiss:case Yr.IndividualPreviewLook:return this.reportTouchTypistPreviewFeedbacks(n.kind,n.touchTypistId,n.previewId);case Yr.Apply:return this.reportTouchTypistApplyFeedback(n.kind,n.touchTypistId,n.location);case Yr.Revert:return this.reportTouchTypistRevertFeedback(n.kind,n.touchTypistId,n.revertId,n.location);case Yr.Appeared:return this.reportTouchTypistAppearedFeedback(n.kind,n.touchTypistId);case Yr.CardPreviewLooked:return this.reportTouchTypistCardPreviewLookedFeedback(n.kind,n.touchTypistId);case Yr.RevertLook:return this.reportTouchTypistRevertLookFeedback(n.kind,n.touchTypistId,n.revertId);default:return hn(n)}}},{key:"requestWritingExpert",value:function(){return this._sendInbandCommand({id:this._idGenerator.newId(),correlationId:"QWEQWEQWE",action:"disposable_cheetah:invokeCommand",generationMode:"rewrite",textScope:{start:0,end:100},command:{kind:"predefinedAction",actionIdentifier:{kind:"label",value:"Improve it"}}},this._commandsRequester)}},{key:"sendTouchTypistCommand",value:function(n){return this._sendInbandCommand(n,this._commandsRequester)}},{key:"_reportDrilldownFeedback",value:function(n,r,i,a){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:zu.DRILLDOWN,alertId:n,alternativeIndex:r,drilldownSuggestionIds:i,subtype:a},this._commandsRequester)}},{key:"_reportAssistantFeedback",value:function(n){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:n},this._commandsRequester)}},{key:"_sendAlertAcceptedFeedback",value:function(n){return"replacementText"in n?this._reportTextAlertAcceptedFeedback(n.id,n.replacementText,n.subtype,n.reason,n.gbPrompt):"alternativeIndex"in n?this._reportTransformJsonAlertAcceptedFeedback(n.id,n.alternativeIndex,n.gapValue,n.subtype,n.drilldownSuggestionIds,n.dismissedTransformGroups,n.reason,n.gbPrompt):hn(n)}},{key:"reportIgnoreFeedback",value:function(n,r,i,a,u){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:un.IGNORE,alertId:n,userReason:r,subtype:i,pnameQualifier:a,drilldownSuggestionIds:u},this._commandsRequester)}},{key:"reportAcknowledgeFeedback",value:function(n,r,i,a){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:un.ACKNOWLEDGED,alertId:n,subtype:r,pnameQualifier:a,text:i},this._commandsRequester)}},{key:"reportAlertFeedback",value:function(n,r,i){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:r,alertId:n,subtype:i},this._commandsRequester)}},{key:"reportAlertSatisfactionFeedback",value:function(n,r,i,a){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:r,alertId:n,userSatisfactionDescription:i,subtype:a},this._commandsRequester)}},{key:"reportAlertsBatchFeedback",value:function(n,r,i){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:r,alertIds:n,subtype:i},this._commandsRequester)}},{key:"_reportTextAlertAcceptedFeedback",value:function(n,r,i,a,u){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:un.ACCEPTED,alertId:n,text:r,subtype:i,userReason:a,gbPrompt:u},this._commandsRequester)}},{key:"_reportTransformJsonAlertAcceptedFeedback",value:function(n,r,i,a,u,o,l,f){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:un.ACCEPTED,alertId:n,alternativeIndex:r,gapValue:i,subtype:a,drilldownSuggestionIds:u,dismissedTransformGroups:o,userReason:l,gbPrompt:f},this._commandsRequester)}},{key:"reportSynonymFeedback",value:function(n,r,i,a){switch(r){case pi.SYNONYM_ACCEPTED:var u={id:this._idGenerator.newId(),action:"feedback",type:pi.SYNONYM_ACCEPTED,text:i,alertId:n,subtype:a};return this._sendInbandCommand(u,this._commandsRequester);case pi.SYNONYM_DISMISSED:return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:pi.SYNONYM_DISMISSED,alertId:n,subtype:a},this._commandsRequester);default:return hn(r)}}},{key:"_reportAutoapplyFeedback",value:function(n,r,i){return this._sendInbandCommand({id:this._idGenerator.newId(),action:"feedback",type:r,alertId:n,subtype:i},this._commandsRequester)}},{key:"isClosed",value:function(){return this._fsm.is(mt.CLOSED)}},{key:"close",value:function(n){var r=this;return Hn(function(){var i;return Un(this,function(a){switch(a.label){case 0:return r.isClosed()?(r._log.trace("close: CAPI already closed, skipping"),[2]):(r._log.trace("close: closing CAPI"),[4,r._fsm.event(En.CLOSE,n)]);case 1:return i=a.sent(),i?r._clear(n):r._log.error("Cannot go to CLOSED state"),[2]}})})()}},{key:"getText",value:function(){return pn.toPromise(this._sendInbandCommand({id:this._idGenerator.newId(),action:"get_debug_info"},this._getTextRequester))}},{key:"_handleConnecting",value:function(){var n=this;return Hn(function(){var r;return Un(this,function(i){switch(i.label){case 0:return[4,n._fsm.event(En.CONNECT)];case 1:return r=i.sent(),r||n._log.error("Can not enter CONNECTING state",{fsmState:mt[n._fsm.current]}),[2]}})})()}},{key:"_handleConnect",value:function(n){var r=this;return Hn(function(){var i,a,u;return Un(this,function(o){switch(o.label){case 0:r._log.trace("_handleConnect(".concat(mt[r._fsm.current],"): received new ws connection")),r._conn=n,i=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r._fsm.event(En.CONNECTED)];case 2:return a=o.sent(),a||(i="failed to switch to CONNECTED state"),[3,4];case 3:return u=o.sent(),i=u,[3,4];case 4:if(i)throw r._log.warn("Connection cannot be finalized.",i),i;return[2]}})})()}},{key:"_handleDisconnect",value:function(n){var r=this;return Hn(function(){var i,a;return Un(this,function(u){switch(u.label){case 0:return r._log.trace("_handleDisconnect(".concat(mt[r._fsm.current],")"),n),[4,r._fsm.event(En.DISCONNECT,n.reason)];case 1:return i=u.sent(),a=r._fsm.is(mt.CLOSED)?Cn.LogLevel.WARN:Cn.LogLevel.ERROR,i||r._log.log(a,"Can not enter DISCONNECTED state",{reason:n,fsmState:mt[r._fsm.current]}),[2]}})})()}},{key:"_handleMessage",value:function(n){var r,i,a=(i=this._clientConfigs)===null||i===void 0||(r=i.sdui)===null||r===void 0?void 0:r.config;if(this._reconnectInfo!==void 0){var u,o=(u=this._reconnectInfo.messagesReceived)!==null&&u!==void 0?u:0;this._setReconnectInfo(Pt(pt({},this._reconnectInfo),{messagesReceived:o+1}))}if(this._handler.onMessageReceived({kind:"message_received",message:n}),this._log.isEnabled(Cn.LogLevel.TRACE)&&this._log.trace("Message <<< ".concat(n.action,", id: ").concat(n.id)),this._externalHandlers.some(function(C){return C(n)===ec.Result.STOP_HANDLING})){this._log.trace("Message was handled by external handler",n.action);return}switch(n.action){case"start":this._handleStart(n);break;case"alert":this._handleAlert(n);break;case"remove":this._handler.onRemove({kind:"alert_removed",alertId:ht.Id.create(n.id),hint:(0,an.pipe)(Bt.fromNullable(n.hint),Bt.filter(function(C){return C===lc.NotFixed})),mergedIn:(0,an.pipe)(Bt.fromNullable(n.mergedIn),Bt.map(function(C){return ht.Id.create(C)}))});break;case"alert_changes":this._handleAlertChange(n);break;case"finished":this._handleFinish(n);break;case"async_check_finished":this._handleAsyncCheckFinished(n);break;case"async_check_progress":this._handleAsyncCheckProgress(n);break;case"complete":this._handleComplete(n);break;case"heatmap":this._handleAttentionHeatmap(n);break;case"attention_widget":this._handleAttentionInfo(n);break;case"submit_ot":{this._handleSubmitOtAck(n);break}case"submit_ot_chunk":{this._handleSubmitOtChunkAck(n);break}case"feedback":case"option":case"toggle_checks":case"set_context":case"submit_recipients":case"user_action":case"debug_report":this._handleCommandAck(n);break;case"perfstats":this._handleAck(n);break;case"error":this._handleError(n);break;case"pong":this._handlePong(n);break;case"synonyms":this._handleSynonyms(n);break;case"get_snippets_list_response":this._handleSnippets(n);break;case"text_stats":this._handleTextStats(n);break;case"text_maps":this._handleTextMaps(n);break;case"text_info":this._handleTextInfo(n);break;case"emotions":this._handleEmotions(n);break;case"debug_info":this._handler.onDebugInfo({kind:"debug_info",info:n}),this._getTextRequester.onValue(n.id,n.text);break;case"realtime_proofit_availability":this._handleProofitAvailability(n);break;case"realtime_proofit_submit_resp":this._handleProofitSubmit(n);break;case"realtime_proofit_progress":this._handleProofitProgress(n);break;case"realtime_proofit_cancel_resp":this._handleProofitCancelled(n);break;case"shorten_it_submit":this._handleCommandAck(n);break;case"shorten_it_finished":this._handleShortenItFinished(n);break;case"update_context_info":this._handleCommandAck(n);break;case"published":this._handlePublishedAck(n);break;case"sdui:add":var l,f,h,d;((f=a)===null||f===void 0||(l=f[n.viewId])===null||l===void 0?void 0:l.dslParser)!=null?this._handleSDUIAdd(n,(d=a)===null||d===void 0||(h=d[n.viewId])===null||h===void 0?void 0:h.dslParser):this._handleUnexpectedSDUIMessage(n);break;case"sdui:update":var _,R,A,E;((R=a)===null||R===void 0||(_=R[n.viewId])===null||_===void 0?void 0:_.dslParser)!=null?this._handleSDUIUpdate(n,(E=a)===null||E===void 0||(A=E[n.viewId])===null||A===void 0?void 0:A.dslParser):this._handleUnexpectedSDUIMessage(n);break;case"sdui:remove":var g,I;((I=a)===null||I===void 0||(g=I[n.viewId])===null||g===void 0?void 0:g.dslParser)!=null?this._handleSDUIRemove(n):this._handleUnexpectedSDUIMessage(n);break;case"submit_survey_result":this._handleCommandAck(n);break;case"gb_rule_created":this._handler.onGbRuleCreated({kind:"gb_rule_created",categoryTitle:n.categoryTitle,styleGuideId:n.styleGuideId,descriptionLength:n.descriptionLength});break;case"show_survey":this._handleShowSurvey(n);break;case"g_debug_event":this._log.debug("g_debug_event",{message:n});break;case"trigger_touch_typist":this._handleTouchTypistTriggerResponse(n);break;case"touch_typist_action":break;default:this._log.error("Unknown message",{message:n}),hn(n)}}},{key:"_handleAlert",value:function(n){var r=this;this._handler.beforeAlert({kind:"before_alert"});var i=ht.fromAlertMessage(n);this._log.trace("_handleAlert",n.id);var a=this._changesQueue.transformAlertAgainstQueue(i);(0,an.pipe)(a,wn.fromOption(function(){return new Error("alert ".concat(i.id," position overlap: ").concat(JSON.stringify(i).substring(0,200)))}),wn.chain(this._validateAlert),wn.fold(function(u){r._log.isEnabled(Cn.LogLevel.TRACE)&&r._log.trace("OT ALERT: discarding alert due to error",u)},function(u){r._handler.onAlert({kind:"alert_received",alert:u})}))}},{key:"_handleAlertChange",value:function(n){return(0,an.pipe)({kind:"alert_changed",alertId:ht.Id.create(n.id),rev:n.rev,extraProperties:n.extra_properties&&ht.parseExtraProperties(n.extra_properties),transformJson:n.transformJson&&bi.toAbs(n.transformJson),muted:n.muted},this._changesQueue.transformChangeAgainstQueue,Bt.fold(an.constVoid,this._handler.onChange))}},{key:"_handleComplete",value:function(n){this._handler.onAutoComplete({kind:"autocomplete_received",complete:n})}},{key:"_handleAttentionHeatmap",value:function(n){var r=qi.fromAttentionHeatmapMessage(n);this._handler.onAttentionHeatmap({kind:"attention_heatmap_received",heatmap:this._changesQueue.transformAttentionHeatmapAgainstQueue(r)})}},{key:"_handleAttentionInfo",value:function(n){if(n.version===2){var r;this._handler.onAttentionInfo({kind:"attention_info_received",rev:n.rev,wordsCount:n.wordsCount,checklist:n.checklist.map(ns.fromRaw),headerMessage:n.headerMessage,predictionMessage:n.predictionMessage,hidden:(r=n.hidden)!==null&&r!==void 0?r:!1})}else this._log.error("Got an unsupported attention_widget message version",n)}},{key:"_handleTextMaps",value:function(n){var r=n.score,i=n.generalScore,a=n.textMaps,u={score:r,generalScore:i,textMaps:a};this._handler.onTextMaps({kind:"text_maps",data:u})}},{key:"_handleTextInfo",value:function(n){var r={wordsCount:n.wordsCount,charsCount:n.charsCount-1,readingTime:Ii.calculateReadingTime(n.wordsCount),speakingTime:Ii.calculateSpeakingTime(n.wordsCount),readabilityScore:n.readabilityScore,messages:Bt.fromNullable(n.messages),sessionStats:n.sessionStats};this._handler.onTextInfo({kind:"text_info",data:r})}},{key:"_handleEmotions",value:function(n){this._handler.onEmotions({kind:"emotions",emotions:n.emotions,institutionLogo:n.institutionLogo,brandTonesEnabled:n.brandTonesEnabled,brandTonesConfigured:n.brandTonesConfigured,hidden:n.hidden})}},{key:"_handleProofitAvailability",value:function(n){this._handler.onProofitAvailability({id:n.id,kind:"realtime_proofit_availability",available:n.available,quota:n.quota})}},{key:"_handleProofitSubmit",value:function(n){this._handler.onProofitSubmit({id:n.id,kind:"realtime_proofit_submit_resp",status:n.status})}},{key:"_handleProofitProgress",value:function(n){n.status==="in_progress"?this._handler.onProofitProgress(pt({kind:"realtime_proofit_in_progress"},n)):n.status==="completed"?this._handler.onProofitCompleted(pt({kind:"realtime_proofit_completed"},n)):n.status==="error"?this._handler.onProofitProgressProblem(pt({kind:"realtime_proofit_progress_error"},n)):n.status==="rejected"&&this._handler.onProofitProgressProblem(pt({kind:"realtime_proofit_progress_rejected"},n))}},{key:"_handleProofitCancelled",value:function(n){this._handler.onProofitCancelled({id:n.id,kind:"realtime_proofit_cancel_resp",refunded:n.refunded,quota:n.quota})}},{key:"_handleShortenItFinished",value:function(n){this._handler.onShortenItFinished({kind:"shorten_it_finished",alertId:ht.Id.create(n.alertId)})}},{key:"_handlePublishedAck",value:function(n){this._handleCommandAck(n),this._handler.onPublishedAck({kind:"published_ack",survey:n.survey})}},{key:"_handleShowSurvey",value:function(n){this._handler.onShowSurvey({kind:"show_survey",survey:n.survey})}},{key:"_handleFinish",value:function(n){this._log.trace("_handleFinish"),this._handler.onBeforeFinish({kind:"before_finish"}),this._changesQueue.ackRevision(n.rev);var r=this._createFinishEvent(n);this._handler.onFinish(r)}},{key:"_handleAsyncCheckProgress",value:function(n){this._handler.onAsyncCheckProgress({kind:"async_check_progress",check:n.check,revision:n.rev,progress:n.progress})}},{key:"_handleAsyncCheckFinished",value:function(n){this._handler.onBeforeAsyncCheckFinish({kind:"before_async_check_finish"}),this._asyncChecksManager.finish(n),this._handler.onAsyncCheckFinish({kind:"async_check_finished",check:n.check,revision:n.rev,outcomeScores:n.outcomeScores})}},{key:"_handleSubmitOtAck",value:function(n){this._log.trace("<<< Acknowledge for "+n.action,{message:n}),this._fsm.is(mt.WAITING_FOR_ACK)?(this._handleAck(n),this._changesQueue.ackOperation(n.id),this._fsm.event(En.ACK)):this._log.error("Got an unexpected submit_ot ack",{curentState:mt[this._fsm.current]})}},{key:"_sendNextOtChunk",value:function(n){var r=this;if(n.chunks.length===0){this._log.trace("no more chunks, sending final submit_ot message");var i=this;return pn.tryCatch(Hn(function(){return Un(this,function(u){switch(u.label){case 0:return[4,i._sendMessage(n.submitOt)];case 1:return[2,u.sent()]}})}),function(u){return new Error("failed to send final submit_ot message: ".concat(u))})}else{this._log.trace("sending next submit_ot chunk");var a=this;return(0,an.pipe)(pn.tryCatch(Hn(function(){var u;return Un(this,function(o){switch(o.label){case 0:return u=n.chunks.splice(0,1)[0],[4,a._sendMessage(u)];case 1:return o.sent(),[2,u]}})}),function(u){return new Error("failed to send next chunk message: ".concat(u))}),pn.chain(function(u){return r._waitForOtChunkAck(u,n)}))}}},{key:"_waitForOtChunkAck",value:function(n,r){var i=this;return(0,an.pipe)(this._otChunksNotifier.waitFor(n.id,r),pn.chain(this._sendNextOtChunk.bind(this)),pn.mapLeft(function(a){return i._log.error("failed sending OT chunks",a),a}))}},{key:"_handleSubmitOtChunkAck",value:function(n){this._log.trace("<<< Acknowledge for "+n.action,{message:n}),this._otChunksNotifier.notify(n.id)}},{key:"_handleCommandAck",value:function(n){this._log.trace("<<< Acknowledge for "+n.action,{message:n}),this._commandsRequester.onValue(n.id),this._handleAck(n)}},{key:"_handleAck",value:function(n){(0,an.pipe)(xC(n,this._asyncChecksManager),Bt.fold(an.constNull,this._handler.onAck))}},{key:"_handlePong",value:function(n){var r=window.performance.now();this._handler.onPong({kind:"pong",latency:(0,an.pipe)(Bt.fromNullable(this._pingsMap.get(n.id)),Bt.map(function(i){return r-i}))})}},{key:"_handleSynonyms",value:function(n){var r=this._parseSynonymsResult(n);this._handler.onSynonyms({kind:"synonyms",synonyms:r,word:n.token,position:n.synonyms.pos}),this._synonymsRequester.onValue(n.id,r)}},{key:"_handleTouchTypistTriggerResponse",value:function(n){this._handler.onTouchTypistTriggerResponse(pt({kind:"trigger_touch_typist"},n))}},{key:"_handleSnippets",value:function(n){this._handler.onSnippets({kind:"get_snippets_list_response",snippets:n}),this._snippetsRequester.onValue(n.id,n)}},{key:"_handleTextStats",value:function(n){n.readingTime=Ii.calculateReadingTime(n.words),n.speakingTime=Ii.calculateSpeakingTime(n.words),this._handler.onStats({kind:"stats",stats:n}),this._statsRequester.onValue(n.id,n)}},{key:"_handleSDUIAdd",value:function(n,r){var i=this;(0,an.pipe)(this._toSduiIdDslSchemaTuple(n,r),Bt.map(function(a){var u=Ri(a,2),o=u[0],l=u[1];return i._handler.onSDUI({kind:"sdui_add",sdui:l,sduiRootId:o,rev:n.rev})}))}},{key:"_handleSDUIRemove",value:function(n){this._handler.onSDUI({kind:"sdui_remove",sduiRootId:Yu.Id.create(n.sduiRootId)})}},{key:"_handleSDUIUpdate",value:function(n,r){var i=this;(0,an.pipe)(this._toSduiIdDslSchemaTuple(n,r),Bt.map(function(a){var u=Ri(a,2),o=u[0],l=u[1];return i._handler.onSDUI({kind:"sdui_update",sdui:l,sduiRootId:o,rev:n.rev})}))}},{key:"_handleUnexpectedSDUIMessage",value:function(n){var r;if(!(!((r=this._clientConfigs)===null||r===void 0)&&r.sdui)){this.sendDebugReport(String(n.id),"got unexpected sdui message without sending sduiConfig")();return}this._log.error("skip ".concat(n.id," due to not configured dslParser."))}},{key:"_toSduiIdDslSchemaTuple",value:function(n,r){var i=n.sdui,a=n.rev,u=n.id,o=n.sduiRootId,l=this,f=Yu.Id.create(o);return i===void 0?(this.sendDebugReport(String(u),"got unexpected empty sdui content for ".concat(a))(),this._log.error("skip ".concat(u," due to empty sdui content"),{messageId:u,rev:a}),Bt.none):(0,an.pipe)(r(i),wn.fold(function(h){return l.sendDebugReport(String(u),h.message)(),l._log.error("skip ".concat(u," due to incorrect sdui content"),{messageId:u,message:h.message,rawSdui:i,rev:a}),Bt.none},function(h){return Bt.some([f,h])}))}},{key:"_createFinishEvent",value:function(n){return{kind:"finish",revision:n.rev,score:(0,an.pipe)(Bt.fromNullable(n.generalScore),Bt.filter(function(r){return r>=0}),Bt.map(function(r){return{errorRateScore:n.score,rank:r}})),lowestScore:(0,an.pipe)(Bt.fromNullable(n.lowestGeneralScore),Bt.filter(function(r){return r>=0}),Bt.map(function(r){return{errorRateScore:n.score,rank:r}})),scoreStatus:Bt.fromNullable(n.scoresStatus),removed:new Set(n.removed),dialect:n.dialect,outcomeScores:Ki.OutcomeScores.normalize(n.outcomeScores),foreign:n.foreign}}},{key:"_parseSynonymsResult",value:function(n){var r=this,i=function(u){return u.derived},a=function(u){return u.synonyms.meanings.length===0?Bt.none:u.synonyms.meanings.length===1?Bt.some(wn.left(u.synonyms.meanings[0].synonyms.map(i))):Bt.some(wn.right(u.synonyms.meanings.map(function(o){return o.meaning===void 0&&r._log.warn("Absent meaning in synonyms group.",{token:u.token}),{meaning:o.meaning?o.meaning:"",words:o.synonyms.map(i)}})))};return{id:n.id.toString(),originalWord:n.token,synonymsOrGroups:a(n),pname:n.synonyms.pname}}},{key:"_trySend",value:function(n){this._timeout===void 0&&n===mt.SESSION_INBOUND?this._timeout=window.setTimeout(this._send,this._sendDelay):n===mt.WAITING_FOR_OT&&!this._changesQueue.isEmpty?(this._log.trace("_trySend(".concat(mt[n],") moving to READY")),this._fsm.event(En.READY),this._handler.onReady({kind:"ready"})):this._log.trace("_trySend(".concat(mt[n],") send timeout already set or not waiting for ot, ignoring"))}},{key:"_shouldHaveSeparateRevision",value:function(n){return n.action==="set_context"}},{key:"_pushChangesTask",value:function(n){var r=this;this._log.debug("pushChanges(".concat(mt[this._fsm.current],"):"),JSON.stringify(n));var i=this,a=function(){var u=Hn(function(){var o;return Un(this,function(l){switch(l.label){case 0:i._log.debug("pushChanges(".concat(mt[i._fsm.current],"): starting new session")),l.label=1;case 1:return l.trys.push([1,3,,4]),i.resetReconnectInfo(),i._resetIdGenerators(),i._cleanupOldSession("new session started by pushing RESET state"),[4,i._startSession()];case 2:return l.sent(),[2,i._pushChanges(n)];case 3:return o=l.sent(),i._log.warn("pushChanges(".concat(mt[i._fsm.current],"): failed sending start message: "),o),[2,wn.left(o)];case 4:return[2]}})});return function(){return u.apply(this,arguments)}}();return yi.isReset(n)&&this._fsm.is(mt.SESSION_INBOUND,mt.WAITING_FOR_ACK)?(this._log.debug("pushChanges(".concat(mt[this._fsm.current],"): got reset while active session, starting new session")),a):pn.fromIOEitherEager(function(){return r._pushChanges(n)})}},{key:"_pushChanges",value:function(n){var r=this;if(!this._canSend())return this._log.debug("pushChanges: cannot send, rejecting changes",n.kind),wn.left(new Ta("Cannot accepts changes as WS connection is down"));var i=function(a){r._asyncChecksManager.stage(r._changesQueue.localRevision);var u=r._changesQueue.pushChanges(a);return r._textSize=a.prevLen+a.length,r._trySend(r._fsm.current),wn.right(Bt.some(u))};return yi.isDelta(n)?this._fsm.is(mt.WAITING_FOR_OT)?wn.left(new Ip("Capi is waiting for reset change but got a delta, dropping change")):i(n):yi.isReset(n)?i(yi.delta(n.delta)):(this._changesQueue.isEmpty||this.ping(),wn.right(Bt.none))}},{key:"_sendInbandCommand",value:function(n,r){return this._sendLazyInbandCommand(function(){return n},r)}},{key:"_sendTrackedInbandCommand",value:function(n,r){return this._sendLazyTrackedInbandCommand(function(){return n},r)}},{key:"_sendLazyInbandCommand",value:function(n,r){return(0,an.pipe)(this._sendLazyTrackedInbandCommand(n,r),pn.map(Kt.pick("result")))}},{key:"_sendLazyTrackedInbandCommand",value:function(n,r){var i=this;return function(){var a=n();if(i._log.trace("_sendInbandCommand(".concat(mt[i._fsm.current],"): "),a.action),i._canSend()){var u=i._changesQueue.isEmpty,o=i._changesQueue.pushCommand(a),l=r.watchRequest(o);return u?(i._log.trace("_sendInbandCommand: Q.isEmpty, sending command immediately"),i._send()):(i._log.trace("_sendInbandCommand: Q.notEmpty, delaying sending command"),i._trySend(i._fsm.current)),l.then(wn.map(function(f){return{result:f,queuedId:o}}))}else return i._log.debug("_sendInbandCommand: cannot send, rejecting command",a.action),Promise.resolve(wn.left(new Ta("Cannot send commands as WS connection is down")))}}},{key:"_processSubmitOTMessage",value:function(n){if(Sr.isChunkedChange(n)){var r=n.chunks.map(function(u){return{id:u.id,action:"submit_ot_chunk",chunk:u.chunk}}),i=r.splice(0,1)[0],a={chunks:r,submitOt:{id:n.id,action:"submit_ot",rev:n.rev,doc_len:n.change.prevLen,chunked:!0}};return this._waitForOtChunkAck(i,a)(),i}else return{id:n.id,action:"submit_ot",rev:n.rev,doc_len:n.change.prevLen,deltas:[n.change.delta],deltasString:n.deltasString,chunked:!1}}},{key:"_sendMessage",value:function(n){var r=this;this._log.isEnabled(Cn.LogLevel.TRACE)&&this._log.trace("Sending >>>> ".concat(n.action,", id: ").concat(n.id)),this._handler.onMessageSent({kind:"message_sent",message:n}),n.action==="ping"&&this._pingsMap.set(n.id,window.performance.now());var i=UR(this._conn,"_sendMessage should never be called without a connection");return i.send(n).catch(function(a){return r._log.debug("fail on send",a)}).then(function(){if(r._reconnectInfo!==void 0){var a,u=(a=r._reconnectInfo.messagesSent)!==null&&a!==void 0?a:0;r._setReconnectInfo(Pt(pt({},r._reconnectInfo),{messagesSent:u+1}))}})}},{key:"_checkedTextSize",get:function(){return this._changesQueue.stagedAmount}},{key:"_clear",value:function(n){this._log.debug("clearing message queue, reason: "+n),this._pingsMap.clear(),this._changesQueue.isEmpty||this._log.warn("clean queue with messages",{reason:n,queue:this._changesQueue.toJSON()}),this._changesQueue.clear(n),this._externalCommandsRequester.clear(n),this._asyncChecksManager.reset(),this._resetTimer()}},{key:"_handleError",value:function(n){var r=this;return Hn(function(){return Un(this,function(i){switch(n.error){case La.CANNOT_GET_TEXT_STATS:r._statsRequester.onError(n.id,new Error("Server Error"));break;case La.CANNOT_FIND_SYNONYM:r._synonymsRequester.onError(n.id,new Error("can not find synonym"));break;case La.RUNTIME_ERROR:r._fsm.is(mt.WAITING_FOR_ACK)?(r._log.error("Got runtime_error for submit_ot",{message:n}),r._clear("runtime_error on submit_ot")):(r._handler.onError(pt({kind:"error"},n)),r._clear("runtime_error"));break;default:r._handler.onError(pt({kind:"error"},n)),r._log.error("Error",{message:n})}return[2]})})()}}]),e}(),ZC=function(){function e(){Zt(this,e),T(this,"_pendingRevision",void 0),T(this,"_finishedRevisions",void 0),T(this,"_wasChecked",{plagiarism:!1,ai_detector:!1,writing_expert_check:!1,ai_studio:!1,audience_adapt:!1}),T(this,"_toggleChecksRequests",new Map),this.reset()}return mn(e,[{key:"getCheckState",value:function(n){return this._pendingRevision>this._finishedRevisions[n]?this._wasChecked[n]?"checking":"full":"idle"}},{key:"getState",value:function(){return{plagiarism:this.getCheckState("plagiarism"),ai_detector:this.getCheckState("ai_detector"),writing_expert_check:this.getCheckState("writing_expert_check"),ai_studio:this.getCheckState("ai_studio"),audience_adapt:this.getCheckState("audience_adapt")}}},{key:"stage",value:function(n){this._pendingRevision=Math.max(this._pendingRevision,n)}},{key:"finish",value:function(n){this._finishedRevisions[n.check]=Math.max(this._finishedRevisions[n.check],n.rev),this._wasChecked[n.check]=!0}},{key:"reset",value:function(){this._pendingRevision=0,this._finishedRevisions={plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1}}},{key:"resetCheck",value:function(n){this._finishedRevisions[n]=-1}},{key:"pushChecksByMessageId",value:function(n,r){this._toggleChecksRequests.set(n,r)}},{key:"popChecksByMessageId",value:function(n){var r=this._toggleChecksRequests.get(n)||{};return this._toggleChecksRequests.delete(n),r}}]),e}(),xC=function(e,t){switch(e.action){case"option":return Bt.some({kind:"option_ack"});case"set_context":return Bt.some({kind:"set_context_ack",revision:e.rev});case"submit_recipients":return Bt.some({kind:"submit_recipients_ack"});case"toggle_checks":return Bt.some({kind:"toggle_checks_ack",checks:t.popChecksByMessageId(e.id)});case"submit_ot":return Bt.some({kind:"set_context_ack",revision:e.rev});case"feedback":return Bt.some({kind:"feedback_ack",outcomeScores:e.scores?Ki.OutcomeScores.normalize(e.scores):void 0,scoreStatus:e.scoresStatus});case"published":return Bt.some({kind:"published_ack",survey:e.survey});case"submit_survey_result":return Bt.some({kind:"submit_survey_result_ack"});case"submit_ot_chunk":case"shorten_it_submit":case"perfstats":case"user_action":case"debug_report":case"update_context_info":return Bt.none;default:return hn(e)}},is;(function(e){e.validate=function(t){var n=t.extra_properties.drilldownTree;if(n===void 0)return wn.right(t);return(0,an.pipe)(t,wn.fromPredicate(ht.withTransformJson,function(){return r("no transformJSON")}),wn.chain(function(a){var u=a.transformJson.alternatives;return(0,an.pipe)(u,wn.fromOption(function(){return r("no alternatives")}))}),wn.chain(function(a){var u=a.alternatives;return n.length>0&&i(u)(n)?wn.right(t):wn.left(r("incomplete tree"))}));function r(a){return new Error("Incorrect drilldownTree: ".concat(JSON.stringify(t.extra_properties.drilldownTree)," - ").concat(a))}function i(a){return function(u){return u.every(function(o){var l=Ri(o,2),f=l[0],h=l[1];return a[f]!==void 0&&(Gu.isLeaf(h)?!0:i(a)(h))})}}}})(is||(is={}));var eM=5e3,tM=function(){function e(t,n,r){var i=this;Zt(this,e);var a=t.handler,u=t.reconnectHandler,o=u===void 0?Wi.getDefaultReconnect(Wi.ClientType.capi):u,l=t.maxReconnectDelay,f=t.baseReconnectDelay,h=eu(t,["handler","reconnectHandler","maxReconnectDelay","baseReconnectDelay"]);T(this,"_connect",void 0),T(this,"_ws",void 0),T(this,"_log",void 0),T(this,"_contentSource",void 0),T(this,"_onConnectionFailed",void 0),T(this,"_onConnectionSuccess",void 0),T(this,"_capi",void 0),T(this,"_conn",void 0),T(this,"_isIdle",void 0),T(this,"_isStarted",void 0),T(this,"_currentSessionId",void 0),T(this,"_maxWsMessageSize",void 0),T(this,"_handler",void 0),T(this,"_getSessionId",void 0),this._connect=n,this._ws=r,this._log=Nn.Logging.getLogger("coreclients.capi.connection"),this._isIdle=!1,this._isStarted=!1,this._currentSessionId=m.empty(),this._maxWsMessageSize=m.empty(),this._getSessionId=function(){return i._currentSessionId};var d=Pt(pt({},a||{}),{onError:function(R){var A,E,g,I;(A=(E=i)._onConnectionFailed)===null||A===void 0||A.call(E,new Error("Server Error during session start: code(".concat(R.error,") severity(").concat(R.severity,")"))),(I=a)===null||I===void 0||(g=I.onError)===null||g===void 0||g.call(I,R)},onWaitForOT:function(R){var A,E;bt(i._onConnectionSuccess!==void 0&&i._onConnectionFailed!==void 0,"expected initial connect promise to be initialized at this stage"),i._log.trace("sending initial reset Delta to CAPI"),i._capi.pushChanges(i._contentSource())().then(Ph.fold(function(g){i._onConnectionFailed(g),i._onConnectionFailed=void 0},m.fold(Nh.constVoid,function(g){i._onConnectionSuccess(g),i._onConnectionSuccess=void 0}))),(E=a)===null||E===void 0||(A=E.onWaitForOT)===null||A===void 0||A.call(E,R)},onSessionStarted:function(R){var A,E;R.isNewSession||(i._onConnectionSuccess(),i._onConnectionSuccess=void 0),i._currentSessionId=m.some(R.sessionUuid),i._maxWsMessageSize=m.some(R.maxWsMessageSize),(E=a)===null||E===void 0||(A=E.onSessionStarted)===null||A===void 0||A.call(E,R)}});this._handler=Object.assign(new yp,d),this._ws.onMessage(function(R,A){i._capi.isStable(A)&&_.reset()}).onConnecting(function(){i._isIdle=!1}).onConnect(function(){return i._handler.onConnect({kind:"connect"})}).onDisconnect(function(R){if(i._currentSessionId=m.none,!i._capi.isClosed()){var A={canGoIdle:i._capi.canGoIdle(),isStable:i._capi.isStable()};i._log.debug("calling reconnect handler:",A),(0,Nh.pipe)(o(R,_,A),function(E){return i._handler.onDisconnect({kind:"disconnect",reason:R,reconnectCounter:_.retryStatus.iterNumber,reconnectResult:E}),E},Ph.fold(function(E){i._log.warn("error reconnecting, closing CAPI:",E.message),i._capi.close("error reconnecting:"+E.message)},function(E){E.kind==="idle"&&(i._isIdle=!0)}))}});var _=new Wi.ReconnectSchedulerImpl(function(){return i.connect(i._contentSource).then(function(R){var A=Ri(R,2),E=A[0];return A[1],E})},[Wi.defaultRetryPolicy(f,l)]);this._capi=new Ap(h,this._handler,this._ws,{getSessionId:this._getSessionId,getMaxWsMessageSize:function(){return i._maxWsMessageSize}})}return mn(e,[{key:"connect",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this;return Hn(function(){var a;return Un(this,function(u){switch(u.label){case 0:return bt(!i._capi.isClosed(),"cannot connect when CAPI is closed"),r||i._capi.resetReconnectInfo(),i._isIdle=!1,i._isStarted=!0,i._contentSource=n,i._log.trace("connect: initializing new ws connection"),[4,i._connect(i._ws)];case 1:return a=u.sent(),i._conn=a,[2,new Promise(function(o,l){i._onConnectionFailed=l,i._onConnectionSuccess=function(f){return o(f?[a,f]:[a])},setTimeout(function(){return l("failed to reconnect or connect to new CAPI session")},eM)})]}})})()}},{key:"close",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wi.WsCodes.NORMAL_CLOSURE,r=arguments.length>1?arguments[1]:void 0,i=this;return Hn(function(){var a;return Un(this,function(u){switch(u.label){case 0:return a=r||"CAPI WS Close called",i._log.trace("close: closing CAPI because: ".concat(a)),[4,i._capi.close(a)];case 1:return u.sent(),i._conn?(i._log.debug("close: closing connection because: ".concat(a)),[4,i._conn.close({code:n,reason:a})]):[3,3];case 2:u.sent(),u.label=3;case 3:return[2]}})})()}},{key:"isIdle",get:function(){return this._isIdle}},{key:"isDisconnected",get:function(){return this._ws.isDisconnected()}},{key:"wasStarted",get:function(){return this._isStarted}},{key:"client",get:function(){return this._capi}},{key:"maxWsMessageSize",get:function(){return this._maxWsMessageSize}}]),e}(),Ep=class extends Wf.Base{constructor(t,n,r){super(),this._url=t,this._ajaxFactory=n,this._fingerprints=r,this._ajax=this._ajaxFactory({requestExtender:Nf.toHeaderAppender(this._fingerprints)})}static getDefaultUrl(t){return"https://capi".concat(t,"/api")}checkText(t,n){const r=xr.post(this._url,"/check").mime($o.MimeType.txt).body(t);return n!=null&&n.aidetector&&r.queryParam("aidetector","true"),this._ajax.json(r)}detectAI(t){const n=xr.post(this._url,"/check/aidetector").mime($o.MimeType.txt).body(t);return this._ajax.json(n)}getStatistics(){const t=xr.get(this._url,"/statistics");return this._ajax.json(t)}};Ep.targetTag="capi";var nM=Ep,qh;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CLOSED=3]="CLOSED",e[e.ANY=4]="ANY"})(qh||(qh={}));var Bh;(function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.SEND=3]="SEND",e[e.CLOSE=4]="CLOSE"})(Bh||(Bh={}));var rM=function(){function e(t,n){Zt(this,e),T(this,"_ws",void 0),T(this,"_serializer",void 0),this._ws=t,this._serializer=n}return mn(e,[{key:"send",value:function(n){var r=this;return Hn(function(){return Un(this,function(i){return[2,r._ws.send(r._serializer(n))]})})()}},{key:"close",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.code,i=r===void 0?Wi.WsCodes.NORMAL_CLOSURE:r,a=n.reason,u=this;return new Promise(function(o){u._ws.close(i,a),o()})}},{key:"state",get:function(){return this._ws.readyState}}]),e}(),jh;(function(e){(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED"})(e.State||(e.State={}))})(jh||(jh={}));var Gh;(function(e){var t=function(r){return r!=null&&(r.code!==void 0||r.reason!==void 0)};e.is=t})(Gh||(Gh={}));var iM=function(){function e(t,n){Zt(this,e),T(this,"_innerCon",void 0),T(this,"_addTimer",void 0),this._innerCon=t,this._addTimer=n}return mn(e,[{key:"send",value:function(n){return this._innerCon.send(this._addTimer(n))}},{key:"close",value:function(n){return this._innerCon.close(n)}},{key:"_ws",get:function(){return this._innerCon._ws}},{key:"state",get:function(){return this._innerCon.state}}]),e}(),Rp=function(){return Math.trunc(window.performance.now())};function wp(e,t){return new rM(e,t)}var aM=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Rp,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:yT,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:wp,o=this;Zt(this,e),T(this,"_innerWs",void 0),T(this,"_idGenerator",void 0),T(this,"_bufferSize",void 0),T(this,"_clientClock",void 0),T(this,"_timerIdGenerator",void 0),T(this,"_defaultConnection",void 0),T(this,"_log",void 0),T(this,"_timers",void 0),T(this,"_connection",void 0),this._innerWs=t,this._idGenerator=n,this._bufferSize=r,this._clientClock=i,this._timerIdGenerator=a,this._defaultConnection=u,this._log=Nn.Logging.getLogger("coreclients.capi.latencyMeasuringWSHandler"),this._timers=[],this._connection=null,this._innerWs=t.onDisconnect(function(){o._timers=[]}).onMessage(function(l,f){o._processTimerResponse(f)}).withConnection(function(l,f){return new iM(o._defaultConnection(l,f),function(h){return o._addTimerToRequest(h)})}).onConnect(function(l){o._connection=l})}return mn(e,[{key:"onConnecting",value:function(n){return this._innerWs.onConnecting(n),this}},{key:"onConnect",value:function(n){return this._innerWs.onConnect(n),this}},{key:"onDisconnect",value:function(n){return this._innerWs.onDisconnect(n),this}},{key:"onMessage",value:function(n){return this._innerWs.onMessage(n),this}},{key:"connect",value:function(n){return this._innerWs.connect(n)}},{key:"isDisconnected",value:function(){return this._innerWs.isDisconnected()}},{key:"_addTimerToRequest",value:function(n){if(typeof n=="string")return n;switch(n.action){case"ping":case"submit_ot":return Pt(pt({},n),{timer:{client_clock:this._clientClock(),id:this._timerIdGenerator()}});default:return n}}},{key:"_processTimerResponse",value:function(n){var r=this;switch(n.action){case"pong":case"finished":n.timer&&(this._timers.push({id:n.timer.id,name:n.timer.name,client_clock:this._clientClock()}),this._timers.length>=this._bufferSize&&setTimeout(function(){return r._flush()},0));return;default:return}}},{key:"_flush",value:function(){this._timers.length>0&&(this._connection===null?this._log.warn("tried flushing when not connected"):(this._connection.send({id:this._idGenerator.newId(),action:"perfstats",timers:this._timers}),this._timers=[]))}}]),e}(),uM=function e(t,n){var r=this;Zt(this,e),T(this,"_innerWSHandler",void 0),T(this,"accessToken",void 0),T(this,"onConnecting",void 0),T(this,"onConnect",void 0),T(this,"onDisconnect",void 0),T(this,"onMessage",void 0),T(this,"connect",void 0),T(this,"isDisconnected",void 0),this._innerWSHandler=t,this.accessToken=n,this.onConnecting=function(a){return r._innerWSHandler.onConnecting(a),r},this.onConnect=function(a){return r._innerWSHandler.onConnect(a),r},this.onDisconnect=function(a){return r._innerWSHandler.onDisconnect(a),r},this.onMessage=function(a){return r._innerWSHandler.onMessage(a),r};var i=this;this.connect=function(){var a=Hn(function(u){var o,l,f;return Un(this,function(h){switch(h.label){case 0:return typeof i.accessToken!="function"?[3,2]:[4,i.accessToken()];case 1:return l=h.sent(),[3,3];case 2:l=void 0,h.label=3;case 3:return o=l,o!==void 0&&(f=new URL(u),f.searchParams.append("accessToken",o),u=f.toString()),[2,i._innerWSHandler.connect(u)]}})});return function(u){return a.apply(this,arguments)}}(),this.isDisconnected=function(){return r._innerWSHandler.isDisconnected()}},Tp={};In(Tp,{Scheduler:()=>us,atomSwitchBy:()=>bM,atomWhile:()=>Cp,chooseWhen:()=>dM,createIgnoreErrorsSubscriber:()=>_M,createRetrySubscriber:()=>pM,delay:()=>hM,invert:()=>cM,mapMaybeObservable:()=>mM,noopObserver:()=>SM,observeIfExists:()=>IM,orEmpty:()=>fM,orEmptyRight:()=>sM,promiseToStream:()=>gM,toAtom:()=>as,toBooleanWithDebounce:()=>yM,toObservable:()=>vM,toTask:()=>lM,toVoid:()=>oM,voidValue:()=>Op});var Hh=Me(Fn(),1),Vl=Me(it(),1),Op=void 0,oM=()=>Op;function cM(e){return"view"in e?e.view(t=>!t):e.pipe(ii(t=>!t))}function as(e){return t=>e.set(t)}function lM(e){return()=>e.toPromise()}var fM=e=>bg(e,qr),sM=e=>bg(qr,e),dM=e=>(t,n)=>e.pipe(ii(r=>r?t:n)),hM=(e,t)=>vi(e).pipe(Lv(t));function vM(e){return e instanceof Dn?e:vi(e)}function mM(e,t){return e instanceof Dn?e.pipe(ii(t)):t(e)}function gM(e){return la(e().then(t=>m.some(Hh.right(t))).catch(t=>m.some(Hh.left(t)))).pipe(Ss(m.none))}function pM(e){return(t,n)=>n.pipe(Kc(e.handler("".concat(t," exception")).error),dm(3)).subscribe()}function _M(e){return(t,n)=>n.pipe(Kc((r,i)=>(e.error("".concat(t," exception"),r),i))).subscribe()}function yM(e,t,n=!0){return qv(e.pipe(nf(n)),e.pipe(Bv(t),nf(!n))).pipe(au())}var us;(e=>{function t(u){return"requestIdleCallback"in window?o=>{const l=window;return Dn.create(f=>{const h=l.requestIdleCallback(d=>{(d.timeRemaining()>0||d.didTimeout)&&f.next(o)},{timeout:u});return()=>l.cancelIdleCallback(h)})}:e.rafScheduler}e.ricScheduler=t;function n(u){return Dn.create(o=>{const l=requestAnimationFrame(()=>o.next(u));return()=>cancelAnimationFrame(l)})}e.rafScheduler=n;function r(u){return vi(u)}e.syncScheduler=r;function i(u){return u.pipe(Ei(e.rafScheduler))}e.inRaf=i;function a(u,o){return u.pipe(Ei(e.ricScheduler(o)))}e.inRic=a})(us||(us={}));function Cp(e,t){const n=t.get();bt(e(n),"first value should satisfy predicate");const r=$a.create(n),i=r.set.bind(r);r.set=u=>{e(u)?i(u):a.closed||t.set(u)};const a=t.pipe(Cs(e),Vv(1)).subscribe(as(r));return a.add(t.set!==void 0?r.subscribe(as(t)):Er.EMPTY),r}function bM(e,t){const n=r=>typeof e=="function"?e(r):r[e];return t.view(n).view(r=>Cp(i=>n(i)===r,t))}function IM(e){return m.mapOrDefault(t=>Dn.create(n=>{try{return e(t)}catch(r){return n.error(r),rr}}),qr)}function SM(){return{next:Vl.constVoid,error:Vl.constVoid,complete:Vl.constVoid}}var tu;(e=>{e.EMPTY=Er.EMPTY;class t{constructor(){this._subs=[]}push(...r){this._subs.push(...r)}dispose(){this._subs.forEach(r=>{"unsubscribe"in r?r.unsubscribe():r.dispose()}),this._subs=[]}}e.Keeper=t})(tu||(tu={}));var xe={};In(xe,{ArgumentOutOfRangeError:()=>rf,AsyncSubject:()=>Zv,BehaviorSubject:()=>Gc,ConnectableObservable:()=>zc,EMPTY:()=>qr,EmptyError:()=>Qu,NEVER:()=>hI,Notification:()=>To,ObjectUnsubscribedError:()=>db,Observable:()=>Dn,ReplaySubject:()=>zv,Scheduler:()=>Ob,Subject:()=>Rr,Subscriber:()=>hb,Subscription:()=>Er,TimeoutError:()=>Cb,UnsubscriptionError:()=>vb,VirtualAction:()=>xv,VirtualTimeScheduler:()=>Kb,animationFrameScheduler:()=>Mb,asapScheduler:()=>Wb,asyncScheduler:()=>fa,audit:()=>um,auditTime:()=>yI,buffer:()=>Ub,bufferCount:()=>bI,bufferTime:()=>II,bufferToggle:()=>SI,bufferWhen:()=>AI,catchError:()=>Kc,combineAll:()=>wI,combineLatest:()=>lm,combineLatestStatic:()=>Vc,concat:()=>OI,concatAll:()=>Jv,concatMap:()=>tf,concatMapTo:()=>TI,concatStatic:()=>Qv,config:()=>mb,count:()=>kI,debounce:()=>PI,debounceTime:()=>Bv,defaultIfEmpty:()=>$c,defer:()=>As,delay:()=>Lv,delayWhen:()=>bb,dematerialize:()=>NI,distinct:()=>WI,distinctUntilChanged:()=>au,distinctUntilKeyChanged:()=>FI,elementAt:()=>DI,endWith:()=>LI,every:()=>qI,exhaust:()=>jI,exhaustMap:()=>ws,expand:()=>GI,filter:()=>Ai,finalize:()=>Db,find:()=>HI,findIndex:()=>zI,first:()=>VI,flatMap:()=>Va,from:()=>la,fromEvent:()=>af,fromEventPattern:()=>rm,generate:()=>sI,groupBy:()=>KI,identity:()=>Tr,ignoreElements:()=>Ib,iif:()=>dI,interval:()=>Bo,isEmpty:()=>$I,isObservable:()=>$b,last:()=>YI,map:()=>ii,mapTo:()=>nf,materialize:()=>JI,max:()=>QI,merge:()=>xI,mergeAll:()=>jv,mergeMap:()=>Va,mergeMapTo:()=>XI,mergeScan:()=>ZI,mergeStatic:()=>qv,min:()=>eS,multicast:()=>Os,noop:()=>rr,observable:()=>gb,observeOn:()=>pb,of:()=>vi,onErrorResumeNext:()=>nS,onErrorResumeNextStatic:()=>im,pairs:()=>vI,pairwise:()=>Bb,partition:()=>jS,partitionStatic:()=>mI,pipe:()=>Is,pluck:()=>rS,publish:()=>iS,publishBehavior:()=>aS,publishLast:()=>uS,publishReplay:()=>oS,queueScheduler:()=>Vb,race:()=>GS,raceStatic:()=>qb,range:()=>gI,reduce:()=>xu,refCount:()=>Xv,repeat:()=>lS,repeatWhen:()=>fS,retry:()=>dm,retryWhen:()=>sS,sample:()=>hm,sampleTime:()=>dS,scan:()=>wb,scheduled:()=>_b,sequenceEqual:()=>hS,sequenceS:()=>RM,share:()=>Hv,shareReplay:()=>AM,single:()=>vS,skip:()=>Vv,skipBy:()=>EM,skipLast:()=>mS,skipUntil:()=>gS,skipWhile:()=>kb,startWith:()=>Ss,subscribeOn:()=>yb,switchAll:()=>pS,switchMap:()=>Ei,switchMapTo:()=>vm,take:()=>Es,takeLast:()=>Ts,takeUntil:()=>_S,takeWhile:()=>Cs,tap:()=>Gv,throttle:()=>Pb,throttleTime:()=>Nb,throwError:()=>em,throwIfEmpty:()=>Yc,timeInterval:()=>yS,timeout:()=>Yv,timeoutWith:()=>IS,timer:()=>wM,timestamp:()=>SS,toArray:()=>om,using:()=>pI,window:()=>AS,windowCount:()=>ES,windowTime:()=>RS,windowToggle:()=>wS,windowWhen:()=>TS,withLatestFrom:()=>OS,zip:()=>MS,zipAll:()=>CS,zipStatic:()=>Rs});Br(xe,_I);var AM=Tb;function EM(e){return au(e.equals)}function RM(e){return Vc(Object.entries(e).map(([t,n])=>(n instanceof Dn?n:vi(n)).pipe(ii(r=>[t,r])))).pipe(ii(t=>t.reduce((n,[r,i])=>({...n,[r]:i}),{})))}function wM(e=0,t,n){const r=typeof e=="number"?e:e==null?void 0:e.getTime(),i=2147483647,a=1e3;return r!=null&&r>=i?new Dn(u=>{const o=Date.now(),l=Bo(a,n).pipe(Cs(()=>Date.now()-o<r),Ts(1),t==null?ii(()=>0):Ei(()=>Bo(t,n))).subscribe(u);return()=>l.unsubscribe()}):t!=null?Ka(e,t,n):Ka(e,n)}var Fu={};In(Fu,{chain:()=>TM,compact:()=>CM,compactMap:()=>Mp,distinct:()=>MM,distinctUntilChanged:()=>kM,listenWhenSome:()=>OM});var zh=Me(it(),1);function TM(e){return Ei(m.mapOrDefault(e,vi(m.none)))}function OM(e){return(0,zh.flow)(m.map(t=>(0,zh.pipe)(t,e,vm(qr),Ss(m.some(t)))),m.getOrElse(()=>vi(m.none)))}function Mp(e){return Ei(m.fold(()=>qr,e))}var CM=Mp(vi),MM=au((e,t)=>m.isNone(e)&&m.isNone(t)||m.isSome(e)&&m.isSome(t)),kM=e=>au((t,n)=>m.isNone(t)&&m.isNone(n)||(m.isSome(t)&&m.isSome(n)?e(m.unsafeGet(t),m.unsafeGet(n)):!1)),Vh;(function(e){(function(n){n.supportsSVGDominantBaseline="supportsSVGDominantBaseline",n.supportsSetGoalsLoader="supportsSetGoalsLoader",n.onlyTrustedEvents="onlyTrustedEvents"})(e.Flag||(e.Flag={})),e.Context=ob.createContext(Mf.invariantContent("PlatformEnvironment"));var t=function n(){Zt(this,n),T(this,"has",function(){return!1}),T(this,"actions",{openUrl:function(){return Fe.right(void 0)},openPopup:function(){return Fe.right(void 0)}})};e.Mock=t})(Vh||(Vh={}));var PM=function(){function e(){Zt(this,e),T(this,"actions",{openUrl:function(t){return Fe.tryCatchError(function(){throw new Error("Not implemented")})},openPopup:function(t){return Fe.tryCatchError(function(){throw new Error("Not implemented")})}})}return mn(e,[{key:"has",value:function(n){throw new Error("Not implemented")}}]),e}(),NM=Me(Yi()),nr;(function(e){var t=du(),n=e.ord=Vg(Di.ordNumber),r=0,i=1,a=e.MIN=t.wrap(r),u=e.MAX=t.wrap(i),o=t.wrap(.01),l=t.wrap(.99),f=e.is=function(_){return typeof _=="number"&&!Number.isNaN(_)&&Di.between(n)(a,u)(t.wrap(_))},h=e.prism=Kg(f);e.isMin=qu(n.equals)(a),e.isMax=qu(n.equals)(u),e.closeToMin=Di.betweenExclusive(n)(a,o),e.closeToMax=Di.betweenExclusive(n)(l,u),e.groupSum=Xr.getNewtypeGroup(Xr.groupSum),e.monoidProduct=Bl(NM.monoidProduct),e.monoidMax=Bl({concat:Math.max,empty:r}),e.monoidMin=Bl({concat:Math.min,empty:i});var d=e.fromNumber=function(_){return f(_)?Fe.right(t.wrap(_)):typeof _!="number"||Number.isNaN(_)?Fe.left("can not create Ratio from not a number: "+JSON.stringify(_)):_<0||_>1?Fe.left("can not convert number: ".concat(_," to ratio")):Fe.left("unknown parse error")};e.unsafeFromNumber=function(_){return Fe.unsafeGet(d(_))},e.unwrap=function(_){return t.unwrap(_)},e.create=function(_,R){return h.getOption(R/_)}})(nr||(nr={}));var Kh;(function(e){var t=e.iso=du(),n=e.ord=Vg(Di.ordNumber),r=e.MIN=t.wrap(0),i=e.MAX=t.wrap(100),a=e.is=function(u){return Number.isInteger(u)&&Di.between(n)(r,i)(t.wrap(u))};e.prism=Kg(a),e.isMin=qu(n.equals)(r),e.isMax=qu(n.equals)(i),e.groupSum=Xr.getNewtypeGroup(Xr.groupSum),e.fromNumber=function(u){return bt(a(u),"can not create percent from: ".concat(u)),t.wrap(u)},e.fromRatio=function(u){var o=nr.prism.reverseGet(u),l=nr.closeToMin(u)?1:nr.closeToMax(u)?99:Math.round(o*100);return bt(a(l),"incorrect percent value: ".concat(l," was derived from ratio: ").concat(u)),t.wrap(l)}})(Kh||(Kh={}));function oo(e){let t=0;if(e==null||e.length===0)return t;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return t}var kp=e=>oo(Object.keys(e).sort().map(t=>t+":"+JSON.stringify(e[t])).join("")),Zi=Me(Wr()),WM=Me(cu()),FM=Me(Xc()),Jr;(function(e){(function(o){o.ord=Zi.ordString,o.show=FM.showString})(e.Id||(e.Id={}));var t=e.ordId=Zi.contramap(o=>o.id)(Zi.ordString),n=e.ordHRange=Zi.contramap(o=>o.alert.getHighlightRanges()[0])(tn.ord),r=e.ordVersion=Zi.contramap(o=>o.version)(Zi.ordNumber),i=e.ord=(0,WM.fold)(Zi.getSemigroup())(n,[t,r]),a=e.show={show:o=>"Alert #(".concat(o.id,", version:").concat(o.version,", state:").concat(o.state.type,", mute:").concat(o.mute,")")};e.ordShow=pt({},i,a);function u(o){return{alert:o,id:o.id,state:o.state,counters:o.counters,version:o.version,mute:o.mute}}e.create=u,e.isRegistered=o=>o.state.type==="REGISTERED"})(Jr||(Jr={}));var Kl=Me(Fn()),UM=Me(ha()),$l=Me(it()),os=class Pp{static register(t,n,r,i){return new Pp(t,n,r,i)}registerAlternatives(t){bt(!this._disposed,"Cannot call registerAlternatives method on disposed AlertAlternativeManager"),this.alternatives=(0,$l.pipe)(t,UM.map(n=>{const r=this._alternativesManager.registerAlternative(n,this._alertId);return this._alternativesMap.set(r.alternativeId,r),r}))}deregisterAlternatives(){return bt(!this._disposed,"Cannot call deregisterAlternatives method on disposed AlertAlternativeManager"),this._alternativesMap.forEach(t=>{this._alternativesMap.delete(t.alternativeId)&&this._alternativesManager.deregisterAlternative(t.alternativeId)}),this}registerReversedAlternative(t){return(0,$l.pipe)(this._disposed,Kl.fromPredicate(n=>!n,()=>new Error("Cannot call registerReversedAlternative method on disposed AlertAlternativeManager")),Kl.map(()=>{const n=this._alternativesManager.registerAlternative(t,this._alertId);return()=>(0,$l.pipe)(n.alternativeId,this._alternativesManager.getAlternative,Kl.map(r=>r.alternative))}))}dispose(){bt(!this._disposed,"Cannot dispose already disposed AlertAlternativeManager"),this.deregisterAlternatives(),this._disposed=!0}constructor(t,n,r,i){T(this,"_alternativesManager",void 0),T(this,"_alertId",void 0),T(this,"rev",void 0),T(this,"_alternativesMap",void 0),T(this,"_disposed",void 0),T(this,"alternatives",void 0),this._alternativesManager=t,this._alertId=n,this.rev=r,this._alternativesMap=new Map,this._disposed=!1,this.registerAlternatives(i)}},$h=Me(ui()),DM=Me(Yi()),Yh=Me(ha()),Aa=Me(kn()),bo=Me(it()),LM=class Np{static register(t,n,r,i,a){return new Np(t,n,r,i,a)}_normalize(t){return tn.size(t)===1?this._positionManager.widen(t):t}_getFirstRange(t){return this._rangesMap.get(this._ranges[t].values().next().value)}_getRanges(t){return Array.from(this._ranges[t]).map(n=>{const r=this._rangesMap.get(n);return r||this._log.warn("Got undefined range",{markId:n}),r}).filter(Boolean)}enqueueRanges(t,n,r){this._cleanupPendingRanges();const i=new Map;this._registerRanges(n.map(this._normalizeIfApplicable),a=>this._pendingRanges.push(["highlight",a]),i,this._alertId),this._registerRanges(t,a=>this._pendingRanges.push(["replace",a]),i),this._registerRanges(r,a=>this._pendingRanges.push(["context",a]),i,this._alertId)}get pending(){return this._pendingRanges.length>0}_getPendingRanges(t){return this._pendingRanges.filter(([n])=>n===t).map(([,n])=>this._rangesMap.get(n))}hasMatchingPendingRanges(t,n,r){return this._getPendingRanges(n).some(i=>t.some(a=>r(a,i)))}_deregisterRange(t){this._rangesMap.delete(t)&&this._positionManager.deregisterRange(t)}_cleanupPendingRanges(){this._pendingRanges.forEach(([t,n])=>this._deregisterRange(n)),this._pendingRanges=[]}applyPendingRangesUpdate(){if(!this.pending)return Aa.none;const t=this._getRanges("highlight");this._ranges.replace.forEach(this._deregisterByRangeId),this._ranges.context.forEach(this._deregisterByRangeId),this._ranges.replace.clear(),this._ranges.context.clear(),this._ranges.highlight.clear();const n=this._getPendingRanges("highlight");return this._pendingRanges.forEach(([r,i])=>this._ranges[r].add(i)),this._pendingRanges=[],this.highlightRanges=this._getRanges("highlight"),this.contextRanges=this._getRanges("context"),this.replaceRange=this._getFirstRange("replace"),Aa.some({addedHighlightedRanges:n,removedHighlightedRanges:[t,()=>{t.forEach(r=>this._deregisterRange(r.meta.id))}]})}_registerRanges(t,n,r,i){t.forEach(a=>{let u;const o="".concat(a.start,",").concat(a.end);r&&r.has(o)?u=r.get(o):(u=Qo.getRangeId(this._alertId,a.meta,this._rangesIndex++),this._rangesMap.set(u,this._positionManager.registerRange(u,i?this._rangeCreator(a):a)),r&&r.set(o,u)),n(u)})}registerJoinedAppliedRanges(){(0,bo.pipe)(Yh.fromArray([...Array.from(this._ranges.highlight),...Array.from(this._ranges.replace)]),Aa.map(Yh.map(t=>this._rangesMap.get(t))),Aa.map(DM.fold(tn.monoid)),Aa.map(t=>this._registerRanges((0,bo.pipe)(t,Vt.create(Vt.Meta.Behavior.APPLIED,Vt.Meta.View.MAIN),this._positionManager.widen,$h.of),n=>this._ranges.applied.add(n))))}registerHighlightRangesAsApplied(){const t=Array.from(this._ranges.highlight).map(n=>this._rangesMap.get(n)).map(Vt.create(Vt.Meta.Behavior.APPLIED,Vt.Meta.View.MAIN)).map(this._positionManager.widen);this._registerRanges(t,n=>this._ranges.applied.add(n))}get appliedRanges(){return(0,bo.pipe)(this._getRanges("applied"),$h.map(t=>()=>(0,bo.pipe)(this._positionManager.narrow(t),Aa.getOrElse(()=>tn.create(t.start,t.start,t.meta)))))}dispose(){this._rangesMap.forEach((t,n)=>this._positionManager.deregisterRange(n)),this._rangesMap.clear()}constructor(t,n,r,i,a){T(this,"_positionManager",void 0),T(this,"_alertId",void 0),T(this,"_log",void 0),T(this,"_normalizeIfApplicable",void 0),T(this,"_rangeCreator",void 0),T(this,"_rangesMap",void 0),T(this,"_ranges",void 0),T(this,"_pendingRanges",void 0),T(this,"_deregisterByRangeId",void 0),T(this,"_rangesIndex",void 0),T(this,"highlightRanges",void 0),T(this,"contextRanges",void 0),T(this,"replaceRange",void 0),this._positionManager=t,this._alertId=n,this._log=Nn.Logging.getLogger("AlertRangeManager",Cn.LogLevel.DEBUG),this._normalizeIfApplicable=o=>Vt.isFocusView(o)?o:this._normalize(o),this._rangeCreator=Qo.create(this._alertId),this._rangesMap=new Map,this._ranges={highlight:new Set,replace:new Set,applied:new Set,context:new Set},this._pendingRanges=[],this._deregisterByRangeId=o=>!this._ranges.highlight.has(o)&&this._deregisterRange(o),this._rangesIndex=0,this._log.trace("register ranges for alert",n);const u=new Map;this._registerRanges(i.map(this._normalizeIfApplicable),o=>this._ranges.highlight.add(o),u,this._alertId),this._registerRanges(a,o=>this._ranges.context.add(o),u,this._alertId),this._registerRanges(r,o=>this._ranges.replace.add(o),u),this.highlightRanges=this._getRanges("highlight"),this.replaceRange=this._getFirstRange("replace"),this.contextRanges=this._getRanges("context")}},Io=Me(kn()),qM=Me(it()),cs;(function(e){let t;(function(l){l[l.red=0]="red",l[l.green=1]="green",l[l.yellow=2]="yellow",l[l.grey=3]="grey"})(t=e.Color||(e.Color={}));function n(l){switch(l){case"red":return t.red;case"green":return t.green;case"yellow":return t.yellow;default:return t.grey}}const r=/<span.*?<\/span><br\/>/g,i=/^<span.*?class="(.+?)".*?>/,a=/^<span.*?>(.+?): /,u=/^<span.*?>(?:.+?: )?(.+?)<\/span><br\/>/;e.parse=(l,f=!1)=>(0,qM.pipe)(Io.fromNullable(l),Io.map(h=>h.replace(/^<p>/,"").split("<p>").map(d=>{const _=d.match(r);return!_||!Za(_)?[]:_.map(R=>{var A;const E=n(ra.getFirstWord((A=ra.getFirstMatch(R,i))!==null&&A!==void 0?A:"")),g=Io.fromNullable(ra.getFirstMatch(R,a)),I=ra.getFirstMatch(R,u);return I?{color:E,title:g,text:I,hasItalic:f}:null}).filter(Boolean)}).filter(Za)),Io.chain(xa.array));function o(l){return f=>{switch(l){case t.red:return f.red;case t.green:return f.green;case t.yellow:return f.yellow;default:return f.fallback}}}e.colorMatch=o})(cs||(cs={}));var Mi=Me(Fn()),BM=Me(jr()),Jh=Me(Wr()),jM=Me(dA()),GM=Me(it()),Qh=Me(qs()),Ve;(function(e){(function(c){c.empty=GM.constTrue})(e.Filter||(e.Filter={})),function(c){function p(j){return ae=>{const V=ae;return new s(V.info,j(V.meta),ae.filter)}}c.modifyMeta=p;function U(j){return ae=>p(()=>j)(ae)}c.setMeta=U}(e.WithAlerts||(e.WithAlerts={}));let t;(function(c){c.Plagiarism="Originality",c.DraftAI="Draft AI",c.Cheetah="Cheetah",c.Premium="Hidden",c.Closed="Closed",c.AllAlerts="All alerts",c.PredictionEmogenie="PredictionEmogenie",c.PredictionTakeaways="PredictionTakeaways",c.RealTimeProofit="RealTimeProofit",c.Clarity="ClarityOutcome",c.Correctness="CorrectnessOutcome",c.Engagement="EngagementOutcome",c.Delivery="DeliveryOutcome",c.Vox="Style guide",c.FreePremiumAlerts="FreePremiumAlerts",c.KnowledgeHub="KnowledgeHub"})(t=e.SpecialId||(e.SpecialId={}));function n(c){return[Ve.SpecialId.Premium,Ve.SpecialId.FreePremiumAlerts,Ve.SpecialId.Cheetah,Ve.SpecialId.AllAlerts,Ve.SpecialId.Plagiarism,Ve.SpecialId.Closed].includes(c)}e.isRelevantForOggy=n;function r(c){return c===t.Closed}e.isClosedId=r;function i(c){return c===Ve.SpecialId.Premium}e.isPremiumId=i;function a(c){return c===Ve.SpecialId.PredictionTakeaways}e.isPredictionTakeaways=a;function u(c){return c===Ve.SpecialId.PredictionEmogenie}e.isPredictionEmogenie=u;function o(c){return a(c)||u(c)}e.isPrediction=o;function l(c){return Ve.isOutcomeId(c)||Ve.isPremiumId(c)||Ve.isPlagiarismId(c)||Ve.isAllAlerts(c)||Ve.isPredictionTakeaways(c)||Ve.isPredictionEmogenie(c)||Ve.isRealtimeProofitId(c)||Ve.isFreePremiumId(c)}e.isWithAlertsId=l;function f(c){return Ve.isAllAlerts(c)||Ve.isPrediction(c)||Ve.isOutcomeId(c)||Ve.isRealtimeProofitId(c)||Ve.isFreePremiumId(c)}e.isWithSuccessId=f,function(c){function p(ae){switch(ae){case"Correctness":return Mi.right(Ve.SpecialId.Correctness);case"Clarity":return Mi.right(Ve.SpecialId.Clarity);case"Engagement":return Mi.right(Ve.SpecialId.Engagement);case"Tone":return Mi.right(Ve.SpecialId.Delivery);case"Style guide":return Mi.right(Ve.SpecialId.Vox);case"Knowledge Hub":return Mi.right(Ve.SpecialId.KnowledgeHub);default:return Mi.left("Unknown outcome id")}}c.toOutcomeId=p;function U(ae){switch(ae){case Ve.SpecialId.Correctness:case Ve.SpecialId.Clarity:case Ve.SpecialId.Engagement:case Ve.SpecialId.Delivery:return ae.slice(0,-7);default:return ae}}c.fromOutcomeId=U;function j(ae){switch(ae){case Ve.SpecialId.Correctness:case Ve.SpecialId.Clarity:case Ve.SpecialId.Engagement:return ae.slice(0,-7);case Ve.SpecialId.Delivery:return"Tone";case Ve.SpecialId.Vox:return"Style guide";case Ve.SpecialId.KnowledgeHub:return"Knowledge Hub";default:return hn(ae)}}c.toRawOutcome=j}(e.OutcomeId||(e.OutcomeId={})),function(c){function p(U){return U===Ve.SpecialId.Plagiarism?Mi.right(Ve.SpecialId.Plagiarism):Ve.OutcomeId.toOutcomeId(U)}c.toCapiId=p}(e.CapiId||(e.CapiId={})),function(c){c.ord=Jh.ordString}(e.Id||(e.Id={}));function h(c){return c===t.Plagiarism}e.isPlagiarismId=h;function d(c){return c===t.DraftAI}e.isDraftAIId=d;function _(c){return c===t.Cheetah}e.isCheetah=_;function R(c){return A(c)}e.isOutcomeId=R;function A(c){return c===t.Correctness||c===t.Clarity||c===t.Engagement||c===t.Delivery||c===t.Vox||c===t.KnowledgeHub}e.isMainOutcomeId=A;function E(c){return c===t.RealTimeProofit}e.isRealtimeProofitId=E;function g(c){return Ve.SpecialId.AllAlerts===c}e.isAllAlerts=g;function I(c){return Ve.SpecialId.FreePremiumAlerts===c}e.isFreePremiumId=I;function C(c){return g(c)}e.isMainLens=C;function k(c){return c===Ve.SpecialId.Correctness}e.isCorrectness=k;function L(c){return c===Ve.SpecialId.Clarity}e.isClarity=L;function q(c){return c===Ve.SpecialId.Delivery}e.isDelivery=q;function G(c){return c===Ve.SpecialId.Engagement}e.isEngagement=G;function D(c){return c===Ve.SpecialId.Vox}e.isVox=D;function Y(c){return c===Ve.SpecialId.KnowledgeHub}e.isKnowledgeHub=Y;let fe;(function(c){c.Critical="critical",c.Advanced="advanced",c.Plagiarism="plagiarism",c.Correctness="correctness",c.Clarity="clarity",c.Engagement="engagement",c.Delivery="delivery",c.Vox="vox",c.KnowledgeHub="knowledgeHub",c.Other="other"})(fe=e.Type||(e.Type={})),function(c){function p(j){switch(j.cardLayout.outcome){case"Correctness":return fe.Correctness;case"Clarity":return fe.Clarity;case"Engagement":return fe.Engagement;case"Tone":return fe.Delivery;case"Style guide":return fe.Vox;case"Originality":return fe.Plagiarism;case"Knowledge Hub":return fe.KnowledgeHub;default:return fe.Other}}c.fromRawAlert=p;function U(j){switch(j){case Ve.SpecialId.Correctness:return Ve.Type.Correctness;case Ve.SpecialId.Clarity:return Ve.Type.Clarity;case Ve.SpecialId.Engagement:return Ve.Type.Engagement;case Ve.SpecialId.Delivery:return Ve.Type.Delivery;case Ve.SpecialId.KnowledgeHub:return Ve.Type.KnowledgeHub;default:return Ve.Type.Other}}c.fromOutcomeId=U}(fe=e.Type||(e.Type={})),function(c){c.Accuracy="Accuracy",c.Clarity="Clarity",c.Effectiveness="Effectiveness",c.Originality="Originality",c.Hidden="Hidden"}(e.Category||(e.Category={}));let $;(function(c){c.group=Xr.getStructGroup({count:Xr.groupSum,mutedCount:Xr.groupSum,unreadCount:Xr.groupSum,priorityCount:Xr.groupSum,percentile:nr.groupSum}),c.eq=(0,BM.getStructEq)({count:Qh.Eq,unreadCount:Qh.Eq,percentile:nr.ord}),c.fromAlertCounters=p=>{const U=Xo.toUnmutedOnly(p);return{count:U.cost,priorityCount:p.priority,mutedCount:p.muted,unreadCount:U.unread,percentile:nr.MIN}},c.fromPercentile=p=>({count:0,mutedCount:0,unreadCount:0,priorityCount:0,percentile:p}),c.ratioToPercentile=p=>U=>Pt(pt({},U),{percentile:p}),c.isEmpty=p=>p.count===0&&p.mutedCount===0})($=e.Meta||(e.Meta={}));function x(c){return p=>{switch(p){case Ve.Type.Correctness:return c.correctness;case Ve.Type.Clarity:return c.clarity;case Ve.Type.Engagement:return c.engagement;case Ve.Type.Delivery:return c.delivery;case Ve.Type.Vox:return c.vox;case Ve.Type.KnowledgeHub:return c.knowledgeHub;case Ve.Type.Advanced:return c.premium;case Ve.Type.Critical:case Ve.Type.Plagiarism:case Ve.Type.Other:throw new Vi("Don't use this function for ".concat(p," type"));default:return hn(p)}}}e.outcomeTypeMatch=x;function Re(c){return p=>{switch(c){case Ve.Type.Correctness:return p.correctness;case Ve.Type.Clarity:return p.clarity;case Ve.Type.Engagement:return p.engagement;case Ve.Type.Delivery:return p.delivery;case Ve.Type.Plagiarism:return p.plagiarism;case Ve.Type.Vox:return p.vox;case Ve.Type.KnowledgeHub:return p.knowledgeHub;case Ve.Type.Advanced:return p.premium;case Ve.Type.Critical:case Ve.Type.Other:throw new Vi("Don't use this function for ".concat(c," type"));default:return hn(c)}}}e.outcomeFullTypeMatch=Re;const N={vox:0,critical:10,correctness:10,advanced:20,clarity:20,engagement:30,delivery:40,plagiarism:50,knowledgeHub:60,other:70};e.getSortOrder=c=>N[c],e.ord=Jh.fromCompare((c,p)=>(0,jM.sign)(N[c.type]-N[p.type]||p.priority-c.priority));class P{get title(){return this.info.title}get type(){return this.info.type}get category(){return this.info.category}get description(){return this.info.description}get priority(){return this.info.priority}get count(){return this.meta.count}get mutedCount(){return this.meta.mutedCount}get unreadCount(){return this.meta.unreadCount}get priorityCount(){return this.meta.priorityCount}get percentile(){return this.meta.percentile}get id(){return this.info.id}get exclusiveHighlights(){return this.info.exclusiveHighlights}appendMeta(p){return new P(this.info,$.group.concat(this.meta,p),this.filter)}updateMeta(p){return new P(this.info,p(this.meta),this.filter)}equals(p){return this.id===p.id&&this.count===p.count&&this.unreadCount===p.unreadCount&&this.percentile===p.percentile&&this.priority===p.priority}hashCode(){let p=7;return p=31*p+oo(this.id),p=31*p+this.count,p=31*p+this.unreadCount,p=31*p+nr.prism.reverseGet(this.percentile),p=31*p+this.priority,p}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{id:this.id,type:this.type,count:this.count,percentile:this.percentile,unreadCount:this.unreadCount,priority:this.priority}}constructor(p,U,j){T(this,"info",void 0),T(this,"meta",void 0),T(this,"filter",void 0),this.info=p,this.meta=U,this.filter=j}}e.StaticLensImpl=P;class s extends P{get id(){return this.info.id}appendMeta(p){return new s(this.info,$.group.concat(this.meta,p),this.filter)}updateMeta(p){return new s(this.info,p(this.meta),this.filter)}constructor(p,U,j){super(p,U,j),bt(l(p.id),"can not create WithAlerts lens for static lens id",p.id)}}e.LensImpl=s;let S;(function(c){var p=c.base={id:Ve.SpecialId.Correctness,type:Ve.Type.Other,category:Ve.Category.Hidden,title:"Base Lens",description:"",priority:0,exclusiveHighlights:!1};function U(ae){return Kt.update(p,ae)}c.create=U;function j(ae){return U({id:ae,title:Ve.OutcomeId.fromOutcomeId(ae),type:Ve.Type.fromOutcomeId(ae),exclusiveHighlights:!0})}c.createOutcome=j,c.plagiarism=U({id:Ve.SpecialId.Plagiarism,type:Ve.Type.Plagiarism,category:Ve.Category.Originality,title:"Plagiarism",exclusiveHighlights:!0}),c.draftAI=U({id:Ve.SpecialId.DraftAI,type:Ve.Type.Critical,title:"Draft AI"}),c.cheetah=U({id:Ve.SpecialId.Cheetah,type:Ve.Type.Critical,title:"Grammarly Ideate"}),c.premium=U({id:Ve.SpecialId.Premium,type:Ve.Type.Advanced,title:"Premium"}),c.freePremium=U({id:Ve.SpecialId.FreePremiumAlerts,title:"Premium"}),c.allAlerts=U({id:Ve.SpecialId.AllAlerts,type:Ve.Type.Critical,title:"All suggestions"}),c.predictionTakeaways=U({id:Ve.SpecialId.PredictionTakeaways,type:Ve.Type.Critical,title:"Reader's attention"}),c.predictionEmogenie=U({id:Ve.SpecialId.PredictionEmogenie,type:Ve.Type.Critical,title:"How it sounds"}),c.realTimeProofit=U({id:Ve.SpecialId.RealTimeProofit,type:Ve.Type.Critical,title:"Proofreading"})})(S=e.Info||(e.Info={}));function M(c,p,U){const j=Kt.update(S.base,c);return new P(j,p,U)}e.createStaticLens=M})(Ve||(Ve={}));var Uu;(function(e){var t=e.isKnown=r=>"id"in r;e.splitById=r=>{if(t(r)){const{id:i}=r,a=eu(r,["id"]);return{id:i,local:a}}else return{local:r}},e.toLocal=r=>t(r)?eu(r,["id"]):r,function(r){r.identity=i=>i,r.forcePositionOverTransformJson=i=>(u=>u.extra_properties!==void 0&&u.extra_properties.progress!==void 0)(i)?i:ht.withTransformJson(i)&&ht.hasPosition(i)&&!ht.withSubalerts(i)?Kt.update(i,{transformJson:void 0}):i}(e.Transform||(e.Transform={}));function n(r,i){return ht.match(r,a=>i.substring(a.highlightBegin,a.highlightEnd)===a.highlightText[0],a=>ht.hasPosition(a)?i.substring(a.highlightBegin,a.highlightEnd)===a.highlightText[0]:!1,()=>!1)}e.isHighlightValid=n})(Uu||(Uu={}));var Xh;(function(e){e.api="api",e.sidebar="sidebar",e.text="text"})(Xh||(Xh={}));var Qt;(function(e){e.FullSentence="FullSentence",e.Simple="Simple",e.Regular="Regular",e.OneGap="OneGap",e.Takeaway="Takeaway",e.Synfony="Synfony",e.ShortenIt="shortenIt",e.ToneAI="ToneAI",e.EthicalAI="EthicalAI",e.SuggestedSnippet="SuggestedSnippet",e.Citation="Citation",e.CitationDetection="CitationDetection",e.WritingExpert="WritingExpert"})(Qt||(Qt={}));var Ca;(function(e){e.correctlyDetected="correctlyDetected",e.incorrectlyDetected="incorrectlyDetected"})(Ca||(Ca={}));(function(e){function t(R){return ht.isFullSentence(R)?Qt.FullSentence:R.underline_with_teaser==="true"?Qt.WritingExpert:R.citation==="true"?Qt.Citation:R.citation_detection!==void 0?Qt.CitationDetection:R.transform_with_button==="true"?Qt.Simple:R.gap_transform==="true"?Qt.OneGap:R.takeawayScore!==void 0?Qt.Takeaway:R.drilldownTree!==void 0?Qt.Synfony:R.shorten_it==="true"?Qt.ShortenIt:R.tone_slider!==void 0?Qt.ToneAI:R.ethical_ai_external_link!==void 0?Qt.EthicalAI:R.suggested_snippet_text!==void 0&&R.suggested_snippet_lib_link!==void 0?Qt.SuggestedSnippet:Qt.Regular}e.parse=t;function n(R){return R===Qt.FullSentence}e.isFullSentence=n;function r(R){return R===Qt.Simple}e.isSimple=r;function i(R){return R===Qt.OneGap}e.isOneGap=i;function a(R){return R===Qt.Synfony}e.isSynfony=a;function u(R){return R===Qt.ShortenIt}e.isShortenIt=u;function o(R){return R===Qt.ToneAI}e.isToneAI=o;function l(R){return R===Qt.EthicalAI}e.isEthicalAI=l;function f(R){return R===Qt.Citation}e.isCitation=f;function h(R){return R===Qt.CitationDetection}e.isCitationDetection=h;function d(R){return R===Qt.SuggestedSnippet}e.isSuggestedSnippet=d;function _(R){return R===Qt.WritingExpert}e.isWritingExpert=_})(Qt||(Qt={}));var fc;(function(e){const t=(0,$e.flow)(xo.sort(aa.contramap(n=>n.order)(aa.ordNumber)),xo.map(n=>({key:n.key,text:n.reason})));e.parse=(0,$e.flow)(m.fromNullable,m.map(n=>({question:n.question,options:t(n.options)})))})(fc||(fc={}));var ls;(function(e){e.parse=m.fromNullable,e.isVox=t=>t.categoryTitle==="Vox"})(ls||(ls={}));var sc;(function(e){function t(n){return{hasAddToDictionary:n.add_to_dict==="true",didYouMean:n.did_you_mean==="true",showTitle:n.show_title==="true",isEnhancement:n.enhancement==="true",isBeta:n.beta==="true",priority:parseInt(n.priority?n.priority:"0",10),tone:Zo.sequenceS(m.option)({emojiId:m.fromNullable(n.emoji_id),name:m.fromNullable(n.tone)}),vox:(0,$e.pipe)(m.fromNullable(n.voxCompanyName),m.map(r=>({companyName:r,logoUrl:m.fromNullable(n.voxLogoUrl)}))),fluencyMessage:m.fromNullable(n.fluency_message),cardType:Qt.parse(n),isInQuotes:n.in_quotes==="true",bulkAcceptable:n.bulk_acceptable==="true",takeaway:m.fromEither(Fp.parseExtraProps(n)),takeawayBundleId:(0,$e.pipe)(m.fromNullable(n.takeaway_bundle_id),m.filter(Za)),shortenIt:(0,$e.pipe)(m.fromEither(Dp.parseExtraProps(n)),m.map(r=>Pt(pt({},r),{alertState:n.shorten_it_alert_state?{summaryState:sr.SummaryState.fromString(n.shorten_it_alert_state.summaryState)}:void 0}))),toneAI:Lp.parseExtraProps(n),ethicalAI:qp.parseExtraProps(n),freePremium:m.fromNullable(n.free_premium),premiumYellowFooterVariant:m.fromNullable(n.premium_yellow_footer_variant),occasionalPromotion:m.fromNullable(n.occasional_promotion),drilldownTree:m.fromNullable(n.drilldownTree),suggestedSnippet:(0,$e.pipe)(Zo.sequenceS(m.option)({snippetText:m.fromNullable(n.suggested_snippet_text),libLink:m.fromNullable(n.suggested_snippet_lib_link)}),m.map(r=>Pt(pt({},r),{snippetsTrigger:m.fromNullable(n.snippet_trigger)}))),citationDetection:(0,$e.pipe)(n.citation_detection,Ua.citationType.decode,m.fromEither),citationGap:(0,$e.pipe)(n.citation_gap,m.fromNullable,m.map(r=>r==="true")),citationItalicization:(0,$e.pipe)(n.citation_italicization,m.fromNullable,m.map(r=>r==="true")),autoapply:(0,$e.pipe)(m.fromNullable(n.autoapply),m.map(r=>r==="true")),knowledgeHubTermCreationUrl:m.fromNullable(n.knowledgeHubTermCreationUrl),vbar:n.vbar==="true",underlineWithTeaser:n.underline_with_teaser==="true"}}e.fromCapiExtraProperties=t})(sc||(sc={}));var Zh;(function(e){function t(n){return n.reversedAlternative!==void 0}e.isWithAlternative=t,e.mock={action:Xn.AlertFeedbackType.LOOKED,commit:$e.constVoid,undo:$e.constVoid}})(Zh||(Zh={}));var dc;(function(e){var t=e.ordId=aa.contramap(r=>r.id)(aa.ordString),n=e.ordHRange=aa.contramap(r=>r.getHighlightRanges()[0])(tn.ord);e.ord=aa.getSemigroup().concat(n,t)})(dc||(dc={}));var sr;(function(e){let t;(function(n){n.notRequested="notRequested",n.requestSent="requestSent",n.received="received",n.invalidated="invalidated",n.notFound="notFound"})(t=e.SummaryState||(e.SummaryState={})),function(n){function r(i){switch(i){case t.notRequested:return t.notRequested;case t.requestSent:return t.requestSent;case t.received:return t.received;case t.notFound:return t.notFound;case t.invalidated:return t.invalidated;default:return}}n.fromString=r}(t=e.SummaryState||(e.SummaryState={}))})(sr||(sr={}));var fs;(function(e){e.ToneSlider=mo.array(mo.type({emoji_id:mo.string,name:mo.string}))})(fs||(fs={}));var xh;(function(e){const t=(0,$e.constant)(br.right(void 0));e.mock={_applyAlert:t,_applyTransformJson:t,_alertFeedback:t,_alertBatchFeedback:(0,$e.constant)($e.constVoid),_dismissBatch:t,_releaseRef:t,_notifyAlertUpdated:t,_changeMuteState:(0,$e.constant)(br.right(Fe.right([]))),_changeGapValue:t,_confirmApplied:t,_changeTakeawayFeedback:n=>He.isTakeaway(n)?br.right(n):br.left(new Error("Not a Takeaway alert")),_shortenItSummaryNotFound:n=>He.isShortenIt(n)?br.right(n):br.left(new Error("Not a ShortenIt alert")),_commitShortenItSummaryRequest:n=>He.isShortenIt(n)?br.right(n):br.left(new Error("Not a ShortenIt alert")),_dismissShortenItTransformGroup:(n,r)=>He.isShortenIt(n)?br.right(n):br.left(new Error("Not a ShortenIt alert")),_changeToneAIToneAlternative:n=>He.isToneAI(n)?br.right(n):br.left(new Error("Not a ToneAI alert"))}})(xh||(xh={}));var ev=(0,$e.flow)(Number,nr.prism.getOption,m.getOrElse(()=>nr.MIN)),co=class Do{static _createId(t){return"".concat(t,"_").concat((this.idCounter++).toString())}get rawId(){return Uu.isKnown(this._raw)?m.some(this._raw.id):m.none}get state(){return this._state}get patternName(){return this._raw.pname}get patternNameQualifier(){return this._raw.pnameQualifier}get inline(){return this._raw.inline}get freePremium(){return this.extraProperties.freePremium}get disposed(){return this._disposed}get isRead(){return this._isRead}set isRead(t){this._log.trace("isRead#"+this.version,String(t)),this.bumpVersion(),this._isRead=t}get version(){return this._version}get mute(){return this._mute}set mute(t){this._log.trace("mute#"+this.version,String(t)),this.bumpVersion(),this._mute=t}get todoAction(){return this._raw.todo}get miniCardTitle(){return this._raw.minicardTitle}_registerAll(t,n,r,i,a=!0){(0,$e.pipe)(n,Fe.fold(u=>this._registerRanges(m.some(u),r,i),u=>{this._registerRanges(m.none,r,i),a&&(0,$e.pipe)(u,m.fold($e.constVoid,o=>this._registerAlternatives(t,o)))}))}_deregisterAllAlternatives(){this._alertAlternativeManager=(0,$e.pipe)(this._alertAlternativeManager,Do._disposeAltManager),this._pendingAlertAlternativeManager=(0,$e.pipe)(this._pendingAlertAlternativeManager,Do._disposeAltManager)}_deregisterRanges(){this._alertRangeManager.dispose()}bumpVersion(){this._version++}copy(t=!0){bt(He.isNotDisposed(this),"Cannot copy disposed alert!",()=>this.toString());const n=new this.constructor(this._raw,this._ops,this._positionManager,this._alternativeManager,(0,$e.pipe)(this._replaceEither,Fe.bimap(tn.copy,m.map(Xn.Alternative.Group.copy))),this.getHighlightRanges().map(tn.copy),(0,$e.pipe)(this.getContextRanges(),Pn.fromArray,m.map(Pn.map(tn.copy))),this.isRead,this.version+1,t);return this.isValid||n.invalidate(),n.from=m.some(this.id),n}get isValid(){return this._isValid}validate(){bt(m.isSome(this.rawId),"Cannot validate local alert",()=>this.toString()),this._isValid=!0}invalidate(){return this._isValid=!1,this}clearCapiId(){Uu.isKnown(this._raw)&&(this._raw=this.toLocalRawAlert())}silentPatchWithRawAlert(t){this._raw=t,this._mute=He.MuteStateType.fromMutedByType(this._raw.muted),this.progress=ev(t.extra_properties.progress),this.extraProperties=sc.fromCapiExtraProperties(t.extra_properties)}patchWithRawAlert(t){this._log.trace("patchWithRawAlert#"+this.version,t),this.bumpVersion(),this.silentPatchWithRawAlert(t)}updateAlertWithManagedData(t){bt(this.references===0,"Cannot update referenced alert, use enqueueRawAlertForUpdate instead"),this._deregisterRanges(),this._deregisterAllAlternatives(),this._registerAll(t.rev,(0,$e.pipe)(qo(t),Fe.map(m.map(n=>n.alternatives))),Nu(t),Lo(t)),this.patchWithRawAlert(t)}registerReversedAlternative(t){return(0,$e.pipe)(this._alertAlternativeManager,m.chain((0,$e.flow)(n=>n.registerReversedAlternative(t),Fe.mapLeft(n=>(this._log.error("Could not register reversed alternative",{error:n,reversedAlternative:t}),n)),m.fromEither)))}_registerAppliedRanges(){(0,$e.pipe)(this._replaceEither,Fe.fold(()=>{this._alertRangeManager.registerJoinedAppliedRanges()},()=>{this._alertRangeManager.registerHighlightRangesAsApplied(),(0,$e.pipe)(this._alertAlternativeManager,m.map(t=>t.deregisterAlternatives()))}))}switchToBeingAppliedState(t,n){bt(!He.isApplied(this)&&!He.isBeingApplied(this),"can not apply already applied or being applied alert",()=>JSON.stringify({alert:this,source:t,method:n})),He.isRemoved(this)&&this._log.warn("Trying to switch removed to applied state",{alert:this,source:t,method:n}),this._registerAppliedRanges();const r=this.changeState(He.State.Applied.createBeingApplied(t,n,Jr.create(this))),i=this.getHighlightRanges().map(tn.copy),a=(0,$e.pipe)(this.getContextRanges(),Pn.fromArray,m.map(Pn.map(tn.copy)));return{beingAppliedAlert:r,undo:()=>{He.isRemoved(this)||He.isBulkApplied(this)||this._registerAll(this._raw.rev,(0,$e.pipe)(this.getReplaceEither(),Fe.map(m.map(Pn.map(u=>u.alternative)))),i,a)}}}apply(t){const{alternativeIndex:n,feedbackSubtype:r,source:i,reason:a,gbPrompt:u}=t;bt(He.isNotDisposed(this),"Cannot apply already disposed alert",()=>this.toString()),(0,$e.pipe)(this._replaceEither,Fe.fold(()=>this._ops._applyAlert({alert:this,replacementText:(0,$e.pipe)(He.getReplacementText(this,n)(),Fe.unsafeGet),source:i,method:He.State.Applied.Method.ByCard,feedbackSubtype:r,reason:a,gbPrompt:u}),()=>this._ops._applyTransformJson({alerts:[{alert:this,alternative:He.getApplicableAlternative(this,n)}],source:i,method:He.State.Applied.Method.ByCard,feedbackSubtype:r,drilldownSuggestionIds:t.drilldownSuggestionIds,reason:a,gbPrompt:u})),br.getOrElse(o=>()=>{throw o}))()}equals(t){return dc.ordId.equals(this,t)}hashCode(){return oo(this.id)}isSameType(t){return this.patternName===t.patternName&&this.patternNameQualifier===t.patternNameQualifier&&this.title===t.title&&this.lensType===t.lensType&&this._raw.free===t._raw.free&&this.lensId===t.lensId}enqueueRawAlertForUpdate(t){bt((0,$e.pipe)(this.rawId,m.forAll(r=>r===t.id)),"Cannot update alert with different id, this: ".concat((0,$e.pipe)(this.rawId,m.toNullable),", that: ").concat(t.id));const n=qo(t);bt(Fe.isLeft(n)&&Fe.isLeft(this._replaceEither)||Fe.isRight(n)&&Fe.isRight(this._replaceEither),"Cannot change replace type on the go"),this._sanityCheck(t),this.patchWithRawAlert(t),this.highlightTexts=t.highlightText,(0,$e.pipe)(n,Fe.fold(r=>{this._alertRangeManager.enqueueRanges([r],Nu(t),[])},r=>{this._alertRangeManager.enqueueRanges([],Nu(t),(0,$e.pipe)(t,Lo,m.getOrElse(()=>[]))),(0,$e.pipe)(this._pendingAlertAlternativeManager,m.map(i=>i.dispose())),this._pendingAlertAlternativeManager=(0,$e.pipe)(r,m.map(i=>os.register(this._alternativeManager,this.id,t.rev,i.alternatives)))}))}get hasNewRangesForUpdate(){return this._alertRangeManager.pending}applyPendingRangesUpdate(){const t=Jr.create(this);this._log.trace("applyPendingRangesUpdate#"+this.version),this.bumpVersion(),(0,$e.pipe)(this._pendingAlertAlternativeManager,m.tap(()=>{(0,$e.pipe)(this._alertAlternativeManager,m.map(i=>i.dispose())),this._alertAlternativeManager=this._pendingAlertAlternativeManager,this._pendingAlertAlternativeManager=m.none}));const n=this._alertRangeManager.applyPendingRangesUpdate(),r=Jr.create(this);return(0,$e.pipe)(this._ops._notifyAlertUpdated(ss.create(t,r))(),Fe.mapLeft(this._log.handler("Could not update alert when applying pending ranges update").error)),n}hasMatchingHighlightsWith(t,n){return this.hasNewRangesForUpdate?this._alertRangeManager.hasMatchingPendingRanges(t.getHighlightRanges(),"highlight",n):this.getHighlightRanges().some(r=>t.getHighlightRanges().some(i=>n(r,i)))}canBeMergedWith(t){return He.isRemoved(this)?this.allowUpdate&&this.isSameType(t)&&this.hasMatchingHighlightsWith(t,tn.isOverlap)&&this.state.reason===He.State.Removed.Reason.capiDone:this.hasMatchingHighlightsWith(t,tn.ord.equals)&&di.compareInPairs(this.highlightTexts,t.highlightTexts,(n,r)=>n===r)&&this.isSameType(t)}changeState(t){return this._log.trace("changeState#"+this.version,t),this.bumpVersion(),this._state=t,this}enqueueRangesRemove(t){const n=r=>!t.has(r);return this._alertRangeManager.enqueueRanges((0,$e.pipe)(this.getReplaceEither(),Fe.fold(r=>[r],()=>[])),this.getHighlightRanges().filter(n),this.getContextRanges().filter(n)),this}toString(){return"Alert: "+JSON.stringify(this.toJSON(),void 0,0)}toLiteString(){return"aid:".concat(this.id," rid:").concat(m.toNullable(this.rawId))}toJSON(){return Pt(pt({id:this.id,rawId:(0,$e.pipe)(this.rawId,m.getOrElse(()=>"unknown")),hranges:this.getHighlightRanges()},(0,$e.pipe)(this.getReplaceEither(),Fe.fold(t=>({rrange:t}),t=>({alts:(0,$e.pipe)(t,m.map(xo.map(n=>n.alternative.ops.map(Xn.AlternativeOperation.anonymize))),m.toUndefined)})))),{arange:(0,$e.pipe)(this.getAppliedRanges(),m.fromPredicate(Za),m.toNullable),lensId:this.lensId,lensType:this.lensType,category:this._raw.category,patternName:this._raw.pname,patternNameQualifier:this._raw.pnameQualifier,impact:this._raw.impact,isValid:this._isValid,state:this.state.type,references:this._refNames,disposed:this._disposed,view:this._raw.view})}toLocalRawAlert(){return Uu.toLocal(this.toRawAlert())}toRawAlert(){const t=this.getHighlightRanges().map(r=>Fe.getOrElse(i=>(this._log.info("Alert cannot be restored",i),tn.copy(r)))(Fo.restore(r))),n=Kt.update(this._raw,pt({isRead:this.isRead,muted:this._mute===He.MuteStateType.Muted?Xn.MutedAlerts.MutedByType.MUTED_BY_USER:void 0},(0,$e.pipe)(this.getReplaceEither(),Fe.fold(r=>({begin:r.start,end:r.end}),()=>({})))));return Kt.update(n,ht.match(this._raw,()=>({highlightBegin:t[0].start,highlightEnd:t[0].end}),r=>({transformJson:$n.create({alternatives:(0,$e.pipe)(r.transformJson.alternatives,m.chain(()=>(0,$e.pipe)(Pn.fromArray(this.getContextRanges()))),m.map(Pn.map(i=>({s:i.start,e:i.end}))),m.chain(i=>(0,$e.pipe)(this.getReplaceEither(),Fe.unsafeGet,m.map(a=>({context:i,alternatives:(0,$e.pipe)(a,Pn.map(u=>u.alternative))}))))),highlights:t.map(i=>({s:i.start,e:i.end,type:i.meta.vtype===Vt.Meta.View.FOCUS?"focus":i.meta.vtype===Vt.Meta.View.ENCLOSING?"enclosing":i.meta.vtype===Vt.Meta.View.MAIN_START?"main_start":"main"}))})}),()=>({})))}toLiteAlert(){return{group:this._raw.group,category:this._raw.category,categoryHuman:this._raw.categoryHuman,bundleInfo:(0,$e.pipe)(this.bundleInfo,m.map(t=>t.title)),lensName:this.lensName,cost:1}}toLensAlert(){return{lensName:this._raw.cardLayout.group,isFree:this._raw.free,cost:1}}takeReference(t){return this._disposed?Fe.left(new Vi("Can not take reference for already disposed",this.id)):this._refNames.indexOf(t)!==-1?Fe.left(new Vi("can not take ref for same from twice",t)):(this._refNames.push(t),Fe.right({dispose:(0,$e.pipe)(()=>di.omitMutable(t,this._refNames),bC.apSecond(this._ops._releaseRef(t,this)),br.fold(n=>()=>this._log.error("Could not release ref",n),$e.constant),Ah.fromIO,Ah.delay(0))}))}dispose(){return this._log.isEnabled(Cn.LogLevel.TRACE)&&this._log.trace("dispose alert call",new Error("Alert(".concat(this.toLiteString(),")")).stack),bt(He.isNotDisposed(this),"Cannot dispose already disposed",this.id),bt(this.references===0,"Cannot dispose alert in use",this.id),this._disposed=!0,this._deregisterAllAlternatives(),this._deregisterRanges(),this}switchToApplied(t){return bt(He.State.Type.BEING_APPLIED===this.state.type,"Only being applied alert can be transitioned to applied"),this.changeState(He.State.Applied.fromBeingApplied(this.state,t))}onRangeChange(t){bt(He.isNotDisposed(this),"Cannot change range on disposed alert!",()=>this.toString());const n=()=>(t.some(Vt.hasBehavior(Vt.Meta.Behavior.HIGHLIGHT))||t.some(Vt.hasBehavior(Vt.Meta.Behavior.HIGHLIGHT_UPDATABLE))&&He.highlightsCollapsed(this))&&!He.isBulkApplied(this);return He.isApplied(this)&&t.some(Vt.hasBehavior(Vt.Meta.Behavior.APPLIED))||n()?m.some({state:He.Transition.State.Dispose}):He.isRegistered(this)&&t.some(Vt.hasBehavior(Vt.Meta.Behavior.CONTEXT))?m.some({state:He.Transition.State.Pending,removedRanges:new Set}):m.none}_registerRanges(t,n,r){this._alertRangeManager&&this._alertRangeManager.dispose(),this._alertRangeManager=LM.register(this._positionManager,this.id,(0,$e.pipe)(t,m.fold(()=>[],i=>[i])),n,(0,$e.pipe)(r,m.getOrElse(()=>[])))}get references(){return this._refNames.length}static castApplied(t){return bt(He.isApplied(t),"can not cast not applied alert",()=>t.toString()),t}constructor(t,n,r,i,a=qo(t),u=Nu(t),o=Lo(t),l=t.isRead===!0,f=0,h=!0){var d,_;T(this,"_raw",void 0),T(this,"_ops",void 0),T(this,"_positionManager",void 0),T(this,"_alternativeManager",void 0),T(this,"_replaceEither",void 0),T(this,"_isRead",void 0),T(this,"_version",void 0),T(this,"_log",void 0),T(this,"_disposed",void 0),T(this,"id",void 0),T(this,"priority",void 0),T(this,"progress",void 0),T(this,"extraProperties",void 0),T(this,"dismissSurvey",void 0),T(this,"acceptSurvey",void 0),T(this,"gbPrompt",void 0),T(this,"result",void 0),T(this,"_state",void 0),T(this,"belongsToAllAlerts",void 0),T(this,"lensType",void 0),T(this,"lensName",void 0),T(this,"isFree",void 0),T(this,"lensPriority",void 0),T(this,"from",void 0),T(this,"highlightTexts",void 0),T(this,"replaceText",void 0),T(this,"bundleInfo",void 0),T(this,"prediction",void 0),T(this,"allowUpdate",void 0),T(this,"_mute",void 0),T(this,"muteCategory",void 0),T(this,"_isValid",void 0),T(this,"_sanityCheck",void 0),T(this,"_alertRangeManager",void 0),T(this,"_alertAlternativeManager",void 0),T(this,"_pendingAlertAlternativeManager",void 0),T(this,"view",void 0),T(this,"getHighlightRanges",void 0),T(this,"getNotEnclosingHighlightRanges",void 0),T(this,"getContextRanges",void 0),T(this,"getReplaceEither",void 0),T(this,"getAppliedRanges",void 0),T(this,"_registerAlternatives",void 0),T(this,"_refNames",void 0),this._raw=t,this._ops=n,this._positionManager=r,this._alternativeManager=i,this._replaceEither=a,this._isRead=l,this._version=f,this._log=jp("BaseAlert.impl",Cn.LogLevel.DEBUG),this._disposed=!1,this.id=Do._createId((0,$e.pipe)(this.rawId,m.getOrElse(()=>"local"))),this.priority=0,this.progress=ev(this._raw.extra_properties.progress),this.extraProperties=sc.fromCapiExtraProperties(this._raw.extra_properties),this.dismissSurvey=fc.parse(((d=this._raw.userReasonSurveys)===null||d===void 0?void 0:d.find(R=>R.action==="dismiss"))||this._raw.userReasons),this.acceptSurvey=fc.parse((_=this._raw.userReasonSurveys)===null||_===void 0?void 0:_.find(R=>R.action==="accept")),this.gbPrompt=ls.parse(this._raw.gbPrompt),this.result=m.fromNullable(this._raw.result),this._state=He.State.init,this.belongsToAllAlerts=!1,this.lensType=Ve.Type.fromRawAlert(this._raw),this.lensName=this._raw.cardLayout.group,this.isFree=this._raw.free,this.lensPriority=!!this._raw.cardLayout&&this._raw.cardLayout.rank||0,this.from=m.none,this.highlightTexts=this._raw.highlightText,this.replaceText=this._raw.text,this.bundleInfo=(0,$e.pipe)(m.fromNullable(this._raw.cardLayout.bundle),m.map(R=>({title:R,rank:this._raw.cardLayout.bundleRank?this._raw.cardLayout.bundleRank:Number.MAX_SAFE_INTEGER}))),this.prediction=m.fromNullable(this._raw.cardLayout.prediction),this.allowUpdate=this._raw.updatable===!0,this._mute=He.MuteStateType.fromMutedByType(this._raw.muted),this.muteCategory=Zo.sequenceS(m.option)({id:(0,$e.pipe)(m.fromNullable(this._raw.cardLayout.userMuteCategory),m.map(R=>R)),description:m.fromNullable(this._raw.cardLayout.userMuteCategoryDescription)}),this._isValid=!1,this._sanityCheck=ZM(this._raw),this._alertAlternativeManager=m.none,this._pendingAlertAlternativeManager=m.none,this.view=this._raw.view?this._raw.view:ht.View.all,this.getHighlightRanges=()=>this._alertRangeManager.highlightRanges,this.getNotEnclosingHighlightRanges=()=>this._alertRangeManager.highlightRanges.filter(zo(Vt.isEnclosingView)),this.getContextRanges=()=>this._alertRangeManager.contextRanges,this.getReplaceEither=()=>(0,$e.pipe)(this._replaceEither,Fe.bimap(()=>this._alertRangeManager.replaceRange,()=>(0,$e.pipe)(this._alertAlternativeManager,m.map(R=>R.alternatives)))),this.getAppliedRanges=()=>this._alertRangeManager.appliedRanges,this._registerAlternatives=(R,A)=>{this._deregisterAllAlternatives(),this._alertAlternativeManager=m.some(os.register(this._alternativeManager,this.id,R,A))},this._refNames=[],this._sanityCheck(t),this._registerAll(t.rev,(0,$e.pipe)(a,Fe.map(m.map(R=>R.alternatives))),u,o,h)}};T(co,"idCounter",0);T(co,"_disposeAltManager",m.chain(e=>(e.dispose(),m.none)));var HM=class extends co{get counters(){return{cost:1,critical:0,advanced:1,priority:0,free:0,freePremium:0,paid:1,unread:0,muted:0,textLength:0}}constructor(...e){super(...e),T(this,"title",""),T(this,"lensId",Ve.SpecialId.Premium),T(this,"alertType",He.Type.Premium),T(this,"group",this._raw.group),T(this,"category",this._raw.category),T(this,"isFree",this._raw.free),T(this,"categoryHuman",this._raw.categoryHuman),T(this,"allowDuplicates",!0),T(this,"hasNestedHighlights",!1),T(this,"_isRead",!0),T(this,"labels",[]),T(this,"transform",m.none)}},zM=class extends co{_parsePlagiarismExtraProps(e){var t,n,r;return e.source==="PUBLICATION"?{source:"publication",authors:m.fromNullable(e.authors),citationStyle:{apa:(t=e.reference_apa)!==null&&t!==void 0?t:"",chicago:(n=e.reference_chicago)!==null&&n!==void 0?n:"",mla:(r=e.reference_mla)!==null&&r!==void 0?r:""},paraphrased:e.paraphrased==="true"}:{source:"web",url:m.fromNullable(e.url),paraphrased:e.paraphrased==="true"}}constructor(...e){super(...e),T(this,"lensType",Ve.Type.Plagiarism),T(this,"lensId",Ve.SpecialId.Plagiarism),T(this,"alertType",He.Type.Plagiarism),T(this,"allowDuplicates",!0),T(this,"hasNestedHighlights",!1),T(this,"counters",{cost:1,priority:0,critical:0,advanced:0,free:0,freePremium:0,paid:0,unread:0,muted:He.isMuted(this)?1:0,textLength:this._raw.highlightText.map(n=>n.length).reduce(yg,0)}),T(this,"plagiarismType",this._parsePlagiarismExtraProps(this._raw.extra_properties));var t;T(this,"title",(t=this._raw.extra_properties.title)!==null&&t!==void 0?t:""),T(this,"labels",[]),T(this,"cardId",JSON.stringify({title:this.title,source:this.plagiarismType.source})),T(this,"_isRead",!0),T(this,"transform",m.none)}},Oi=class extends co{get title(){return this._raw.title}get details(){return xa.string(this._raw.details)}get counters(){if(He.isBulkApplied(this))return Xo.empty;const e=this._raw.impact===ht.Impact.Critical?1:0,t=this._raw.impact===ht.Impact.Advanced?1:0,n=this._raw.free?1:0,r=this._raw.extra_properties.free_premium==="unlocked"?1:0,i=this._raw.free?0:1;return{cost:1,priority:He.isPriority(this)?1:0,critical:e,advanced:t,free:n,freePremium:r,paid:i,unread:+!this.isRead,textLength:0,muted:He.isMuted(this)?1:0}}get transform(){return(0,$e.pipe)(this.getReplaceEither(),Fe.fold(()=>(0,$e.pipe)(this._raw.replacements,Pn.fromNullableArray,m.map(e=>(0,$e.pipe)(this._raw.transforms,Pn.fromNullableArray,m.fold(()=>({kind:"replacement",content:e}),t=>({kind:"transform",content:t})),Fe.left))),(0,$e.flow)(m.map(Pn.map(e=>e.alternative)),m.map(e=>Fe.right({cardType:this.extraProperties.cardType,drilldown:this.extraProperties.drilldownTree,alternatives:e})))),m.map(e=>({id:this.id,revision:(0,$e.pipe)(this._alertAlternativeManager,m.fold(()=>this._raw.rev,t=>t.rev)),todo:this._raw.todo,content:e})))}onRangeChange(e){bt(He.isNotDisposed(this),"Cannot change range on disposed alert!",()=>this.toString());const t=e.filter(Vt.hasBehavior(Vt.Meta.Behavior.HIGHLIGHT_UPDATABLE));return t.length>0&&!He.highlightsCollapsed(this)?m.some({state:He.Transition.State.Pending,removedRanges:new Set(t.filter(Vt.isFocusView))}):super.onRangeChange(e)}enqueueRawAlertForUpdate(e){super.enqueueRawAlertForUpdate(e),this.explanation=e.explanation}copy(e=!0){const t=super.copy(e);return t.explanation=this.explanation,t}constructor(...e){super(...e),T(this,"lensId",Fe.unsafeGet(Ve.OutcomeId.toOutcomeId(this._raw.cardLayout.outcome))),T(this,"allowDuplicates",!1),T(this,"hasNestedHighlights",He.hasNestedHighlights(this)),T(this,"isFree",this._raw.free),T(this,"explanation",this._raw.explanation),T(this,"examples",cs.parse(this._raw.examples,this._raw.point.includes("Italicization"))),T(this,"priority",this.extraProperties.priority),T(this,"belongsToAllAlerts",!0),T(this,"labels",XM(this._raw))}},Wp=class extends Oi{constructor(...e){super(...e),T(this,"alertType",He.Type.Default)}},VM=class extends Oi{constructor(...e){super(...e),T(this,"alertType",He.Type.Synfony)}},KM=class extends Oi{enqueueRawAlertForUpdate(e){super.enqueueRawAlertForUpdate(e),this.labels=e.labels}updateAlertWithManagedData(e){super.updateAlertWithManagedData(e),this.labels=e.labels}constructor(...e){super(...e),T(this,"labels",this._raw.labels),T(this,"alertType",He.Type.Super)}},$M=class extends Wp{get gapValue(){return this._gapValue}changeGapValue(e){return this.bumpVersion(),this._gapValue=e,this}copy(e=!0){const t=super.copy(e);return t._gapValue=this._gapValue,t}constructor(...e){super(...e),T(this,"_gapValue","")}},Fp=class Up extends Oi{setFeedback(t){return this.bumpVersion(),this._takeawayFeedback=m.some(t),this}get takeawayScore(){return this._takeawayScore}get takeawayIsLikelyToBeRead(){return this._takeawayIsLikelyToBeRead}get takeawayFeedback(){return this._takeawayFeedback}get miniCardTitle(){return this._miniCardTitle}get title(){return this._title}get details(){return this._details}enqueueRawAlertForUpdate(t){super.enqueueRawAlertForUpdate(t),this._miniCardTitle=t.minicardTitle,this._title=t.title,this._details=xa.string(t.details),(0,$e.pipe)(Up.parseExtraProps(t.extra_properties),Fe.fold(n=>{throw new Error("Cannot update Takeaway alert: ".concat(n))},n=>{this._takeawayScore=n.score,this._takeawayIsLikelyToBeRead=n.isLikelyToBeRead,this._takeawayFeedback=n.feedbackState}))}copy(t=!0){const n=super.copy(t);return n._takeawayScore=this._takeawayScore,n._takeawayIsLikelyToBeRead=this._takeawayIsLikelyToBeRead,n._takeawayFeedback=this._takeawayFeedback,n._miniCardTitle=this._miniCardTitle,n._title=this._title,n._details=this._details,n}static parseExtraProps(t){return(0,$e.pipe)(Fe.fromNullable("takeawayScore is missing")(t.takeawayScore),Fe.map(n=>({score:parseFloat(n),isLikelyToBeRead:(0,$e.pipe)(m.fromNullable(t.isLikelyToReadTakeaway),m.fold($e.constFalse,r=>r==="true")),feedbackState:(0,$e.pipe)(m.fromNullable(t.takeawayFeedback),m.chain(r=>r===Ca.correctlyDetected?m.some(Ca.correctlyDetected):r===Ca.incorrectlyDetected?m.some(Ca.incorrectlyDetected):hn(r)))})))}static calculateHashCode(t){return oo("".concat(t.id,"-").concat(m.getShow(_p.showString).show(t.takeawayFeedback),"-").concat(t.takeawayIsLikelyToBeRead,"-").concat(t.title,"-").concat(t.miniCardTitle,"-").concat(t.explanation,"-").concat(t.details))}constructor(t,n,r,i){super(t,n,r,i),T(this,"_raw",void 0),T(this,"_ops",void 0),T(this,"_positionManager",void 0),T(this,"_alternativeManager",void 0),T(this,"alertType",void 0),T(this,"_takeawayScore",void 0),T(this,"_takeawayIsLikelyToBeRead",void 0),T(this,"_takeawayFeedback",void 0),T(this,"_miniCardTitle",void 0),T(this,"_title",void 0),T(this,"_details",void 0),this._raw=t,this._ops=n,this._positionManager=r,this._alternativeManager=i,this.alertType=He.Type.Takeaway,this._takeawayScore=0,this._takeawayIsLikelyToBeRead=!1,this._takeawayFeedback=m.none,this._miniCardTitle="",this._title="",this._details=m.none,(0,$e.pipe)(this.extraProperties.takeaway,m.tap(a=>{this._takeawayScore=a.score,this._takeawayIsLikelyToBeRead=a.isLikelyToBeRead,this._takeawayFeedback=a.feedbackState})),this._miniCardTitle=t.minicardTitle,this._title=t.title,this._details=xa.string(t.details)}},Dp=class extends Oi{get todoAction(){return this._todoAction}get sentenceCount(){return this._sentenceCount}get wordCount(){return this._wordCount}get compressionRatio(){return this._compressionRatio}get summaryState(){return this._summaryState}get dismissedTransformGroups(){return this._dismissedTransformGroups}get transformGroups(){return(0,$e.pipe)(this.transform,m.chain(e=>m.fromEither(e.content)),m.map(e=>(0,$e.pipe)(e.alternatives,Pn.head)),m.map(e=>Xn.Alternative.getTransformGroups(e)),m.getOrElse(()=>new Set))}changeSummaryState(e){const t=(0,$e.pipe)(e,n=>{switch(n){case"requestSent":return sr.SummaryState.requestSent;case"notFound":return sr.SummaryState.notFound;default:hn(n)}});return this.bumpVersion(),this._summaryState=t,this}dismissTransformGroup(e){if(!this._dismissedTransformGroups.has(e)){this._dismissedTransformGroups.add(e);const t=this._deleteRangesGroups.findIndex(n=>n===e);if(t>=0){this._deleteRangesGroups.splice(t,1);const n=t+1,r=this.getHighlightRanges();bt(n<r.length,"range to remove is out of bounds"),this.enqueueRangesRemove(new Set([r[n]]))}this.bumpVersion()}return this}_enqueueRawAlertTransformForUpdate(e){const t=qo(e);bt(Fe.isRight(t)&&Fe.isRight(this._replaceEither),"Cannot change replace type on the go"),this._replaceEither=t,this.highlightTexts=e.highlightText,this._deleteRangesGroups=(0,$e.pipe)(this._replaceEither,Fe.fold(()=>[],m.fold(()=>[],n=>Xn.Alternative.getDeleteOpsGroupsList(n.alternatives[0])))),(0,$e.pipe)(this._replaceEither,Fe.map(n=>{this._alertRangeManager.enqueueRanges([],Nu(e),(0,$e.pipe)(e,Lo,m.getOrElse(()=>[]))),(0,$e.pipe)(this._pendingAlertAlternativeManager,m.map(r=>r.dispose())),this._pendingAlertAlternativeManager=(0,$e.pipe)(n,m.map(r=>os.register(this._alternativeManager,this.id,e.rev,r.alternatives)))}))}enqueueRawAlertForUpdate(e){bt((0,$e.pipe)(this.rawId,m.forAll(n=>n===e.id)),"Cannot update alert with different id, this: ".concat((0,$e.pipe)(this.rawId,m.toNullable),", that: ").concat(e.id)),this._sanityCheck(e),this.patchWithRawAlert(e),(0,$e.pipe)(this.extraProperties.shortenIt,m.tap(n=>{this._sentenceCount=n.sentenceCount,this._wordCount=n.wordCount,this._compressionRatio=n.compressionRatio}));let t=!1;switch(this._summaryState){case sr.SummaryState.notRequested:break;case sr.SummaryState.requestSent:ht.withAlternatives(e)?(this._summaryState=sr.SummaryState.received,this._dismissedTransformGroups=new Set):t=!0;break;case sr.SummaryState.received:ht.withAlternatives(e)||(this._summaryState=sr.SummaryState.invalidated,t=!0);break;case sr.SummaryState.invalidated:t=!0;break;case sr.SummaryState.notFound:break;default:hn(this._summaryState)}t||(this.explanation=e.explanation,this._todoAction=e.todo,this._enqueueRawAlertTransformForUpdate(e))}copy(e=!0){const t=super.copy(e);return t._sentenceCount=this._sentenceCount,t._wordCount=this._wordCount,t._compressionRatio=this._compressionRatio,t._todoAction=this._todoAction,t._summaryState=this._summaryState,t._dismissedTransformGroups=new Set(this._dismissedTransformGroups),t._deleteRangesGroups=this._deleteRangesGroups,t}static parseExtraProps(e){var t,n;return(0,$e.pipe)(e.shorten_it,Fe.fromPredicate(r=>r==="true",(0,$e.constant)("not a ShortenIt alert")),Fe.chain(()=>Zo.sequenceS(Fe.either)({sentenceCount:(0,$e.pipe)(Fe.parseFiniteInt((t=e.sentence_count)!==null&&t!==void 0?t:""),Fe.mapLeft((0,$e.constant)("invalid sentence_count: got ".concat(e.sentence_count)))),wordCount:(0,$e.pipe)(Fe.parseFiniteInt((n=e.word_count)!==null&&n!==void 0?n:""),Fe.mapLeft((0,$e.constant)("invalid word_count: got ".concat(e.word_count)))),compressionRatio:e.shorten_it_compression_ratio===void 0?Fe.right(nr.unsafeFromNumber(0)):(0,$e.pipe)(Fe.parseFloat(e.shorten_it_compression_ratio),Fe.mapLeft((0,$e.constant)("invalid shorten_it_compression_ratio: got ".concat(e.shorten_it_compression_ratio))),Fe.chain(nr.fromNumber))})))}static calculateHashCode(e){return kp({dismissedTransformGroups:Array.from(e.dismissedTransformGroups.values()).sort().join("|"),id:e.id,patternName:e.patternName,sentenceCount:e.sentenceCount,wordCount:e.wordCount,compressionRatio:nr.unwrap(e.compressionRatio),summaryState:e.summaryState})}constructor(e,t,n,r){super(e,t,n,r),T(this,"_raw",void 0),T(this,"_ops",void 0),T(this,"_positionManager",void 0),T(this,"_alternativeManager",void 0),T(this,"alertType",void 0),T(this,"_todoAction",void 0),T(this,"_sentenceCount",void 0),T(this,"_wordCount",void 0),T(this,"_compressionRatio",void 0),T(this,"_summaryState",void 0),T(this,"_dismissedTransformGroups",void 0),T(this,"_deleteRangesGroups",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=r,this.alertType=He.Type.ShortenIt,this._todoAction="",this._sentenceCount=0,this._wordCount=0,this._compressionRatio=nr.unsafeFromNumber(0),this._summaryState=sr.SummaryState.notRequested,this._dismissedTransformGroups=new Set,this._deleteRangesGroups=[],(0,$e.pipe)(this.extraProperties.shortenIt,m.tap(i=>{var a;this._sentenceCount=i.sentenceCount,this._wordCount=i.wordCount,this._compressionRatio=i.compressionRatio;var u;this._summaryState=(u=(a=i.alertState)===null||a===void 0?void 0:a.summaryState)!==null&&u!==void 0?u:ht.withAlternatives(e)?sr.SummaryState.received:sr.SummaryState.notRequested})),this._todoAction=e.todo,this._deleteRangesGroups=(0,$e.pipe)(this._replaceEither,Fe.fold(()=>[],m.fold(()=>[],i=>Xn.Alternative.getDeleteOpsGroupsList(i.alternatives[0]))))}},Lp=class extends Oi{get toneAlternatives(){return this._toneAlternatives}get selectedToneAlternativeIdx(){return this._selectedToneAlternativeIdx}setSelectedToneAlternativeIdx(e){return this.bumpVersion(),this._selectedToneAlternativeIdx=e,this}copy(e=!0){const t=super.copy(e);return t._toneAlternatives=this._toneAlternatives,t._selectedToneAlternativeIdx=this._selectedToneAlternativeIdx,t}static parseExtraProps(e){const t=jp("ToneAIAlertImpl.parseExtraProps",Cn.LogLevel.DEBUG);return(0,$e.pipe)(m.fromNullable(e.tone_slider),m.chain(n=>(0,$e.pipe)(Fe.tryCatch(()=>JSON.parse(n),()=>"invalid extra_properties.tone_slider JSON"),Fe.chain(r=>(0,$e.pipe)(fs.ToneSlider.decode(r),Fe.mapLeft(i=>"cannot decode extra_properties.tone_slider ".concat(JSON.stringify(i))))),Fe.map(r=>r.map(i=>({emojiID:i.emoji_id,name:i.name}))),Fe.filterOrElse(r=>r.length>1,r=>"expected extra_properties.tone_slider length to be greater than 1, but found ".concat(r.length)),Fe.bimap(r=>t.error("Cannot parse extra_properties for ToneAI alert: ".concat(r)),r=>({toneAlternatives:r})),m.fromEither)))}static calculateHashCode(e){return kp({id:e.id,selectedToneAlternativeIdx:e.selectedToneAlternativeIdx})}constructor(e,t,n,r){super(e,t,n,r),T(this,"_raw",void 0),T(this,"_ops",void 0),T(this,"_positionManager",void 0),T(this,"_alternativeManager",void 0),T(this,"alertType",void 0),T(this,"_toneAlternatives",void 0),T(this,"_selectedToneAlternativeIdx",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=r,this.alertType=He.Type.ToneAI;const i=m.unsafeGet(this.extraProperties.toneAI);this._toneAlternatives=i.toneAlternatives,this._selectedToneAlternativeIdx=1}},qp=class extends Oi{get externalLink(){return this._externalLink}get emojiID(){return this._emojiID}get bannerColors(){return this._bannerColors}get isFlaggable(){return this._isFlaggable}get shouldDismissAfterOpeningLink(){return this._shouldDismissAfterOpeningLink}get highlightBackgroundColor(){return this._highlightBackgroundColor}get highlightUnderlineColor(){return this._highlightUnderlineColor}copy(e=!0){const t=super.copy(e);return t._externalLink=this._externalLink,t._emojiID=this._emojiID,t._bannerColors=this._bannerColors,t._isFlaggable=this._isFlaggable,t}static parseExtraProps(e){return(0,$e.pipe)(e,m.fromPredicate(t=>!!t.ethical_ai_external_link),m.map(t=>{let n;if(t.ethical_ai_is_flaggable!==void 0)try{n=JSON.parse(t.ethical_ai_is_flaggable)}catch{n=!0}else n=!0;let r;if(t.ethical_ai_should_dismiss_after_opening_link!==void 0)try{r=JSON.parse(t.ethical_ai_should_dismiss_after_opening_link)}catch{r=!1}else r=!1;return{externalLink:t.ethical_ai_external_link,emojiID:t.ethical_ai_emoji_id,bannerColors:t.ethical_ai_banner_colors!==void 0&&t.ethical_ai_banner_colors.trim()!==""?t.ethical_ai_banner_colors.split(","):void 0,isFlaggable:n,shouldDismissAfterOpeningLink:r,highlightBackgroundColor:t.ethical_ai_highlight_background_color,highlightUnderlineColor:t.ethical_ai_highlight_underline_color}}))}constructor(e,t,n,r){super(e,t,n,r),T(this,"_raw",void 0),T(this,"_ops",void 0),T(this,"_positionManager",void 0),T(this,"_alternativeManager",void 0),T(this,"alertType",void 0),T(this,"_externalLink",void 0),T(this,"_emojiID",void 0),T(this,"_bannerColors",void 0),T(this,"_isFlaggable",void 0),T(this,"_shouldDismissAfterOpeningLink",void 0),T(this,"_highlightBackgroundColor",void 0),T(this,"_highlightUnderlineColor",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=r,this.alertType=He.Type.EthicalAI;const i=m.unsafeGet(this.extraProperties.ethicalAI);this._externalLink=i.externalLink,this._emojiID=i.emojiID,this._bannerColors=i.bannerColors,this._isFlaggable=i.isFlaggable,this._shouldDismissAfterOpeningLink=i.shouldDismissAfterOpeningLink,this._highlightBackgroundColor=i.highlightBackgroundColor,this._highlightUnderlineColor=i.highlightUnderlineColor}},YM=class Bp extends Oi{get snippetText(){return this._snippetText}get libLink(){return this._libLink}get snippetsTrigger(){return this._snippetsTrigger}copy(t=!0){const n=super.copy(t);return n._snippetText=this._snippetText,n._snippetText=this._libLink,n}static calculateHashCode(t){return oo(t)}hashCode(){return 31*super.hashCode()+Bp.calculateHashCode(this._snippetText)}constructor(t,n,r,i){super(t,n,r,i),T(this,"_raw",void 0),T(this,"_ops",void 0),T(this,"_positionManager",void 0),T(this,"_alternativeManager",void 0),T(this,"alertType",void 0),T(this,"_snippetText",void 0),T(this,"_libLink",void 0),T(this,"_snippetsTrigger",void 0),this._raw=t,this._ops=n,this._positionManager=r,this._alternativeManager=i,this.alertType=He.Type.SuggestedSnippet,bt(m.isSome(this.extraProperties.suggestedSnippet),"Tried to create SuggestedSnippetAlert without providing a snippet text."),this._snippetText=this.extraProperties.suggestedSnippet.value.snippetText,this._libLink=this.extraProperties.suggestedSnippet.value.libLink,this._snippetsTrigger=this.extraProperties.suggestedSnippet.value.snippetsTrigger}},JM=class extends Oi{get knowledgeHubTermCreationUrl(){return this._knowledgeHubTermCreationUrl}constructor(e,t,n,r){super(e,t,n,r),T(this,"_raw",void 0),T(this,"_ops",void 0),T(this,"_positionManager",void 0),T(this,"_alternativeManager",void 0),T(this,"alertType",void 0),T(this,"_knowledgeHubTermCreationUrl",void 0),this._raw=e,this._ops=t,this._positionManager=n,this._alternativeManager=r,this.alertType=He.Type.KnowledgeHubSuggestedTerm,bt(m.isSome(this.extraProperties.knowledgeHubTermCreationUrl),"Tried to create KnowledgeHubSuggestedTermAlert without providing a term creation url."),this._knowledgeHubTermCreationUrl=this.extraProperties.knowledgeHubTermCreationUrl.value}},He;(function(e){(function(w){w.Default="default",w.Plagiarism="plagiarism",w.Super="super",w.Premium="premium",w.Takeaway="takeaway",w.Synfony="synfony",w.ShortenIt="shortenIt",w.ToneAI="toneAI",w.EthicalAI="ethicalAI",w.SuggestedSnippet="suggestedSnippet",w.KnowledgeHubSuggestedTerm="knowledgeHubSuggestedTerm"})(e.Type||(e.Type={}));function t(w){return w.alert}e.fromAlertModel=t,e.getReplacementText=(w,he)=>()=>Fe.tryCatchError(()=>{const _e=w._raw.replacements[he];return bt(_e!==void 0,"Unknown alternativeIndex",()=>"alternativeIndex(".concat(he,") ")+w.toString()),_e}),e.getApplicableAlternative=(w,he)=>()=>Fe.tryCatchError(()=>{bt((0,$e.pipe)(w.getReplaceEither(),Fe.exists(m.isSome)),"Alert doesn't have any deltas to be applied",w.toString());const{alternative:_e}=(0,$e.pipe)(w.getReplaceEither(),Fe.unsafeGet,m.unsafeGet)[he];return bt(_e!==void 0,"Unknown alternativeIndex",()=>"alternativeIndex(".concat(he,") ")+w.toString()),{alternative:n(w,_e),alternativeIndex:he}});const n=(w,he)=>s(w)?Xn.Alternative.fillGaps(he,w.gapValue):x(w)?Xn.Alternative.dismissTransformGroups(he,w.dismissedTransformGroups):he;(function(w){(function(he){he[he.Pending=0]="Pending",he[he.Dispose=1]="Dispose"})(w.State||(w.State={}))})(e.Transition||(e.Transition={}));let r;(function(w){w.IDLE="idle",w.CHECKING="checking"})(r=e.CheckingState||(e.CheckingState={})),function(w){let he;(function(be){be.REGISTERED="REGISTERED",be.BEING_APPLIED="BEING_APPLIED",be.APPLIED="APPLIED",be.REMOVED="REMOVED"})(he=w.Type||(w.Type={}));function _e(be){return be.type===He.State.Type.REGISTERED&&be.checkingState===r.IDLE}w.isIdle=_e;let Te;(function(be){be.create=We=>({type:he.REGISTERED,checkingState:We})})(Te=w.Registered||(w.Registered={})),function(be){be.create=(We,st,_t,Dt)=>({type:he.APPLIED,from:Dt,undoable:We,source:st,method:_t}),be.fromBeingApplied=(We,st)=>Pt(pt({},We),{type:he.APPLIED,undoable:st}),be.createBeingApplied=(We,st,_t)=>({type:he.BEING_APPLIED,from:_t,source:We,method:st}),function(We){We.ByCard="ByCard",We.Bulk="Bulk"}(be.Method||(be.Method={}))}(w.Applied||(w.Applied={})),function(be){(function(We){We.textChange="textChange",We.capiDone="capiDone",We.capiDismiss="capiDismiss",We.duplicated="duplicated",We.canceled="canceled",We.bulkAcceptUserResponse="bulkAcceptUserResponse"})(be.Reason||(be.Reason={})),be.create=We=>({type:he.REMOVED,reason:We})}(w.Removed||(w.Removed={})),w.init=Te.create(r.IDLE);function Ne(be){return He.State.Type.APPLIED===be.type&&be.method===He.State.Applied.Method.Bulk}w.isBulkApplied=Ne;function je(be){return He.State.Type.REGISTERED===be.type}w.isRegistered=je;function Qe(be){return He.State.Type.REMOVED===be.type}w.isRemoved=Qe;function X(be){return He.State.Type.BEING_APPLIED===be.type}w.isBeingApplied=X;function re(be){return je(be)?be.checkingState:r.IDLE}w.getCheckingState=re}(e.State||(e.State={})),function(w){w.Muted="Muted",w.Unmuted="Unmuted"}(e.MuteStateType||(e.MuteStateType={})),function(w){w.fromMutedByType=he=>he===Xn.MutedAlerts.MutedByType.MUTED_BY_USER?He.MuteStateType.Muted:He.MuteStateType.Unmuted}(e.MuteStateType||(e.MuteStateType={}));function i(w){const he=w.getHighlightRanges();if(he.length<2)return!1;if(he.some(Vt.isEnclosingView))return!0;const{left:_e,right:Te}=xo.partition(Vt.isMainView)(he);return _e.length!==0&&Te.some(Ne=>_e.some(je=>tn.contains(je,Ne)))}e.hasNestedHighlights=i;function a(w){return w.getHighlightRanges().some(Vt.isEnclosingView)}e.hasEnclosingHighlight=a;function u(w){return w.state.type===He.State.Type.APPLIED}e.isApplied=u;function o(w){return w.state.type===He.State.Type.BEING_APPLIED}e.isBeingApplied=o;function l(w){return w.state.type===He.State.Type.BEING_APPLIED&&w.state.method===He.State.Applied.Method.Bulk}e.isBeingAppliedinBulk=l;function f(w){return _(w)||h(w)}e.isInteractable=f;function h(w){return He.State.isBulkApplied(w.state)}e.isBulkApplied=h;function d(w){return He.isApplied(w)&&w.state.undoable.action===Xn.AlertFeedbackType.ACCEPTED}e.isAccepted=d;function _(w){return w.state.type===He.State.Type.REGISTERED}e.isRegistered=_;function R(w){return w.state.type!==He.State.Type.REGISTERED}e.isNotRegistered=R;function A(w){return w.state.type===He.State.Type.REMOVED}e.isRemoved=A;function E(w){return A(w)&&w.state.reason===He.State.Removed.Reason.textChange}e.isRemovedByTextChange=E;function g(w){return w.state.type!==He.State.Type.REMOVED}e.isNotRemoved=g;function I(w){return A(w)&&w.state.reason===He.State.Removed.Reason.capiDone}e.isCapiDone=I;function C(w){return k(w)}e.isDuplicated=C;function k(w){return A(w)&&w.state.reason===He.State.Removed.Reason.duplicated}e.isInDuplicatedState=k;function L(w){return w.lensType===Ve.Type.Critical||w.lensType===Ve.Type.Correctness}e.isCritical=L;function q(w){return w._raw.impact===ht.Impact.Critical}e.isCriticalImpact=q;function G(w){return w._raw.hidden}e.isHidden=G;function D(w){return w.rawId}e.getRawId=D;function Y(w){return w.lensId===Ve.SpecialId.Plagiarism}e.isPlagiarism=Y;function fe(w){return Q(w)&&m.isSome(w.extraProperties.vox)}e.isVox=fe;function $(w){return w.alertType===He.Type.Takeaway}e.isTakeaway=$;function x(w){return w.alertType===He.Type.ShortenIt}e.isShortenIt=x;function Re(w){return w.alertType===He.Type.ToneAI}e.isToneAI=Re;function N(w){return w.alertType===He.Type.EthicalAI}e.isEthicalAI=N;function P(w){return m.isSome(w.extraProperties.citationDetection)}e.isCitationDetection=P;function s(w){return Qt.isOneGap(w.extraProperties.cardType)}e.isOneGap=s;function S(w){return aa.gt(nr.ord)(w.progress,nr.MIN)}e.isRated=S;function M(w){return V(w)}e.isPremium=M;function c(w){return(0,$e.pipe)(w.extraProperties.freePremium,m.contains("unlocked"))}e.isFreePremium=c;function p(w){return(0,$e.pipe)(w.extraProperties.freePremium,m.contains("locked"))}e.isLocked=p;function U(w){return(0,$e.pipe)(w.extraProperties.freePremium,m.contains("uphook"))}e.isLockedUIUphook=U;function j(w){return p(w)||c(w)||U(w)}e.isLockedUIAlert=j;function ae(w){return w.view===ht.View.priority}e.isPriority=ae;function V(w){return w.lensId===Ve.SpecialId.Premium}e.isInPremiumLens=V;function Q(w){return w.alertType===He.Type.Default||w.alertType===He.Type.Super||w.alertType===He.Type.Takeaway||w.alertType===He.Type.Synfony||w.alertType===He.Type.ShortenIt||w.alertType===He.Type.ToneAI||w.alertType===He.Type.EthicalAI||w.alertType===He.Type.SuggestedSnippet||w.alertType===He.Type.KnowledgeHubSuggestedTerm}e.isApplicableAlert=Q;function me(w){return _(w)&&Q(w)}e.isRegisteredApplicableAlert=me;function Ie(w){return w.alertType===He.Type.Super}e.isSuperAlert=Ie;function Ee(w){return w.alertType===He.Type.SuggestedSnippet}e.isSuggestedSnippet=Ee;function Ge(w){return w.alertType===He.Type.KnowledgeHubSuggestedTerm}e.isKnowledgeHubSuggestedTerm=Ge;function Ke(w){return He.isRegistered(w)&&Xa(He.isVbar,He.isWithTeaser)(w)&&!He.isPlagiarism(w)&&!He.isRated(w)&&!He.isSuperAlert(w)}e.isCacheable=Ke;function K(w){return w.extraProperties.vbar}e.isVbar=K;function pe(w){return w.extraProperties.underlineWithTeaser}e.isWithTeaser=pe;function De(w){return w.belongsToAllAlerts}e.belongsToAllAlerts=De;function Ze(w){return He.belongsToAllAlerts(w)&&He.isPriority(w)}e.belongsToPriorityLens=Ze;function rt(w){return He.belongsToAllAlerts(w)&&(0,$e.pipe)(m.fromNullable(w.prediction),m.flatten,m.exists(he=>he==="takeaways"))}e.belongsToPredictionTakeaways=rt;function W(w){return He.belongsToAllAlerts(w)&&(0,$e.pipe)(m.fromNullable(w.prediction),m.flatten,m.exists(he=>he==="emogenie"))}e.belongsToPredictionEmogenie=W;function J(w){return ht.belongsToAnySpecialCategory(w._raw)}e.belongsToAnySpecialCategory=J;function ne(w){return ht.belongsToSpecialCategory(w._raw)}e.belongsToSpecialCategory=ne;function Se(w){return He.State.getCheckingState(w.state)}e.getCheckingState=Se;function Xe(w){return w.references>0}e.inUse=Xe;function ot(w){return!He.isPlagiarism(w)&&w.mute===He.MuteStateType.Muted}e.isMuted=ot;function at(w){return He.isRegistered(w)&&w.extraProperties.bulkAcceptable&&w.alertType===He.Type.Default}e.isBulkAcceptable=at;function Tt(w){return w.inline===ht.Inline.inline}e.isInline=Tt;function Nt(w){return Q(w)&&m.isSome(w.extraProperties.drilldownTree)}e.hasDrilldownTree=Nt;function Wt(w){return!He.inUse(w)&&He.isNotRegistered(w)}e.shouldBeRemoved=Wt,function(w){w.snapshot=he=>({cardType:he.cardType,alternatives:he.alternatives.map(_e=>({type:_e.type,lengthAffected:_e.lengthAffected,delta:Xt.anonymizeTextAndStringAttrs(_e.delta)}))})}(e.Alternatives||(e.Alternatives={}));let Oe=1;function Pe(w,he){const _e=ht.Id.create("alert#"+String(Oe++)),Te=he&&he.cardLayout||Xn.CardLayout.mock,Ne=w===Ve.SpecialId.Plagiarism?{outcome:"Originality"}:Ve.isMainOutcomeId(w)?{outcome:Ve.OutcomeId.toRawOutcome(w)}:{},je=Ve.isPremiumId(w)?!0:he&&he.hidden;return pt(Pt(pt({},ht.mock),{id:_e,cardLayout:pt({},Te,Ne),hidden:je}),he)}function Ye(w){return Math.trunc(Math.random()*w)}let ze=0;function et(w,he,_e,Te,Ne){ze=ze+30;const je=_e&&typeof _e.start=="number"?_e.start:ze,Qe=_e&&typeof _e.end=="number"?_e.end:je+1,X=Te?Te.start:je,re=Te?Te.end:Qe,be=Pe(w,he),We={begin:X,end:re,highlightBegin:je,highlightEnd:Qe,transformJson:Ne?(0,$e.pipe)(Ne,m.toUndefined):$n.create({highlights:[{s:je,e:Qe}],alternatives:m.none})};return Object.assign(be,We),be}e.generate=et;function tt(w,he){const _e=w?$n.create({highlights:w.map(Ne=>({s:Ne.start,e:Ne.end})),alternatives:(0,$e.pipe)(Pn.fromArray(w),m.map(Pn.map(Ne=>({s:Ne.start,e:Ne.end}))),m.map(Ne=>Xn.Alternative.Group.fromSubalerts(Ne,[Xn.RawTransform.AbsAlternative.unsafeFromDelta({ops:[{insert:"Alternative 1_1",attributes:{type:Xn.RawTransform.Edit.Type.MAIN}}]}),Xn.RawTransform.AbsAlternative.unsafeFromDelta({ops:[{insert:"Alternative 2_1",attributes:{type:Xn.RawTransform.Edit.Type.MAIN}}]})])))}):ht.mockWithSubalerts.subalerts,Te=w?w.map((Ne,je)=>"Highlight_"+je):ht.mockWithSubalerts.highlightText;return pt(Pt(pt({},ht.mockWithSubalerts),{labels:ht.mockWithSubalerts.labels,highlightText:Te,subalerts:_e}),he)}e.generateWithSubAlerts=tt;let de=1;function ue(w,he,_e){const Te=_e&&_e.start||Ye(ze=ze+1),Ne=pt({},ht.mockPlagiarism,he),je=_e&&_e.end||Te+1+Ye(20),Qe={id:ht.Id.create("plagiarismAlert#"+String(de++)),begin:Te,end:je,highlightBegin:Te,highlightEnd:je,highlightText:[w],transformJson:$n.create({highlights:[{s:Te,e:je}],alternatives:m.none})};return Object.assign(Ne,Qe),Ne}e.generatePlagiarism=ue;function ke(w,he){return w.source===he.source&&(w.source==="web"&&(0,$e.pipe)(m.map2((_e,Te)=>_e===Te)(w.url,he.url),m.exists($e.identity))||w.source==="publication"&&(0,$e.pipe)(m.map2((_e,Te)=>_e===Te)(w.authors,he.authors),m.exists($e.identity)))}function oe(w,he){return w.title===he.title&&ke(w.plagiarismType,he.plagiarismType)}e.isPlagiarismSourceEqual=oe;function Le(w,he,_e,Te){let Ne;return ht.isHidden(w)?Ne=new HM(w,he,_e,Te):ht.isPlagiarism(w)?Ne=new zM(w,he,_e,Te):ht.isOneGap(w)?Ne=new $M(w,he,_e,Te):ht.withSubalerts(w)&&!ht.isEthicalAI(w)&&!ht.isCitationDetection(w)?Ne=new KM(w,he,_e,Te):ht.isTakeaway(w)?Ne=new Fp(w,he,_e,Te):ht.hasDrilldownTree(w)?Ne=new VM(w,he,_e,Te):ht.isShortenIt(w)?Ne=new Dp(w,he,_e,Te):ht.isToneAI(w)?Ne=new Lp(w,he,_e,Te):ht.isEthicalAI(w)?Ne=new qp(w,he,_e,Te):ht.isSuggestedSnippet(w)?Ne=new YM(w,he,_e,Te):ht.isKnowledgeHubSuggestedTerm(w)?Ne=new JM(w,he,_e,Te):Ne=new Wp(w,he,_e,Te),Ne}e.create=Le;var se=e.CRITICAL_GROUPS=new Set(["Spelling","Grammar","Punctuation","Fluency","Conventions"]);function we(w){return se.has(w)}e.isCriticalGroup=we;function Be(w){return w.getHighlightRanges().every(tn.isEmpty)}e.highlightsCollapsed=Be;function gt(w,he=!1){return(he||w.isValid)&&!w.allowDuplicates&&He.isRegistered(w)}e.isDuplicateCandidate=gt;function ft(w,he){if(!he.hasMatchingHighlightsWith(w,tn.ord.equals))return!1;const _e=w.toRawAlert(),Te=he.toRawAlert();return _e.group===Te.group&&_e.group==="Spelling"||_e.category===Te.category&&_e.point===Te.point}e.isDuplicatedBy=ft;function ye(w){return!w.disposed}e.isNotDisposed=ye})(He||(He={}));var QM=ht.matchBy(e=>tn.create(e.begin,e.end,{btype:Vt.Meta.Behavior.REPLACE}),()=>tn.empty,()=>tn.empty);function tv(e,t){return t.highlights.map(n=>tn.create(n.s,n.e,{vtype:n.type==="focus"?Vt.Meta.View.FOCUS:n.type==="enclosing"?Vt.Meta.View.ENCLOSING:n.type==="main_start"?Vt.Meta.View.MAIN_START:Vt.Meta.View.MAIN,btype:e}))}function Nu(e){const t=e.updatable===!0?Vt.Meta.Behavior.HIGHLIGHT_UPDATABLE:Vt.Meta.Behavior.HIGHLIGHT;return ht.match(e,n=>[tn.create(n.highlightBegin,n.highlightEnd,{vtype:Vt.Meta.View.MAIN,btype:t})],n=>tv(t,n.transformJson),n=>tv(t,n.subalerts))}var nv=m.map(e=>(0,$e.pipe)(e.context,Pn.map(t=>tn.create(t.s,t.e,{btype:Vt.Meta.Behavior.CONTEXT}))));function Lo(e){return ht.match(e,()=>m.none,t=>nv(t.transformJson.alternatives),t=>nv(t.subalerts.alternatives))}var qo=ht.matchBy(e=>Fe.left(QM(e)),e=>Fe.right(e.transformJson.alternatives),e=>Fe.right(e.subalerts.alternatives));function XM(e){return e.replacements.map(t=>({label:t,replacementTexts:[t],matches:1}))}function ZM(e){return ht.match(e,()=>t=>{bt(ht.withPosition(t),"raw alert should be withPosition"),t.transforms!==void 0&&bt(t.transforms.length===t.replacements.length,"Every transform should have replacement, bro, tr: ".concat(t.transforms,", rep: ").concat(t.replacements,". AlertId: ").concat(t.id))},()=>t=>bt(ht.withTransformJson(t),"raw alert should be withTransform"),()=>t=>{bt(ht.withSubalerts(t),"raw alert should be withSubalerts"),bt((0,$e.pipe)(t.subalerts.alternatives,m.forAll(n=>n.alternatives.length===t.labels.length)),"SuperAlert doesnt have any labels OR transformJson alternatives length is not equal to the number of labels",()=>t.toString())})}var ss;(function(e){function t(n,r){return bt(n.id===r.id,"can not create UpdatedAlertWithOldAlert from alerts with different ids",()=>JSON.stringify({olda:Jr.show.show(n),newa:Jr.show.show(r)})),bt(n.version<r.version,"old alert should have different revision than new alert",()=>JSON.stringify({olda:Jr.show.show(n),newa:Jr.show.show(r)})),bt(He.isNotDisposed(r.alert),"new alert can not be disposed",()=>JSON.stringify({olda:n.alert.toString(),newa:r.alert.toString()})),[n,r]}e.create=t,e.show=(0,_p.getTupleShow)(Jr.show,Jr.show)})(ss||(ss={}));var jp=rw(Nn.Logging.getLogger),Ma;(function(e){let t;(function(c){c.default="default",c.super="super",c.plagiarism="plagiarism",c.premium="premium",c.takeaway="takeaway",c.synfony="synfony",c.shortenIt="shortenIt",c.toneAI="toneAI",c.ethicalAI="ethicalAI",c.suggestedSnippet="suggestedSnippet",c.knowledgeHubSuggestedTerm="knowledgeHubSuggestedTerm",c.writingExpertVbar="writingExpertVbar",c.writingExpertWithTeaser="writingExpertWithTeaser"})(t=e.Type||(e.Type={}));function n(c){return Xa(r,i,h,d,_,R,g,C,x)(c)}e.isApplicableAlert=n;function r(c){return c.type===t.default}e.isDefault=r;function i(c){return c.type===t.super}e.isSuper=i;function a(c){return c.type===t.plagiarism}e.isPlagiarism=a;function u(c){return c.type===t.premium}e.isPremium=u;function o(c){return(c.type===t.premium&&c.lensName)===Ve.SpecialId.Plagiarism}e.isPremiumPreviewPlagiarism=o;function l(c){return c.isFree}e.isFree=l;function f(c){return c.view==="priority"}e.isPriority=f;function h(c){return c.type===t.takeaway}e.isTakeaway=h;function d(c){return c.type===t.shortenIt}e.isShortenIt=d;function _(c){return c.type===t.toneAI}e.isToneAI=_;function R(c){return c.type===t.ethicalAI}e.isEthicalAI=R;function A(c){return c.type===t.suggestedSnippet}e.isSuggestedSnippet=A;function E(c){return c.patternName==="KnowledgeHub/SuggestedTerm/SuggestedTerm"}e.isKnowledgeHubSuggestedTerm=E;function g(c){return c.type===t.writingExpertVbar}e.isVBar=g;function I(c){return c.type===t.writingExpertWithTeaser}e.isWritingExpertWithTeaser=I;function C(c){return c.type===t.writingExpertWithTeaser||c.type===t.writingExpertVbar}e.isWritingExpert=C;function k(c){return c.patternName==="WritingExpert/Rewrite/TextEvaluation"&&!g(c)&&!I(c)}e.isWritingExpertDebug=k;function L(c){return!g(c)}e.isHoverableInline=L;function q(c){return r(c)&&Qt.isFullSentence(c.extraProperties.cardType)}e.isFullSentence=q;function G(c){return r(c)&&Qt.isSynfony(c.extraProperties.cardType)}e.isSynfony=G;function D(c){return r(c)&&Qt.isOneGap(c.extraProperties.cardType)}e.isOneGap=D;function Y(c){return r(c)&&c.extraProperties.isInQuotes}e.isInQuotes=Y;function fe(c){return He.State.isBulkApplied(c.state)}e.isBulkApplied=fe;function $(c){return He.State.isBeingApplied(c.state)}e.isBeingApplied=$;function x(c){return(0,lr.pipe)(c.freePremium,m.contains("unlocked"))}e.isFreePremium=x;function Re(c){return(0,lr.pipe)(c.freePremium,m.contains("locked"))}e.isLocked=Re;function N(c){return(0,lr.pipe)(c.freePremium,m.contains("uphook"))}e.isLockedUIUphook=N;function P(c){return Re(c)||x(c)||N(c)}e.isLockedUIAlert=P;var s=e.eq=BO.fromEquals((c,p)=>c.type===p.type&&dc.ordId.equals(c,p));e.snapshot=c=>({id:c.id,type:c.type,state:c.state,title:c.title,view:c.view,lensId:c.lensId,allowUpdate:c.allowUpdate,belongsToAllAlerts:c.belongsToAllAlerts,alternatives:(0,lr.pipe)(c,m.fromPredicate(Ma.isApplicableAlert),m.chain(p=>p.getTransform()),m.chain((0,lr.flow)(Kt.pick("content"),qO.map(He.Alternatives.snapshot),m.fromEither)),m.toNullable)});function S(c){const p={id:c.id,state:c.state,title:c.title,progress:c.progress,lensId:c.lensId,lensType:c.lensType,lensName:c.toLensAlert().lensName,alertType:c.alertType,lensPriority:c.lensPriority,getHighlightRanges:c.getHighlightRanges,hasNestedHighlights:c.hasNestedHighlights,highlightTexts:c.highlightTexts,allowUpdate:c.allowUpdate,miniCardTitle:c.miniCardTitle,todoAction:c.todoAction,patternName:c.patternName,patternNameQualifier:c.patternNameQualifier,belongsToAllAlerts:c.belongsToAllAlerts,hashCode:()=>c.hashCode(),equals:function(U){return s.equals(this,U)},toJSON:function(){return Ma.snapshot(this)},toString:function(){return JSON.stringify(this)},isFree:c.isFree,view:c.view,bundleInfo:c.bundleInfo,prediction:c.prediction,dismissSurvey:c.dismissSurvey,acceptSurvey:c.acceptSurvey,gbPrompt:c.gbPrompt,freePremium:c.extraProperties.freePremium,result:c.result};if(He.isTakeaway(c)){const U=Pt(pt({},p),{type:t.takeaway,examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform,takeawayScore:c.takeawayScore,takeawayIsLikelyToBeRead:c.takeawayIsLikelyToBeRead,takeawayFeedback:c.takeawayFeedback});return(0,lr.unsafeCoerce)(U)}else{if(He.isSuperAlert(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{type:t.super,examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform,labels:c.labels}));if(He.isShortenIt(c)){const U=Pt(pt({},p),{type:t.shortenIt,examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform,sentenceCount:c.sentenceCount,wordCount:c.wordCount,compressionRatio:c.compressionRatio,summaryState:c.summaryState,dismissedTransformGroups:new Set(c.dismissedTransformGroups),transformGroups:new Set(c.transformGroups)});return(0,lr.unsafeCoerce)(U)}else{if(He.isToneAI(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{type:t.toneAI,examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform,toneAlternatives:c.toneAlternatives,selectedToneAlternativeIdx:c.selectedToneAlternativeIdx}));if(He.isEthicalAI(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{type:t.ethicalAI,examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform,externalLink:c.externalLink,emojiID:c.emojiID,bannerColors:c.bannerColors,isFlaggable:c.isFlaggable,shouldDismissAfterOpeningLink:c.shouldDismissAfterOpeningLink,highlightBackgroundColor:c.highlightBackgroundColor,highlightUnderlineColor:c.highlightUnderlineColor}));if(He.isSuggestedSnippet(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{type:t.suggestedSnippet,examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform,snippetText:c.snippetText,libLink:c.libLink,snippetsTrigger:c.snippetsTrigger}));if(He.isKnowledgeHubSuggestedTerm(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{type:t.knowledgeHubSuggestedTerm,examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform,knowledgeHubTermCreationUrl:c.knowledgeHubTermCreationUrl}));if(He.isPlagiarism(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{type:t.plagiarism,cardId:c.cardId,plagiarismType:c.plagiarismType}));if(He.isApplicableAlert(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{type:M(c),examples:c.examples,explanation:c.explanation,details:c.details,extraProperties:c.extraProperties,getTransform:()=>c.transform}));if(He.isPremium(c))return(0,lr.unsafeCoerce)(Pt(pt({},p),{categoryHuman:c.categoryHuman,type:t.premium}));throw new Vi("Not supported type of alert, must be either Alert, SuperAlert or PlagiarismAlert, was: ".concat(c.constructor.name,"(").concat(c.lensType,")"))}}}e.fromModel=S;function M(c){return He.isVbar(c)?t.writingExpertVbar:He.isWithTeaser(c)?t.writingExpertWithTeaser:t.default}})(Ma||(Ma={}));var ds;(function(e){(function(t){t.collapseButtonClick="collapseButtonClick"})(e.Type||(e.Type={}))})(ds||(ds={}));var At;(function(e){(function(W){W.switchToNext="switchToNext",W.switchToClosestByViewport="switchToClosestByViewport",W.alertMinicardButtonClick="alertMinicardButtonClick",W.cardMatchesNavigationButtonClick="cardMatchesNavigationButtonClick",W.openSetGoals="setGoals",W.alertCardShow="alertCardShow",W.moreAlertsButtonShow="moreAlertsButtonShow",W.alternativeReplacementRadioButtonClick="alternativeReplacementRadioButtonClick",W.alertApply="alertApply",W.alertFeedback="alertFeedback",W.hover="hover",W.onboardingClose="onboardingClose",W.muteAlertCategory="muteAlertCategory",W.undoMuteAlertCategory="undoMuteAlertCategory",W.premiumTrialFooterCtaClick="premiumTrialFooterCtaClick",W.toSignIn="toSignIn",W.moreActionsButtonToggle="moreActionsButtonToggle",W.openPreferences="preferences",W.dismissMuteQuotedAdvice="dismissMuteQuotedAdvice",W.fullSentenceHighlightChangesToggle="fullSentenceHighlightChangesToggle",W.muteQuotedAdviceShow="muteQuotedAdviceShow",W.alertIgnore="alertIgnore",W.alertResolve="alertResolve",W.alertIgnoreFormSubmit="alertIgnoreFormSubmit",W.alertApplyFormSubmit="alertApplyFormSubmit",W.alertIgnoreFeedbackFormShow="alertIgnoreFeedbackFormShow",W.gbPromptApply="gbPromptApply",W.gbPromptCreateRule="gbPromptCreateRule",W.gbPromptDismiss="gbPromptDismiss",W.gbPromptShow="gbPromptShow",W.takeawayCorrectlyDetected="takeawayCorrectlyDetected",W.takeawayIncorrectlyDetected="takeawayIncorrectlyDetected",W.takeawayDismiss="takeawayDismiss",W.takeawayResolve="takeawayResolve",W.changeUserInput="changeUserInput",W.focusUserInput="focusUserInput",W.miniItemClick="miniItemClick",W.bulkApply="bulkApply",W.bulkDismiss="bulkDismiss",W.bulkIgnore="bulkIgnore",W.bulkHighlight="bulkHighlight",W.bulkIndividualUndo="bulkIndividualUndo",W.bulkUndo="bulkUndo",W.bulkAcceptItemShow="bulkAcceptItemShow",W.bulkLooksGood="bulkLooksGood",W.mutedAlertSuccessShow="mutedAlertSuccessShow",W.mutedAlertSuccessDismissed="mutedAlertSuccessDismissed",W.mutedAlertSuggestionManagementClick="mutedAlertSuggestionManagementClick",W.toneAIChangeToneAlternative="toneAIChangeToneAlternative",W.shortenItReviewEdit="shortenItReviewEdit",W.shortenItDismissEdit="shortenItDismissEdit",W.shortenItKeepEdit="shortenItKeepEdit",W.sduiCardAction="sduiCardAction",W.openIdeasGallery="openIdeasGallery",W.ethicalAIOpenExternalLink="ethicalAIOpenExternalLink",W.createSnippet="createSnippet",W.snippetsOpenExternalLink="manageSnippetsOpenExternalLink",W.suggestedSnippetSuccessDismissed="suggestedSnippetSuccessDismissed",W.listItemClick="listItemClick"})(e.Type||(e.Type={}));let t;(function(W){W.defaultCard="defaultCard",W.superCard="superCard"})(t=e.CardType||(e.CardType={}));function n(W){switch(W.activeAlert.type){case Ma.Type.super:return t.superCard;case Ma.Type.default:default:return t.defaultCard}}e.getCardType=n;function r(W){return W.type===At.Type.alertApply}e.isAlertApplyAction=r;function i(W){return W.type===At.Type.alertFeedback}e.isAlertFeedbackAction=i;function a(W){return W.type===At.Type.takeawayCorrectlyDetected}e.isTakeawayCorrectlyDetectedAction=a;function u(W){return W.type===At.Type.takeawayIncorrectlyDetected}e.isTakeawayIncorrectlyDetectedAction=u;function o(W){return W.type===At.Type.takeawayDismiss}e.isTakeawayDismissAction=o;function l(W){return W.type===At.Type.takeawayResolve}e.isTakeawayResolveAction=l;function f(W){return W.type===At.Type.takeawayCorrectlyDetected||W.type===At.Type.takeawayIncorrectlyDetected}e.isTakeawayDetectionFeedbackAction=f;function h(W){return f(W)||W.type===At.Type.takeawayDismiss||W.type===At.Type.takeawayResolve}e.isTakeawayAction=h;function d(W){return W.type===At.Type.toneAIChangeToneAlternative}e.isToneAIChangeToneAlternativeAction=d;function _(W){return W.type===At.Type.ethicalAIOpenExternalLink}e.isEthicalAIOpenExternalLinkAction=_;function R(W){return W.type===At.Type.snippetsOpenExternalLink}e.isSnippetsOpenExternalLink=R;function A(W){return W.type===At.Type.alertIgnore}e.isAlertIgnoreAction=A;function E(W){return W.type===At.Type.alertResolve}e.isAlertResolveAction=E;function g(W){return W.type===At.Type.alertIgnoreFormSubmit}e.isAlertIgnoreFeedbackFormSubmit=g;function I(W){return W.type===At.Type.alertApplyFormSubmit}e.isAlertApplyFeedbackFormSubmit=I;function C(W){return W.type===At.Type.gbPromptApply}e.isGbPromptApply=C;function k(W){return W.type===At.Type.gbPromptCreateRule}e.isGbPromptCreateRule=k;function L(W){return W.type===At.Type.gbPromptDismiss}e.isGbPromptDismiss=L;function q(W){return W.type===At.Type.gbPromptShow}e.isGbPromptShow=q;function G(W){return W.type===At.Type.muteAlertCategory}e.isMuteCategoryAction=G;function D(W){return W.type===At.Type.undoMuteAlertCategory}e.isUndoMuteCategoryAction=D;function Y(W){return W.type===At.Type.mutedAlertSuccessDismissed}e.isMutedAlertCardDismissedAction=Y;function fe(W){return W.type===At.Type.createSnippet}e.isCreateSnippetAction=fe;function $(W){return W.type===At.Type.suggestedSnippetSuccessDismissed}e.isSuggestedSnippetSuccessDismissed=$;function x(W){return W.type===At.Type.hover}e.isHoverAction=x;function Re(W){return W.type===At.Type.alertCardShow}e.isAlertCardShow=Re;function N(W){return W.type===At.Type.bulkAcceptItemShow}e.isBulkAcceptItemShow=N;function P(W){return W.type===At.Type.switchToClosestByViewport}e.isSwitchToClosestByViewport=P;function s(W){return W.type===At.Type.alertMinicardButtonClick}e.isAlertMinicardButtonClick=s;function S(W){return W.type===At.Type.miniItemClick}e.isMiniItemClick=S;function M(W){return W.type===ds.Type.collapseButtonClick}e.isChecklistItemCollapseButtonClick=M;function c(W){return W.type===At.Type.onboardingClose}e.isOnboardingClose=c;function p(W){return W.type===At.Type.openSetGoals||W.type===At.Type.openPreferences}e.isNavigation=p;function U(W){return W.type===At.Type.dismissMuteQuotedAdvice}e.isDismissMuteQuotedAdvice=U;function j(W){return W.type===At.Type.muteQuotedAdviceShow}e.isMuteQuotedAdviceShow=j;function ae(W){return W.type===At.Type.changeUserInput}e.isChangeUserInput=ae;function V(W){return W.type===At.Type.focusUserInput}e.isFocusUserInput=V;function Q(W){return W.type===At.Type.bulkApply}e.isBulkApply=Q;function me(W){return W.type===At.Type.bulkDismiss}e.isBulkDismiss=me;function Ie(W){return W.type===At.Type.bulkIgnore}e.isBulkIgnore=Ie;function Ee(W){return W.type===At.Type.bulkHighlight}e.isBulkHighlight=Ee;function Ge(W){return W.type===At.Type.bulkUndo}e.isBulkUndo=Ge;function Ke(W){return W.type===At.Type.bulkIndividualUndo}e.isBulkIndividualUndo=Ke;function K(W){return W.type===At.Type.bulkLooksGood}e.isBulkLooksGood=K,e.isBulkAction=Xa(Q,me,Ie,Ee,Ke,K,Ge);function pe(W){return W.type===At.Type.mutedAlertSuggestionManagementClick}e.isMutedAlertSuggestionsManagementClick=pe;function De(W){return W.type===At.Type.sduiCardAction}e.isSDUICardAction=De,function(W){function J(ne,Se){return ne.actions.some(Xe=>Xe.type===Se)}W.hasAction=J}(e.ProxySduiCardAction||(e.ProxySduiCardAction={}));function Ze(W){return W.type===At.Type.openIdeasGallery}e.isOpenIdeasGallery=Ze;function rt(W){return W.type===At.Type.listItemClick}e.isListItemClick=rt,e.hasClickPoint=Xa(At.isBulkHighlight,At.isAlertMinicardButtonClick,At.isListItemClick)})(At||(At={}));var rv;(function(e){let t;(function(i){i.drilldown="synfonyDrilldownSelect",i.back="synfonyDrilldownBack"})(t=e.Kind||(e.Kind={}));function n(i){return i.type===t.drilldown}e.isDrilldown=n;function r(i){return i.type===t.back}e.isBack=r})(rv||(rv={}));var iv;(function(e){function t(i){return i.type===At.Type.shortenItReviewEdit}e.isReviewEdit=t;function n(i){return i.type===At.Type.shortenItDismissEdit}e.isDismissEdit=n;function r(i){return i.type===At.Type.shortenItKeepEdit}e.isKeepEdit=r})(iv||(iv={}));var av;(function(e){let t;(function(a){a.startTransitionTo="startTransitionTo",a.completeTransitionTo="completeTransitionTo"})(t=e.Kind||(e.Kind={}));function n(a){return a.type===t.startTransitionTo}e.isStartTransitionTo=n;function r(a){return n(a)&&a.transition.type==="expanded"}e.isCardExpand=r;function i(a){return a.type===t.completeTransitionTo}e.isCompleteTransitionTo=i})(av||(av={}));var uv;(function(e){let t;(function(r){r.dismissBatch="dismissBatch"})(t=e.Kind||(e.Kind={}));function n(r){return r.type===t.dismissBatch}e.isDismissAlertsBatchAction=n})(uv||(uv={}));var ov;(function(e){let t;(function(r){r.setAcademicDomainAndCitationStyle="setAcademicDomainAndCitationStyle"})(t=e.Kind||(e.Kind={}));function n(r){return r.type===t.setAcademicDomainAndCitationStyle}e.isSetAcademicDomainAndCitationStyleAction=n})(ov||(ov={}));var Qr={};In(Qr,{ActionInteractPopoverInteraction:()=>vc,ActionNotifyUserAction:()=>hc,ActionOpenGrammarlyGoEntryPoint:()=>mc,AnimationName:()=>gc,Blur:()=>pc,ButtonKind:()=>_c,ButtonShape:()=>yc,ButtonState:()=>bc,Color:()=>Ic,ComponentKnownName:()=>Sc,ContentAssistantFeedFilteringCondition:()=>Ec,ContentAssistantFeedOrderingDirection:()=>Ac,ContentProgressBarState:()=>Rc,HorizontalAlign:()=>wc,IconKnownName:()=>Tc,LensKind:()=>Oc,Opacity:()=>Cc,Position:()=>Mc,Radius:()=>kc,Shadow:()=>Pc,Space:()=>Nc,TextFormat:()=>Wc,TextSize:()=>Fc,TimeCurve:()=>Uc,TooltipAlignment:()=>Dc,VerticalAlign:()=>Lc});var hc;(function(e){e.Click="click",e.SelectSliderChoice="selectSliderChoice",e.Focus="focus",e.CloseAssistant="closeAssistant"})(hc||(hc={}));var vc;(function(e){e.Dismiss="dismiss",e.Fulfill="fulfill"})(vc||(vc={}));var mc;(function(e){e.Ideation="ideation",e.QuickReply="quickReply",e.QuickRewrite="quickRewrite",e.Rewrite="rewrite",e.PushRewrite="pushRewrite"})(mc||(mc={}));var gc;(function(e){e.FadeIn="fadeIn",e.FadeOut="fadeOut",e.SlideLeft="slideLeft",e.SlideRight="slideRight"})(gc||(gc={}));var pc;(function(e){e.Low="low",e.Medium="medium",e.High="high"})(pc||(pc={}));var _c;(function(e){e.Primary="primary",e.Secondary="secondary",e.Toggle="toggle",e.Yellow="yellow",e.Outlined="outlined",e.Link="link",e.DarkPrimary="darkPrimary",e.DarkSecondary="darkSecondary",e.GgoPrimary="ggoPrimary"})(_c||(_c={}));var yc;(function(e){e.Round="round",e.Square="square"})(yc||(yc={}));var bc;(function(e){e.Enabled="enabled",e.Disabled="disabled",e.Deselected="deselected",e.Selected="selected",e.Hidden="hidden"})(bc||(bc={}));var Ic;(function(e){e.CoreNeutral90="CoreNeutral90",e.CoreNeutral80="CoreNeutral80",e.CoreNeutral70="CoreNeutral70",e.CoreNeutral60="CoreNeutral60",e.CoreNeutral50="CoreNeutral50",e.CoreNeutral40="CoreNeutral40",e.CoreNeutral30="CoreNeutral30",e.CoreNeutral20="CoreNeutral20",e.CoreNeutral10="CoreNeutral10",e.CoreNeutral1="CoreNeutral1",e.CoreNeutral0="CoreNeutral0",e.CoreGreen70="CoreGreen70",e.CoreGreen60="CoreGreen60",e.CoreGreen50="CoreGreen50",e.CoreGreen40="CoreGreen40",e.CoreGreen30="CoreGreen30",e.CoreGreen20="CoreGreen20",e.CoreGreen10="CoreGreen10",e.CoreGreen1="CoreGreen1",e.CoreBlue70="CoreBlue70",e.CoreBlue60="CoreBlue60",e.CoreBlue50="CoreBlue50",e.CoreBlue40="CoreBlue40",e.CoreBlue30="CoreBlue30",e.CoreBlue20="CoreBlue20",e.CoreBlue10="CoreBlue10",e.CoreBlue1="CoreBlue1",e.CoreRed70="CoreRed70",e.CoreRed60="CoreRed60",e.CoreRed50="CoreRed50",e.CoreRed40="CoreRed40",e.CoreRed30="CoreRed30",e.CoreRed20="CoreRed20",e.CoreRed10="CoreRed10",e.CoreRed1="CoreRed1",e.CoreYellow80="CoreYellow80",e.CoreYellow70="CoreYellow70",e.CoreYellow60="CoreYellow60",e.CoreYellow50="CoreYellow50",e.CoreYellow40="CoreYellow40",e.CoreYellow30="CoreYellow30",e.CoreYellow20="CoreYellow20",e.CoreYellow10="CoreYellow10",e.CoreYellow1="CoreYellow1",e.CorePurple60="CorePurple60",e.CorePurple50="CorePurple50",e.CorePurple40="CorePurple40",e.CorePurple30="CorePurple30",e.CorePurple20="CorePurple20",e.CorePurple10="CorePurple10",e.CorePurple1="CorePurple1",e.CoreCyan60="CoreCyan60",e.CoreCyan50="CoreCyan50",e.CoreCyan40="CoreCyan40",e.CoreCyan30="CoreCyan30",e.CoreCyan20="CoreCyan20",e.CoreCyan10="CoreCyan10",e.CoreCyan1="CoreCyan1",e.CoreSky70="CoreSky70",e.CoreSky60="CoreSky60",e.CoreSky50="CoreSky50",e.CoreSky40="CoreSky40",e.CoreSky30="CoreSky30",e.CoreSky20="CoreSky20",e.CoreSky10="CoreSky10",e.CoreSky1="CoreSky1",e.CoreIndigo70="CoreIndigo70",e.CoreIndigo60="CoreIndigo60",e.CoreIndigo50="CoreIndigo50",e.CoreIndigo40="CoreIndigo40",e.CoreIndigo30="CoreIndigo30",e.CoreIndigo20="CoreIndigo20",e.CoreIndigo10="CoreIndigo10",e.CoreIndigo1="CoreIndigo1",e.CoreMagenta70="CoreMagenta70",e.CoreMagenta60="CoreMagenta60",e.CoreMagenta40="CoreMagenta40",e.CoreMagenta30="CoreMagenta30",e.CoreMagenta10="CoreMagenta10",e.CoreMagenta1="CoreMagenta1",e.CoreCoral60="CoreCoral60",e.CoreCoral50="CoreCoral50",e.CoreCoral40="CoreCoral40",e.CoreCoral30="CoreCoral30",e.CoreCoral10="CoreCoral10",e.CoreCoral1="CoreCoral1",e.CoreYellowBrand50="CoreYellowBrand50",e.CoreYellowBrand40="CoreYellowBrand40",e.CoreYellowBrand30="CoreYellowBrand30",e.CoreYellowBrand20="CoreYellowBrand20",e.CoreYellowBrand10="CoreYellowBrand10",e.CoreYellowBrand1="CoreYellowBrand1",e.CoreLime50="CoreLime50",e.CoreLime40="CoreLime40",e.CoreLime30="CoreLime30",e.CoreLime20="CoreLime20",e.CoreLime10="CoreLime10",e.CoreLime1="CoreLime1"})(Ic||(Ic={}));var Sc;(function(e){e.ButtonPrev="button:prev",e.ButtonNext="button:next",e.ButtonAccept="button:accept",e.ButtonDismiss="button:dismiss",e.StrongAlertRefBulkAccept="strongAlertRef:BulkAccept",e.StrongAlertRefBulkDismiss="strongAlertRef:BulkDismiss",e.StrongAlertRefBulkDismissBufferOuter="strongAlertRef:BulkDismissBufferOuter",e.StrongAlertRefUpgradeHook="strongAlertRef:UpgradeHook",e.StrongAlertRefConsolidatedLockedCard="strongAlertRef:ConsolidatedLockedCard",e.ButtonGoPremiumYellow="button:goPremiumYellow",e.AssistantCardToneInsights="assistantCard:toneInsights",e.AssistantCardPerformanceScore="assistantCard:performanceScore",e.AssistantFeedPerformanceScore="assistantFeed:performanceScore",e.ButtonPerformanceScore="button:performanceScore",e.GlobalPartPlagiarismWinFooter="globalPart:plagiarismWinFooter",e.GlobalPartPlagiarismWinHeader="globalPart:plagiarismWinHeader",e.GlobalPartWritingExpertWinFooter="globalPart:writingExpertWinFooter",e.GlobalPartWritingExpertWinHeader="globalPart:writingExpertWinHeader",e.GlobalPartPerformanceScoreCard="globalPart:performanceScoreCard",e.GlobalPartPerformanceScoreButton="globalPart:performanceScoreButton",e.GlobalPartWritingExpertState="globalPart:writingExpertState",e.GlobalPartAiStudioState="globalPart:aiStudioState"})(Sc||(Sc={}));var Ac;(function(e){e.Asc="asc",e.Desc="desc"})(Ac||(Ac={}));var Ec;(function(e){e.EqualTo="equalTo",e.NotEqualTo="notEqualTo"})(Ec||(Ec={}));var Rc;(function(e){e.Default="default",e.Loading="loading"})(Rc||(Rc={}));var wc;(function(e){e.Left="left",e.Center="center",e.Right="right"})(wc||(wc={}));var Tc;(function(e){e.Close="close",e.ArrowRight="arrow-right",e.ArrowLeft="arrow-left",e.Dictionary="dictionary",e.Gear="gear",e.Clarity="clarity",e.Correctness="correctness",e.Engagement="engagement",e.Delivery="delivery",e.Diamond="diamond",e.DiamondSmall="diamondSmall",e.Feedback="feedback",e.Sensitivity="sensitivity",e.ExternalLink="external-link",e.Sparkles="sparkles",e.Ignore="ignore",e.Info="info",e.Proofreader="proofreader",e.More="more",e.Mute="mute",e.Report="report",e.Controls="controls",e.Performance="performance",e.BulletList="bullet-list",e.Accept="accept",e.Copy="copy",e.GButtonSmall="gButtonSmall",e.NewSmall="newSmall",e.Edit="edit",e.User="user",e.Plagiarism="plagiarism",e.QuestionMark="questionMark",e.NewFeature="newFeature",e.Assistant="assistant",e.Warning="warning"})(Tc||(Tc={}));var Oc;(function(e){e.AllSuggestions="allSuggestions",e.Correctness="correctness",e.Clarity="clarity",e.Engagement="engagement",e.Delivery="delivery",e.StyleGuide="styleGuide",e.SmartGuidelines="smartGuidelines",e.Premium="premium"})(Oc||(Oc={}));var Cc;(function(e){e.D0="0",e.D01="0.1",e.D02="0.2",e.D03="0.3",e.D04="0.4",e.D05="0.5",e.D06="0.6",e.D07="0.7",e.D08="0.8",e.D09="0.9",e.D1="1"})(Cc||(Cc={}));var Mc;(function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left"})(Mc||(Mc={}));var kc;(function(e){e.Radius0="Radius0",e.RadiusHalf="RadiusHalf",e.Radius1="Radius1",e.Radius2="Radius2",e.Radius3="Radius3"})(kc||(kc={}));var Pc;(function(e){e.Low="low",e.Medium="medium",e.High="high",e.BottomPanel="bottomPanel",e.TopPanel="topPanel"})(Pc||(Pc={}));var Nc;(function(e){e.D0="0",e.D0125="0.125",e.D025="0.25",e.D03125="0.3125",e.D0375="0.375",e.D05="0.5",e.D075="0.75",e.D1="1",e.D125="1.25"})(Nc||(Nc={}));var Wc;(function(e){e.Italic="italic",e.Bold="bold",e.StrikeoutHorizontal="strikeoutHorizontal",e.StrikeoutDiagonal="strikeoutDiagonal",e.Outline="outline"})(Wc||(Wc={}));var Fc;(function(e){e.Small="small",e.Regular="regular",e.Medium="medium",e.HeadingLevel1="headingLevel1",e.HeadingLevel3="headingLevel3",e.HeadingLevel4="headingLevel4"})(Fc||(Fc={}));var Uc;(function(e){e.Linear="linear",e.EaseIn="easeIn",e.EaseOut="easeOut",e.EaseInOut="easeInOut"})(Uc||(Uc={}));var Dc;(function(e){e.Auto="auto",e.Center="center",e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right",e.TopCenter="topCenter",e.TopLeft="topLeft",e.TopRight="topRight",e.BottomCenter="bottomCenter",e.BottomLeft="bottomLeft",e.BottomRight="bottomRight"})(Dc||(Dc={}));var Lc;(function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"})(Lc||(Lc={}));var nu={};In(nu,{Action:()=>zp,ActionApplyAlerts:()=>o_,ActionCloseCard:()=>n_,ActionClosePopover:()=>b_,ActionCopyToClipboard:()=>s_,ActionDisableAiStudioCheck:()=>P_,ActionDisableAudienceAdaptCheck:()=>M_,ActionDisablePlagiarismCheck:()=>w_,ActionDisableWritingExpertCheck:()=>O_,ActionEnableAiStudioCheck:()=>k_,ActionEnableAudienceAdaptCheck:()=>C_,ActionEnablePlagiarismCheck:()=>R_,ActionEnableWritingExpertCheck:()=>T_,ActionFocusAssistantCard:()=>m_,ActionHideHighlights:()=>xp,ActionHighlightAlert:()=>__,ActionInteractPopover:()=>S_,ActionInteractPopoverInteraction:()=>I_,ActionNativeOpenAssistant:()=>d_,ActionNativeOpenUserSatisfactionFeedback:()=>N_,ActionNewRevision:()=>p_,ActionNextCard:()=>r_,ActionNotify:()=>Kp,ActionNotifyUserAction:()=>Vp,ActionOpenCreateSnippetModal:()=>t_,ActionOpenFeedback:()=>e_,ActionOpenGrammarlyGo:()=>E_,ActionOpenGrammarlyGoEntryPoint:()=>A_,ActionOpenLearnMore:()=>Yp,ActionOpenLink:()=>f_,ActionOpenPerformanceScore:()=>Jp,ActionOpenSettings:()=>$p,ActionOpenToneDetector:()=>Qp,ActionPopAssistantFeed:()=>v_,ActionPrevCard:()=>i_,ActionPushAssistantFeed:()=>h_,ActionRemoveAlerts:()=>u_,ActionRemoveRoot:()=>a_,ActionSelectAlternative:()=>c_,ActionShowHighlights:()=>Zp,ActionStopApplyingAlerts:()=>y_,ActionSwitchView:()=>g_,ActionTransition:()=>l_,ActionUpgradeToPremium:()=>Xp,Actions:()=>jt,AnimationName:()=>vs,Behavior:()=>W_,BehaviorAnimationFadeIn:()=>U_,BehaviorAnimationFadeOut:()=>D_,BehaviorLifecycle:()=>q_,BehaviorPopoverAnchor:()=>L_,BehaviorStrongAlertRef:()=>F_,Behaviors:()=>Ji,Blur:()=>B_,BorderRadius:()=>md,BoxShadow:()=>j_,ButtonKind:()=>G_,ButtonShape:()=>H_,ButtonState:()=>z_,Color:()=>Tn,ComponentKnownName:()=>gd,ComponentMeta:()=>Ut,ComponentName:()=>Kn,ComponentNameKnown:()=>K_,ComponentNameUnknown:()=>V_,Content:()=>xt,ContentAlertsCount:()=>qy,ContentAlternativeChoice:()=>jy,ContentAlternativeChoiceAlterna:()=>By,ContentAlternativeSlider:()=>Yy,ContentAlternativeSliderChoice:()=>$y,ContentAlternativeSliderChoiceIcon:()=>Ky,ContentAssistantCard:()=>x_,ContentAssistantFeed:()=>Z_,ContentAssistantFeedFiltering:()=>X_,ContentAssistantFeedFilteringCondition:()=>Q_,ContentAssistantFeedOrdering:()=>J_,ContentAssistantFeedOrderingDirection:()=>Y_,ContentBlock:()=>_y,ContentBlockInnerSpacing:()=>py,ContentBox:()=>yy,ContentButton:()=>ky,ContentClickableText:()=>Dy,ContentCollapsedCard:()=>d0,ContentColumn:()=>my,ContentCount:()=>Ly,ContentDropDownMenuButton:()=>Oy,ContentGButton:()=>fy,ContentGButtonAiStudio:()=>ly,ContentGButtonAudienceAdapt:()=>cy,ContentGButtonDefault:()=>ny,ContentGButtonGetStarted:()=>ay,ContentGButtonPlagiarism:()=>uy,ContentGButtonProofit:()=>iy,ContentGButtonTone:()=>ry,ContentGButtonWritingExpert:()=>oy,ContentGlobalPart:()=>_0,ContentGlobalPartPlaceholder:()=>y0,ContentHorizontalRule:()=>p0,ContentIcon:()=>yd,ContentIconSource:()=>Cy,ContentIconSourceKnown:()=>pd,ContentIconSourceUrl:()=>_d,ContentImage:()=>My,ContentInlineCard:()=>ty,ContentLensesSwitchPanel:()=>hy,ContentLensesSwitchPanelLensSwitchButton:()=>dy,ContentList:()=>wy,ContentListItem:()=>Ry,ContentListItemSecondaryButton:()=>Ey,ContentListItemSecondaryButtonLabel:()=>Iy,ContentListItemSecondaryButtonLabelIcon:()=>Ay,ContentListItemSecondaryButtonLabelText:()=>Sy,ContentLongFormCard:()=>v0,ContentNativeExperimentalGbconsistencyUpsellFooter:()=>c0,ContentNativeExperimentalGbtoneInsightsUpsellFooter:()=>s0,ContentNativeFeedbackModal:()=>t0,ContentNativeGetStartedChecklistModal:()=>n0,ContentNativeInlineCardContent:()=>a0,ContentNativeKeyTakeawaysAssistantCard:()=>i0,ContentNativeLearnMoreModal:()=>xy,ContentNativePerformanceScoreButton:()=>u0,ContentNativeProofitModal:()=>r0,ContentNativeSettingsModal:()=>e0,ContentNativeSkillsList:()=>Qy,ContentNativeSkillsModal:()=>Jy,ContentNativeSkillsView:()=>Xy,ContentNativeToneInsightsModal:()=>Zy,ContentOverlay:()=>Fy,ContentOverlayObscuredContent:()=>Ny,ContentOverlayOverlay:()=>Wy,ContentPopoverStack:()=>ey,ContentProgressBar:()=>g0,ContentProgressBarState:()=>m0,ContentProofitButton:()=>sy,ContentRadioButtonsGroup:()=>f0,ContentRadioButtonsGroupOption:()=>l0,ContentRow:()=>gy,ContentScroll:()=>by,ContentSelectableDropDownMenu:()=>Ty,ContentShortFormCard:()=>h0,ContentSlider:()=>Vy,ContentSliderChoice:()=>zy,ContentSliderChoiceIcon:()=>Gy,ContentSliderChoiceIconIcon:()=>bd,ContentSliderChoiceIconIconSource:()=>Hy,ContentSticker:()=>Py,ContentStrongAlertRef:()=>vy,ContentText:()=>$_,ContentTooltip:()=>Uy,ContentViewStack:()=>o0,FeedProperties:()=>b0,FeedReference:()=>I0,HorizontalAlign:()=>Id,IconContent:()=>dl,IconKnownName:()=>S0,Id:()=>ut,LensKind:()=>A0,Menu:()=>w0,MenuSection:()=>R0,MenuSectionItem:()=>E0,Opacity:()=>Sd,Percentage:()=>ms,PopoverView:()=>Ad,PopoverViewAnchor:()=>T0,PopoverViewAnchorComponent:()=>O0,PopoverViewAnchorGButton:()=>C0,PopoverViewAnchorNativeComponent:()=>M0,Position:()=>k0,Radius:()=>Wu,RemSize:()=>ni,Root:()=>ak,Select:()=>N0,SelectItem:()=>P0,SelectedView:()=>hl,Shadow:()=>W0,Space:()=>Bi,Spacing:()=>vl,TextFormat:()=>ml,TextSize:()=>gl,TimeCurve:()=>Ed,TooltipAlignment:()=>F0,VerticalAlign:()=>Rd,interpreter:()=>Qa});function hs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xM(e){if(Array.isArray(e))return e}function ek(e){if(Array.isArray(e))return hs(e)}function Gp(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tk(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nk(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rk(e){return xM(e)||Gp(e)||Hp(e)||tk()}function ik(e){return ek(e)||Gp(e)||Hp(e)||nk()}function Hp(e,t){if(e){if(typeof e=="string")return hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hs(e,t)}}function Sn(e){var t,n=rk(Object.keys(e).map(function(a){return e[a]})),r=n[0],i=n.slice(1);return Ae(function(a){return(t=a).literal.apply(t,[r].concat(ik(i)))})}var ak=Ae(function(e){return xt(e)}),zp=Ae(function(e){var t;return e.sum("type")((t={},t.notify=Kp(e),t.openSettings=$p(e),t.openLearnMore=Yp(e),t.openPerformanceScore=Jp(e),t.openToneDetector=Qp(e),t.upgradeToPremium=Xp(e),t.showHighlights=Zp(e),t.hideHighlights=xp(e),t.openFeedback=e_(e),t.openCreateSnippetModal=t_(e),t.closeCard=n_(e),t.nextCard=r_(e),t.prevCard=i_(e),t.removeRoot=a_(e),t.removeAlerts=u_(e),t.applyAlerts=o_(e),t.selectAlternative=c_(e),t.transition=l_(e),t.openLink=f_(e),t.copyToClipboard=s_(e),t.nativeOpenAssistant=d_(e),t.pushAssistantFeed=h_(e),t.popAssistantFeed=v_(e),t.focusAssistantCard=m_(e),t.switchView=g_(e),t.newRevision=p_(e),t.highlightAlert=__(e),t.stopApplyingAlerts=y_(e),t.closePopover=b_(e),t.interactPopover=S_(e),t.openGrammarlyGo=E_(e),t.enablePlagiarismCheck=R_(e),t.disablePlagiarismCheck=w_(e),t.enableWritingExpertCheck=T_(e),t.disableWritingExpertCheck=O_(e),t.enableAudienceAdaptCheck=C_(e),t.disableAudienceAdaptCheck=M_(e),t.enableAiStudioCheck=k_(e),t.disableAiStudioCheck=P_(e),t.nativeOpenUserSatisfactionFeedback=N_(e),t))}),Vp=Sn(hc),Kp=Ae(function(e){return e.intersect(e.partial({sourceId:ut(e)}))(e.struct({type:e.literal("notify"),userAction:Vp(e)}))}),$p=Ae(function(e){return e.struct({type:e.literal("openSettings")})}),Yp=Ae(function(e){return e.struct({type:e.literal("openLearnMore")})}),Jp=Ae(function(e){return e.struct({type:e.literal("openPerformanceScore")})}),Qp=Ae(function(e){return e.struct({type:e.literal("openToneDetector")})}),Xp=Ae(function(e){return e.struct({type:e.literal("upgradeToPremium")})}),Zp=Ae(function(e){return e.struct({type:e.literal("showHighlights")})}),xp=Ae(function(e){return e.struct({type:e.literal("hideHighlights")})}),e_=Ae(function(e){return e.struct({type:e.literal("openFeedback")})}),t_=Ae(function(e){return e.struct({type:e.literal("openCreateSnippetModal"),snippetContent:e.string})}),n_=Ae(function(e){return e.struct({type:e.literal("closeCard")})}),r_=Ae(function(e){return e.struct({type:e.literal("nextCard")})}),i_=Ae(function(e){return e.struct({type:e.literal("prevCard")})}),a_=Ae(function(e){return e.struct({type:e.literal("removeRoot")})}),u_=Ae(function(e){return e.struct({type:e.literal("removeAlerts")})}),o_=Ae(function(e){return e.struct({type:e.literal("applyAlerts"),alternativeIndex:e.number})}),c_=Ae(function(e){return e.struct({type:e.literal("selectAlternative"),alternativeIndex:e.number})}),l_=Ae(function(e){return e.struct({type:e.literal("transition"),fromName:e.string,toName:e.string,animateFrom:vs(e),animateTo:vs(e)})}),f_=Ae(function(e){return e.struct({type:e.literal("openLink"),url:e.string})}),s_=Ae(function(e){return e.struct({type:e.literal("copyToClipboard"),text:e.string})}),d_=Ae(function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("nativeOpenAssistant")}))}),h_=Ae(function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({type:e.literal("pushAssistantFeed"),feedId:e.string}))}),v_=Ae(function(e){return e.intersect(e.partial({fallbackFeed:I0(e)}))(e.struct({type:e.literal("popAssistantFeed")}))}),m_=Ae(function(e){return e.struct({type:e.literal("focusAssistantCard"),cardId:e.string})}),g_=Ae(function(e){return e.struct({type:e.literal("switchView"),where:ut(e),selected:hl(e)})}),p_=Ae(function(e){return e.struct({type:e.literal("newRevision")})}),__=Ae(function(e){return e.struct({type:e.literal("highlightAlert"),highlightIndex:e.number})}),y_=Ae(function(e){return e.struct({type:e.literal("stopApplyingAlerts")})}),b_=Ae(function(e){return e.struct({type:e.literal("closePopover"),rootPopoverId:ut(e)})}),I_=Sn(vc),S_=Ae(function(e){return e.struct({type:e.literal("interactPopover"),rootPopoverId:ut(e),popoverViewId:ut(e),interaction:I_(e)})}),A_=Sn(mc),E_=Ae(function(e){return e.intersect(e.partial({alertId:e.number}))(e.struct({type:e.literal("openGrammarlyGo"),entryPoint:A_(e)}))}),R_=Ae(function(e){return e.struct({type:e.literal("enablePlagiarismCheck")})}),w_=Ae(function(e){return e.struct({type:e.literal("disablePlagiarismCheck")})}),T_=Ae(function(e){return e.struct({type:e.literal("enableWritingExpertCheck")})}),O_=Ae(function(e){return e.struct({type:e.literal("disableWritingExpertCheck")})}),C_=Ae(function(e){return e.struct({type:e.literal("enableAudienceAdaptCheck"),personaId:e.string})}),M_=Ae(function(e){return e.struct({type:e.literal("disableAudienceAdaptCheck")})}),k_=Ae(function(e){return e.struct({type:e.literal("enableAiStudioCheck"),playbookId:e.string})}),P_=Ae(function(e){return e.struct({type:e.literal("disableAiStudioCheck")})}),N_=Ae(function(e){return e.struct({type:e.literal("nativeOpenUserSatisfactionFeedback")})}),jt=Ae(function(e){return e.readonly(e.array(zp(e)))}),vs=Sn(gc),W_=Ae(function(e){return e.lazy("Behavior",function(){return uk(e)})}),uk=Ae(function(e){var t;return e.sum("type")((t={},t["behavior:strongAlertRef"]=F_(e),t["behavior:animation:fadeIn"]=U_(e),t["behavior:animation:fadeOut"]=D_(e),t["behavior:popoverAnchor"]=L_(e),t["behavior:lifecycle"]=q_(e),t))}),F_=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.struct({type:e.literal("behavior:strongAlertRef"),id:ut(e),alertIds:e.readonly(e.array(e.string)),onEmpty:jt(e)}))}),U_=Ae(function(e){return e.struct({type:e.literal("behavior:animation:fadeIn"),id:ut(e),timeCurve:Ed(e)})}),D_=Ae(function(e){return e.struct({type:e.literal("behavior:animation:fadeOut"),id:ut(e),timeCurve:Ed(e)})}),L_=Ae(function(e){return e.lazy("BehaviorPopoverAnchor",function(){return ok(e)})}),ok=Ae(function(e){return e.intersect(e.partial({view:Ad(e)}))(e.struct({type:e.literal("behavior:popoverAnchor"),id:ut(e),positionHint:k0(e)}))}),q_=Ae(function(e){return e.struct({type:e.literal("behavior:lifecycle"),onMount:jt(e),onUnmount:jt(e)})}),Ji=Ae(function(e){return e.readonly(e.array(W_(e)))}),B_=Sn(pc),md=Ae(function(e){return e.struct({topLeft:Wu(e),topRight:Wu(e),bottomRight:Wu(e),bottomLeft:Wu(e)})}),j_=Ae(function(e){return e.struct({offsetX:e.number,offsetY:e.number,blurRadius:e.number,color:Tn(e),opacity:Sd(e)})}),G_=Sn(_c),H_=Sn(yc),z_=Sn(bc),Tn=Sn(Ic),gd=Sn(Sc),Ut=Ae(function(e){return e.intersect(e.partial({label:e.string}))(e.intersect(e.partial({description:e.string}))(e.struct({})))}),Kn=Ae(function(e){var t;return e.sum("kind")((t={},t.unknown=V_(e),t.known=K_(e),t))}),V_=Ae(function(e){return e.struct({kind:e.literal("unknown"),value:e.string})}),K_=Ae(function(e){return e.struct({kind:e.literal("known"),value:gd(e)})}),xt=Ae(function(e){return e.lazy("Content",function(){return ck(e)})}),ck=Ae(function(e){var t;return e.sum("type")((t={},t.text=$_(e),t.assistantFeed=Z_(e),t.assistantCard=x_(e),t.popoverStack=ey(e),t.inlineCard=ty(e),t["gButton:default"]=ny(e),t["gButton:tone"]=ry(e),t["gButton:proofit"]=iy(e),t["gButton:get-started"]=ay(e),t["gButton:plagiarism"]=uy(e),t["gButton:writingExpert"]=oy(e),t["gButton:audienceAdapt"]=cy(e),t["gButton:aiStudio"]=ly(e),t.gButton=fy(e),t.proofitButton=sy(e),t.lensesSwitchPanel=hy(e),t.strongAlertRef=vy(e),t.column=my(e),t.row=gy(e),t.block=_y(e),t.box=yy(e),t.scroll=by(e),t.list=wy(e),t.selectableDropDownMenu=Ty(e),t.dropDownMenuButton=Oy(e),t.icon=yd(e),t.image=My(e),t.button=ky(e),t.sticker=Py(e),t.overlay=Fy(e),t.tooltip=Uy(e),t.clickableText=Dy(e),t.count=Ly(e),t.alertsCount=qy(e),t.alternativeChoice=jy(e),t.slider=Vy(e),t.alternativeSlider=Yy(e),t.nativeSkillsModal=Jy(e),t.nativeSkillsList=Qy(e),t.nativeSkillsView=Xy(e),t.nativeToneInsightsModal=Zy(e),t.nativeLearnMoreModal=xy(e),t.nativeSettingsModal=e0(e),t.nativeFeedbackModal=t0(e),t.nativeGetStartedChecklistModal=n0(e),t.nativeProofitModal=r0(e),t.nativeKeyTakeawaysAssistantCard=i0(e),t.nativeInlineCardContent=a0(e),t.nativePerformanceScoreButton=u0(e),t.viewStack=o0(e),t.nativeExperimentalGBConsistencyUpsellFooter=c0(e),t.radioButtonsGroup=f0(e),t.nativeExperimentalGBToneInsightsUpsellFooter=s0(e),t.collapsedCard=d0(e),t.shortFormCard=h0(e),t.longFormCard=v0(e),t.progressBar=g0(e),t.horizontalRule=p0(e),t.globalPart=_0(e),t.globalPartPlaceholder=y0(e),t))}),$_=Ae(function(e){return e.intersect(e.partial({backgroundColor:Tn(e)}))(e.intersect(e.partial({outlineColor:Tn(e)}))(e.struct({type:e.literal("text"),id:ut(e),meta:Ut(e),size:gl(e),text:e.string,textColor:Tn(e),format:e.readonly(e.array(ml(e))),selectable:e.boolean})))}),Y_=Sn(Ac),J_=Ae(function(e){return e.struct({orderBy:e.string,direction:Y_(e)})}),Q_=Sn(Ec),X_=Ae(function(e){return e.struct({property:e.string,condition:Q_(e),value:e.number})}),Z_=Ae(function(e){return e.lazy("ContentAssistantFeed",function(){return lk(e)})}),lk=Ae(function(e){return e.intersect(e.partial({footer:xt(e)}))(e.intersect(e.partial({onEmpty:jt(e)}))(e.intersect(e.partial({onAssistantClose:jt(e)}))(e.intersect(e.partial({name:Kn(e)}))(e.struct({type:e.literal("assistantFeed"),id:ut(e),header:xt(e),ordering:e.readonly(e.array(J_(e))),filtering:e.readonly(e.array(X_(e))),onRemove:jt(e)})))))}),x_=Ae(function(e){return e.lazy("ContentAssistantCard",function(){return fk(e)})}),fk=Ae(function(e){return e.intersect(e.partial({properties:e.readonly(e.record(e.nullable(e.number)))}))(e.intersect(e.partial({footer:xt(e)}))(e.intersect(e.partial({name:Kn(e)}))(e.struct({type:e.literal("assistantCard"),id:ut(e),meta:Ut(e),child:xt(e),onFocus:jt(e),onBlur:jt(e)}))))}),ey=Ae(function(e){return e.lazy("ContentPopoverStack",function(){return sk(e)})}),sk=Ae(function(e){return e.struct({type:e.literal("popoverStack"),id:ut(e),views:e.readonly(e.record(Ad(e))),selected:hl(e)})}),ty=Ae(function(e){return e.lazy("ContentInlineCard",function(){return dk(e)})}),dk=Ae(function(e){return e.intersect(e.partial({minWidth:ni(e)}))(e.intersect(e.partial({maxWidth:ni(e)}))(e.intersect(e.partial({behaviors:Ji(e)}))(e.struct({type:e.literal("inlineCard"),id:ut(e),meta:Ut(e),child:xt(e),onFocus:jt(e)}))))}),ny=Ae(function(e){return e.struct({type:e.literal("gButton:default"),id:ut(e),meta:Ut(e),actions:jt(e)})}),ry=Ae(function(e){return e.struct({type:e.literal("gButton:tone"),id:ut(e),meta:Ut(e),actions:jt(e)})}),iy=Ae(function(e){return e.struct({type:e.literal("gButton:proofit"),id:ut(e),meta:Ut(e),actions:jt(e)})}),ay=Ae(function(e){return e.struct({type:e.literal("gButton:get-started"),id:ut(e),meta:Ut(e),actions:jt(e)})}),uy=Ae(function(e){return e.struct({type:e.literal("gButton:plagiarism"),id:ut(e),meta:Ut(e),actions:jt(e)})}),oy=Ae(function(e){return e.struct({type:e.literal("gButton:writingExpert"),id:ut(e),meta:Ut(e),actions:jt(e)})}),cy=Ae(function(e){return e.struct({type:e.literal("gButton:audienceAdapt"),id:ut(e),meta:Ut(e),actions:jt(e)})}),ly=Ae(function(e){return e.struct({type:e.literal("gButton:aiStudio"),id:ut(e),meta:Ut(e),actions:jt(e)})}),fy=Ae(function(e){return e.struct({type:e.literal("gButton"),id:ut(e),meta:Ut(e),actions:jt(e)})}),sy=Ae(function(e){return e.struct({type:e.literal("proofitButton"),id:ut(e),meta:Ut(e),actions:jt(e)})}),dy=Ae(function(e){return e.struct({id:ut(e),meta:Ut(e),kind:A0(e),label:e.string,onClickActions:jt(e)})}),hy=Ae(function(e){return e.struct({type:e.literal("lensesSwitchPanel"),id:ut(e),meta:Ut(e),lensSwitchButtons:e.readonly(e.array(dy(e)))})}),vy=Ae(function(e){return e.lazy("ContentStrongAlertRef",function(){return hk(e)})}),hk=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.struct({type:e.literal("strongAlertRef"),id:ut(e),alertIds:e.readonly(e.array(e.string)),onEmpty:jt(e),child:xt(e)}))}),my=Ae(function(e){return e.lazy("ContentColumn",function(){return vk(e)})}),vk=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.intersect(e.partial({behaviors:Ji(e)}))(e.struct({type:e.literal("column"),id:ut(e),children:e.readonly(e.array(xt(e)))})))}),gy=Ae(function(e){return e.lazy("ContentRow",function(){return mk(e)})}),mk=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.intersect(e.partial({spacing:vl(e)}))(e.intersect(e.partial({behaviors:Ji(e)}))(e.struct({type:e.literal("row"),id:ut(e),left:e.readonly(e.array(xt(e))),right:e.readonly(e.array(xt(e))),verticalAlign:Rd(e)}))))}),py=Ae(function(e){return e.struct({vertical:Bi(e),horizontal:Bi(e)})}),_y=Ae(function(e){return e.lazy("ContentBlock",function(){return gk(e)})}),gk=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.intersect(e.partial({fraction:e.number}))(e.intersect(e.partial({spacing:vl(e)}))(e.intersect(e.partial({innerSpacing:py(e)}))(e.intersect(e.partial({horizontalAlign:Id(e)}))(e.intersect(e.partial({verticalAlign:Rd(e)}))(e.intersect(e.partial({maxLines:e.number}))(e.struct({type:e.literal("block"),id:ut(e),parts:e.readonly(e.array(xt(e)))}))))))))}),yy=Ae(function(e){return e.lazy("ContentBox",function(){return pk(e)})}),pk=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.intersect(e.partial({padding:vl(e)}))(e.intersect(e.partial({borderRadius:md(e)}))(e.intersect(e.partial({backgroundColor:Tn(e)}))(e.intersect(e.partial({minWidth:ni(e)}))(e.intersect(e.partial({behaviors:Ji(e)}))(e.intersect(e.partial({shadow:W0(e)}))(e.intersect(e.partial({boxShadow:j_(e)}))(e.struct({type:e.literal("box"),id:ut(e),child:xt(e)})))))))))}),by=Ae(function(e){return e.lazy("ContentScroll",function(){return _k(e)})}),_k=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.struct({type:e.literal("scroll"),id:ut(e),child:xt(e),maxHeight:ni(e)}))}),Iy=Ae(function(e){var t;return e.sum("type")((t={},t.text=Sy(e),t.icon=Ay(e),t))}),Sy=Ae(function(e){return e.struct({type:e.literal("text"),text:e.string})}),Ay=Ae(function(e){return e.struct({type:e.literal("icon"),icon:dl(e)})}),Ey=Ae(function(e){return e.intersect(e.partial({tooltip:e.string}))(e.struct({id:ut(e),meta:Ut(e),label:Iy(e),onClickActions:jt(e)}))}),Ry=Ae(function(e){return e.lazy("ContentListItem",function(){return yk(e)})}),yk=Ae(function(e){return e.intersect(e.partial({behaviors:Ji(e)}))(e.intersect(e.partial({tooltip:e.string}))(e.struct({id:ut(e),meta:Ut(e),label:xt(e),actions:jt(e),secondaryButtons:e.readonly(e.array(Ey(e)))})))}),wy=Ae(function(e){return e.lazy("ContentList",function(){return bk(e)})}),bk=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.intersect(e.partial({itemFocusedColor:Tn(e)}))(e.intersect(e.partial({itemHoveredColor:Tn(e)}))(e.struct({type:e.literal("list"),id:ut(e),meta:Ut(e),items:e.readonly(e.array(Ry(e)))}))))}),Ty=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.intersect(e.partial({selectedItem:ut(e)}))(e.intersect(e.partial({placeholder:e.string}))(e.struct({type:e.literal("selectableDropDownMenu"),id:ut(e),meta:Ut(e),onSelectActions:jt(e),select:N0(e)}))))}),Oy=Ae(function(e){return e.intersect(e.partial({name:Kn(e)}))(e.struct({type:e.literal("dropDownMenuButton"),id:ut(e),meta:Ut(e),icon:dl(e),onClickActions:jt(e),menu:w0(e)}))}),Cy=Ae(function(e){var t;return e.sum("kind")((t={},t.known=pd(e),t.url=_d(e),t))}),pd=Ae(function(e){return e.struct({kind:e.literal("known"),name:S0(e)})}),_d=Ae(function(e){return e.intersect(e.partial({size:Bi(e)}))(e.struct({kind:e.literal("url"),name:e.string,url:e.string}))}),yd=Ae(function(e){return e.intersect(e.partial({backgroundColor:Tn(e)}))(e.struct({type:e.literal("icon"),id:ut(e),meta:Ut(e),source:Cy(e)}))}),My=Ae(function(e){return e.intersect(e.partial({backgroundColor:Tn(e)}))(e.intersect(e.partial({borderRadius:ni(e)}))(e.struct({type:e.literal("image"),id:ut(e),meta:Ut(e),name:Kn(e),url:e.string,width:ni(e),height:ni(e)})))}),ky=Ae(function(e){return e.lazy("ContentButton",function(){return Ik(e)})}),Ik=Ae(function(e){return e.intersect(e.partial({tooltip:e.string}))(e.intersect(e.partial({horizontalAlign:Id(e)}))(e.intersect(e.partial({behaviors:Ji(e)}))(e.struct({type:e.literal("button"),id:ut(e),meta:Ut(e),name:Kn(e),kind:G_(e),state:z_(e),label:xt(e),actions:jt(e),shape:H_(e)}))))}),Py=Ae(function(e){return e.lazy("ContentSticker",function(){return Sk(e)})}),Sk=Ae(function(e){return e.struct({type:e.literal("sticker"),id:ut(e),meta:Ut(e),name:Kn(e),label:xt(e),child:xt(e),stickerColor:Tn(e),stickerReverseColor:Tn(e),onClickActions:jt(e)})}),Ny=Ae(function(e){return e.lazy("ContentOverlayObscuredContent",function(){return Ak(e)})}),Ak=Ae(function(e){return e.intersect(e.partial({blur:B_(e)}))(e.struct({content:xt(e)}))}),Wy=Ae(function(e){return e.intersect(e.partial({opacity:Sd(e)}))(e.intersect(e.partial({borderRadius:md(e)}))(e.struct({color:Tn(e)})))}),Fy=Ae(function(e){return e.lazy("ContentOverlay",function(){return Ek(e)})}),Ek=Ae(function(e){return e.intersect(e.partial({visibleContent:xt(e)}))(e.struct({type:e.literal("overlay"),id:ut(e),meta:Ut(e),name:Kn(e),obscuredContent:Ny(e),overlay:Wy(e)}))}),Uy=Ae(function(e){return e.lazy("ContentTooltip",function(){return Rk(e)})}),Rk=Ae(function(e){return e.struct({type:e.literal("tooltip"),id:ut(e),meta:Ut(e),name:Kn(e),text:e.string,child:xt(e),alignment:F0(e)})}),Dy=Ae(function(e){return e.struct({type:e.literal("clickableText"),id:ut(e),meta:Ut(e),name:Kn(e),onClickActions:jt(e),text:e.string,size:gl(e),textColor:Tn(e),format:e.readonly(e.array(ml(e)))})}),Ly=Ae(function(e){return e.intersect(e.partial({textColor:Tn(e)}))(e.struct({type:e.literal("count"),id:ut(e),meta:Ut(e),value:e.string,backgroundColor:Tn(e)}))}),qy=Ae(function(e){return e.intersect(e.partial({backgroundColor:Tn(e)}))(e.intersect(e.partial({outlineColor:Tn(e)}))(e.struct({type:e.literal("alertsCount"),id:ut(e),meta:Ut(e),size:gl(e),textColor:Tn(e),format:e.readonly(e.array(ml(e)))})))}),By=Ae(function(e){return e.lazy("ContentAlternativeChoiceAlterna",function(){return wk(e)})}),wk=Ae(function(e){return e.struct({label:xt(e),preview:xt(e)})}),jy=Ae(function(e){return e.lazy("ContentAlternativeChoice",function(){return Tk(e)})}),Tk=Ae(function(e){return e.struct({type:e.literal("alternativeChoice"),id:ut(e),meta:Ut(e),alternatives:e.readonly(e.array(By(e)))})}),Gy=Ae(function(e){var t;return e.sum("type")((t={},t.icon=bd(e),t))}),Hy=Ae(function(e){var t;return e.sum("kind")((t={},t.known=pd(e),t.url=_d(e),t))}),bd=Ae(function(e){return e.intersect(e.partial({backgroundColor:Tn(e)}))(e.struct({type:e.literal("icon"),id:ut(e),source:Hy(e)}))}),zy=Ae(function(e){return e.struct({id:ut(e),icon:Gy(e),label:e.string,actions:jt(e)})}),Vy=Ae(function(e){return e.struct({type:e.literal("slider"),id:ut(e),meta:Ut(e),segmentSize:ni(e),fillColor:Tn(e),choices:e.readonly(e.array(zy(e)))})}),Ky=Ae(function(e){var t;return e.sum("type")((t={},t.icon=bd(e),t))}),$y=Ae(function(e){return e.lazy("ContentAlternativeSliderChoice",function(){return Ok(e)})}),Ok=Ae(function(e){return e.struct({id:ut(e),icon:Ky(e),label:e.string,actions:jt(e),preview:xt(e)})}),Yy=Ae(function(e){return e.lazy("ContentAlternativeSlider",function(){return Ck(e)})}),Ck=Ae(function(e){return e.struct({type:e.literal("alternativeSlider"),id:ut(e),meta:Ut(e),segmentSize:ni(e),fillColor:Tn(e),choices:e.readonly(e.array($y(e)))})}),Jy=Ae(function(e){return e.struct({type:e.literal("nativeSkillsModal"),id:ut(e)})}),Qy=Ae(function(e){return e.struct({type:e.literal("nativeSkillsList"),id:ut(e),onSelect:jt(e)})}),Xy=Ae(function(e){return e.struct({type:e.literal("nativeSkillsView"),id:ut(e)})}),Zy=Ae(function(e){return e.struct({type:e.literal("nativeToneInsightsModal"),id:ut(e)})}),xy=Ae(function(e){return e.struct({type:e.literal("nativeLearnMoreModal"),id:ut(e)})}),e0=Ae(function(e){return e.struct({type:e.literal("nativeSettingsModal"),id:ut(e)})}),t0=Ae(function(e){return e.struct({type:e.literal("nativeFeedbackModal"),id:ut(e)})}),n0=Ae(function(e){return e.struct({type:e.literal("nativeGetStartedChecklistModal"),id:ut(e),onComplete:jt(e)})}),r0=Ae(function(e){return e.struct({type:e.literal("nativeProofitModal"),id:ut(e)})}),i0=Ae(function(e){return e.struct({type:e.literal("nativeKeyTakeawaysAssistantCard"),id:ut(e)})}),a0=Ae(function(e){return e.struct({type:e.literal("nativeInlineCardContent"),id:ut(e),onDetailsClick:jt(e)})}),u0=Ae(function(e){return e.struct({type:e.literal("nativePerformanceScoreButton"),id:ut(e)})}),o0=Ae(function(e){return e.lazy("ContentViewStack",function(){return Mk(e)})}),Mk=Ae(function(e){return e.struct({type:e.literal("viewStack"),id:ut(e),views:e.readonly(e.record(xt(e))),selected:hl(e)})}),c0=Ae(function(e){return e.struct({type:e.literal("nativeExperimentalGBConsistencyUpsellFooter"),id:ut(e)})}),l0=Ae(function(e){return e.struct({id:ut(e),meta:Ut(e),label:e.string,onSelect:jt(e)})}),f0=Ae(function(e){return e.struct({type:e.literal("radioButtonsGroup"),id:ut(e),meta:Ut(e),options:e.readonly(e.array(l0(e)))})}),s0=Ae(function(e){return e.struct({type:e.literal("nativeExperimentalGBToneInsightsUpsellFooter"),id:ut(e)})}),d0=Ae(function(e){return e.lazy("ContentCollapsedCard",function(){return kk(e)})}),kk=Ae(function(e){return e.intersect(e.partial({quickActions:xt(e)}))(e.struct({type:e.literal("collapsedCard"),id:ut(e),meta:Ut(e),child:xt(e)}))}),h0=Ae(function(e){return e.lazy("ContentShortFormCard",function(){return Pk(e)})}),Pk=Ae(function(e){return e.struct({type:e.literal("shortFormCard"),id:ut(e),child:xt(e)})}),v0=Ae(function(e){return e.lazy("ContentLongFormCard",function(){return Nk(e)})}),Nk=Ae(function(e){return e.struct({type:e.literal("longFormCard"),id:ut(e),collapsedContent:xt(e),fullContent:xt(e),behaviors:Ji(e),feedProperties:b0(e)})}),m0=Sn(Rc),g0=Ae(function(e){return e.intersect(e.partial({pinPointValue:ms(e)}))(e.intersect(e.partial({borderColor:Tn(e)}))(e.intersect(e.partial({height:ni(e)}))(e.struct({type:e.literal("progressBar"),id:ut(e),meta:Ut(e),backgroundColor:Tn(e),fillColor:Tn(e),value:ms(e),state:m0(e)}))))}),p0=Ae(function(e){return e.struct({type:e.literal("horizontalRule"),id:ut(e),meta:Ut(e)})}),_0=Ae(function(e){return e.lazy("ContentGlobalPart",function(){return Wk(e)})}),Wk=Ae(function(e){return e.struct({type:e.literal("globalPart"),id:ut(e),content:xt(e),name:Kn(e)})}),y0=Ae(function(e){return e.lazy("ContentGlobalPartPlaceholder",function(){return Fk(e)})}),Fk=Ae(function(e){return e.intersect(e.partial({child:xt(e)}))(e.struct({type:e.literal("globalPartPlaceholder"),id:ut(e),globalPartId:ut(e)}))}),b0=Ae(function(e){return e.readonly(e.record(e.nullable(e.number)))}),I0=Ae(function(e){return e.intersect(e.partial({cardId:e.string}))(e.struct({feedId:e.string}))}),Id=Sn(wc),dl=Ae(function(e){var t;return e.sum("type")((t={},t.icon=yd(e),t))}),S0=Sn(Tc),ut=Ae(function(e){return e.string}),A0=Sn(Oc),E0=Ae(function(e){return e.intersect(e.partial({icon:dl(e)}))(e.struct({id:ut(e),meta:Ut(e),text:e.string,onClickActions:jt(e)}))}),R0=Ae(function(e){return e.intersect(e.partial({title:e.string}))(e.struct({items:e.readonly(e.array(E0(e)))}))}),w0=Ae(function(e){return e.struct({meta:Ut(e),label:e.string,sections:e.readonly(e.array(R0(e)))})}),Sd=Sn(Cc),ms=Ae(function(e){return e.number}),T0=Ae(function(e){var t;return e.sum("kind")((t={},t.component=O0(e),t.gButton=C0(e),t.nativeComponent=M0(e),t))}),O0=Ae(function(e){return e.struct({kind:e.literal("component"),id:ut(e)})}),C0=Ae(function(e){return e.struct({kind:e.literal("gButton")})}),M0=Ae(function(e){return e.struct({kind:e.literal("nativeComponent"),knownName:gd(e)})}),Ad=Ae(function(e){return e.lazy("PopoverView",function(){return Uk(e)})}),Uk=Ae(function(e){return e.intersect(e.partial({onShow:jt(e)}))(e.intersect(e.partial({onDismiss:jt(e)}))(e.intersect(e.partial({onFulfill:jt(e)}))(e.struct({id:ut(e),rootPopoverId:ut(e),anchor:T0(e),child:xt(e)}))))}),k0=Sn(Mc),Wu=Sn(kc),ni=Ae(function(e){return e.number}),P0=Ae(function(e){return e.struct({id:ut(e),meta:Ut(e),label:e.string,onClickActions:jt(e)})}),N0=Ae(function(e){return e.struct({meta:Ut(e),label:e.string,items:e.readonly(e.array(P0(e)))})}),hl=Ae(function(e){return e.string}),W0=Sn(Pc),Bi=Sn(Nc),vl=Ae(function(e){return e.struct({top:Bi(e),right:Bi(e),bottom:Bi(e),left:Bi(e)})}),ml=Sn(Wc),gl=Sn(Fc),Ed=Sn(Uc),F0=Sn(Dc),Rd=Sn(Lc),U0={};In(U0,{unsupportedComponents:()=>Lk,version:()=>Dk});var Dk="4.49.23",Lk=["proofitButton","newRevision","gButton:default","gButton:tone","gButton:proofit","gButton:get-started","gButton:plagiarism","gButton:writingExpert","gButton:audienceAdapt","gButton:aiStudio","nativePerformanceScoreButton","globalPart","enableWritingExpertCheck","disableWritingExpertCheck"],Cr;(function(e){var t=e.Type=At.Type.sduiCardAction,n=Qa(rd)(nu.Actions);e.eq=zn.fromEquals(function(o,l){return o.type===t&&o.type===l.type&&o.cardId===l.cardId&&n.equals(o.actions,l.actions)&&o.scope===l.scope});var r=lR(Qa(cg)(nu.Actions),{encode:function(o){return o}}),i=(0,JA.flow)(r.decode,Fe.mapLeft(function(o){return new Error(fg(o))})),a=function(o){return Fe.isRight(i(o))},u=function(o){if(typeof o!="object"||o==null)return!1;var l=Object.keys(o);return l.every(function(f){var h=o[f];switch(f){case"alertRefs":return Array.isArray(h);default:return!1}})};e.isSduiCardAction=function(o){return o.type===Cr.Type&&a(o.actions)&&u(o.scope)}})(Cr||(Cr={}));var dt=Me(it()),bn=Me(va()),cv=Me(it()),xi=Me(lu()),ru;(function(e){var t=function(i){return"child"in i},n=function(i){return!("child"in i)};e.isStrongAlertRefComponent=t,e.isStrongAlertRefBehavior=n})(ru||(ru={}));var lv;(function(e){var t=function(i){return i.type==="strongAlertRef"},n=function(i,a,u){return{type:"strongAlertRef",alertIds:a,child:i,onEmpty:u,id:Mn.from("strongAlertRef")}};e.isStrongAlertRef=t,e.create=n})(lv||(lv={}));var fv;(function(e){var t=function(i){return i.type==="longFormCard"},n=function(i,a,u){return{type:"longFormCard",fullContent:i,collapsedContent:a,id:Mn.from("longFormCard"),behaviors:[Mr.StrongAlertRef.create(u,[])],feedProperties:{}}};e.isLongFormCard=t,e.create=n})(fv||(fv={}));var Mr;(function(e){var t=function(i){return i.type==="behavior:strongAlertRef"},n=function(i){return i.type==="behavior:popoverAnchor"};e.isStrongAlertRef=t,function(r){function i(a,u){return{id:Mn.from("behavior:strongAlertRef"),type:"behavior:strongAlertRef",alertIds:a,onEmpty:u}}r.create=i,r.eq=Qa(rd)(nu.BehaviorStrongAlertRef)}(e.StrongAlertRef||(e.StrongAlertRef={})),e.isPopoverAnchor=n,function(r){function i(a,u){return{type:"behavior:popoverAnchor",id:a,positionHint:u}}r.create=i,r.nonEmpty=function(a){return!!a.view}}(e.PopoverAnchor||(e.PopoverAnchor={}))})(Mr||(Mr={}));var sv;(function(e){var t=function(i,a,u,o,l){return{type:"row",left:i,right:a,spacing:u,verticalAlign:o,id:Mn.from("row"),behaviors:l?[Mr.PopoverAnchor.create(l,Qr.Position.Top)]:void 0}},n=function(i){return i.type==="row"};e.create=t,e.isRow=n})(sv||(sv={}));var dv;(function(e){var t=function(r){return{type:"column",children:r,id:Mn.from("column")}};e.create=t})(dv||(dv={}));var qc;(function(e){var t=function(u,o,l){for(var f=arguments.length,h=new Array(f>3?f-3:0),d=3;d<f;d++)h[d-3]=arguments[d];return{type:i,name:ji.unknown(u),parts:h,spacing:o,innerSpacing:l,id:Mn.from(u)}},n=function(u){return u.type===i},r=function(u){return u.parts.every(Bc.isText)},i=e.Type="block";e.create=t,e.isBlock=n,e.hasOnlyTextParts=r})(qc||(qc={}));var Bc;(function(e){var t=function(a,u,o,l,f,h,d){var _=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{};return{type:r,text:a,size:u,format:o,textColor:l,backgroundColor:f,outlineColor:h,id:Mn.from(r),selectable:d,meta:_}},n=function(a){return a.type===r},r=e.Type="text";e.create=t,e.isText=n})(Bc||(Bc={}));var hv;(function(e){var t=function(r,i){return{label:r,preview:i}};e.create=t})(hv||(hv={}));var vv;(function(e){var t=function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];return{type:"alternativeChoice",alternatives:a,id:Mn.from("alternativeChoice"),meta:r}};e.create=t})(vv||(vv={}));var mv;(function(e){var t=function(r,i){return{type:"viewStack",id:Mn.from("ViewStack"),views:i,selected:r}};e.create=t})(mv||(mv={}));var gv;(function(e){var t=function(u){return u.type==="button"},n=function(u,o,l,f,h,d){var _=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Qr.ButtonShape.Square,R=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},A=Mn.from(u);return{type:i,id:A,name:ji.unknown(u),tooltip:h,kind:f,state:Qr.ButtonState.Enabled,label:{type:qc.Type,name:ji.unknown(""),parts:[Bc.create(o,Qr.TextSize.Regular,[],Qr.Color.CoreNeutral0,void 0,void 0,!1)],spacing:d,id:Mn.from("label-button-"+A)},actions:l,shape:_,meta:R}},r=function(u,o,l,f,h){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Qr.ButtonShape.Square,_=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},R=Mn.from(u),A="icon-button-"+u;return{type:i,id:R,name:ji.unknown(u),tooltip:h,kind:f,state:Qr.ButtonState.Enabled,label:{type:qc.Type,name:ji.unknown(A),spacing:ps.create("0","0.25","0","0.25"),parts:[gs.create(o,void 0)],id:Mn.from(A)},actions:l,shape:d,meta:_}},i=e.Type="button";(function(a){function u(f){return f.type==="transition"}a.isTransitionAction=u;function o(f){return f.type==="applyAlerts"}a.isApplyAlertsAction=o;function l(f){return{type:"selectAlternative",alternativeIndex:f}}a.createSelectAlternativeAction=l})(e.Action||(e.Action={})),e.isButton=t,e.create=n,e.createIcon=r})(gv||(gv={}));var gs;(function(e){var t=function(i,a){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{type:n,source:i,backgroundColor:a,id:Mn.from(n),meta:u}},n=e.Type="icon";(function(r){function i(u){return{kind:"known",name:u}}r.createKnown=i;function a(u,o,l){return{kind:"url",name:o,url:u,size:l}}r.createUrl=a})(e.Source||(e.Source={})),e.create=t})(gs||(gs={}));var ps;(function(e){var t=function(r,i,a,u){return{top:r,bottom:a,left:u,right:i}};e.create=t})(ps||(ps={}));var pv;(function(e){var t=function(r,i){return{vertical:i,horizontal:r}};e.create=t})(pv||(pv={}));var _v;(function(e){var t=function(i,a){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return{type:"count",backgroundColor:a,value:i,id:Mn.from(n),meta:u,textColor:o}},n=e.Type="count";e.create=t})(_v||(_v={}));var yv;(function(e){var t=function(r,i,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return{type:"slider",segmentSize:r,fillColor:i,choices:a,id:Mn.from("slider"),meta:u}};(function(n){function r(i,a,u){return{type:"sliderChoice",id:Mn.from("slider-choice-"+a.toLowerCase()),icon:i,label:a,actions:u}}n.create=r})(e.Choice||(e.Choice={})),e.create=t})(yv||(yv={}));var bv;(function(e){var t=function(r,i,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return{type:"alternativeSlider",segmentSize:r,fillColor:i,choices:a,id:Mn.from("alternativeSlider"),meta:u}};(function(n){function r(i,a,u,o){return{id:Mn.from("alternative-slider-choice-"+a.toLowerCase()),icon:i,label:a,actions:u,preview:o}}n.create=r})(e.Choice||(e.Choice={})),e.create=t})(bv||(bv={}));var Iv;(function(e){var t=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"list",items:r,id:Mn.from("list"),meta:i}};e.create=t,function(n){function r(i,a,u,o){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return{id:Mn.from("listItem"),label:i,behaviors:u,actions:a,secondaryButtons:o,meta:l}}n.create=r}(e.Item||(e.Item={}))})(Iv||(Iv={}));var Mn;(function(e){var t=function(r){return r+"#"+ra.alphanumeric(6)};e.from=t})(Mn||(Mn={}));var ji;(function(e){var t=function(r){return{kind:"unknown",value:r}};e.unknown=t})(ji||(ji={}));var Sv;(function(e){var t=function(i,a,u){return{type:"popoverStack",id:i,views:u,selected:a}},n=function(i,a,u,o){return{id:i,rootPopoverId:a,child:u,anchor:{kind:"component",id:o||ra.alphanumeric(3)}}};e.create=t,e.createView=n})(Sv||(Sv={}));var _s;(function(e){var t=function(a,u,o){return{type:r,id:a,content:u,name:ji.unknown(o)}},n=function(a){return a.type===r},r=e.Type="globalPart";e.create=t,e.isGlobalPart=n})(_s||(_s={}));var Av;(function(e){var t=function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mn.from(r),o=arguments.length>2?arguments[2]:void 0;return{type:r,id:u,globalPartId:a,child:o}},n=function(a){return a.type===r},r=e.Type="globalPartPlaceholder";e.create=t,e.isGlobalPartPlaceholder=n})(Av||(Av={}));function ys(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D0(e){if(Array.isArray(e))return e}function qk(e){if(Array.isArray(e))return ys(e)}function L0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bk(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function B0(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jk(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){L0(e,i,n[i])})}return e}function Gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}function Gt(e,t){return t=t!=null?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gk(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Hk(e,t){if(e==null)return{};var n=zk(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zk(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Vk(e,t){return D0(e)||Bk(e,t)||wd(e,t)||B0()}function Kk(e){return D0(e)||q0(e)||wd(e)||B0()}function Ev(e){return qk(e)||q0(e)||wd(e)||jk()}function wd(e,t){if(e){if(typeof e=="string")return ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ys(e,t)}}function So(e,t){var n,r,i,a,u={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(f){return function(h){return l([f,h])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=f[0]&2?r.return:f[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,f[1])).done)return i;switch(r=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return u.label++,{value:f[1],done:!1};case 5:u.label++,r=f[1],f=[0];continue;case 7:f=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){u=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){u.label=f[1];break}if(f[0]===6&&u.label<i[1]){u.label=i[1],i=f;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(f);break}i[2]&&u.ops.pop(),u.trys.pop();continue}f=t.call(e,u)}catch(h){f=[6,h],r=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function nn(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Jt;(function(e){var t=function(S,M){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],U=Ev(p).concat([S.id]);switch(c){case E.PreOrder:return M(S,U),Re(S,M,c,U);case E.PostOrder:return Re(S,M,c,U),M(S,U);default:hn(c)}},n=function(S){var M,c=arguments;return So(this,function(p){switch(p.label){case 0:return M=c.length>1&&c[1]!==void 0?c[1]:E.PreOrder,[5,nn(_(S,M,[]))];case 1:return p.sent(),[2]}})},r=function(S,M,c,p){var U=p;return Jt.forEach(S,function(j,ae){return U=M(U,j,ae)},c),U},i=function(S,M){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jt.TreeTraversal.PreOrder,p=!0,U=!1,j=void 0;try{for(var ae=n(S,c)[Symbol.iterator](),V;!(p=(V=ae.next()).done);p=!0){var Q=V.value;if(Q.type===M)return m.some(Q)}}catch(me){U=!0,j=me}finally{try{!p&&ae.return!=null&&ae.return()}finally{if(U)throw j}}return m.none},a=function(S,M){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jt.TreeTraversal.PreOrder,p=!0,U=!1,j=void 0;try{for(var ae=n(S,c)[Symbol.iterator](),V;!(p=(V=ae.next()).done);p=!0){var Q=V.value;if(M(Q))return m.some(Q)}}catch(me){U=!0,j=me}finally{try{!p&&ae.return!=null&&ae.return()}finally{if(U)throw j}}return m.none},u=function(S,M){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder;switch(c){case E.PreOrder:return(0,dt.pipe)(M(S),function(p){return G(p,M,c)});case E.PostOrder:return(0,dt.pipe)(G(S,M,c),m.map(M));default:hn(c)}},o=function(S,M){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder;switch(c){case E.PreOrder:return(0,dt.pipe)(S,m.fromPredicate(M),m.chain(function(p){return(0,dt.pipe)(D(p,M,c),m.map(function(U){return Ft({},p,U)}))}));case E.PostOrder:return(0,dt.pipe)(D(S,M,c),m.chain(function(p){return m.fromPredicate(M)(Ft({},S,p))}));default:hn(c)}},l=function(S,M){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder;switch(c){case E.PreOrder:return(0,dt.pipe)(M(S),m.chain(function(p){return(0,dt.pipe)(Y(p,M,c),m.map(function(U){return Ft({},p,U)}))}));case E.PostOrder:return(0,dt.pipe)(Y(S,M,c),m.chain(function(p){return M(Ft({},S,p))}));default:hn(c)}},f=function(S){return o(S,zo(q),E.PostOrder)},h=function(S,M,c){var p=c!=null?c:Jt.toContentMap(S);return M.reduce(function(U,j){var ae=j.selected,V=j.where;return(0,dt.pipe)(p[V],m.fromNullable,m.map(Kt.pick("path")),m.fold(function(){return U},function(Q){return Jt.switchViewStack(U,Q,ae)}))},S)},d=function(S){var M=S.filtering.filter(function(c){return c.condition===Qr.ContentAssistantFeedFilteringCondition.EqualTo});return M.reduce(function(c,p){return Gt(Ft({},c),L0({},p.property,p.value))},{})},_=function(S){var M,c,p,U=arguments;return So(this,function(j){switch(j.label){case 0:switch(M=U.length>1&&U[1]!==void 0?U[1]:E.PreOrder,c=U.length>2&&U[2]!==void 0?U[2]:[],p=Ev(c).concat([S.id]),M){case E.PreOrder:return[3,1];case E.PostOrder:return[3,4]}return[3,7];case 1:return[4,S];case 2:return j.sent(),[5,nn(A(S,M,p))];case 3:return j.sent(),[3,8];case 4:return[5,nn(A(S,M,p))];case 5:return j.sent(),[4,S];case 6:return j.sent(),[3,8];case 7:hn(M),j.label=8;case 8:return[2]}})},R=function(S){var M,c,p,U=arguments;return So(this,function(j){switch(j.label){case 0:M=U.length>1&&U[1]!==void 0?U[1]:E.PreOrder,c=U.length>2?U[2]:void 0,p=0,j.label=1;case 1:return p<S.length?[5,nn(_(S[p],M,c))]:[3,4];case 2:j.sent(),j.label=3;case 3:return p++,[3,1];case 4:return[2]}})},A=function(S){var M,c,p,U,j,ae,V,Q,me,Ie=arguments;return So(this,function(Ee){switch(Ee.label){case 0:switch(M=Ie.length>1&&Ie[1]!==void 0?Ie[1]:E.PreOrder,c=Ie.length>2?Ie[2]:void 0,p=S.type,p){case"column":return[3,1];case"assistantCard":return[3,3];case"popoverStack":return[3,8];case"strongAlertRef":return[3,10];case"row":return[3,12];case"block":return[3,15];case"box":return[3,17];case"scroll":return[3,17];case"inlineCard":return[3,17];case"shortFormCard":return[3,17];case"globalPart":return[3,19];case"globalPartPlaceholder":return[3,21];case"list":return[3,23];case"button":return[3,25];case"alternativeChoice":return[3,27];case"alternativeSlider":return[3,32];case"assistantFeed":return[3,37];case"viewStack":return[3,42];case"collapsedCard":return[3,44];case"longFormCard":return[3,49];case"sticker":return[3,52];case"overlay":return[3,55];case"tooltip":return[3,60];case"icon":return[3,62];case"image":return[3,62];case"text":return[3,62];case"clickableText":return[3,62];case"count":return[3,62];case"alertsCount":return[3,62];case"slider":return[3,62];case"gButton":return[3,62];case"lensesSwitchPanel":return[3,62];case"proofitButton":return[3,62];case"nativeSkillsModal":return[3,62];case"nativeSkillsList":return[3,62];case"nativeSkillsView":return[3,62];case"nativeToneInsightsModal":return[3,62];case"nativeLearnMoreModal":return[3,62];case"nativeSettingsModal":return[3,62];case"nativeFeedbackModal":return[3,62];case"nativeGetStartedChecklistModal":return[3,62];case"nativeKeyTakeawaysAssistantCard":return[3,62];case"nativeProofitModal":return[3,62];case"nativeExperimentalGBToneInsightsUpsellFooter":return[3,62];case"nativeExperimentalGBConsistencyUpsellFooter":return[3,62];case"nativeInlineCardContent":return[3,62];case"progressBar":return[3,62];case"horizontalRule":return[3,62];case"dropDownMenuButton":return[3,62];case"selectableDropDownMenu":return[3,62];case"radioButtonsGroup":return[3,62]}return[3,63];case 1:return[5,nn(R(S.children,M,c))];case 2:return Ee.sent(),[3,64];case 3:return S.footer==null?[3,5]:[5,nn(_(S.footer,M,c))];case 4:return Ee.sent(),[3,6];case 5:Ee.label=6;case 6:return[5,nn(_(S.child,M,c))];case 7:return Ee.sent(),[3,64];case 8:return[5,nn(R(Object.values(S.views).map(function(Ge){return Ge.child}),M,c))];case 9:return Ee.sent(),[3,64];case 10:return[5,nn(_(S.child,M,c))];case 11:return Ee.sent(),[3,64];case 12:return[5,nn(R(S.left,M,c))];case 13:return Ee.sent(),[5,nn(R(S.right,M,c))];case 14:return Ee.sent(),[3,64];case 15:return[5,nn(R(S.parts,M,c))];case 16:return Ee.sent(),[3,64];case 17:return[5,nn(_(S.child,M,c))];case 18:return Ee.sent(),[3,64];case 19:return[5,nn(_(S.content,M,c))];case 20:return Ee.sent(),[3,64];case 21:return S.child?[5,nn(_(S.child,M,c))]:[2];case 22:return Ee.sent(),[3,64];case 23:return[5,nn(R(S.items.map(function(Ge){return Ge.label}),M,c))];case 24:return Ee.sent(),[3,64];case 25:return[5,nn(_(S.label,M,c))];case 26:return Ee.sent(),[3,64];case 27:U=0,Ee.label=28;case 28:return U<S.alternatives.length?(j=S.alternatives[U],ae=j.label,V=j.preview,[5,nn(R([ae,V],M,c))]):[3,31];case 29:Ee.sent(),Ee.label=30;case 30:return U++,[3,28];case 31:return[3,64];case 32:Q=0,Ee.label=33;case 33:return Q<S.choices.length?(me=S.choices[Q].preview,[5,nn(_(me,M,c))]):[3,36];case 34:Ee.sent(),Ee.label=35;case 35:return Q++,[3,33];case 36:return[3,64];case 37:return S.footer==null?[3,39]:[5,nn(_(S.footer,M,c))];case 38:return Ee.sent(),[3,40];case 39:Ee.label=40;case 40:return[5,nn(_(S.header,M,c))];case 41:return Ee.sent(),[3,64];case 42:return[5,nn(R(Object.values(S.views),M,c))];case 43:return Ee.sent(),[3,64];case 44:return S.quickActions==null?[3,46]:[5,nn(_(S.quickActions,M,c))];case 45:return Ee.sent(),[3,47];case 46:Ee.label=47;case 47:return[5,nn(_(S.child,M,c))];case 48:return Ee.sent(),[3,64];case 49:return[5,nn(_(S.collapsedContent,M,c))];case 50:return Ee.sent(),[5,nn(_(S.fullContent,M,c))];case 51:return Ee.sent(),[3,64];case 52:return[5,nn(_(S.child,M,c))];case 53:return Ee.sent(),[5,nn(_(S.label,M,c))];case 54:return Ee.sent(),[3,64];case 55:return S.visibleContent==null?[3,57]:[5,nn(_(S.visibleContent,M,c))];case 56:return Ee.sent(),[3,58];case 57:Ee.label=58;case 58:return[5,nn(_(S.obscuredContent.content,M,c))];case 59:return Ee.sent(),[3,64];case 60:return[5,nn(_(S.child,M,c))];case 61:return Ee.sent(),[3,64];case 62:return[2];case 63:if(Ea(S))return[2];hn(S),Ee.label=64;case 64:return[2]}})},E;(function(s){s.PreOrder="PreOrder",s.PostOrder="PstOrder"})(E=e.TreeTraversal||(e.TreeTraversal={})),e.forEach=t,e.traverse=n,e.reduce=r,e.findFirst=i,e.findFirstWithPredicate=a;var g=e.over=function(s,S,M){var c=Kk(S),p=c[0],U=c.slice(1);return Zn.isEmpty(U)&&p===s.id?M(s):$(s,dt.constVoid,E.PreOrder,function(j){return s.id===p&&j.id===U[0]?g(j,U,M):m.some(j)})};e.map=u,e.filter=o,e.filterMap=l,e.compact=f;var I=e.getAlertRefs=function(s){switch(s.type){case"alternativeChoice":case"alternativeSlider":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"box":case"slider":case"text":case"clickableText":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":case"overlay":return m.none;case"shortFormCard":return I(s.child);case"longFormCard":return(0,dt.pipe)(s.behaviors,bn.filter(Mr.isStrongAlertRef),xi.fromArray);case"strongAlertRef":return m.some([s]);case"inlineCard":return(0,dt.pipe)((0,dt.pipe)(s.behaviors,m.fromNullable,m.chain((0,dt.flow)(bn.filter(Mr.isStrongAlertRef),xi.fromArray))));case"list":return(0,dt.pipe)(s.items,bn.map(function(S){return(0,dt.pipe)(S.behaviors,m.fromNullable,m.chain((0,dt.flow)(Zn.filter(Mr.isStrongAlertRef),xi.fromArray)))}),m.sequenceArray,m.map(xi.flatten));default:if(Ea(s))return m.none;hn(s)}};e.getAlertIds=(0,dt.flow)(I,m.chain((0,dt.flow)(bn.chain(Kt.pick("alertIds")),xi.fromReadonlyArray))),e.getAllAlertIds=function(s){return r(s,function(S,M){return(0,dt.pipe)(Jt.getAlertIds(M),m.map(function(c){return S.concat(c)}),m.getOrElse(function(){return S}))},E.PreOrder,[])},e.getSDUIId=function(s){return m.fromNullable(s.id)},e.setPopoverView=function(s,S){return u(s,function(M){switch(M.type){case"box":case"row":case"button":return(0,dt.pipe)(m.fromNullable(M.behaviors),m.chain(bn.findFirst(Mr.isPopoverAnchor)),m.fold((0,cv.constant)(M),function(c){var p=c.view,U=Hk(c,["view"]);return(0,dt.pipe)(m.fromNullable(p),m.fold(function(){return(0,dt.pipe)(S,m.filter(function(j){return j.anchor.kind==="component"&&j.anchor.id===U.id}),m.fold((0,cv.constant)(M),function(j){return Gt(Ft({},M),{behaviors:[Gt(Ft({},U),{view:j})]})}))},function(j){return(0,dt.pipe)(S,m.filter(function(ae){return Kt.isEqual(ae.anchor,j.anchor)}),m.fold(function(){return Gt(Ft({},M),{behaviors:[U]})},function(ae){return ae.rootPopoverId===j.rootPopoverId&&ae.id===j.id?M:Gt(Ft({},M),{behaviors:[Gt(Ft({},U),{view:ae})]})}))}))}));default:return M}})},e.setGlobalPartPlaceholderContent=function(s,S){return u(s,function(M){switch(M.type){case"globalPartPlaceholder":return(0,dt.pipe)(S(M.globalPartId),m.fold(function(){return M},function(c){return Gt(Ft({},M),{child:c.content})}));default:return M}})},e.removeStrongAlertRef=function(s){return function(S){var M=(0,dt.pipe)(S,bn.map(function(U){return U.alertIds}),bn.flatten,function(U){return new Set(U)}),c=(0,dt.pipe)(S,xi.filter(ru.isStrongAlertRefComponent)),p=(0,dt.pipe)(S,xi.filter(ru.isStrongAlertRefBehavior));return(0,dt.pipe)(l(s,k(M,c,p)),m.chain(f))}};var C=function(s,S){var M;return Gt(Ft({},s),{behaviors:(M=s.behaviors)===null||M===void 0?void 0:M.map(function(c){return c.type==="behavior:strongAlertRef"?Gt(Ft({},c),{alertIds:c.alertIds.filter(function(p){return!S.has(p)})}):c})})},k=function(s,S,M){return function(c){switch(c.type){case"alternativeChoice":case"alternativeSlider":case"box":case"block":case"button":case"count":case"alertsCount":case"icon":case"image":case"row":case"slider":case"text":case"column":case"scroll":case"assistantFeed":case"assistantCard":case"popoverStack":case"gButton":case"lensesSwitchPanel":case"clickableText":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeGetStartedChecklistModal":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"viewStack":case"proofitButton":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"collapsedCard":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"tooltip":case"globalPartPlaceholder":case"sticker":case"overlay":return m.some(c);case"shortFormCard":return k(s,S,M)(c.child);case"longFormCard":return m.some(Gt(Ft({},c),{behaviors:c.behaviors.map(function(U){return Mr.isStrongAlertRef(U)?Gt(Ft({},U),{alertIds:U.alertIds.filter(function(j){return!s.has(j)})}):U})}));case"strongAlertRef":return(0,dt.pipe)(S,m.exists(function(U){return U.some(function(j){return L.equals(c,j)})}))?m.none:m.some(Gt(Ft({},c),{alertIds:c.alertIds.filter(function(U){return!s.has(U)})}));case"inlineCard":return c.behaviors&&c.behaviors.some(function(U){return Mr.isStrongAlertRef(U)&&(0,dt.pipe)(M,m.exists(function(j){return j.some(function(ae){return Mr.StrongAlertRef.eq.equals(U,ae)})}))})?m.none:m.some(C(c,s));case"list":var p=c.items.filter(function(U){return U.behaviors?!U.behaviors.some(function(j){return Mr.isStrongAlertRef(j)&&(0,dt.pipe)(M,m.exists(function(ae){return ae.some(function(V){return Mr.StrongAlertRef.eq.equals(j,V)})}))}):!0});return p.length===0?m.none:m.some(Gt(Ft({},c),{items:p.map(function(U){return C(U,s)})}));default:if(Ea(c))return m.some(c);hn(c)}}};e.switchViewStack=function(s,S,M){return(0,dt.pipe)(g(s,S,function(c){return(c.type==="viewStack"||c.type==="popoverStack")&&c.views[M]!=null?m.some(Gt(Ft({},c),{selected:M})):m.some(c)}),m.fold(function(){return s},dt.identity))},e.toContentMap=function(s){return Jt.reduce(s,function(S,M,c){return S[M.id]={content:M,path:c},S},E.PreOrder,{})};var L=e.eq=Qa(rd)(nu.Content),q=e.isEmpty=function(s){if(s==null)return!0;switch(s.type){case"column":return bn.isEmpty(s.children);case"assistantCard":return s.child==null&&s.footer==null;case"box":case"scroll":case"strongAlertRef":case"collapsedCard":case"inlineCard":case"shortFormCard":case"globalPartPlaceholder":return s.child==null;case"row":return bn.isEmpty(s.left)&&bn.isEmpty(s.right);case"block":return bn.isEmpty(s.parts);case"list":return bn.isEmpty(s.items);case"button":return s.label==null;case"alternativeChoice":return bn.isEmpty(s.alternatives);case"alternativeSlider":return bn.isEmpty(s.choices);case"assistantFeed":return s.header==null&&s.footer==null;case"sticker":return s.label==null&&s.child==null;case"overlay":return s.obscuredContent.content==null&&s.visibleContent==null;case"viewStack":return Kt.isEmptyObject(s.views);case"longFormCard":return s.fullContent==null;case"tooltip":return s.child==null;case"globalPart":return s.content==null;case"count":case"alertsCount":case"icon":case"image":case"slider":case"text":case"clickableText":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"popoverStack":return!1;default:if(Ea(s))return!1;hn(s)}};e.isSwitchViewAction=function(s){return s.type==="switchView"},e.bulkSwitchView=h,e.getCardPropsForFeed=d;var G=function(s,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder;return $(s,S,M,u)},D=function(s,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder;return $(s,S,M,o)},Y=function(s,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder;return $(s,S,M,l)},fe=function(s,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder,c=arguments.length>3?arguments[3]:void 0;return(0,dt.pipe)(s,bn.reduce(new Array,function(p,U){return(0,dt.pipe)(c(U,S,M),m.fold(dt.constVoid,function(j){return p.push(j)})),p}))},$=function(s,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder,c=arguments.length>3?arguments[3]:void 0;switch(s.type){case"column":return(0,dt.pipe)(fe(s.children,S,M,c),function(Q){return Gt(Ft({},s),{children:Q})},m.some);case"assistantCard":var p=(0,dt.pipe)(m.fromNullable(s.footer),m.chain(function(Q){return c(Q,S,M)}),m.getOrElse(function(){}));return(0,dt.pipe)(c(s.child,S,M),m.map(function(Q){return Gt(Ft({},s),{child:Q,footer:p})}));case"strongAlertRef":case"scroll":case"inlineCard":case"shortFormCard":case"box":return(0,dt.pipe)(c(s.child,S,M),m.map(function(Q){return Gt(Ft({},s),{child:Q})}));case"row":var U=fe(s.right,S,M,c),j=fe(s.left,S,M,c);return m.some(Gt(Ft({},s),{left:j,right:U}));case"block":return(0,dt.pipe)(fe(s.parts,S,M,c),function(Q){return Gt(Ft({},s),{parts:Q})},m.some);case"list":return(0,dt.pipe)(s.items,bn.map(function(Q){return(0,dt.pipe)(c(Q.label,S,M),m.map(function(me){return Gt(Ft({},Q),{label:me})}))}),bn.filter(m.isSome),bn.map(m.unsafeGet),function(Q){return Gt(Ft({},s),{items:Q})},m.some);case"button":return(0,dt.pipe)(c(s.label,S,M),m.map(function(Q){return Gt(Ft({},s),{label:Q})}));case"alternativeChoice":return(0,dt.pipe)(s.alternatives,bn.map(function(Q){return(0,dt.pipe)([c(Q.label,S,M),c(Q.preview,S,M)],m.sequenceArray,m.map(function(me){return me}),m.map(function(me){var Ie=Vk(me,2),Ee=Ie[0],Ge=Ie[1];return Gt(Ft({},Q),{label:Ee,preview:Ge})}))}),bn.filter(m.isSome),bn.map(m.unsafeGet),function(Q){return Gt(Ft({},s),{alternatives:Q})},m.some);case"alternativeSlider":return(0,dt.pipe)(s.choices,bn.map(function(Q){return(0,dt.pipe)(c(Q.preview,S,M),m.map(function(me){return Gt(Ft({},Q),{preview:me})}))}),bn.filter(m.isSome),bn.map(m.unsafeGet),function(Q){return Gt(Ft({},s),{choices:Q})},m.some);case"assistantFeed":return(0,dt.pipe)(m.fromNullable(s.footer),m.chain(function(Q){return c(Q,S,M)}),m.map(function(Q){return Gt(Ft({},s),{footer:Q})}),m.alt(function(){return m.some(s)}),m.chain(function(Q){return(0,dt.pipe)(c(Q.header,S,M),m.map(function(me){return Gt(Ft({},Q),{header:me})}))}));case"popoverStack":return(0,dt.pipe)(Object.keys(s.views),bn.reduce({},function(Q,me){return(0,dt.pipe)(c(s.views[me].child,S,M),m.fold(function(){return delete Q[me],Q},function(Ie){return Q[me]=Gt(Ft({},s.views[me]),{child:Ie}),Q}))}),function(Q){return Gt(Ft({},s),{views:Q})},m.some);case"viewStack":return(0,dt.pipe)(Object.keys(s.views),bn.reduce({},function(Q,me){return(0,dt.pipe)(c(s.views[me],S,M),m.fold(function(){return delete Q[me],Q},function(Ie){return Q[me]=Ie,Q}))}),function(Q){return Gt(Ft({},s),{views:Q})},m.some);case"collapsedCard":var ae=(0,dt.pipe)(m.fromNullable(s.quickActions),m.chain(function(Q){return c(Q,S,M)}),m.getOrElse(function(){}));return(0,dt.pipe)(c(s.child,S,M),m.map(function(Q){return Gt(Ft({},s),{child:Q,quickActions:ae})}));case"longFormCard":return(0,dt.pipe)(c(s.fullContent,S,M),m.chain(function(Q){return(0,dt.pipe)(c(s.collapsedContent,S,M),m.map(function(me){return Gt(Ft({},s),{fullContent:Q,collapsedContent:me})}))}));case"sticker":return(0,dt.pipe)(c(s.child,S,M),m.chain(function(Q){return(0,dt.pipe)(c(s.label,S,M),m.map(function(me){return Gt(Ft({},s),{child:Q,label:me})}))}));case"overlay":var V=(0,dt.pipe)(m.fromNullable(s.visibleContent),m.chain(function(Q){return c(Q,S,M)}),m.getOrElse(function(){}));return(0,dt.pipe)(c(s.obscuredContent.content,S,M),m.map(function(Q){return Gt(Ft({},s),{obscuredContent:Gt(Ft({},s.obscuredContent),{content:Q}),visibleContent:V})}));case"tooltip":return(0,dt.pipe)(c(s.child,S,M),m.map(function(Q){return Gt(Ft({},s),{child:Q})}));case"globalPart":return(0,dt.pipe)(c(s.content,S,M),m.map(function(Q){return Gt(Ft({},s),{content:Q})}));case"globalPartPlaceholder":return s.child?(0,dt.pipe)(c(s.child,S,M),m.map(function(Q){return Gt(Ft({},s),{child:Q})})):m.some(s);case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return m.some(s);default:if(Ea(s))return m.some(s);hn(s)}},x=function(s,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder,c=arguments.length>3?arguments[3]:void 0;return s.forEach(function(p){return t(p,S,M,c)})},Re=function(s,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.PreOrder,c=arguments.length>3?arguments[3]:void 0;switch(s.type){case"column":return x(s.children,S,M,c);case"assistantCard":return s.footer!=null&&t(s.footer,S,M,c),t(s.child,S,M,c);case"popoverStack":return x(Object.values(s.views).map(function(p){return p.child}),S,M,c);case"strongAlertRef":return t(s.child,S,M,c);case"row":return x(s.left,S,M,c),x(s.right,S,M,c);case"block":return x(s.parts,S,M,c);case"box":case"scroll":case"inlineCard":case"shortFormCard":return t(s.child,S,M,c);case"list":return x(s.items.map(function(p){return p.label}),S,M,c);case"button":return t(s.label,S,M,c);case"alternativeChoice":return s.alternatives.forEach(function(p){var U=p.label,j=p.preview;return x([U,j],S,M,c)});case"alternativeSlider":return s.choices.forEach(function(p){var U=p.preview;return t(U,S,M,c)});case"assistantFeed":return s.footer!=null&&t(s.footer,S,M,c),t(s.header,S,M,c);case"viewStack":return x(Object.values(s.views),S,M,c);case"collapsedCard":return s.quickActions!=null&&t(s.quickActions,S,M,c),t(s.child,S,M,c);case"longFormCard":return t(s.collapsedContent,S,M,c),t(s.fullContent,S,M,c);case"sticker":return t(s.label,S,M,c),t(s.child,S,M,c);case"overlay":return s.visibleContent!=null&&t(s.visibleContent,S,M,c),t(s.obscuredContent.content,S,M,c);case"tooltip":return t(s.child,S,M,c);case"globalPart":return t(s.content,S,M,c);case"globalPartPlaceholder":return s.child?t(s.child,S,M,c):void 0;case"icon":case"image":case"text":case"clickableText":case"count":case"alertsCount":case"slider":case"gButton":case"lensesSwitchPanel":case"proofitButton":case"nativeSkillsModal":case"nativeSkillsList":case"nativeSkillsView":case"nativeToneInsightsModal":case"nativeLearnMoreModal":case"nativeSettingsModal":case"nativeFeedbackModal":case"nativeGetStartedChecklistModal":case"nativeKeyTakeawaysAssistantCard":case"nativeProofitModal":case"nativeExperimentalGBToneInsightsUpsellFooter":case"nativeExperimentalGBConsistencyUpsellFooter":case"nativeInlineCardContent":case"progressBar":case"horizontalRule":case"dropDownMenuButton":case"selectableDropDownMenu":case"radioButtonsGroup":return;default:if(Ea(s))return;hn(s)}};e.Functor={map:function(s,S){return u(s,S,E.PreOrder)}};var N=e.checkForGlobalPartWithPlaceholder=function(s){return _s.isGlobalPart(s)?(0,dt.pipe)(i(s,"globalPartPlaceholder"),m.fold(function(){return Fe.right(s)},function(S){return Fe.left(new Error("globalPart can not contain globalPartPlaceholder. globalPartPlaceholder (id: ".concat(S.id,") found in globalPart (id: ").concat(s.id,")")))})):Fe.right(s)},P=Qa(cg)(nu.Content);e.dslRootParser=(0,dt.flow)(P.decode,Fe.mapLeft(function(s){return new Error(fg(s))}),Fe.chain(N))})(Jt||(Jt={}));function Ea(e){return U0.unsupportedComponents.includes(e.type)}var $k=Me(Xc()),Eu=Me(it()),Yk=Me(Yi()),Rv=Me(Xc()),Jk=Me(va());function Qk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Qk(e,i,n[i])})}return e}var on;(function(e){(function(t){t.eq=zn.eqString,t.show=Rv.showString;function n(r){return"".concat(r)}t.from=n})(e.AlertId||(e.AlertId={})),function(t){var n;(function(f){f.eq=zn.eqString,f.show=Rv.showString;function h(d){return"".concat(d)}f.from=h})(n=t.Id||(t.Id={}));var r=t.eqId=zn.contramap(function(f){return f.id})(n.eq),i=t.eqContent=zn.contramap(function(f){return f.content})(Jt.eq),a=t.eqAlerts=zn.contramap(function(f){return f.alertIds})(Jk.getEq(zn.eqString)),u=t.eqInvalid=zn.contramap(function(f){return!!f.invalid})(zn.eqBoolean),o=t.eq=(0,Yk.fold)(zn.getMonoid())([r,i,a,u]),l=t.show={show:function(f){return"SDUI Item [".concat(f.invalid?"invalid":"valid","] #(").concat(f.id," ").concat(f.alertIds.length===0?"":"with alertIds:"+f.alertIds.join(", "),")")}};t.eqShow=Xk({},o,l)}(e.Item||(e.Item={}))})(on||(on={}));var Ao=Me(it());function wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zk(e){if(Array.isArray(e))return e}function xk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eP(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function tP(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){xk(e,i,n[i])})}return e}function rP(e,t){return Zk(e)||eP(e,t)||iP(e,t)||tP()}function iP(e,t){if(e){if(typeof e=="string")return wv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wv(e,t)}}var St;(function(e){var t=function(d){return function(_){return m.fromNullable(_.entries.get(d))}},n=function(d){return r(m.none,function(_,R){return(0,Ao.pipe)(_,m.alt(function(){return m.fromPredicate(d)(R)}))})},r=function(d,_){return function(R){return Array.from(R.entries.values()).reduce(function(A,E){return _(A,E)},d)}},i=function(d,_){return d.diffVersion===0?Fe.unsafeGet(l({added:_.entries})):d.diffVersion+1===_.diffVersion?_.latestChangeDiff:a(d.entries,_.entries)},a=function(d,_){return ta.symmetricDiff(on.Item.eq)(d,_)},u=function(d){return function(_){var R=ta.leftToRight(ta.Merger.createStrict(on.Item.eqShow),_.entries,d);return(0,Ao.pipe)(R,Fe.bimap(function(A){var E=kr.fromMutation(function(g){(0,Ao.pipe)(d,kr.forEach(function(I,C){return!A.rejected.has(C)&&g.set(C,$r.left(I))},function(I,C,k){return!A.rejected.has(k)&&g.set(k,$r.both(I,C))},function(I,C){return!A.rejected.has(C)&&g.set(C,$r.right(I))}))});return{recovered:Eo(A.recovered,E,_.diffVersion),rejected:A.rejected}},function(A){return Eo(A,d,_.diffVersion)}))}},o=function(d){return function(_){var R=ta.leftToRight(ta.Merger.createLoose(on.Item.eqShow),_.entries,d);return(0,Ao.pipe)(R,Fe.bimap(function(A){return{recovered:Eo(A.recovered,d,_.diffVersion),rejected:A.rejected}},function(A){return Eo(A,d,_.diffVersion)}))}},l=function(d){var _=d.added,R=_===void 0?new Map:_,A=d.updated,E=A===void 0?new Map:A,g=d.removed,I=g===void 0?new Map:g,C=new Map,k=kr.fromMutation(function(L){I.forEach(function(q,G){L.set(G,$r.left(q))}),R.forEach(function(q,G){L.has(G)?C.set(G,"sdui item add overlaps with sdui item remove: toAdd(".concat(on.Item.show.show(q)," overlapWith(").concat($r.getShow(on.Item.show,on.Item.show).show(L.get(G)),"))")):L.set(G,$r.right(q))}),E.forEach(function(q,G){var D=rP(q,2),Y=D[0],fe=D[1];L.has(G)?C.set(G,"sdui item update overlaps with unexpected sdui item add/remove: toUpdate(".concat(on.Item.show.show(fe),") overlapWith(").concat($r.getShow(on.Item.show,on.Item.show).show(L.get(G)),"))")):L.set(G,$r.both(Y,fe))})});return C.size>0?Fe.left({recovered:k,rejected:C}):Fe.right(k)},f=function(d){return{entries:Array.from(d.entries),latestChangeDiff:kr.toJSON(d.latestChangeDiff),diffVersion:d.diffVersion}};e.iso=du(),e.empty={entries:new Map,latestChangeDiff:kr.empty(),diffVersion:0},e.get=t,e.find=n,e.reduce=r,e.size=function(h){return h.entries.size},e.diff=i,e.diffFromEntries=a,e.applyDiff=u,e.applyDiffLoose=o,e.createDiff=l,e.toJSON=f,e.diffShow=nP({},kr.getShow(on.Item.Id.show,on.Item.show)),function(h){var d=h.showMapKeys={show:function(_){return _==null?"None":Array.from(_.keys()).join(", ")}};h.show={show:function(_){return"added: ".concat(d.show(_.added),"\n        \n removed: ").concat(d.show(_.removed),"\n updated: ").concat(d.show(_.removed))}},h.isEmpty=function(_){var R=_.added,A=_.updated,E=_.removed;return(R==null||R.size===0)&&(A==null||A.size===0)&&(E==null||E.size===0)}}(e.InternalDiff||(e.InternalDiff={})),function(h){var d=h.empty=function(){return{added:new Map,updated:new Map,removed:new Map}};h.fromState=function(_){return St.reduce(d(),_)}}(e.MutableInternalDiff||(e.MutableInternalDiff={}))})(St||(St={}));function Eo(e,t,n){return{entries:e,latestChangeDiff:t,diffVersion:n+1}}var ri;(function(e){var t=function(f){return(0,Eu.flow)(St.iso.unwrap,St.get(f))},n=function(f,h){return(0,Eu.flow)(St.iso.unwrap,St.reduce(f,h))},r=function(f,h){return St.diff(St.iso.unwrap(f),St.iso.unwrap(h))},i=function(f){return St.iso.unwrap(f).entries.size===0},a=function(f){return(0,Eu.flow)(St.iso.unwrap,St.find(f))},u=function(){return(0,Eu.flow)(St.iso.unwrap,St.size)},o=function(){return(0,Eu.flow)(St.iso.unwrap,function(f){return Array.from(f.entries.keys())})};(function(l){l.show=kr.getShow($k.showString,on.Item.show),l.empty=kr.empty})(e.Diff||(e.Diff={})),e.empty=St.iso.wrap(St.empty),e.get=t,e.reduce=n,e.diff=r,e.isEmpty=i,e.find=a,e.size=u,e.sduiRoots=o})(ri||(ri={}));var j0=Me(it());function Tv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aP(e){if(Array.isArray(e))return e}function uP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cP(e,t,n){return t&&oP(e.prototype,t),e}function Yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lP(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function fP(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sP(e,t){return aP(e)||lP(e,t)||dP(e,t)||fP()}function dP(e,t){if(e){if(typeof e=="string")return Tv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tv(e,t)}}var KN=function(){function e(t){var n=this;uP(this,e),Yl(this,"_state",new Map),Yl(this,"_subs",new tu.Keeper),Yl(this,"_log",Nn.Logging.getLogger("SDUIInlineManager",Cn.LogLevel.TRACE,Cn.LogColor.Manager.getColor())),this._subs.push(t.pipe(xe.startWith(ri.empty),xe.pairwise(),xe.map(function(r){var i=sP(r,2),a=i[0],u=i[1];return ri.diff(a,u)}),xe.map(function(r){return n._processSDUIItems(r)})).subscribe())}return cP(e,[{key:"getInlineItemForAlert",value:function(n){return m.fromNullable(this._state.get(n))}},{key:"_processSDUIItems",value:function(n){var r=this;(0,j0.pipe)(n,kr.forEach(function(i){Jl(i)&&(r._log.trace("inline item removed",{alertIds:i.alertIds,itemId:i.id}),i.alertIds.forEach(function(a){return r._state.delete(a)}))},function(i,a){Jl(a)&&(r._log.trace("inline item updated",{alertIds:a.alertIds,itemId:a.id}),a.alertIds.forEach(function(u){return r._state.set(u,a)}))},function(i){Jl(i)&&(r._log.trace("inline item added",{alertIds:i.alertIds,itemId:i.id}),i.alertIds.forEach(function(a){return r._state.set(a,i)}))}))}},{key:"dispose",value:function(){this._subs.dispose()}}]),e}(),Jl=function(e){return(0,j0.pipe)(Jt.findFirst(e.content,"inlineCard"),m.isSome)},ci=Me(va()),Ov=Me(lu()),ln=Me(it()),hP=Me(lu()),Cv=Me(va()),vP=Me(Im()),Pi=Me(it()),Bn;(function(e){var t=function(i){return i.kind===n.Add||i.kind===n.Remove||i.kind===n.Update};(function(r){(function(i){i.create=function(a){return a.toString()}})(r.Id||(r.Id={}))})(e.RawSduiItem||(e.RawSduiItem={}));var n;(function(r){r.Add="sdui_add",r.Remove="sdui_remove",r.Update="sdui_update"})(n=e.SduiEventKind||(e.SduiEventKind={})),e.isSduiEvent=t})(Bn||(Bn={}));var An=Me(it()),Ql=Me(va());function Mv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mP(e){if(Array.isArray(e))return e}function gP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pP(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function _P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){gP(e,i,n[i])})}return e}function bP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}function IP(e,t){return t=t!=null?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function SP(e,t){if(e==null)return{};var n=AP(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function AP(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function EP(e,t){return mP(e)||pP(e,t)||RP(e,t)||_P()}function RP(e,t){if(e){if(typeof e=="string")return Mv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mv(e,t)}}var si;(function(e){(function(r){r.fromItem=function(i){i.alertIds;var a=SP(i,["alertIds"]);return a},r.show={show:function(i){var a=i.sduiId,u=i.sduiRootId;return JSON.stringify({sduiId:a,sduiRootId:u})}}})(e.EmptyMessage||(e.EmptyMessage={})),function(r){r.isRootItem=function(i){return i.sduiId===i.sduiRootId}}(e.EmptyItem||(e.EmptyItem={}));var t;(function(r){r.fromSDUI=function(u){return function(o){return Jt.reduce(o.content,function(l,f){return(0,An.pipe)(l,m.chain(function(h){return(0,An.pipe)(f,Jt.getAlertIds,m.chain(u),m.map(a(h)),m.alt(function(){return l}))}),m.alt(function(){return(0,An.pipe)(f,Jt.getAlertRefs,m.chain(i(o.id,u)))}))},Jt.TreeTraversal.PreOrder,m.none)}};var i=function(u,o){return function(l){return l.reduce(function(f,h){return(0,An.pipe)(f,m.map(function(d){return(0,An.pipe)(h.alertIds,o,m.fold(function(){return d},a(d)))}),m.alt(function(){return m.some({emptyStrongAlertRef:h,sduiId:u,sduiRootId:u,alertIds:new Set((0,An.pipe)(h.alertIds,o,m.getOrElse((0,An.constant)(Zn.empty))))})}))},m.none)}};r.fromStrongAlertRef=function(u){return function(o,l){return(0,An.pipe)(u(o.alertIds),m.map(function(f){return{sduiRootId:l,sduiId:on.Item.Id.from(o.id),emptyStrongAlertRef:o,alertIds:new Set(f)}}))}},r.fromStrongAlertRefBehavior=function(u){return function(o,l,f){return(0,An.pipe)(u(o.alertIds),m.map(function(h){return{sduiRootId:f,sduiId:l,emptyStrongAlertRef:o,alertIds:new Set(h)}}))}},r.show={show:function(u){return"StrAlertRef.Item: { sduiId: ".concat(u.sduiId,", sduiRootId: ").concat(u.sduiRootId,", alertIds: [").concat(Array.from(u.alertIds.values()).join(", "),"]}")}};var a=r.addAlertIds=function(u){return function(o){return o.forEach(function(l){return u.alertIds.add(l)}),u}}})(t=e.Item||(e.Item={}));var n;(function(r){r.iso=du(),r.empty=function(){return{alertRefMapping:new Map}},r.size=function(f){return f.alertRefMapping.size},r.show={show:function(f){return Array.from(f.alertRefMapping.entries()).map(function(h){var d=EP(h,2),_=d[0],R=d[1];return"".concat(_,": [\n").concat(R.map(t.show.show).join("\n"),"\n]")}).join("\n")}};var i=function(f){return function(h){return(0,An.pipe)(h.alertRefMapping.get(f),m.fromNullable)}},a=function(f,h){return function(d){return(0,An.pipe)(d,Jt.getAlertRefs,m.fold((0,An.constant)(Ql.empty),Ql.filterMap(function(_){return ru.isStrongAlertRefBehavior(_)?t.fromStrongAlertRefBehavior(h)(_,on.Item.Id.from(d.id),f):t.fromStrongAlertRef(h)(_,f)})))}};r.get=function(f){return function(h){return(0,An.pipe)(i(f)(h),m.map(Zn.map(function(d){return IP(yP({},d),{alertIds:new Set(d.alertIds)})})))}},r.updateWithRemovedAlerts=function(f){return function(h){return(0,An.pipe)(f,Ql.chain(function(d){return(0,An.pipe)(h,i(d),m.map(Zn.filter(function(_){return _.alertIds.delete(d)&&_.alertIds.size===0})),m.fold(function(){return[]},function(_){return h.alertRefMapping.delete(d),_.map(si.EmptyMessage.fromItem)}))}))}},r.add=function(f,h){return function(d){ru.isStrongAlertRefBehavior(f.emptyStrongAlertRef)?(0,An.pipe)(t.fromStrongAlertRefBehavior(h)(f.emptyStrongAlertRef,f.sduiId,f.sduiRootId),m.tap(u(d))):Jt.forEach(f.emptyStrongAlertRef,(0,An.flow)(a(f.sduiRootId,h),Zn.map(u(d))),Jt.TreeTraversal.PostOrder)}};var u=function(f){var h=o(f);return function(d){d.alertIds.forEach(function(_){return h(_,[d])})}},o=function(f){return function(h,d){var _=f.alertRefMapping.get(h);f.alertRefMapping.set(h,_!=null?_.concat(d):d)}},l=function(f){return function(h,d){d.length===0?f.alertRefMapping.delete(h):o(f)(h,d)}};r.remove=function(f){return function(h){return(0,An.pipe)(Array.from(f.alertIds.keys()),Zn.reduce(new Array,function(d,_){return(0,An.pipe)(h,i(_),m.map(Zn.filter(function(R){return R.sduiRootId!==f.sduiRootId})),m.fold(function(){return void d.push("failed to remove SDUI by alertId ".concat(_,", alertRefMapping doesn't contain alertId ").concat(_))},function(R){return l(h)(_,R)})),d}))}}})(n||(n={})),function(r){r.empty=function(){return n.iso.wrap(n.empty())},r.size=function(i){return(0,An.pipe)(n.iso.unwrap(i),n.size)},r.show={show:function(i){return(0,An.pipe)(n.iso.unwrap(i),n.show.show)}},r.get=function(i){return function(a){return(0,An.pipe)(n.iso.unwrap(a),n.get(i))}},r.add=function(i,a){return function(u){return(0,An.pipe)(n.iso.unwrap(u),n.add(i,a))}},r.remove=function(i){return function(a){return(0,An.pipe)(n.iso.unwrap(i),n.remove(a))}},r.updateWithRemovedAlerts=function(i){return function(a){return(0,An.pipe)(n.iso.unwrap(a),n.updateWithRemovedAlerts(i))}}}(e.Collection||(e.Collection={}))})(si||(si={}));function kv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wP(e){if(Array.isArray(e))return e}function TP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OP(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function CP(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){TP(e,i,n[i])})}return e}function kP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}function PP(e,t){return t=t!=null?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function pr(e,t){return wP(e)||OP(e,t)||NP(e,t)||CP()}function NP(e,t){if(e){if(typeof e=="string")return kv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kv(e,t)}}var Pv=(0,Pi.flow)(Zn.map(on.AlertId.from),m.some),WP=function(e,t,n,r,i,a,u,o){var l=e.pipe(xe.withLatestFrom(n),xe.tap(function(g){var I=pr(g,1),C=pr(I[0],2),k=C[0],L=C[1];u.trace("[Optimistic update] emptyAlertsRefReasonTuple > Removed alerts. Reason: ".concat(L,", removedAlertIds: [").concat(k.join(", "),"]"))}),xe.map(function(g){var I=pr(g,2),C=pr(I[0],2),k=C[0],L=C[1],q=I[1];return[(0,Pi.pipe)(q,FP(u),si.Collection.updateWithRemovedAlerts(k)),L]}),xe.tap(function(g){var I=pr(g,2),C=I[0],k=I[1];return u.trace("[Optimistic update] emptyAlertsRefReasonTuple > Reason: ".concat(k," found emptyAlertsRef: [").concat(C.map(si.EmptyMessage.show.show).join(", "),"]"))}),xe.switchMap(function(g){var I=pr(g,2),C=I[0],k=I[1];return(0,Pi.pipe)(C,Cv.map(function(L){return[L,k]}),function(L){return xe.from(L)})}),xe.share()),f=l.pipe(xe.filter(function(g){var I=pr(g,1),C=I[0];return si.EmptyItem.isRootItem(C)}),xe.map(function(g){var I=pr(g,2),C=I[0],k=I[1];return Gi.toRemovedEvent(k)(Bn.RawSduiItem.Id.create(C.sduiRootId))})),h=t.pipe(xe.map(function(g){var I=pr(g,2),C=I[0],k=I[1];return Gi.toRemovedEvent(k)(Bn.RawSduiItem.Id.create(C))})),d=xe.mergeStatic(f,h),_=l.pipe(xe.filter(function(g){var I=pr(g,1),C=I[0];return!si.EmptyItem.isRootItem(C)}),xe.withLatestFrom(n),xe.map(function(g){var I=pr(g,2),C=pr(I[0],2),k=C[0],L=C[1],q=I[1],G=Bn.RawSduiItem.Id.create(k.sduiRootId);return(0,Pi.pipe)(ri.get(on.Item.Id.from(k.sduiRootId))(q),m.chain(function(D){return Jt.removeStrongAlertRef(D.content)([k.emptyStrongAlertRef])}),m.fold(function(){return Gi.toRemovedEvent(L)(Bn.RawSduiItem.Id.create(k.sduiRootId))},function(D){return Gi.toUpdatedEvent(L)(D,G)}))})),R=r.pipe(xe.buffer(o),xe.filter(Zn.isNonEmpty),xe.map((0,Pi.flow)(hP.groupBy(function(g){return g.sduiRootId}),vP.toReadonlyArray,Cv.map(function(g){var I=pr(g,2),C=I[0],k=I[1];return k.forEach(function(L){return i.switchView(L)}),za.of(C,"switchView")(m.chain(function(L){return(0,Pi.pipe)(Jt.bulkSwitchView(L,k.map(function(q){return{where:q.where,selected:q.selected,type:"switchView"}})),m.some)}))})))),A=xe.combineLatestStatic([i.activePopoverView.pipe(xe.skipWhile(m.isNone)),n.pipe(xe.map(ri.sduiRoots()))]).pipe(xe.map(function(g){var I=pr(g,2),C=I[0],k=I[1];return k.map(function(L){return za.of(L,"switchView")(m.chain(function(q){return Jt.setPopoverView(q,C)}))})})),E=a.globalPartsAvailable.pipe(xe.filter(Pi.identity),xe.switchMap(function(){return n}),xe.map(ri.sduiRoots()),xe.map(function(g){return g.map(function(I){return za.of(I,"capi")(m.chain(function(C){return Jt.setGlobalPartPlaceholderContent(C,a.getGlobalPartById)}))})}));return{emptyAlertsRefReasonTuple:l,optimisticRemoveSDUIEvent:d,emptyStrongAlertRefUpdate:_,viewStackUpdates:R,activePopoverUpdates:A,globalPartPlaceholderUpdates:E}};function FP(e){var t=function(n,r){return(0,Pi.pipe)(si.Item.fromSDUI(Pv)(r),m.fold(function(){return e.trace("SDUI item ".concat(on.Item.show.show(r)," does not contain AlertRef, skipping it"))},function(i){return si.Collection.add(i,Pv)(n)}),function(i){return n})};return ri.reduce(si.Collection.empty(),t)}var UP=function(e){return e.kind==Bn.SduiEventKind.Update},DP=function(e){return e.kind==Bn.SduiEventKind.Remove},Gi;(function(e){e.fromSource=function(t){return function(n){return PP(MP({},n),{source:t})}},e.toRemovedEvent=function(t){return function(n){return{kind:Bn.SduiEventKind.Remove,sduiRootId:n,source:t,rev:0}}},e.toUpdatedEvent=function(t){return function(n,r){return{kind:Bn.SduiEventKind.Update,sdui:n,sduiRootId:r,source:t,rev:0}}},e.show={show:function(t){return"SduiRootId: ".concat(t.sduiRootId,", Kind: ").concat(t.kind,", Source: ").concat(t.source)}}})(Gi||(Gi={}));var Fr;(function(e){e.CAPI="capi",e.TextChange="textChange",e.RemoveAlertsSDUIAction="removeAlerts",e.RemoveRootSDUIAction="removeRoot",e.RemoveDuplicate="removeDuplicate",e.SwitchView="switchView"})(Fr||(Fr={}));var za;(function(e){e.of=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return function(i){return{kind:"sdui_lazy_update",toContent:i,sduiRootId:on.Item.Id.from(t),rev:r,source:n}}}})(za||(za={}));var Ni=Me(it());function Nv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LP(e){if(Array.isArray(e))return e}function qP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jP(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function GP(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function HP(e,t){return LP(e)||jP(e,t)||zP(e,t)||GP()}function zP(e,t){if(e){if(typeof e=="string")return Nv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nv(e,t)}}var qn;(function(e){e.iso=function(){return du()},e.empty=function(){return{sduiQueue:new Map}},e.removeAllBySduiId=function(t){return function(n){return(0,Ni.pipe)(qn.toQueueValuesArray(n),Zn.filter(function(r){return r.id.indexOf("".concat(t.event.sduiRootId,"_"))===0}),function(r){return qn.removeItems(r)(n),r})}},e.removeEarlierItemsBySduiId=function(t){return function(n){return(0,Ni.pipe)(qn.toQueueValuesArray(n),Zn.filter(function(r){return r.id.indexOf("".concat(t.event.sduiRootId,"_"))===0&&r.order<t.order}),function(r){return qn.removeItems(r)(n),r})}},e.addItem=function(t){return function(n){n.sduiQueue.set(t.id,t)}},e.removeItems=function(t){return function(n){t.forEach(function(r){return n.sduiQueue.delete(r.id)})}},e.toQueueValuesArray=function(t){return Array.from(t.sduiQueue.values())},e.size=function(t){return t.sduiQueue.size}})(qn||(qn={}));var Or;(function(e){var t=function n(){qP(this,n)};BP(t,"QueueCounter",0),e.show={show:function(n){return Array.from(qn.iso().unwrap(n).sduiQueue.entries()).map(function(r){var i=HP(r,2),a=i[0],u=i[1];return"".concat(a," - { id: ").concat(u.id," sduiRootId: ").concat(u.event.sduiRootId,", kind: ").concat(u.event.kind)}).join(";\n")}},function(n){var r;(function(i){function a(u){return"".concat(u)}i.from=a})(r=n.Id||(n.Id={})),n.fromEvent=function(i){return{id:r.from("".concat(i.sduiRootId,"_").concat(++t.QueueCounter)),order:t.QueueCounter,event:i}}}(e.Item||(e.Item={})),e.empty=function(){return qn.iso().wrap(qn.empty())},e.removeAllBySduiId=function(n){return function(r){return(0,Ni.pipe)(qn.iso().unwrap(r),qn.removeAllBySduiId(n))}},e.addItem=function(n){return function(r){return(0,Ni.pipe)(qn.iso().unwrap(r),qn.addItem(n))}},e.removeItems=function(n){return function(r){return(0,Ni.pipe)(qn.iso().unwrap(r),qn.removeItems(n))}},e.removeEarlierItemsBySduiId=function(n){return function(r){return(0,Ni.pipe)(qn.iso().unwrap(r),qn.removeEarlierItemsBySduiId(n))}},e.toQueueValuesArray=function(n){return(0,Ni.pipe)(qn.iso().unwrap(n),qn.toQueueValuesArray)},e.size=function(n){return(0,Ni.pipe)(qn.iso().unwrap(n),qn.size)}})(Or||(Or={}));var Ro=Me(it());function VP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $P(e,t,n){return t&&KP(e.prototype,t),e}function Xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YP=function(){return{dsl:m.none,revision:-1}},JP=function(){function e(){VP(this,e),Xl(this,"activePopoverStack",void 0),Xl(this,"activePopoverView",void 0),Xl(this,"_state",void 0),this._state=$a.create(YP()),this.activePopoverStack=this._state.view("dsl"),this.activePopoverView=this.activePopoverStack.view(m.chain(function(t){return m.fromNullable(t.views[t.selected])}))}return $P(e,[{key:"getInteractionActions",value:function(n,r,i){return(0,Ro.pipe)(this._state.get(),function(a){return a.dsl},m.filter(function(a){return a.id===n&&a.selected===r}),m.map(function(a){return a.views[a.selected]}),m.fold(function(){return[]},function(a){switch(i){case Qr.ActionInteractPopoverInteraction.Fulfill:return a.onFulfill||[];case Qr.ActionInteractPopoverInteraction.Dismiss:return a.onDismiss||[]}}))}},{key:"addPopover",value:function(n,r){this._state.modify(function(i){var a=r!==void 0&&i.revision>r,u=r!==void 0&&i.revision===r,o=(0,Ro.pipe)(i.dsl,m.exists(function(f){return f.id===n.id})),l=!m.isNone(i.dsl);return a||o||u&&l?i:{dsl:m.some(n),revision:r!=null?r:i.revision}})}},{key:"removePopover",value:function(n,r){this._state.modify(function(i){var a=r!==void 0&&i.revision>r,u=(0,Ro.pipe)(i.dsl,m.exists(function(o){return o.id===n}));return a||!u?i:{dsl:m.none,revision:r!=null?r:i.revision}})}},{key:"switchView",value:function(n){this._state.modify(function(r){return(0,Ro.pipe)(r.dsl,m.filter(function(i){return i.id===n.sduiRootId}),m.map(function(i){return Jt.bulkSwitchView(i,[{where:n.where,selected:n.selected,type:"switchView"}])}),m.filter(function(i){return i.type==="popoverStack"}),m.fold(function(){return r},function(i){return{dsl:m.some(i),revision:r.revision}}))})}}]),e}();function QP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZP(e,t,n){return t&&XP(e.prototype,t),e}function wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xP=function(){function e(t){var n=this;QP(this,e),wo(this,"_globalPartsState",$a.create(new Map)),wo(this,"_subs",new tu.Keeper),wo(this,"globalPartsAvailable",this._globalPartsState.view(function(r){return r.size!==0})),wo(this,"getGlobalPartById",function(r){return m.fromNullable(n._globalPartsState.get().get(on.Item.Id.from(r)))}),this._subs.push(t.pipe(xe.map(function(r){return ri.reduce(new Map,function(i,a){return a.content.type==="globalPart"&&i.set(a.id,a.content),i})(r)})).subscribe(Tp.toAtom(this._globalPartsState)))}return ZP(e,[{key:"dispose",value:function(){this._subs.dispose()}}]),e}();function Wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eN(e){if(Array.isArray(e))return e}function tN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rN(e,t,n){return t&&nN(e.prototype,t),e}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iN(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function aN(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function li(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Ht(e,i,n[i])})}return e}function uN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}function fi(e,t){return t=t!=null?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uN(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Ir(e,t){return eN(e)||iN(e,t)||oN(e,t)||aN()}function oN(e,t){if(e){if(typeof e=="string")return Wv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wv(e,t)}}var jc;(function(e){e.create=function(t,n){return{card:t,parentStrongAlertRef:n}},e.isAssistantCardContent=function(t){return t.card.type==="assistantCard"},e.isInlineCardContent=function(t){return t.card.type==="inlineCard"}})(jc||(jc={}));var $N=function(){function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new JP,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:xe.interval(100).pipe(xe.startWith(0)),a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:xe.buffer,u=this;tN(this,e),Ht(this,"alertIdResolver",void 0),Ht(this,"popoverManager",void 0),Ht(this,"_sduiEventsBufferNotifier",void 0),Ht(this,"_sduiEventsBuffer",void 0),Ht(this,"_state",void 0),Ht(this,"state",void 0),Ht(this,"globalPartManager",void 0),Ht(this,"_unresolvedItemsQueueSize",void 0),Ht(this,"unresolvedItemsQueueSize",void 0),Ht(this,"_onAlertsRefEmpty",void 0),Ht(this,"_removedAlerts",void 0),Ht(this,"_removedRoot",void 0),Ht(this,"_switchView",void 0),Ht(this,"_sessionEvents",void 0),Ht(this,"_reviseSduiQueue",void 0),Ht(this,"_flush",void 0),Ht(this,"_flushViewSwitch",void 0),Ht(this,"_subs",void 0),Ht(this,"_log",void 0),Ht(this,"loadItems",void 0),Ht(this,"_arrayToDiff",void 0),Ht(this,"findFirstCardWithContent",void 0),Ht(this,"notifyAlertsChanged",void 0),Ht(this,"onSessionStarted",void 0),Ht(this,"onFirstCheckingFinished",void 0),Ht(this,"_processEvents",void 0),Ht(this,"_getAllAlertsIdsFromEvent",void 0),Ht(this,"_getAlertsIdsFromAlertRef",void 0),Ht(this,"_getAlertsIdsFromDSL",void 0),Ht(this,"_resolveAlertIds",void 0),Ht(this,"_hasAllAlerts",void 0),Ht(this,"_toInternalDiff",void 0),Ht(this,"_preserveViewStackForCAPIUpdates",void 0),Ht(this,"_normalizeSDUIEvents",void 0),Ht(this,"_toSDUIItem",void 0),Ht(this,"_emitDomainEvent",void 0),Ht(this,"_debugLogState",void 0),Ht(this,"_getBufferObs",void 0),this.alertIdResolver=n,this.popoverManager=r,this._sduiEventsBufferNotifier=i,this._sduiEventsBuffer=a,this._state=$a.create(St.empty),this.state=this._state.view(function($){return St.iso.wrap($)}),this.globalPartManager=new xP(this.state),this._unresolvedItemsQueueSize=new xe.BehaviorSubject(0),this.unresolvedItemsQueueSize=this._unresolvedItemsQueueSize.pipe(xe.distinctUntilChanged()),this._onAlertsRefEmpty=new xe.Subject,this._removedAlerts=new xe.Subject,this._removedRoot=new xe.Subject,this._switchView=new xe.Subject,this._sessionEvents=new xe.Subject,this._reviseSduiQueue=new xe.Subject,this._flush=new xe.Subject,this._flushViewSwitch=new xe.Subject,this._subs=new tu.Keeper,this._log=Nn.Logging.getLogger("SDUIManager",Cn.LogLevel.TRACE,Cn.LogColor.Manager.getColor()),this.loadItems=function($){var x=(0,ln.pipe)($,ci.partition(function(P){return P.content.type==="popoverStack"})),Re=x.right,N=x.left;Re.forEach(function(P){var s=P.content;s.type==="popoverStack"&&u.popoverManager.addPopover(s)}),(0,ln.pipe)(N,ci.map(function(P){return fi(li({},P),{invalid:!0})}),u._arrayToDiff,St.applyDiff,Bu.map(Fa.recover(function(P){return u._log.debug("conflicts on diff apply",P)})),function(P){return u._state.modify(P)})},this._arrayToDiff=function($){return kr.fromMutation(function(x){return ci.map(function(Re){x.set(Re.id,$r.right(Re))})($)})},this.findFirstCardWithContent=function($){return(0,ln.pipe)(u.state.get(),ri.get($),m.map(function(x){var Re=x.content;return Jt.reduce(Re,function(N,P){return(0,ln.pipe)(N,Fe.fold(function(s){return P.type==="strongAlertRef"?Fe.left(m.some(P)):P.type==="assistantCard"||P.type==="inlineCard"?Fe.right(jc.create(P,s)):Fe.left(s)},Fe.right))},Jt.TreeTraversal.PreOrder,Fe.left(m.none))}),m.chain(m.fromEither))},this.notifyAlertsChanged=function(){return u._reviseSduiQueue.next()},this.onSessionStarted=function(){return u._sessionEvents.next(ka.Start)},this.onFirstCheckingFinished=function(){return u._sessionEvents.next(ka.FirstCheckingFinished)},this._processEvents=function($){return function(x,Re){var N=(0,ln.pipe)(Re,Fe.fold(function(P){return(0,ln.pipe)(Or.toQueueValuesArray(x),Zn.filter($))},function(P){if(P.kind===Bn.SduiEventKind.Remove){u._log.debug("[IN - ".concat(P.kind,", {id: ").concat(P.sduiRootId,"}] removeAllBySduiId"));var s=Or.Item.fromEvent(P);return Or.removeAllBySduiId(s)(x),[s]}var S=Or.Item.fromEvent(P);return $(S)?(u._log.debug("[IN - ".concat(S.event.kind," {sduiRootId: ").concat(S.event.sduiRootId,", id: ").concat(S.id," refs: ").concat(JSON.stringify(Jt.getAlertIds(S.event.sdui)),"}, ] hasAllAlerts")),[S]):(Or.addItem(S)(x),u._log.debug("[IN - ".concat(S.event.kind," {sduiRootId: ").concat(S.event.sduiRootId,", id: ").concat(S.id," refs: ").concat(JSON.stringify(Jt.getAlertIds(S.event.sdui)),"}] add to queue, [queue]: ").concat(Or.show.show(x))),[])}),function(P){return u._log.debug("[completeItems] ".concat(P.map(function(s){return s.id}).join(", "),", [queue]: ").concat(Or.show.show(x))),Or.removeItems(P)(x),P.forEach(function(s){return Or.removeEarlierItemsBySduiId(s)(x)}),P},Zn.map(Kt.pick("event")));return fi(li({},x),{completeEvents:N})}},this._getAllAlertsIdsFromEvent=function($,x){return(0,ln.flow)(function(Re){return Re.sdui},u._getAlertsIdsFromDSL($,x))},this._getAlertsIdsFromAlertRef=function($,x){return function(Re){return(0,ln.pipe)(Re,Jt.getAlertIds,m.tapLeft(function(){return x===na.Silent?{}:u._log.debug("Provided SDUI dsl doesn't contain alertIds array. StrongAlertRef: ".concat(JSON.stringify({id:Re.id,type:Re.type,name:Re.name,alertIds:Re.alertIds})))}),m.fold(function(){return[]},ln.identity),u._resolveAlertIds($,x))}},this._getAlertsIdsFromDSL=function($,x){return function(Re){return(0,ln.pipe)(Re,Jt.getAllAlertIds,function(N){return Array.from(new Set(N))},function(N){return ci.isEmpty(N)&&u._log.trace("Provided SDUI dsl doesn't contain any alertIds references. DSL id: ".concat(Re.id)),N},u._resolveAlertIds($,x))}},this._resolveAlertIds=function($,x){return function(Re){return(0,ln.pipe)(Re,ci.map(function(N){return(0,ln.pipe)(on.AlertId.from(N),$,m.tapLeft(function(){return x===na.Silent?{}:u._log.error("Alert with raw id ".concat(N,", can not be found. It was either deleted or was not added yet."))}))}),ci.sequence(m.option))}},this._hasAllAlerts=function($,x){return(0,ln.flow)(u._getAllAlertsIdsFromEvent($,x),m.isSome)},this._toInternalDiff=function($){return function(x){var Re=Ir(x,2),N=Re[0],P=Re[1],s=St.MutableInternalDiff.empty();return(0,ln.pipe)(N,Ov.reduce(s,function(S,M){return M.kind===Bn.SduiEventKind.Remove?u._handleSDUIRemove(M,P,S):(0,ln.pipe)(u._getAllAlertsIdsFromEvent($,na.Silent)(M),m.map(u._toSDUIItem(M)),m.fold(function(){return u._log.trace(zr.internalDiffParsingError([Jt.getAllAlertIds(M.sdui).join(", "),M.sduiRootId]))},function(c){var p=M.kind;switch(p){case Bn.SduiEventKind.Add:u._handleSDUIAdd(c,M.rev,P,S);break;case Bn.SduiEventKind.Update:u._handleSDUIUpdate(c,P,S);break;default:hn(p)}}),function(c){return S})}))}},this._preserveViewStackForCAPIUpdates=function($){return(0,ln.pipe)($,Ov.map(function(x){return x.kind!==Bn.SduiEventKind.Update||x.source!==Fr.CAPI?x:za.of(x.sduiRootId,x.source,x.rev)(m.fold(function(){return m.some(x.sdui)},(0,ln.flow)(Jt.toContentMap,function(Re){return(0,ln.pipe)(Re,Object.values,Zn.filterMap(function(N){var P=N.content;return P.type==="viewStack"?m.some({type:"switchView",where:P.id,selected:P.selected}):m.none}),function(N){return Jt.bulkSwitchView(x.sdui,N,Re)})},m.some)))}))},this._normalizeSDUIEvents=function($){var x=Ir($,2),Re=x[0],N=x[1];return(0,ln.pipe)(Re,ci.filterMap(function(P){return P.kind!=="sdui_lazy_update"?m.some(P):u._handleSDUILazyUpdate(P,N)}))},this._toSDUIItem=function($){return function(x){return{id:on.Item.Id.from($.sduiRootId),content:$.sdui,alertIds:x}}},this._emitDomainEvent=function($){u._log.debug("internalDiff",St.InternalDiff.show.show($)),(0,ln.pipe)($,St.createDiff,Fa.recover(function(x){return u._log.debug("conflicts on diff creating",x)}),function(x){return u._log.debug("SDUIItemsCollectionDiff",St.diffShow.show(x)),x},St.applyDiff,Bu.map(Fa.recover(function(x){return u._log.debug("conflicts on diff apply",x)})),function(x){return u._state.modify(x)})},this._debugLogState=function($){return u._log.debug("[SDUIManagerState] (SDUIItemsCollection)","_latestChangeDiff: ".concat(St.diffShow.show($.latestChangeDiff),",\n _entriesIds: ").concat(St.InternalDiff.showMapKeys.show($.entries),"}"))},this._getBufferObs=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe.interval(100).pipe(xe.startWith(0)),x=xe.mergeStatic($,u._flush),Re=xe.mergeStatic(xe.interval(100).pipe(xe.startWith(0)),u._flushViewSwitch);return{bufferObsForSDUIEvents:x,bufferObsForViewSwitchEvents:Re}},this._subs.push(this.globalPartManager);var o=t.pipe(xe.map(Gi.fromSource(Fr.CAPI))),l=this._getBufferObs(this._sduiEventsBufferNotifier),f=l.bufferObsForSDUIEvents,h=l.bufferObsForViewSwitchEvents,d=WP(this._removedAlerts.asObservable(),this._removedRoot.asObservable(),this.state,this._switchView.asObservable(),this.popoverManager,this.globalPartManager,this._log,h),_=d.emptyAlertsRefReasonTuple,R=d.optimisticRemoveSDUIEvent,A=d.emptyStrongAlertRefUpdate,E=d.viewStackUpdates,g=d.activePopoverUpdates,I=d.globalPartPlaceholderUpdates,C=xe.mergeStatic(o,R,A).pipe(xe.tap(function($){return u._log.debug("Received SDUI event: ".concat(Gi.show.show($)," from: ").concat($.source))}),xe.scan(function($,x){var Re=x.source;switch(Re){case Fr.RemoveAlertsSDUIAction:case Fr.RemoveRootSDUIAction:case Fr.RemoveDuplicate:case Fr.TextChange:return x.kind===Bn.SduiEventKind.Remove&&$.optRemovedSDUIRootIds.add(x.sduiRootId),fi(li({},$),{event:m.some(x)});case Fr.CAPI:return(0,ln.pipe)(x,m.fromPredicate(function(N){return $.optRemovedSDUIRootIds.has(N.sduiRootId)}),m.tap(function(N){return $.optRemovedSDUIRootIds.delete(N.sduiRootId)}),m.chain(m.fromPredicate(Xa(UP,DP))),m.fold(function(){return fi(li({},$),{event:m.some(x)})},function(N){return N.kind===Bn.SduiEventKind.Remove?fi(li({},$),{event:m.none}):fi(li({},$),{event:m.some(fi(li({},N),{kind:Bn.SduiEventKind.Add}))})}));case Fr.SwitchView:return fi(li({},$),{event:m.some(x)});default:hn(Re)}},{optRemovedSDUIRootIds:new Set,event:m.none}),xe.map(Kt.pick("event")),Fu.compact,xe.map(Fe.right)),k=(0,ln.flow)(Kt.pick("event"),this._hasAllAlerts(this.alertIdResolver,na.Silent)),L=xe.mergeStatic(C,this._reviseSduiQueue.pipe(xe.map(Fe.left))).pipe(xe.scan(this._processEvents(k),fi(li({},Or.empty()),{completeEvents:[]})),xe.tap(function($){return u._unresolvedItemsQueueSize.next(Or.size($))}),xe.map(Kt.pick("completeEvents"))),q=xe.mergeStatic(L,E,g,I).pipe(this._sduiEventsBuffer(f),xe.map(function($){return ci.flatten($)}),xe.filter(ci.isNonEmpty)),G=q.pipe(xe.map(this._preserveViewStackForCAPIUpdates),xe.withLatestFrom(this._state),xe.map(this._normalizeSDUIEvents),xe.filter(ci.isNonEmpty)),D=this._sessionEvents.pipe(xe.filter(function($){return $===ka.Start}),xe.withLatestFrom(this._state),xe.map(function($){var x=Ir($,2);x[0];var Re=x[1];return Re}),xe.filter(function($){return $.entries.size>0}),xe.map(St.MutableInternalDiff.fromState(function($,x){var Re=fi(li({},x),{invalid:!0});return on.Item.eq.equals(x,Re)||$.updated.set(x.id,[x,Re]),$}))),Y=this._sessionEvents.pipe(xe.filter(function($){return $===ka.FirstCheckingFinished}),xe.withLatestFrom(this._state),xe.map(function($){var x=Ir($,2);x[0];var Re=x[1];return Re}),xe.filter(function($){return $.entries.size>0}),xe.map(St.MutableInternalDiff.fromState(function($,x){var Re;return(Re=x.invalid)!==null&&Re!==void 0&&Re&&$.removed.set(x.id,x),$}))),fe=xe.mergeStatic(D,Y);this._subs.push(this._state.pipe(xe.tap(this._debugLogState)).subscribe(),_.subscribe(function($){var x=Ir($,1),Re=x[0];return u._onAlertsRefEmpty.next(Re)}),G.pipe(xe.withLatestFrom(this._state),xe.map(this._toInternalDiff(this.alertIdResolver)),xe.filter((0,ln.not)(St.InternalDiff.isEmpty)),xe.map(this._emitDomainEvent)).subscribe(),fe.subscribe(this._emitDomainEvent))}return rN(e,[{key:"onAlertsRefEmpty",get:function(){return this._onAlertsRefEmpty.asObservable()}},{key:"pushRemovedRoot",value:function(n){this._removedRoot.next(n)}},{key:"pushRemovedAlerts",value:function(n){this._removedAlerts.next(n)}},{key:"pushSwitchView",value:function(n){this._switchView.next(n)}},{key:"flush",value:function(){this._flush.next(),this._flushViewSwitch.next(),this._flush.next()}},{key:"resolveStrongAlertRefAlerts",value:function(n){var r=this;return(0,ln.pipe)(this._getAlertsIdsFromAlertRef(this.alertIdResolver,na.Error)(n),m.tapLeft(function(){return r._log.debug("Alert ids from the provided component were not removed, because AlertIds for the provided DSL was not resolved. SDUI content ".concat(JSON.stringify({id:n.id,type:n.type,name:n.name,alertIds:n.alertIds})))}))}},{key:"_handleSDUIAdd",value:function(n,r,i,a){var u=this;return n.content.type==="popoverStack"?(this.popoverManager.addPopover(n.content,r),St.MutableInternalDiff.empty()):((0,ln.pipe)(i,St.get(n.id),m.fold(function(){if(bt(!a.updated.has(n.id),"SDUI item can not be in the diff.updated until it gets to the collection",function(){return St.InternalDiff.show.show(a)+St.diffShow.show(St.diff(St.empty,i))}),a.removed.has(n.id))return u._log.trace(zr.actionOnRemovedItem([n.id,"added"]));a.added.set(n.id,n)},function(o){if(bt(!a.added.has(n.id),"SDUI item can not be in the diff.added when it is already in the collection",function(){return St.InternalDiff.show.show(a)+St.diffShow.show(St.diff(St.empty,i))}),a.removed.has(n.id))return u._log.trace(zr.actionOnRemovedItem([n.id,"added"]));a.updated.set(n.id,[o,n])})),a)}},{key:"_handleSDUIUpdate",value:function(n,r,i){var a=this;return(0,ln.pipe)(r,St.get(n.id),m.fold(function(){if(bt(!i.updated.has(n.id),"SDUI item can not be in the diff.updated until it gets to the collection"+St.InternalDiff.show.show(i)+St.diffShow.show(St.diff(St.empty,r))),i.removed.has(n.id))return a._log.trace(zr.actionOnRemovedItem([n.id,"updated"]));if(!i.added.has(n.id))return a._log.error(zr.updateIdMissingNotFound([n.id]));a._log.trace(zr.updateIdMissingFound([n.id])),i.added.set(n.id,n)},function(u){if(bt(!i.added.has(n.id),"SDUI item can not be in the diff.added when it is already in the collection"+St.InternalDiff.show.show(i)+St.diffShow.show(St.diff(St.empty,r))),i.removed.has(n.id))return a._log.trace(zr.actionOnRemovedItem([n.id,"update"]));if(on.Item.eq.equals(u,n))return a._log.trace(zr.updateItemsAreEqual([n.id]));i.updated.set(n.id,[u,n])})),i}},{key:"_handleSDUIRemove",value:function(n,r,i){var a=this,u=on.Item.Id.from(n.sduiRootId);return this.popoverManager.removePopover(u,n.rev),(0,ln.pipe)(r,St.get(u),m.fold(function(){if(bt(!i.updated.has(u),"SDUI item can not be in the diff.updated until it gets to the collection"+St.InternalDiff.show.show(i)+St.diffShow.show(St.diff(St.empty,r))),!i.added.has(u))return a._log.trace(zr.removeIdMissingNotFound([u]));a._log.trace(zr.removeIdMissingFound([u])),i.added.delete(u)},function(o){bt(!i.added.has(o.id),"SDUI item can not be in the diff.added when it is already in the collection"+St.InternalDiff.show.show(i)+St.diffShow.show(St.diff(St.empty,r))),i.updated.delete(u)?a._log.trace(zr.idRemovedFrom([u,"diff.updated"])):(0,ln.constVoid)(),i.removed.set(u,o)})),i}},{key:"_handleSDUILazyUpdate",value:function(n,r){var i=this;return(0,ln.pipe)(r,St.get(n.sduiRootId),m.tapLeft(function(){return i._log.trace("SDUI Item with sduiRootId ".concat(n.sduiRootId,"  was not found"))}),m.fold(function(){return n.toContent(m.none)},function(a){var u=a.content;return(0,ln.pipe)(n.toContent(m.some(u)),m.filter(function(o){return!Jt.eq.equals(o,u)}),m.tapLeft(function(){return i._log.trace("SDUI Update event ".concat(JSON.stringify(n)," will be skipped, because the new DSL is the same as an old one"))}))}),m.map(function(a){return{kind:Bn.SduiEventKind.Update,sdui:a,sduiRootId:Bn.RawSduiItem.Id.create(n.sduiRootId),rev:n.rev,source:n.source}}))}},{key:"dispose",value:function(){this._subs.dispose()}}]),e}(),zr={removeIdMissingFound:function(e){var t=Ir(e,1),n=t[0];return"[Remove] SDUI item with ID ".concat(n," was found in the added messages. Removing it.")},removeIdMissingNotFound:function(e){var t=Ir(e,1),n=t[0];return"[Remove] It is not possible to remove SDUI item with ID ".concat(n,". It is missing from SDUIItemsCollectionInternal and diff.add, probably it was deleted earlier. Skipping the message")},idRemovedFrom:function(e){var t=Ir(e,2),n=t[0],r=t[1];return"[Remove] SDUI item with ID ".concat(n," is going to be removed. ").concat(r," contains the item with ID ").concat(n," too. Remove ").concat(n," from ").concat(r)},actionOnRemovedItem:function(e){var t=Ir(e,2),n=t[0],r=t[1];return"[".concat(r,"] It is not possible to ").concat(r," SDUI item with ID ").concat(n,". Because it was already removed. Skipping the ").concat(r,".")},viewStackUpdateIdMissing:function(e){var t=Ir(e,1),n=t[0];return"[ViewStackUpdate] SDUI item with ID ".concat(n," was found. Skipping the update.")},updateIdMissingFound:function(e){var t=Ir(e,1),n=t[0];return"[Update] SDUI item with ID ".concat(n," was found in added messages. Updating it in added messages")},updateIdMissingNotFound:function(e){var t=Ir(e,1),n=t[0];return"[Update] It is not possible to update SDUI item with ID ".concat(n,". It is missing from SDUIItemsCollectionInternal and diff.added, probably it was deleted earlier. Skipping the message")},updateItemsAreEqual:function(e){var t=Ir(e,1),n=t[0];return"[Update] Received sdui item (sduiId: ".concat(n,") is the same as in the state. Skipping the update message")},internalDiffMissingAlertsIds:function(){return"missing AlertIDs"},internalDiffParsingError:function(e){var t=Ir(e,2),n=t[0],r=t[1];return"toInternalDiff, either can not resolve ".concat(n," for ").concat(r," or id of the sdui item is missing . The item will be skipped")}},na;(function(e){e.Silent="Silent",e.Error="Error"})(na||(na={}));var ka;(function(e){e.Start="Start",e.FirstCheckingFinished="FirstCheckingFinished"})(ka||(ka={}));var yr=Me(it()),Zl=Me(va());function Fv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cN(e){if(Array.isArray(e))return e}function lN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sN(e,t,n){return t&&fN(e.prototype,t),e}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dN(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,u,o;try{for(n=n.call(e);!(i=(u=n.next()).done)&&(r.push(u.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function hN(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Vr(e,i,n[i])})}return e}function vN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}function ef(e,t){return t=t!=null?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vN(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Ra(e,t){return cN(e)||dN(e,t)||mN(e,t)||hN()}function mN(e,t){if(e){if(typeof e=="string")return Fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fv(e,t)}}var YN=function(){function e(t,n,r,i,a){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:new PM;lN(this,e),Vr(this,"_sduiService",void 0),Vr(this,"_sduiManager",void 0),Vr(this,"_sduiFeedManager",void 0),Vr(this,"_capiClient",void 0),Vr(this,"_focusedItem",void 0),Vr(this,"_platformEnvironment",void 0),Vr(this,"_log",void 0),Vr(this,"_subs",void 0),Vr(this,"_sduiAlertIdResolver",void 0),Vr(this,"sduiActionEvents",void 0),this._sduiService=t,this._sduiManager=n,this._sduiFeedManager=r,this._capiClient=i,this._focusedItem=a,this._platformEnvironment=u,this._log=Nn.Logging.getLogger("SduiViewModelImpl",Cn.LogLevel.DEBUG),this._subs=new tu.Keeper,this.sduiActionEvents=new xe.Subject,this._sduiAlertIdResolver=gN(this._sduiManager.alertIdResolver,this._log),this._subs.push(this._handleSduiActions(),this._handleSduiCardOnFocus(),this._handleSduiCardOnBlur(),this._handleSduiFeedRemove(),this._handleSduiFeedEmpty(),this._handleSduiOnEmptyEvents())}return sN(e,[{key:"onAssistantClose",value:function(){var n=this;(0,yr.pipe)(this._sduiFeedManager.currentFeed,m.map(function(r){return r.feedId}),m.chain(function(r){return ri.get(r)(n._sduiManager.state.get())}),m.chain(function(r){return(0,yr.pipe)(Jt.findFirst(r.content,"assistantFeed"),m.filter(function(i){return Array.isArray(i.onAssistantClose)&&i.onAssistantClose.length>0}),m.map(function(i){return[i,r]}))}),m.map(function(r){var i=Ra(r,2),a=i[0],u=i[1];return n.sduiActionEvents.next({type:Cr.Type,sourceId:a.id,cardId:u.id,actions:a.onAssistantClose,scope:{alertRefs:u.alertIds}})}))}},{key:"_handleSduiOnEmptyEvents",value:function(){var n=this;return this._sduiManager.onAlertsRefEmpty.pipe(xe.withLatestFrom(this._focusedItem),xe.filter(function(r){var i=Ra(r,2),a=i[0].sduiRootId,u=i[1];return(0,yr.pipe)(u,m.filter(function(o){return o===a}),m.isSome)}),xe.map(function(r){var i=Ra(r,1),a=i[0];return a})).subscribe(function(r){var i=r.sduiId,a=r.sduiRootId,u=r.emptyStrongAlertRef;return n.sduiActionEvents.next({type:Cr.Type,sourceId:i,cardId:a,actions:u.onEmpty,scope:{alertRefs:u.alertIds}})})}},{key:"_handleSduiFeedRemove",value:function(){var n=this;return this._sduiFeedManager.onFeedRemove.subscribe(function(r){bt(r.content.type==="assistantFeed"),n.sduiActionEvents.next({type:Cr.Type,sourceId:r.id,cardId:r.id,actions:r.content.onRemove,scope:{alertRefs:[]}})})}},{key:"_handleSduiFeedEmpty",value:function(){var n=this;return this._sduiFeedManager.onFeedEmpty.subscribe(function(r){bt(r.content.type==="assistantFeed"),r.content.onEmpty&&n.sduiActionEvents.next({type:Cr.Type,sourceId:r.id,cardId:r.id,actions:r.content.onEmpty,scope:{alertRefs:[]}})})}},{key:"_handleSduiCardOnBlur",value:function(){var n=this;return this._focusedItem.pipe(xe.pairwise(),xe.map(function(r){var i=Ra(r,1),a=i[0];return(0,yr.pipe)(a,m.chain(function(u){return(0,yr.pipe)(n._sduiManager.findFirstCardWithContent(u),m.filter(jc.isAssistantCardContent),m.map(function(o){return[o,u]}))}))}),Fu.compact,xe.tap(function(r){var i=Ra(r,2),a=i[0],u=a.card,o=a.parentStrongAlertRef,l=i[1];n.sduiActionEvents.next({type:Cr.Type,sourceId:u.id,cardId:l,actions:u.onBlur,scope:{alertRefs:(0,yr.pipe)(o,m.map(function(f){return f.alertIds}),m.getOrElse((0,yr.constant)(Zn.empty)))}})})).subscribe()}},{key:"_handleSduiCardOnFocus",value:function(){var n=this;return this._focusedItem.pipe(Fu.compact,xe.map(function(r){return(0,yr.pipe)(n._sduiManager.findFirstCardWithContent(r),m.map(function(i){return[i,r]}))}),Fu.compact).subscribe(function(r){var i=Ra(r,2),a=i[0],u=a.card,o=a.parentStrongAlertRef,l=i[1];n._sduiFeedManager.notifyCardFocused(l),n.sduiActionEvents.next({type:Cr.Type,sourceId:u.id,cardId:l,actions:u.onFocus,scope:{alertRefs:(0,yr.pipe)(o,m.map(function(f){return f.alertIds}),m.getOrElse(function(){return[]}))}})})}},{key:"_handleSduiActions",value:function(){var n=this;return this.sduiActionEvents.pipe(xe.skipBy(Cr.eq),xe.tap(function(r){var i=r.cardId,a=r.sourceId,u=r.actions,o=r.scope;n._log.info("sdui card action:",{cardId:i,actions:u,scope:o}),u.forEach(function(l){switch(l.type){case"notify":n._sduiService.sendUserAction(l.sourceId||a,l.userAction);return;case"removeRoot":requestAnimationFrame(function(){n._sduiManager.pushRemovedRoot([on.Item.Id.from(i),Fr.RemoveRootSDUIAction])});return;case"applyAlerts":case"closeCard":return;case"removeAlerts":(0,yr.pipe)(n._sduiAlertIdResolver(o.alertRefs),m.tap(function(){requestAnimationFrame(function(){n._sduiManager.pushRemovedAlerts([o.alertRefs.map(on.AlertId.from),Fr.RemoveAlertsSDUIAction])})}));return;case"highlightAlert":case"nextCard":case"prevCard":case"openSettings":case"openToneDetector":case"openFeedback":case"upgradeToPremium":case"openLearnMore":case"transition":case"openCreateSnippetModal":case"nativeOpenAssistant":case"showHighlights":case"hideHighlights":case"stopApplyingAlerts":case"selectAlternative":return;case"openLink":n._platformEnvironment.actions.openPopup(new Yg(l.url));return;case"copyToClipboard":return;case"pushAssistantFeed":requestAnimationFrame(function(){return(0,yr.pipe)(n._sduiFeedManager.pushFeed(on.Item.Id.from(l.feedId),l.cardId),Fe.mapLeft(function(R){return n._log.error(R),R}))});return;case"popAssistantFeed":requestAnimationFrame(function(){return n._sduiFeedManager.popFeed(m.fromNullable(l.fallbackFeed))});return;case"focusAssistantCard":requestAnimationFrame(function(){return n._sduiFeedManager.focusCard(l.cardId)});return;case"switchView":var f=l.where,h=l.selected,d={where:f,selected:h,sduiRootId:on.Item.Id.from(i)};n._switchCallerCard(d),n._switchActiveCard(d),n._switchActiveFeed(d),n._switchActivePopover(d);return;case"newRevision":return;case"interactPopover":var _=n._sduiManager.popoverManager.getInteractionActions(l.rootPopoverId,l.popoverViewId,l.interaction);_.length>0&&n.sduiActionEvents.next({type:Cr.Type,sourceId:l.rootPopoverId,cardId:l.popoverViewId,actions:_,scope:o});return;case"closePopover":n._sduiManager.popoverManager.removePopover(l.rootPopoverId),n.sduiActionEvents.next({type:Cr.Type,sourceId:l.rootPopoverId,cardId:l.rootPopoverId,actions:[{type:"removeRoot"}],scope:o});return;case"openGrammarlyGo":case"openPerformanceScore":return;case"enablePlagiarismCheck":n._capiClient.enablePlagiarismSearch();return;case"disablePlagiarismCheck":n._capiClient.disablePlagiarismSearch();return;case"enableWritingExpertCheck":n._capiClient.enableWritingExpert();return;case"disableWritingExpertCheck":n._capiClient.disableWritingExpert();return;case"nativeOpenUserSatisfactionFeedback":return;case"enableAudienceAdaptCheck":case"disableAudienceAdaptCheck":case"enableAiStudioCheck":case"disableAiStudioCheck":return}})})).subscribe()}},{key:"_switchCallerCard",value:function(n){this._sduiManager.pushSwitchView(n)}},{key:"_switchActiveCard",value:function(n){var r=this;(0,yr.pipe)(this._focusedItem.get(),m.filter(function(i){return n.sduiRootId!==i}),m.tap(function(i){return r._sduiManager.pushSwitchView(ef(xl({},n),{sduiRootId:on.Item.Id.from(i)}))}))}},{key:"_switchActiveFeed",value:function(n){var r=this;(0,yr.pipe)(this._sduiFeedManager.currentFeed,m.filter(function(i){var a=i.feedId;return a!==n.sduiRootId}),m.tap(function(i){var a=i.feedId;return r._sduiManager.pushSwitchView(ef(xl({},n),{sduiRootId:a}))}))}},{key:"_switchActivePopover",value:function(n){var r=this;this._sduiManager.popoverManager.activePopoverView.pipe(xe.first()).subscribe(m.tap(function(i){var a=i.rootPopoverId;r._sduiManager.pushSwitchView(ef(xl({},n),{sduiRootId:a}))}))}},{key:"dispose",value:function(){this._subs.dispose()}}]),e}();function gN(e,t){return function(n){return(0,yr.pipe)(n,Zl.map(e),Zl.sequence(m.option),m.tapLeft(function(){return t.error("Could not resolve strong alert ref for ".concat(JSON.stringify(n)))}),m.filter(Zl.isNonEmpty),m.tapLeft(function(){return t.error("Strong alert refs are empty")}))}}var JN=Bn.SduiEventKind,QN=Cr.Type;Reflect.defineProperty(globalThis,"requestAnimationFrame",{value:Reflect.get(globalThis,"requestAnimationFrame")||(e=>setTimeout(e,0)),configurable:!0});/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE *)
*/const XN=Gb("SDUIActionHandler");export{JI as $,$a as A,kI as B,zc as C,PI as D,$c as E,NI as F,WI as G,FI as H,DI as I,LI as J,qI as K,jI as L,ws as M,hI as N,GI as O,HI as P,zI as Q,VI as R,$N as S,sI as T,KI as U,xv as V,dI as W,Bo as X,$I as Y,$b as Z,YI as _,KN as a,QI as a0,xI as a1,XI as a2,ZI as a3,eS as a4,Os as a5,nS as a6,im as a7,vI as a8,jS as a9,IS as aA,SS as aB,om as aC,pI as aD,AS as aE,ES as aF,RS as aG,wS as aH,TS as aI,OS as aJ,MS as aK,CS as aL,Rs as aM,_I as aN,QN as aO,mI as aa,rS as ab,iS as ac,aS as ad,uS as ae,oS as af,Vb as ag,GS as ah,gI as ai,xu as aj,Xv as ak,lS as al,fS as am,sS as an,hm as ao,dS as ap,hS as aq,vS as ar,mS as as,gS as at,pS as au,vm as av,Ts as aw,em as ax,Yc as ay,yS as az,YN as b,JN as c,XN as d,Vc as e,af as f,rm as g,Kc as h,Cs as i,rf as j,Zv as k,To as l,Kb as m,um as n,yI as o,bI as p,II as q,dm as r,ti as s,_S as t,SI as u,AI as v,wI as w,lm as x,OI as y,TI as z};
//# sourceMappingURL=SDUIActionHandler-DiU1jAXM.js.map
