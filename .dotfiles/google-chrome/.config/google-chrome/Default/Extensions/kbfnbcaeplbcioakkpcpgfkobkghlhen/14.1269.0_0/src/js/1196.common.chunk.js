(self.webpackChunk=self.webpackChunk||[]).push([[1196],{51196:(e,t,i)=>{i.r(t),i.d(t,{activate:()=>w});var n=i(90023),s=i(32073),a=i(59179),r=i(78129),c=i(84308),o=i(84714),d=i(90572),u=i(29416),p=i(63532),l=i(20161),b=i(32103),v=i(42203),h=i(25494),A=i(21007),S=i(24089),k=i(74170),f=i(723),g=i(4464),C=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),m=e=>{throw TypeError(e)};const w=e=>{return t=void 0,i=[e],w=function*({bus:e,capiCheckingState:t,capiConnectionStatus:i,agentGenericService:w,pushedContentService:x,experimentation:y,document:I,navigation:R,fileUploadService:E,trackingServiceProvider:P}){var K=[];try{const U=((e,t,i)=>{var n;return null!=t?("object"!=typeof t&&"function"!=typeof t&&m("Object expected"),i&&(n=t[C("asyncDispose")]),void 0===n&&(n=t[C("dispose")]),"function"!=typeof n&&m("Object not disposable"),e.push([i,n,t])):i&&e.push([i]),t})(K,new DisposableStack),_=U.adopt(new s.w0,(e=>e.unsubscribe())),j=U.use(e.state.agentState.create(I.id,{kind:h.x.State.Kind.Initial})),D=U.use(e.state.audience.create(I.id,null)),G=U.use(e.state.capiSessionId.create(I.id,null)),B=U.use(e.state.textInfo.create(I.id,{wordsCount:0,charsCount:0})),M=U.use(e.state.hasTextChanges.create(I.id,!1)),N=B.pipe(a.U((e=>e.charsCount)),r.G(),a.U((([e,t])=>t-e))),z=y.isAssigned(k.ExtensionReaderReactionsTextChangedNotification)?c.a([N,R.isPanelOpen],((e,t)=>t&&Math.abs(e)>g.tK)):o.of(!1),F=A.z.create({agentGenericService:w,pushedContentService:x,fileUploadService:E,agentId:S.Qi.Id}),L=U.adopt(h.x.create({title:g.K_,capiSessionId:G.view((e=>null!=e?e:void 0)),agenticService:F,trackingServiceProvider:P,textInfo:B,textChanged:z,featureFlags:{customAudiences:y.isAssigned(k.AIEditorReaderReactionsCustomAudience),removeCustomAudiences:y.isAssigned(k.AIEditorReaderReactionsRemoveCustomAudience)}}),(e=>e.dispose())),Q=i.pipe(a.U((e=>"connected"===e.kind?e:null)),d.h(v.C_));return _.add(L.state.subscribe((e=>j.set(e)))),_.add(L.audience.subscribe((e=>D.set(null!=e?e:null)))),_.add(Q.subscribe((e=>G.set(e.sessionId)))),_.add(t.textInfo.pipe(d.h(v.C_)).subscribe((e=>B.set({wordsCount:e.wordCount,charsCount:e.charCount})))),_.add(L.hasTextChanges.subscribe((e=>M.set(e)))),_.add(e.events.trackingEvent.view(I.id).subscribe((e=>L.context.tracking.trackEvent(e.event,e.detail)))),y.isAssigned(k.AIEditorReaderReactionsRebase)&&_.add(x.rebaseItems(f.h).subscribe()),_.add(c.a([B,L.state,R.isPanelOpen],((e,t,i)=>i&&t.kind===h.x.State.Kind.Empty&&e.wordsCount>h.x.MIN_WORDS_TEXT_SIZE)).pipe(d.h(n.yR),u.b(100),d.h((()=>L.state.get().kind===h.x.State.Kind.Empty)),p.b((()=>L.loadReactions()))).subscribe()),_.add(Q.pipe(l.w((e=>c.a([L.state,R.isPanelOpen],((e,t)=>t&&e.kind===h.x.State.Kind.Initial)).pipe(d.h(n.yR),u.b(100),p.b((()=>L.loadReactions())))))).subscribe()),_.add(e.events.panelUIAction.view(I.id).subscribe((e=>{switch(e.kind){case"loadReactionsAction":L.loadReactions();break;case"selectAudienceAction":L.selectAudience();break;case"setAudienceAction":L.setAudience(e.audience);break;case"editAudienceAction":L.editAudience();break;case"saveAudienceAction":L.saveAudience(e.name);break;case"removeAudienceAction":L.removeAudience(e.audience);break;case"goBackAction":L.goBack();break;default:(0,b.L0)(e)}}))),U.move()}catch(e){var O=e,T=!0}finally{((e,t,i)=>{var n="function"==typeof SuppressedError?SuppressedError:function(e,t,i,n){return(n=Error(i)).name="SuppressedError",n.error=e,n.suppressed=t,n},s=e=>t=i?new n(e,t,"An error was suppressed during disposal"):(i=!0,e),a=n=>{for(;n=e.pop();)try{var r=n[1]&&n[1].call(n[2]);if(n[0])return Promise.resolve(r).then(a,(e=>(s(e),a())))}catch(e){s(e)}if(i)throw t};a()})(K,O,T)}},new Promise(((e,n)=>{var s=e=>{try{r(w.next(e))}catch(e){n(e)}},a=e=>{try{r(w.throw(e))}catch(e){n(e)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,a);r((w=w.apply(t,i)).next())}));var t,i,w}}}]);