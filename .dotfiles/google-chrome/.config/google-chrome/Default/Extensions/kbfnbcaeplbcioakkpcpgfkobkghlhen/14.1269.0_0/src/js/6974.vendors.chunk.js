(self.webpackChunk=self.webpackChunk||[]).push([[6974],{71206:(e,t,i)=>{i.d(t,{K:()=>r});class r{constructor(){this._pendingRevision=0,this._finishedRevisions={regular:-1,plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1},this._wasChecked={regular:!1,plagiarism:!1,ai_detector:!1,writing_expert_check:!1,ai_studio:!1,audience_adapt:!1},this.reset()}getCheckState(e){return this._pendingRevision>this._finishedRevisions[e]?this._wasChecked[e]?"checking":"full":"idle"}getRevisionCheckState(){return this.getCheckState("regular")}getAsyncChecksState(){return{plagiarism:this.getCheckState("plagiarism"),ai_detector:this.getCheckState("ai_detector"),writing_expert_check:this.getCheckState("writing_expert_check"),ai_studio:this.getCheckState("ai_studio"),audience_adapt:this.getCheckState("audience_adapt")}}stage(e){this._pendingRevision=Math.max(this._pendingRevision,e)}finishRevision(e){this._finishedRevisions.regular=Math.max(this._finishedRevisions.regular,e),this._wasChecked.regular=!0}finishAsyncCheck(e,t){this._finishedRevisions[e]=Math.max(this._finishedRevisions[e],t),this._wasChecked[e]=!0}reset(){this._pendingRevision=0,this._finishedRevisions={regular:-1,plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1}}}},12898:(e,t,i)=>{i.d(t,{Kf:()=>g.K,TJ:()=>p.T,D8:()=>p.D,kX:()=>c});var r=i(64152),s=i(81484),n=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,f=(e,t,i)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;function c(e){return(0,r.t)(((e,t)=>a(e,o(t)))(((e,t)=>{for(var i in t||(t={}))l.call(t,i)&&f(e,i,t[i]);if(d)for(var i of d(t))u.call(t,i)&&f(e,i,t[i]);return e})({},e),{schema:e.protocol,factories:s.i}))}var p=i(88257);if(5526!=i.j)var g=i(71206)},18240:(e,t,i)=>{i.d(t,{D:()=>a,k:()=>s});var r=i(32103),s=(e=>(e.Sensitivity="Document did not pass sensitivity filtering",e.UnsupportedLanguage="Unsupported language",e.FailedProcessing="Failed to process file",e.ChecksumMismatch="Checksum mismatch",e.UnsupportedFileFormat="Unsupported file format",e.Other="Other error",e))(s||{});const n=class e extends Error{constructor(e,t){super(`[${e}] ${t}`),this.kind=e}static fromMessageError(t){return new e(e.getKind(t),t.title)}};n.getKind=e=>{const{kind:t}=e.errorType;switch(t){case"sensitivity":return"Document did not pass sensitivity filtering";case"unsupportedLanguage":return"Unsupported language";case"failedProcessing":return"Failed to process file";case"checksumMismatch":return"Checksum mismatch";case"unsupportedFileFormat":return"Unsupported file format";case"other":return"Other error";default:(0,r.vE)(t)}};let a=n},35482:(e,t,i)=>{i.d(t,{J:()=>g});var r=i(64443),s=i(46189),n=i(90023),a=i(67177),o=i(92054),d=i(68822),l=i(62220),u=i(18240),f=i(20154),c=i(12518),p=i(9119);var g,m=Object.defineProperty,h=Object.defineProperties,I=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,C=(e,t,i)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_=(e,t,i)=>new Promise(((r,s)=>{var n=e=>{try{o(i.next(e))}catch(e){s(e)}},a=e=>{try{o(i.throw(e))}catch(e){s(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,a);o((i=i.apply(e,t)).next())}));(g||(g={})).create=(e,t)=>{const i=t||r.C8.Logging.getLogger("FileUploadService"),g=new l.v,m=new d.PJ(6e4,"FileUpload"),P=new d.PJ(6e4,"FileUpload"),k=new d.PJ(6e4,"FileUpload"),b=new d.PJ(6e4,"FileUpload"),y=t=>(i.debug("Sending message",t),(0,n.zG)(e.enqueueExternalCommand((({id:e})=>((e,t)=>h(e,I(t)))(((e,t)=>{for(var i in t||(t={}))F.call(t,i)&&C(e,i,t[i]);if(v)for(var i of v(t))w.call(t,i)&&C(e,i,t[i]);return e})({},t),{id:e}))),a.tS((()=>(0,f.WT)(t)?()=>m.watchRequest(t.fileIdentifier):(0,f.Xl)(t)?()=>P.watchRequest(t.fileIdentifier):(0,f.gs)(t)?()=>k.watchRequest(t.fileIdentifier):(0,f.Iz)(t)?()=>b.watchRequest(t.fileIdentifier):a.t$(new u.D(u.k.Other,"Unknown message type (sendMessage)")))))),U=e=>e.action.startsWith("assistant_file_upload")?((0,f.r2)(e)||(0,f.wV)(e)||(0,f.bm)(e)||(0,f.Sy)(e)?(e=>{if((0,f.bm)(e))return i.debug("Received message (MessageUploadUrlResponse)",e),void m.onValue(e.fileIdentifier,e);if((0,f.r2)(e))return i.debug("Received message (MessageSuccess)",e),void P.onValue(e.fileIdentifier,e);if((0,f.Sy)(e))return i.debug("Received message (MessageFileRemoved)",e),k.hasRequest(e.fileIdentifier)&&k.onValue(e.fileIdentifier,e),void(b.hasRequest(e.fileIdentifier)&&b.onValue(e.fileIdentifier,e));if((0,f.wV)(e)){i.debug("Received error (MessageError)",e);const t=u.D.fromMessageError(e);m.hasRequest(e.fileIdentifier)?m.onError(e.fileIdentifier,t):P.hasRequest(e.fileIdentifier)?P.onError(e.fileIdentifier,t):k.hasRequest(e.fileIdentifier)?k.onError(e.fileIdentifier,t):b.hasRequest(e.fileIdentifier)&&b.onError(e.fileIdentifier,t)}})(e):i.warn("Unknown message type (handler)",e),s._.Result.STOP_HANDLING):s._.Result.CONTINUE_HANDLING;e.registerExternalMessageHandler(U);const R=e=>(i.debug("Getting file upload URL",{fileIdentifier:e}),(0,n.zG)(y({id:0,action:"assistant_file_upload:uploadUrlRequest",fileIdentifier:e}),a.tS((e=>(0,f.bm)(e)?a.F2(e.s3UploadPath):a.t$(new u.D(u.k.Other,"Unknown message type (getFileUploadUrl)")))),a.UI((t=>(i.debug("Successfully received s3UploadPath",{fileIdentifier:e,s3UploadPath:t}),t))),a.Vn((t=>(i.error("Failed to get upload URL",{fileIdentifier:e,error:t}),t))))),x=e=>{const{fileIdentifier:t,uploadUrl:r,file:s}=e;return i.debug("Uploading file",{fileIdentifier:t,uploadUrl:r}),(0,n.zG)(a.Uo(function(e){switch(e.type){case"text/plain":return c.F2(p.d.Txt);case"text/rtf":case"application/rtf":return c.F2(p.d.Rtf);case"application/msword":return c.F2(p.d.Doc);case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return c.F2(p.d.Docx);case"application/pdf":case"application/x-pdf":case"application/x-bzpdf":case"application/x-gzpdf":return c.F2(p.d.Pdf);case"text/markdown":return c.F2(p.d.Md);case"application/json":return c.F2(p.d.Json);case"application/xml":case"text/xml":return c.F2(p.d.Xml);case"text/html":return e.name.endsWith(".htm")?c.F2(p.d.Htm):c.F2(p.d.Html);case"text/csv":return c.F2(p.d.Csv);case"application/vnd.ms-excel":return c.F2(p.d.Xls);case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return c.F2(p.d.Xlsx);case"application/vnd.ms-powerpoint":return c.F2(p.d.Ppt);case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return c.F2(p.d.Pptx);default:return c.t$(new u.D(u.k.UnsupportedFileFormat,"Unsupported file format"))}}(s)),a.tS((e=>a.Y3((()=>_(void 0,null,(function*(){const i=yield fetch(r,{method:"PUT",headers:{"Content-Type":s.type,"x-amz-tagging":"ttl=1day"},body:s});if(!i.ok)throw new Error(`S3 upload failed: ${i.status} ${i.statusText}`);return{fileIdentifier:t,fileFormat:e}}))),(e=>{const t=e instanceof Error?e:new Error(String(e));return new u.D(u.k.FailedProcessing,t.message)})))))};return{uploadText:e=>{const{content:t,useCase:r,useCaseParameters:s,agentId:d}=e,l=(0,o.Z)();return i.debug("Uploading text",{useCase:r,useCaseParameters:s,fileIdentifier:l,agentId:d}),g.emit("uploadTextStarted",{useCase:r,useCaseParameters:s,fileIdentifier:l,agentId:d}),(0,n.zG)(R(l),a.tS((e=>(e=>{const{fileIdentifier:t,uploadUrl:r,content:s}=e;return i.debug("Uploading references",{fileIdentifier:t,uploadUrl:r}),a.Y3((()=>_(void 0,null,(function*(){const e=yield fetch(r,{method:"PUT",headers:{"Content-Type":"text/plain","x-amz-tagging":"ttl=1day"},body:s});if(!e.ok)throw new Error(`S3 upload failed: ${e.status} ${e.statusText}`);return{fileIdentifier:t,fileFormat:p.d.Txt}}))),(e=>{const t=e instanceof Error?e:new Error(String(e));return new u.D(u.k.FailedProcessing,t.message)}))})({fileIdentifier:l,uploadUrl:e,content:t}))),a.tS((e=>((e,t,r,s,o)=>{i.debug("Requesting file processing",{fileIdentifier:e,fileFormat:t});const d={id:0,action:"assistant_file_upload:processFile",fileIdentifier:e,fileFormat:t,useCase:r,useCaseParameters:s};return i.debug("useCaseParameters",s),i.debug("Requesting file processing",{request:d}),(0,n.zG)(y(d),a.tS((i=>(0,f.r2)(i)?a.F2({useCase:r,useCaseParameters:s,fileIdentifier:e,fileFormat:t,agentId:o||"unknown"}):a.t$(new u.D(u.k.Other,"Unknown message type (requestFileProcessing)")))),a.Vn((t=>(i.error("Failed to process file",{fileIdentifier:e,error:t}),t))))})(e.fileIdentifier,e.fileFormat,r,s,d))),a.Vn((e=>(g.emit("uploadTextFailed",{useCase:r,useCaseParameters:s,fileIdentifier:l,error:e,agentId:d}),e))),a.UI((e=>(g.emit("uploadTextFinished",e),e))))},uploadFile:e=>{const{file:t,useCase:r,useCaseParameters:s,agentId:d}=e,l=(0,o.Z)();return i.debug("Uploading file",{useCase:r,useCaseParameters:s,fileIdentifier:l,agentId:d}),g.emit("uploadFileStarted",{useCase:r,useCaseParameters:s,fileIdentifier:l,fileName:t.name,agentId:d}),(0,n.zG)(R(l),a.tS((e=>x({fileIdentifier:l,uploadUrl:e,file:t}))),a.tS((e=>((e,t,r,s,o)=>{i.debug("Requesting file processing",{fileIdentifier:e,fileFormat:t});const d={id:0,action:"assistant_file_upload:processFile",fileIdentifier:e,fileFormat:t,useCase:r,useCaseParameters:s};return i.debug("useCaseParameters",s),i.debug("Requesting file processing",{request:d}),(0,n.zG)(y(d),a.tS((i=>(0,f.r2)(i)?a.F2({useCase:r,useCaseParameters:s,fileIdentifier:e,fileFormat:t,fileContent:i.fileContent,agentId:o||"unknown"}):a.t$(new u.D(u.k.Other,"Unknown message type (requestFileProcessing)")))),a.Vn((t=>(i.error("Failed to process file",{fileIdentifier:e,error:t}),t))))})(e.fileIdentifier,e.fileFormat,r,s,d))),a.Vn((e=>(g.emit("uploadFileFailed",{useCase:r,useCaseParameters:s,fileIdentifier:l,fileName:t.name,error:e,agentId:d}),e))),a.UI((e=>(g.emit("uploadFileFinished",e),e))))},removeFile:e=>{const{fileIdentifier:t,agentId:r}=e;return i.debug("Removing file",{fileIdentifier:t,agentId:r}),g.emit("removeFileStarted",{fileIdentifier:t,agentId:r}),(0,n.zG)((e=>{i.debug("Requesting file removal",{fileIdentifier:e});const t={id:0,action:"assistant_file_upload:removeFile",fileIdentifier:e};return i.debug("Requesting file removal",{request:t}),(0,n.zG)(y(t),a.tS((e=>(0,f.Sy)(e)?a.F2(void 0):a.t$(new u.D(u.k.Other,"Unknown message type (requestFileRemoval)")))),a.Vn((t=>(i.error("Failed to process file",{fileIdentifier:e,error:t}),t))))})(t),a.Vn((e=>(g.emit("removeFileFailed",{fileIdentifier:t,error:e,agentId:r}),e))),a.UI((e=>(g.emit("removeFileFinished",{fileIdentifier:t,agentId:r}),e))))},removePersistentData:e=>{const{useCase:t,useCaseParameters:r,agentId:s}=e,d=(0,o.Z)();return i.debug("Removing persistent data",{useCase:t,useCaseParameters:r,fileIdentifier:d,agentId:s}),g.emit("removePersistentDataStarted",{useCase:t,useCaseParameters:r,fileIdentifier:d,agentId:s}),(0,n.zG)(y({id:0,action:"assistant_file_upload:removePersistedData",fileIdentifier:d,useCase:t,useCaseParameters:r}),a.tS((e=>(0,f.Sy)(e)?a.F2({useCase:t,useCaseParameters:r,fileIdentifier:d,agentId:s}):a.t$(new u.D(u.k.Other,"Unknown message type (removePersistentData)")))),a.Vn((e=>(i.error("Failed to remove the persistent data",{fileIdentifier:d,error:e}),g.emit("removePersistentDataFailed",{useCase:t,useCaseParameters:r,fileIdentifier:d,error:e,agentId:s}),e))),a.UI((e=>(g.emit("removePersistentDataFinished",e),e))))},on:g.on.bind(g),dispose:()=>{e.unregisterExternalMessageHandler(U)}}}},62220:(e,t,i)=>{i.d(t,{v:()=>r});class r{listeners=new Map;on(e,t){return this._getOrInitializeListeners(e).add(t),{dispose:()=>{this.listeners.get(e)?.delete(t)}}}emit(e,t){const i=this.listeners.get(e);if(i)for(const r of i)try{r(t)}catch(t){console.error(`Error in event listener for event "${String(e)}":`,t)}}_getOrInitializeListeners(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}}}}]);