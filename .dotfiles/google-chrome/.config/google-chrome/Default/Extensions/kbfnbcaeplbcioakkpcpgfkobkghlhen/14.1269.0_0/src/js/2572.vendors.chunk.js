/*! For license information please see 2572.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[2572],{69083:(e,t,n)=>{if(n.d(t,{l:()=>o}),6052!=n.j)var r=n(36807);if(6052!=n.j)var i=n(32103);function o(e,t){var n,o;const s=null!=(o=null==(n=t.encoding)?void 0:n.kind)?o:"plain";switch(s){case"delta":try{const n=JSON.parse(t.json),i=new r.i(n);return{json:(new r.i).insert(e.json).compose(i).map((e=>"insert"in e&&"string"==typeof e.insert?e.insert:"")).join(""),encoding:{kind:"plain"}}}catch(t){return e}case"plain":case"gzip":return t;default:(0,i.vE)(s)}}},5846:(e,t,n)=>{if(n.d(t,{G:()=>h}),6052!=n.j)var r=n(69083);var i=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e};function h(e,t){if("delta"!==t.kind)return t;if(!e)return;const n=(e,t)=>{const n=d({},e);return Object.entries(null!=t?t:{}).forEach((([t,i])=>{var o;const s=null==e?void 0:e[t];s&&"delta"===(null==(o=i.encoding)?void 0:o.kind)?n[t]=(0,r.l)(s,i):n[t]=i})),n},i=d(d({},e),t),a=n(e.extraProperties,t.extraProperties),l=n(e.metadata,t.metadata);return((e,t)=>o(e,s(t)))(d({},i),{kind:"partial",extraProperties:a,metadata:l})}},46189:(e,t,n)=>{var r,i,o;n.d(t,{V:()=>a,_:()=>r}),i=r||(r={}),(o=i.Result||(i.Result={}))[o.CONTINUE_HANDLING=0]="CONTINUE_HANDLING",o[o.STOP_HANDLING=1]="STOP_HANDLING";const s=()=>{};class a{constructor(){this.onSessionStarted=s,this.onWaitForOT=s,this.onReady=s,this.onSessionInbound=s,this.beforeAlert=s,this.onAlert=s,this.onRemove=s,this.onChange=s,this.onSynonyms=s,this.onSnippets=s,this.onPlagiarism=s,this.onBeforeAsyncCheckFinish=s,this.onAsyncCheckFinish=s,this.onError=s,this.onBeforeFinish=s,this.onFinish=s,this.onStats=s,this.onTextMaps=s,this.onTextInfo=s,this.onEmotions=s,this.onPong=s,this.onDebugInfo=s,this.onConnect=s,this.onDisconnect=s,this.onClose=s,this.onQueueMsgAccepted=s,this.onQueueMsgDropped=s,this.onAck=s,this.onMessageReceived=s,this.onMessageSent=s,this.onAutoComplete=s,this.onAttentionHeatmap=s,this.onAttentionInfo=s,this.onProofitAvailability=s,this.onProofitCancelled=s,this.onProofitCompleted=s,this.onProofitProgress=s,this.onProofitProgressProblem=s,this.onProofitSubmit=s,this.onShortenItFinished=s,this.onSDUI=s,this.onPublishedAck=s,this.onGbRuleCreated=s,this.onReconnectInfo=s,this.onCheetahSetContext=s,this.onCheetahChunk=s,this.onCheetahResult=s,this.onCheetahSearchReferencesResult=s,this.onCheetahError=s,this.onCheetahUpdateState=s,this.onShowSurvey=s,this.onAsyncCheckProgress=s,this.onTouchTypistTriggerResponse=s,this.onAgentsCallToActionContextFetch=s}}},54221:(e,t,n)=>{var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=Object.prototype.toString,h=Math.max,g=Math.min,f=function(){return u.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||s.test(e)?a(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function b(e){return c=e,a=setTimeout(C,t),u?x(e):s}function y(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function C(){var e=f();if(y(e))return w(e);a=setTimeout(C,function(e){var n=t-(e-l);return d?g(n,o-(e-c)):n}(e))}function w(e){return a=void 0,v&&r?x(e):(r=i=void 0,s)}function k(){var e=f(),n=y(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return b(l);if(d)return a=setTimeout(C,t),x(l)}return void 0===a&&(a=setTimeout(C,t)),s}return t=m(t)||0,p(n)&&(u=!!n.leading,o=(d="maxWait"in n)?h(m(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),k.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},k.flush=function(){return void 0===a?s:w(f())},k}},1013:(e,t,n)=>{var r=n(92379);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var u="undefined"==typeof self||void 0===self.document||void 0===self.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),s((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},16133:(e,t,n)=>{var r=n(92379),i=n(59416);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var g=s(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=g}),[g]),u(g),g}},57157:(e,t,n)=>{var r=n(92379);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useSyncExternalStore,s=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l((function(){function e(e){if(!a){if(a=!0,o=e,e=r(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==u&&u(t,n)?(o=e,t):(o=e,s=n)}var o,s,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var g=o(e,d[0],d[1]);return a((function(){h.hasValue=!0,h.value=g}),[g]),c(g),g}},59416:(e,t,n)=>{e.exports=n(1013)},24658:(e,t,n)=>{e.exports=n(16133)},3666:(e,t,n)=>{e.exports=n(57157)},96456:(e,t,n)=>{n.d(t,{Cb:()=>a,HS:()=>l,kR:()=>o,xr:()=>u,xt:()=>c});var r=n(26389);const i=new Set(Object.values(r.Bm).filter((e=>"number"==typeof e))),o={aiDetector:(0,r.QZ)(r.Bm.GrammarlyAiDetector.toString()),AIGrader:(0,r.QZ)(r.Bm.GrammarlyAiGrader.toString()),chat:(0,r.QZ)(r.Bm.SuperhumanGo.toString()),expertPanel:(0,r.QZ)(r.Bm.GrammarlyExpertReview.toString()),humanizer:(0,r.QZ)(r.Bm.GrammarlyHumanizer.toString()),plagiarismChecker:(0,r.QZ)(r.Bm.GrammarlyPlagiarismChecker.toString()),legacyProofreader:(0,r.QZ)(r.Bm.GrammarlyProofreader.toString()),paraphraser:(0,r.QZ)(r.Bm.GrammarlyParaphraser.toString()),readerReactions:(0,r.QZ)(r.Bm.GrammarlyReaderReactions.toString()),translate:(0,r.QZ)(r.Bm.GrammarlyReaderTranslate.toString()),comprehension:(0,r.QZ)(r.Bm.GrammarlyReaderComprehension.toString())},s=Object.fromEntries(Object.entries(o).map((e=>{let[t,n]=e;return[n,t]})));function a(e){return o[e]}function l(e){return s[e]}function c(e){if(!(0,r.kq)(e))return!1;try{const t=(0,r.Oo)(e);return i.has(t)}catch{return!1}}function u(e){return e.filter((e=>!c(e.id)))}},18203:(e,t,n)=>{n.d(t,{AA:()=>B,B5:()=>R,Gi:()=>Z,Me:()=>We,O6:()=>qe,Ot:()=>L,Th:()=>Je,Z$:()=>z,_M:()=>P,hT:()=>F,qC:()=>$,vr:()=>N,zE:()=>O});var r=n(92054);if(6168==n.j)var i=n(62220);if(6168==n.j)var o=n(46189);if(6168==n.j)var s=n(5846);var a=n(6824),l=n(52168);if(6168==n.j)var c=n(46161);if(6168==n.j)var u=n(32103);var d,h,g,f,p,m,v,x,b,y,C,w,k=n(11633),S=n(64443),I=e=>{throw TypeError(e)},E=(e,t,n)=>t.has(e)||I("Cannot "+n),A=(e,t,n)=>(E(e,t,"read from private field"),n?n.call(e):t.get(e)),j=(e,t,n)=>t.has(e)?I("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),M=(e,t,n,r)=>(E(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),_=(e,t,n)=>(E(e,t,"access private method"),n),R=(e=>(e.AiEditorOutput="ai_editor_output",e.PromptOutput="prompt_output",e.AgentOutput="agent_output",e.Other="other",e))(R||{});function D(e,t){return{kind:"nonSessionText",referenceContent:e,selectedRange:null==t?void 0:t.range}}function T(e){return{kind:"sessionText",selection:e}}function O(e){return"string"==typeof e}function P(e){return"object"==typeof e&&null!==e&&"selectedText"in e&&"range"in e}function L(e){return"object"==typeof e&&null!==e&&"kind"in e&&"default"===e.kind}function N(e){return"object"==typeof e&&null!==e&&"kind"in e&&"integratedDoc"===e.kind}function F(e){return O(e)||P(e)}function B(e,t){return!(!e||!t)&&(L(e)&&L(t)&&e.id===t.id||F(e)&&F(t)&&e===t)}function z(e){return"user"===e.type}function H(e,t){return{id:e,type:"assistant",kind:"thinking",content:"",previousMessageId:t}}function U(e,t){const n=t?function(e){return O(e)?{selectedText:e,textScope:D(e)}:P(e)?{selectedText:e.selectedText,textScope:T(e)}:{}}(t):{};return{...e,...n}}function $(e){return"assistant"===(null==e?void 0:e.type)&&("final"!==e.kind&&!e.stopped)}function W(e,t,n,i){const o=e.slice(),{omitThinkingMessage:s}=n;if(function(e){const t=e[e.length-1];return"error"===(null==t?void 0:t.type)}(o)&&o.pop(),null!==t){const{predefinedPromptKind:e}=n,a=function(e,t,n){return{id:(0,r.Z)(),type:"user",content:e,context:t,predefinedPromptKind:n}}(t,i,e);if(s)return[...o,a];const l=function(e){return H(`${e}-response`,e)}(a.id);return[...o,a,l]}const{systemMessageMetadata:a}=n,l=a?function(e){return{id:(0,r.Z)(),content:"",type:"system",metadata:e}}(a):void 0;if(s)return l?[...o,l]:o;const c=function(e){const t=e||(0,r.Z)();return H(`system-${t}-response`,t)}(null==l?void 0:l.id);return l?[...o,l,c]:[...o,c]}class V{constructor(e){j(this,d),j(this,h,{}),j(this,g,{}),M(this,d,e)}async initialize(){const e=await A(this,d).getAll();M(this,h,e.reduce(((e,t)=>(e[t.id]={messages:[],metadata:t},e)),{}))}doesChatExist(e){return void 0!==A(this,h)[e]}getAllChatsMetadata(){return Object.entries(A(this,h)).reduce(((e,[t,n])=>(e[t]=n.metadata,e)),{})}getChatMetadata(e){if(this.doesChatExist(e))return A(this,h)[e].metadata}async getChatMessages(e){if(!this.doesChatExist(e))return[];if(A(this,g)[e])return A(this,h)[e].messages;const t=await A(this,d).getById(e),n=(null==t?void 0:t.messages)??[],r=n.map((e=>$(e)?{...e,stopped:"unknown"}:e));return A(this,h)[e].messages=r,A(this,g)[e]=!0,A(this,h)[e].messages}createChat(e,t){return e||(e=this.createDraft(t)),A(this,h)[e.metadata.id]=e,A(this,g)[e.metadata.id]=!0,A(this,d).add({...e.metadata,messages:e.messages}),{id:e.metadata.id,metadata:e.metadata}}deleteChat(e){return!!this.doesChatExist(e)&&(delete A(this,h)[e],A(this,d).delete(e),!0)}updateMetadata(e,t){if(this.doesChatExist(e))return A(this,d).update(e,{...t}),A(this,h)[e].metadata={...A(this,h)[e].metadata,...t},A(this,h)[e].metadata}updateMessages(e,t){if(this.doesChatExist(e))return A(this,h)[e].messages=t,A(this,d).update(e,{messages:t}),A(this,h)[e].messages}createDraft(e){return{messages:[],metadata:{id:(0,r.Z)(),name:"New Chat",createdTime:new Date,lastUpdatedTime:new Date,...void 0!==e&&{agentInstanceId:e}}}}}d=new WeakMap,h=new WeakMap,g=new WeakMap;class G{constructor(){j(this,f,{})}static getMessageWithStreamedResponse(e,t){return{...e,id:t.id,previousMessageId:t.previousMessageId}}static getUpdatedMetadata(e,t){if("assistant"===e.type&&e.chatName)return t?void 0:{name:e.chatName}}add(e,t){A(this,f)[e]={stopGenerating:t}}stop(e){const t=A(this,f)[e];t&&(t.stopGenerating(),delete A(this,f)[e])}static getMessagesOnStreamingStopped(e){const t=e[e.length-1];return $(t)?e.slice(0,-1).concat({...t,stopped:"byUser"}):e}static getMessagesWithUpdate(e,t){return t.map((t=>t.id===e.id?e:t))}static getMessagesWithDebugInfo(e,t,n){return n.map((n=>n.id===e?{...n,debugInfo:t}:n))}}f=new WeakMap;class Z{constructor(e){j(this,p),this.streamingResponse=new G,this.updates=new i.v,this.chatIOProvider=e.chatIO,this.store=new V(e.chatStorage)}async initialize(){await this.store.initialize()}async getAllChatsMetadata(){return this.store.getAllChatsMetadata()}async getChatMessages(e){return this.store.getChatMessages(e)}doesChatExist(e){return this.store.doesChatExist(e)}createDraft(e){const t=this.store.createDraft(e);return this.updates.emit("draftCreated",{id:t.metadata.id,metadata:t.metadata}),t}createChat(e,t){const{id:n,metadata:r}=this.store.createChat(e,t);return this.chatIOProvider.reset(),this.updates.emit("chatCreated",{id:n,metadata:r}),n}deleteChat(e){this.store.deleteChat(e)&&this.updates.emit("chatDeleted",{id:e})}updateChatMetadata(e,t){const n=this.store.updateMetadata(e,t);n&&this.updates.emit("chatMetadataUpdated",{id:e,metadata:n})}async sendMessage(e,t,n={},r){if(!this.store.doesChatExist(e))return;const i=await this.getChatMessages(e);return null===t?_(this,p,x).call(this,e,i,n,r):_(this,p,v).call(this,e,t,i,n,r)}async stopStreamingResponse(e){if(!this.store.doesChatExist(e))return;this.streamingResponse.stop(e);const t=await this.store.getChatMessages(e);_(this,p,m).call(this,e,G.getMessagesOnStreamingStopped(t)),this.updates.emit("streamingResponseStopped",{id:e})}async retryMessage(e){if(!this.store.doesChatExist(e))return;const t=function(e,t){let n=e.pop();for(;n&&"user"!==n.type;)n=e.pop();if("user"===(null==n?void 0:n.type))return{messages:e,userMessage:n}}(await this.store.getChatMessages(e));if(!t)return;const{messages:n,userMessage:r}=t;this.store.updateMessages(e,n),this.sendMessage(e,r.content,{contextId:void 0},r.context)}}function q(e){return"string"==typeof e}function K(e){return Array.isArray(e)&&e.every((e=>"string"==typeof e))}function J(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Y(e){return Array.isArray(e)}p=new WeakSet,m=function(e,t){this.store.updateMessages(e,t),this.updates.emit("chatMessagesUpdated",{id:e,messages:t})},v=function(e,t,n,r={},i){const{responseMessageId:o,messageOptions:s}=_(this,p,b).call(this,e,t,n,r,i);this.updates.emit("userMessageSent",{id:e,responseMessageId:o,content:t,messageOptions:s,messageCountBeforeSend:n.length})},x=function(e,t,n={},r){const{responseMessageId:i,messageOptions:o}=_(this,p,b).call(this,e,null,t,n,r);this.updates.emit("systemMessageSent",{id:e,responseMessageId:i,messageOptions:o,messageCountBeforeSend:t.length})},b=function(e,t,n,r={},i){const{predefinedPromptKind:o,systemMessageKind:s,systemMessageMetadata:a,contextId:l,scopedThirdPartyAgentIds:c,targetLanguage:u,extraOptions:d,skillName:h}=r,g=W(n,t,r,i);_(this,p,m).call(this,e,g);const f=g.length>1?g[g.length-2].id:void 0,v=g[g.length-1].id,x=function(e,t){const n=e.findLast((e=>"assistant"===e.type&&"final"===e.kind));return n&&n.blob,null==n?void 0:n.blob}(g),b=U({scopedThirdPartyAgentIds:c,backendBlob:x,predefinedPromptKind:o,systemMessageKind:s,systemMessageMetadata:a,messageId:v,chatId:e,contextId:l,...void 0!==u&&{targetLanguage:u},...void 0!==d&&{extraOptions:d},...void 0!==h&&{skillName:h}},i),k=_(this,p,C).call(this,e,v),S=_(this,p,w).call(this,e,t??"",k,b);return void 0!==f&&void 0!==S&&_(this,p,y).call(this,S,e,f),{responseMessageId:v,messageOptions:b}},y=async function(e,t,n){const r=await e;if(void 0===r)return;const i=await this.store.getChatMessages(t),o=G.getMessagesWithDebugInfo(n,r,i);_(this,p,m).call(this,t,o)},C=function(e,t){return async n=>{if(!this.store.doesChatExist(e))return;const r=(await this.store.getChatMessages(e)).find((e=>e.id===t));if(!r)return;const i=G.getMessageWithStreamedResponse(n,r),o=this.store.getChatMetadata(e),s=G.getUpdatedMetadata(n,null==o?void 0:o.userEditedTitle);if(i){this.updates.emit("chatMessageStreamed",{id:e,message:i,previousVersion:r});const t=await this.store.getChatMessages(e),n=G.getMessagesWithUpdate(i,t);_(this,p,m).call(this,e,n)}s&&this.updateChatMetadata(e,s)}},w=function(e,t,n,r){const i=this.chatIOProvider.sendMessage(t,n,r);return this.streamingResponse.add(e,i),i.debug};const X=k.dt({start:k.pk,end:k.pk}),Q=k.jV([k.dt({location:k.Z_,original:k.Z_,updated:k.Z_}),k.r$({reason:k.Z_})]),ee=k.r$({original:k.Z_,updated:k.Z_,reason:k.Z_,validated:k.O7,edit_span:X,raw_edit_proposal:Q}),te=k.dt({type:k.i0("ai_message"),id:k.Z_,content:k.Z_}),ne=k.dt({type:k.i0("proposed_edits"),id:k.Z_,edits:k.IX(ee)}),re=k.dt({type:k.i0("reading_document"),id:k.Z_}),ie=k.dt({type:k.i0("generic_tool_call"),id:k.Z_,content:k.Z_,sticky:k.O7}),oe=k.dt({type:k.i0("error"),id:k.Z_,message:k.Z_}),se=k.jV([k.dt({type:k.i0("generated_text"),id:k.Z_,content:k.Z_}),k.r$({title:k.Z_,content_type:k.Z_,format:k.Z_})]),ae=k.G0([k.i0("chatAgent"),k.i0("improve"),k.i0("proofreaderAgent"),k.i0("plagiarismAgent"),k.i0("aiDetectorAgent"),k.i0("aiGraderAgent"),k.i0("citationFinderAgent"),k.i0("expertPanelAgent"),k.i0("humanizerAgent"),k.i0("readerReactionAgent")]),le=k.G0([k.i0("onboarding:welcome"),k.i0("onboarding:start"),k.i0("onboarding:next"),k.i0("onboarding:exit")]),ce=k.jV([k.dt({kind:k.i0("chatMessage"),label:k.Z_,message:k.Z_}),k.r$({isRecommended:k.O7,icon:ae,systemMessageKind:le})]),ue=k.dt({kind:k.i0("OpenAgent"),agentId:k.Z_}),de=k.jV([k.dt({kind:k.i0("assistantCommand"),label:k.Z_,command:ue}),k.r$({isRecommended:k.O7,icon:ae})]),he=k.G0([ce,de]),ge=k.jV([k.dt({type:k.i0("quick_actions"),id:k.Z_,actions:k.IX(he)}),k.r$({title:k.Z_})]),fe=k.dt({type:k.i0("insert_text"),id:k.Z_,insert_offset:k.pk,text:k.Z_}),pe=k.dt({type:k.i0("widget"),id:k.Z_,widget_type:k.Z_}),me=k.dt({id:k.Z_,title:k.Z_,statusLabel:k.Z_}),ve=k.jV([me,k.dt({type:k.i0("research_page"),status:k.i0("proposed")})]),xe=k.jV([me,k.dt({type:k.i0("research_page"),status:k.i0("loading"),progress:k.pk})]),be=k.jV([me,k.dt({type:k.i0("research_page"),status:k.i0("completed"),pageId:k.Z_})]),ye=k.G0([ve,xe,be]),Ce=k.G0([te,oe,se,ie,fe,ne,ge,re,pe,ye]),we=k.dt({id:k.Z_,name:k.Z_,args:k.mI});k.jV([k.dt({items:k.IX(Ce)}),k.r$({clientToolCalls:k.IX(we)})]);const ke=k.dt({pname:k.Z_,original_paragraph:k.Z_,begin:k.pk,end:k.pk,rewrite:k.Z_,explanation:k.Z_,contentId:k.Z_});let Se;function Ie(){return Se||(Se=S.C8.Logging.getLogger("assistant.chat")),Se}function Ee(e){return e.filter((e=>{const t=Ce.is(e);if(!t)if(e&&"object"==typeof e){const{type:t,kind:n}=e;Ie().warn(`Invalid AiEditor output item. type=${t}, kind=${n}`)}else Ie().warn("Invalid AiEditor output item. Not an object.");return t}))}function Ae(e){return e.filter((e=>{const t=we.is(e);return t||Ie().warn("Invalid AiEditor client tool call item. Not an object."),t}))}function je(e,t=0){return Le(e,["responseText",t].filter(Boolean).join(""),"",q)}function Me(e){return Le(e,"historyTitle",void 0,q)}function _e(e){return Le(e,"planning",[],(e=>Y(e)&&e.every((e=>J(e)&&"title"in e))))}function Re(e){return Le(e,"pendingToolCallActions",[],(e=>Y(e)&&e.every((e=>J(e)&&"toolCallId"in e))))}function De(e){return Le(e,"currentSessionRewrites",[],(e=>Y(e)&&e.every((e=>J(e)&&"explanation"in e))))}function Te(e){return Le(e,"sources",void 0,(e=>Y(e)&&e.every((e=>J(e)&&"url"in e&&"title"in e&&"recordId"in e&&"searchRequestId"in e))))}function Oe(e){return Le(e,"kind",R.Other,function(e){return t=>"string"==typeof t&&Object.values(e).includes(t)}(R))}function Pe(e){return function(e){if(!Y(e))return[];const t=e.filter(ke.is);if(t.length!==e.length){const n=e.length-t.length,r=e.length;Ie().warn(`Invalid AiEditor alerts structure: validation failed for ${n} items out of ${r}`)}return t}(Le(e,"alerts",[],Y))}function Le(e,t,n,r){const i=null==e?void 0:e[t];if(!i)return n;try{const e=i.json,o=JSON.parse(e);return r&&!r(o)?(Ie().warn(`Parsed value for ${t} does not match expected type`),n):o}catch{return Ie().warn(`Failed to parse ${t}`),n}}const Ne=e=>{const t=function(e){return Le(e,"ideation_approaches",[],K)}(e);if(t.length>0){const n=t.map(((t,n)=>({title:t,content:je(e,n)})));return{responseFormat:R.PromptOutput,variations:n,content:n[0].content}}const n=function(e){return Le(e,"tabResponses",[],(e=>Y(e)&&e.every((e=>!(!J(e)||!("title"in e)||!("mainContent"in e)||"additionalContent"in e&&"string"!=typeof e.additionalContent)))))}(e);if(n.length>0){const e=n.map((e=>{const t={title:e.title,content:e.mainContent};return e.additionalContent&&(t.additionalContent=e.additionalContent),t}));return{responseFormat:R.PromptOutput,content:e[0].content,variations:e}}const r=je(e);return{responseFormat:R.PromptOutput,content:r}};function Fe(e){const{items:t,clientToolCalls:n}=function(e){const{items:t,clientToolCalls:n}=Le(e,"output",{},J);return{items:Y(t)?Ee(t):[],clientToolCalls:Y(n)?Ae(n):[]}}(e);return{responseFormat:R.AiEditorOutput,items:t,clientToolCalls:n,alerts:Pe(e),content:""}}function Be(e){return{chatName:Me(e)}}function ze(e){return{sources:Te(e)}}function He(e){return{planning:_e(e)}}function Ue(e){return{currentSessionRewrites:De(e)}}function $e(e){return{pendingToolCallActions:Re(e)}}function We(e){try{return"```json\n"+JSON.stringify(e,null,2)+"\n```"}catch(e){return`# Failed to serialize message: ${e}`}}const Ve=l.ns(l.l7(a.Schemable)({sensitiveString:a.string}))(l.a9).is,Ge=l.ns(l.l7(a.Schemable)({sensitiveString:a.string}))(l.nO).is;function Ze(e){var t;switch(e.kind){case c.PU.Partial:return{kind:c.PU.Partial};case c.PU.Final:return{kind:c.PU.Final,blob:(null==(t=e.backendBlob)?void 0:t.blob)||""};default:(0,u.vE)(e)}}const qe=(e,t)=>({...e,debugInfo:{networkMessage:We(t)}});function Ke(e){switch(Oe(e.extraProperties)){case R.AiEditorOutput:return Fe(e.extraProperties);case R.AgentOutput:return(e=>{const t=je(e);return{responseFormat:R.AgentOutput,content:t}})(e.extraProperties);default:return Ne(e.extraProperties)}}function Je({correlationId:e,onResponse:t,onResponseComplete:n,middleware:r=[]}){let i;return a=>{if(!Ge(a)&&!Ve(a))return o._.Result.CONTINUE_HANDLING;if(a.correlationId!==e)return o._.Result.CONTINUE_HANDLING;if(Ve(a))return t(function(e){return{type:"error",title:e.title,content:e.details,errorType:e.errorType.kind,debugInfo:{networkMessage:We(e)}}}(a)),null==n||n(),o._.Result.STOP_HANDLING;if(Ge(a)){const e="delta"===a.kind?(0,s.G)(i,a):a;if(e){i=e;const s=function(e,t){let n={type:"assistant",...Ze(e),...Ke(e),...Be(e.extraProperties),...ze(e.extraProperties),...He(e.extraProperties),...Ue(e.extraProperties),...$e(e.extraProperties)};for(const r of t)n=r(n,e);return n}(e,r);return t(s),e.kind===c.PU.Final&&(null==n||n()),o._.Result.STOP_HANDLING}}return o._.Result.STOP_HANDLING}}},82852:(e,t,n)=>{function r(e){return"string"==typeof e}function i(e){return r(e)?0===e.length:0===e.selectedText.length}function o(e){return r(e)?e:e.selectedText}n.d(t,{ID:()=>i,ZT:()=>o})},22572:(e,t,n)=>{n.d(t,{pd:()=>rh,uk:()=>ih,i7:()=>Pm,IQ:()=>nh,w9:()=>cm,FP:()=>th,wc:()=>ng,xg:()=>Nb,aM:()=>Fb,ZY:()=>Pb,f$:()=>zm,GV:()=>Dg,cb:()=>Rf,ht:()=>ep,f8:()=>Ef,Op:()=>Qd,so:()=>eh,Ie:()=>km,D_:()=>Fh,GP:()=>Lh,eB:()=>bh,Tm:()=>Ih,ar:()=>lh,ob:()=>gh,bF:()=>ch,Ox:()=>Hb,RJ:()=>xh,fK:()=>Mf,ej:()=>Af,Gg:()=>$m,iW:()=>My,Sh:()=>Lm,rD:()=>jy,zI:()=>$b,wz:()=>Sy,i5:()=>Ub,hA:()=>Iy});var r=n(32103),i=n(62220),o=n(651),s=n(92379),a=n.t(s,2),l=n(39198),c=n(81411),u=n(58293),d=n(46304),h=n(3567),g=n(82188),f=n(39010),p=n(13566),m=n(37647),v=n(55678),x=n(27988),b=n(76676),y=n(50068);if(6168==n.j)var C=n(56765);if(6168==n.j)var w=n(31127);if(6168==n.j)var k=n(76247);if(6168==n.j)var S=n(64995);if(6168==n.j)var I=n(77943);if(6168==n.j)var E=n(11182);if(6168==n.j)var A=n(97408);if(6168==n.j)var j=n(24590);if(6168==n.j)var M=n(72419);if(6168==n.j)var _=n(54548);if(6168==n.j)var R=n(12065);if(6168==n.j)var D=n(73520);if(6168==n.j)var T=n(86816);if(6168==n.j)var O=n(2581);if(6168==n.j)var P=n(17940);if(6168==n.j)var L=n(42354);if(6168==n.j)var N=n(53888);if(6168==n.j)var F=n(3664);if(6168==n.j)var B=n(44155);if(6168==n.j)var z=n(95917);if(6168==n.j)var H=n(21379);var U=n(26389);if(6168==n.j)var $=n(65178);var W=n(96456);if(6168==n.j)var V=n(50208);if(6168==n.j)var G=n(86306);var Z=n(34549);if(6168==n.j)var q=n(87179);if(6168==n.j)var K=n(63661);var J=n(46155);if(6168==n.j)var Y=n(9986);var X=n(95295);const Q="undefined"!=typeof self&&void 0!==self.document&&void 0!==self.document.createElement;function ee(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function te(e){return"nodeType"in e}function ne(e){var t,n;return e?ee(e)?e:te(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:self:self}function re(e){const{Document:t}=ne(e);return e instanceof t}function ie(e){return!ee(e)&&e instanceof ne(e).HTMLElement}function oe(e){return e instanceof ne(e).SVGElement}function se(e){return e?ee(e)?e.document:te(e)?re(e)?e:ie(e)||oe(e)?e.ownerDocument:document:document:document}const ae=6168==n.j?Q?s.useLayoutEffect:s.useEffect:null;function le(e){const t=(0,s.useRef)(e);return ae((()=>{t.current=e})),(0,s.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function ce(e,t){void 0===t&&(t=[e]);const n=(0,s.useRef)(e);return ae((()=>{n.current!==e&&(n.current=e)}),t),n}function ue(e,t){const n=(0,s.useRef)();return(0,s.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function de(e){const t=le(e),n=(0,s.useRef)(null),r=(0,s.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function he(e){const t=(0,s.useRef)();return(0,s.useEffect)((()=>{t.current=e}),[e]),t.current}let ge={};function fe(e,t){return(0,s.useMemo)((()=>{if(t)return t;const n=null==ge[e]?0:ge[e]+1;return ge[e]=n,e+"-"+n}),[e,t])}function pe(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,i]of r){const r=t[n];null!=r&&(t[n]=r+e*i)}return t}),{...t})}}const me=pe(1),ve=pe(-1);function xe(e){if(!e)return!1;const{KeyboardEvent:t}=ne(e.target);return t&&e instanceof t}function be(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=ne(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const ye=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ye.Translate.toString(e),ye.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Ce="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function we(e){return e.matches(Ce)?e:e.querySelector(Ce)}const ke={display:"none"};function Se(e){let{id:t,value:n}=e;return s.createElement("div",{id:t,style:ke},n)}function Ie(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return s.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const Ee=6168==n.j?(0,s.createContext)(null):null;const Ae={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},je={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Me(e){let{announcements:t=je,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Ae}=e;const{announce:o,announcement:a}=function(){const[e,t]=(0,s.useState)("");return{announce:(0,s.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),l=fe("DndLiveRegion"),[c,u]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{u(!0)}),[]),function(e){const t=(0,s.useContext)(Ee);(0,s.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,s.useMemo)((()=>({onDragStart(e){let{active:n}=e;o(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&o(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;o(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;o(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;o(t.onDragCancel({active:n,over:r}))}})),[o,t])),!c)return null;const d=s.createElement(s.Fragment,null,s.createElement(Se,{id:r,value:i.draggable}),s.createElement(Ie,{id:l,announcement:a}));return n?(0,X.createPortal)(d,n):d}var _e;function Re(){}function De(e,t){return(0,s.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(_e||(_e={}));const Te=Object.freeze({x:0,y:0});function Oe(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pe(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Le(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ne(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function Fe(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function Be(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const ze=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Be(t,t.left,t.top),o=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=Oe(Be(r),i);o.push({id:t,data:{droppableContainer:e,value:n}})}}return o.sort(Pe)};function He(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),s=i-r,a=o-n;if(r<i&&n<o){const n=t.width*t.height,r=e.width*e.height,i=s*a;return Number((i/(n+r-i)).toFixed(4))}return 0}const Ue=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const e of r){const{id:r}=e,o=n.get(r);if(o){const n=He(o,t);n>0&&i.push({id:r,data:{droppableContainer:e,value:n}})}}return i.sort(Le)};function $e(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Te}const We=6168==n.j?(Ve=1,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((e,t)=>({...e,top:e.top+Ve*t.y,bottom:e.bottom+Ve*t.y,left:e.left+Ve*t.x,right:e.right+Ve*t.x})),{...e})}):null;var Ve;function Ge(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const Ze={ignoreTransform:!1};function qe(e,t){void 0===t&&(t=Ze);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=ne(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=Ge(t);if(!r)return e;const{scaleX:i,scaleY:o,x:s,y:a}=r,l=e.left-s-(1-i)*parseFloat(n),c=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=o?e.height/o:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(n,t,r))}const{top:r,left:i,width:o,height:s,bottom:a,right:l}=n;return{top:r,left:i,width:o,height:s,bottom:a,right:l}}function Ke(e){return qe(e,{ignoreTransform:!0})}function Je(e,t){const n=[];return e?function r(i){if(null!=t&&n.length>=t)return n;if(!i)return n;if(re(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!ie(i)||oe(i))return n;if(n.includes(i))return n;const o=ne(e).getComputedStyle(i);return i!==e&&function(e,t){void 0===t&&(t=ne(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(i,o)&&n.push(i),function(e,t){return void 0===t&&(t=ne(e).getComputedStyle(e)),"fixed"===t.position}(i,o)?n:r(i.parentNode)}(e):n}function Ye(e){const[t]=Je(e,1);return null!=t?t:null}function Xe(e){return Q&&e?ee(e)?e:te(e)?re(e)||e===se(e).scrollingElement?self:ie(e)?e:null:null:null}function Qe(e){return ee(e)?e.scrollX:e.scrollLeft}function et(e){return ee(e)?e.scrollY:e.scrollTop}function tt(e){return{x:Qe(e),y:et(e)}}var nt;function rt(e){return!(!Q||!e)&&e===document.scrollingElement}function it(e){const t={x:0,y:0},n=rt(e)?{height:self.innerHeight,width:self.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(nt||(nt={}));const ot={x:.2,y:.2};function st(e,t,n,r,i){let{top:o,left:s,right:a,bottom:l}=n;void 0===r&&(r=10),void 0===i&&(i=ot);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=it(e),g={x:0,y:0},f={x:0,y:0},p=t.height*i.y,m=t.width*i.x;return!c&&o<=t.top+p?(g.y=nt.Backward,f.y=r*Math.abs((t.top+p-o)/p)):!u&&l>=t.bottom-p&&(g.y=nt.Forward,f.y=r*Math.abs((t.bottom-p-l)/p)),!h&&a>=t.right-m?(g.x=nt.Forward,f.x=r*Math.abs((t.right-m-a)/m)):!d&&s<=t.left+m&&(g.x=nt.Backward,f.x=r*Math.abs((t.left+m-s)/m)),{direction:g,speed:f}}function at(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=self;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function lt(e){return e.reduce(((e,t)=>me(e,tt(t))),Te)}function ct(e,t){if(void 0===t&&(t=qe),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);Ye(e)&&(i<=0||o<=0||n>=self.innerHeight||r>=self.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ut=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Qe(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+et(t)),0)}]];class dt{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Je(t),r=lt(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,i]of ut)for(const o of t)Object.defineProperty(this,o,{get:()=>{const t=i(n),s=r[e]-t;return this.rect[o]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ht{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function gt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var ft,pt;function mt(e){e.preventDefault()}function vt(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(ft||(ft={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(pt||(pt={}));const xt={start:[pt.Space,pt.Enter],cancel:[pt.Esc],end:[pt.Space,pt.Enter,pt.Tab]},bt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case pt.Right:return{...n,x:n.x+25};case pt.Left:return{...n,x:n.x-25};case pt.Down:return{...n,y:n.y+25};case pt.Up:return{...n,y:n.y-25}}};class yt{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ht(se(t)),this.windowListeners=new ht(ne(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ft.Resize,this.handleCancel),this.windowListeners.add(ft.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(ft.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&ct(n),t(Te)}handleKeyDown(e){if(xe(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:i=xt,coordinateGetter:o=bt,scrollBehavior:s="smooth"}=r,{code:a}=e;if(i.end.includes(a))return void this.handleEnd(e);if(i.cancel.includes(a))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:Te;this.referenceCoordinates||(this.referenceCoordinates=c);const u=o(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=ve(u,c),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(const n of i){const i=e.code,{isTop:o,isRight:a,isLeft:l,isBottom:c,maxScroll:d,minScroll:h}=it(n),g=at(n),f={x:Math.min(i===pt.Right?g.right-g.width/2:g.right,Math.max(i===pt.Right?g.left:g.left+g.width/2,u.x)),y:Math.min(i===pt.Down?g.bottom-g.height/2:g.bottom,Math.max(i===pt.Down?g.top:g.top+g.height/2,u.y))},p=i===pt.Right&&!a||i===pt.Left&&!l,m=i===pt.Down&&!c||i===pt.Up&&!o;if(p&&f.x!==u.x){const e=n.scrollLeft+t.x,o=i===pt.Right&&e<=d.x||i===pt.Left&&e>=h.x;if(o&&!t.y)return void n.scrollTo({left:e,behavior:s});r.x=o?n.scrollLeft-e:i===pt.Right?n.scrollLeft-d.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(m&&f.y!==u.y){const e=n.scrollTop+t.y,o=i===pt.Down&&e<=d.y||i===pt.Up&&e>=h.y;if(o&&!t.x)return void n.scrollTo({top:e,behavior:s});r.y=o?n.scrollTop-e:i===pt.Down?n.scrollTop-d.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,me(ve(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Ct(e){return Boolean(e&&"distance"in e)}function wt(e){return Boolean(e&&"delay"in e)}yt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=xt,onActivation:i}=t,{active:o}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const t=o.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class kt{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=ne(e);return e instanceof t?e:se(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:i}=e,{target:o}=i;this.props=e,this.events=t,this.document=se(o),this.documentListeners=new ht(this.document),this.listeners=new ht(n),this.windowListeners=new ht(ne(o)),this.initialCoordinates=null!=(r=be(i))?r:Te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ft.Resize,this.handleCancel),this.windowListeners.add(ft.DragStart,mt),this.windowListeners.add(ft.VisibilityChange,this.handleCancel),this.windowListeners.add(ft.ContextMenu,mt),this.documentListeners.add(ft.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(wt(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(Ct(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(ft.Click,vt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ft.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!r)return;const a=null!=(t=be(e))?t:Te,l=ve(r,a);if(!n&&s){if(Ct(s)){if(null!=s.tolerance&&gt(l,s.tolerance))return this.handleCancel();if(gt(l,s.distance))return this.handleStart()}return wt(s)&&gt(l,s.tolerance)?this.handleCancel():void this.handlePending(s,l)}e.cancelable&&e.preventDefault(),o(a)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===pt.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const St={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class It extends kt{constructor(e){const{event:t}=e,n=se(t.target);super(e,St,n)}}It.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const Et={move:{name:"mousemove"},end:{name:"mouseup"}};var At;!function(e){e[e.RightClick=2]="RightClick"}(At||(At={}));(class extends kt{constructor(e){super(e,Et,se(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==At.RightClick&&(null==r||r({event:n}),!0)}}];const jt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Mt,_t;function Rt(e){let{acceleration:t,activator:n=Mt.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:a=5,order:l=_t.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:g}=e;const f=function(e){let{delta:t,disabled:n}=e;const r=he(t);return ue((e=>{if(n||!r||!e)return Dt;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[nt.Backward]:e.x[nt.Backward]||-1===i.x,[nt.Forward]:e.x[nt.Forward]||1===i.x},y:{[nt.Backward]:e.y[nt.Backward]||-1===i.y,[nt.Forward]:e.y[nt.Forward]||1===i.y}}}),[n,t,r])}({delta:h,disabled:!o}),[p,m]=function(){const e=(0,s.useRef)(null);return[(0,s.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,s.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),v=(0,s.useRef)({x:0,y:0}),x=(0,s.useRef)({x:0,y:0}),b=(0,s.useMemo)((()=>{switch(n){case Mt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Mt.DraggableRect:return i}}),[n,i,c]),y=(0,s.useRef)(null),C=(0,s.useCallback)((()=>{const e=y.current;if(!e)return;const t=v.current.x*x.current.x,n=v.current.y*x.current.y;e.scrollBy(t,n)}),[]),w=(0,s.useMemo)((()=>l===_t.TreeOrder?[...u].reverse():u),[l,u]);(0,s.useEffect)((()=>{if(o&&u.length&&b){for(const e of w){if(!1===(null==r?void 0:r(e)))continue;const n=u.indexOf(e),i=d[n];if(!i)continue;const{direction:o,speed:s}=st(e,i,b,t,g);for(const e of["x","y"])f[e][o[e]]||(s[e]=0,o[e]=0);if(s.x>0||s.y>0)return m(),y.current=e,p(C,a),v.current=s,void(x.current=o)}v.current={x:0,y:0},x.current={x:0,y:0},m()}else m()}),[t,C,r,m,o,a,JSON.stringify(b),JSON.stringify(f),p,u,w,d,JSON.stringify(g)])}(class extends kt{constructor(e){super(e,jt)}static setup(){return self.addEventListener(jt.move.name,e,{capture:!1,passive:!1}),function(){self.removeEventListener(jt.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Mt||(Mt={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(_t||(_t={}));const Dt={x:{[nt.Backward]:!1,[nt.Forward]:!1},y:{[nt.Backward]:!1,[nt.Forward]:!1}};var Tt,Ot;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(Tt||(Tt={})),function(e){e.Optimized="optimized"}(Ot||(Ot={}));const Pt=new Map;function Lt(e,t){return ue((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function Nt(e){let{callback:t,disabled:n}=e;const r=le(t),i=(0,s.useMemo)((()=>{if(n||"undefined"==typeof self||void 0===self.ResizeObserver)return;const{ResizeObserver:e}=self;return new e(r)}),[n]);return(0,s.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}function Ft(e){return new dt(qe(e),e)}function Bt(e,t,n){void 0===t&&(t=Ft);const[r,i]=(0,s.useState)(null);function o(){i((r=>{if(!e)return null;var i;if(!1===e.isConnected)return null!=(i=null!=r?r:n)?i:null;const o=t(e);return JSON.stringify(r)===JSON.stringify(o)?r:o}))}const a=function(e){let{callback:t,disabled:n}=e;const r=le(t),i=(0,s.useMemo)((()=>{if(n||"undefined"==typeof self||void 0===self.MutationObserver)return;const{MutationObserver:e}=self;return new e(r)}),[r,n]);return(0,s.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){o();break}}}}),l=Nt({callback:o});return ae((()=>{o(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())}),[e]),r}const zt=6168==n.j?[]:null;function Ht(e,t){void 0===t&&(t=[]);const n=(0,s.useRef)(null);return(0,s.useEffect)((()=>{n.current=null}),t),(0,s.useEffect)((()=>{const t=e!==Te;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?ve(e,n.current):Te}function Ut(e){return(0,s.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const $t=6168==n.j?[]:null;function Wt(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ie(t)?t:e}const Vt=[{sensor:It,options:{}},{sensor:yt,options:{}}],Gt={current:{}},Zt={draggable:{measure:Ke},droppable:{measure:Ke,strategy:Tt.WhileDragging,frequency:Ot.Optimized},dragOverlay:{measure:qe}};class qt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Kt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new qt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Re},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zt,measureDroppableContainers:Re,windowRect:null,measuringScheduled:!1},Jt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Re,draggableNodes:new Map,over:null,measureDroppableContainers:Re},Yt=6168==n.j?(0,s.createContext)(Jt):null,Xt=6168==n.j?(0,s.createContext)(Kt):null;function Qt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new qt}}}function en(e,t){switch(t.type){case _e.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case _e.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case _e.DragEnd:case _e.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _e.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new qt(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case _e.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new qt(e.droppable.containers);return s.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:s}}}case _e.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new qt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function tn(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=(0,s.useContext)(Yt),o=he(r),a=he(null==n?void 0:n.id);return(0,s.useEffect)((()=>{if(!t&&!r&&o&&null!=a){if(!xe(o))return;if(document.activeElement===o.target)return;const e=i.get(a);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=we(e);if(t){t.focus();break}}}))}}),[r,t,i,a,o]),null}function nn(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const rn=(0,s.createContext)({...Te,scaleX:1,scaleY:1});var on;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(on||(on={}));const sn=6168==n.j?(0,s.memo)((function(e){var t,n,r,i;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=Vt,collisionDetection:d=Ue,measuring:h,modifiers:g,...f}=e;const p=(0,s.useReducer)(en,void 0,Qt),[m,v]=p,[x,b]=function(){const[e]=(0,s.useState)((()=>new Set)),t=(0,s.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,s.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[y,C]=(0,s.useState)(on.Uninitialized),w=y===on.Initialized,{draggable:{active:k,nodes:S,translate:I},droppable:{containers:E}}=m,A=null!=k?S.get(k):null,j=(0,s.useRef)({initial:null,translated:null}),M=(0,s.useMemo)((()=>{var e;return null!=k?{id:k,data:null!=(e=null==A?void 0:A.data)?e:Gt,rect:j}:null}),[k,A]),_=(0,s.useRef)(null),[R,D]=(0,s.useState)(null),[T,O]=(0,s.useState)(null),P=ce(f,Object.values(f)),L=fe("DndDescribedBy",o),N=(0,s.useMemo)((()=>E.getEnabled()),[E]),F=(B=h,(0,s.useMemo)((()=>({draggable:{...Zt.draggable,...null==B?void 0:B.draggable},droppable:{...Zt.droppable,...null==B?void 0:B.droppable},dragOverlay:{...Zt.dragOverlay,...null==B?void 0:B.dragOverlay}})),[null==B?void 0:B.draggable,null==B?void 0:B.droppable,null==B?void 0:B.dragOverlay]));var B;const{droppableRects:z,measureDroppableContainers:H,measuringScheduled:U}=function(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,a]=(0,s.useState)(null),{frequency:l,measure:c,strategy:u}=i,d=(0,s.useRef)(e),h=function(){switch(u){case Tt.Always:return!1;case Tt.BeforeDragging:return n;default:return!n}}(),g=ce(h),f=(0,s.useCallback)((function(e){void 0===e&&(e=[]),g.current||a((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[g]),p=(0,s.useRef)(null),m=ue((t=>{if(h&&!n)return Pt;if(!t||t===Pt||d.current!==e||null!=o){const t=new Map;for(let n of e){if(!n)continue;if(o&&o.length>0&&!o.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new dt(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,o,n,h,c]);return(0,s.useEffect)((()=>{d.current=e}),[e]),(0,s.useEffect)((()=>{h||f()}),[n,h]),(0,s.useEffect)((()=>{o&&o.length>0&&a(null)}),[JSON.stringify(o)]),(0,s.useEffect)((()=>{h||"number"!=typeof l||null!==p.current||(p.current=setTimeout((()=>{f(),p.current=null}),l))}),[l,h,f,...r]),{droppableRects:m,measureDroppableContainers:f,measuringScheduled:null!=o}}(N,{dragging:w,dependencies:[I.x,I.y],config:F.droppable}),$=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return ue((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(S,k),W=(0,s.useMemo)((()=>T?be(T):null),[T]),V=function(){const e=!1===(null==R?void 0:R.autoScrollEnabled),t="object"==typeof l?!1===l.enabled:!1===l,n=w&&!e&&!t;if("object"==typeof l)return{...l,enabled:n};return{enabled:n}}(),G=function(e,t){return Lt(e,t)}($,F.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=(0,s.useRef)(!1),{x:a,y:l}="boolean"==typeof i?{x:i,y:i}:i;ae((()=>{if(!a&&!l||!t)return void(o.current=!1);if(o.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const i=$e(n(e),r);if(a||(i.x=0),l||(i.y=0),o.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){const t=Ye(e);t&&t.scrollBy({top:i.y,left:i.x})}}),[t,a,l,r,n])}({activeNode:null!=k?S.get(k):null,config:V.layoutShiftCompensation,initialRect:G,measure:F.draggable.measure});const Z=Bt($,F.draggable.measure,G),q=Bt($?$.parentElement:null),K=(0,s.useRef)({activatorEvent:null,active:null,activeNode:$,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),J=E.getNodeFor(null==(t=K.current.over)?void 0:t.id),Y=function(e){let{measure:t}=e;const[n,r]=(0,s.useState)(null),i=(0,s.useCallback)((e=>{for(const{target:n}of e)if(ie(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t]),o=Nt({callback:i}),a=(0,s.useCallback)((e=>{const n=Wt(e);null==o||o.disconnect(),n&&(null==o||o.observe(n)),r(n?t(n):null)}),[t,o]),[l,c]=de(a);return(0,s.useMemo)((()=>({nodeRef:l,rect:n,setRef:c})),[n,l,c])}({measure:F.dragOverlay.measure}),ee=null!=(n=Y.nodeRef.current)?n:$,te=w?null!=(r=Y.rect)?r:Z:null,re=Boolean(Y.nodeRef.current&&Y.rect),oe=$e(se=re?null:Z,Lt(se));var se;const le=Ut(ee?ne(ee):null),he=function(e){const t=(0,s.useRef)(e),n=ue((n=>e?n&&n!==zt&&e&&t.current&&e.parentNode===t.current.parentNode?n:Je(e):zt),[e]);return(0,s.useEffect)((()=>{t.current=e}),[e]),n}(w?null!=J?J:$:null),ge=function(e,t){void 0===t&&(t=qe);const[n]=e,r=Ut(n?ne(n):null),[i,o]=(0,s.useState)($t);function a(){o((()=>e.length?e.map((e=>rt(e)?r:new dt(t(e),e))):$t))}const l=Nt({callback:a});return ae((()=>{null==l||l.disconnect(),a(),e.forEach((e=>null==l?void 0:l.observe(e)))}),[e]),i}(he),pe=nn(g,{transform:{x:I.x-oe.x,y:I.y-oe.y,scaleX:1,scaleY:1},activatorEvent:T,active:M,activeNodeRect:Z,containerNodeRect:q,draggingNodeRect:te,over:K.current.over,overlayNodeRect:Y.rect,scrollableAncestors:he,scrollableAncestorRects:ge,windowRect:le}),ve=W?me(W,I):null,xe=function(e){const[t,n]=(0,s.useState)(null),r=(0,s.useRef)(e),i=(0,s.useCallback)((e=>{const t=Xe(e.target);t&&n((e=>e?(e.set(t,tt(t)),new Map(e)):null))}),[]);return(0,s.useEffect)((()=>{const t=r.current;if(e!==t){o(t);const s=e.map((e=>{const t=Xe(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,tt(t)]):null})).filter((e=>null!=e));n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(t)};function o(e){e.forEach((e=>{const t=Xe(e);null==t||t.removeEventListener("scroll",i)}))}}),[i,e]),(0,s.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>me(e,t)),Te):lt(e):Te),[e,t])}(he),ye=Ht(xe),Ce=Ht(xe,[Z]),we=me(pe,ye),ke=te?We(te,pe):null,Se=M&&ke?d({active:M,collisionRect:ke,droppableRects:z,droppableContainers:N,pointerCoordinates:ve}):null,Ie=Fe(Se,"id"),[Ae,je]=(0,s.useState)(null),Re=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(re?pe:me(pe,Ce),null!=(i=null==Ae?void 0:Ae.rect)?i:null,Z),De=(0,s.useRef)(null),Oe=(0,s.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==_.current)return;const i=S.get(_.current);if(!i)return;const o=e.nativeEvent,s=new n({active:_.current,activeNode:i,event:o,options:r,context:K,onAbort(e){if(!S.get(e))return;const{onDragAbort:t}=P.current,n={id:e};null==t||t(n),x({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!S.get(e))return;const{onDragPending:i}=P.current,o={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(o),x({type:"onDragPending",event:o})},onStart(e){const t=_.current;if(null==t)return;const n=S.get(t);if(!n)return;const{onDragStart:r}=P.current,i={activatorEvent:o,active:{id:t,data:n.data,rect:j}};(0,X.unstable_batchedUpdates)((()=>{null==r||r(i),C(on.Initializing),v({type:_e.DragStart,initialCoordinates:e,active:t}),x({type:"onDragStart",event:i}),D(De.current),O(o)}))},onMove(e){v({type:_e.DragMove,coordinates:e})},onEnd:a(_e.DragEnd),onCancel:a(_e.DragCancel)});function a(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:i}=K.current;let s=null;if(t&&i){const{cancelDrop:a}=P.current;if(s={activatorEvent:o,active:t,collisions:n,delta:i,over:r},e===_e.DragEnd&&"function"==typeof a){await Promise.resolve(a(s))&&(e=_e.DragCancel)}}_.current=null,(0,X.unstable_batchedUpdates)((()=>{v({type:e}),C(on.Uninitialized),je(null),D(null),O(null),De.current=null;const t=e===_e.DragEnd?"onDragEnd":"onDragCancel";if(s){const e=P.current[t];null==e||e(s),x({type:t,event:s})}}))}}De.current=s}),[S]),Pe=(0,s.useCallback)(((e,t)=>(n,r)=>{const i=n.nativeEvent,o=S.get(r);if(null!==_.current||!o||i.dndKit||i.defaultPrevented)return;const s={active:o};!0===e(n,t.options,s)&&(i.dndKit={capturedBy:t.sensor},_.current=r,Oe(n,t))}),[S,Oe]),Le=function(e,t){return(0,s.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(u,Pe);!function(e){(0,s.useEffect)((()=>{if(!Q)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(u),ae((()=>{Z&&y===on.Initializing&&C(on.Initialized)}),[Z,y]),(0,s.useEffect)((()=>{const{onDragMove:e}=P.current,{active:t,activatorEvent:n,collisions:r,over:i}=K.current;if(!t||!n)return;const o={active:t,activatorEvent:n,collisions:r,delta:{x:we.x,y:we.y},over:i};(0,X.unstable_batchedUpdates)((()=>{null==e||e(o),x({type:"onDragMove",event:o})}))}),[we.x,we.y]),(0,s.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=K.current;if(!e||null==_.current||!t||!i)return;const{onDragOver:o}=P.current,s=r.get(Ie),a=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:a};(0,X.unstable_batchedUpdates)((()=>{je(a),null==o||o(l),x({type:"onDragOver",event:l})}))}),[Ie]),ae((()=>{K.current={activatorEvent:T,active:M,activeNode:$,collisionRect:ke,collisions:Se,droppableRects:z,draggableNodes:S,draggingNode:ee,draggingNodeRect:te,droppableContainers:E,over:Ae,scrollableAncestors:he,scrollAdjustedTranslate:we},j.current={initial:te,translated:ke}}),[M,$,Se,ke,S,ee,te,z,E,Ae,he,we]),Rt({...V,delta:I,draggingRect:ke,pointerCoordinates:ve,scrollableAncestors:he,scrollableAncestorRects:ge});const Ne=(0,s.useMemo)((()=>({active:M,activeNode:$,activeNodeRect:Z,activatorEvent:T,collisions:Se,containerNodeRect:q,dragOverlay:Y,draggableNodes:S,droppableContainers:E,droppableRects:z,over:Ae,measureDroppableContainers:H,scrollableAncestors:he,scrollableAncestorRects:ge,measuringConfiguration:F,measuringScheduled:U,windowRect:le})),[M,$,Z,T,Se,q,Y,S,E,z,Ae,H,he,ge,F,U,le]),Be=(0,s.useMemo)((()=>({activatorEvent:T,activators:Le,active:M,activeNodeRect:Z,ariaDescribedById:{draggable:L},dispatch:v,draggableNodes:S,over:Ae,measureDroppableContainers:H})),[T,Le,M,Z,v,L,S,Ae,H]);return s.createElement(Ee.Provider,{value:b},s.createElement(Yt.Provider,{value:Be},s.createElement(Xt.Provider,{value:Ne},s.createElement(rn.Provider,{value:Re},c)),s.createElement(tn,{disabled:!1===(null==a?void 0:a.restoreFocus)})),s.createElement(Me,{...a,hiddenTextDescribedById:L}))})):null,an=6168==n.j?(0,s.createContext)(null):null,ln="button";function cn(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=fe("Draggable"),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:g}=(0,s.useContext)(Yt),{role:f=ln,roleDescription:p="draggable",tabIndex:m=0}=null!=i?i:{},v=(null==c?void 0:c.id)===t,x=(0,s.useContext)(v?rn:an),[b,y]=de(),[C,w]=de(),k=function(e,t){return(0,s.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e}),{})),[e,t])}(a,t),S=ce(n);ae((()=>(h.set(t,{id:t,key:o,node:b,activatorNode:C,data:S}),()=>{const e=h.get(t);e&&e.key===o&&h.delete(t)})),[h,t]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:(0,s.useMemo)((()=>({role:f,tabIndex:m,"aria-disabled":r,"aria-pressed":!(!v||f!==ln)||void 0,"aria-roledescription":p,"aria-describedby":d.draggable})),[r,f,m,v,p,d.draggable]),isDragging:v,listeners:r?void 0:k,node:b,over:g,setNodeRef:y,setActivatorNodeRef:w,transform:x}}function un(){return(0,s.useContext)(Xt)}const dn={timeout:25};function hn(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const gn=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return n&&t?hn(r,n,t):r},fn=e=>{let{transform:t}=e;return{...t,x:0}};function pn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function mn(e,t){return e.reduce(((e,n,r)=>{const i=t.get(n);return i&&(e[r]=i),e}),Array(e.length))}function vn(e){return null!==e&&e>=0}const xn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=pn(t,r,n),s=t[i],a=o[i];return a&&s?{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}:null},bn={scaleX:1,scaleY:1},yn=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:s}=e;const a=null!=(t=o[n])?t:r;if(!a)return null;if(i===n){const e=o[s];return e?{x:0,y:n<s?e.top+e.height-(a.top+a.height):e.top-a.top,...bn}:null}const l=function(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];if(!r)return 0;if(n<t)return i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0;return o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0}(o,i,n);return i>n&&i<=s?{x:0,y:-a.height-l,...bn}:i<n&&i>=s?{x:0,y:a.height+l,...bn}:{x:0,y:0,...bn}};const Cn="Sortable",wn=s.createContext({activeIndex:-1,containerId:Cn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:xn,disabled:{draggable:!1,droppable:!1}});function kn(e){let{children:t,id:n,items:r,strategy:i=xn,disabled:o=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=un(),h=fe(Cn,n),g=Boolean(null!==l.rect),f=(0,s.useMemo)((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),p=null!=a,m=a?f.indexOf(a.id):-1,v=u?f.indexOf(u.id):-1,x=(0,s.useRef)(f),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(f,x.current),y=-1!==v&&-1===m||b,C=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(o);ae((()=>{b&&p&&d(f)}),[b,f,p,d]),(0,s.useEffect)((()=>{x.current=f}),[f]);const w=(0,s.useMemo)((()=>({activeIndex:m,containerId:h,disabled:C,disableTransforms:y,items:f,overIndex:v,useDragOverlay:g,sortedRects:mn(f,c),strategy:i})),[m,h,C.draggable,C.droppable,y,f,v,c,g,i]);return s.createElement(wn.Provider,{value:w},t)}const Sn=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return pn(n,r,i).indexOf(t)},In=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:s,previousItems:a,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((a===o||i!==s)&&(!!n||s!==i&&t===l))},En={duration:200,easing:"ease"},An="transform",jn=ye.Transition.toString({property:An,duration:0,easing:"linear"}),Mn={roleDescription:"sortable"};function _n(e){let{animateLayoutChanges:t=In,attributes:n,disabled:r,data:i,getNewIndex:o=Sn,id:a,strategy:l,resizeObserverConfig:c,transition:u=En}=e;const{items:d,containerId:h,activeIndex:g,disabled:f,disableTransforms:p,sortedRects:m,overIndex:v,useDragOverlay:x,strategy:b}=(0,s.useContext)(wn),y=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,f),C=d.indexOf(a),w=(0,s.useMemo)((()=>({sortable:{containerId:h,index:C,items:d},...i})),[h,i,C,d]),k=(0,s.useMemo)((()=>d.slice(d.indexOf(a))),[d,a]),{rect:S,node:I,isOver:E,setNodeRef:A}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=fe("Droppable"),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=(0,s.useContext)(Yt),d=(0,s.useRef)({disabled:n}),h=(0,s.useRef)(!1),g=(0,s.useRef)(null),f=(0,s.useRef)(null),{disabled:p,updateMeasurementsFor:m,timeout:v}={...dn,...i},x=ce(null!=m?m:r),b=Nt({callback:(0,s.useCallback)((()=>{h.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{u(Array.isArray(x.current)?x.current:[x.current]),f.current=null}),v)):h.current=!0}),[v]),disabled:p||!a}),y=(0,s.useCallback)(((e,t)=>{b&&(t&&(b.unobserve(t),h.current=!1),e&&b.observe(e))}),[b]),[C,w]=de(y),k=ce(t);return(0,s.useEffect)((()=>{b&&C.current&&(b.disconnect(),h.current=!1,b.observe(C.current))}),[C,b]),(0,s.useEffect)((()=>(l({type:_e.RegisterDroppable,element:{id:r,key:o,disabled:n,node:C,rect:g,data:k}}),()=>l({type:_e.UnregisterDroppable,key:o,id:r}))),[r]),(0,s.useEffect)((()=>{n!==d.current.disabled&&(l({type:_e.SetDroppableDisabled,id:r,key:o,disabled:n}),d.current.disabled=n)}),[r,o,n,l]),{active:a,rect:g,isOver:(null==c?void 0:c.id)===r,node:C,over:c,setNodeRef:w}}({id:a,data:w,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...c}}),{active:j,activatorEvent:M,activeNodeRect:_,attributes:R,setNodeRef:D,listeners:T,isDragging:O,over:P,setActivatorNodeRef:L,transform:N}=cn({id:a,data:w,attributes:{...Mn,...n},disabled:y.draggable}),F=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(A,D),B=Boolean(j),z=B&&!p&&vn(g)&&vn(v),H=!x&&O,U=H&&z?N:null,$=z?null!=U?U:(null!=l?l:b)({rects:m,activeNodeRect:_,activeIndex:g,overIndex:v,index:C}):null,W=vn(g)&&vn(v)?o({id:a,items:d,activeIndex:g,overIndex:v}):C,V=null==j?void 0:j.id,G=(0,s.useRef)({activeId:V,items:d,newIndex:W,containerId:h}),Z=d!==G.current.items,q=t({active:j,containerId:h,isDragging:O,isSorting:B,id:a,index:C,items:d,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:u,wasDragging:null!=G.current.activeId}),K=function(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,a]=(0,s.useState)(null),l=(0,s.useRef)(n);return ae((()=>{if(!t&&n!==l.current&&r.current){const e=i.current;if(e){const t=qe(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&a(n)}}n!==l.current&&(l.current=n)}),[t,n,r,i]),(0,s.useEffect)((()=>{o&&a(null)}),[o]),o}({disabled:!q,index:C,node:I,rect:S});return(0,s.useEffect)((()=>{B&&G.current.newIndex!==W&&(G.current.newIndex=W),h!==G.current.containerId&&(G.current.containerId=h),d!==G.current.items&&(G.current.items=d)}),[B,W,h,d]),(0,s.useEffect)((()=>{if(V===G.current.activeId)return;if(null!=V&&null==G.current.activeId)return void(G.current.activeId=V);const e=setTimeout((()=>{G.current.activeId=V}),50);return()=>clearTimeout(e)}),[V]),{active:j,activeIndex:g,attributes:R,data:w,rect:S,index:C,newIndex:W,items:d,isOver:E,isSorting:B,isDragging:O,listeners:T,node:I,overIndex:v,over:P,setNodeRef:F,setActivatorNodeRef:L,setDroppableNodeRef:A,setDraggableNodeRef:D,transform:null!=K?K:$,transition:function(){if(K||Z&&G.current.newIndex===C)return jn;if(H&&!xe(M)||!u)return;if(B||q)return ye.Transition.toString({...u,property:An});return}()}}function Rn(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Dn=[pt.Down,pt.Right,pt.Up,pt.Left],Tn=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:s,scrollableAncestors:a}}=t;if(Dn.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];o.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const o=i.get(n.id);if(o)switch(e.code){case pt.Down:r.top<o.top&&t.push(n);break;case pt.Up:r.top>o.top&&t.push(n);break;case pt.Left:r.left>o.left&&t.push(n);break;case pt.Right:r.left<o.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Ne(t),o=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=Ne(r),s=i.reduce(((e,t,r)=>e+Oe(n[r],t)),0),a=Number((s/4).toFixed(4));o.push({id:t,data:{droppableContainer:e,value:a}})}}return o.sort(Pe)})({active:n,collisionRect:r,droppableRects:i,droppableContainers:t,pointerCoordinates:null});let c=Fe(l,"id");if(c===(null==s?void 0:s.id)&&l.length>1&&(c=l[1].id),null!=c){const e=o.get(n.id),t=o.get(c),s=t?i.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&s&&e&&t){const n=Je(l).some(((e,t)=>a[t]!==e)),i=On(e,t),o=function(e,t){if(!Rn(e)||!Rn(t))return!1;if(!On(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!i?{x:0,y:0}:{x:o?r.width-s.width:0,y:o?r.height-s.height:0},u={x:s.left,y:s.top};return c.x&&c.y?u:ve(u,c)}}}};function On(e,t){return!(!Rn(e)||!Rn(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}var Pn=n(80324);const Ln=(0,s.createContext)(null),Nn=({children:e,agentDirectoryService:t})=>{const n=(0,s.useMemo)((()=>({agentDirectoryService:t})),[t]);return(0,o.jsx)(Ln.Provider,{value:n,children:e})},Fn=(0,s.createContext)(null),Bn=({children:e,trackingService:t})=>{const n=(0,s.useMemo)((()=>({trackingService:t})),[t]);return(0,o.jsx)(Fn.Provider,{value:n,children:e})};var zn=(e=>(e.Directory="directory",e.AgentProfile="agentProfile",e.AgentSettings="agentSettings",e))(zn||{});const Hn=(0,s.createContext)(null);function Un(e){switch(e.viewType){case U.Gk.Directory:return{type:"directory"};case U.Gk.AgentProfile:return{type:"agentProfile",agentId:e.agentId};case U.Gk.AgentSettings:return{type:"agentSettings",agentMetadata:e.agentMetadata};case U.Gk.AgentChat:return null;default:(0,r.vE)(e)}return null}const $n=({children:e,initialView:t,agentDirectoryService:n})=>{const[i,a]=(0,s.useState)(t?[t]:[{type:zn.Directory}]),l=i[i.length-1],c=i.length>1,u=(0,s.useCallback)((e=>{a((t=>function(e,t){if(e.type!==t.type)return!1;switch(e.type){case"directory":return!0;case"agentProfile":return"agentProfile"===t.type&&e.agentId===t.agentId;case"agentSettings":return"agentSettings"===t.type&&e.agentMetadata.id===t.agentMetadata.id;default:return(0,r.vE)(e)}}(t[t.length-1],e)?t:[...t,e]))}),[]),d=(0,s.useCallback)((()=>{u({type:zn.Directory})}),[u]),h=(0,s.useCallback)((e=>{u({type:zn.AgentProfile,agentId:e})}),[u]),g=(0,s.useCallback)((e=>{u({type:zn.AgentSettings,agentMetadata:e})}),[u]),f=(0,s.useCallback)((()=>{a((e=>e.length>1?e.slice(0,-1):e))}),[]),p=(0,s.useCallback)((()=>{a([t??{type:zn.Directory}])}),[t]);(0,s.useEffect)((()=>n.onDeeplinkRequested((e=>{const t=Un(e);t&&u(t)}))),[n,u]);const m=(0,s.useMemo)((()=>({current:l,canGoBack:c,stack:i,showDirectory:d,showAgentProfile:h,showAgentSettings:g,goBack:f,reset:p})),[l,c,i,d,h,g,f,p]);return(0,o.jsx)(Hn.Provider,{value:m,children:e})},Wn=()=>{const e=(0,s.useContext)(Hn);if(!e)throw new Error("useAgentDirectoryModalNavigation must be used within an AgentDirectoryModalNavigationProvider");return e};var Vn=(e=>(e.ComponentImpression="componentImpression",e.ComponentClicked="componentClicked",e.AgentDirectorySearch="agentDirectory/search",e.AgentDirectoryReorderAgent="agentDirectory/reorderAgent",e))(Vn||{}),Gn=(e=>(e.AgentCard="agentDirectory/agentCard",e.LoadMore="agentDirectory/loadMore",e.AddAgent="agentDirectory/addAgent",e.OpenAgent="agentDirectory/openAgent",e.SignInToAgent="agentDirectory/signInToAgent",e.ViewAgentInMarketplace="agentDirectory/viewAgentInMarketplace",e.ManageAgents="agentDirectory/manageAgents",e.RemoveAgent="agentDirectory/manageAgents/removeAgent",e.ViewAgentSettings="agentDirectory/manageAgents/viewAgentSettings",e))(Gn||{});const Zn=()=>{const e=(0,s.useContext)(Fn);if(!e)throw new Error("useTrackingService must be used within a TrackingServiceProvider");return e};function qn(e,t){return function(e,t,n){const{trackingService:i}=Zn(),[o,a]=(0,s.useState)(!1),l=(0,s.useCallback)(((e,t,n)=>{const s={componentId:e,detail:n};switch(t){case q.Jn.Impression:if(o)return;return null==i||i.trackEvent(Vn.ComponentImpression,s),void a(!0);case q.Jn.Clicked:return void(null==i||i.trackEvent(Vn.ComponentClicked,s));default:return(0,r.vE)(t)}}),[i,o]);return(0,K.B)({componentId:e,detail:t,trackEvent:l,autoTrackedInteractions:n})}(e,t,{clicked:!0})}const Kn={agents:[],searchQuery:"",isLoading:!1,isSearching:!1,error:null,pagination:{hasMore:!0,nextPageToken:void 0,isLoadingMore:!1},hasInitiallyLoaded:!1};function Jn(e,t){switch(t.type){case"SET_QUERY":return{...e,searchQuery:t.query};case"LOAD_START":return{...e,isLoading:!0,error:null,pagination:{...e.pagination,isLoadingMore:!1}};case"LOAD_SUCCESS":return{...e,isLoading:!1,agents:t.agents,error:null,pagination:{hasMore:t.hasMore,nextPageToken:t.nextPageToken,isLoadingMore:!1}};case"LOAD_ERROR":return{...e,isLoading:!1,error:t.error,pagination:{...e.pagination,isLoadingMore:!1}};case"SEARCH_START":return{...e,isSearching:!0,error:null};case"SEARCH_SUCCESS":return{...e,isSearching:!1,agents:t.agents,error:null,pagination:{hasMore:!1,nextPageToken:void 0,isLoadingMore:!1}};case"SEARCH_ERROR":return{...e,isSearching:!1,error:t.error};case"LOAD_MORE_START":return{...e,pagination:{...e.pagination,isLoadingMore:!0}};case"LOAD_MORE_SUCCESS":return{...e,agents:[...e.agents,...t.agents],pagination:{hasMore:t.hasMore,nextPageToken:t.nextPageToken,isLoadingMore:!1},error:null};case"LOAD_MORE_ERROR":return{...e,error:t.error,pagination:{...e.pagination,isLoadingMore:!1}};case"UPDATE_AGENT":{const n=e.agents.findIndex((e=>e.id===t.id));if(n<0)return e;const r=e.agents.slice();return r[n]=t.updated,{...e,agents:r}}case"RESET_PAGINATION":return{...e,pagination:{hasMore:!0,nextPageToken:void 0,isLoadingMore:!1}};case"MARK_INIT_LOADED":return{...e,hasInitiallyLoaded:!0};default:return e}}const Yn=({agentDirectoryService:e,initialLimit:t=$.C,searchDebounceMs:n=500,autoLoad:r=!0})=>{const[i,o]=(0,s.useReducer)(Jn,{...Kn,isLoading:r&&!!e}),{trackEvent:a}=function(e){const{trackingService:t}=Zn();return{trackEvent:n=>null==t?void 0:t.trackEvent(e,n)}}(Vn.AgentDirectorySearch),l=i.searchQuery.trim().length>0,c=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,s.useRef)(null),h=(0,s.useRef)(!0),g=(0,s.useRef)(""),f=(0,s.useMemo)((()=>i.agents.map((t=>({...t,status:t.status??(null!=e&&e.isAgentInstalled(t.id)?U._W.Installed:U._W.Uninstalled)})))),[i.agents,e]),p=(0,s.useCallback)((t=>t.map((t=>({...t,status:null!=e&&e.isAgentInstalled(t.id)?U._W.Installed:U._W.Uninstalled})))),[e]),m=(0,s.useCallback)((async()=>{var n;if(!e)return;null==(n=c.current)||n.abort(),c.current=new AbortController;const{signal:r}=c.current;o({type:"LOAD_START"});try{const n=i.pagination.nextPageToken?{nextPageToken:i.pagination.nextPageToken}:{limit:t},s=await e.listAgents(n);if(r.aborted||!h.current)return;const a=p(s.items),l=!!s.nextPageToken;o({type:"LOAD_SUCCESS",agents:a,hasMore:l,nextPageToken:s.nextPageToken}),i.hasInitiallyLoaded||o({type:"MARK_INIT_LOADED"})}catch(e){if(!r.aborted&&h.current){const t=e instanceof Error?e:new Error("Failed to load agents");console.error("Error loading agents:",t),o({type:"LOAD_ERROR",error:t})}}}),[e,t,i.pagination.nextPageToken,i.hasInitiallyLoaded,p]),v=(0,s.useCallback)((async n=>{var r;if(!e||g.current!==n)return;null==(r=u.current)||r.abort(),u.current=new AbortController;const{signal:i}=u.current;o({type:"SEARCH_START"}),a({query:n});try{const r={limit:t},s=await e.searchAgents(n,r,i);if(i.aborted||!h.current)return;const a=p(s);o({type:"SEARCH_SUCCESS",agents:a})}catch(e){if(!i.aborted&&h.current){const t=e instanceof Error?e:new Error("Failed to search agents");console.error("Error searching agents:",t),o({type:"SEARCH_ERROR",error:t})}}}),[e,t,p,a]),x=(0,s.useMemo)((()=>(0,J.Ds)((e=>{v(e)}),n)),[v,n]),b=(0,s.useCallback)((e=>{var t;const n=e.trim();g.current=n,o({type:"SET_QUERY",query:e}),n?x(n):(o({type:"RESET_PAGINATION"}),null==(t=u.current)||t.abort(),m())}),[x,m]),y=(0,s.useRef)(!1),C=(0,s.useCallback)((async()=>{var n;if(!e||l||y.current||!i.pagination.hasMore)return;y.current=!0,null==(n=d.current)||n.abort(),d.current=new AbortController;const{signal:r}=d.current;o({type:"LOAD_MORE_START"});try{const n=i.pagination.nextPageToken?{nextPageToken:i.pagination.nextPageToken}:{limit:t},s=await e.listAgents(n);if(r.aborted||!h.current)return;const a=p(s.items),l=!!s.nextPageToken;o({type:"LOAD_MORE_SUCCESS",agents:a,hasMore:l,nextPageToken:s.nextPageToken})}catch(e){if(!r.aborted&&h.current){const t=e instanceof Error?e:new Error("Failed to load more agents");console.error("Error loading more agents:",t),o({type:"LOAD_MORE_ERROR",error:t})}}finally{y.current=!1}}),[e,t,l,i.pagination.hasMore,i.pagination.nextPageToken,p]),w=(0,s.useCallback)((async()=>{var e,t,n;o({type:"SET_QUERY",query:""}),o({type:"RESET_PAGINATION"}),null==(e=c.current)||e.abort(),null==(t=u.current)||t.abort(),null==(n=d.current)||n.abort(),await m()}),[m]),k=(0,s.useCallback)((async()=>{l?await v(i.searchQuery.trim()):await m()}),[l,i.searchQuery,v,m]),S=(0,s.useCallback)((()=>{b("")}),[b]),I=(0,s.useCallback)((()=>{o({type:"RESET_PAGINATION"}),k()}),[k]);return(0,s.useEffect)((()=>{if(!e)return;const t=e.onStateUpdated(I);return()=>t()}),[e,I]),(0,s.useEffect)((()=>{r&&!i.hasInitiallyLoaded&&e&&m()}),[r,e,m,i.hasInitiallyLoaded]),(0,s.useEffect)((()=>()=>{var e,t,n;h.current=!1,null==(e=c.current)||e.abort(),null==(t=u.current)||t.abort(),null==(n=d.current)||n.abort()}),[]),(0,s.useMemo)((()=>({agents:f,isSearchActive:l,searchQuery:i.searchQuery,isLoading:i.isLoading,isSearching:i.isSearching,error:i.error,pagination:i.pagination,search:b,loadMore:C,reset:w,refetch:k,clearSearch:S})),[f,l,i.searchQuery,i.isLoading,i.isSearching,i.error,i.pagination,b,C,w,k,S])},Xn=()=>{const e=(0,s.useContext)(Ln);if(!e)throw new Error("useAgentDirectoryService must be used within an AgentDirectoryServiceProvider");return e},Qn={[U.Bm.GrammarlyProofreader]:l.O,[U.Bm.GrammarlyPlagiarismChecker]:c.L,[U.Bm.GrammarlyAiDetector]:u.b,[U.Bm.GrammarlyAiGrader]:d._,[U.Bm.GrammarlyCitationFinder]:h.k,[U.Bm.GrammarlyParaphraser]:g.y,[U.Bm.GrammarlyReaderReactions]:f.Q,[U.Bm.GrammarlyHumanizer]:p.i,[U.Bm.GrammarlyExpertReview]:m.F,[U.Bm.GrammarlyReaderTranslate]:v.y,[U.Bm.GrammarlyReaderComprehension]:x.i,[U.Bm.SuperhumanGo]:b.j},er=(0,s.forwardRef)((({agent:e,size:t,className:n,goBrandingEnabled:r=!1,...i},s)=>{let a;if((0,W.xt)(e.id)){a=((e,t)=>t&&e===U.Bm.SuperhumanGo?y.O:Qn[e])((0,U.Oo)(e.id),r)}return(0,o.jsx)(J.J$,{agent:e,size:t,className:n,iconComponent:a,ref:s,...i})})),tr=e=>{const{agentDirectoryService:t}=Xn(),[n,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(r(t.isAgentInstalled(e)),t.onStateUpdated((()=>{r(t.isAgentInstalled(e))})))),[e,t]),{isInstalled:n}},nr="_agentIcon_1qpzf_1",rr="_clickableCard_1qpzf_6",ir="_addedMarker_1qpzf_27",or=({agent:e,goBrandingEnabled:t})=>{const{trackClicked:n}=qn(Gn.AgentCard,{agentId:e.id}),r=Wn(),{isInstalled:i}=tr(e.id),a=(0,s.useCallback)((()=>{e.disabled||(n(),r.showAgentProfile(e.id))}),[r,e.id,n,e.disabled]),l=e.status===U._W.Installed?"Open agent":"View agent details",c=(0,o.jsx)("div",{role:"button",tabIndex:0,onClick:a,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a())},"aria-disabled":e.disabled,className:rr,"aria-label":`${l} ${e.name}`,children:(0,o.jsxs)(C.k,{direction:"column",paddingLeft:4,paddingRight:4,paddingBottom:3,paddingTop:3,gap:2,borderRadius:3,borderColor:"base-subdued",children:[(0,o.jsxs)(C.k,{direction:"row",gap:3,children:[(0,o.jsx)(er,{agent:e,size:"xlarge",className:nr,goBrandingEnabled:t}),(0,o.jsxs)(C.k,{direction:"column",flex:"1",children:[(0,o.jsxs)(C.k,{direction:"row",flex:"1",gap:2,justify:"space-between",children:[(0,o.jsx)(w.x,{as:"small",variant:"text-small",weight:"semibold",color:"base-default",children:e.name}),i&&(0,o.jsxs)(k.u,{children:[(0,o.jsx)(k.aJ,{asChild:!0,children:(0,o.jsx)("span",{className:ir,children:(0,o.jsx)(S.J,{icon:I.L,accessibilityLabel:"Active agent",size:"small"})})}),(0,o.jsx)(k._v,{root:null,children:"This agent is active"})]})]}),e.creator&&(0,o.jsxs)(w.x,{as:"p",variant:"text-small",color:"base-subdued",children:["By ",e.creator]})]})]}),(0,o.jsx)(w.x,{as:"p",variant:"text-small",color:"base-default",children:e.shortDescription})]})});return e.disabled?(0,o.jsxs)(k.u,{placement:"bottom-start",children:[(0,o.jsx)(k.aJ,{asChild:!0,children:c}),(0,o.jsx)(k._v,{root:null,children:"This agent has been disabled for your organization"})]}):c},sr="_agentDirectory_w3x3n_1",ar="_agentsLoadingEmpty_w3x3n_5",lr="_scrollableContainer_w3x3n_11",cr="_agentSearchFieldContainer_w3x3n_17",ur="_searchField_w3x3n_25",dr=({onOpenAgent:e,goBrandingEnabled:t=!1})=>{const{agentDirectoryService:n}=Xn(),{agents:r,isLoading:i,isSearching:a,error:l,search:c,pagination:u,loadMore:d}=Yn({agentDirectoryService:n,autoLoad:!0}),{trackClicked:h}=qn(Gn.LoadMore,{}),g=(0,s.useCallback)((e=>{c(e)}),[c]),f=(0,s.useCallback)((()=>{h(),d()}),[d,h]),p=i||a,m=!p&&u.hasMore&&r.length>0;return(0,o.jsxs)(C.k,{className:sr,direction:"column",gap:4,paddingBottom:2,children:[(0,o.jsx)("div",{className:cr,children:(0,o.jsx)(E.U,{className:ur,label:"Search agents",placeholder:"Search agents",onChange:g,size:"large"})}),l&&(0,o.jsxs)("div",{className:ar,children:["Error loading agents: ",l.message]}),p?(0,o.jsx)("div",{className:ar,children:"Loading agents..."}):0===r.length?(0,o.jsx)("div",{className:ar,children:"No agents available"}):(0,o.jsxs)(C.k,{className:lr,direction:"column",gap:2,children:[r.map((n=>(0,o.jsx)(or,{agent:n,onOpenAgent:e,goBrandingEnabled:t},n.id))),m&&(0,o.jsx)(A.z,{variant:"secondary",size:"large",onClick:f,disabled:u.isLoadingMore,children:u.isLoadingMore?"Loading more...":"Load more agents"})]})]})},hr=(e,t)=>{const{agentDirectoryService:n}=Xn();return(0,s.useMemo)((()=>n.getConfiguredUrl(e,t)),[n,e,t])},gr=(e,t)=>{const[n,r]=(0,s.useState)(),[i,o]=(0,s.useState)(),[a,l]=(0,s.useState)(),[c,u]=(0,s.useState)(!0),[d,h]=(0,s.useState)(),{agentDirectoryService:g}=Xn();return(0,s.useEffect)((()=>{(async()=>{u(!0),h(void 0);try{const n=await g.getAgentMetadata(e,{includeInstallationContext:(null==t?void 0:t.withInstallationContext)??!1,includeExternalPackMetadata:(null==t?void 0:t.withExternalPackMetadata)??!1});r(null==n?void 0:n.metadata),o(null==n?void 0:n.externalPackMetadata),l(null==n?void 0:n.installationContext)}catch(e){h(e instanceof Error?e.message:"Failed to fetch agent metadata")}finally{u(!1)}})()}),[e,g,null==t?void 0:t.withExternalPackMetadata,null==t?void 0:t.withInstallationContext]),{agentMetadata:n,packMetadata:i,installationContext:a,isLoading:c,error:d}};var fr=(e=>(e.SYNC_STATUS="sync-status",e.SETTINGS="settings",e))(fr||{});const pr=async({agentId:e,agentDirectoryService:t,ingestionId:n,ingestionTab:r})=>{if(!(0,U.kq)(e)||typeof self>"u")return;const i=Number((0,U.Hr)(e)),o=t.getConfiguredUrl(U.uK.AGENT_SETUP_URL,`${i}`),s=[];if("sync-status"===(n&&s.push(`ingestionId=${n}`),r))s.push(`ingestionTab=${r}`);const a=s.length>0?`${o}?${s.join("&")}`:o,l=self.open(a,"_blank","noopener,noreferrer");l&&(l.opener=null)},mr=()=>{const{agentDirectoryService:e}=Xn(),[t,n]=(0,s.useState)(!1),[r,i]=(0,s.useState)(null);return{createAgentInstance:(0,s.useCallback)((async(t,r)=>{n(!0),i(null);let o=null;try{const i={packId:(0,U.Oo)(t.agentId),originalConnectionId:t.originalConnectionId,packConfigurationId:t.packConfigurationId,...t.ingestionParameters&&{ingestionParams:{ingestionParameters:t.ingestionParameters,timezone:null}}};o=await e.createAgentInstance(i),o&&r&&r(o)}catch(e){i(e instanceof Error?e.message:"An error occurred"),console.error("Failed to create agent instance",e)}finally{n(!1)}return o}),[e]),isInstalling:t,error:r}},vr="Open agent",xr="Sign in",br=({agentMetadata:e,canOneClickInstall:t,installationContext:n,onOpenAgent:r,shouldUseNativeInstallFlow:i})=>{const{createAgentInstance:a,isInstalling:l,error:c}=mr(),{showAgentSettings:u}=Wn(),{agentDirectoryService:d}=Xn(),{isInstalled:h}=tr(e.id),g={agentId:e.id},{trackClicked:f}=qn(Gn.OpenAgent,g),{trackClicked:p}=qn(Gn.SignInToAgent,g),{trackClicked:m}=qn(Gn.AddAgent,g),v=((e,t)=>e||t?vr:xr)(h,t),x=(0,s.useCallback)((()=>{f(),null==r||r(e.id)}),[f,r,e.id]),b=(0,s.useCallback)((()=>{var t,i,o;m(),a({agentId:e.id,packConfigurationId:null==(o=null==(i=null==(t=null==n?void 0:n.packInstallability)?void 0:t.mostPermissiveConfigurationAndConnections)?void 0:i.configurationForAgentCreation)?void 0:o.configurationId,ingestionParameters:null!=n&&n.defaultIngestionParameters?{...null==n?void 0:n.defaultIngestionParameters}:void 0},(()=>{null==r||r(e.id)}))}),[m,a,e.id,n,r]),y=(0,s.useCallback)((()=>{p(),i?u(e):pr({agentId:e.id,agentDirectoryService:d})}),[p,i,u,e,d]),k=(0,s.useCallback)((async()=>{h?x():t?b():y()}),[h,t,x,b,y]),S=void 0===t||l,I=S,E="agent-action-error";return(0,o.jsxs)(C.k,{justify:"center",direction:"column",gap:2,children:[c&&(0,o.jsx)(w.x,{as:"p",variant:"text-small",color:"critical-default",id:E,role:"alert","aria-live":"polite",children:c}),(0,o.jsx)(A.z,{id:"agent-action-button",variant:"primary",size:"large",text:v,style:{width:"100%"},onClick:k,isLoading:S,isDisabled:I,"aria-label":`${v} ${e.name} agent`,"aria-describedby":c?E:void 0,"aria-busy":S})]})},yr="_imageContainer_zy259_1",Cr="_fallbackImageContainer_zy259_16",wr="_errorIcon_zy259_27",kr=({imageUrl:e,agentName:t,shortDescription:n})=>{const r=()=>(0,o.jsx)("div",{className:Cr,children:(0,o.jsx)(S.J,{size:"large",icon:M.E,className:wr,accessibilityLabel:"Image not available"})});return(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[e?(0,o.jsx)(J.bC,{src:e,alt:t,className:yr,loadingState:()=>(0,o.jsx)(j.g,{accessibilityLabel:"Loading agent image",children:(0,o.jsx)(j.g.Rectangle,{height:232,width:328})}),errorState:r}):r(),(0,o.jsx)(w.x,{as:"span",variant:"text-small",color:"base-subdued",align:"center",children:n})]})},Sr=e=>!(!/^[A-Z]/.test(e)||!/[a-z]/.test(e))&&/^([A-Z]+[a-z]+|[A-Z][a-z]+)([A-Z][a-z]+|[A-Z]{2,})*$/.test(e),Ir=e=>(e.match(/[A-Z]+(?=[A-Z][a-z]|$)|[A-Z][a-z]+/g)||[]).map(((e,t)=>/^[A-Z]+$/.test(e)?e:0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase())).join(" "),Er=e=>Sr(e)?Ir(e):e.toLowerCase().replace(/^./,(e=>e.toUpperCase())),Ar="_pill_1u9r2_1",jr=({name:e,description:t,isHidden:n})=>(0,o.jsxs)(k.u,{children:[(0,o.jsx)(k.aJ,{asChild:!0,children:(0,o.jsx)(C.k,{className:Ar,"data-pill-item":!0,"aria-hidden":n,"aria-label":t?`${e}: ${t}`:void 0,children:(0,o.jsx)(C.k,{direction:"row",gap:1,align:"center",children:(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",children:e})})})}),t&&(0,o.jsx)(k._v,{root:null,children:(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",children:t})})]}),Mr=({title:e,pillItems:t,maxLines:n,pillHeight:r,gap:i})=>{const a=(0,s.useRef)(null),[l,c]=(0,s.useState)(void 0),u=(0,s.useMemo)((()=>`expandable-pills-${e.toLowerCase().replace(/\s+/g,"-")}`),[e]),{isExpanded:d,containerRef:h,hiddenCount:g,maxHeight:f,toggleExpanded:p,visibleItemsCount:m,shouldShowInlineButton:v,shouldShowNewlineButton:x}=(({pillItems:e,maxLines:t=3,pillHeight:n=28,gap:r=4,buttonWidth:i=75,measuredButtonWidth:o})=>{const a=e.length,[l,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(a),[h,g]=(0,s.useState)("newline"),[f,p]=(0,s.useState)(0),[m,v]=(0,s.useState)(0),x=(0,s.useRef)(null),b=o??i;(0,s.useEffect)((()=>{const e=x.current;if(!e||0===a)return;const i=(e,t,n)=>{let i=0,o=1,s=0;const a=[];for(let l=0;l<e.length;l++){const c=e[l].offsetWidth+r;if(i+c<=t)i+=c,s++;else{if(n&&o>=n)break;a.push(s-a.reduce(((e,t)=>e+t),0)),o++,i=c,s++}}return(!n||o<=n)&&a.push(s-a.reduce(((e,t)=>e+t),0)),{totalFittingItems:s,itemsPerLine:a,linesUsed:o}},o=(e,t,n,i)=>{let o=0;for(let t=n-(i[i.length-1]||0);t<n;t++)e[t]&&(o+=e[t].offsetWidth+r);return t-o},s=()=>{const s=e.querySelectorAll("[data-pill-item]");if(0===s.length)return;const u=e.offsetWidth;if(0===u)return;let h=!1;const f=e.scrollHeight,{totalFittingItems:m,itemsPerLine:x,linesUsed:y}=i(s,u,t);let C=Math.max(0,t*(n+r)-r);if(m>0&&s[m-1]){const t=e.getBoundingClientRect(),n=s[m-1].getBoundingClientRect().bottom-t.top;n>0&&n<2*f&&(C=Math.ceil(n))}if(l&&m>=a&&c(!1),l&&m<a){const{totalFittingItems:e,itemsPerLine:t}=i(s,u);h=o(s,u,e,t)>=b,d(e)}else y===t&&m<a&&(h=o(s,u,m,x)>=b),d(m);p(C),v(Math.max(f,C)),g(h?"inline":"newline")};if(s(),typeof ResizeObserver<"u"){const t=new ResizeObserver(s);return t.observe(e),()=>{t.disconnect()}}}),[e,t,r,b,l,a,n]);const y=Math.max(0,a-u),C=y>0||l,w=l?m:f,k=(0,s.useCallback)((()=>{c((e=>!e))}),[]);return{isExpanded:l,containerRef:x,hiddenCount:y,shouldShowButton:C,maxHeight:w,toggleExpanded:k,buttonPlacement:h,visibleItemsCount:u,shouldShowInlineButton:C&&"inline"===h,shouldShowNewlineButton:C&&"newline"===h}})({pillItems:t,maxLines:n,pillHeight:r,gap:i,measuredButtonWidth:l});(0,s.useEffect)((()=>{if(a.current){const e=a.current.offsetWidth;e>0&&e!==l&&c(e)}}),[g,d,l]);const b=(0,s.useMemo)((()=>(0,o.jsx)(w.x,{ref:a,as:"span",variant:"text-xsmall",onClick:p,"aria-expanded":d,"aria-controls":u,"aria-label":d?"Show less":`Show ${g} more`,role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),p())},style:{cursor:"pointer",paddingLeft:v?"6px":void 0},children:d?"Show less":`+ ${g} more`})),[p,d,u,g,v]),y=(0,s.useMemo)((()=>{const e=d?t.length:m,n=t.slice(0,e),r=t.slice(e);return(0,o.jsxs)(o.Fragment,{children:[n.map((e=>(0,o.jsx)(jr,{name:e.name,description:e.description},e.id))),v&&b,r.map(((t,n)=>{const r=!d&&e+n>=m;return(0,o.jsx)(jr,{name:t.name,description:t.description,isHidden:r},t.id)}))]})}),[t,d,m,v,b]);return 0===t.length?null:(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"semibold",children:e}),(0,o.jsxs)(C.k,{direction:"column",gap:1,children:[(0,o.jsx)("div",{id:u,ref:h,style:{maxHeight:f>0?`${f}px`:void 0,overflow:"hidden",transition:"max-height 0.3s ease-in-out"},children:(0,o.jsx)(C.k,{direction:"row",gap:1,wrap:!0,align:"center",children:y})}),x&&(0,o.jsx)(C.k,{direction:"row",children:b})]})]})},_r=({packMetadata:e})=>{const t=(0,s.useMemo)((()=>((null==e?void 0:e.syncTables)||[]).map(((e,t)=>{const n=Er(e.name),r=`datasource:${e.name}:${t}`;return{name:n,description:e.description,id:r}}))),[e]);return 0===t.length?null:(0,o.jsx)(Mr,{title:"Data sources",pillItems:t})},Rr="_agentIcon_1msim_1",Dr=({agent:e,goBrandingEnabled:t})=>{const{scheme:n}=(0,_.t)(),r="dark"===n,i=(e=>e===V.e.GRAMMARLY||e===V.e.CODA||e===V.e.SUPERHUMAN)(e.creator),s=t?V.e.SUPERHUMAN:V.e.GRAMMARLY,a=i?`${s} agent: ${s} built this agent to meet our high standards of quality and policy compliance.`:"Verified agent: This agent was built by a trusted developer. We made sure it complies with our policies and applied abuse-prevention checks.";return(0,o.jsxs)(C.k,{direction:"row",gap:3,align:"center",children:[(0,o.jsx)(C.k,{width:40,height:40,padding:3,borderRadius:3,style:{border:"1px solid var(--color-border-base-subdued)"},children:(0,o.jsx)(er,{agent:e,size:"xxlarge",className:Rr,goBrandingEnabled:t})}),(0,o.jsxs)(C.k,{direction:"column",align:"start",children:[(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:1,children:[(0,o.jsx)(R.X,{as:"h1",variant:"heading-xsmall",children:e.name}),e.certifiedAgent&&(0,o.jsxs)(k.u,{placement:"top",children:[(0,o.jsx)(k.aJ,{asChild:!0,children:(0,o.jsx)("span",{style:{display:"inline-flex"},children:(0,o.jsx)(S.J,{icon:D.j,accessibilityLabel:"Certified Agent",size:"small",style:{color:r?"var(--blue-30)":"var(--blue-60)",backgroundColor:"var(--color-background-base-default)"}})})}),(0,o.jsx)(k._v,{style:{whiteSpace:"pre-wrap"},root:null,children:a})]})]}),(0,o.jsxs)(w.x,{as:"span",variant:"text-small",color:"base-subdued",children:["By ",e.creator]})]})]})},Tr=()=>{const e=hr(U.uK.AGENT_SECURITY_URL);return(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"How this agent handles data"}),(0,o.jsxs)(w.x,{as:"span",variant:"text-small",children:["When you're interacting with this agent, it can see info from your apps and tabs to give you personalized help."," ",(0,o.jsx)(T.r,{href:e,target:"_blank",rel:"noopener noreferrer",children:"Learn more"})]})]})},Or=({packMetadata:e})=>{const t=(0,s.useMemo)((()=>[...(null==e?void 0:e.skills)||[],...(null==e?void 0:e.formulas)||[]].map(((e,t)=>{const n="displayName"in e?e.displayName:e.name,r=Er(n),i=`${"displayName"in e?"skill":"formula"}:${"displayName"in e?e.displayName:e.name}:${t}`;return{name:r,description:e.description,id:i}}))),[e]);return 0===t.length?null:(0,o.jsx)(Mr,{title:"Skills",pillItems:t})},Pr=({domains:e})=>{const t=e.length;return(0,o.jsx)(C.k,{direction:"column",children:t>0?(0,o.jsxs)(C.k,{direction:"column",gap:4,children:[(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"Restricted network requests"}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:"Superhuman ensures agents only connect to their specific domains."})]}),(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsxs)(w.x,{as:"span",variant:"text-small",weight:"bold",children:["This agent connects to ",t," domain",t>1?"s":""]}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:e.map(((e,n)=>(0,o.jsxs)("span",{children:[e,n<t-1&&(0,o.jsx)("span",{children:""})]},e)))})]})]}):(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"No connection to external networks"}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:"This agent doesn't connect to any other domains."})]})})},Lr=({agentMetadata:e,externalPackMetadata:t})=>{const n=(null==t?void 0:t.networkDomains)??[];return(0,o.jsxs)(C.k,{direction:"column",gap:4,children:[(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"Privacy and security"}),(0,o.jsxs)(C.k,{direction:"column",children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:"Agents follow strict security protocols. They only connect to declared domains, never access your login details, and run in isolated environments. Permissions are granular, and you control who can view and act on data. Verified agents are human-reviewed for quality and policy compliance."}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:(null==e?void 0:e.privacyPolicyUrl)&&(0,o.jsx)(T.r,{href:e.privacyPolicyUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"privacy-policy-link",children:"See developer's privacy policy"})}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:(null==e?void 0:e.termsOfServiceUrl)&&(0,o.jsx)(T.r,{href:e.termsOfServiceUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"terms-of-service-link",children:"See developer's terms of service"})})]})]}),(0,o.jsx)(Pr,{domains:n})]})},Nr=({agentMetadata:e})=>{const t=e.releaseId,n=e.lastReleasedAt;if(!n||!t)return null;const r=Y.wj.create(n),i=Y.wj.fullDate(r);return(0,o.jsx)(C.k,{direction:"column",gap:4,children:(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"Updates"}),(0,o.jsxs)(w.x,{as:"span",variant:"text-small",children:["Last updated ",i," (Release ",t,")"]})]})})},Fr="_contentContainer_134qn_1",Br="_descriptionContainer_134qn_12",zr="_actionButtonContainer_134qn_16",Hr=({agentId:e,onOpenAgent:t,shouldUseNativeInstallFlow:n,goBrandingEnabled:r})=>{var i,s;const{agentMetadata:a,packMetadata:l,installationContext:c,isLoading:u,error:d}=gr(e,{withExternalPackMetadata:!0,withInstallationContext:!0}),h=null!=a&&a.id?(0,U.Oo)(a.id):void 0,g=hr(U.uK.AGENT_STORE_URL,h?`${h}`:void 0),f=hr(U.uK.REPORT_AN_ISSUE,h?`?agentID=${h}`:void 0),p=(null==c?void 0:c.packInstallability.canInstallPackAndConnectAccountForAgentInstance)&&(null==c?void 0:c.canSkipManualSetup)&&(null==c?void 0:c.hasNoAuth);return u?(0,o.jsx)(j.g,{accessibilityLabel:"Loading agent profile",style:{height:"100%"},children:(0,o.jsxs)(C.k,{direction:"column",gap:2,justify:"space-between",height:"100%",children:[(0,o.jsxs)(C.k,{direction:"column",gap:3,children:[(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(j.g.Rectangle,{height:64,width:"100%"}),(0,o.jsx)(j.g.Rectangle,{height:36,width:"100%"})]}),(0,o.jsx)(j.g.Rectangle,{height:150,width:"80%"})]}),(0,o.jsx)(C.k,{justify:"center",paddingTop:3,children:(0,o.jsx)(j.g.Rectangle,{height:40,width:"100%"})})]})}):a&&l&&!d?(0,o.jsxs)(C.k,{direction:"column",height:"100%",children:[(0,o.jsx)(Dr,{agent:a,goBrandingEnabled:r}),(0,o.jsx)(O.x,{className:Fr,children:(0,o.jsxs)(C.k,{direction:"column",gap:4,children:[(0,o.jsxs)(C.k,{direction:"column",gap:4,children:[!a.certifiedAgent&&(0,o.jsx)(J.Tv,{title:"This agent is not verified",content:"This agent may put your devices and data at risk. We have not reviewed the agent or its developer. Make sure you trust the developer before you use it."}),(0,o.jsx)(kr,{imageUrl:null==(s=null==(i=a.agentImages)?void 0:i[0])?void 0:s.imageUrl,agentName:a.name,shortDescription:a.shortDescription}),(0,o.jsx)("div",{className:Br,children:(0,o.jsx)(w.x,{as:"pre",variant:"text-small",children:a.description})})]}),(0,o.jsx)(Tr,{}),(0,o.jsx)(Or,{packMetadata:l}),(0,o.jsx)(_r,{packMetadata:l}),(0,o.jsx)(Lr,{agentMetadata:a,externalPackMetadata:l}),(0,o.jsx)(Nr,{agentMetadata:a}),(0,o.jsxs)(C.k,{direction:"column",children:[h&&(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:(0,o.jsx)(T.r,{href:g,target:"_blank",rel:"noopener noreferrer",children:"See full security details"})}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:(0,o.jsx)(T.r,{href:f,target:"_blank",rel:"noopener noreferrer",children:"Report an issue"})}),a.supportEmail&&(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:(0,o.jsx)(T.r,{href:`mailto:${a.supportEmail}`,target:"_blank",rel:"noopener noreferrer",children:"Contact developer"})})]})]})}),(0,o.jsx)(O.x,{className:zr,children:(0,o.jsx)(br,{agentMetadata:a,canOneClickInstall:p,installationContext:c,onOpenAgent:t,shouldUseNativeInstallFlow:n})})]}):(0,o.jsx)(C.k,{direction:"column",justify:"center",align:"center",height:"100%",gap:2,children:(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:d??"Unable to load agent information"})})};function Ur(e){const{agentMetadata:t,isLoading:n,error:r}=gr(e),i=null==t?void 0:t.externalMetadataUrl,{packMetadata:o,isLoading:a,error:l}=(e=>{const{agentDirectoryService:t}=Xn(),[n,r]=(0,s.useState)(),[i,o]=(0,s.useState)(!1),[a,l]=(0,s.useState)();return(0,s.useEffect)((()=>{e&&(async()=>{o(!0);try{const n=await t.getExternalPackMetadata(e);r(n)}catch(e){l(e instanceof Error?e.message:"Failed to fetch pack metadata")}finally{o(!1)}})()}),[e,t]),{packMetadata:n,isLoading:i,error:a}})(i);return{agentMetadata:t,packMetadata:o,isLoading:n||!!i&&a,error:{agent:r,pack:l}}}const $r=({agentId:e,connections:t,agentInstance:n,selectedConnectionId:r})=>{const{createAgentInstance:i,isInstalling:s,error:a}=mr(),{isInstalled:l}=tr(e),c=t?Object.entries(t):[],u=c.length>0,d=c.length>1,h=!!n,{buttonText:g,isButtonDisabled:f}=function({isInstalled:e,hasConnections:t,hasExistingInstance:n,hasMultipleConnections:r,selectedConnectionId:i,connections:o}){let s="Sync Data",a=!1;if(e)s="Open";else if(t)if(n)if(s="Update",r){const e=Object.values(o||{}).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0],t=null==e?void 0:e.connection.id;a=!(i&&i!==t)}else a=!0;else s="Sync Data",a=!i;else s="Sync Data",a=!0;return{buttonText:s,isButtonDisabled:a}}({isInstalled:l,hasConnections:u,hasExistingInstance:h,hasMultipleConnections:d,selectedConnectionId:r,connections:t});return(0,o.jsxs)(C.k,{direction:"column",gap:2,style:{width:"100%"},children:[a&&(0,o.jsx)(w.x,{as:"p",variant:"text-small",color:"critical-default",children:a}),(0,o.jsx)(A.z,{variant:"primary",size:"large",isLoading:s,text:g,style:{width:"100%"},onClick:()=>{l||i({agentId:e,originalConnectionId:r||void 0},(()=>{}))},isDisabled:f})]})};const Wr="_container_1sik4_1",Vr="_primaryAccountButton_1sik4_7",Gr="_signInAnotherButton_1sik4_14",Zr="_noAccountContainer_1sik4_18",qr=({connections:e,isLoading:t=!1,agentInstance:n,onConnectionSelect:r})=>{var i;const a=e?Object.entries(e):[],l=a.length>0,c=a.length>1,u=(0,s.useCallback)((()=>{if(!e)return null;const t=Object.values(e).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0];return(null==t?void 0:t.connection.id)||null}),[e]),[d,h]=(0,s.useState)(u());!function(e,t){const n=(0,s.useRef)(!1);(0,s.useEffect)((()=>{!t()||n.current||(n.current=!0,e())}),[e,t])}((0,s.useCallback)((()=>{const e=u();e&&(h(e),null==r||r(e))}),[u,r]),(0,s.useCallback)((()=>l),[l]));let g=null;l&&(g=d&&e&&e[d]?e[d]:Object.values(e||{}).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0]||null);const f=null==g?void 0:g.connection,p=(null==f?void 0:f.name)||"Unknown Account",m=!!n;return t?(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,o.jsx)(C.k,{direction:"column",gap:2,className:Wr,children:(0,o.jsx)(w.x,{as:"span",variant:"text-small",color:"base-subdued",children:"Loading account information..."})})]}):l?(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[c&&(0,o.jsx)(P.P,{label:m?"Switch to another connection":"Select a connection",value:d||"",onChange:e=>(e=>{h(e),null==r||r(e)})(e),children:a.map((([e,t])=>{const n=t.connection.name||"Unknown Connection";return(0,o.jsx)(P.P.Option,{value:e,children:n},e)}))}),(0,o.jsxs)(C.k,{direction:"column",gap:2,className:Wr,children:[(0,o.jsx)(C.k,{direction:"row",justify:"space-between",children:(0,o.jsxs)(C.k,{direction:"row",gap:2,align:"center",children:[(0,o.jsx)(S.J,{icon:L.g,accessibilityLabel:"Account avatar",size:"xlarge"}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:p})]})}),m&&(!c||d===(null==(i=a[0])?void 0:i[0]))&&(0,o.jsx)(A.z,{variant:"primary",size:"small",className:Vr,children:"Primary account"})]}),l&&(0,o.jsx)(A.z,{variant:"secondary",size:"small",className:Gr,children:"Sign into another account"})]})]}):(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,o.jsx)(C.k,{direction:"column",gap:2,className:Wr,children:(0,o.jsxs)(C.k,{direction:"column",gap:2,align:"start",className:Zr,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",color:"base-subdued",children:"No account connected"}),(0,o.jsx)(A.z,{variant:"secondary",size:"small",children:"Sign In"})]})})]})},Kr=({packMetadata:e})=>{const t=(0,s.useMemo)((()=>((null==e?void 0:e.syncTables)||[]).map((e=>{let t=e.name;return Sr(t)&&(t=Ir(t)),{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:t}}))),[e]);return 0===t.length?null:(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-small",weight:"bold",children:"Info sources"}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",color:"base-subdued",children:"This connection will let you use info from the selected sources. It updates automatically."}),(0,o.jsx)(C.k,{direction:"column",gap:2,children:t.map((e=>(0,o.jsx)(N.XZ,{isSelected:!0,isDisabled:!0,"aria-label":e.name,children:(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:e.name})},e.id)))})]})},Jr=({agentMetadata:e,agentInstance:t})=>{const{agentDirectoryService:n}=Xn(),{packMetadata:r}=Ur(e.id),{connections:i,isLoading:a,error:l}=(({packId:e,ignoreVersionsAfterLive:t,agentDirectoryService:n})=>{const[r,i]=(0,s.useState)(null),[o,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),u=(0,s.useCallback)((async()=>{if(n&&e){a(!0),c(null);try{const r={packId:e,...void 0!==t&&{ignoreVersionsAfterLive:t}},o=await n.getConnectionsInfoForUser(r);i(o)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch agent connections");c(t),console.error("Error fetching agent connections:",t)}finally{a(!1)}}}),[n,e,t]),d=(0,s.useCallback)((async()=>{await u()}),[u]);return(0,s.useEffect)((()=>{u()}),[u]),{connections:r,isLoading:o,error:l,refetch:d}})({packId:(0,U.Hr)(e.id),agentDirectoryService:n}),[c,u]=(0,s.useState)(null),d=(0,s.useCallback)((e=>{u(e)}),[]),h=!i||0===Object.keys(i).length;return(0,o.jsxs)(C.k,{direction:"column",justify:"space-between",height:"100%",children:[(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(R.X,{as:"h2",variant:"heading-medium",children:"Settings"}),(0,o.jsxs)(C.k,{direction:"column",gap:4,children:[!a&&h&&(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(R.X,{as:"h3",variant:"heading-small",children:"Make a connection"}),(0,o.jsxs)(w.x,{as:"span",variant:"text-small",color:"base-subdued",children:["Connect your info to Go so you can use it in your chats. You'll get smarter, more relevant responses."," ",(0,o.jsx)(T.r,{href:"https://www.grammarly.com/security",children:"See how we keep your data safe"})]})]}),(0,o.jsx)(qr,{connections:i,isLoading:a,agentInstance:t,onConnectionSelect:d}),(0,o.jsx)(C.k,{paddingTop:4,children:(0,o.jsx)(Kr,{packMetadata:r})}),a&&(0,o.jsx)(j.g,{accessibilityLabel:"Loading settings",children:(0,o.jsx)(j.g.Rectangle,{height:"100px"})})]}),l&&(0,o.jsxs)(w.x,{as:"span",variant:"text-small",color:"base-subdued",children:["Error loading connections: ",l.message]})]}),(0,o.jsx)(C.k,{align:"center",justify:"center",direction:"column",gap:2,paddingTop:3,paddingBottom:3,children:(0,o.jsx)($r,{agentId:e.id,connections:i,agentInstance:t,selectedConnectionId:c})})]})},Yr="View in Agent Store",Xr="Configure in new tab",Qr=({currentView:e,canGoBack:t,onClose:n,onBack:i})=>{const{agentDirectoryService:a}=Xn(),l=ei(e),{trackClicked:c}=qn(Gn.ViewAgentInMarketplace,{agentId:l||""}),u=(0,s.useCallback)((async()=>{switch(e.type){case zn.AgentSettings:await pr({agentId:e.agentMetadata.id,agentDirectoryService:a}),c();break;case zn.AgentProfile:await(({agentId:e,agentDirectoryService:t})=>{if(!(0,U.kq)(e)||typeof self>"u")return;const n=Number((0,U.Hr)(e)),r=t.getConfiguredUrl(U.uK.AGENT_STORE_URL,`${n}`),i=self.open(r,"_blank","noopener,noreferrer");i&&(i.opener=null)})({agentId:e.agentId,agentDirectoryService:a}),c()}}),[e,a,c]),d=(()=>{switch(e.type){case zn.Directory:return"Add agents";case zn.AgentProfile:return"";case zn.AgentSettings:return e.agentMetadata.name;default:return(0,r.vE)(e)}})();return(0,o.jsxs)(C.k,{direction:"row",justify:"space-between",children:[t?(0,o.jsx)(F.h,{size:"small",variant:"tertiary",accessibilityLabel:"Back",icon:B.n,onClick:i}):(0,o.jsx)(F.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",icon:J.Tw,onClick:n}),(0,o.jsx)(C.k,{justify:"center",flex:"1",align:"center",children:(0,o.jsx)(R.X,{as:"h1",variant:"heading-xxsmall",children:d})}),[zn.AgentSettings,zn.AgentProfile].includes(e.type)&&(0,o.jsx)(F.h,{size:"small",variant:"tertiary",accessibilityLabel:e.type===zn.AgentProfile?Yr:Xr,icon:z.n,onClick:u})]})},ei=e=>{switch(e.type){case zn.AgentProfile:return e.agentId;case zn.AgentSettings:return e.agentMetadata.id;default:return}},ti=({closeModal:e,shouldUseNativeInstallFlow:t,onOpenAgent:n,isFirstPartyPackAgentsEnabled:i,selectedAgentId:a,coordinatorAgentId:l,goBrandingEnabled:c})=>{const u=Wn(),d=(0,s.useCallback)((e=>{switch(e.type){case zn.Directory:return(0,o.jsx)(dr,{onOpenAgent:n,goBrandingEnabled:c});case zn.AgentProfile:return(0,o.jsx)(Hr,{agentId:e.agentId,onOpenAgent:n,shouldUseNativeInstallFlow:t,goBrandingEnabled:c});case zn.AgentSettings:return(0,o.jsx)(Jr,{agentMetadata:e.agentMetadata});default:(0,r.vE)(e)}}),[t,n,i,a,l,c]);return(0,o.jsxs)(C.k,{direction:"column",gap:8,height:"100%",children:[(0,o.jsx)(Qr,{currentView:u.current,canGoBack:u.canGoBack,onClose:e,onBack:u.goBack}),(0,o.jsx)(O.x,{style:{flex:"1",minHeight:0},children:(()=>{const e={display:"none"},t={display:"contents"};return(0,o.jsx)(o.Fragment,{children:u.stack.map((n=>{const r=(e=>{switch(e.type){case zn.AgentProfile:return`${e.type}-${e.agentId}`;case zn.AgentSettings:return`${e.type}-${e.agentMetadata.id}`;default:return e.type}})(n),i=n===u.current;return(0,o.jsx)("div",{style:i?t:e,children:d(n)},r)}))})})()})]})},ni=({agentDirectoryService:e,trackingService:t,onOpenAgent:n,closeModal:r,initialView:i,shouldUseNativeInstallFlow:s,isFirstPartyPackAgentsEnabled:a=!1,selectedAgentId:l,coordinatorAgentId:c,goBrandingEnabled:u=!1})=>(0,o.jsx)($n,{initialView:i,agentDirectoryService:e,children:(0,o.jsx)(Nn,{agentDirectoryService:e,children:(0,o.jsx)(Bn,{trackingService:t,children:(0,o.jsx)(ti,{closeModal:r,onOpenAgent:n,shouldUseNativeInstallFlow:s,isFirstPartyPackAgentsEnabled:a,selectedAgentId:l,coordinatorAgentId:c,goBrandingEnabled:u})})})}),ri=()=>(0,o.jsxs)("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M9 12.5C9 13.3284 8.32843 14 7.5 14C6.67157 14 6 13.3284 6 12.5C6 11.6716 6.67157 11 7.5 11C8.32843 11 9 11.6716 9 12.5Z",fill:"#707070"}),(0,o.jsx)("path",{d:"M9 18.5C9 19.3284 8.32843 20 7.5 20C6.67157 20 6 19.3284 6 18.5C6 17.6716 6.67157 17 7.5 17C8.32843 17 9 17.6716 9 18.5Z",fill:"#707070"}),(0,o.jsx)("path",{d:"M9 6.5C9 7.32843 8.32843 8 7.5 8C6.67157 8 6 7.32843 6 6.5C6 5.67157 6.67157 5 7.5 5C8.32843 5 9 5.67157 9 6.5Z",fill:"#707070"}),(0,o.jsx)("path",{d:"M14 12.5C14 13.3284 13.3284 14 12.5 14C11.6716 14 11 13.3284 11 12.5C11 11.6716 11.6716 11 12.5 11C13.3284 11 14 11.6716 14 12.5Z",fill:"#707070"}),(0,o.jsx)("path",{d:"M14 18.5C14 19.3284 13.3284 20 12.5 20C11.6716 20 11 19.3284 11 18.5C11 17.6716 11.6716 17 12.5 17C13.3284 17 14 17.6716 14 18.5Z",fill:"#707070"}),(0,o.jsx)("path",{d:"M14 6.5C14 7.32843 13.3284 8 12.5 8C11.6716 8 11 7.32843 11 6.5C11 5.67157 11.6716 5 12.5 5C13.3284 5 14 5.67157 14 6.5Z",fill:"#707070"})]}),ii={item:"_item_yekiz_1",iconSwap:"_iconSwap_yekiz_6",agentIcon:"_agentIcon_yekiz_13",dragHandle:"_dragHandle_yekiz_14",hovered:"_hovered_yekiz_31",iconContainer:"_iconContainer_yekiz_41",openAgentSettingsButton:"_openAgentSettingsButton_yekiz_54",menu:"_menu_yekiz_58"},oi=({item:e,onDelete:t,onOpenAgent:n,shouldUseNativeInstallFlow:r,goBrandingEnabled:i})=>{var a,l,c;const{agentDirectoryService:u}=Xn(),{trackClicked:d}=qn(Gn.RemoveAgent,{agentId:e.id}),{trackClicked:h}=qn(Gn.ViewAgentSettings,{agentId:e.id}),{attributes:g,listeners:f,setNodeRef:p,transform:m,transition:v}=_n({id:e.id,disabled:!e.canReorder}),[x,b]=(0,s.useState)(!1),y={transform:ye.Transform.toString(m),transition:v},k=u.getAgentInstancesForAgent(e.id),{packMetadata:S}=gr(e.id,{withExternalPackMetadata:!0}),I=void 0!==S,E=(null==(a=null==S?void 0:S.authentication)?void 0:a.type)!==G.a.None,A=!(null==(l=null==S?void 0:S.syncTables)||!l.length),j=I&&(E||A),M=(0,s.useCallback)((async()=>{var t;await pr({agentId:e.id,agentDirectoryService:u,ingestionId:null==(t=k[0])?void 0:t.agentInstanceId})}),[u,k,e.id]),_=Pn(x?ii.item:""),R=Pn(e.canReorder?ii.iconSwap:ii.iconContainer,e.canReorder&&x?ii.hovered:""),D=(0,s.useCallback)((()=>{d(),t(e.id)}),[t,d,e.id]),T=(0,s.useCallback)((()=>{h(),M()}),[M,h]);return(0,o.jsx)("div",{ref:p,style:y,className:Pn(x&&ii.visible),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onFocus:()=>b(!0),onBlur:()=>b(!1),children:(0,o.jsxs)(C.k,{className:_,direction:"row",align:"center",justify:"space-between",padding:2,gap:2,children:[(0,o.jsxs)(C.k,{flex:"1",direction:"row",align:"center",gap:2,children:[(0,o.jsxs)("div",{className:R,children:[e.canReorder&&(0,o.jsx)("div",{className:ii.dragHandle,"aria-label":`Reorder ${e.name}`,...g,...f,children:(0,o.jsx)(ri,{})}),(0,o.jsx)(er,{agent:e,size:"large",className:ii.agentIcon,goBrandingEnabled:i})]}),(0,o.jsx)(w.x,{as:"span",variant:"text-medium",children:e.name})]}),(!0===r||(null==(c=k[0])?void 0:c.agentInstanceId))&&j&&(0,o.jsx)(F.h,{className:ii.openAgentSettingsButton,size:"small",variant:"tertiary",accessibilityLabel:"Open agent settings",icon:J.ew,onClick:T}),(0,o.jsxs)(H.v,{className:ii.menu,activator:"more-horizontal",children:[e.canDelete&&(0,o.jsx)(H.v.Item,{onClick:D,children:(0,o.jsx)(w.x,{as:"p",variant:"text-small",weight:"normal",children:"Remove agent"})},"removeAgent"),(0,o.jsx)(H.v.Item,{onClick:()=>{null==n||n(e.id)},children:(0,o.jsx)(w.x,{as:"p",variant:"text-small",weight:"normal",children:"Open agent"})},"openAgent")]})]})})},si="_confirmationBox_15k92_1",ai="_closeIcon_15k92_7";function li({message:e,closeButton:t}){return(0,o.jsx)(O.x,{"data-testid":"ConfirmationBox",className:si,padding:3,children:(0,o.jsxs)(C.k,{gap:2,align:"center",children:[(0,o.jsx)(S.J,{icon:D.j,accessibilityLabel:"","aria-hidden":"true"}),(0,o.jsx)(C.k,{flex:"1",children:(0,o.jsx)(w.x,{as:"p",weight:"normal",variant:"text-xsmall",children:e})}),t&&(0,o.jsx)(F.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",className:ai,icon:J.Tw,onClick:t})]})})}const ci={hoverBox:"_hoverBox_ioe9q_1"},ui=({onOpenAgent:e,shouldUseNativeInstallFlow:t,isFirstPartyPackAgentsEnabled:n=!1,selectedAgentId:r,coordinatorAgentId:i,goBrandingEnabled:a})=>{const{agentDirectoryService:l}=Xn(),{trackingService:c}=Zn(),{agents:u,refetch:d}=(()=>{const{agentDirectoryService:e}=Xn(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!1),[o,a]=(0,s.useState)(null),l=(0,s.useCallback)((async()=>{if(e){i(!0),a(null);try{const t=e.listInstalledAgents();n(t)}catch(e){const t=e instanceof Error?e:new Error("Failed to load agents");a(t),console.error("Error fetching installed agents:",t)}finally{i(!1)}}}),[e]),c=(0,s.useCallback)((async()=>{await l()}),[l]);return(0,s.useEffect)((()=>{l()}),[l]),{agents:t,isLoading:r,error:o,refetch:c}})(),h=(0,s.useRef)(null),g=(0,s.useRef)(!1),f=(0,s.useMemo)((()=>n?u:(0,W.xr)(u)),[u,n]),[p,m]=(0,s.useState)(f),[v,x]=(0,s.useState)(void 0),[b,y]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{m(f)}),[f]);const w=(0,s.useMemo)((()=>p.map((e=>e.id))),[p]),k=e=>{y(e),h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{y(void 0),h.current=null}),1500)};(0,s.useEffect)((()=>()=>{h.current&&clearTimeout(h.current)}),[]);const S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(De(It),De(yt,{coordinateGetter:Tn})),I=async t=>{const n=[...p],o=p.find((e=>e.id===t)),s=p.filter((e=>e.id!==t)),a=r===t||r&&W.kR[r]===t;m(s);try{await l.removeAgent(t),d(),o&&k(`${o.name} removed`),a&&i&&e&&e(i)}catch(e){m(n),console.error(`Failed to remove agent ${t}:`,e),x("We hit a bump trying to remove your agent. Please try it again.")}};return(0,o.jsxs)(C.k,{direction:"column",style:{height:"100%",position:"relative"},children:[(0,o.jsx)(C.k,{role:"list","aria-label":"Installed agents",direction:"column","data-testid":"manageAgents",style:{height:"100%",overflowY:"auto"},children:(0,o.jsx)(sn,{sensors:S,collisionDetection:ze,onDragEnd:async e=>{var t,n;const{active:r,over:i}=e;if(i&&r.id!==i.id){if(g.current)return;const e=[...p],o=p.findIndex((e=>e.id===r.id)),s=p.findIndex((e=>e.id===i.id));if(-1===o||-1===s||o===s||!p[o].canReorder)return;const a=Math.min(o,s),u=Math.max(o,s);if(p.slice(a,u+1).some(((e,t)=>a+t!==o&&!e.canReorder)))return void x("Cannot move agents across pinned agents.");const d=p[o].id,h=null==(t=p[o+1])?void 0:t.id,f=pn(p,o,s),v=null==(n=f[s+1])?void 0:n.id;if(h===v)return void m(f);try{g.current=!0,null==c||c.trackEvent(Vn.AgentDirectoryReorderAgent,{agentId:d,oldIndex:o,newIndex:s}),m(f),await l.setInstalledAgentsOrder(d,v);const e=f.find((e=>e.id===d));e&&k(`${e.name} moved`)}catch(t){console.error(`Failed to reorder agent ${d}:`,t),m(e),x("We hit a snag trying to move your agents. Please try it again.")}finally{g.current=!1}}},modifiers:[fn,gn],children:(0,o.jsx)(kn,{items:w,strategy:yn,children:p.map((n=>(0,o.jsx)(oi,{item:n,onDelete:I,onOpenAgent:e,shouldUseNativeInstallFlow:t,goBrandingEnabled:a},n.id)))})})}),v&&(0,o.jsx)(C.k,{className:ci.errorBox,role:"alert",children:(0,o.jsx)(J.Tv,{title:"Let's try that again",content:v,closeButton:()=>x(void 0)})}),b&&(0,o.jsx)(C.k,{className:ci.hoverBox,"aria-live":"polite",children:(0,o.jsx)(li,{message:b,closeButton:()=>y(void 0)})})]})};Z.km.all;var di=n(51188);if(6168==n.j)var hi=n(36698);var gi=n(27234);if(6168==n.j)var fi=n(55711);if(5526!=n.j)var pi=n(4947);if(5526!=n.j)var mi=n(26306);if(5526!=n.j)var vi=n(10711);if(5526!=n.j)var xi=n(83689);var bi=n(92142),yi=n(21886),Ci=n(45981);const wi=(0,yi.I)("color",(({title:e,titleId:t,desc:n,descId:r,resourcePrefix:i=(0,Ci.O)(),...o})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceMute",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?s.createElement("desc",{id:r},n):null,e?s.createElement("title",{id:t},e):null,s.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m12 4-8 8m4 2A6 6 0 1 0 8 2a6 6 0 0 0 0 12Z"}))));var ki=n(28698);const Si=(0,yi.I)("color",(({title:e,titleId:t,desc:n,descId:r,resourcePrefix:i=(0,Ci.O)(),...o})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceDownload",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?s.createElement("desc",{id:r},n):null,e?s.createElement("title",{id:t},e):null,s.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M2.5 11.474v1.276c0 .69.56 1.25 1.25 1.25h8.5c.69 0 1.25-.56 1.25-1.25v-1.276M5.25 8 8 10.842m0 0L10.75 8M8 10.842V2"}))));var Ii=n(45580);const Ei=(0,yi.I)("color",(({title:e,titleId:t,desc:n,descId:r,resourcePrefix:i=(0,Ci.O)(),...o})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceUp",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...o},n?s.createElement("desc",{id:r},n):null,e?s.createElement("title",{id:t},e):null,s.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m2 11 6-6 6 6"}))));if(5526!=n.j)var Ai=n(2381);var ji=n(72905),Mi=n(7368);if(6168==n.j)var _i=n(33171);if(6168==n.j)var Ri=n(82852);var Di=n(18203),Ti=n(64443),Oi=n(54221);var Pi="undefined"!=typeof self?s.useLayoutEffect:s.useEffect;function Li(e,t,n,r){const i=(0,s.useRef)(t);Pi((()=>{i.current=t}),[t]),(0,s.useEffect)((()=>{const t=(null==n?void 0:n.current)??self;if(!t||!t.addEventListener)return;const o=e=>{i.current(e)};return t.addEventListener(e,o,r),()=>{t.removeEventListener(e,o,r)}}),[e,n,r])}function Ni(e){const t=(0,s.useRef)(e);t.current=e,(0,s.useEffect)((()=>()=>{t.current()}),[])}function Fi(e,t=500,n){const r=(0,s.useRef)();Ni((()=>{r.current&&r.current.cancel()}));const i=(0,s.useMemo)((()=>{const i=Oi(e,t,n),o=(...e)=>i(...e);return o.cancel=()=>{i.cancel()},o.isPending=()=>!!r.current,o.flush=()=>i.flush(),o}),[e,t,n]);return(0,s.useEffect)((()=>{r.current=Oi(e,t,n)}),[e,t,n]),i}var Bi={width:void 0,height:void 0};function zi(e){const{ref:t,box:n="content-box"}=e,[{width:r,height:i},o]=(0,s.useState)(Bi),a=function(){const e=(0,s.useRef)(!1);return(0,s.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,s.useCallback)((()=>e.current),[])}(),l=(0,s.useRef)({...Bi}),c=(0,s.useRef)(void 0);return c.current=e.onResize,(0,s.useEffect)((()=>{if(!t.current)return;if("undefined"==typeof self||!("ResizeObserver"in self))return;const e=new ResizeObserver((([e])=>{const t="border-box"===n?"borderBoxSize":"device-pixel-content-box"===n?"devicePixelContentBoxSize":"contentBoxSize",r=Hi(e,t,"inlineSize"),i=Hi(e,t,"blockSize");if(l.current.width!==r||l.current.height!==i){const e={width:r,height:i};l.current.width=r,l.current.height=i,c.current?c.current(e):a()&&o(e)}}));return e.observe(t.current,{box:n}),()=>{e.disconnect()}}),[n,t,a]),{width:r,height:i}}function Hi(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}if(6168==n.j)var Ui=n(96333);if(6168==n.j)var $i=n(5749);if(6168==n.j)var Wi=n(81349);if(5526!=n.j)var Vi=n(53922);var Gi=n(72314),Zi=n(37788);function qi(e){return Array.isArray?Array.isArray(e):"[object Array]"===to(e)}function Ki(e){return"string"==typeof e}function Ji(e){return"number"==typeof e}function Yi(e){return!0===e||!1===e||function(e){return Xi(e)&&null!==e}(e)&&"[object Boolean]"==to(e)}function Xi(e){return"object"==typeof e}function Qi(e){return null!=e}function eo(e){return!e.trim().length}function to(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const no=Object.prototype.hasOwnProperty;class ro{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=io(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function io(e){let t=null,n=null,r=null,i=1,o=null;if(Ki(e)||qi(e))r=e,t=oo(e),n=so(e);else{if(!no.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const s=e.name;if(r=s,no.call(e,"weight")&&(i=e.weight,i<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(s));t=oo(s),n=so(s),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function oo(e){return qi(e)?e:e.split(".")}function so(e){return qi(e)?e.join("."):e}const ao={useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const i=(e,t,o)=>{if(Qi(e))if(t[o]){const s=e[t[o]];if(!Qi(s))return;if(o===t.length-1&&(Ki(s)||Ji(s)||Yi(s)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(s));else if(qi(s)){r=!0;for(let e=0,n=s.length;e<n;e+=1)i(s[e],t,o+1)}else t.length&&i(s,t,o+1)}else n.push(e)};return i(e,Ki(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var lo={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...ao};const co=/[^ ]+/g;class uo{constructor({getFn:e=lo.getFn,fieldNormWeight:t=lo.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(t){const i=t.match(co).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),s=parseFloat(Math.round(o*r)/r);return n.set(i,s),s},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Ki(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Ki(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Qi(e)||eo(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,r)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Qi(i))if(qi(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(Qi(r))if(Ki(r)&&!eo(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else qi(r)&&r.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[r]=e}else if(Ki(i)&&!eo(i)){let e={v:i,n:this.norm.get(i)};n.$[r]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function ho(e,t,{getFn:n=lo.getFn,fieldNormWeight:r=lo.fieldNormWeight}={}){const i=new uo({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(io)),i.setSources(t),i.create(),i}function go(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=lo.distance,ignoreLocation:o=lo.ignoreLocation}={}){const s=t/e.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}const fo=32;function po(e,t,n,{location:r=lo.location,distance:i=lo.distance,threshold:o=lo.threshold,findAllMatches:s=lo.findAllMatches,minMatchCharLength:a=lo.minMatchCharLength,includeMatches:l=lo.includeMatches,ignoreLocation:c=lo.ignoreLocation}={}){if(t.length>fo)throw new Error((e=>`Pattern length exceeds max of ${e}.`)(fo));const u=t.length,d=e.length,h=Math.max(0,Math.min(r,d));let g=o,f=h;const p=a>1||l,m=p?Array(d):[];let v;for(;(v=e.indexOf(t,f))>-1;){let e=go(t,{currentLocation:v,expectedLocation:h,distance:i,ignoreLocation:c});if(g=Math.min(e,g),f=v+u,p){let e=0;for(;e<u;)m[v+e]=1,e+=1}}f=-1;let x=[],b=1,y=u+d;const C=1<<u-1;for(let r=0;r<u;r+=1){let o=0,a=y;for(;o<a;){go(t,{errors:r,currentLocation:h+a,expectedLocation:h,distance:i,ignoreLocation:c})<=g?o=a:y=a,a=Math.floor((y-o)/2+o)}y=a;let l=Math.max(1,h-a+1),v=s?d:Math.min(h+a,d)+u,w=Array(v+2);w[v+1]=(1<<r)-1;for(let o=v;o>=l;o-=1){let s=o-1,a=n[e.charAt(s)];if(p&&(m[s]=+!!a),w[o]=(w[o+1]<<1|1)&a,r&&(w[o]|=(x[o+1]|x[o])<<1|1|x[o+1]),w[o]&C&&(b=go(t,{errors:r,currentLocation:s,expectedLocation:h,distance:i,ignoreLocation:c}),b<=g)){if(g=b,f=s,f<=h)break;l=Math.max(1,2*h-f)}}if(go(t,{errors:r+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:c})>g)break;x=w}const w={isMatch:f>=0,score:Math.max(.001,b)};if(p){const e=function(e=[],t=lo.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=e.length;o<s;o+=1){let s=e[o];s&&-1===r?r=o:s||-1===r||(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}(m,a);e.length?l&&(w.indices=e):w.isMatch=!1}return w}function mo(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const vo=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class xo{constructor(e,{location:t=lo.location,threshold:n=lo.threshold,distance:r=lo.distance,includeMatches:i=lo.includeMatches,findAllMatches:o=lo.findAllMatches,minMatchCharLength:s=lo.minMatchCharLength,isCaseSensitive:a=lo.isCaseSensitive,ignoreDiacritics:l=lo.ignoreDiacritics,ignoreLocation:c=lo.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c},e=a?e:e.toLowerCase(),e=l?vo(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const u=(e,t)=>{this.chunks.push({pattern:e,alphabet:mo(e),startIndex:t})},d=this.pattern.length;if(d>fo){let e=0;const t=d%fo,n=d-t;for(;e<n;)u(this.pattern.substr(e,fo),e),e+=fo;if(t){const e=d-fo;u(this.pattern.substr(e),e)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=t?e:e.toLowerCase(),e=n?vo(e):e,this.pattern===e){let t={isMatch:!0,score:0};return r&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,h=!1;this.chunks.forEach((({pattern:t,alphabet:n,startIndex:g})=>{const{isMatch:f,score:p,indices:m}=po(e,t,n,{location:i+g,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});f&&(h=!0),d+=p,f&&m&&(u=[...u,...m])}));let g={isMatch:h,score:h?d/this.chunks.length:1};return h&&r&&(g.indices=u),g}}class bo{constructor(e){this.pattern=e}static isMultiMatch(e){return yo(e,this.multiRegex)}static isSingleMatch(e){return yo(e,this.singleRegex)}search(){}}function yo(e,t){const n=e.match(t);return n?n[1]:null}class Co extends bo{constructor(e,{location:t=lo.location,threshold:n=lo.threshold,distance:r=lo.distance,includeMatches:i=lo.includeMatches,findAllMatches:o=lo.findAllMatches,minMatchCharLength:s=lo.minMatchCharLength,isCaseSensitive:a=lo.isCaseSensitive,ignoreDiacritics:l=lo.ignoreDiacritics,ignoreLocation:c=lo.ignoreLocation}={}){super(e),this._bitapSearch=new xo(e,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class wo extends bo{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const ko=[class extends bo{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},wo,class extends bo{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends bo{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends bo{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends bo{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends bo{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Co],So=ko.length,Io=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Eo=new Set([Co.type,wo.type]);class Ao{constructor(e,{isCaseSensitive:t=lo.isCaseSensitive,ignoreDiacritics:n=lo.ignoreDiacritics,includeMatches:r=lo.includeMatches,minMatchCharLength:i=lo.minMatchCharLength,ignoreLocation:o=lo.ignoreLocation,findAllMatches:s=lo.findAllMatches,location:a=lo.location,threshold:l=lo.threshold,distance:c=lo.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:l,distance:c},e=t?e:e.toLowerCase(),e=n?vo(e):e,this.pattern=e,this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(Io).filter((e=>e&&!!e.trim())),r=[];for(let e=0,i=n.length;e<i;e+=1){const i=n[e];let o=!1,s=-1;for(;!o&&++s<So;){const e=ko[s];let n=e.isMultiMatch(i);n&&(r.push(new e(n,t)),o=!0)}if(!o)for(s=-1;++s<So;){const e=ko[s];let n=e.isSingleMatch(i);if(n){r.push(new e(n,t));break}}}return r}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:i}=this.options;e=r?e:e.toLowerCase(),e=i?vo(e):e;let o=0,s=[],a=0;for(let r=0,i=t.length;r<i;r+=1){const i=t[r];s.length=0,o=0;for(let t=0,r=i.length;t<r;t+=1){const r=i[t],{isMatch:l,indices:c,score:u}=r.search(e);if(!l){a=0,o=0,s.length=0;break}if(o+=1,a+=u,n){const e=r.constructor.type;Eo.has(e)?s=[...s,...c]:s.push(c)}}if(o){let e={isMatch:!0,score:a/o};return n&&(e.indices=s),e}}return{isMatch:!1,score:1}}}const jo=[];function Mo(e,t){for(let n=0,r=jo.length;n<r;n+=1){let r=jo[n];if(r.condition(e,t))return new r(e,t)}return new xo(e,t)}const _o="$and",Ro="$or",Do="$path",To="$val",Oo=e=>!(!e[_o]&&!e[Ro]),Po=e=>({[_o]:Object.keys(e).map((t=>({[t]:e[t]})))});function Lo(e,t,{auto:n=!0}={}){const r=e=>{let i=Object.keys(e);const o=(e=>!!e[Do])(e);if(!o&&i.length>1&&!Oo(e))return r(Po(e));if((e=>!qi(e)&&Xi(e)&&!Oo(e))(e)){const r=o?e[Do]:i[0],s=o?e[To]:e[r];if(!Ki(s))throw new Error((e=>`Invalid value for key ${e}`)(r));const a={keyId:so(r),pattern:s};return n&&(a.searcher=Mo(s,t)),a}let s={children:[],operator:i[0]};return i.forEach((t=>{const n=e[t];qi(n)&&n.forEach((e=>{s.children.push(r(e))}))})),s};return Oo(e)||(e=Po(e)),r(e)}function No(e,t){const n=e.matches;t.matches=[],Qi(n)&&n.forEach((e=>{if(!Qi(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let i={indices:n,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function Fo(e,t){t.score=e.score}class Bo{constructor(e,t={},n){this.options={...lo,...t},this.options.useExtendedSearch,this._keyStore=new ro(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof uo))throw new Error("Incorrect 'index' type");this._myIndex=t||ho(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Qi(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:s}=this.options;let a=Ki(e)?Ki(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=lo.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:r,score:i})=>{const o=e?e.weight:null;n*=Math.pow(0===i&&o?Number.EPSILON:i,(o||1)*(t?1:r))})),e.score=n}))}(a,{ignoreFieldNorm:s}),i&&a.sort(o),Ji(t)&&t>-1&&(a=a.slice(0,t)),function(e,t,{includeMatches:n=lo.includeMatches,includeScore:r=lo.includeScore}={}){const i=[];return n&&i.push(No),r&&i.push(Fo),e.map((e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return i.length&&i.forEach((t=>{t(e,r)})),r}))}(a,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=Mo(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:e,i:n,n:i})=>{if(!Qi(e))return;const{isMatch:o,score:s,indices:a}=t.searchIn(e);o&&r.push({item:e,idx:n,matches:[{score:s,value:e,norm:i,indices:a}]})})),r}_searchLogical(e){const t=Lo(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:i}=e,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return o&&o.length?[{idx:r,item:t,matches:o}]:[]}const i=[];for(let o=0,s=e.children.length;o<s;o+=1){const s=e.children[o],a=n(s,t,r);if(a.length)i.push(...a);else if(e.operator===_o)return[]}return i},r=this._myIndex.records,i={},o=[];return r.forEach((({$:e,i:r})=>{if(Qi(e)){let s=n(t,e,r);s.length&&(i[r]||(i[r]={idx:r,item:e,matches:[]},o.push(i[r])),s.forEach((({matches:e})=>{i[r].matches.push(...e)})))}})),o}_searchObjectList(e){const t=Mo(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach((({$:e,i:r})=>{if(!Qi(e))return;let o=[];n.forEach(((n,r)=>{o.push(...this._findMatches({key:n,value:e[r],searcher:t}))})),o.length&&i.push({idx:r,item:e,matches:o})})),i}_findMatches({key:e,value:t,searcher:n}){if(!Qi(t))return[];let r=[];if(qi(t))t.forEach((({v:t,i,n:o})=>{if(!Qi(t))return;const{isMatch:s,score:a,indices:l}=n.searchIn(t);s&&r.push({score:a,key:e,value:t,idx:i,norm:o,indices:l})}));else{const{v:i,n:o}=t,{isMatch:s,score:a,indices:l}=n.searchIn(i);s&&r.push({score:a,key:e,value:i,norm:o,indices:l})}return r}}Bo.version="7.1.0",Bo.createIndex=ho,Bo.parseIndex=function(e,{getFn:t=lo.getFn,fieldNormWeight:n=lo.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new uo({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o},Bo.config=lo,Bo.parseQuery=Lo,function(...e){jo.push(...e)}(Ao);var zo=n(72189),Ho=n(95751),Uo=n(82882),$o=n(58704);let Wo=null,Vo=new Set,Go=new Map,Zo=!1,qo=!1;const Ko={Tab:!0,Escape:!0};function Jo(e,t){for(let n of Vo)n(e,t)}function Yo(e){Zo=!0,function(e){return!(e.metaKey||!(0,Ho.V5)()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(Wo="keyboard",Jo("keyboard",e))}function Xo(e){Wo="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(Zo=!0,Jo("pointer",e))}function Qo(e){(0,Uo.Z)(e)&&(Zo=!0,Wo="virtual")}function es(e){e.target!==self&&e.target!==document&&!zo.uR&&e.isTrusted&&(Zo||qo||(Wo="virtual",Jo("virtual",e)),Zo=!1,qo=!1)}function ts(){zo.uR||(Zo=!1,qo=!0)}function ns(e){if("undefined"==typeof self||"undefined"==typeof document||Go.get((0,$o.kR)(e)))return;const t=(0,$o.kR)(e),n=(0,$o.r3)(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Zo=!0,r.apply(this,arguments)},n.addEventListener("keydown",Yo,!0),n.addEventListener("keyup",Yo,!0),n.addEventListener("click",Qo,!0),t.addEventListener("focus",es,!0),t.addEventListener("blur",ts,!1),"undefined"!=typeof PointerEvent&&(n.addEventListener("pointerdown",Xo,!0),n.addEventListener("pointermove",Xo,!0),n.addEventListener("pointerup",Xo,!0)),t.addEventListener("beforeunload",(()=>{rs(e)}),{once:!0}),Go.set(t,{focus:r})}const rs=(e,t)=>{const n=(0,$o.kR)(e),r=(0,$o.r3)(e);t&&r.removeEventListener("DOMContentLoaded",t),Go.has(n)&&(n.HTMLElement.prototype.focus=Go.get(n).focus,r.removeEventListener("keydown",Yo,!0),r.removeEventListener("keyup",Yo,!0),r.removeEventListener("click",Qo,!0),n.removeEventListener("focus",es,!0),n.removeEventListener("blur",ts,!1),"undefined"!=typeof PointerEvent&&(r.removeEventListener("pointerdown",Xo,!0),r.removeEventListener("pointermove",Xo,!0),r.removeEventListener("pointerup",Xo,!0)),Go.delete(n))};function is(){return"pointer"!==Wo}"undefined"!=typeof document&&function(e){const t=(0,$o.r3)(e);let n;"loading"!==t.readyState?ns(e):(n=()=>{ns(e)},t.addEventListener("DOMContentLoaded",n))}();const os=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ss(e,t,n){ns(),(0,s.useEffect)((()=>{let t=(t,r)=>{(function(e,t,n){let r=(0,$o.r3)(null==n?void 0:n.target);const i="undefined"!=typeof self?(0,$o.kR)(null==n?void 0:n.target).HTMLInputElement:HTMLInputElement,o="undefined"!=typeof self?(0,$o.kR)(null==n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,s="undefined"!=typeof self?(0,$o.kR)(null==n?void 0:n.target).HTMLElement:HTMLElement,a="undefined"!=typeof self?(0,$o.kR)(null==n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||r.activeElement instanceof i&&!os.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof s&&r.activeElement.isContentEditable)&&"keyboard"===t&&n instanceof a&&!Ko[n.key])})(!!(null==n?void 0:n.isTextInput),t,r)&&e(is())};return Vo.add(t),()=>{Vo.delete(t)}}),t)}var as=n(82318);function ls(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e;const o=(0,s.useCallback)((e=>{if(e.target===e.currentTarget)return r&&r(e),i&&i(!1),!0}),[r,i]),a=(0,zo.d0)(o),l=(0,s.useCallback)((e=>{const t=(0,$o.r3)(e.target),r=t?(0,as.vY)(t):(0,as.vY)();e.target===e.currentTarget&&r===(0,as.NI)(e.nativeEvent)&&(n&&n(e),i&&i(!0),a(e))}),[i,n,a]);return{focusProps:{onFocus:!t&&(n||i||r)?l:void 0,onBlur:t||!r&&!i?void 0:o}}}var cs=n(9091);function us(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,i=(0,s.useRef)({isFocused:!1,isFocusVisible:t||is()}),[o,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)((()=>i.current.isFocused&&i.current.isFocusVisible)),u=(0,s.useCallback)((()=>c(i.current.isFocused&&i.current.isFocusVisible)),[]),d=(0,s.useCallback)((e=>{i.current.isFocused=e,a(e),u()}),[u]);ss((e=>{i.current.isFocusVisible=e,u()}),[],{isTextInput:n});let{focusProps:h}=ls({isDisabled:r,onFocusChange:d}),{focusWithinProps:g}=(0,cs.L)({isDisabled:!r,onFocusWithinChange:d});return{isFocused:o,isFocusVisible:l,focusProps:r?g:h}}var ds=n(51710);let hs=!1,gs=0;function fs(e){"touch"===e.pointerType&&(hs=!0,setTimeout((()=>{hs=!1}),50))}function ps(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent&&document.addEventListener("pointerup",fs),gs++,()=>{gs--,gs>0||"undefined"!=typeof PointerEvent&&document.removeEventListener("pointerup",fs)}}function ms(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,a]=(0,s.useState)(!1),l=(0,s.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,s.useEffect)(ps,[]);let{addGlobalListener:c,removeAllGlobalListeners:u}=(0,ds.x)(),{hoverProps:d,triggerHoverEnd:h}=(0,s.useMemo)((()=>{let e=(e,t)=>{let i=l.target;l.pointerType="",l.target=null,"touch"!==t&&l.isHovered&&i&&(l.isHovered=!1,u(),r&&r({type:"hoverend",target:i,pointerType:t}),n&&n(!1),a(!1))},o={};return"undefined"!=typeof PointerEvent&&(o.onPointerEnter=r=>{hs&&"mouse"===r.pointerType||((r,o)=>{if(l.pointerType=o,i||"touch"===o||l.isHovered||!r.currentTarget.contains(r.target))return;l.isHovered=!0;let s=r.currentTarget;l.target=s,c((0,$o.r3)(r.target),"pointerover",(t=>{l.isHovered&&l.target&&!(0,as.bE)(l.target,t.target)&&e(t,t.pointerType)}),{capture:!0}),t&&t({type:"hoverstart",target:s,pointerType:o}),n&&n(!0),a(!0)})(r,r.pointerType)},o.onPointerLeave=t=>{!i&&t.currentTarget.contains(t.target)&&e(t,t.pointerType)}),{hoverProps:o,triggerHoverEnd:e}}),[t,n,r,i,l,c,u]);return(0,s.useEffect)((()=>{i&&h({currentTarget:l.target},l.pointerType)}),[i]),{hoverProps:d,isHovered:o}}function vs(e,t,n){let r,i=n.initialDeps??[];function o(){var o,s,a,l;let c;n.key&&(null==(o=n.debug)?void 0:o.call(n))&&(c=Date.now());const u=e(),d=u.length!==i.length||u.some(((e,t)=>i[t]!==e));if(!d)return r;let h;if(i=u,n.key&&(null==(s=n.debug)?void 0:s.call(n))&&(h=Date.now()),r=t(...u),n.key&&(null==(a=n.debug)?void 0:a.call(n))){const e=Math.round(100*(Date.now()-c))/100,t=Math.round(100*(Date.now()-h))/100,r=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c ${i(t,5)} /${i(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*r,120))}deg 100% 31%);`,null==n?void 0:n.key)}return null==(l=null==n?void 0:n.onChange)||l.call(n,r),r}return o.updateDeps=e=>{i=e},o}function xs(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?`: ${t}`:""));return e}const bs=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout((()=>t.apply(this,i)),n)}},ys=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},Cs=e=>e,ws=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let e=t;e<=n;e++)r.push(e);return r},ks=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=e=>{const{width:n,height:r}=e;t({width:Math.round(n),height:Math.round(r)})};if(i(ys(n)),!r.ResizeObserver)return()=>{};const o=new r.ResizeObserver((t=>{const r=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void i({width:t.inlineSize,height:t.blockSize})}i(ys(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()}));return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},Ss={passive:!0},Is="undefined"==typeof self||"onscrollend"in self,Es=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const o=e.options.useScrollendEvent&&Is?()=>{}:bs(r,(()=>{t(i,!1)}),e.options.isScrollingResetDelay),s=r=>()=>{const{horizontal:s,isRtl:a}=e.options;i=s?n.scrollLeft*(a?-1:1):n.scrollTop,o(),t(i,r)},a=s(!0),l=s(!1);l(),n.addEventListener("scroll",a,Ss);const c=e.options.useScrollendEvent&&Is;return c&&n.addEventListener("scrollend",l,Ss),()=>{n.removeEventListener("scroll",a),c&&n.removeEventListener("scrollend",l)}},As=(e,t,n)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},js=(e,{adjustments:t=0,behavior:n},r)=>{var i,o;const s=e+t;null==(o=null==(i=r.scrollElement)?void 0:i.scrollTo)||o.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class Ms{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver((e=>{e.forEach((e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()}))})):null);return{disconnect:()=>{var n;null==(n=t())||n.disconnect(),e=null},observe:e=>{var n;return null==(n=t())?void 0:n.observe(e,{box:"border-box"})},unobserve:e=>{var n;return null==(n=t())?void 0:n.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach((([t,n])=>{void 0===n&&delete e[t]})),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Cs,rangeExtractor:ws,onChange:()=>{},measureElement:As,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,n;null==(n=(t=this.options).onChange)||n.call(t,this,e)},this.maybeNotify=vs((()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null])),(e=>{this.notify(e)}),{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach((e=>e())),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach((e=>{this.observer.observe(e)})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,(e=>{this.scrollRect=e,this.maybeNotify()}))),this.unsubs.push(this.options.observeElementOffset(this,((e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const n=new Map,r=new Map;for(let i=t-1;i>=0;i--){const t=e[i];if(n.has(t.lane))continue;const o=r.get(t.lane);if(null==o||t.end>o.end?r.set(t.lane,t):t.end<o.end&&n.set(t.lane,!0),n.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort(((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end))[0]:void 0},this.getMeasurementOptions=vs((()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled]),((e,t,n,r,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:i})),{key:!1}),this.getMeasurements=vs((()=>[this.getMeasurementOptions(),this.itemSizeCache]),(({count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((e=>{this.itemSizeCache.set(e.key,e.size)})));const s=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const a=this.measurementsCache.slice(0,s);for(let i=s;i<e;i++){const e=r(i),s=1===this.options.lanes?a[i-1]:this.getFurthestMeasurement(a,i),l=s?s.end+this.options.gap:t+n,c=o.get(e),u="number"==typeof c?c:this.options.estimateSize(i),d=l+u,h=s?s.lane:i%this.options.lanes;a[i]={index:i,start:l,size:u,end:d,key:e,lane:h}}return this.measurementsCache=a,a}),{key:!1,debug:()=>this.options.debug}),this.calculateRange=vs((()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes]),((e,t,n,r)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,o=t=>e[t].start;if(e.length<=r)return{startIndex:0,endIndex:i};let s=_s(0,i,o,n),a=s;if(1===r)for(;a<i&&e[a].end<n+t;)a++;else if(r>1){const o=Array(r).fill(0);for(;a<i&&o.some((e=>e<n+t));){const t=e[a];o[t.lane]=t.end,a++}const l=Array(r).fill(n+t);for(;s>=0&&l.some((e=>e>=n));){const t=e[s];l[t.lane]=t.start,s--}s=Math.max(0,s-s%r),a=Math.min(i,a+(r-1-a%r))}return{startIndex:s,endIndex:a}}({measurements:e,outerSize:t,scrollOffset:n,lanes:r}):null),{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=vs((()=>{let e=null,t=null;const n=this.calculateRange();return n&&(e=n.startIndex,t=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]}),((e,t,n,r,i)=>null===r||null===i?[]:e({startIndex:r,endIndex:i,overscan:t,count:n})),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const n=this.indexFromElement(e),r=this.measurementsCache[n];if(!r)return;const i=r.key,o=this.elementsCache.get(i);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const n=this.measurementsCache[e];if(!n)return;const r=t-(this.itemSizeCache.get(n.key)??n.size);0!==r&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(n,r,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=r,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach(((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))}))},this.getVirtualItems=vs((()=>[this.getVirtualIndexes(),this.getMeasurements()]),((e,t)=>{const n=[];for(let r=0,i=e.length;r<i;r++){const i=t[e[r]];n.push(i)}return n}),{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return xs(t[_s(0,t.length-1,(e=>xs(t[e]).start),e)])},this.getOffsetForAlignment=(e,t,n=0)=>{const r=this.getSize(),i=this.getScrollOffset();"auto"===t&&(t=e>=i+r?"end":"start"),"center"===t?e+=(n-r)/2:"end"===t&&(e-=r);const o=this.getTotalSize()+this.options.scrollMargin-r;return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const r=this.getSize(),i=this.getScrollOffset();if("auto"===t)if(n.end>=i+r-this.options.scrollPaddingEnd)t="end";else{if(!(n.start<=i+this.options.scrollPaddingStart))return[i,t];t="start"}const o="end"===t?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,t,n.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:n}={})=>{"smooth"===n&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:t="auto",behavior:n}={})=>{"smooth"===n&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let r=0;const i=t=>{if(!this.targetWindow)return;const r=this.getOffsetForIndex(e,t);if(!r)return void console.warn("Failed to get offset for index:",e);const[i,s]=r;this._scrollToOffset(i,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame((()=>{const t=this.getScrollOffset(),n=this.getOffsetForIndex(e,s);n?((e,t)=>Math.abs(e-t)<1.01)(n[0],t)||o(s):console.warn("Failed to get offset for index:",e)}))},o=t=>{this.targetWindow&&(r++,r<10?this.targetWindow.requestAnimationFrame((()=>i(t))):console.warn(`Failed to scroll to index ${e} after 10 attempts.`))};i(t)},this.scrollBy=(e,{behavior:t}={})=>{"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let n;if(0===t.length)n=this.options.paddingStart;else if(1===this.options.lanes)n=(null==(e=t[t.length-1])?void 0:e.end)??0;else{const e=Array(this.options.lanes).fill(null);let r=t.length-1;for(;r>=0&&e.some((e=>null===e));){const n=t[r];null===e[n.lane]&&(e[n.lane]=n.end),r--}n=Math.max(...e.filter((e=>null!==e)))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const _s=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else{if(!(o>r))return i;t=i-1}}return e>0?e-1:0};const Rs="undefined"!=typeof document?s.useLayoutEffect:s.useEffect;function Ds(e){const t=s.useReducer((()=>({})),{})[1],n={...e,onChange:(n,r)=>{var i;r?(0,X.flushSync)(t):t(),null==(i=e.onChange)||i.call(e,n,r)}},[r]=s.useState((()=>new Ms(n)));return r.setOptions(n),Rs((()=>r._didMount()),[]),Rs((()=>r._willUpdate())),r}var Ts=Object.defineProperty,Os=(e,t,n)=>(((e,t,n)=>{t in e?Ts(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let Ps=new class{constructor(){Os(this,"current",this.detect()),Os(this,"handoffState","pending"),Os(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof self||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function Ls(e){var t;return Ps.isServer?null:null==e?document:null!=(t=null==e?void 0:e.ownerDocument)?t:document}function Ns(e){var t,n;return null!=(n=null==(t=function(e){var t,n;return Ps.isServer?null:null==e?document:null!=(n=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e))?n:document}(e))?void 0:t.activeElement)?n:null}function Fs(e){return Ns(e)===e}function Bs(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function zs(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add((()=>cancelAnimationFrame(n)))},nextFrame:(...e)=>t.requestAnimationFrame((()=>t.requestAnimationFrame(...e))),setTimeout(...e){let n=setTimeout(...e);return t.add((()=>clearTimeout(n)))},microTask(...e){let n={current:!0};return Bs((()=>{n.current&&e[0]()})),t.add((()=>{n.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=zs();return e(t),this.add((()=>t.dispose()))},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function Hs(){let[e]=(0,s.useState)(zs);return(0,s.useEffect)((()=>()=>e.dispose()),[e]),e}let Us=(e,t)=>{Ps.isServer?(0,s.useEffect)(e,t):(0,s.useLayoutEffect)(e,t)};function $s(e){let t=(0,s.useRef)(e);return Us((()=>{t.current=e}),[e]),t}let Ws=function(e){let t=$s(e);return s.useCallback(((...e)=>t.current(...e)),[t])};function Vs({disabled:e=!1}={}){let t=(0,s.useRef)(null),[n,r]=(0,s.useState)(!1),i=Hs(),o=Ws((()=>{t.current=null,r(!1),i.dispose()})),a=Ws((e=>{if(i.dispose(),null===t.current){t.current=e.currentTarget,r(!0);{let n=Ls(e.currentTarget);i.addEventListener(n,"pointerup",o,!1),i.addEventListener(n,"pointermove",(e=>{if(t.current){let n=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);r(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(n,t.current.getBoundingClientRect()))}}),!1),i.addEventListener(n,"pointercancel",o,!1)}}}));return{pressed:n,pressProps:e?{}:{onPointerDown:a,onPointerUp:o,onClick:o}}}function Gs(e,t){return null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t&&"id"in e&&"id"in t?e.id===t.id:e===t}function Zs(e){if(null===e)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function qs(e,t,n=!1){let[r,i]=(0,s.useState)((()=>Zs(t)));return Us((()=>{if(!t||!e)return;let n=zs();return n.requestAnimationFrame((function e(){n.requestAnimationFrame(e),i((e=>{let n=Zs(t);return n.width===e.width&&n.height===e.height?e:n}))})),()=>{n.dispose()}}),[t,e]),n?{width:`${r.width}px`,height:`${r.height}px`}:r}var Ks=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Ks||{});function Js(e){return"object"==typeof e&&null!==e&&"nodeType"in e}function Ys(e){return Js(e)&&"tagName"in e}function Xs(e){return Ys(e)&&"accessKey"in e}function Qs(e){return Ys(e)&&"tabIndex"in e}function ea(e){return Xs(e)&&"INPUT"===e.nodeName}function ta(e){return Xs(e)&&"LABEL"===e.nodeName}function na(e){return Xs(e)&&"FIELDSET"===e.nodeName}function ra(e){return Xs(e)&&"LEGEND"===e.nodeName}function ia(e){let t=e.parentElement,n=null;for(;t&&!na(t);)ra(t)&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(ra(t))return!1;t=t.previousElementSibling}return!0}(n))&&r}class oa extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}var sa,aa,la,ca=Object.defineProperty,ua=(e,t,n)=>(((e,t,n)=>{t in e?ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),da=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ha=(e,t,n)=>(da(e,t,"read from private field"),n?n.call(e):t.get(e)),ga=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},fa=(e,t,n,r)=>(da(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class pa{constructor(e){ga(this,sa,{}),ga(this,aa,new oa((()=>new Set))),ga(this,la,new Set),ua(this,"disposables",zs()),fa(this,sa,e),Ps.isServer&&this.disposables.microTask((()=>{this.dispose()}))}dispose(){this.disposables.dispose()}get state(){return ha(this,sa)}subscribe(e,t){if(Ps.isServer)return()=>{};let n={selector:e,callback:t,current:e(ha(this,sa))};return ha(this,la).add(n),this.disposables.add((()=>{ha(this,la).delete(n)}))}on(e,t){return Ps.isServer?()=>{}:(ha(this,aa).get(e).add(t),this.disposables.add((()=>{ha(this,aa).get(e).delete(t)})))}send(e){let t=this.reduce(ha(this,sa),e);if(t!==ha(this,sa)){fa(this,sa,t);for(let e of ha(this,la)){let t=e.selector(ha(this,sa));ma(e.current,t)||(e.current=t,e.callback(t))}for(let t of ha(this,aa).get(e.type))t(ha(this,sa),e)}}}function ma(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&va(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&va(e.entries(),t.entries()):!(!xa(e)||!xa(t))&&va(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function va(e,t){for(;;){let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}}function xa(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}function ba(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ba),r}sa=new WeakMap,aa=new WeakMap,la=new WeakMap;var ya=Object.defineProperty,Ca=(e,t,n)=>(((e,t,n)=>{t in e?ya(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),wa=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(wa||{});let ka={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(-1!==i){let t=e.stack.slice();return t.splice(i,1),t.push(n),r=t,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(-1===r)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}};class Sa extends pa{constructor(){super(...arguments),Ca(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),Ca(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}static new(){return new Sa({stack:[]})}reduce(e,t){return ba(t.type,ka,e,t)}}const Ia=new oa((()=>Sa.new()));var Ea=n(3666);function Aa(e,t,n=ma){return(0,Ea.useSyncExternalStoreWithSelector)(Ws((t=>e.subscribe(ja,t))),Ws((()=>e.state)),Ws((()=>e.state)),Ws(t),n)}function ja(e){return e}function Ma(e,t){let n=(0,s.useId)(),r=Ia.get(t),[i,o]=Aa(r,(0,s.useCallback)((e=>[r.selectors.isTop(e,n),r.selectors.inStack(e,n)]),[r,n]));return Us((()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)}),[r,e,n]),!!e&&(!o||i)}let _a=new Map,Ra=new Map;function Da(e){var t;let n=null!=(t=Ra.get(e))?t:0;return Ra.set(e,n+1),0!==n||(_a.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>Ta(e)}function Ta(e){var t;let n=null!=(t=Ra.get(e))?t:1;if(1===n?Ra.delete(e):Ra.set(e,n-1),1!==n)return;let r=_a.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,_a.delete(e))}let Oa=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");["[data-autofocus]"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var Pa=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Pa||{}),La=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(La||{}),Na=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Na||{});var Fa=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Fa||{});function Ba(e,t=0){var n;return e!==(null==(n=Ls(e))?void 0:n.body)&&ba(t,{0:()=>e.matches(Oa),1(){let t=e;for(;null!==t;){if(t.matches(Oa))return!0;t=t.parentElement}return!1}})}var za=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(za||{});"undefined"!=typeof self&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));["textarea","input"].join(",");function Ha(e,t=(e=>e)){return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function Ua(){return/iPhone/gi.test(self.navigator.platform)||/Mac/gi.test(self.navigator.platform)&&self.navigator.maxTouchPoints>0}function $a(){return Ua()||/Android/gi.test(self.navigator.userAgent)}function Wa(e,t,n,r){let i=$s(n);(0,s.useEffect)((()=>{if(e)return document.addEventListener(t,n,r),()=>document.removeEventListener(t,n,r);function n(e){i.current(e)}}),[e,t,r])}function Va(e,t,n){let r=$s(n),i=(0,s.useCallback)((function(e,n){if(e.defaultPrevented)return;let i=n(e);if(null===i||!i.getRootNode().contains(i)||!i.isConnected)return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of o)if(null!==t&&(t.contains(i)||e.composed&&e.composedPath().includes(t)))return;return!Ba(i,Fa.Loose)&&-1!==i.tabIndex&&e.preventDefault(),r.current(e,i)}),[r,t]),o=(0,s.useRef)(null);Wa(e,"pointerdown",(e=>{var t,n;$a()||(o.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),Wa(e,"pointerup",(e=>{if($a()||!o.current)return;let t=o.current;return o.current=null,i(e,(()=>t))}),!0);let a=(0,s.useRef)({x:0,y:0});Wa(e,"touchstart",(e=>{a.current.x=e.touches[0].clientX,a.current.y=e.touches[0].clientY}),!0),Wa(e,"touchend",(e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-a.current.x)>=30||Math.abs(n-a.current.y)>=30))return i(e,(()=>Qs(e.target)?e.target:null))}),!0),function(e,t,n,r){let i=$s(n);(0,s.useEffect)((()=>{if(e)return self.addEventListener(t,n,r),()=>self.removeEventListener(t,n,r);function n(e){i.current(e)}}),[e,t,r])}(e,"blur",(e=>i(e,(()=>function(e){return Xs(e)&&"IFRAME"===e.nodeName}(self.document.activeElement)?self.document.activeElement:null))),!0)}function Ga(...e){return(0,s.useMemo)((()=>Ls(...e)),[...e])}var Za=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(Za||{});const qa={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}};function Ka(e){let t=(0,s.useRef)({value:"",selectionStart:null,selectionEnd:null});return function(e,t,n,r){let i=$s(n);(0,s.useEffect)((()=>{function n(e){i.current(e)}return(e=null!=e?e:self).addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}),[e,t,r])}(e,"blur",(e=>{let n=e.target;ea(n)&&(t.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})})),Ws((()=>{if(!Fs(e)&&ea(e)&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==t.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:n,selectionEnd:r}=t.current;null!==n&&null!==r&&e.setSelectionRange(n,r)}t.current={value:"",selectionStart:null,selectionEnd:null}}}))}function Ja(e,t){return(0,s.useMemo)((()=>{var n;if(e.type)return e.type;let r=null!=(n=e.as)?n:"button";return"string"==typeof r&&"button"===r.toLowerCase()||"BUTTON"===(null==t?void 0:t.tagName)&&!t.hasAttribute("type")?"button":void 0}),[e.type,e.as,t])}function Ya(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=null!=(n=t.defaultView)?n:self;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function Xa(){return Ua()?{before({doc:e,d:t,meta:n}){function r(e){for(let t of n().containers)for(let n of t())if(n.contains(e))return!0;return!1}t.microTask((()=>{var n;if("auto"!==self.getComputedStyle(e.documentElement).scrollBehavior){let n=zs();n.style(e.documentElement,"scrollBehavior","auto"),t.add((()=>t.microTask((()=>n.dispose()))))}let i=null!=(n=self.scrollY)?n:self.pageYOffset,o=null;t.addEventListener(e,"click",(t=>{if(Qs(t.target))try{let n=t.target.closest("a");if(!n)return;let{hash:i}=new URL(n.href),s=e.querySelector(i);Qs(s)&&!r(s)&&(o=s)}catch{}}),!0),t.group((n=>{t.addEventListener(e,"touchstart",(e=>{if(n.dispose(),Qs(e.target)&&function(e){return Ys(e)&&"style"in e}(e.target))if(r(e.target)){let t=e.target;for(;t.parentElement&&r(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")}))})),t.addEventListener(e,"touchmove",(e=>{if(Qs(e.target)){if(ea(e.target))return;if(r(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}}),{passive:!1}),t.add((()=>{var e;let t=null!=(e=self.scrollY)?e:self.pageYOffset;i!==t&&self.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)}))}))}}:{}}function Qa(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let el=function(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e,...i){let o=t[e].call(n,...i);o&&(n=o,r.forEach((e=>e())))}}}((()=>new Map),{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:zs(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=Qa(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=Qa(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta:()=>e.computedMeta},n=[Xa(),Ya(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];n.forEach((({before:e})=>null==e?void 0:e(t))),n.forEach((({after:e})=>null==e?void 0:e(t)))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function tl(e,t,n=(()=>({containers:[]}))){let r=function(e){return(0,s.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}(el),i=t?r.get(t):void 0,o=!!i&&i.count>0;return Us((()=>{if(t&&e)return el.dispatch("PUSH",t,n),()=>el.dispatch("POP",t,n)}),[e,t]),o}function nl(e){return(0,s.useMemo)((()=>e),Object.values(e))}el.subscribe((()=>{let e=el.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&el.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&el.dispatch("TEARDOWN",n)}}));let rl=Symbol();function il(...e){let t=(0,s.useRef)(e);(0,s.useEffect)((()=>{t.current=e}),[e]);let n=Ws((e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)}));return e.every((e=>null==e||(null==e?void 0:e[rl])))?void 0:n}function ol(e){return[e.screenX,e.screenY]}var sl,al,ll=n(9780);void 0!==ll&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(sl=null==ll?void 0:ll.env)?void 0:sl.NODE_ENV)&&void 0===(null==(al=null==Element?void 0:Element.prototype)?void 0:al.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join("\n")),[]});var cl=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(cl||{});function ul(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}function dl(e,t,n,r){let[i,o]=(0,s.useState)(n),{hasFlag:a,addFlag:l,removeFlag:c}=function(e=0){let[t,n]=(0,s.useState)(e),r=(0,s.useCallback)((e=>n(e)),[]),i=(0,s.useCallback)((e=>n((t=>t|e))),[]),o=(0,s.useCallback)((e=>(t&e)===e),[t]),a=(0,s.useCallback)((e=>n((t=>t&~e))),[]),l=(0,s.useCallback)((e=>n((t=>t^e))),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:a,toggleFlag:l}}(e&&i?3:0),u=(0,s.useRef)(!1),d=(0,s.useRef)(!1),h=Hs();return Us((()=>{var i;if(e)return n&&o(!0),t?(null==(i=null==r?void 0:r.start)||i.call(r,n),function(e,{prepare:t,run:n,done:r,inFlight:i}){let o=zs();return function(e,{inFlight:t,prepare:n}){if(null!=t&&t.current)return void n();let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}(e,{prepare:t,inFlight:i}),o.nextFrame((()=>{n(),o.requestAnimationFrame((()=>{o.add(function(e,t){var n,r;let i=zs();if(!e)return i.dispose;let o=!1;i.add((()=>{o=!0}));let s=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter((e=>e instanceof CSSTransition)))?r:[];return 0===s.length?(t(),i.dispose):(Promise.allSettled(s.map((e=>e.finished))).then((()=>{o||t()})),i.dispose)}(e,r))}))})),o.dispose}(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){d.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var e;d.current&&function(e){var t,n;return(null!=(n=null==(t=e.getAnimations)?void 0:t.call(e))?n:[]).some((e=>e instanceof CSSTransition&&"finished"!==e.playState))}(t)||(u.current=!1,c(7),n||o(!1),null==(e=null==r?void 0:r.end)||e.call(r,n))}})):void(n&&l(3))}),[e,n,t,h]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function hl(e,t){let n=(0,s.useRef)([]),r=Ws(e);(0,s.useEffect)((()=>{let e=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let i=r(t,e);return n.current=t,i}}),[r,...t])}let gl=(0,s.createContext)(void 0);function fl(){return(0,s.useContext)(gl)}function pl(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}const ml=Math.min,vl=Math.max,xl=Math.round,bl=Math.floor,yl=e=>({x:e,y:e}),Cl={left:"right",right:"left",bottom:"top",top:"bottom"},wl={start:"end",end:"start"};function kl(e,t,n){return vl(e,ml(t,n))}function Sl(e,t){return"function"==typeof e?e(t):e}function Il(e){return e.split("-")[0]}function El(e){return e.split("-")[1]}function Al(e){return"x"===e?"y":"x"}function jl(e){return"y"===e?"height":"width"}function Ml(e){return["top","bottom"].includes(Il(e))?"y":"x"}function _l(e){return Al(Ml(e))}function Rl(e){return e.replace(/start|end/g,(e=>wl[e]))}function Dl(e){return e.replace(/left|right|bottom|top/g,(e=>Cl[e]))}function Tl(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ol(){return"undefined"!=typeof self}function Pl(e){return Fl(e)?(e.nodeName||"").toLowerCase():"#document"}function Ll(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||self}function Nl(e){var t;return null==(t=(Fl(e)?e.ownerDocument:e.document)||self.document)?void 0:t.documentElement}function Fl(e){return!!Ol()&&(e instanceof Node||e instanceof Ll(e).Node)}function Bl(e){return!!Ol()&&(e instanceof Element||e instanceof Ll(e).Element)}function zl(e){return!!Ol()&&(e instanceof HTMLElement||e instanceof Ll(e).HTMLElement)}function Hl(e){return!(!Ol()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Ll(e).ShadowRoot)}function Ul(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ql(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function $l(e){return["table","td","th"].includes(Pl(e))}function Wl(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function Vl(e){const t=Gl(),n=Bl(e)?ql(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Gl(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Zl(e){return["html","body","#document"].includes(Pl(e))}function ql(e){return Ll(e).getComputedStyle(e)}function Kl(e){return Bl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Jl(e){if("html"===Pl(e))return e;const t=e.assignedSlot||e.parentNode||Hl(e)&&e.host||Nl(e);return Hl(t)?t.host:t}function Yl(e){const t=Jl(e);return Zl(t)?e.ownerDocument?e.ownerDocument.body:e.body:zl(t)&&Ul(t)?t:Yl(t)}function Xl(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Yl(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=Ll(i);if(o){const e=Ql(s);return t.concat(s,s.visualViewport||[],Ul(i)?i:[],e&&n?Xl(e):[])}return t.concat(i,Xl(i,[],n))}function Ql(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ec(e,t,n){let{reference:r,floating:i}=e;const o=Ml(t),s=_l(t),a=jl(s),l=Il(t),c="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:d};break;case"left":g={x:r.x-i.width,y:d};break;default:g={x:r.x,y:r.y}}switch(El(t)){case"start":g[s]-=h*(n&&c?-1:1);break;case"end":g[s]+=h*(n&&c?-1:1)}return g}async function tc(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:g=0}=Sl(t,e),f=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(g),p=a[h?"floating"===d?"reference":"floating":d],m=Tl(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(p)))||n?p:p.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,x=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),b=await(null==o.isElement?void 0:o.isElement(x))&&await(null==o.getScale?void 0:o.getScale(x))||{x:1,y:1},y=Tl(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(m.top-y.top+f.top)/b.y,bottom:(y.bottom-m.bottom+f.bottom)/b.y,left:(m.left-y.left+f.left)/b.x,right:(y.right-m.right+f.right)/b.x}}function nc(e){const t=ql(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=zl(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=xl(n)!==o||xl(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function rc(e){return Bl(e)?e:e.contextElement}function ic(e){const t=rc(e);if(!zl(t))return yl(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=nc(t);let s=(o?xl(n.width):n.width)/r,a=(o?xl(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const oc=yl(0);function sc(e){const t=Ll(e);return Gl()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:oc}function ac(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=rc(e);let s=yl(1);t&&(r?Bl(r)&&(s=ic(r)):s=ic(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Ll(e))&&t}(o,n,r)?sc(o):yl(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const e=Ll(o),t=r&&Bl(r)?Ll(r):r;let n=e,i=Ql(n);for(;i&&r&&t!==n;){const e=ic(i),t=i.getBoundingClientRect(),r=ql(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=s,n=Ll(i),i=Ql(n)}}return Tl({width:u,height:d,x:l,y:c})}function lc(e,t){const n=Kl(e).scrollLeft;return t?t.left+n:ac(Nl(e)).left+n}function cc(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:lc(e,r)),y:r.top+t.scrollTop}}function uc(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Ll(e),r=Nl(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=Gl();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=Nl(e),n=Kl(e),r=e.ownerDocument.body,i=vl(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=vl(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+lc(e);const a=-n.scrollTop;return"rtl"===ql(r).direction&&(s+=vl(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(Nl(e));else if(Bl(t))r=function(e,t){const n=ac(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=zl(e)?ic(e):yl(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=sc(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Tl(r)}function dc(e,t){const n=Jl(e);return!(n===t||!Bl(n)||Zl(n))&&("fixed"===ql(n).position||dc(n,t))}function hc(e,t,n){const r=zl(t),i=Nl(t),o="fixed"===n,s=ac(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=yl(0);function c(){l.x=lc(i)}if(r||!r&&!o)if(("body"!==Pl(t)||Ul(i))&&(a=Kl(t)),r){const e=ac(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();o&&!r&&i&&c();const u=!i||r||o?yl(0):cc(i,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}function gc(e){return"static"===ql(e).position}function fc(e,t){if(!zl(e)||"fixed"===ql(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Nl(e)===n&&(n=n.ownerDocument.body),n}function pc(e,t){const n=Ll(e);if(Wl(e))return n;if(!zl(e)){let t=Jl(e);for(;t&&!Zl(t);){if(Bl(t)&&!gc(t))return t;t=Jl(t)}return n}let r=fc(e,t);for(;r&&$l(r)&&gc(r);)r=fc(r,t);return r&&Zl(r)&&gc(r)&&!Vl(r)?n:r||function(e){let t=Jl(e);for(;zl(t)&&!Zl(t);){if(Vl(t))return t;if(Wl(t))return null;t=Jl(t)}return null}(e)||n}const mc={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,s=Nl(r),a=!!t&&Wl(t.floating);if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=yl(1);const u=yl(0),d=zl(r);if((d||!d&&!o)&&(("body"!==Pl(r)||Ul(s))&&(l=Kl(r)),zl(r))){const e=ac(r);c=ic(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||o?yl(0):cc(s,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Nl,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o="clippingAncestors"===n?Wl(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Xl(e,[],!1).filter((e=>Bl(e)&&"body"!==Pl(e))),i=null;const o="fixed"===ql(e).position;let s=o?Jl(e):e;for(;Bl(s)&&!Zl(s);){const t=ql(s),n=Vl(s);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||Ul(s)&&!n&&dc(e,s))?r=r.filter((e=>e!==s)):i=t,s=Jl(s)}return t.set(e,r),r}(t,this._c):[].concat(n),s=[...o,r],a=s[0],l=s.reduce(((e,n)=>{const r=uc(t,n,i);return e.top=vl(r.top,e.top),e.right=ml(r.right,e.right),e.bottom=ml(r.bottom,e.bottom),e.left=vl(r.left,e.left),e}),uc(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:pc,getElementRects:async function(e){const t=this.getOffsetParent||pc,n=this.getDimensions,r=await n(e.floating);return{reference:hc(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=nc(e);return{width:t,height:n}},getScale:ic,isElement:Bl,isRTL:function(e){return"rtl"===ql(e).direction}};function vc(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function xc(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=rc(e),u=i||o?[...c?Xl(c):[],...Xl(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const i=Nl(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:g}=c;if(a||t(),!h||!g)return;const f={rootMargin:-bl(d)+"px "+-bl(i.clientWidth-(u+h))+"px "+-bl(i.clientHeight-(d+g))+"px "+-bl(u)+"px",threshold:vl(0,ml(1,l))||1};let p=!0;function m(t){const r=t[0].intersectionRatio;if(r!==l){if(!p)return s();r?s(!1,r):n=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==r||vc(c,e.getBoundingClientRect())||s(),p=!1}try{r=new IntersectionObserver(m,{...f,root:i.ownerDocument})}catch(e){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),o}(c,n):null;let h,g=-1,f=null;s&&(f=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let p=l?ac(e):null;return l&&function t(){const r=ac(e);p&&!vc(p,r)&&n();p=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const bc=tc,yc=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=Il(n),a=El(n),l="y"===Ml(n),c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=Sl(t,e);let{mainAxis:h,crossAxis:g,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof f&&(g="end"===a?-1*f:f),l?{x:g*u,y:h*c}:{x:h*c,y:g*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Cc=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Sl(e,t),c={x:n,y:r},u=await tc(t,l),d=Ml(Il(i)),h=Al(d);let g=c[h],f=c[d];if(o){const e="y"===h?"bottom":"right";g=kl(g+u["y"===h?"top":"left"],g,g-u[e])}if(s){const e="y"===d?"bottom":"right";f=kl(f+u["y"===d?"top":"left"],f,f-u[e])}const p=a.fn({...t,[h]:g,[d]:f});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[h]:o,[d]:s}}}}}},wc=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...m}=Sl(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=Il(i),x=Ml(a),b=Il(a)===a,y=await(null==l.isRTL?void 0:l.isRTL(c.floating)),C=h||(b||!p?[Dl(a)]:function(e){const t=Dl(e);return[Rl(e),t,Rl(t)]}(a)),w="none"!==f;!h&&w&&C.push(...function(e,t,n,r){const i=El(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}(Il(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(Rl)))),o}(a,p,f,y));const k=[a,...C],S=await tc(t,m),I=[];let E=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&I.push(S[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=El(e),i=_l(e),o=jl(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Dl(s)),[s,Dl(s)]}(i,s,y);I.push(S[e[0]],S[e[1]])}if(E=[...E,{placement:i,overflows:I}],!I.every((e=>e<=0))){var A,j;const e=((null==(A=o.flip)?void 0:A.index)||0)+1,t=k[e];if(t){var M;const n="alignment"===d&&x!==Ml(t),r=(null==(M=E[0])?void 0:M.overflows[0])>0;if(!n||r)return{data:{index:e,overflows:E},reset:{placement:t}}}let n=null==(j=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:j.placement;if(!n)switch(g){case"bestFit":{var _;const e=null==(_=E.filter((e=>{if(w){const t=Ml(e.placement);return t===x||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:_[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},kc=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:l=(()=>{}),...c}=Sl(e,t),u=await tc(t,c),d=Il(i),h=El(i),g="y"===Ml(i),{width:f,height:p}=o.floating;let m,v;"top"===d||"bottom"===d?(m=d,v=h===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,m="end"===h?"top":"bottom");const x=p-u.top-u.bottom,b=f-u.left-u.right,y=ml(p-u[m],x),C=ml(f-u[v],b),w=!t.middlewareData.shift;let k=y,S=C;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(S=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=x),w&&!h){const e=vl(u.left,0),t=vl(u.right,0),n=vl(u.top,0),r=vl(u.bottom,0);g?S=f-2*(0!==e||0!==t?e+t:vl(u.left,u.right)):k=p-2*(0!==n||0!==r?n+r:vl(u.top,u.bottom))}await l({...t,availableWidth:S,availableHeight:k});const I=await s.getDimensions(a.floating);return f!==I.width||p!==I.height?{reset:{rects:!0}}:{}}}},Sc=(e,t,n)=>{const r=new Map,i={platform:mc,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=ec(c,r,l),h=r,g={},f=0;for(let n=0;n<a.length;n++){const{name:o,fn:p}=a[n],{x:m,y:v,data:x,reset:b}=await p({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:g,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=m?m:u,d=null!=v?v:d,g={...g,[o]:{...g[o],...x}},b&&f<=50&&(f++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=ec(c,h,l))),n=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:g}})(e,t,{...i,platform:o})};var Ic="undefined"!=typeof document?s.useLayoutEffect:s.useEffect;function Ec(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!Ec(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Ec(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function Ac(e){if("undefined"==typeof self)return 1;return(e.ownerDocument.defaultView||self).devicePixelRatio||1}function jc(e,t){const n=Ac(e);return Math.round(t*n)/n}function Mc(e){const t=s.useRef(e);return Ic((()=>{t.current=e})),t}const _c=(e,t)=>({...yc(e),options:[e,t]}),Rc=(e,t)=>({...wc(e),options:[e,t]}),Dc=(e,t)=>({...kc(e),options:[e,t]});const Tc={...a},Oc=Tc.useInsertionEffect||(e=>e());function Pc(e){const t=s.useRef((()=>{0}));return Oc((()=>{t.current=e})),s.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}const Lc="ArrowUp",Nc="ArrowDown",Fc="ArrowLeft",Bc="ArrowRight";var zc="undefined"!=typeof document?s.useLayoutEffect:s.useEffect;const Hc=[Fc,Bc],Uc=[Lc,Nc];let $c=!1,Wc=0;const Vc=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Wc++;const Gc=Tc.useId||function(){const[e,t]=s.useState((()=>$c?Vc():void 0));return zc((()=>{null==e&&t(Vc())}),[]),s.useEffect((()=>{$c=!0}),[]),e};function Zc(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}const qc=s.createContext(null),Kc=s.createContext(null),Jc=()=>{var e;return(null==(e=s.useContext(qc))?void 0:e.id)||null},Yc=()=>s.useContext(Kc);const Xc="data-floating-ui-focusable";function Qc(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Gc(),o=s.useRef({}),[a]=s.useState((()=>Zc())),l=null!=Jc(),[c,u]=s.useState(r.reference),d=Pc(((e,t,r)=>{o.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)})),h=s.useMemo((()=>({setPositionReference:u})),[]),g=s.useMemo((()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference})),[c,r.reference,r.floating]);return s.useMemo((()=>({dataRef:o,open:t,onOpenChange:d,elements:g,events:a,floatingId:i,refs:h})),[t,d,g,a,i,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,a]=s.useState(null),[l,c]=s.useState(null),u=(null==i?void 0:i.domReference)||o,d=s.useRef(null),h=Yc();zc((()=>{u&&(d.current=u)}),[u]);const g=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=s.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,f]=s.useState(r);Ec(g,r)||f(r);const[p,m]=s.useState(null),[v,x]=s.useState(null),b=s.useCallback((e=>{e!==k.current&&(k.current=e,m(e))}),[]),y=s.useCallback((e=>{e!==S.current&&(S.current=e,x(e))}),[]),C=o||p,w=a||v,k=s.useRef(null),S=s.useRef(null),I=s.useRef(d),E=null!=c,A=Mc(c),j=Mc(i),M=Mc(u),_=s.useCallback((()=>{if(!k.current||!S.current)return;const e={placement:t,strategy:n,middleware:g};j.current&&(e.platform=j.current),Sc(k.current,S.current,e).then((e=>{const t={...e,isPositioned:!1!==M.current};R.current&&!Ec(I.current,t)&&(I.current=t,X.flushSync((()=>{h(t)})))}))}),[g,t,n,j,M]);Ic((()=>{!1===u&&I.current.isPositioned&&(I.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const R=s.useRef(!1);Ic((()=>(R.current=!0,()=>{R.current=!1})),[]),Ic((()=>{if(C&&(k.current=C),w&&(S.current=w),C&&w){if(A.current)return A.current(C,w,_);_()}}),[C,w,_,A,E]);const D=s.useMemo((()=>({reference:k,floating:S,setReference:b,setFloating:y})),[b,y]),T=s.useMemo((()=>({reference:C,floating:w})),[C,w]),O=s.useMemo((()=>{const e={position:n,left:0,top:0};if(!T.floating)return e;const t=jc(T.floating,d.x),r=jc(T.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",...Ac(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,l,T.floating,d.x,d.y]);return s.useMemo((()=>({...d,update:_,refs:D,elements:T,floatingStyles:O})),[d,_,D,T,O])}({...e,elements:{...i,...l&&{reference:l}}}),f=s.useCallback((e=>{const t=Bl(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;c(t),g.refs.setReference(t)}),[g.refs]),p=s.useCallback((e=>{(Bl(e)||null===e)&&(d.current=e,a(e)),(Bl(g.refs.reference.current)||null===g.refs.reference.current||null!==e&&!Bl(e))&&g.refs.setReference(e)}),[g.refs]),m=s.useMemo((()=>({...g.refs,setReference:p,setPositionReference:f,domReference:d})),[g.refs,p,f]),v=s.useMemo((()=>({...g.elements,domReference:u})),[g.elements,u]),x=s.useMemo((()=>({...g,...r,refs:m,elements:v,nodeId:t})),[g,m,v,t,r]);return zc((()=>{r.dataRef.current.floatingContext=x;const e=null==h?void 0:h.nodesRef.current.find((e=>e.id===t));e&&(e.context=x)})),s.useMemo((()=>({...g,context:x,refs:m,elements:v})),[g,m,v,x])}const eu="active",tu="selected";function nu(e,t,n){const r=new Map,i="item"===n;let o=e;if(i&&e){const{[eu]:t,[tu]:n,...r}=e;o=r}return{..."floating"===n&&{tabIndex:-1,[Xc]:""},...o,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,o]=t;var s;i&&[eu,tu].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof o&&(null==(s=r.get(n))||s.push(o),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return null==(e=r.get(n))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[n]=o)})),e):e),{})}}function ru(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}let iu=(0,s.createContext)({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});iu.displayName="FloatingContext";let ou=(0,s.createContext)(null);function su(e=null){!1===e&&(e=null),"string"==typeof e&&(e={to:e});let t=(0,s.useContext)(ou),n=(0,s.useMemo)((()=>e),[JSON.stringify(e,((e,t)=>{var n;return null!=(n=null==t?void 0:t.outerHTML)?n:t}))]);Us((()=>{null==t||t(null!=n?n:null)}),[t,n]);let r=(0,s.useContext)(iu);return(0,s.useMemo)((()=>[r.setFloating,e?r.styles:{}]),[r.setFloating,e,r.styles])}ou.displayName="PlacementContext";function au({children:e,enabled:t=!0}){let[n,r]=(0,s.useState)(null),[i,o]=(0,s.useState)(0),a=(0,s.useRef)(null),[l,c]=(0,s.useState)(null);!function(e){Us((()=>{if(!e)return;let t=new MutationObserver((()=>{let t=self.getComputedStyle(e).maxHeight,n=parseFloat(t);if(isNaN(n))return;let r=parseInt(t);isNaN(r)||n!==r&&(e.style.maxHeight=`${Math.ceil(n)}px`)}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}}),[e])}(l);let u=t&&null!==n&&null!==l,{to:d="bottom",gap:h=0,offset:g=0,padding:f=0,inner:p}=function(e,t){var n,r,i;let o=lu(null!=(n=null==e?void 0:e.gap)?n:"var(--anchor-gap, 0)",t),s=lu(null!=(r=null==e?void 0:e.offset)?r:"var(--anchor-offset, 0)",t),a=lu(null!=(i=null==e?void 0:e.padding)?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:s,padding:a}}(n,l),[m,v="center"]=d.split(" ");Us((()=>{u&&o(0)}),[u]);let{refs:x,floatingStyles:b,context:y}=Qc({open:u,placement:"selection"===m?"center"===v?"bottom":`bottom-${v}`:"center"===v?`${m}`:`${m}-${v}`,strategy:"absolute",transform:!1,middleware:[_c({mainAxis:"selection"===m?0:h,crossAxis:g}),(S={padding:f},{...Cc(S),options:[S,I]}),"selection"!==m&&Rc({padding:f}),"selection"===m&&p?(k={...p,padding:f,overflowRef:a,offset:i,minItemsVisible:4,referenceOverflowThreshold:f,onFallbackChange(e){var t,n;if(!e)return;let r=y.elements.floating;if(!r)return;let i=parseFloat(getComputedStyle(r).scrollPaddingBottom)||0,s=Math.min(4,r.childElementCount),a=0,l=0;for(let e of null!=(n=null==(t=y.elements.floating)?void 0:t.childNodes)?n:[])if(Xs(e)){let t=e.offsetTop,n=t+e.clientHeight+i,o=r.scrollTop,c=o+r.clientHeight;if(!(t>=o&&n<=c)){l=Math.max(0,Math.min(n,c)-Math.max(t,o)),a=e.clientHeight;break}s--}s>=1&&o((e=>{let t=a*s-l+i;return e>=t?e:t}))}},{name:"inner",options:k,async fn(e){const{listRef:t,overflowRef:n,onFallbackChange:r,offset:i=0,index:o=0,minItemsVisible:s=4,referenceOverflowThreshold:a=0,scrollRef:l,...c}=Sl(k,e),{rects:u,elements:{floating:d}}=e,h=t.current[o],g=(null==l?void 0:l.current)||d,f=d.clientTop||g.clientTop,p=0!==d.clientTop,m=0!==g.clientTop,v=d===g;if(!h)return{};const x={...e,...await _c(-h.offsetTop-d.clientTop-u.reference.height/2-h.offsetHeight/2-i).fn(e)},b=await bc(ru(x,g.scrollHeight+f+d.clientTop),c),y=await bc(x,{...c,elementContext:"reference"}),C=vl(0,b.top),w=x.y+C,S=g.scrollHeight>g.clientHeight?e=>e:xl,I=S(vl(0,g.scrollHeight+(p&&v||m?2*f:0)-C-vl(0,b.bottom)));if(g.style.maxHeight=I+"px",g.scrollTop=C,r){const e=g.offsetHeight<h.offsetHeight*ml(s,t.current.length)-1||y.top>=-a||y.bottom>=-a;X.flushSync((()=>r(e)))}return n&&(n.current=await bc(ru({...x,y:w},g.offsetHeight+f+d.clientTop),c)),{y:w}}}):null,Dc({padding:f,apply({availableWidth:e,availableHeight:t,elements:n}){Object.assign(n.floating.style,{overflow:"auto",maxWidth:`${e}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${t}px)`})}})].filter(Boolean),whileElementsMounted:xc}),[C=m,w=v]=y.placement.split("-");var k,S,I;"selection"===m&&(C="selection");let E=(0,s.useMemo)((()=>({anchor:[C,w].filter(Boolean).join(" ")})),[C,w]),A=function(e,t){const{open:n,elements:r}=e,{enabled:i=!0,overflowRef:o,scrollRef:a,onChange:l}=t,c=Pc(l),u=s.useRef(!1),d=s.useRef(null),h=s.useRef(null);s.useEffect((()=>{if(!i)return;function e(e){if(e.ctrlKey||!t||null==o.current)return;const n=e.deltaY,r=o.current.top>=-.5,i=o.current.bottom>=-.5,s=t.scrollHeight-t.clientHeight,a=n<0?-1:1,l=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!i&&n<0?(e.preventDefault(),X.flushSync((()=>{c((e=>e+Math[l](n,s*a)))}))):/firefox/i.test(pl())&&(t.scrollTop+=n))}const t=(null==a?void 0:a.current)||r.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{d.current=t.scrollTop,null!=o.current&&(h.current={...o.current})})),()=>{d.current=null,h.current=null,t.removeEventListener("wheel",e)}):void 0}),[i,n,r.floating,o,a,c]);const g=s.useMemo((()=>({onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const e=(null==a?void 0:a.current)||r.floating;if(o.current&&e&&u.current){if(null!==d.current){const t=e.scrollTop-d.current;(o.current.bottom<-.5&&t<-1||o.current.top<-.5&&t>1)&&X.flushSync((()=>c((e=>e+t))))}requestAnimationFrame((()=>{d.current=e.scrollTop}))}}})),[r.floating,c,o,a]);return s.useMemo((()=>i?{floating:g}:{}),[i,g])}(y,{overflowRef:a,onChange:o}),{getReferenceProps:j,getFloatingProps:M}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),i=s.useCallback((t=>nu(t,e,"reference")),t),o=s.useCallback((t=>nu(t,e,"floating")),n),a=s.useCallback((t=>nu(t,e,"item")),r);return s.useMemo((()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a})),[i,o,a])}([A]),_=Ws((e=>{c(e),x.setFloating(e)}));return s.createElement(ou.Provider,{value:r},s.createElement(iu.Provider,{value:{setFloating:_,setReference:x.setReference,styles:b,getReferenceProps:j,getFloatingProps:M,slot:E}},e))}function lu(e,t,n){let r=Hs(),i=Ws(((e,t)=>{if(null==e)return[n,null];if("number"==typeof e)return[e,null];if("string"==typeof e){if(!t)return[n,null];let i=uu(e,t);return[i,n=>{let o=cu(e);{let s=o.map((e=>self.getComputedStyle(t).getPropertyValue(e)));r.requestAnimationFrame((function a(){r.nextFrame(a);let l=!1;for(let[e,n]of o.entries()){let r=self.getComputedStyle(t).getPropertyValue(n);if(s[e]!==r){s[e]=r,l=!0;break}}if(!l)return;let c=uu(e,t);i!==c&&(n(c),i=c)}))}return r.dispose}]}return[n,null]})),o=(0,s.useMemo)((()=>i(e,t)[0]),[e,t]),[a=o,l]=(0,s.useState)();return Us((()=>{let[n,r]=i(e,t);if(l(n),r)return r(l)}),[e,t]),a}function cu(e){let t=/var\((.*)\)/.exec(e);if(t){let e=t[1].indexOf(",");if(-1===e)return[t[1]];let n=t[1].slice(0,e).trim(),r=t[1].slice(e+1).trim();return r?[n,...cu(r)]:[n]}return[]}function uu(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(self.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}function du(e={},t=null,n=[]){for(let[r,i]of Object.entries(e))gu(n,hu(t,r),i);return n}function hu(e,t){return e?e+"["+t+"]":t}function gu(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())gu(e,hu(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}(n)&&!(0,s.isValidElement)(n)&&du(n,t,e)}function fu(...e){return Array.from(new Set(e.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}var pu=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(pu||{}),mu=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(mu||{});function vu(){let e=function(){let e=(0,s.useRef)([]),t=(0,s.useCallback)((t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)}),[]);return(...n)=>{if(!n.every((e=>null==e)))return e.current=n,t}}();return(0,s.useCallback)((t=>function({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:s,mergeRefs:a}){a=null!=a?a:bu;let l=yu(t,e);if(o)return xu(l,n,r,s,a);let c=null!=i?i:0;if(2&c){let{static:e=!1,...t}=l;if(e)return xu(t,n,r,s,a)}if(1&c){let{unmount:e=!0,...t}=l;return ba(e?0:1,{0:()=>null,1:()=>xu({...t,hidden:!0,style:{display:"none"}},n,r,s,a)})}return xu(l,n,r,s,a)}({mergeRefs:e,...t})),[e])}function xu(e,t={},n,r,i){let{as:o=n,children:a,refName:l="ref",...c}=Su(e,["unmount","static"]),u=void 0!==e.ref?{[l]:e.ref}:{},d="function"==typeof a?a(t):a;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(t){let e=!1,n=[];for(let[r,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&n.push(r.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)));if(e){h["data-headlessui-state"]=n.join(" ");for(let e of n)h[`data-${e}`]=""}}if(Eu(o)&&(Object.keys(ku(c)).length>0||Object.keys(ku(h)).length>0)){if(!(!(0,s.isValidElement)(d)||Array.isArray(d)&&d.length>1||function(e){return Eu(e.type)}(d))){let e=d.props,t=null==e?void 0:e.className,n="function"==typeof t?(...e)=>fu(t(...e),c.className):fu(t,c.className),r=n?{className:n}:{},o=yu(d.props,ku(Su(c,["ref"])));for(let e in h)e in o&&delete h[e];return(0,s.cloneElement)(d,Object.assign({},o,h,u,{ref:i(Iu(d),u.ref)},r))}if(Object.keys(ku(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ku(c)).concat(Object.keys(ku(h))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"))}return(0,s.createElement)(o,Object.assign({},Su(c,["ref"]),!Eu(o)&&u,!Eu(o)&&h),d)}function bu(...e){return e.every((e=>null==e))?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function yu(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])for(let e in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(e)&&(n[e]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let e in n)Object.assign(t,{[e](t,...r){let i=n[e];for(let e of i){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;e(t,...r)}}});return t}function Cu(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];for(let e in n)Object.assign(t,{[e](...t){let r=n[e];for(let e of r)null==e||e(...t)}});return t}function wu(e){var t;return Object.assign((0,s.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function ku(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function Su(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}function Iu(e){return s.version.split(".")[0]>="19"?e.props.ref:e.ref}function Eu(e){return e===s.Fragment||e===Symbol.for("react.fragment")}var Au=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Au||{});let ju=wu((function(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":2==(2&r)||(null!=(n=i["aria-hidden"])?n:void 0),hidden:4==(4&r)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&r)&&2!=(2&r)&&{display:"none"}}};return vu()({ourProps:o,theirProps:i,slot:{},defaultTag:"span",name:"Hidden"})})),Mu=(0,s.createContext)(null);function _u({children:e}){let t=(0,s.useContext)(Mu);if(!t)return s.createElement(s.Fragment,null,e);let{target:n}=t;return n?(0,X.createPortal)(s.createElement(s.Fragment,null,e),n):null}function Ru({data:e,form:t,disabled:n,onReset:r,overrides:i}){let[o,a]=(0,s.useState)(null),l=Hs();return(0,s.useEffect)((()=>{if(r&&o)return l.addEventListener(o,"reset",r)}),[o,t,r]),s.createElement(_u,null,s.createElement(Du,{setForm:a,formId:t}),du(e).map((([e,r])=>s.createElement(ju,{features:Au.Hidden,...ku({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:t,disabled:n,name:e,value:r,...i})}))))}function Du({setForm:e,formId:t}){return(0,s.useEffect)((()=>{if(t){let n=document.getElementById(t);n&&e(n)}}),[e,t]),t?null:s.createElement(ju,{features:Au.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let n=t.closest("form");n&&e(n)}})}const Tu=s.forwardRef((function({children:e,freeze:t},n){let r=Ou(t,e);return(0,s.isValidElement)(r)?(0,s.cloneElement)(r,{ref:n}):s.createElement(s.Fragment,null,r)}));function Ou(e,t){let[n,r]=(0,s.useState)(t);return!e&&n!==t&&r(t),e?n:t}let Pu=(0,s.createContext)(void 0);function Lu(){return(0,s.useContext)(Pu)}let Nu=(0,s.createContext)(null);Nu.displayName="OpenClosedContext";var Fu=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Fu||{});function Bu({value:e,children:t}){return s.createElement(Nu.Provider,{value:e},t)}let zu=[];!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof self&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}((()=>{function e(e){if(!Qs(e.target)||e.target===document.body||zu[0]===e.target)return;let t=e.target;t=t.closest(Oa),zu.unshift(null!=t?t:e.target),zu=zu.filter((e=>null!=e&&e.isConnected)),zu.splice(10)}self.addEventListener("click",e,{capture:!0}),self.addEventListener("mousedown",e,{capture:!0}),self.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})}));var Hu=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Hu||{});function Uu(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=null!=r?r:-1;switch(e.focus){case 0:for(let e=0;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 1:-1===i&&(i=n.length);for(let e=i-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 2:for(let e=i+1;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 3:for(let e=n.length-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 4:for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return r;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}let $u=(0,s.createContext)(null);function Wu(){let e=(0,s.useContext)($u);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Wu),e}return e}$u.displayName="DescriptionContext";let Vu=wu((function(e,t){let n=(0,s.useId)(),r=fl(),{id:i=`headlessui-description-${n}`,...o}=e,a=Wu(),l=il(t);Us((()=>a.register(i)),[i,a.register]);let c=nl({...a.slot,disabled:r||!1}),u={ref:l,...a.props,id:i};return vu()({ourProps:u,theirProps:o,slot:c,defaultTag:"p",name:a.name||"Description"})}));Object.assign(Vu,{});var Gu=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Gu||{});let Zu=(0,s.createContext)(null);function qu(){let e=(0,s.useContext)(Zu);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,qu),e}return e}function Ku(e){var t,n,r;let i=null!=(n=null==(t=(0,s.useContext)(Zu))?void 0:t.value)?n:void 0;return(null!=(r=null==e?void 0:e.length)?r:0)>0?[i,...e].filter(Boolean).join(" "):i}Zu.displayName="LabelContext";let Ju=wu((function(e,t){var n;let r=(0,s.useId)(),i=qu(),o=Lu(),a=fl(),{id:l=`headlessui-label-${r}`,htmlFor:c=(null!=o?o:null==(n=i.props)?void 0:n.htmlFor),passive:u=!1,...d}=e,h=il(t);Us((()=>i.register(l)),[l,i.register]);let g=Ws((e=>{let t=e.currentTarget;if((e.target===e.currentTarget||!function(e){return!!Ys(e)&&e.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]')}(e.target))&&(ta(t)&&e.preventDefault(),i.props&&"onClick"in i.props&&"function"==typeof i.props.onClick&&i.props.onClick(e),ta(t))){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(ea(e)&&("file"===e.type||"radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}})),f=nl({...i.slot,disabled:a||!1}),p={ref:h,...i.props,id:l,htmlFor:c,onClick:g};return u&&("onClick"in p&&(delete p.htmlFor,delete p.onClick),"onClick"in d&&delete d.onClick),vu()({ourProps:p,theirProps:d,slot:f,defaultTag:c?"label":"div",name:i.name||"Label"})})),Yu=Object.assign(Ju,{});function Xu(e){let t=Ws(e),n=(0,s.useRef)(!1);(0,s.useEffect)((()=>(n.current=!1,()=>{n.current=!0,Bs((()=>{n.current&&t()}))})),[t])}let Qu=(0,s.createContext)(!1);function ed(e){let t=(0,s.useContext)(Qu),n=(0,s.useContext)(id),[r,i]=(0,s.useState)((()=>{var r;if(!t&&null!==n)return null!=(r=n.current)?r:null;if(Ps.isServer)return null;let i=null==e?void 0:e.getElementById("headlessui-portal-root");if(i)return i;if(null===e)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)}));return(0,s.useEffect)((()=>{null!==r&&(null!=e&&e.body.contains(r)||null==e||e.body.appendChild(r))}),[r,e]),(0,s.useEffect)((()=>{t||null!==n&&i(n.current)}),[n,i,t]),r}let td=s.Fragment,nd=wu((function(e,t){let{ownerDocument:n=null,...r}=e,i=(0,s.useRef)(null),o=il(function(e,t=!0){return Object.assign(e,{[rl]:t})}((e=>{i.current=e})),t),a=Ga(i.current),l=ed(null!=n?n:a),c=(0,s.useContext)(od),u=Hs(),d=vu();return Xu((()=>{var e;l&&l.childNodes.length<=0&&(null==(e=l.parentElement)||e.removeChild(l))})),l?(0,X.createPortal)(s.createElement("div",{"data-headlessui-portal":"",ref:e=>{u.dispose(),c&&e&&u.add(c.register(e))}},d({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:td,name:"Portal"})),l):null}));let rd=s.Fragment,id=(0,s.createContext)(null);let od=(0,s.createContext)(null);let sd=wu((function(e,t){let n=il(t),{enabled:r=!0,ownerDocument:i,...o}=e,a=vu();return r?s.createElement(nd,{...o,ownerDocument:i,ref:n}):a({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:td,name:"Portal"})})),ad=wu((function(e,t){let{target:n,...r}=e,i={ref:il(t)},o=vu();return s.createElement(id.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:rd,name:"Popover.Group"}))})),ld=Object.assign(sd,{Group:ad});const cd={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function ud(e){let t=e.getBoundingClientRect();return`${t.x},${t.y}`}var dd=Object.defineProperty,hd=(e,t,n)=>(((e,t,n)=>{t in e?dd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),gd=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(gd||{}),fd=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(fd||{}),pd=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(pd||{}),md=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.DefaultToFirstOption=6]="DefaultToFirstOption",e[e.SetActivationTrigger=7]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",e[e.SetInputElement=9]="SetInputElement",e[e.SetButtonElement=10]="SetButtonElement",e[e.SetOptionsElement=11]="SetOptionsElement",e[e.MarkInputAsMoved=12]="MarkInputAsMoved",e))(md||{});function vd(e,t=(e=>e)){let n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=t(e.options.slice()),i=r.length>0&&null!==r[0].dataRef.current.order?r.sort(((e,t)=>e.dataRef.current.order-t.dataRef.current.order)):Ha(r,(e=>e.dataRef.current.domRef.current)),o=n?i.indexOf(n):null;return-1===o&&(o=null),{options:i,activeOptionIndex:o}}let xd={1(e){var t;if(null!=(t=e.dataRef.current)&&t.disabled||1===e.comboboxState)return e;let n=e.inputElement?cd.Tracked(ud(e.inputElement)):e.inputPositionState;return{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,inputPositionState:n,__demoMode:!1}},0(e){var t,n;if(null!=(t=e.dataRef.current)&&t.disabled||0===e.comboboxState)return e;if(null!=(n=e.dataRef.current)&&n.value){let t=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(-1!==t)return{...e,activeOptionIndex:t,comboboxState:0,__demoMode:!1,inputPositionState:cd.Idle}}return{...e,comboboxState:0,inputPositionState:cd.Idle,__demoMode:!1}},3:(e,t)=>e.isTyping===t.isTyping?e:{...e,isTyping:t.isTyping},2(e,t){var n,r,i,o;if(null!=(n=e.dataRef.current)&&n.disabled||e.optionsElement&&(null==(r=e.dataRef.current)||!r.optionsPropsRef.current.static)&&1===e.comboboxState)return e;if(e.virtual){let{options:n,disabled:r}=e.virtual,o=t.focus===Hu.Specific?t.idx:Uu(t,{resolveItems:()=>n,resolveActiveIndex:()=>{var t,i;return null!=(i=null!=(t=e.activeOptionIndex)?t:n.findIndex((e=>!r(e))))?i:null},resolveDisabled:r,resolveId(){throw new Error("Function not implemented.")}}),s=null!=(i=t.trigger)?i:2;return e.activeOptionIndex===o&&e.activationTrigger===s?e:{...e,activeOptionIndex:o,activationTrigger:s,isTyping:!1,__demoMode:!1}}let s=vd(e);if(null===s.activeOptionIndex){let e=s.options.findIndex((e=>!e.dataRef.current.disabled));-1!==e&&(s.activeOptionIndex=e)}let a=t.focus===Hu.Specific?t.idx:Uu(t,{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled}),l=null!=(o=t.trigger)?o:2;return e.activeOptionIndex===a&&e.activationTrigger===l?e:{...e,...s,isTyping:!1,activeOptionIndex:a,activationTrigger:l,__demoMode:!1}},4:(e,t)=>{var n,r,i,o;if(null!=(n=e.dataRef.current)&&n.virtual)return{...e,options:[...e.options,t.payload]};let s=t.payload,a=vd(e,(e=>(e.push(s),e)));null===e.activeOptionIndex&&null!=(i=(r=e.dataRef.current).isSelected)&&i.call(r,t.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(s));let l={...e,...a,activationTrigger:2};return null!=(o=e.dataRef.current)&&o.__demoMode&&void 0===e.dataRef.current.value&&(l.activeOptionIndex=0),l},5:(e,t)=>{var n;if(null!=(n=e.dataRef.current)&&n.virtual)return{...e,options:e.options.filter((e=>e.id!==t.id))};let r=vd(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...r,activationTrigger:2}},6:(e,t)=>e.defaultToFirstOption===t.value?e:{...e,defaultToFirstOption:t.value},7:(e,t)=>e.activationTrigger===t.trigger?e:{...e,activationTrigger:t.trigger},8:(e,t)=>{var n,r;if(null===e.virtual)return{...e,virtual:{options:t.options,disabled:null!=(n=t.disabled)?n:()=>!1}};if(e.virtual.options===t.options&&e.virtual.disabled===t.disabled)return e;let i=e.activeOptionIndex;if(null!==e.activeOptionIndex){let n=t.options.indexOf(e.virtual.options[e.activeOptionIndex]);i=-1!==n?n:null}return{...e,activeOptionIndex:i,virtual:{options:t.options,disabled:null!=(r=t.disabled)?r:()=>!1}}},9:(e,t)=>e.inputElement===t.element?e:{...e,inputElement:t.element},10:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},11:(e,t)=>e.optionsElement===t.element?e:{...e,optionsElement:t.element},12:e=>"Tracked"!==e.inputPositionState.kind?e:{...e,inputPositionState:cd.Moved}};class bd extends pa{constructor(e){super(e),hd(this,"actions",{onChange:e=>{let{onChange:t,compare:n,mode:r,value:i}=this.state.dataRef.current;return ba(r,{0:()=>null==t?void 0:t(e),1:()=>{let r=i.slice(),o=r.findIndex((t=>n(t,e)));return-1===o?r.push(e):r.splice(o,1),null==t?void 0:t(r)}})},registerOption:(e,t)=>(this.send({type:4,payload:{id:e,dataRef:t}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(t.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,t)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:t})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,t;this.send({type:1}),this.send({type:6,value:!1}),null==(t=(e=this.state.dataRef.current).onClose)||t.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(null!==e){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:t}=this.state.options[e];this.actions.onChange(t.current.value)}this.actions.goToOption({focus:Hu.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),hd(this,"selectors",{activeDescendantId:e=>{var t,n;let r=this.selectors.activeOptionIndex(e);if(null!==r)return e.virtual?null==(n=e.options.find((t=>!t.dataRef.current.disabled&&e.dataRef.current.compare(t.dataRef.current.value,e.virtual.options[r]))))?void 0:n.id:null==(t=e.options[r])?void 0:t.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&null===e.activeOptionIndex&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:t,disabled:n}=e.virtual,r=t.findIndex((e=>{var t;return!(null!=(t=null==n?void 0:n(e))&&t)}));if(-1!==r)return r}let t=e.options.findIndex((e=>!e.dataRef.current.disabled));if(-1!==t)return t}return e.activeOptionIndex},activeOption:e=>{var t,n;let r=this.selectors.activeOptionIndex(e);return null===r?null:e.virtual?e.virtual.options[null!=r?r:0]:null!=(n=null==(t=e.options[r])?void 0:t.dataRef.current.value)?n:null},isActive:(e,t,n)=>{var r;let i=this.selectors.activeOptionIndex(e);return null!==i&&(e.virtual?i===e.dataRef.current.calculateIndex(t):(null==(r=e.options[i])?void 0:r.id)===n)},shouldScrollIntoView:(e,t,n)=>!(e.virtual||e.__demoMode||0!==e.comboboxState||0===e.activationTrigger||!this.selectors.isActive(e,t,n)),didInputMove:e=>"Moved"===e.inputPositionState.kind});{let e=this.state.id,t=Ia.get(null);this.disposables.add(t.on(wa.Push,(n=>{!t.selectors.isTop(n,e)&&0===this.state.comboboxState&&this.actions.closeCombobox()}))),this.on(0,(()=>t.actions.push(e))),this.on(1,(()=>t.actions.pop(e)))}this.disposables.group((e=>{this.on(1,(t=>{t.inputElement&&(e.dispose(),e.add(function(e,t,n){let r=zs();if("Tracked"===t.kind){let i=function(){o!==ud(e)&&(r.dispose(),n())},{position:o}=t,s=new ResizeObserver(i);s.observe(e),r.add((()=>s.disconnect())),r.addEventListener(self,"scroll",i,{passive:!0}),r.addEventListener(self,"resize",i)}return()=>r.dispose()}(t.inputElement,t.inputPositionState,(()=>{this.send({type:12})}))))}))}))}static new({id:e,virtual:t=null,__demoMode:n=!1}){var r;return new bd({id:e,dataRef:{current:{}},comboboxState:n?0:1,isTyping:!1,options:[],virtual:t?{options:t.options,disabled:null!=(r=t.disabled)?r:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:n,inputPositionState:cd.Idle})}reduce(e,t){return ba(t.type,xd,e,t)}}const yd=(0,s.createContext)(null);function Cd(e){let t=(0,s.useContext)(yd);if(null===t){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,wd),t}return t}function wd({id:e,virtual:t=null,__demoMode:n=!1}){let r=(0,s.useMemo)((()=>bd.new({id:e,virtual:t,__demoMode:n})),[]);return Xu((()=>r.dispose())),r}let kd=(0,s.createContext)(null);function Sd(e){let t=(0,s.useContext)(kd);if(null===t){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Sd),t}return t}kd.displayName="ComboboxDataContext";let Id=(0,s.createContext)(null);function Ed(e){let t=Cd("VirtualProvider"),n=Sd("VirtualProvider"),{options:r}=n.virtual,i=Aa(t,(e=>e.optionsElement)),[o,a]=(0,s.useMemo)((()=>{let e=i;if(!e)return[0,0];let t=self.getComputedStyle(e);return[parseFloat(t.paddingBlockStart||t.paddingTop),parseFloat(t.paddingBlockEnd||t.paddingBottom)]}),[i]),l=(d={enabled:0!==r.length,scrollPaddingStart:o,scrollPaddingEnd:a,count:r.length,estimateSize:()=>40,getScrollElement:()=>t.state.optionsElement,overscan:12},Ds({observeElementRect:ks,observeElementOffset:Es,scrollToFn:js,...d})),[c,u]=(0,s.useState)(0);var d;Us((()=>{u((e=>e+1))}),[r]);let h=l.getVirtualItems(),g=Aa(t,(e=>e.activationTrigger===pd.Pointer)),f=Aa(t,t.selectors.activeOptionIndex);return 0===h.length?null:s.createElement(Id.Provider,{value:l},s.createElement("div",{style:{position:"relative",width:"100%",height:`${l.getTotalSize()}px`},ref:e=>{e&&(g||null!==f&&r.length>f&&l.scrollToIndex(f))}},h.map((t=>{var n;return s.createElement(s.Fragment,{key:t.key},s.cloneElement(null==(n=e.children)?void 0:n.call(e,{...e.slot,option:r[t.index]}),{key:`${c}-${t.key}`,"data-index":t.index,"aria-setsize":r.length,"aria-posinset":t.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${t.start}px)`,overflowAnchor:"none"}}))}))))}let Ad=s.Fragment;let jd=pu.RenderStrategy|pu.Static;let Md=wu((function(e,t){let n=(0,s.useId)(),r=fl(),{value:i,defaultValue:o,onChange:a,form:l,name:c,by:u,invalid:d=!1,disabled:h=r||!1,onClose:g,__demoMode:f=!1,multiple:p=!1,immediate:m=!1,virtual:v=null,nullable:x,...b}=e,y=function(e){let[t]=(0,s.useState)(e);return t}(o),[C=(p?[]:void 0),w]=function(e,t,n){let[r,i]=(0,s.useState)(n),o=void 0!==e,a=(0,s.useRef)(o),l=(0,s.useRef)(!1),c=(0,s.useRef)(!1);return!o||a.current||l.current?!o&&a.current&&!c.current&&(c.current=!0,a.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(l.current=!0,a.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:r,Ws((e=>(o||(0,X.flushSync)((()=>i(e))),null==t?void 0:t(e))))]}(i,a,y),k=wd({id:n,virtual:v,__demoMode:f}),S=(0,s.useRef)({static:!1,hold:!1}),I=function(e=Gs){return(0,s.useCallback)(((t,n)=>{if("string"==typeof e){let r=e;return(null==t?void 0:t[r])===(null==n?void 0:n[r])}return e(t,n)}),[e])}(u),E=Ws((e=>v?null===u?v.options.indexOf(e):v.options.findIndex((t=>I(t,e))):k.state.options.findIndex((t=>I(t.dataRef.current.value,e))))),A=(0,s.useCallback)((e=>ba(_.mode,{[fd.Multi]:()=>C.some((t=>I(t,e))),[fd.Single]:()=>I(C,e)})),[C]),j=Aa(k,(e=>e.virtual)),M=Ws((()=>null==g?void 0:g())),_=(0,s.useMemo)((()=>({__demoMode:f,immediate:m,optionsPropsRef:S,value:C,defaultValue:y,disabled:h,invalid:d,mode:p?fd.Multi:fd.Single,virtual:v?j:null,onChange:w,isSelected:A,calculateIndex:E,compare:I,onClose:M})),[f,m,S,C,y,h,d,p,v,j,w,A,E,I,M]);Us((()=>{var e;v&&k.send({type:md.UpdateVirtualConfiguration,options:v.options,disabled:null!=(e=v.disabled)?e:null})}),[v,null==v?void 0:v.options,null==v?void 0:v.disabled]),Us((()=>{k.state.dataRef.current=_}),[_]);let[R,D,T,O]=Aa(k,(e=>[e.comboboxState,e.buttonElement,e.inputElement,e.optionsElement])),P=Ia.get(null);Va(Aa(P,(0,s.useCallback)((e=>P.selectors.isTop(e,n)),[P,n])),[D,T,O],(()=>k.actions.closeCombobox()));let L=Aa(k,k.selectors.activeOptionIndex),N=Aa(k,k.selectors.activeOption),F=nl({open:R===gd.Open,disabled:h,invalid:d,activeIndex:L,activeOption:N,value:C}),[B,z]=function({inherit:e=!1}={}){let t=Ku(),[n,r]=(0,s.useState)([]),i=e?[t,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,(0,s.useMemo)((()=>function(e){let t=Ws((e=>(r((t=>[...t,e])),()=>r((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),n=(0,s.useMemo)((()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value})),[t,e.slot,e.name,e.props,e.value]);return s.createElement(Zu.Provider,{value:n},e.children)}),[r])]}(),H=null===t?{}:{ref:t},U=(0,s.useCallback)((()=>{if(void 0!==y)return null==w?void 0:w(y)}),[w,y]),$=vu();return s.createElement(z,{value:B,props:{htmlFor:null==T?void 0:T.id},slot:{open:R===gd.Open,disabled:h}},s.createElement(au,null,s.createElement(kd.Provider,{value:_},s.createElement(yd.Provider,{value:k},s.createElement(Bu,{value:ba(R,{[gd.Open]:Fu.Open,[gd.Closed]:Fu.Closed})},null!=c&&s.createElement(Ru,{disabled:h,data:null!=C?{[c]:C}:{},form:l,onReset:U}),$({ourProps:H,theirProps:b,slot:F,defaultTag:Ad,name:"Combobox"}))))))})),_d=wu((function(e,t){let n=Cd("Combobox.Button"),r=Sd("Combobox.Button"),[i,o]=(0,s.useState)(null),a=il(t,o,n.actions.setButtonElement),l=(0,s.useId)(),{id:c=`headlessui-combobox-button-${l}`,disabled:u=r.disabled||!1,autoFocus:d=!1,...h}=e,[g,f,p]=Aa(n,(e=>[e.comboboxState,e.inputElement,e.optionsElement])),m=Ka(f);!function(e,{trigger:t,action:n,close:r,select:i}){let o=(0,s.useRef)(null),a=(0,s.useRef)(null),l=(0,s.useRef)(null);Wa(e&&null!==t,"pointerdown",(e=>{Js(null==e?void 0:e.target)&&null!=t&&t.contains(e.target)&&(a.current=e.x,l.current=e.y,o.current=e.timeStamp)})),Wa(e&&null!==t,"pointerup",(e=>{var t,s;let c=o.current;if(null===c||(o.current=null,!Qs(e.target))||Math.abs(e.x-(null!=(t=a.current)?t:e.x))<5&&Math.abs(e.y-(null!=(s=l.current)?s:e.y))<5)return;let u=n(e);switch(u.kind){case 0:return;case 1:e.timeStamp-c>200&&(i(u.target),r());break;case 2:r()}}),{capture:!0})}(g===gd.Open,{trigger:i,action:(0,s.useCallback)((e=>{if(null!=i&&i.contains(e.target))return qa.Ignore;if(null!=f&&f.contains(e.target))return qa.Ignore;let t=e.target.closest('[role="option"]:not([data-disabled])');return Xs(t)?qa.Select(t):null!=p&&p.contains(e.target)?qa.Ignore:qa.Close}),[i,f,p]),close:n.actions.closeCombobox,select:n.actions.selectActiveOption});let v=Ws((e=>{switch(e.key){case Gu.Space:case Gu.Enter:return e.preventDefault(),e.stopPropagation(),n.state.comboboxState===gd.Closed&&(0,X.flushSync)((()=>n.actions.openCombobox())),void m();case Gu.ArrowDown:return e.preventDefault(),e.stopPropagation(),n.state.comboboxState===gd.Closed&&((0,X.flushSync)((()=>n.actions.openCombobox())),n.state.dataRef.current.value||n.actions.goToOption({focus:Hu.First})),void m();case Gu.ArrowUp:return e.preventDefault(),e.stopPropagation(),n.state.comboboxState===gd.Closed&&((0,X.flushSync)((()=>n.actions.openCombobox())),n.state.dataRef.current.value||n.actions.goToOption({focus:Hu.Last})),void m();case Gu.Escape:if(n.state.comboboxState!==gd.Open)return;return e.preventDefault(),n.state.optionsElement&&!r.optionsPropsRef.current.static&&e.stopPropagation(),(0,X.flushSync)((()=>n.actions.closeCombobox())),void m();default:return}})),x=function(e){let t=(0,s.useRef)(null),n=Ws((n=>{t.current=n.pointerType,!ia(n.currentTarget)&&"mouse"===n.pointerType&&n.button===Ks.Left&&(n.preventDefault(),e(n))})),r=Ws((n=>{"mouse"!==t.current&&(ia(n.currentTarget)||e(n))}));return{onPointerDown:n,onClick:r}}((()=>{n.state.comboboxState===gd.Open?n.actions.closeCombobox():n.actions.openCombobox(),m()})),b=Ku([c]),{isFocusVisible:y,focusProps:C}=us({autoFocus:d}),{isHovered:w,hoverProps:k}=ms({isDisabled:u}),{pressed:S,pressProps:I}=Vs({disabled:u}),E=nl({open:g===gd.Open,active:S||g===gd.Open,disabled:u,invalid:r.invalid,value:r.value,hover:w,focus:y}),A=Cu({ref:a,id:c,type:Ja(e,i),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":null==p?void 0:p.id,"aria-expanded":g===gd.Open,"aria-labelledby":b,disabled:u||void 0,autoFocus:d,onKeyDown:v},x,C,k,I);return vu()({ourProps:A,theirProps:h,slot:E,defaultTag:"button",name:"Combobox.Button"})})),Rd=wu((function(e,t){var n,r;let i=Cd("Combobox.Input"),o=Sd("Combobox.Input"),a=(0,s.useId)(),l=Lu(),{id:c=l||`headlessui-combobox-input-${a}`,onChange:u,displayValue:d,disabled:h=o.disabled||!1,autoFocus:g=!1,type:f="text",...p}=e,m=(0,s.useRef)(null),v=il(m,t,(0,s.useContext)(iu).setReference,i.actions.setInputElement),[x,b]=Aa(i,(e=>[e.comboboxState,e.isTyping])),y=Hs(),C=Ws((()=>{i.actions.onChange(null),i.state.optionsElement&&(i.state.optionsElement.scrollTop=0),i.actions.goToOption({focus:Hu.Nothing})}));hl((([e,t],[n,r])=>{if(i.state.isTyping)return;let o=m.current;o&&((r===gd.Open&&t===gd.Closed||e!==n)&&(o.value=e),requestAnimationFrame((()=>{if(i.state.isTyping||!o||Fs(o))return;let{selectionStart:e,selectionEnd:t}=o;0===Math.abs((null!=t?t:0)-(null!=e?e:0))&&0===e&&o.setSelectionRange(o.value.length,o.value.length)})))}),[(0,s.useMemo)((()=>{var e;return"function"==typeof d&&void 0!==o.value?null!=(e=d(o.value))?e:"":"string"==typeof o.value?o.value:""}),[o.value,d]),x,b]),hl((([e],[t])=>{if(e===gd.Open&&t===gd.Closed){if(i.state.isTyping)return;let e=m.current;if(!e)return;let t=e.value,{selectionStart:n,selectionEnd:r,selectionDirection:o}=e;e.value="",e.value=t,null!==o?e.setSelectionRange(n,r,o):e.setSelectionRange(n,r)}}),[x]);let w=(0,s.useRef)(!1),k=Ws((()=>{w.current=!0})),S=Ws((()=>{y.nextFrame((()=>{w.current=!1}))})),I=Ws((e=>{switch(i.actions.setIsTyping(!0),e.key){case Gu.Enter:if(i.state.comboboxState!==gd.Open||w.current)return;if(e.preventDefault(),e.stopPropagation(),null===i.selectors.activeOptionIndex(i.state))return void i.actions.closeCombobox();i.actions.selectActiveOption(),o.mode===fd.Single&&i.actions.closeCombobox();break;case Gu.ArrowDown:return e.preventDefault(),e.stopPropagation(),ba(i.state.comboboxState,{[gd.Open]:()=>i.actions.goToOption({focus:Hu.Next}),[gd.Closed]:()=>i.actions.openCombobox()});case Gu.ArrowUp:return e.preventDefault(),e.stopPropagation(),ba(i.state.comboboxState,{[gd.Open]:()=>i.actions.goToOption({focus:Hu.Previous}),[gd.Closed]:()=>{(0,X.flushSync)((()=>i.actions.openCombobox())),o.value||i.actions.goToOption({focus:Hu.Last})}});case Gu.Home:if(i.state.comboboxState===gd.Closed||e.shiftKey)break;return e.preventDefault(),e.stopPropagation(),i.actions.goToOption({focus:Hu.First});case Gu.PageUp:return e.preventDefault(),e.stopPropagation(),i.actions.goToOption({focus:Hu.First});case Gu.End:if(i.state.comboboxState===gd.Closed||e.shiftKey)break;return e.preventDefault(),e.stopPropagation(),i.actions.goToOption({focus:Hu.Last});case Gu.PageDown:return e.preventDefault(),e.stopPropagation(),i.actions.goToOption({focus:Hu.Last});case Gu.Escape:return i.state.comboboxState!==gd.Open?void 0:(e.preventDefault(),i.state.optionsElement&&!o.optionsPropsRef.current.static&&e.stopPropagation(),o.mode===fd.Single&&null===o.value&&C(),i.actions.closeCombobox());case Gu.Tab:if(i.actions.setIsTyping(!1),i.state.comboboxState!==gd.Open)return;o.mode===fd.Single&&i.state.activationTrigger!==pd.Focus&&i.actions.selectActiveOption(),i.actions.closeCombobox()}})),E=Ws((e=>{null==u||u(e),o.mode===fd.Single&&""===e.target.value&&C(),i.actions.openCombobox()})),A=Ws((e=>{var t,n,r;let s=null!=(t=e.relatedTarget)?t:zu.find((t=>t!==e.currentTarget));if(!(null!=(n=i.state.optionsElement)&&n.contains(s)||null!=(r=i.state.buttonElement)&&r.contains(s)||i.state.comboboxState!==gd.Open))return e.preventDefault(),o.mode===fd.Single&&null===o.value&&C(),i.actions.closeCombobox()})),j=Ws((e=>{var t,n,r;let s=null!=(t=e.relatedTarget)?t:zu.find((t=>t!==e.currentTarget));null!=(n=i.state.buttonElement)&&n.contains(s)||null!=(r=i.state.optionsElement)&&r.contains(s)||o.disabled||o.immediate&&i.state.comboboxState!==gd.Open&&y.microTask((()=>{(0,X.flushSync)((()=>i.actions.openCombobox())),i.actions.setActivationTrigger(pd.Focus)}))})),M=Ku(),_=function(){var e,t;return null!=(t=null==(e=(0,s.useContext)($u))?void 0:e.value)?t:void 0}(),{isFocused:R,focusProps:D}=us({autoFocus:g}),{isHovered:T,hoverProps:O}=ms({isDisabled:h}),P=Aa(i,(e=>e.optionsElement)),L=nl({open:x===gd.Open,disabled:h,invalid:o.invalid,hover:T,focus:R,autofocus:g}),N=Cu({ref:v,id:c,role:"combobox",type:f,"aria-controls":null==P?void 0:P.id,"aria-expanded":x===gd.Open,"aria-activedescendant":Aa(i,i.selectors.activeDescendantId),"aria-labelledby":M,"aria-describedby":_,"aria-autocomplete":"list",defaultValue:null!=(r=null!=(n=e.defaultValue)?n:void 0!==o.defaultValue?null==d?void 0:d(o.defaultValue):null)?r:o.defaultValue,disabled:h||void 0,autoFocus:g,onCompositionStart:k,onCompositionEnd:S,onKeyDown:I,onChange:E,onFocus:j,onBlur:A},D,O);return vu()({ourProps:N,theirProps:p,slot:L,defaultTag:"input",name:"Combobox.Input"})})),Dd=Yu,Td=wu((function(e,t){var n,r,i;let o=(0,s.useId)(),{id:a=`headlessui-combobox-options-${o}`,hold:l=!1,anchor:c,portal:u=!1,modal:d=!0,transition:h=!1,...g}=e,f=Cd("Combobox.Options"),p=Sd("Combobox.Options"),m=function(e){return(0,s.useMemo)((()=>e?"string"==typeof e?{to:e}:e:null),[e])}(c);m&&(u=!0);let[v,x]=su(m),[b,y]=(0,s.useState)(null),C=function(){let{getFloatingProps:e,slot:t}=(0,s.useContext)(iu);return(0,s.useCallback)(((...n)=>Object.assign({},e(...n),{"data-anchor":t.anchor})),[e,t])}(),w=il(t,m?v:null,f.actions.setOptionsElement,y),[k,S,I,E,A]=Aa(f,(e=>[e.comboboxState,e.inputElement,e.buttonElement,e.optionsElement,e.activationTrigger])),j=Ga(S||I),M=Ga(E),_=(0,s.useContext)(Nu),[R,D]=dl(h,b,null!==_?(_&Fu.Open)===Fu.Open:k===gd.Open);!function(e,t,n){let r=$s((e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&n()}));(0,s.useEffect)((()=>{if(!e)return;let n=null===t?null:Xs(t)?t:t.current;if(!n)return;let i=zs();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver((()=>r.current(n)));e.observe(n),i.add((()=>e.disconnect()))}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver((()=>r.current(n)));e.observe(n),i.add((()=>e.disconnect()))}return()=>i.dispose()}),[t,r,e])}(R,S,f.actions.closeCombobox),function(e,t,n=(()=>[document.body])){tl(Ma(e,"scroll-lock"),t,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}}))}(!p.__demoMode&&(d&&k===gd.Open),M),function(e,{allowed:t,disallowed:n}={}){let r=Ma(e,"inert-others");Us((()=>{var e,i;if(!r)return;let o=zs();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&o.add(Da(t));let s=null!=(i=null==t?void 0:t())?i:[];for(let e of s){if(!e)continue;let t=Ls(e);if(!t)continue;let n=e.parentElement;for(;n&&n!==t.body;){for(let e of n.children)s.some((t=>e.contains(t)))||o.add(Da(e));n=n.parentElement}}return o.dispose}),[r,t,n])}(!p.__demoMode&&(d&&k===gd.Open),{allowed:(0,s.useCallback)((()=>[S,I,E]),[S,I,E])});let T=!Aa(f,f.selectors.didInputMove)&&R;Us((()=>{var t;p.optionsPropsRef.current.static=null!=(t=e.static)&&t}),[p.optionsPropsRef,e.static]),Us((()=>{p.optionsPropsRef.current.hold=l}),[p.optionsPropsRef,l]),function(e,{container:t,accept:n,walk:r}){let i=(0,s.useRef)(n),o=(0,s.useRef)(r);(0,s.useEffect)((()=>{i.current=n,o.current=r}),[n,r]),Us((()=>{if(!t||!e)return;let n=Ls(t);if(!n)return;let r=i.current,s=o.current,a=Object.assign((e=>r(e)),{acceptNode:r}),l=n.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,a,!1);for(;l.nextNode();)s(l.currentNode)}),[t,e,i,o])}(k===gd.Open,{container:E,accept:e=>"option"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let O=Ku([null==I?void 0:I.id]),P=nl({open:k===gd.Open,option:void 0}),L=Ws((()=>{f.actions.setActivationTrigger(pd.Pointer)})),N=Ws((e=>{e.preventDefault(),f.actions.setActivationTrigger(pd.Pointer)})),F=Cu(m?C():{},{"aria-labelledby":O,role:"listbox","aria-multiselectable":p.mode===fd.Multi||void 0,id:a,ref:w,style:{...g.style,...x,"--input-width":qs(R,S,!0).width,"--button-width":qs(R,I,!0).width},onWheel:A===pd.Pointer?void 0:L,onMouseDown:N,...ul(D)}),B=R&&k===gd.Closed&&!e.static,z=Ou(B,null==(n=p.virtual)?void 0:n.options),H=Ou(B,p.value),U=(0,s.useCallback)((e=>p.compare(H,e)),[p.compare,H]),$=(0,s.useMemo)((()=>{if(!p.virtual)return p;if(void 0===z)throw new Error("Missing `options` in virtual mode");return z!==p.virtual.options?{...p,virtual:{...p.virtual,options:z}}:p}),[p,z,null==(r=p.virtual)?void 0:r.options]);p.virtual&&Object.assign(g,{children:s.createElement(kd.Provider,{value:$},s.createElement(Ed,{slot:P},g.children))});let W=vu(),V=(0,s.useMemo)((()=>p.mode===fd.Multi?p:{...p,isSelected:U}),[p,U]);return s.createElement(ld,{enabled:!!u&&(e.static||R),ownerDocument:j},s.createElement(kd.Provider,{value:V},W({ourProps:F,theirProps:{...g,children:s.createElement(Tu,{freeze:B},"function"==typeof g.children?null==(i=g.children)?void 0:i.call(g,P):g.children)},slot:P,defaultTag:"div",features:jd,visible:T,name:"Combobox.Options"})))})),Od=wu((function(e,t){var n,r,i;let o=Sd("Combobox.Option"),a=Cd("Combobox.Option"),l=(0,s.useId)(),{id:c=`headlessui-combobox-option-${l}`,value:u,disabled:d=null!=(i=null==(r=null==(n=o.virtual)?void 0:n.disabled)?void 0:r.call(n,u))&&i,order:h=null,...g}=e,[f]=Aa(a,(e=>[e.inputElement])),p=Ka(f),m=Aa(a,(0,s.useCallback)((e=>a.selectors.isActive(e,u,c)),[u,c])),v=o.isSelected(u),x=(0,s.useRef)(null),b=$s({disabled:d,value:u,domRef:x,order:h}),y=(0,s.useContext)(Id),C=il(t,x,y?y.measureElement:null),w=Ws((()=>{a.actions.setIsTyping(!1),a.actions.onChange(u)}));Us((()=>a.actions.registerOption(c,b)),[b,c]);let k=Aa(a,(0,s.useCallback)((e=>a.selectors.shouldScrollIntoView(e,u,c)),[u,c]));Us((()=>{if(k)return zs().requestAnimationFrame((()=>{var e,t;null==(t=null==(e=x.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})}))}),[k,x]);let S=Ws((e=>{e.preventDefault(),e.button===Ks.Left&&(d||(w(),$a()||requestAnimationFrame((()=>p())),o.mode===fd.Single&&a.actions.closeCombobox()))})),I=Ws((()=>{if(d)return a.actions.goToOption({focus:Hu.Nothing});let e=o.calculateIndex(u);a.actions.goToOption({focus:Hu.Specific,idx:e})})),E=function(){let e=(0,s.useRef)([-1,-1]);return{wasMoved(t){let n=ol(t);return(e.current[0]!==n[0]||e.current[1]!==n[1])&&(e.current=n,!0)},update(t){e.current=ol(t)}}}(),A=Ws((e=>E.update(e))),j=Ws((e=>{if(!E.wasMoved(e)||d||m&&a.state.activationTrigger===pd.Pointer)return;let t=o.calculateIndex(u);a.actions.goToOption({focus:Hu.Specific,idx:t},pd.Pointer)})),M=Ws((e=>{E.wasMoved(e)&&(d||m&&(o.optionsPropsRef.current.hold||a.state.activationTrigger===pd.Pointer&&a.actions.goToOption({focus:Hu.Nothing})))})),_=nl({active:m,focus:m,selected:v,disabled:d}),R={id:c,ref:C,role:"option",tabIndex:!0===d?void 0:-1,"aria-disabled":!0===d||void 0,"aria-selected":v,disabled:void 0,onMouseDown:S,onFocus:I,onPointerEnter:A,onMouseEnter:A,onPointerMove:j,onMouseMove:j,onPointerLeave:M,onMouseLeave:M};return vu()({ourProps:R,theirProps:g,slot:_,defaultTag:"div",name:"Combobox.Option"})})),Pd=Object.assign(Md,{Input:Rd,Button:_d,Label:Dd,Options:Td,Option:Od});var Ld,Nd,Fd,Bd,zd,Hd,Ud,$d,Wd=n(46068),Vd=e=>{throw TypeError(e)},Gd=(e,t,n)=>t.has(e)||Vd("Cannot "+n),Zd=(e,t,n)=>(Gd(e,t,"read from private field"),n?n.call(e):t.get(e)),qd=(e,t,n)=>t.has(e)?Vd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Kd=(e,t,n,r)=>(Gd(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Jd=(e,t,n)=>(Gd(e,t,"access private method"),n),Yd=(e=>(e.AgentBench="agentBench",e.ExternalChange="external",e.Command="command",e))(Yd||{}),Xd=(e=>(e.DiscoverabilityPopup="pushedContent/discoverabilityPopup",e.DiscoverabilityPanelFooter="pushedContent/discoverabilityPanelFooter",e.DiscoverabilityPanelFooterAcceptButton="pushedContent/discoverabilityPanelFooter/accept",e.DiscoverabilityPanelFooterDismissButton="pushedContent/discoverabilityPanelFooter/dismiss",e))(Xd||{}),Qd=(e=>(e.AgentBenchItem="agentBench/agentIcon",e.AgentBenchLabelsOverlay="agentBench/agentLabelsOverlay",e.AgentPanel="agentBench/agentPanel",e.ViewDirectoryBenchItem="agentBench/viewDirectoryBenchItem",e.AgentHeaderClose="agent/headerClose",e.ChatHistoryDelete="chatHistory/delete",e.ChatHistorySelect="chatHistory/select",e.ChatHistoryCreate="chatHistory/create",e.ErrorFallback="agent/errorFallback",e.RetryButton="chat/retryButton",e.CopyArtifactButton="chat/copyArtifactButton",e.InsertArtifactButton="chat/insertArtifactButton",e.DownloadImageButton="chat/downloadImageButton",e.IdeationTabs="chat/ideationTabs",e.IdeationTabContent="chat/ideationTabContent",e.ChatInputUphookSecondaryCta="chat/inputUphookSecondaryCta",e.QuickActionButton="chat/quickActionButton",e.ApplyAllSuggestionsButton="chat/applyAllSuggestionsButton",e.DismissAllSuggestionsButton="chat/dismissAllSuggestionsButton",e.ShowSuggestionsButton="chat/summaryButton",e.ChatResponseSource="chat/responseSource",e.ContextOption="chatAgentPanel/context-option",e.RemoveContextItemButton="chatAgentPanel/remove-context-item-button",e.ContextSwitcherButton="chatAgentPanel/context-switcher-button",e.ToolCallCard="toolCall/card",e.ToolCallApprove="toolCall/approve",e.ToolCallDecline="toolCall/decline",e[e.AgentDirectoryAgentCard=Gn.AgentCard]="AgentDirectoryAgentCard",e[e.AgentDirectoryLoadMore=Gn.LoadMore]="AgentDirectoryLoadMore",e[e.AgentDirectoryAddAgent=Gn.AddAgent]="AgentDirectoryAddAgent",e[e.AgentDirectoryOpenAgent=Gn.OpenAgent]="AgentDirectoryOpenAgent",e[e.AgentDirectorySignInToAgent=Gn.SignInToAgent]="AgentDirectorySignInToAgent",e[e.AgentDirectoryViewAgentInMarketplace=Gn.ViewAgentInMarketplace]="AgentDirectoryViewAgentInMarketplace",e[e.AgentDirectoryManageAgents=Gn.ManageAgents]="AgentDirectoryManageAgents",e[e.AgentDirectoryRemoveAgent=Gn.RemoveAgent]="AgentDirectoryRemoveAgent",e[e.AgentDirectoryViewAgentSettings=Gn.ViewAgentSettings]="AgentDirectoryViewAgentSettings",e[e.DiscoverabilityPopup=Xd.DiscoverabilityPopup]="DiscoverabilityPopup",e[e.DiscoverabilityPanelFooter=Xd.DiscoverabilityPanelFooter]="DiscoverabilityPanelFooter",e[e.DiscoverabilityPanelFooterAcceptButton=Xd.DiscoverabilityPanelFooterAcceptButton]="DiscoverabilityPanelFooterAcceptButton",e[e.DiscoverabilityPanelFooterDismissButton=Xd.DiscoverabilityPanelFooterDismissButton]="DiscoverabilityPanelFooterDismissButton",e))(Qd||{}),eh=(e=>(e.ComponentImpression="componentImpression",e.ComponentClicked="componentClicked",e.ComponentInteraction="componentInteraction",e.AgentActivated="agentActivated",e.AgentDeactivated="agentDeactivated",e.ResponseCopied="responseCopied",e.ResponseInserted="responseInserted",e.ResponseStreamingCompleted="responseStreamingCompleted",e.ResponseStoppedByUser="responseStoppedByUser",e.MessageSubmitted="messageSubmitted",e.PredefinedPromptSubmitted="predefinedPromptSubmitted",e.DownloadImageClicked="downloadImageClicked",e.ToolCallSkipped="toolCallSkipped",e[e.AgentDirectorySearch=Vn.AgentDirectorySearch]="AgentDirectorySearch",e[e.AgentDirectoryReorderAgent=Vn.AgentDirectoryReorderAgent]="AgentDirectoryReorderAgent",e))(eh||{}),th=(e=>(e.OpenAgent="OpenAgent",e.OpenCoordinatorAgent="OpenCoordinatorAgent",e.MessageAgent="MessageAgent",e.CompoundAgent="CompoundAgent",e))(th||{}),nh=(e=>(e.Command="Command",e.Event="Event",e))(nh||{}),rh=(e=>(e.OpenChat="OpenChat",e.CreateChat="CreateChat",e))(rh||{}),ih=(e=>(e.ChatDeleted="ChatDeleted",e))(ih||{});class oh{constructor(e){qd(this,Bd),qd(this,Ld,new Map),qd(this,Nd,new Map),qd(this,Fd,new Set),this.capabilities=e}execute(e){switch(e.kind){case th.OpenAgent:Jd(this,Bd,zd).call(this,e);break;case th.OpenCoordinatorAgent:Jd(this,Bd,Hd).call(this);break;case th.MessageAgent:Jd(this,Bd,Ud).call(this,e);break;case th.CompoundAgent:Jd(this,Bd,$d).call(this,e);break;default:(0,r.vE)(e)}}registerAgent(e){Zd(this,Fd).has(e)||(Zd(this,Fd).add(e),Zd(this,Nd).set(e,new i.v))}unregisterAgent(e){Zd(this,Fd).delete(e),Zd(this,Nd).delete(e),Zd(this,Ld).delete(e)}subscribeToAgentMessages(e){return Zd(this,Nd).get(e)}getPendingAgentMessages(e){const t=[...Zd(this,Ld).get(e)??[]];return Zd(this,Ld).set(e,[]),t}setCapabilities(e){this.capabilities=e}}Ld=new WeakMap,Nd=new WeakMap,Fd=new WeakMap,Bd=new WeakSet,zd=function(e){this.capabilities.openAgent(e.agentId,Yd.Command)},Hd=function(){this.capabilities.openCoordinatorAgent()},Ud=function({agentId:e,message:t}){var n,r;Zd(this,Fd).has(e)?null==(r=Zd(this,Nd).get(e))||r.emit("message",t):Zd(this,Ld).has(e)?null==(n=Zd(this,Ld).get(e))||n.push(t):Zd(this,Ld).set(e,[t])},$d=function(e){e.commands.forEach((e=>this.execute(e)))};const sh=(0,s.createContext)({}),ah=({children:e,value:t})=>(0,o.jsx)(sh.Provider,{value:{...t},children:e});function lh(){return(0,s.useContext)(sh)}function ch(e){const{commandExecutor:t,agentId:n}=lh();(0,s.useEffect)((()=>{var r;if(!t||!n)return;t.getPendingAgentMessages(n).forEach((t=>e(t))),t.registerAgent(n);const i=null==(r=t.subscribeToAgentMessages(n))?void 0:r.on("message",e);return()=>{null==i||i.dispose(),t.unregisterAgent(n)}}),[t,n,e])}sh.Provider;const uh=(0,s.createContext)({showModal:()=>{},closeModal:()=>{},isOpen:!1}),dh=()=>(0,s.useContext)(uh),hh=(0,s.createContext)(null);function gh(){var e;return null==(e=(0,s.useContext)(hh))?void 0:e.experimental_agentDirectory}const fh=(0,s.createContext)(null);function ph(e){const t=(0,s.useContext)(fh);if(!t)throw new Error("Missing AssistantStoreContext.Provider in the tree");return(0,Mi.oR)(t,e)}function mh(){const e=ph((e=>({chats:e.chatHistory.chats,renameChat:e.chatHistory.renameChat,deleteChat:e.chatHistory.deleteChat,initialize:e.chatHistory.initialize,subscribeToChatEvents:e.chatHistory.subscribeToChatEvents,unsubscribeFromChatEvents:e.chatHistory.unsubscribeFromChatEvents})));return{...e,chats:Object.values(e.chats)}}function vh(e,t){return(0,s.useCallback)(((...n)=>t(e,...n)),[t,e])}function xh(){const{agentId:e,activeAgentInstanceId:t}=lh();if(!e)throw new Error("Agent ID is required to use chat");const{createNewChat:n,setActiveChat:r,sendMessage:i,sendSystemMessage:o,retryMessage:a,stopStreamingResponse:l,activeChats:c}=ph((e=>e.chat)),u=c[e],d=(0,s.useCallback)((e=>n(e,t??"")),[n,t]),h=(0,s.useCallback)(((e,n)=>r(e,t??"",n)),[r,t]);return{id:(null==u?void 0:u.id)??"",messages:(null==u?void 0:u.messages)??[],draft:(null==u?void 0:u.draft)??void 0,createNewChat:vh(e,d),setActiveChat:vh(e,h),sendMessage:vh(e,i),sendSystemMessage:vh(e,o),retryMessage:vh(e,a),stopStreamingResponse:vh(e,l)}}function bh(){return ph((e=>({responseCopied:e.tracking.responseCopied,responseInserted:e.tracking.responseInserted,responseStreamed:e.tracking.responseStreamed,responseStoppedByUser:e.tracking.responseStoppedByUser,messageSubmitted:e.tracking.messageSubmitted,trackComponentEvent:e.tracking.trackComponentEvent,subscribeToChatEvents:e.tracking.subscribeToChatEvents,unsubscribeFromChatEvents:e.tracking.unsubscribeFromChatEvents,downloadImageClicked:e.tracking.downloadImageClicked})))}function yh(e){if(!e)return e;if(e.includes(" "))return e.charAt(0).toUpperCase()+e.slice(1);const t=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z])([A-Z][a-z])/g,"$1 $2");return t.charAt(0).toUpperCase()+t.slice(1)}function Ch(e){return"number"==typeof e?e.toString():"boolean"==typeof e?e?"Yes":"No":e}const wh=e=>{var t;return"final"===e.kind?null==(t=e.pendingToolCallActions)?void 0:t[0]:void 0},kh=(e,t,n,r)=>({kind:"pendingToolCallActionResults",results:[{status:e,toolName:t,toolCallId:n,updatedProperties:r??[]}]});function Sh(){const{initialize:e,updateProperty:t,setStatus:n,getStatus:r,getUpdatedProperties:i,getUpdatedPropertiesList:o,getParameterDisplay:a,setParameterDisplay:l}=ph((e=>e.pendingToolCall)),{sendSystemMessage:c}=xh(),u=(0,s.useCallback)((e=>{const{toolName:t,toolCallId:n}=e,o="pending"===r(n),s=i(e.toolCallId),l=e.properties.map((e=>{const n=e.value,r=s[e.label],i=void 0!==r?r:n,l=o?e.display:void 0,c=a(t,e.label,String(i))??l;return{...e,value:i,display:c}}));return{...e,properties:l}}),[i,a,r]),d=(0,s.useCallback)(((e,t)=>{const r=o(e),i=kh("approved",t,e,r);n(e,"approved"),c(i)}),[o,n,c]),h=(0,s.useCallback)(((e,t,r)=>{if(n(e,"rejected"),!r){const n=kh("rejected",t,e);c(n)}}),[n,c]);return{initialize:e,updateProperty:t,getStatus:r,getResolvedPendingToolCall:u,getParameterDisplay:a,setParameterDisplay:l,approveToolCall:d,rejectToolCall:h}}function Ih(){return ph((e=>e.featureToggle))}function Eh(e,t){return(0,s.useCallback)(((...n)=>t(e,...n)),[t,e])}function Ah(){const{agentId:e}=lh();if(!e)throw new Error("Agent ID is required to use suggestions");const t=ph((e=>e.suggestions)),n=Eh(e,t.focusSuggestions),r=Eh(e,t.hasSuggestion),i=Eh(e,t.applyAllSuggestions),o=Eh(e,t.dismissAllSuggestions);return(0,s.useMemo)((()=>({onUpdate:t.onUpdate,focusSuggestions:n,hasSuggestion:r,applyAllSuggestions:i,dismissAllSuggestions:o})),[t,n,r,i,o])}function jh(){const{installedAgents:e,loadInstalledAgents:t,subscribeToAgentStateChanges:n,getInstanceIdsForAgent:r}=ph((e=>e.agentDirectory));return{installedAgents:e,loadInstalledAgents:t,subscribeToAgentStateChanges:n,getInstanceIdsForAgent:r}}function Mh(e,t){var n,r;const{get:i,messages:o,trackImpression:a}=ph((e=>e.inProductMessaging)),l=o[e];(0,s.useEffect)((()=>{i(e,t)}),[i,e,null==(n=null==t?void 0:t.selectedAgent)?void 0:n.id]);const c=(0,s.useCallback)((()=>{a(e,null==l?void 0:l.id,t)}),[a,e,null==l?void 0:l.id,null==(r=null==t?void 0:t.selectedAgent)?void 0:r.id]);return{message:l,trackImpression:c}}const _h=e=>{const t=gh(),[n,r]=(0,s.useState)(),[i,o]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{(async()=>{try{const n=null==t?void 0:t.getAgentIdForInstance(e);if(n){const e=await(null==t?void 0:t.getAgentMetadata(n));r(null==e?void 0:e.metadata)}else console.warn("Error mapping agentInstanceId<>agentId",e),r(void 0)}catch{console.warn("Error fetching metadata for agentInstanceId",e),r(void 0)}finally{o(!1)}})()}),[e,t]),{isLoading:i,agentMetadata:n}};function Rh(){var e;return null==(e=(0,s.useContext)(hh))?void 0:e.tracking}function Dh(e,t,n=!1){return Ph(e,t,q.IX.Impression,n)}function Th(e,t,n=!1){return Ph(e,t,q.IX.ImpressionAndClicked,n)}function Oh(e,t,n=!1){return Ph(e,t,q.IX.Clicked,n)}function Ph(e,t,n,i=!1){const o=Rh(),[a,l]=(0,s.useState)(!1),c=(0,s.useCallback)(((e,t,n)=>{const s={componentId:e,detail:n};switch(t){case q.Jn.Impression:if(i&&a)return;return null==o||o.trackEvent(eh.ComponentImpression,s),void l(!0);case q.Jn.Clicked:return void(null==o||o.trackEvent(eh.ComponentClicked,s));default:return(0,r.vE)(t)}}),[o,a,i]);return(0,K.B)({componentId:e,detail:t,trackEvent:c,autoTrackedInteractions:n})}var Lh=(e=>(e.SuggestionsSummary="suggestionsSummary",e.AcceptAllSuggestions="acceptAllSuggestions",e.NativeInstallFlow="nativeInstallFlow",e.AgentDirectory="agentDirectory",e.FirstPartyPackAgents="firstPartyPackAgents",e.SetGoEntrypoint="setGoEntrypoint",e.DisableCertifiedAgentsOnly="disableCertifiedAgentsOnly",e.GoBranding="goBranding",e.ContextSelectorRedesign="contextSelectorRedesign",e.RecommendedActionsInChat="recommendedActionsInChat",e.ToolCallEditing="toolCallEditing",e))(Lh||{});const Nh={acceptAllSuggestions:!1,agentDirectory:!1,firstPartyPackAgents:!1,setGoEntrypoint:!1,disableCertifiedAgentsOnly:!1,goBranding:!1,nativeInstallFlow:!1,suggestionsSummary:!1,contextSelectorRedesign:!1,recommendedActionsInChat:!1,toolCallEditing:!1};class Fh{constructor(e={}){this.togglesState={...Nh,...e}}isFeatureEnabled(e){return this.togglesState[e]}}const Bh="_chatThreadLink_1wvyl_1",zh=(0,s.forwardRef)((function({id:e,text:t,chatTimeRange:n,onClick:r},i){const{trackClicked:s}=Oh(Qd.ChatHistorySelect,{chatId:e,chatTimeRange:n});return(0,o.jsx)("button",{ref:i,className:Bh,onClick:t=>{t.preventDefault(),s(),r(e,n)},children:(0,o.jsx)(w.x,{as:"small",variant:"text-xsmall",children:t})})})),Hh="_chatListItem_5nt4l_1",Uh="_agentIcon_5nt4l_9",$h="_menu_5nt4l_17",Wh="_moreOptions_5nt4l_22",Vh=(0,s.forwardRef)((function({id:e,name:t,agentInstanceId:n,onEdit:r,chatTimeRange:i,onDelete:s,onSelect:a},l){const{deleteChat:c}=mh(),{trackClicked:u}=Oh(Qd.ChatHistoryDelete,{chatId:e}),{agentMetadata:d}=_h(n??""),h=Ih().isFeatureEnabled(Lh.GoBranding);return(0,o.jsx)(O.x,{as:"section",width:"full",className:Hh,children:(0,o.jsxs)(C.k,{align:"center",justify:"space-between",width:"100%",children:[n&&d&&(0,o.jsx)(er,{agent:d,size:"medium",goBrandingEnabled:h,className:Uh}),(0,o.jsx)(zh,{ref:l,text:t,id:e,chatTimeRange:i,onClick:a}),(0,o.jsxs)(H.v,{className:$h,activator:(0,o.jsx)(A.z,{variant:"tertiary",className:Wh,iconStart:di.o,accessibilityLabel:`More options for ${t}`}),children:[(0,o.jsx)(H.v.Item,{onClick:r,children:(0,o.jsx)(w.x,{"aria-label":`Rename chat titled ${t}`,as:"small",variant:"text-small",children:"Rename"})},"rename"),(0,o.jsx)(H.v.Item,{onClick:()=>{u(),c(e),s(e)},children:(0,o.jsx)(w.x,{"aria-label":`Delete chat titled ${t}`,as:"small",variant:"text-small",children:"Delete"})},"delete")]})]})},e)})),Gh="_chatRename_1go1y_1";function Zh({id:e,name:t,onComplete:n}){const{renameChat:r}=mh(),i=(0,s.useRef)(null);(0,s.useLayoutEffect)((()=>{if(i.current){const e=requestAnimationFrame((()=>{var e;null==(e=i.current)||e.focus()}));return()=>cancelAnimationFrame(e)}}),[]);const a=t=>{const i=t.currentTarget.value.trim();i&&r(e,i),n(!!i)};return(0,o.jsx)("div",{className:Gh,children:(0,o.jsx)(hi.n,{ref:i,helperMessage:"Type a new chat name. Press Enter to confirm. Press Esc to cancel.",label:"Chat name",type:"text",isRequired:!0,defaultValue:t,onBlur:e=>a(e),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),a(e)):"Escape"===e.key&&n(!1)},labelDisplay:"hidden"})})}const qh="_hiddenElementStyle_n69is_1";function Kh({chat:e,chatTimeRange:t,onDelete:n,onSelect:r}){const[i,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(!1),h=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(l){const e=setTimeout((()=>c("")),500);return()=>clearTimeout(e)}}),[l]),(0,s.useLayoutEffect)((()=>{var e;u&&(null==(e=h.current)||e.focus(),d(!1))}),[u]),(0,o.jsxs)(o.Fragment,{children:[i?(0,o.jsx)(Zh,{id:e.id,name:e.name,onComplete:e=>{a(!1),e&&(c("Chat renamed"),d(!0))}},e.id):(0,o.jsx)(Vh,{ref:h,chatTimeRange:t,id:e.id,name:e.name,agentInstanceId:e.agentInstanceId,onEdit:()=>a(!0),onDelete:n,onSelect:r},e.id),(0,o.jsx)("div",{role:"status","aria-live":"polite",className:qh,children:l})]})}const Jh="_chatGroupHeading_1gfig_1";function Yh(e){switch(e){case"Today":return"today";case"Last 7 days":return"last_7_days";case"Last 30 days":return"last_30_days";default:return"other"}}function Xh({title:e,chats:t,onDelete:n,onSelect:r}){return(0,o.jsxs)(O.x,{as:"div",width:"full",children:[(0,o.jsx)(R.X,{as:"h3",variant:"text-xsmall",color:"base-subdued",margin:2,className:Jh,children:e}),t.map((t=>(0,o.jsx)(Kh,{chat:t,chatTimeRange:Yh(e),onDelete:n,onSelect:r},t.id)))]})}const Qh=(0,o.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.71428 43.2002C6.55837 43.2002 4 45.7586 4 48.9145L4 73.6002L11.7109 68.8759H36.6857C39.8416 68.8759 42.4 66.3175 42.4 63.1616V48.9145C42.4 45.7586 39.8416 43.2002 36.6857 43.2002H9.71428Z",fill:"white"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 48.9145C3.5 45.4824 6.28223 42.7002 9.71428 42.7002H36.6857C40.1178 42.7002 42.9 45.4824 42.9 48.9145V63.1616C42.9 66.5936 40.1178 69.3759 36.6857 69.3759H11.8519L4.26121 74.0265C4.1069 74.1211 3.91356 74.1249 3.75567 74.0364C3.59778 73.948 3.5 73.7812 3.5 73.6002V48.9145ZM9.71428 43.7002C6.83451 43.7002 4.5 46.0347 4.5 48.9145V72.7075L11.4497 68.4495C11.5283 68.4014 11.6187 68.3759 11.7109 68.3759H36.6857C39.5655 68.3759 41.9 66.0414 41.9 63.1616V48.9145C41.9 46.0347 39.5655 43.7002 36.6857 43.7002H9.71428Z",fill:"#1C1C1C"}),(0,o.jsx)("path",{d:"M34.4004 58.7002C34.6764 58.7003 34.9004 58.9241 34.9004 59.2002C34.9002 59.4761 34.6763 59.7 34.4004 59.7002H12L11.8994 59.6904C11.6718 59.6438 11.5002 59.4416 11.5 59.2002C11.5 58.9586 11.6716 58.7566 11.8994 58.71L12 58.7002H34.4004ZM34.4004 52.2998C34.6764 52.3 34.9004 52.5238 34.9004 52.7998C34.9004 53.0758 34.6764 53.2997 34.4004 53.2998H12L11.8994 53.29C11.6716 53.2434 11.5 53.0414 11.5 52.7998C11.5 52.5582 11.6716 52.3562 11.8994 52.3096L12 52.2998H34.4004Z",fill:"#1C1C1C"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M70.2857 6.40039C73.4416 6.40039 76 8.95876 76 12.1147L76 53.7604L64.1123 46.4004H22.5143C19.3584 46.4004 16.8 43.842 16.8 40.6861V12.1147C16.8 8.95876 19.3584 6.40039 22.5143 6.40039H70.2857Z",fill:"white"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.5 12.1147C76.5 8.68262 73.7178 5.90039 70.2857 5.90039H22.5143C19.0822 5.90039 16.3 8.68262 16.3 12.1147V40.6861C16.3 44.1182 19.0822 46.9004 22.5143 46.9004H63.9701L75.7368 54.1855C75.891 54.281 76.0849 54.2855 76.2433 54.1972C76.4018 54.1089 76.5 53.9418 76.5 53.7604V12.1147ZM70.2857 6.90039C73.1655 6.90039 75.5 9.23491 75.5 12.1147V52.8628L64.3755 45.9753C64.2964 45.9263 64.2053 45.9004 64.1123 45.9004H22.5143C19.6345 45.9004 17.3 43.5659 17.3 40.6861V12.1147C17.3 9.23491 19.6345 6.90039 22.5143 6.90039H70.2857Z",fill:"#1C1C1C"}),(0,o.jsx)("path",{d:"M46.3996 39.1996C53.4689 39.1996 59.1996 33.4689 59.1996 26.3996C59.1996 19.3304 53.4689 13.5996 46.3996 13.5996C39.3304 13.5996 33.5996 19.3304 33.5996 26.3996C33.5996 33.4689 39.3304 39.1996 46.3996 39.1996Z",fill:"#00E0AC"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.3996 14.0996C39.6065 14.0996 34.0996 19.6065 34.0996 26.3996C34.0996 33.1927 39.6065 38.6996 46.3996 38.6996C53.1927 38.6996 58.6996 33.1927 58.6996 26.3996C58.6996 19.6065 53.1927 14.0996 46.3996 14.0996ZM33.0996 26.3996C33.0996 19.0542 39.0542 13.0996 46.3996 13.0996C53.745 13.0996 59.6996 19.0542 59.6996 26.3996C59.6996 33.745 53.745 39.6996 46.3996 39.6996C39.0542 39.6996 33.0996 33.745 33.0996 26.3996Z",fill:"#1C1C1C"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.5812 21.7802C53.7765 21.9755 53.7765 22.2921 53.5812 22.4873L44.6944 31.3742L40.0742 26.754C39.8789 26.5587 39.8789 26.2421 40.0742 26.0469C40.2694 25.8516 40.586 25.8516 40.7813 26.0469L44.6944 29.96L52.8741 21.7802C53.0694 21.585 53.3859 21.585 53.5812 21.7802Z",fill:"#1C1C1C"})]});function eg({onCreate:e}){const{trackClicked:t}=Oh(Qd.ChatHistoryCreate,{});return(0,o.jsxs)(C.k,{direction:"column",padding:6,gap:6,align:"center",justify:"center",flex:"1 1 0%",children:[Qh,(0,o.jsxs)(O.x,{children:[(0,o.jsx)(R.X,{as:"h3",variant:"heading-small",align:"center",children:"No chats yet"}),(0,o.jsx)(w.x,{as:"p",variant:"text-small",color:"base-subdued",align:"center",children:"You can find a list of your chats here."})]}),(0,o.jsx)(A.z,{onClick:()=>{t(),e()},children:"Start a chat"})]})}const tg="_chatHistory_1wqog_1";function ng({onDelete:e,onSelect:t,onCreate:n}){const{chats:r}=mh(),{today:i,last7Days:s,last30Days:a,monthly:l,yearly:c}=function(e){e.sort(((e,t)=>new Date(t.lastUpdatedTime).getTime()-new Date(e.lastUpdatedTime).getTime()));const t=new Date,n={today:[],last7Days:[],last30Days:[],monthly:{},yearly:{}};return e.forEach((e=>{const r=new Date(e.lastUpdatedTime),i=(t.getTime()-r.getTime())/864e5;if(i<=1)n.today.push(e);else if(i<=7)n.last7Days.push(e);else if(i<=30)n.last30Days.push(e);else{const i=r.getFullYear();if(t.getFullYear()===i){const t=r.toLocaleString("default",{month:"long"});n.monthly[t]||(n.monthly[t]=[]),n.monthly[t].push(e)}else n.yearly[i]||(n.yearly[i]=[]),n.yearly[i].push(e)}})),n}(r),u=[["Today",i],["Last 7 days",s],["Last 30 days",a],...Object.entries(l),...Object.entries(c)];return 0===r.length?(0,o.jsx)(eg,{onCreate:n}):(0,o.jsx)(C.k,{direction:"column",flex:"1",gap:3,className:tg,children:u.filter((([,e])=>e.length>0)).map((([n,r])=>(0,o.jsx)(Xh,{title:n,chats:r,onDelete:e,onSelect:t},n)))})}const rg="_chatHistoryModal_jgsq2_1";function ig({commandExecutor:e,coordinatorAgentId:t}){const{closeModal:n}=dh(),{deleteChat:r,selectChat:i,openCoordinatorAgent:a}=function(e,t){const{chats:n}=mh(),r=gh(),{setActiveChat:i}=ph((e=>e.chat)),{getInstanceIdsForAgent:o}=jh(),a=(0,s.useCallback)((e=>{let i;const o=n.find((t=>t.id===e));if(o&&o.agentInstanceId){const e=null==r?void 0:r.getAgentIdForInstance(o.agentInstanceId);e&&(i=(0,W.xt)(e)?(0,W.HS)(e):e)}return i??t}),[n,r,t]),l=(0,s.useCallback)((t=>{const n=a(t),r={kind:nh.Event,event:{kind:ih.ChatDeleted,chatId:t}},i={kind:th.MessageAgent,agentId:n,message:r};e.execute(i)}),[a,e]),c=(0,s.useCallback)((t=>{const r=a(t),s=n.find((e=>e.id===t));let l=null==s?void 0:s.agentInstanceId;if(!l){const e=o(r);if(!(e.length>0))return;l=e[0]}e.execute({kind:th.OpenAgent,agentId:r}),i(r,l,t)}),[a,n,e,i,o]);return{deleteChat:l,selectChat:c,openCoordinatorAgent:(0,s.useCallback)((()=>{e.execute({kind:th.OpenCoordinatorAgent})}),[e])}}(e,t);return(0,o.jsx)("div",{className:rg,children:(0,o.jsx)(ng,{onDelete:e=>{r(e)},onSelect:e=>{i(e),n()},onCreate:()=>{a(),n()}})})}function og({commandExecutor:e,coordinatorAgentId:t}){const{showModal:n}=dh();return(0,o.jsx)(F.h,{variant:"tertiary",icon:J.F_,size:"small",accessibilityLabel:"Your chats",onClick:()=>{n({content:(0,o.jsx)(ig,{commandExecutor:e,coordinatorAgentId:t}),title:"Your chats"})}})}const sg="_sidebar_tozyd_1",ag="_goBrandingSidebar_tozyd_15",lg="_header_tozyd_19",cg="_main_tozyd_24",ug="_footer_tozyd_31",dg=({children:e,footer:t,includeChatHistory:n,commandExecutor:r,coordinatorAgentId:i,goBrandingEnabled:s})=>{const a=Pn(sg,s&&ag);return(0,o.jsxs)("div",{className:a,children:[(0,o.jsx)("div",{className:lg,children:n&&(0,o.jsx)(og,{commandExecutor:r,coordinatorAgentId:i})}),(0,o.jsx)("div",{className:cg,children:e}),t&&(0,o.jsx)("div",{className:ug,children:t})]})};var hg,gg,fg={exports:{}},pg=fg.exports={};function mg(){throw new Error("setTimeout has not been defined")}function vg(){throw new Error("clearTimeout has not been defined")}function xg(e){if(hg===setTimeout)return setTimeout(e,0);if((hg===mg||!hg)&&setTimeout)return hg=setTimeout,setTimeout(e,0);try{return hg(e,0)}catch{try{return hg.call(null,e,0)}catch{return hg.call(this,e,0)}}}!function(){try{hg="function"==typeof setTimeout?setTimeout:mg}catch{hg=mg}try{gg="function"==typeof clearTimeout?clearTimeout:vg}catch{gg=vg}}();var bg,yg=[],Cg=!1,wg=-1;function kg(){!Cg||!bg||(Cg=!1,bg.length?yg=bg.concat(yg):wg=-1,yg.length&&Sg())}function Sg(){if(!Cg){var e=xg(kg);Cg=!0;for(var t=yg.length;t;){for(bg=yg,yg=[];++wg<t;)bg&&bg[wg].run();wg=-1,t=yg.length}bg=null,Cg=!1,function(e){if(gg===clearTimeout)return clearTimeout(e);if((gg===vg||!gg)&&clearTimeout)return gg=clearTimeout,clearTimeout(e);try{gg(e)}catch{try{return gg.call(null,e)}catch{return gg.call(this,e)}}}(e)}}function Ig(e,t){this.fun=e,this.array=t}function Eg(){}pg.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];yg.push(new Ig(e,t)),1===yg.length&&!Cg&&xg(Sg)},Ig.prototype.run=function(){this.fun.apply(null,this.array)},pg.title="browser",pg.browser=!0,pg.env={},pg.argv=[],pg.version="",pg.versions={},pg.on=Eg,pg.addListener=Eg,pg.once=Eg,pg.off=Eg,pg.removeListener=Eg,pg.removeAllListeners=Eg,pg.emit=Eg,pg.prependListener=Eg,pg.prependOnceListener=Eg,pg.listeners=function(e){return[]},pg.binding=function(e){throw new Error("process.binding is not supported")},pg.cwd=function(){return"/"},pg.chdir=function(e){throw new Error("process.chdir is not supported")},pg.umask=function(){return 0};var Ag=fg.exports;const jg=6168==n.j?function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Ag):null;function Mg(e){return(t,n,r)=>e(((e,r,i)=>{const o=n();t(e,r);const s=n();console.debug("[Assistant Store Logger]",{action:i??"anonymous",prevState:o,nextState:s})}),n,r)}const _g=({set:e,chatService:t})=>{const n=new Set;return{chatHistory:{chats:{},initialize:async()=>{const n=await t.getAllChatsMetadata();e((e=>({chatHistory:{...e.chatHistory,chats:n}})),!1,"initialize")},renameChat:(e,n)=>{t.updateChatMetadata(e,{name:n,userEditedTitle:!0})},deleteChat:e=>{t.deleteChat(e)},subscribeToChatEvents:()=>{const r=({id:t,metadata:n})=>{e((e=>({chatHistory:{...e.chatHistory,chats:{...e.chatHistory.chats,[t]:n}}})),!1,"handleChatMetadataUpdated")};n.add(t.updates.on("chatCreated",r)),n.add(t.updates.on("chatMetadataUpdated",r)),n.add(t.updates.on("chatDeleted",(({id:t})=>{e((e=>({chatHistory:{...e.chatHistory,chats:Object.fromEntries(Object.entries(e.chatHistory.chats).filter((([e])=>e!==t)))}})),!1,"handleChatDeleted")})))},unsubscribeFromChatEvents:()=>{n.forEach((e=>{e.dispose()})),n.clear()}}}};var Rg=(e=>(e.default="default",e.text_selection="text_selection",e))(Rg||{}),Dg=(e=>(e.AppContent="app_content",e.TextSelection="text_selection",e))(Dg||{});function Tg(e){if(!e)return null;switch(e.type){case Dg.AppContent:return e.context;case Dg.TextSelection:return e.context.textSelection;default:return null}}function Og(e){return!!e&&Lg(e)&&"loaded"===e.status}const Pg=(e,t)=>Object.fromEntries(Object.entries(e).filter((([e])=>e!==t))),Lg=e=>!!e&&e.type===Dg.AppContent,Ng=e=>!!e&&e.type===Dg.TextSelection,Fg=e=>({id:e.id,type:Dg.TextSelection,context:e,lastUpdated:new Date}),Bg=({set:e,get:t,services:n})=>{var r,i;const o=new Set,s=null==(r=n.context.appContext)?void 0:r.getInitialContextId(),a=s?null==(i=n.context.appContext)?void 0:i.getAppContext(s):void 0,l=(null==a?void 0:a.textSelection)&&!(0,Ri.ID)(null==a?void 0:a.textSelection),c={};l&&(c[Rg.text_selection]=Fg(a));const u=[Rg.default];return l&&u.push(Rg.text_selection),{contextExtraction:{currentAppId:s??Rg.default,contextSources:c,selectedContextSourceIds:u,documentContextState:{...n.context.documentContext.state},attachContext:(n,r)=>{const i=t().contextExtraction.contextSources[r];i&&(t().tracking.addContext(n,i.type),e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:[...e.contextExtraction.selectedContextSourceIds.slice(0,-1),r]}})),!1,"attachContext"))},detachCurrentContext:(n,r)=>{const i=t().contextExtraction.contextSources[r];i&&t().tracking.removeContext(n,i.type),e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:e.contextExtraction.selectedContextSourceIds.filter((e=>e!==r))}})),!1,"detachCurrentContext")},extractCurrentContext:t=>{var r;if(null!==t){e(function(e){return t=>({...t,contextExtraction:{...t.contextExtraction,currentAppId:e}})}(t),!1,"setCurrentAppId");try{const i=null==(r=n.context.appContext)?void 0:r.getAppContext(t);e(function(e){const t=e.id;return n=>({...n,contextExtraction:{...n.contextExtraction,contextSources:{...n.contextExtraction.contextSources,[t]:{type:Dg.AppContent,appId:t,id:t,status:"loaded",context:e,error:null,lastUpdated:new Date}}}})}(i),!1,"extractCurrentContext")}catch(n){e(function(e,t){return n=>({...n,contextExtraction:{...n.contextExtraction,contextSources:{...n.contextExtraction.contextSources,[e]:{type:Dg.AppContent,appId:e,id:e,status:"error",context:null,error:t,lastUpdated:new Date}}}})}(t,n),!1,"extractCurrentContext")}}else console.warn("No window ID provided to extractCurrentContext")},resetContextSource:()=>{const n=t().contextExtraction.selectedContextSourceIds.includes(Rg.text_selection)&&!!t().contextExtraction.contextSources[Rg.text_selection];e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:n?[Rg.default,Rg.text_selection]:[Rg.default]}})),!1,"resetContextSource")},getCurrentAppContext:()=>function(e){const{contextSources:t,selectedContextSourceIds:n}=e.contextExtraction,r=n[n.length-1];if(r===Rg.text_selection)return Tg(t[r]);const i=e.contextExtraction.currentAppId,o=e.contextExtraction.contextSources[i];return o?Tg(o):null}(t()),getSelectedContextId:()=>{const{selectedContextSourceIds:e}=t().contextExtraction;return e[e.length-1]},subscribeToExternalEvents:()=>{n.context.appContext&&(o.add(n.context.appContext.on("contextAvailable",(e=>{t().contextExtraction.extractCurrentContext(e.id)}))),o.add(n.context.appContext.on("contextInvalidated",(n=>{e(null===n?e=>({contextExtraction:{...e.contextExtraction,currentAppId:Rg.default}}):e=>({contextExtraction:{...e.contextExtraction,contextSources:Pg(e.contextExtraction.contextSources,n),selectedContextSourceIds:t().contextExtraction.selectedContextSourceIds.filter((e=>e!==n))}}),!1,"removeAppContext")}))),o.add(n.context.appContext.on("selectionChange",(({context:n})=>{const{textSelection:r}=n,i=!r||(0,Ri.ID)(r),{[Rg.text_selection]:o,...s}=t().contextExtraction.contextSources,a=i?s:{...s,[Rg.text_selection]:Fg(n)},l=t().contextExtraction.selectedContextSourceIds.filter((e=>e!==Rg.text_selection)),c=i?l:[...l,Rg.text_selection];e((e=>({contextExtraction:{...e.contextExtraction,contextSources:a,selectedContextSourceIds:c}})),!1,"textSelectionChange")}))),o.add(n.context.documentContext.on("documentContextStateUpdated",(()=>{e((e=>({contextExtraction:{...e.contextExtraction,documentContextState:{...n.context.documentContext.state}}})))}))))},unsubscribeFromExternalEvents:()=>{o.forEach((e=>{e.dispose()})),o.clear()},insertArtifact:(e,t,r)=>n.context.documentContext.state.isAvailable?n.context.documentContext.write(e,{chatId:t,messageId:r}):Promise.resolve()}}};var zg,Hg,Ug,$g,Wg,Vg,Gg,Zg,qg,Kg,Jg,Yg,Xg,Qg,ef,tf,nf,rf,of,sf,af,lf,cf,uf;class df{constructor(e){qd(this,$g),qd(this,zg,new Map),qd(this,Hg,new i.v),qd(this,Ug),Kd(this,Ug,e)}register(e){if(!e.id)throw new Error("Option must have a non-empty id");Zd(this,zg).set(e.id,e),Zd(this,Hg).emit("registered",e),Zd(this,Hg).emit("optionsChanged",this.getOptions())}unregister(e){if(!e)throw new Error("Option ID must be provided");Zd(this,zg).delete(e)&&(Zd(this,Hg).emit("unregistered",e),Zd(this,Hg).emit("optionsChanged",this.getOptions()))}getOptions(){return Array.from(Zd(this,zg).values())}resolveOptions(e){return this.getOptions().filter((t=>{try{return t.rule(e)}catch(e){return console.warn(`Error evaluating rule for option ${t.id}:`,e),!1}})).map((t=>Jd(this,$g,Wg).call(this,t,e))).filter((e=>null!==e))}execute(e){Zd(this,Ug).execute(e.command)}on(e,t){return Zd(this,Hg).on(e,t)}dispose(){Zd(this,zg).clear()}}zg=new WeakMap,Hg=new WeakMap,Ug=new WeakMap,$g=new WeakSet,Wg=function(e,t){try{return{id:e.id,label:Jd(this,$g,Vg).call(this,e.label,t),icon:Jd(this,$g,Vg).call(this,e.icon,t),command:Jd(this,$g,Vg).call(this,e.command,t)}}catch(t){return console.warn(`Error resolving option ${e.id}:`,t),null}},Vg=function(e,t){return"function"==typeof e?e(t):e};class hf extends(6168==n.j?df:null){constructor(e,t){super(e),qd(this,Kg),qd(this,Gg,new i.v),qd(this,Zg,new Map),qd(this,qg),Kd(this,qg,t),Jd(this,Kg,Jg).call(this)}updateAgentHandles(){for(const[e,t]of Zd(this,qg).entries())Zd(this,Zg).has(e)||Jd(this,Kg,Yg).call(this,e,t);for(const e of Zd(this,Zg).keys())Zd(this,qg).has(e)||Jd(this,Kg,Xg).call(this,e);Zd(this,Gg).emit("optionsChanged",this.getOptions())}on(e,t){return Zd(this,Gg).on(e,t)}getOptions(){return[...super.getOptions(),...Jd(this,Kg,Qg).call(this)]}resolveOptions(e){return this.getOptions().filter((t=>{try{return t.rule(e)}catch(e){return console.warn(`Error evaluating rule for option ${t.id}:`,e),!1}})).map((t=>Jd(this,Kg,nf).call(this,t,e)))}dispose(){for(const e of Zd(this,Zg).values())e.forEach((e=>e.dispose()));Zd(this,Zg).clear()}}Gg=new WeakMap,Zg=new WeakMap,qg=new WeakMap,Kg=new WeakSet,Jg=function(){for(const[e,t]of Zd(this,qg).entries())Jd(this,Kg,Yg).call(this,e,t)},Yg=function(e,t){const n=[];n.push(t.on("registered",(t=>{Zd(this,Gg).emit("registered",Jd(this,Kg,ef).call(this,t,e))}))),n.push(t.on("unregistered",(t=>{Zd(this,Gg).emit("unregistered",Jd(this,Kg,tf).call(this,t,e))}))),n.push(t.on("optionsChanged",(()=>{Zd(this,Gg).emit("optionsChanged",this.getOptions())}))),Zd(this,Zg).set(e,n)},Xg=function(e){const t=Zd(this,Zg).get(e);t&&(t.forEach((e=>e.dispose())),Zd(this,Zg).delete(e))},Qg=function(){return Array.from(Zd(this,qg).entries()).flatMap((([e,t])=>t.getOptions().map((t=>Jd(this,Kg,ef).call(this,t,e)))))},ef=function(e,t){return{...e,id:Jd(this,Kg,tf).call(this,e.id,t)}},tf=function(e,t){return`${t}/${e}`},nf=function(e,t){try{return{...e,label:Jd(this,Kg,rf).call(this,e.label,t,"Untitled Option"),icon:Jd(this,Kg,rf).call(this,e.icon,t,void 0),command:Jd(this,Kg,rf).call(this,e.command,t,"function"==typeof e.command?e.command():e.command)}}catch(t){return console.warn(`Error resolving option ${e.id}:`,t),{id:e.id,label:"Error resolving option",icon:void 0,command:"function"==typeof e.command?e.command():e.command}}},rf=function(e,t,n){if("function"==typeof e)try{return e(t)}catch(e){return console.warn("Error resolving deferred value:",e),n}return e};class gf{constructor(e,t){qd(this,cf),qd(this,of,new Map),qd(this,sf),qd(this,af),qd(this,lf),Kd(this,af,e),Kd(this,lf,t),Kd(this,sf,new hf(t,Zd(this,of)))}getAgentHandle(e){return Jd(this,cf,uf).call(this,e)}getAgentIds(){return Array.from(Zd(this,of).keys())}getAgentCount(){return Zd(this,of).size}hasAgent(e){return e===Zd(this,af)||Zd(this,of).has(e)}removeAgent(e){if(e===Zd(this,af))throw new Error("Cannot remove the coordinator agent");const t=Zd(this,of).delete(e);return t&&Zd(this,sf).updateAgentHandles(),t}clear(){Zd(this,of).clear(),Zd(this,sf).updateAgentHandles()}dispose(){Zd(this,of).forEach((e=>e.dispose())),Zd(this,of).clear(),Zd(this,sf).dispose()}}function ff(e,t,n=[]){const r=s.useMemo((()=>new gf(e,t)),[e,t]);return s.useEffect((()=>()=>{r.dispose()}),[r]),s.useEffect((()=>(n.forEach((e=>{var t;null==(t=e.contextualOptions)||t.forEach((t=>{r.getAgentHandle(e.id).register(function(e,t){return e.icon?e:{...e,icon:t.renderIcon({size:"medium"})}}(t,e))}))})),()=>{n.forEach((e=>{var t;null==(t=e.contextualOptions)||t.forEach((t=>{r.getAgentHandle(e.id).unregister(t.id)}))}))})),[n,r]),r}function pf(e,t){const[n,r]=s.useState({status:"loading",data:null,error:null});return s.useEffect((()=>{const t=new AbortController;return r({status:"loading",data:null,error:null}),e(t).then((e=>{t.signal.aborted||r({status:"success",data:e,error:null})})).catch((e=>{t.signal.aborted||r({status:"error",data:null,error:e})})),()=>{t.abort()}}),t),n}function mf(e){switch(e){case"summarize":case"summarizeChat":case"summarizeEmail":case"summarizeWindow":return"Summarize this for me";case"improve":return"Improve this text";case"replyChat":return"Give me some ways I can reply to this chat";case"replyEmail":return"Give me some ways I can reply to this email";case"helpBrainstorm":return"Help me brainstorm";case"createResearchPlan":return"Create a research plan";case"makeFriendlier":return"Make it sound friendlier";case"makeNextStepsClear":return"Make next steps clear";case"shortenAndRemoveJargon":return"Shorten and remove jargon";case"translate":return"Translate this text";case"comprehension":return"Help me understand this text";default:(0,r.vE)(e)}}of=new WeakMap,sf=new WeakMap,af=new WeakMap,lf=new WeakMap,cf=new WeakSet,uf=function(e){if(e===Zd(this,af))return Zd(this,sf);if(!Zd(this,of).has(e)){const t=new df(Zd(this,lf));Zd(this,of).set(e,t),Zd(this,sf).updateAgentHandles()}const t=Zd(this,of).get(e);if(!t)throw new Error(`Agent handle for agent ${e} not found`);return t};const vf={isAvailable:e=>(0,Di.Ot)(e)&&"aiEditor"===e.app,getActions:()=>[{kind:"helpBrainstorm",icon:"chatAgent",label:"Start brainstorming",predefinedPrompt:mf("helpBrainstorm")},{kind:"createResearchPlan",icon:"chatAgent",label:"Create research plan",predefinedPrompt:mf("createResearchPlan")},{kind:"makeFriendlier",icon:"chatAgent",label:"Sound friendlier",predefinedPrompt:mf("makeFriendlier")}]},xf=[{name:"Google Docs",match:{urlPatterns:[/docs\.google\.com/],titleKeywords:["google docs"]}},{name:"Microsoft Word",match:{appNames:["microsoft word","word"]}},{name:"Microsoft Excel",match:{appNames:["microsoft excel","excel"]}},{name:"Apple Pages",match:{appNames:["pages"]}},{name:"Coda",match:{appNameIncludes:["coda docs","coda"]}}],bf={isAvailable:e=>!!(0,Di.Ot)(e)&&xf.some((t=>{const{urlPatterns:n,titleKeywords:r,appNames:i,appNameIncludes:o}=t.match,s=n&&e.origin&&n.some((t=>t.test(e.origin))),a=r&&e.title&&r.some((t=>e.title.toLowerCase().includes(t))),l=i&&e.app&&i.some((t=>e.app.toLowerCase()===t)),c=o&&e.app&&o.some((t=>e.app.toLowerCase().includes(t)));return s||a||l||c})),getActions:()=>[{kind:"summarizeWindow",icon:"summarize",label:"Summarize this document",predefinedPrompt:mf("summarizeWindow")}]},yf=[{name:"Gmail",match:{urlPatterns:[/mail\.google\.com/],appNames:["gmail"]}},{name:"Yahoo Mail",match:{urlPatterns:[/mail\.yahoo\.com/],appNames:["yahoo mail"]}},{name:"Outlook",match:{urlPatterns:[/outlook\.office\.com/,/outlook\.live\.com/,/outlook\.office365\.com/,/outlook\.office365\.us/],appNames:["microsoft outlook","outlook"]}},{name:"Apple Mail",match:{appNames:["mail"]}}],Cf={isAvailable:e=>!!(0,Di.Ot)(e)&&yf.some((t=>{const{urlPatterns:n,appNames:r}=t.match,i=n&&e.origin&&n.some((t=>t.test(e.origin))),o=r&&e.app&&r.some((t=>e.app.toLowerCase()===t));return i||o})),getActions:()=>[{kind:"summarizeEmail",icon:"summarize",label:"Summarize this thread",predefinedPrompt:mf("summarizeEmail")}]};const wf={isAvailable:function(e){return(0,Di.Ot)(e)&&void 0!==e.textSelection&&null!==e.textSelection&&("string"==typeof e.textSelection?e.textSelection.trim().length>0:e.textSelection.selectedText.trim().length>0)},getActions:()=>[{kind:"improve",icon:"improve",label:"Improve this text",predefinedPrompt:mf("improve")},{kind:"summarize",icon:"summarize",label:"Summarize this text",predefinedPrompt:mf("summarize")}]},kf={isAvailable:e=>(0,Di.Ot)(e)&&(e=>e.startsWith("https://superhuman.com/superhuman-go-intro"))(e.origin),getActions:()=>[{kind:"summarize",icon:"chatAgent",label:"Summarize this text",predefinedPrompt:mf("summarize")},{kind:"shortenAndRemoveJargon",icon:"chatAgent",label:"Shorten and remove jargon",predefinedPrompt:mf("shortenAndRemoveJargon")}]},Sf={isAvailable:e=>(0,Di.Ot)(e)&&/mail\.superhuman\.com/.test(e.origin),getActions:()=>[]},If=[wf,Cf,bf,vf,kf,Sf,{isAvailable:()=>!0,getActions:()=>[{kind:"summarizeWindow",icon:"summarize",label:"Summarize this page",predefinedPrompt:mf("summarizeWindow")}]}];class Ef{constructor(e=If){this._rules=e}resolve(e){if(!e)return Promise.resolve([]);const t=this._rules.find((t=>t.isAvailable(e)));return Promise.resolve(t?t.getActions(e):[])}}function Af(e){const t=s.useRef(null!=e&&e.resolverFactory?e.resolverFactory():new Ef),n=function(){const{contextualOptionsRegistry:e}=lh(),[t,n]=s.useState([]);return s.useEffect((()=>{if(!e)return;n(e.resolveOptions());const t=e.on("optionsChanged",(()=>n(e.resolveOptions())));return()=>{t.dispose()}}),[e]),t}(),r=ph((e=>{const t=e.contextExtraction.currentAppId,n=e.contextExtraction.selectedContextSourceIds,r=e.contextExtraction.contextSources,i=n.includes(Rg.text_selection)?r[Rg.text_selection]:r[t];return Lg(i)?i:Ng(i)?{status:"loaded",error:null,context:i.context}:{status:"error",error:new Error("No context source found"),context:null}})),i=pf((async()=>"loaded"!==r.status?[]:t.current.resolve(r.context)),[r.status,r.context]),o=s.useMemo((()=>function(e,t){return"error"===e.status?{status:"error",error:e.error,actions:null}:"error"===t.status?{status:"error",error:t.error,actions:null}:"loading"===t.status?{status:"loading",error:null,actions:null}:{status:"loaded",error:null,actions:t.data}}(r,i)),[r,i]);if("loaded"===o.status){const e=[...o.actions,...jf(n)].slice(0,4);return{...o,actions:e}}return o}function jf(e){return e.map((e=>({kind:"assistantCommand",icon:e.icon,label:e.label,command:e.command})))}function Mf(){const{extractCurrentContext:e,subscribeToExternalEvents:t,unsubscribeFromExternalEvents:n,currentAppId:r}=ph((e=>({currentAppId:e.contextExtraction.currentAppId,extractCurrentContext:e.contextExtraction.extractCurrentContext,subscribeToExternalEvents:e.contextExtraction.subscribeToExternalEvents,unsubscribeFromExternalEvents:e.contextExtraction.unsubscribeFromExternalEvents})));s.useEffect((()=>(e(r),t(),()=>{n()})),[e,t,n,r])}async function _f(e,t){const n=await t.getAgentMetadata((0,U.Ue)(e)),r={name:n.metadata.name,logo:{imageUrl:n.metadata.logo.imageUrl,mimeType:n.metadata.logo.mimeType,altText:n.metadata.logo.altText}};return(0,o.jsx)(J.J$,{agent:r,size:"medium"})}class Rf{constructor(e){this._params=e}async resolve(e){const t=await this._params.localResolver.resolve(e);if(!this._params.isEnabled()||!this._params.recommendedActionsService||!this._params.agentDirectoryService)return t;const n=null!=e&&e.textSelection?(0,Ri.ZT)(e.textSelection):null;if(!n)return t;try{const e=await this._params.recommendedActionsService.getRecommendedActions({selectedText:n}),r=e.length>0?await this._transformToContextualActions(e.sort(((e,t)=>t.score-e.score)),n):[];return[...t,...r]}catch(e){return console.warn("Failed to get ML recommendations, using fallback",e),t}}async _transformToContextualActions(e,t){const n=e=>({selectedText:t.length>0?t:void 0,skillName:e.agentSkillName});return await Promise.all(e.map((async e=>({kind:"assistantCommand",icon:this._params.agentDirectoryService?await _f(e.agentId,this._params.agentDirectoryService):"chatAgent",label:e.actionLabel,command:{kind:th.CompoundAgent,commands:[{kind:th.OpenAgent,agentId:e.agentId},{kind:th.MessageAgent,agentId:e.agentId,message:{kind:nh.Command,command:{kind:rh.CreateChat,message:{content:e.predefinedPrompt,options:n(e)}}}}]}}))))}}const Df=({services:e,get:t,set:n})=>{const r=new Set;return{tracking:{responseStreamingStartTime:null,responseStreamingStarted:()=>{n((e=>({tracking:{...e.tracking,responseStreamingStartTime:performance.now()}})),!1,"responseStreamingStarted")},responseCopied:({chatId:t,responseLength:n,messageId:r})=>{e.tracking.trackEvent(eh.ResponseCopied,{chatId:t,responseLength:n,messageId:r})},responseStreamed:({chatId:r,message:i,previousVersion:o})=>{var s;if("assistant"===i.type&&"final"!==i.kind||"assistant"!==i.type&&"error"!==i.type)return;const a=t().tracking.responseStreamingStartTime;if(a){const t="assistant"===i.type?i.content.length:(null==(s=null==o?void 0:o.content)?void 0:s.length)||0,l=i.type,c="error"===l?"failed":"loaded",u="error"===l?i.title:void 0,d="error"===l?i.errorType:void 0,h=performance.now()-a;e.tracking.trackEvent(eh.ResponseStreamingCompleted,{chatId:r,messageId:i.id,durationMs:h,contentLength:t,result:c,error:u,errorType:d}),n((e=>({tracking:{...e.tracking,responseStreamingStartTime:null}})),!1,"responseStreamed")}},responseStoppedByUser:({chatId:r,lastMessage:i})=>{const o=t().tracking.responseStreamingStartTime,s=o?performance.now()-o:void 0;i&&e.tracking.trackEvent(eh.ResponseStoppedByUser,{chatId:r,payload:{messageId:i.id,durationMs:s,contentLength:i.content.length||0}}),n((e=>({tracking:{...e.tracking,responseStreamingStartTime:null}})),!1,"responseStoppedByUser")},messageSubmitted:({chatId:t,responseMessageId:n,content:r,messageOptions:i,messageCountBeforeSend:o})=>{i.predefinedPromptKind?e.tracking.trackEvent(eh.PredefinedPromptSubmitted,{chatId:t,contextualActionKind:i.predefinedPromptKind,payload:{messageId:n,messageCount:o}}):e.tracking.trackEvent(eh.MessageSubmitted,{chatId:t,messageLength:r.length,payload:{messageId:n,messageCount:o}})},responseInserted:({chatId:t,responseLength:n,messageId:r})=>{e.tracking.trackEvent(eh.ResponseInserted,{chatId:t,responseLength:n,messageId:r})},trackComponentEvent:({componentId:t,event:n,detail:r})=>{e.tracking.trackEvent(eh.ComponentInteraction,{componentId:t,event:n,detail:r})},downloadImageClicked:({chatId:t,messageId:n})=>{e.tracking.trackEvent(eh.DownloadImageClicked,{chatId:t,messageId:n})},subscribeToChatEvents:()=>{r.add(e.chat.updates.on("chatMessageStreamed",(({id:e,message:n,previousVersion:r})=>{t().tracking.responseStreamed({chatId:e,message:n,previousVersion:r})}))),r.add(e.chat.updates.on("userMessageSent",(({id:e,responseMessageId:n,content:r,messageOptions:i,messageCountBeforeSend:o})=>{t().tracking.responseStreamingStarted(),t().tracking.messageSubmitted({chatId:e,responseMessageId:n,content:r,messageOptions:i,messageCountBeforeSend:o})})))},addContext:(t,n)=>{var r,i;null==(i=(r=e.tracking).addContext)||i.call(r,t,n)},removeContext:(t,n)=>{var r,i;null==(i=(r=e.tracking).removeContext)||i.call(r,t,n)},unsubscribeFromChatEvents:()=>{r.forEach((e=>{e.dispose()})),r.clear()}}}},Tf=({set:e,get:t,services:n})=>{const r=new Map;return{chat:{activeChats:{},createNewChat:(t,r)=>{var i,o;const s=null==(o=(i=n.chat).createDraft)?void 0:o.call(i,r);e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[t]:{id:s?s.metadata.id:"",messages:s?s.messages:[],draft:s}}}})),!1,"createNewChat")},setActiveChat:async(r,i,o)=>{var s,a,l;const c=(null==(a=null==(s=t().chat.activeChats[r])?void 0:s.draft)?void 0:a.metadata.id)===o;if(!n.chat.doesChatExist(o)&&!c)return void t().chat.createNewChat(r,i);if((null==(l=t().chat.activeChats[r])?void 0:l.id)===o)return;const u=await n.chat.getChatMessages(o);e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[r]:{id:o,messages:u,draft:void 0}}}})),!1,"setActiveChat")},sendMessage:(r,i,o={},s)=>{var a;const l=t().chat.activeChats[r];if(!l)return;let c=l.id;(l.draft||!c)&&(c=n.chat.createChat(l.draft,null==(a=l.draft)?void 0:a.metadata.agentInstanceId),e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[r]:{id:c,messages:[],draft:void 0}}}})),!1,"sendMessage")),n.chat.sendMessage(c,i,o,s)},sendSystemMessage:(e,n,r)=>{t().chat.sendMessage(e,null,{systemMessageMetadata:n,omitThinkingMessage:r})},stopStreamingResponse:e=>{var r;const i=null==(r=t().chat.activeChats[e])?void 0:r.id;i&&n.chat.stopStreamingResponse(i)},retryMessage:e=>{var r;const i=null==(r=t().chat.activeChats[e])?void 0:r.id;i&&n.chat.retryMessage(i)},subscribeToChatEvents:i=>{r.has(i)||r.set(i,new Set);const o=r.get(i);null==o||o.add(n.chat.updates.on("chatMessagesUpdated",(({id:n,messages:r})=>{var o;n===(null==(o=t().chat.activeChats[i])?void 0:o.id)&&e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[i]:{...e.chat.activeChats[i],messages:r,draft:void 0}}}})),!1,"chatMessagesUpdated")})))},unsubscribeFromChatEvents:e=>{const t=r.get(e);t&&(t.forEach((e=>{e.dispose()})),r.delete(e))}}}},Of=({services:e,set:t})=>{const n=n=>{if(e.agentDirectory)try{const r=e.agentDirectory.listInstalledAgents();t((e=>({agentDirectory:{...e.agentDirectory,installedAgents:r.map((e=>({id:e.id,title:e.name,hasData:e.hasData,renderPanel:e.renderPanel,renderIcon:Pf(e),isPaidAgentFreeInBeta:e.isPaidAgentFreeInBeta})))}})),!1,n)}catch(e){Ti.C8.Logging.getLogger("agentDirectorySlice").error("Error updating installed agent state:",e)}};return{agentDirectory:{installedAgents:[],getInstanceIdsForAgent:t=>{var n;let r=t;return(0,U.kq)(t)||(r=(0,W.Cb)(t)??t),(0,U.d1)(r)?(null==(n=e.agentDirectory)?void 0:n.getAgentInstancesForAgent(r).map((e=>e.agentInstanceId)))??[]:[]},subscribeToAgentStateChanges:()=>{if(!e.agentDirectory)return Lf;const r=e.agentDirectory.onStateUpdated((()=>n("agentStateChanged"))),i=e.agentDirectory.onInstalledAgentsOrderChanged((e=>{t((t=>{const n=new Map(t.agentDirectory.installedAgents.map((e=>[e.id,e]))),r=e.map((e=>n.get(e))).filter((e=>void 0!==e));return{agentDirectory:{...t.agentDirectory,installedAgents:r}}}),!1,"handleInstalledAgentsOrderChanged")}));return()=>{r(),i()}},loadInstalledAgents:()=>{n("loadInstalledAgents")}}}},Pf=e=>({size:t="large",goBrandingEnabled:n=!1})=>(0,o.jsx)(er,{agent:e,size:t,goBrandingEnabled:n}),Lf=()=>{},Nf=({services:e})=>({featureToggle:e.featureToggle??new Fh}),Ff=({set:e,services:t})=>{const n=new Set;return{inProductMessaging:{messages:{},get:async(n,r)=>{var i;const o=await(null==(i=t.inProductMessaging)?void 0:i.get(n,r));e((e=>({inProductMessaging:{...e.inProductMessaging,messages:{...e.inProductMessaging.messages,[n]:o}}})),!1,"get")},trackImpression:(e,n,r)=>{var i;null==(i=t.inProductMessaging)||i.trackImpression(e,n,r)},subscribeToUpdates:()=>{var r;const i=null==(r=t.inProductMessaging)?void 0:r.on("update",(({slot:t,message:n})=>{e((e=>({inProductMessaging:{...e.inProductMessaging,messages:{...e.inProductMessaging.messages,[t]:n}}})))}));i&&n.add(i)},unsubscribeFromUpdates:()=>{n.forEach((e=>{e.dispose()})),n.clear()}}}},Bf=e=>e.reduce(((e,t)=>({...e,[t.label]:t.value})),{}),zf=e=>({updatedProperties:Bf(e.updatedProperties),status:e.status}),Hf=e=>e.filter((e=>"system"===e.type)).map((e=>e.metadata)).filter((e=>"pendingToolCallActionResults"===e.kind)).flatMap((e=>e.results)),Uf=({toolName:e,parameterName:t,parameterValue:n})=>`${e}~${t}~${n}`,$f=({set:e,get:t})=>({pendingToolCall:{byId:{},parameters:{},initialize:t=>{const n=Hf(t),r=((e,t)=>{const n=new Set(e.map((e=>e.toolCallId)));return t.slice(0,-1).reduce(((e,t)=>{const r="assistant"===t.type&&wh(t);if(r){const{toolCallId:t,toolName:i}=r;n.has(t)||e.push({toolCallId:t,toolName:i,status:"rejected",updatedProperties:[]})}return e}),[])})(n,t),i=(e=>e.reduce(((e,t)=>({...e,[t.toolCallId]:zf(t)})),{}))([...n,...r]);Object.keys(i).length>0&&e((e=>({pendingToolCall:{...e.pendingToolCall,byId:i}})),!1,"initialize")},updateProperty:(t,n,r)=>{e((e=>{const i=e.pendingToolCall.byId[t],o=(null==i?void 0:i.updatedProperties)||{};return{pendingToolCall:{...e.pendingToolCall,byId:{...e.pendingToolCall.byId,[t]:{...i,updatedProperties:{...o,[n]:r}}}}}}),!1,"updateProperty")},setStatus:(t,n)=>{e((e=>{const r=e.pendingToolCall.byId[t];return{pendingToolCall:{...e.pendingToolCall,byId:{...e.pendingToolCall.byId,[t]:{...r,status:n}}}}}),!1,"setStatus")},getStatus:e=>{var n;return e&&(null==(n=t().pendingToolCall.byId[e])?void 0:n.status)||"pending"},getUpdatedProperties:e=>{var n;return(null==(n=t().pendingToolCall.byId[e])?void 0:n.updatedProperties)||{}},getUpdatedPropertiesList:e=>{var n;const r=(null==(n=t().pendingToolCall.byId[e])?void 0:n.updatedProperties)||{};return Object.keys(r).map((e=>({label:e,value:r[e]})))},setParameterDisplay:(t,n,r,i)=>{e((e=>{const o=Uf({toolName:t,parameterName:n,parameterValue:r});return{pendingToolCall:{...e.pendingToolCall,parameters:{...e.pendingToolCall.parameters,[o]:i}}}}),!1,"setParameterDisplay")},getParameterDisplay:(e,n,r)=>{const i=Uf({toolName:e,parameterName:n,parameterValue:r});return t().pendingToolCall.parameters[i]}}}),Wf=({services:e})=>{var t,n,r,i;return{suggestions:{onUpdate:t=>{var n;return(null==(n=e.suggestions)?void 0:n.on("update",t))??{dispose:Vf}},focusSuggestions:(null==(t=e.suggestions)?void 0:t.focusSuggestions)??Vf,hasSuggestion:(null==(n=e.suggestions)?void 0:n.hasSuggestion)??(()=>!1),applyAllSuggestions:(null==(r=e.suggestions)?void 0:r.applyAllSuggestions)??Vf,dismissAllSuggestions:(null==(i=e.suggestions)?void 0:i.dismissAllSuggestions)??Vf}}},Vf=()=>{};function Gf({chatService:e,contextService:t,trackingService:n,featureToggleService:r,suggestionsService:i,agentDirectoryService:a,inProductMessagingService:l,toolCallCardService:c,recommendedActionsService:u,children:d}){const h=(0,s.useMemo)((()=>(e=>{const t="dev"===jg.env.NODE_ENV?Mg:e=>e;return(0,_i.M)()(t(((t,n)=>({..._g({chatService:e.chat,set:t}),...Df({services:e,set:t,get:n}),...Tf({services:e,set:t,get:n}),...$f({set:t,get:n}),...Nf({services:e}),...Wf({services:e}),...Of({services:e,set:t,get:n}),...Ff({services:e,set:t}),...Bg({services:e,set:t,get:n})}))))})({chat:e,context:t,tracking:n,featureToggle:r,suggestions:i,agentDirectory:a,inProductMessaging:l,toolCallCard:c,recommendedActions:u})),[e,t,n,r,i,a,l,c,u]);return(0,o.jsx)(fh.Provider,{value:h,children:(0,o.jsx)(Zf,{children:d})})}function Zf({children:e}){return(()=>{const{subscribeToAgentStateChanges:e,loadInstalledAgents:t}=jh();(0,s.useEffect)((()=>{t();const n=e();return()=>{n()}}),[t,e])})(),function(){const{subscribeToChatEvents:e,unsubscribeFromChatEvents:t,initialize:n}=mh();(0,s.useEffect)((()=>(n(),e(),()=>{t()})),[n,e,t])}(),function(){const{subscribeToUpdates:e,unsubscribeFromUpdates:t}=ph((e=>e.inProductMessaging));(0,s.useEffect)((()=>(e(),()=>{t()})),[e,t])}(),function(){const{subscribeToChatEvents:e,unsubscribeFromChatEvents:t}=bh();(0,s.useEffect)((()=>(e(),()=>{t()})),[e,t])}(),e}class qf{constructor(e){this.assistantTrackingService=e}trackEvent(e,t){this.assistantTrackingService.trackEvent(e,t)}}function Kf({commandExecutor:e,selectedAgentId:t,coordinatorAgentId:n}){const{showModal:r,closeModal:i,isOpen:a}=dh(),l=gh(),c=Rh(),u=Ih(),d=u.isFeatureEnabled(Lh.NativeInstallFlow),h=u.isFeatureEnabled(Lh.FirstPartyPackAgents),g=Ti.C8.Logging.getLogger("useOpenAgentDirectory"),f=u.isFeatureEnabled(Lh.GoBranding),p=(0,s.useCallback)((t=>{if((0,U.kq)(t)&&(null==l||!l.isAgentInstalled(t)))return void g.info("Agent not installed but called to open from agent directory");let n=t;if(h&&(0,U.kq)(t)){const e=(0,W.HS)(t);e&&(n=e)}e.execute({kind:th.OpenAgent,agentId:n}),i()}),[l,h,e,i,g]),m=(0,s.useCallback)((()=>{i()}),[i]),v=(0,s.useCallback)((e=>{if(!l||a)return;const i=c?new qf(c):void 0;r({content:(0,o.jsx)(ni,{agentDirectoryService:l,trackingService:i,onOpenAgent:p,closeModal:m,initialView:e,shouldUseNativeInstallFlow:d,isFirstPartyPackAgentsEnabled:h,selectedAgentId:t&&(0,U.d1)(t)?t:void 0,coordinatorAgentId:n&&(0,U.d1)(n)?n:void 0,goBrandingEnabled:f}),hideDefaultHeader:!0})}),[l,c,r,m,p,d,h,a,t,n,f]);return{openAgentDirectory:(0,s.useCallback)((()=>{v({type:zn.Directory})}),[v]),openAgentDirectoryModal:v,handleOpenAgent:p,isOpen:a}}var Jf=(e=>(e.Agent="agent",e.Directory="directory",e))(Jf||{});function Yf(e){return"agent"===e.type}const Xf={agentNamesOverlay:"_agentNamesOverlay_1odfg_1",agentName:"_agentName_1odfg_1",agentNameClickable:"_agentNameClickable_1odfg_27"},Qf=({allItems:e,hoveredAgentId:t,selectedAgentId:n,showTopChevron:r,showBottomChevron:i,onHover:a,onSelectItem:l,onScroll:c,scrollContainerRef:u,closeOnAgentReselect:d=!0,onOpenAgentDirectory:h})=>{const g=(0,s.useRef)(null),{trackingRef:f}=Dh(Qd.AgentBenchLabelsOverlay,{agentId:t??""}),p=(0,s.useCallback)((e=>{g.current=e,f(e)}),[]),{overlayHeight:m,marginTop:v,marginBottom:x}=(({scrollContainerRef:e,overlayRef:t,showTopChevron:n,showBottomChevron:r})=>{const[i,o]=(0,s.useState)(0),{marginTop:a,marginBottom:l}=(0,s.useMemo)((()=>({marginTop:n?48:4,marginBottom:r?48:4})),[n,r]);return(0,s.useEffect)((()=>{const n=e.current,r=t.current;if(!n||!r)return;o(n.clientHeight);const i=()=>{r.scrollTop=n.scrollTop};return i(),n.addEventListener("scroll",i,{passive:!0}),()=>{n.removeEventListener("scroll",i)}}),[e,n,r,t]),{overlayHeight:i,marginTop:a,marginBottom:l}})({scrollContainerRef:u,overlayRef:g,showTopChevron:r,showBottomChevron:i});return u.current?(0,o.jsx)("div",{ref:p,onScroll:()=>{var e;return c((null==(e=g.current)?void 0:e.scrollTop)??0)},className:Xf.agentNamesOverlay,"data-testid":"agent-names-overlay",style:{maxHeight:m,marginTop:v,marginBottom:x},children:e.map((e=>{const r=Yf(e)?e.item.id:e.id,i=Yf(e)?e.item.title:e.title,s=r===t,c=r===n,u=d||!c,g=!!Yf(e)&&!!e.item.experimental_disabledReason,f=Pn(Xf.agentName,{[Xf.agentNameHovered]:s,[Xf.agentNameSelected]:c,[Xf.agentNameSubdued]:!s&&!c,[Xf.agentNameClickable]:u&&!g});return(0,o.jsx)("div",{className:Xf.agentName,style:{minHeight:"32px",marginBottom:"8px"},onMouseEnter:()=>a(r),onClick:()=>{!function(e){return"directory"===e.type}(e)?l(r):null==h||h()},children:(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"medium",color:s||c?"base-default":"base-subdued",className:f,children:i})},r)}))}):null};var ep=(e=>(e.AgentNoticeCard="AgentNoticeCard",e.AddDataSourcePopover="AddDataSourcePopover",e.FindMoreAgentsPopover="FindMoreAgentsPopover",e.AgentHeaderNoticeCard="AgentHeaderNoticeCard",e))(ep||{});const tp=e=>{var t;const n=null==(t=(0,s.useContext)(hh))?void 0:t.pushedContentService,[r,i]=(0,s.useState)(void 0);return(0,s.useEffect)((()=>{const t=null==n?void 0:n.getCollection(e).view((e=>Ui.$.values(e))).view((e=>[...e].sort(((e,t)=>t.id-e.id)).map((e=>({id:e.id,promotion:e.notification.notificationElement.promotion}))).find((e=>void 0!==e.promotion)))).subscribe((e=>{const t=e&&e.promotion?{id:e.id,...e.promotion}:void 0;i(t)}));return()=>null==t?void 0:t.unsubscribe()}),[e,n]),r},np=(e,t)=>{const[n]=(0,s.useState)(e);(0,s.useEffect)((()=>{e!==n&&t()}),[e,n,t])},rp=({promotion:e,commandExecutor:t,selectedAgentId:n})=>{const[r,i]=(0,s.useState)(!0);np(n,(()=>i(!1)));const a={promotedAgentId:(null==e?void 0:e.agentId)??""},{trackClicked:v}=Oh(Qd.DiscoverabilityPanelFooterAcceptButton,a),{trackClicked:x}=Oh(Qd.DiscoverabilityPanelFooterDismissButton,a),{trackingRef:b}=Dh(Qd.DiscoverabilityPanelFooter,a,!0),y=void 0!==e,{icon:k,name:I}=(e=>{switch(e){case"AIGrader":return{icon:d._,name:"AI Grader"};case"aiDetector":return{icon:u.b,name:"AI Detector"};case"citationFinder":return{icon:h.k,name:"Citations Finder"};case"expertPanel":return{icon:m.F,name:"Expert Panel"};case"humanizer":return{icon:p.i,name:"Humanizer"};case"paraphraser":return{icon:g.y,name:"Paraphraser"};case"plagiarism":return{icon:c.L,name:"Plagiarism Checker"};case"proofreader":return{icon:l.O,name:"Proofreader"};case"readerReactions":return{icon:f.Q,name:"Reader Reactions"};default:return{icon:void 0,name:void 0}}})(null==e?void 0:e.agentId);return(0,o.jsx)(C.k,{padding:4,ref:e&&b,alignSelf:"center",bgColor:"background-base-default",style:{position:"sticky",bottom:0,width:"calc(100% - 2 * var(--space-4))",display:y&&r?"flex":"none"},children:(0,o.jsx)(O.x,{borderRadius:2,bgColor:"neutral-gray-0",width:"100%",padding:3,children:(0,o.jsxs)(C.k,{gap:2,children:[k&&(0,o.jsx)(S.J,{icon:k,size:"medium",accessibilityLabel:""}),(0,o.jsxs)(C.k,{direction:"column",gap:3,marginTop:.5,children:[(0,o.jsx)(w.x,{as:"p",variant:"text-xsmall",children:null==e?void 0:e.message}),(0,o.jsxs)(C.k,{gap:2,children:[(0,o.jsx)(A.z,{variant:"primary",size:"small",onClick:()=>{e&&(t.execute({kind:th.OpenAgent,agentId:e.agentId}),v(),i(!1))},children:(0,o.jsxs)(w.x,{as:"span",variant:"text-xsmall",weight:"bold",children:["Try ",I]})}),(0,o.jsx)(A.z,{variant:"tertiary",size:"small",onClick:()=>{x(),i(!1)},children:"Not now"})]})]})]})})})},ip="_discoverabilityPopup_19yoh_1",op=({children:e,agents:t,promotion:n,hoveredAgentId:r,selectedAgentId:i,setHoveredAgentId:a})=>{const[l,c]=(0,s.useState)(!0),[u,d]=(0,s.useState)(!1);np(i,(()=>c(!1)));const h=void 0!==n,{setAnchorRef:g,setContentRef:f}=((e,t)=>{var n,r;const[i,o]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),c=e.findIndex((e=>"agent"===e.type&&e.item.id===(null==t?void 0:t.agentId))),u=null==i?void 0:i.getBoundingClientRect();if(-1!==c&&e.length&&u&&u.height&&u.top){const t=u.height/e.length*(c-.5)+u.top,i=null==(r=null==(n=null==a?void 0:a.parentElement)?void 0:n.parentElement)?void 0:r.parentElement;i&&(i.style.top=`${t}px`)}return{setAnchorRef:o,setContentRef:l}})(t,n),{trackingRef:p}=Dh(Qd.DiscoverabilityPopup,{promotedAgentId:(null==n?void 0:n.agentId)??""},!0);return(0,o.jsxs)(gi.J,{placement:"left",open:h&&l&&(!r||u),onOpenChange:c,dismissOnOutsideClick:!1,children:[(0,o.jsx)(gi.J.Anchor,{ref:e=>g(e),children:e}),(0,o.jsx)(gi.J.Content,{width:248,onMouseEnter:()=>{d(!0),a(null)},onMouseLeave:()=>{d(!1),a(r)},className:ip,accessibilityLabel:`Popup: ${null==n?void 0:n.message}`,children:(0,o.jsx)(w.x,{as:"p",variant:"text-small",ref:e=>{n&&p(e),f(e)},children:null==n?void 0:n.message})})]})},sp="_chevronButton_1kx4f_1",ap="_disabled_1kx4f_5",lp=()=>(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M16.7068 13.2929C17.0973 13.6834 17.0973 14.3164 16.7068 14.707C16.3162 15.0974 15.6832 15.0975 15.2927 14.707L11.9997 11.414L8.70675 14.707L8.63058 14.7753C8.23781 15.0956 7.65878 15.073 7.29269 14.707C6.9266 14.3409 6.90406 13.7618 7.22433 13.3691L7.29269 13.2929L11.2927 9.29289C11.6832 8.90237 12.3162 8.90237 12.7068 9.29289L16.7068 13.2929Z",fill:"#707070"})}),cp=()=>(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M7.29314 10.707C6.90261 10.3164 6.90261 9.68343 7.29314 9.29291C7.68367 8.90247 8.31671 8.90241 8.7072 9.29291L12.0002 12.5859L15.2931 9.29291L15.3693 9.22455C15.7621 8.90428 16.3411 8.92682 16.7072 9.29291C17.0733 9.659 17.0958 10.238 16.7756 10.6308L16.7072 10.707L12.7072 14.707C12.3167 15.0975 11.6837 15.0975 11.2931 14.707L7.29314 10.707Z",fill:"#707070"})}),up=({direction:e,onClick:t,disabled:n=!1,className:r})=>{const i=Pn(sp,r,{[ap]:n});return(0,o.jsx)(A.z,{className:i,onClick:()=>{n||t()},disabled:n,size:"small",variant:"ghost",style:{height:"32px",width:"32px",padding:"4px",marginTop:"up"===e?"4px":"",marginBottom:"down"===e?"4px":""},accessibilityLabel:`Scroll ${e}`,children:"up"===e?(0,o.jsx)(lp,{}):(0,o.jsx)(cp,{})})};function dp({containerHeight:e,totalItemsCount:t,itemHeight:n}){const r=(0,s.useRef)(null),[i,o]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!1),c=t*n>e,{scrollUp:u,scrollDown:d}=function(e){const{itemHeight:t}=e,n=(0,s.useCallback)(((e,n)=>{const r=Math.min(.8*e.clientHeight,3*t),i="up"===n?Math.max(0,e.scrollTop-r):Math.min(e.scrollHeight-e.clientHeight,e.scrollTop+r);e.scrollTo({top:i,behavior:"smooth"})}),[t]),r=(0,s.useCallback)((e=>n(e,"up")),[n]),i=(0,s.useCallback)((e=>n(e,"down")),[n]);return{scrollUp:r,scrollDown:i}}({itemHeight:n}),h=(0,s.useCallback)((()=>{const e=r.current;if(!e)return;const{isAtTop:t,isAtBottom:n}=(e=>{const{scrollTop:t,scrollHeight:n,clientHeight:r}=e;return{isAtTop:t<=1,isAtBottom:t+r>=n-1}})(e);c?(o(!t),l(!n)):(o(!1),l(!1))}),[c]);(0,s.useEffect)((()=>{h()}),[e,h]);const g=(0,s.useCallback)((()=>{const e=r.current;e&&u(e)}),[u]),f=(0,s.useCallback)((()=>{const e=r.current;e&&d(e)}),[d]);return{showTopChevron:i,showBottomChevron:a,scrollContainerRef:r,handleScroll:h,handleScrollUp:g,handleScrollDown:f}}function hp(e){const[t,n]=(0,s.useState)(!1),r=(0,s.useCallback)(((e,t)=>{if("onscrollend"in e){const n=()=>{t(),e.removeEventListener("scrollend",n)};e.addEventListener("scrollend",n)}else setTimeout(t,500)}),[]);return{handleOverlayScroll:(0,s.useCallback)((n=>{e.current&&!t&&(e.current.scrollTop=n)}),[t]),handleChevronScroll:(0,s.useCallback)((t=>{n(!0),t(),e.current&&r(e.current,(()=>{n(!1)}))}),[r])}}function gp(e,t){const n=Ih();return(0,s.useMemo)((()=>{if(!n.isFeatureEnabled(Lh.FirstPartyPackAgents))return[...e,...t];const r=function(e,t){const n=new Map(t.map((e=>[e.id,e])));return e.map((e=>{const t=(0,W.Cb)(e.id);if(!t)return e;const r=n.get(t);return r?{...e,title:r.title,renderIcon:r.renderIcon,isPaidAgentFreeInBeta:r.isPaidAgentFreeInBeta}:e}))}(e,t);return function(e,t){const n=new Set(t.map((e=>e.id))),r=new Set(e.map((e=>e.id)));if(!e.some((e=>{const t=(0,W.Cb)(e.id);return t&&n.has(t)})))return[...e,...t];const i=new Map(e.map((e=>[e.id,e]))),o=[];return t.forEach((e=>{const t=(0,W.HS)(e.id);if(t&&r.has(t)){const e=i.get(t);e&&o.push(e)}else(0,W.xt)(e.id)||o.push(e)})),o}(r,t)}),[e,t,n])}const fp="_agentBenchContainer_qf12b_1",pp="_scrollContainer_qf12b_8",mp="_agentBench_qf12b_1",vp="_agentBenchWithGoBranding_qf12b_26",xp="_itemsContainer_qf12b_29",bp="_topChevron_qf12b_37",yp="_bottomChevron_qf12b_38",Cp=({children:e,totalItemsCount:t,allItems:n,hoveredAgentId:r,selectedAgentId:i,setHoveredAgentId:a,onSelectItem:l,closeOnAgentReselect:c=!0,onOpenAgentDirectory:u})=>{const d=(0,s.useRef)(null),h=(0,s.useRef)(null),{height:g=0}=zi({ref:d,box:"content-box"}),{showTopChevron:f,showBottomChevron:p,scrollContainerRef:m,handleScroll:v,handleScrollUp:x,handleScrollDown:b}=dp({containerHeight:g,totalItemsCount:t,itemHeight:40}),{handleOverlayScroll:y,handleChevronScroll:w}=hp(m),k=Pn(mp,[vp]),S=tp($i.z.isBenchPopup),I=(0,s.useMemo)((()=>{const e=n.find((e=>e.type===Jf.Agent&&e.item.id===r));return!!e&&(e.type===Jf.Directory||!e.item.experimental_disabledReason)}),[n,r]);return(0,o.jsx)("div",{ref:d,className:fp,onMouseLeave:()=>a(null),children:(0,o.jsxs)(C.k,{ref:h,direction:"column",elevation:"low",gap:2,align:"center",className:k,children:[f&&(0,o.jsx)(up,{direction:"up",onClick:()=>w(x),className:bp,"data-testid":"chevron-up"}),I&&(0,o.jsx)(Qf,{allItems:n,hoveredAgentId:r,selectedAgentId:i,showTopChevron:f,showBottomChevron:p,onHover:a,onSelectItem:l,onScroll:y,scrollContainerRef:m,closeOnAgentReselect:c,onOpenAgentDirectory:u}),(0,o.jsx)(op,{agents:n,promotion:S,hoveredAgentId:r,selectedAgentId:i,setHoveredAgentId:a,children:(0,o.jsx)("div",{ref:m,className:pp,style:{padding:"4px"},onScroll:v,"data-testid":"scroll-container",children:(0,o.jsx)("div",{className:xp,children:e})})},null==S?void 0:S.id),p&&(0,o.jsx)(up,{direction:"down",onClick:()=>w(b),className:yp,"data-testid":"chevron-down"})]})})},wp=(0,o.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{filter:"url(#filter0_d_8766_21194)",children:[(0,o.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#533192"}),(0,o.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_8766_21194)",fillOpacity:"0.2"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#9E7BE0"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_8766_21194)",strokeOpacity:"0.4"})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"filter0_d_8766_21194",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_8766_21194"}),(0,o.jsx)("feOffset",{dy:"3"}),(0,o.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.443137 0 0 0 0 0.298039 0 0 0 0 0.713726 0 0 0 1 0"}),(0,o.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8766_21194"}),(0,o.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8766_21194",result:"shape"})]}),(0,o.jsxs)("linearGradient",{id:"paint0_linear_8766_21194",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,o.jsxs)("linearGradient",{id:"paint1_linear_8766_21194",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),kp=(0,o.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{filter:"url(#filter0_d_8765_20981)",children:[(0,o.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#D4C7FF"}),(0,o.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_8765_20981)",fillOpacity:"0.6"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#9E7BE0"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_8765_20981)",strokeOpacity:"0.4"})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"filter0_d_8765_20981",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_8765_20981"}),(0,o.jsx)("feOffset",{dy:"3"}),(0,o.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.701774 0 0 0 0 0.548002 0 0 0 0 1 0 0 0 0.4 0"}),(0,o.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8765_20981"}),(0,o.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8765_20981",result:"shape"})]}),(0,o.jsxs)("linearGradient",{id:"paint0_linear_8765_20981",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,o.jsxs)("linearGradient",{id:"paint1_linear_8765_20981",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),Sp=(0,o.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{filter:"url(#filter0_d_10515_13844)",children:[(0,o.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_10515_13844)",fillOpacity:"0.2",shapeRendering:"crispEdges"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#15A694",shapeRendering:"crispEdges"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_10515_13844)",strokeOpacity:"0.4",shapeRendering:"crispEdges"})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"filter0_d_10515_13844",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_10515_13844"}),(0,o.jsx)("feOffset",{dy:"3"}),(0,o.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.141176 0 0 0 0 0.670588 0 0 0 0 0.607843 0 0 0 0.4 0"}),(0,o.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10515_13844"}),(0,o.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10515_13844",result:"shape"})]}),(0,o.jsxs)("linearGradient",{id:"paint0_linear_10515_13844",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#17A695",stopOpacity:"0"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#16A694"})]}),(0,o.jsxs)("linearGradient",{id:"paint1_linear_10515_13844",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#19A796"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#17A695"})]})]})]}),Ip=(0,o.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{filter:"url(#filter0_d_10515_13842)",children:[(0,o.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#B1F0E8"}),(0,o.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_10515_13842)",fillOpacity:"0.6"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#15A694"}),(0,o.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_10515_13842)",strokeOpacity:"0.4"})]}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"filter0_d_10515_13842",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_10515_13842"}),(0,o.jsx)("feOffset",{dy:"3"}),(0,o.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.137255 0 0 0 0 0.670588 0 0 0 0 0.603922 0 0 0 0.4 0"}),(0,o.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10515_13842"}),(0,o.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10515_13842",result:"shape"})]}),(0,o.jsxs)("linearGradient",{id:"paint0_linear_10515_13842",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,o.jsxs)("linearGradient",{id:"paint1_linear_10515_13842",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),Ep=({goBrandingEnabled:e})=>{const{scheme:t}=(0,_.t)(),n="dark"===t;return e?n?wp:kp:n?Sp:Ip},Ap={benchItemButton:"_benchItemButton_f99tr_1",benchItem:"_benchItem_f99tr_1",nonActionableSelected:"_nonActionableSelected_f99tr_24",hovered:"_hovered_f99tr_25",selectedAgentPointer:"_selectedAgentPointer_f99tr_39"},jp=(0,s.forwardRef)((({children:e,onClick:t,label:n,id:r,onHover:i,isSelected:s,isHovered:a,isActionableWhenSelected:l=!0,disabledReason:c},u)=>{const d=Ih().isFeatureEnabled(Lh.GoBranding),h=Pn(Ap.benchItemButton,{[Ap.hovered]:a,[Ap.nonActionableSelected]:s&&!l}),g=(0,o.jsx)(C.k,{className:Ap.selectedAgentPointer,"data-testid":"selected-agent-pointer",align:"center",children:(0,o.jsx)(Ep,{goBrandingEnabled:d})}),f=(0,o.jsx)(A.z,{ref:u,className:h,onClick:t,size:"medium",variant:"tertiary","aria-label":n,style:{height:"32px",width:"32px",marginBottom:"8px"},isDisabled:!!c,accessibilityLabel:c,children:e});return(0,o.jsxs)("div",{className:Pn(Ap.benchItem,{[Ap.goBrandingEnabled]:d}),onMouseEnter:()=>i(r),children:[s&&g,c?(0,o.jsxs)(k.u,{placement:"left",children:[(0,o.jsx)(k.aJ,{asChild:!0,children:f}),(0,o.jsx)(k._v,{root:null,children:c})]}):f]})})),Mp=({size:e})=>(0,o.jsx)(S.J,{size:e,icon:_p,accessibilityLabel:"Add agent"}),_p=e=>(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,o.jsx)("path",{d:"M7 12L12.0001 12M17.0001 12H12.0001M12.0001 12V6.99995M12.0001 12V17.0001",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5",strokeLinecap:"round"})});_p.__brand="nocolor";const Rp=({children:e,title:t,content:n,placement:r="left",width:i=280,onDismiss:a,trackImpression:l,className:c})=>{const[u,d]=(0,s.useState)(!0),{isOpen:h}=dh(),g=(0,s.useRef)(!1),f=!h&&u,p=(0,s.useCallback)((()=>{g.current||(g.current=!0,l())}),[l]);return(0,o.jsxs)(gi.J,{open:f,placement:r,onOpenChange:e=>{e||(a(),d(!1))},onShow:p,children:[(0,o.jsx)(gi.J.Anchor,{children:e}),(0,o.jsx)(gi.J.Content,{className:c,title:t,accessibilityLabel:t,width:i,children:(0,o.jsx)(w.x,{variant:"text-xsmall",as:"p",children:n})})]})},Dp=({children:e,message:t,trackImpression:n})=>(0,o.jsx)(Rp,{placement:"left",title:"Find more agents",content:"Build the perfect lineup of agents for your work.",onDismiss:t.onDismiss,trackImpression:n,children:e}),Tp=({children:e})=>{const[t,n]=(0,s.useState)(!1),{message:r,trackImpression:i}=Mh(ep.FindMoreAgentsPopover),{ref:a,isIntersecting:l}=function({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:i=!1,onChange:o}={}){var a;const[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)((()=>({isIntersecting:i,entry:void 0}))),h=(0,s.useRef)();h.current=o;const g=(null==(a=u.entry)?void 0:a.isIntersecting)&&r;(0,s.useEffect)((()=>{if(!l)return;if(!("IntersectionObserver"in self))return;if(g)return;let i;const o=new IntersectionObserver((e=>{const t=Array.isArray(o.thresholds)?o.thresholds:[o.thresholds];e.forEach((e=>{const n=e.isIntersecting&&t.some((t=>e.intersectionRatio>=t));d({isIntersecting:n,entry:e}),h.current&&h.current(n,e),n&&r&&i&&(i(),i=void 0)}))}),{threshold:e,root:t,rootMargin:n});return o.observe(l),()=>{o.disconnect()}}),[l,JSON.stringify(e),t,n,g,r]);const f=(0,s.useRef)(null);(0,s.useEffect)((()=>{var e;l||!(null==(e=u.entry)?void 0:e.target)||r||g||f.current===u.entry.target||(f.current=u.entry.target,d({isIntersecting:i,entry:void 0}))}),[l,u.entry,r,g,i]);const p=[c,!!u.isIntersecting,u.entry];return p.ref=p[0],p.isIntersecting=p[1],p.entry=p[2],p}({threshold:1}),c=e(a,(()=>{n(!0)}));return r&&l&&!t?(0,o.jsx)(Dp,{message:r,trackImpression:i,children:c}):c},Op=({id:e,onHover:t,isSelected:n,isHovered:r,commandExecutor:i,selectedAgentId:a,coordinatorAgentId:l})=>{const{trackClicked:c}=Oh(Qd.ViewDirectoryBenchItem,{}),u=gh(),{openAgentDirectory:d,openAgentDirectoryModal:h,handleOpenAgent:g,isOpen:f}=Kf({commandExecutor:i,selectedAgentId:a,coordinatorAgentId:l}),p=(0,s.useRef)(g);p.current=g;const m=(0,s.useRef)(f);m.current=f,(0,s.useEffect)((()=>u?u.onDeeplinkRequested((e=>{if(e.viewType===U.Gk.AgentChat)return void p.current(e.agentId);const t=Un(e);t&&!m.current&&h(t)})):void 0),[u,h]);const v=d;return(0,o.jsx)(Tp,{children:(i,s)=>(0,o.jsx)(Pp,{id:e,isHovered:r,isSelected:n,onHover:t,onClick:()=>{c(),s(),v()},ref:i})})},Pp=(0,s.forwardRef)(((e,t)=>{const{id:n,isSelected:r,isHovered:i,onHover:s,onClick:a}=e;return(0,o.jsx)(jp,{id:n,ref:t,label:"View agent directory",isSelected:r,isHovered:i,onHover:s,onClick:a,children:(0,o.jsx)(Mp,{size:"medium"})})})),Lp=({id:e,order:t,children:n,isSelected:r,onClick:i,label:s,onHover:a,isHovered:l,isActionableWhenSelected:c=!0,disabledReason:u})=>{const{trackingRef:d}=Th(Qd.AgentBenchItem,{agentId:e,order:t});return(0,o.jsx)(jp,{ref:d,label:s,id:e,isSelected:r,isHovered:l,onHover:a,onClick:i,isActionableWhenSelected:c,disabledReason:u,children:n})},Np=({firstPartyAgents:e,commandExecutor:t,selectedItemId:n,onSelectItem:r,onClose:i,closeOnAgentReselect:a=!0,coordinatorAgentId:l})=>{const c=Ih(),{installedAgents:u}=jh(),[d,h]=(0,s.useState)(null),g=function(e){const t=Ih();return(0,s.useMemo)((()=>{const n=e.map((e=>({type:"agent",item:e})));return t.isFeatureEnabled(Lh.AgentDirectory)&&n.push({type:"directory",id:"viewAgentDirectory",title:"More agents"}),n}),[e,t])}(gp(e,c.isFeatureEnabled(Lh.AgentDirectory)?u:[])),f=Ih().isFeatureEnabled(Lh.GoBranding),{openAgentDirectory:p}=Kf({commandExecutor:t,selectedAgentId:n,coordinatorAgentId:l}),m=(0,s.useCallback)((e=>{h(null),r(e)}),[r]),v=(0,s.useCallback)((e=>{n!==e?m(e):a&&i()}),[m,n,a,i]);return(0,o.jsx)(Cp,{totalItemsCount:g.length,hoveredAgentId:d,setHoveredAgentId:h,allItems:g,onSelectItem:m,selectedAgentId:n??null,closeOnAgentReselect:a,onOpenAgentDirectory:p,children:g.map(((e,r)=>{if(Yf(e)){const t=e.item;return(0,o.jsx)(Lp,{id:t.id,order:r,isSelected:n===t.id,onClick:()=>v(t.id),label:t.title,onHover:h,isHovered:d===t.id,isActionableWhenSelected:a,disabledReason:t.experimental_disabledReason,children:t.renderIcon({size:"large",goBrandingEnabled:f})},t.id)}return(0,o.jsx)(Op,{commandExecutor:t,id:e.id,onHover:h,isSelected:n===e.id,isHovered:d===e.id,selectedAgentId:n,coordinatorAgentId:l},e.id)}))})},Fp="_agentPanelContainer_bo866_1",Bp="_open_bo866_6",zp=({children:e,open:t,commandExecutor:n,selectedAgentId:r})=>{const i=Pn(Fp,t&&Bp),s=tp($i.z.isAgentPanelFooter);return(0,o.jsxs)(C.k,{direction:"column",flex:"1",className:i,children:[e,(0,o.jsx)(rp,{promotion:s,commandExecutor:n,selectedAgentId:r},null==s?void 0:s.id)]})},Hp={modal:"_modal_1u63o_1"},Up=({title:e,content:t,onClose:n,hideDefaultHeader:r=!1})=>{const i=(0,s.useRef)(null),a=(0,s.useId)();return(0,s.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[n]),(0,s.useEffect)((()=>{var e;null==(e=i.current)||e.focus()}),[]),(0,o.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":e,"aria-labelledby":a,ref:i,tabIndex:-1,children:(0,o.jsxs)(C.k,{direction:"column",gap:8,className:Hp.modal,children:[!r&&(0,o.jsxs)(C.k,{direction:"row",justify:"space-between",children:[(0,o.jsx)(F.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",icon:J.Tw,onClick:n}),(0,o.jsx)(C.k,{justify:"center",flex:"1",align:"center",children:(0,o.jsx)(R.X,{as:"h1",variant:"heading-xxsmall",className:Hp.modalTitle,id:a,children:e})})]}),t]})})},$p=({children:e})=>{const[t,n]=(0,s.useState)(null),r=(0,s.useCallback)((e=>n(e)),[]),i=(0,s.useCallback)((()=>n(null)),[]),a=(0,s.useMemo)((()=>({showModal:r,closeModal:i,isOpen:!!t})),[r,i,t]);return(0,o.jsxs)(uh.Provider,{value:a,children:[t&&(0,o.jsx)(Up,{title:t.title,content:t.content,onClose:i,hideDefaultHeader:t.hideDefaultHeader}),e]})};function Wp(e){const{installedAgents:t}=jh(),n=(0,s.useMemo)((()=>[...e,...t]),[e,t]),r=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]);return{agents:n,availableAgentsIds:r}}const Vp=({id:e,children:t})=>{const n=lh().agentId,{trackingRef:r}=Dh(Qd.ErrorFallback,{agentId:n??"",errorFallbackId:e});return(0,o.jsx)("div",{style:{display:"contents"},ref:r,children:t})};class Gp extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){Ti.C8.Logging.getLogger(`ErrorBoundary.${this.props.id}`).warn("Triggered error boundary",e,t)}render(){return this.state.hasError?(0,o.jsx)(Vp,{id:this.props.id,children:this.props.fallback}):this.props.children}}const Zp="_agentPanel_28mfu_1",qp="_selected_28mfu_6",Kp=({id:e,renderPanel:t,selected:n})=>{const r=s.useRef(!1),{trackingRef:i}=Dh(Qd.AgentPanel,{agentId:e});if(s.useEffect((()=>{n&&(r.current=!0)}),[n]),!r.current&&!n)return null;const a=Pn(Zp,n&&qp);return(0,o.jsx)(Gp,{id:"AgentPanel",fallback:(0,o.jsx)(J.e$,{title:"The panel cannot be displayed",content:"Try reloading the page."}),children:(0,o.jsx)(O.x,{ref:i,className:a,children:t()})})},Jp=({agent:e,selectedAgentId:t,activeAgentInstanceId:n,availableAgentsIds:r,commandExecutor:i,contextualOptionsRegistry:s,additionalProviderContext:a,withoutPanel:l=!1})=>{const c=e.id,u=t===e.id,d={agentId:c,selectedAgentId:t,activeAgentInstanceId:n,availableAgentsIds:r,commandExecutor:i,contextualOptionsRegistry:s.getAgentHandle(e.id),closeAssistantPanel:a.closeAssistantPanel};return(0,o.jsxs)(ah,{value:d,children:[!l&&(0,o.jsx)(Kp,{id:e.id,selected:u,renderPanel:()=>e.renderPanel()}),l&&e.renderPanel()]})};function Yp({firstPartyAgents:e,coordinatorAgentId:t,commandExecutor:n,...r}){const{agents:i,availableAgentsIds:o}=Wp(e),{installedAgents:a,getInstanceIdsForAgent:l}=jh(),c=gp(e,a),u=ff(t,n,c);return i.map((e=>{const t=l(e.id),i=t.length>0?t[0]:void 0;return(0,s.createElement)(Jp,{...r,key:e.id,agent:e,availableAgentsIds:o,contextualOptionsRegistry:u,commandExecutor:n,activeAgentInstanceId:i})}))}function Xp({commandExecutor:e,coordinatorAgentId:t,firstPartyAgents:n,...r}){const{agents:i,availableAgentsIds:s}=Wp(n),a=ff(t,e,i),l=i.find((e=>e.id===t));return l?(0,o.jsx)(Jp,{...r,agent:l,availableAgentsIds:s,contextualOptionsRegistry:a,commandExecutor:e}):null}function Qp(){var e;const t=null==(e=(0,s.useContext)(hh))?void 0:e.user;if(!t)throw new Error("User service not found");return t}function em({children:e}){const{openSignInPage:t,openSignUpPage:n,getUserInfo:r}=Qp(),{anonymous:i}=r();return i?(0,o.jsx)(C.k,{justify:"center",align:"center",height:"100%",width:"100%",children:(0,o.jsx)(J.A4,{onSignIn:t,onSignUp:n})}):e}const tm="_assistant_r00db_1",nm=({children:e})=>(0,o.jsx)(C.k,{flex:"1",direction:"row",justify:"end",height:"100%",className:tm,children:e});function rm(e){return[".gds-sr-only"].forEach((t=>{e.querySelectorAll(t).forEach((e=>e.remove()))})),e}function im(e){const t=om(rm(e.cloneNode(!0)));return{html:t.innerHTML,text:t.textContent??""}}function om(e){return e.querySelectorAll("a span").forEach((e=>{var t;"Opens a new window"===((null==(t=e.textContent)?void 0:t.trim())||"")&&e.remove()})),e}function sm(e){return e=function(e){return e.querySelectorAll("*").forEach((e=>{e instanceof HTMLElement&&e.hasAttribute("style")&&(e.style.removeProperty("color"),e.style.removeProperty("background-color"),e.style.removeProperty("background"))})),e}(e=om(e=rm(e)))}const am="_assistantColorSchemeProviderContainer_1ohys_1",lm="_grammarlyAgentIcons_1ohys_10",cm=({agents:e,coordinatorAgentId:t,selectedAgentId:n,onSelect:r,onClose:i,sidebarFooter:a,services:l,hideCloseInHeader:c=!1,includeChatHistory:u=!1,transparentMode:d=!1,gdsColorScheme:h="auto",closeOnAgentReselect:g=!0})=>{var f;const[p,m]=function(e,t){const[n,r]=(0,s.useState)(e),i=(0,s.useCallback)(((e,n=Yd.AgentBench)=>{r((r=>{const i=r;return i===e?i:(i&&t.trackEvent(eh.AgentDeactivated,{agent:i,switchToAgent:e,cause:n}),e&&t.trackEvent(eh.AgentActivated,{agent:e,switchFromAgent:i,cause:n}),e)}))}),[t]);return(0,s.useEffect)((()=>{i(e,Yd.ExternalChange)}),[e,i]),[n,i]}(n??t,l.tracking),v=null==(f=l.experimental_featureToggle)?void 0:f.isFeatureEnabled(Lh.GoBranding);!function(e,t){const n=(0,Wi.D)(e);(0,s.useEffect)((()=>{e!==n&&(n&&(null==t||t.deactivateAgent({agentId:n})),e&&(null==t||t.activateAgent({agentId:e})))}),[e,n,t])}(p,l.experimental_agentLifecycle);const x=function(){const[e,t]=(0,s.useState)(null),n=(0,s.useCallback)((e=>{t(e)}),[]);return(0,s.useEffect)((()=>{if(!e)return;const t=async e=>{try{const t=self.getSelection();if(!t||0===t.rangeCount)return;const n=t.getRangeAt(0).cloneContents(),r=document.createElement("div");r.appendChild(n);const i=sm(r),o=t.toString();e.preventDefault(),e.clipboardData&&(e.clipboardData.setData("text/html",i.innerHTML),e.clipboardData.setData("text/plain",o))}catch(e){console.error("Error stripping clipboard colors:",e)}};return e.addEventListener("copy",t),()=>e.removeEventListener("copy",t)}),[e]),n}(),b=function(e,t){return(0,s.useCallback)(((n=Yd.AgentBench)=>{e(void 0,n),null==t||t()}),[t,e])}(m,i),y=function(e,t){return(0,s.useCallback)(((n,r=Yd.AgentBench)=>{e(n,r),null==t||t(n)}),[t,e])}(m,r),C=function(e){const t=(0,s.useMemo)((()=>({openAgent:e.openAgent,openCoordinatorAgent:e.openCoordinatorAgent})),[e.openAgent,e.openCoordinatorAgent]),n=(0,s.useRef)(new oh(t));return(0,s.useEffect)((()=>{var e;null==(e=n.current)||e.setCapabilities(t)}),[t]),n.current}({openAgent:y,openCoordinatorAgent:(0,s.useCallback)((()=>m(t)),[t,m])}),w=c?void 0:b,k={selectedAgentId:p,commandExecutor:C,additionalProviderContext:{closeAssistantPanel:w}},S=Pn(am,{[lm]:!v});return(0,o.jsx)(J.zx,{isEnabled:!!v,style:{height:"100%"},ref:x,children:(0,o.jsx)(_.A,{scheme:h,className:S,children:(0,o.jsx)(hh.Provider,{value:l,children:(0,o.jsx)(Gf,{chatService:l.chat,contextService:l.context,trackingService:l.tracking,featureToggleService:l.experimental_featureToggle,suggestionsService:l.experimental_suggestions,agentDirectoryService:l.experimental_agentDirectory,inProductMessagingService:l.experimental_inProductMessaging,toolCallCardService:l.experimental_toolCallCard,children:(0,o.jsx)(J.qM.Provider,{value:{closeAssistantPanel:w},children:(0,o.jsxs)(em,{children:[d&&(0,o.jsx)(Xp,{...k,coordinatorAgentId:t,firstPartyAgents:e}),!d&&(0,o.jsx)(nm,{children:(0,o.jsxs)($p,{children:[(0,o.jsx)(zp,{open:!!p,commandExecutor:C,selectedAgentId:p??null,children:(0,o.jsx)(Yp,{firstPartyAgents:e,coordinatorAgentId:t,...k})}),(0,o.jsx)(dg,{footer:a,commandExecutor:C,includeChatHistory:u,coordinatorAgentId:t,goBrandingEnabled:v,children:(0,o.jsx)(Np,{commandExecutor:C,firstPartyAgents:e,onClose:b,onSelectItem:y,selectedItemId:p,closeOnAgentReselect:g,coordinatorAgentId:t})})]})})]})})})})})})};(0,U.Ue)("jira"),(0,U.Ue)("proofreader-agent"),(0,U.Ue)("translator-agent");function um({isGoBrandingEnabled:e=!1}){const{closeModal:t}=dh(),{submitFeedback:n}=Qp();return(0,o.jsx)(C.k,{justify:"center",flex:"1",children:(0,o.jsx)(J.Vn,{onSubmit:e=>{n(e)},onClose:t,heading:e?"How do you like Superhuman Go?":"How do you like Grammarly?"})})}const dm=e=>(0,o.jsxs)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,o.jsx)("path",{d:"M11.6667 10.5C12.127 10.5 12.5001 10.8731 12.5001 11.3333C12.5001 11.7936 12.127 12.1667 11.6667 12.1667H6.66675C6.20651 12.1667 5.83342 11.7936 5.83342 11.3333C5.83342 10.8731 6.20651 10.5 6.66675 10.5H11.6667Z",fill:"var(--color-icon-base-default, #707070)"}),(0,o.jsx)("path",{d:"M13.3334 7.16667C13.7937 7.16667 14.1667 7.53976 14.1667 8C14.1667 8.46024 13.7937 8.83333 13.3334 8.83333H6.66675C6.20651 8.83333 5.83342 8.46024 5.83342 8C5.83342 7.53976 6.20651 7.16667 6.66675 7.16667H13.3334Z",fill:"var(--color-icon-base-default, #707070)"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.0001 3C16.841 3 18.3334 4.49238 18.3334 6.33333V13C18.3334 14.8409 16.841 16.3333 15.0001 16.3333H13.3334C13.1038 16.3333 12.8859 16.4278 12.7296 16.5921L12.6669 16.667L12.0004 17.5557C11.0317 18.8473 9.12403 18.8877 8.0966 17.6769L7.99976 17.5557L7.33325 16.667C7.17587 16.4572 6.92905 16.3333 6.66675 16.3333H5.00008C3.15913 16.3333 1.66675 14.8409 1.66675 13V6.33333C1.66675 4.49238 3.15913 3 5.00008 3H15.0001ZM5.00008 4.66667C4.07961 4.66667 3.33341 5.41286 3.33341 6.33333V13C3.33341 13.9205 4.07961 14.6667 5.00008 14.6667H6.66675C7.45364 14.6667 8.19494 15.0373 8.66707 15.6668L9.33358 16.5555L9.3995 16.6336C9.74859 16.9983 10.354 16.9722 10.6666 16.5555L11.3331 15.6668L11.425 15.5521C11.8984 14.9925 12.5956 14.6667 13.3334 14.6667H15.0001C15.9206 14.6667 16.6667 13.9205 16.6667 13V6.33333C16.6667 5.41286 15.9206 4.66667 15.0001 4.66667H5.00008Z",fill:"var(--color-icon-base-default, #707070)"})]});dm.__brand="nocolor";const hm=({size:e})=>(0,o.jsx)(S.J,{size:e,icon:gm,accessibilityLabel:"Anonymous user"}),gm=e=>(0,o.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,o.jsx)("path",{d:"M7.00004 1.16663C6.22649 1.16663 5.48463 1.47392 4.93765 2.0209C4.39066 2.56788 4.08337 3.30974 4.08337 4.08329C4.08337 4.85684 4.39066 5.59871 4.93765 6.14569C5.48463 6.69267 6.22649 6.99996 7.00004 6.99996C7.77359 6.99996 8.51546 6.69267 9.06244 6.14569C9.60942 5.59871 9.91671 4.85684 9.91671 4.08329C9.91671 3.30974 9.60942 2.56788 9.06244 2.0209C8.51546 1.47392 7.77359 1.16663 7.00004 1.16663ZM5.7626 2.84586C6.09079 2.51767 6.53591 2.33329 7.00004 2.33329C7.46417 2.33329 7.90929 2.51767 8.23748 2.84586C8.56567 3.17404 8.75004 3.61916 8.75004 4.08329C8.75004 4.54742 8.56567 4.99254 8.23748 5.32073C7.90929 5.64892 7.46417 5.83329 7.00004 5.83329C6.53591 5.83329 6.09079 5.64892 5.7626 5.32073C5.43442 4.99254 5.25004 4.54742 5.25004 4.08329C5.25004 3.61916 5.43442 3.17404 5.7626 2.84586Z",fill:"var(--color-icon-base-default, #707070)"}),(0,o.jsx)("path",{d:"M5.25004 7.58329C3.63921 7.58329 2.33337 8.88913 2.33337 10.5V11.6666C2.33337 12.311 2.85571 12.8333 3.50004 12.8333H10.5C11.1444 12.8333 11.6667 12.311 11.6667 11.6666V10.5C11.6667 8.88913 10.3609 7.58329 8.75004 7.58329H5.25004ZM3.50004 10.5C3.50004 9.53346 4.28354 8.74996 5.25004 8.74996H8.75004C9.71654 8.74996 10.5 9.53346 10.5 10.5V11.6666H3.50004V10.5Z",fill:"var(--color-icon-base-default, #707070)"})]});gm.__brand="nocolor";const fm={userInitialsAvatar:"_userInitialsAvatar_d99r2_1",small:"_small_d99r2_15",large:"_large_d99r2_23"},pm=({size:e="small"})=>{const{getUserInfo:t}=Qp(),n=t(),r=function(e){if(e.anonymous)return"";const t=[e.firstName,e.lastName].map((e=>e.trim())).filter((e=>e.length>0));return 0===t.length?"":1===t.length?t[0].slice(0,2).toUpperCase():t.map((e=>e[0])).join("").toUpperCase()}(n),i="small"===e?fm.small:fm.large;return n.anonymous?(0,o.jsx)("span",{className:Pn(fm.userInitialsAvatar,fm.anonymous,i),children:(0,o.jsx)(hm,{size:e})}):(0,o.jsx)("span",{className:Pn(fm.userInitialsAvatar,i),children:r})},mm="_userInfo_1km94_1",vm=()=>{const{getUserInfo:e}=Qp(),t=e(),n=t.anonymous?"Anonymous":`${t.firstName} ${t.lastName}`;return(0,o.jsxs)(C.k,{padding:4,gap:3,direction:"row",align:"center",className:mm,children:[(0,o.jsx)(pm,{size:"large"}),(0,o.jsxs)(C.k,{direction:"column",children:[(0,o.jsx)(w.x,{as:"span",variant:"heading-xsmall",children:n}),(0,o.jsx)(w.x,{as:"span",variant:"text-small",color:"base-subdued",children:t.email})]})]})},xm="_userMenu_igj34_1",bm="_userMenuActivator_igj34_22",ym="_darkModeMenuItem_igj34_35",Cm=({onSettings:e,onDarkModeChange:t,onFeedback:n,onManageAgents:r,canManageAgents:i})=>{const{scheme:s,setScheme:a}=(0,_.t)(),l=(0,o.jsx)(A.z,{className:bm,accessibilityLabel:"View options",children:(0,o.jsx)(pm,{})});return(0,o.jsxs)(H.v,{className:xm,activator:l,children:[(0,o.jsx)(vm,{}),(0,o.jsx)(H.v.Item,{icon:J.ew,onClick:e,children:"Settings"},"settings"),i&&r&&(0,o.jsx)(H.v.Item,{icon:J.eP,onClick:r,children:"Manage Agents"},"manageAgents"),(0,o.jsx)(H.v.Item,{icon:J.ce,onMouseDown:e=>e.stopPropagation(),className:ym,children:(0,o.jsx)(C.k,{align:"center",justify:"space-between",gap:2,children:(0,o.jsx)(fi.r,{labelDisplay:"left",isSelected:"dark"===s,label:"Dark Mode",onChange:()=>{const e="light"===s||"auto"===s?"dark":"light";a(e),null==t||t(e)}})})},"darkMode"),(0,o.jsx)(H.v.Item,{icon:dm,onClick:n,children:"Feedback"},"feedback")]})},wm=({onDarkModeChange:e,isGoBrandingEnabled:t=!1,onOpenAgent:n,selectedAgentId:r,coordinatorAgentId:i,shouldUseNativeInstallFlow:a,isFirstPartyPackAgentsEnabled:l,agentDirectoryService:c,trackingService:u,...d})=>{const{showModal:h,closeModal:g}=dh(),f=(0,s.useMemo)((()=>{if(u)return new qf(u)}),[u]),p=(0,s.useCallback)((()=>{c?h({content:(0,o.jsx)(Nn,{agentDirectoryService:c,children:(0,o.jsx)(Bn,{trackingService:f,children:(0,o.jsx)(ui,{onOpenAgent:e=>{null==n||n(e),g()},shouldUseNativeInstallFlow:a,isFirstPartyPackAgentsEnabled:l,selectedAgentId:r,coordinatorAgentId:i,goBrandingEnabled:t})})}),title:"Manage Agents"}):console.warn("ManageAgents requires agentDirectory service")}),[c,f,r,i,l,t,a,n,h,g]),m=!(!n||!c);return(0,o.jsx)(Cm,{onSettings:()=>{void 0!==d.renderSettings?h({content:d.renderSettings(),title:"Settings"}):d.openSettings()},onDarkModeChange:e,onFeedback:()=>{h({content:(0,o.jsx)(um,{isGoBrandingEnabled:t}),title:"Give feedback"})},onManageAgents:m?p:void 0,canManageAgents:m})},km=({onDarkModeChange:e,isGoBrandingEnabled:t=!1,onOpenAgent:n,selectedAgentId:r,coordinatorAgentId:i,shouldUseNativeInstallFlow:s,isFirstPartyPackAgentsEnabled:a,agentDirectoryService:l,trackingService:c,...u})=>(0,o.jsx)(wm,{onDarkModeChange:e,isGoBrandingEnabled:t,onOpenAgent:n,selectedAgentId:r,coordinatorAgentId:i,shouldUseNativeInstallFlow:s,isFirstPartyPackAgentsEnabled:a,agentDirectoryService:l,trackingService:c,...u}),Sm="_link_1tj56_1",Im=({label:e,onClick:t})=>(0,o.jsx)(T.r,{href:"#",className:Sm,onClick:e=>{e.preventDefault(),t()},variant:"inherit",children:e});function Em({message:e,trackImpression:t}){const{shortcut:n,onChangeShortcut:r}=e,{scheme:i}=(0,_.t)();(0,s.useEffect)((()=>{t()}),[t]);const a="base-default";return(0,o.jsx)(O.x,{bgColor:"background-base-subdued",borderRadius:2,padding:"var(--space-4) var(--space-3)",children:(0,o.jsx)(C.k,{gap:2,children:(0,o.jsxs)(C.k,{direction:"column",children:[(0,o.jsx)(w.x,{as:"p",weight:"semibold",color:a,variant:"text-xsmall",children:"Try the Grammarly shortcut"}),(0,o.jsxs)(w.x,{as:"p",weight:"normal",color:a,variant:"text-xsmall",children:["Use ",n," to open Grammarly any time."]}),(0,o.jsx)(w.x,{as:"p",weight:"normal",color:a,variant:"text-xsmall",children:(0,o.jsx)(Im,{onClick:r,label:"Change shortcut"})})]})})})}function Am({message:e,trackImpression:t}){const{previewEndDate:n}=e;return(0,s.useEffect)((()=>{t()}),[t]),(0,o.jsx)(O.x,{bgColor:"background-base-subdued",borderRadius:2,padding:3,children:(0,o.jsx)(C.k,{gap:2,children:(0,o.jsxs)(C.k,{direction:"column",children:[(0,o.jsx)(w.x,{as:"p",weight:"semibold",color:"base-default",variant:"text-xsmall",children:"Enjoy your free preview"}),(0,o.jsxs)(w.x,{as:"p",weight:"normal",color:"base-default",variant:"text-xsmall",children:["As thanks for trying Go early, you can use this agent free until ",n,"."]})]})})})}function jm({message:e,trackImpression:t}){switch(e.type){case"proPreviewAwarenessNoticeCardMessage":return(0,o.jsx)(Am,{message:e,trackImpression:t});case"assistantShortcutNoticeCardMessage":return(0,o.jsx)(Em,{message:e,trackImpression:t});default:return null}}const Mm=(e,t={})=>{const{stopWhenResolved:n=!0,minIntervalSec:r=3,maxIntervalSec:i=30,maxDurationSec:o=360,...a}=t,l=(e=>{const[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(!1),[o,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),u=gh(),d=(0,s.useRef)(e),h=(0,s.useRef)(u),g=(0,s.useRef)(null);(0,s.useEffect)((()=>{d.current=e,h.current=u}),[e,u]);const f=(0,s.useCallback)((async(e=!1)=>{const t=h.current,r=d.current;if(!t)return n(null),i(!1),a(!1),void c(null);if(!r||!r.rootCsbIngestionId)return n(null),i(!1),a(!1),void c(null);e?a(!0):i(!0),c(null);try{const o=await t.getSimplifiedRootIngestionSummary(r.rootCsbIngestionId);n(o)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch execution summary");c(t)}finally{e?a(!1):i(!1)}}),[]);return(0,s.useEffect)((()=>{const t=(null==e?void 0:e.agentInstanceId)??null;t!==g.current&&(g.current=t,n(null),c(null))}),[null==e?void 0:e.agentInstanceId]),{simplifiedSummary:t,isLoading:r,isRefetching:o,error:l,refetch:(0,s.useCallback)((async()=>{await f(!0)}),[f])}})(e),{simplifiedSummary:c,refetch:u}=l,d=(0,s.useMemo)((()=>!!c&&(c.hasPendingIngestions||c.hasFailedIngestions)),[c]),h=(0,s.useCallback)((()=>!n||(!c||d)),[n,d,c]),{attemptCount:g,elapsedTimeMs:f,hasReachedMaxDuration:p,reset:m}=(0,Vi.W)(u,{minIntervalSec:r,maxIntervalSec:i,maxDurationSec:o,...a,enabled:!1!==a.enabled&&null!==e,shouldContinuePolling:h});return(0,s.useEffect)((()=>{m()}),[e,m]),{...l,attemptCount:g,elapsedTimeMs:f,hasReachedMaxDuration:p,reset:m}},_m="_inlineLink_1i76p_1";var Rm=(e=>(e.Info="info",e.Warning="warning",e.Success="success",e))(Rm||{});function Dm({title:e,content:t,actions:n=[],severity:r="info",containerPadding:i=4,containerPaddingTop:s,containerPaddingBottom:a,containerPaddingLeft:l,containerPaddingRight:c,ariaLive:u="polite",testId:d="Banner"}){const{scheme:h}=(0,_.t)(),g="dark"===h,f=n.length>0,p=t||f,m="warning"!==r?"background-base-subdued":g?"gold-20":"gold-0",v=(()=>{if("warning"===r)return g?"dark-default":"base-default"})(),x="warning"===r?pi.F:"success"===r?mi.t:vi.r;return(0,o.jsx)(O.x,{padding:i,paddingTop:s,paddingBottom:a,paddingLeft:l,paddingRight:c,"aria-live":u,children:(0,o.jsx)(O.x,{"data-testid":d,bgColor:m,borderRadius:2,padding:3,children:(0,o.jsxs)(C.k,{gap:2,align:p?void 0:"center",children:[(0,o.jsx)(C.k,{children:(0,o.jsx)(S.J,{size:"medium",icon:x,accessibilityLabel:"","aria-hidden":"true"})}),(0,o.jsxs)(C.k,{direction:"column",children:[(0,o.jsx)(w.x,{as:"p",weight:"semibold",color:v,variant:"text-xsmall",children:e}),p&&(0,o.jsx)(w.x,{as:"p",weight:"normal",color:v,variant:"text-xsmall",children:"string"!=typeof t&&void 0!==t?t:"string"==typeof t?(0,o.jsxs)(o.Fragment,{children:[t,f&&(0,o.jsxs)(o.Fragment,{children:[" ",n.map(((e,t)=>{const r=t===n.length-1;return(0,o.jsxs)("span",{children:[(0,o.jsx)(T.r,{href:"",onClick:t=>{t.preventDefault(),e.onClick()},className:_m,variant:"inherit",accessibilityLabel:e.accessibilityLabel||e.label,"data-testid":e.testId,children:e.label}),!r&&(0,o.jsx)(o.Fragment,{children:t===n.length-2?", or ":", "}),r&&"."]},t)}))]})]}):null})]})]})})})}const Tm=({agentId:e,selectedAgentId:t})=>{const{installedAgents:n}=jh(),r=gh(),i=e===t,[a,l]=(0,s.useState)(!1),c=(0,s.useRef)(null),u=(0,s.useMemo)((()=>n.find((e=>e.id===t))),[n,t]),d=(0,s.useMemo)((()=>{if(!(i&&t&&(0,U.d1)(t)&&r))return null;const e=r.getAgentInstancesForAgent(t);return e.length>0?e[0]:null}),[i,t,r]),{simplifiedSummary:h,isLoading:g,error:f,attemptCount:p,hasReachedMaxDuration:m,refetch:v,reset:x}=Mm(d,{enabled:i}),b=(0,s.useCallback)((async()=>{if(t&&(0,U.d1)(t)&&r)try{await pr({agentId:t,agentDirectoryService:r,ingestionId:null==d?void 0:d.agentInstanceId,ingestionTab:fr.SYNC_STATUS})}catch(e){Ti.C8.Logging.getLogger("AgentHeaderBanners").warn("openAgentSetupInNewTab failed",e)}}),[t,r,null==d?void 0:d.agentInstanceId]),y=(0,s.useCallback)((async()=>{x(),await v()}),[x,v]),C=(null==h?void 0:h.hasFailedIngestions)??!1,w=(null==h?void 0:h.hasPendingIngestions)??!1;return(0,s.useEffect)((()=>{if(e!==t||g||f)return;const n=(null==h?void 0:h.simplifiedSummaries)&&h.simplifiedSummaries.length>0;if(!0===c.current&&!w&&!C&&n){l(!0);const e=setTimeout((()=>{l(!1)}),5e3);return()=>clearTimeout(e)}c.current=w}),[e,t,w,C,h,g,f]),(0,s.useEffect)((()=>{l(!1),c.current=null}),[t]),e!==t||g||f?null:a?(0,o.jsx)(Dm,{severity:Rm.Success,title:`${null==u?void 0:u.title} is connected`,testId:"Banner-Success"}):C?(0,o.jsx)(Dm,{severity:Rm.Warning,title:"Connected data issue",content:(0,o.jsxs)(o.Fragment,{children:["There's an issue with this connection's data, so it may not work properly. To learn more, check your"," ",(0,o.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:_m,variant:"inherit",accessibilityLabel:"Check your connection settings","data-testid":"BannerSettingsLink",children:"connection settings"}),"."]}),testId:"Banner-FailedIngestions"}):null!=h&&h.hasTruncatedAtLimit?(0,o.jsx)(Dm,{severity:Rm.Warning,title:"Data limit reached",content:(0,o.jsxs)(o.Fragment,{children:["Your ",null==u?void 0:u.title," connection has reached its data limit. To fix this, select fewer data sources in your"," ",(0,o.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:_m,variant:"inherit",accessibilityLabel:"Go to connection settings","data-testid":"BannerSettingsLink",children:"connection settings"}),"."]}),testId:"Banner-LimitReached"}):w?p>=5&&!m?(0,o.jsx)(Dm,{severity:Rm.Info,title:`Still connecting ${null==u?void 0:u.title}`,content:(0,o.jsxs)(o.Fragment,{children:["This connection is taking a while. Check"," ",(0,o.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:_m,variant:"inherit",accessibilityLabel:"Go to connection settings to check for errors or make changes","data-testid":"BannerSettingsLink",children:"connection settings"})," ","for detailed status info."]}),testId:"Banner-TakingLonger"}):m?(0,o.jsx)(Dm,{severity:Rm.Info,title:"Connection is taking too long",content:(0,o.jsxs)(o.Fragment,{children:["This agent is still trying to connect in the background. You can check for errors in"," ",(0,o.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:_m,variant:"inherit",accessibilityLabel:"Go to connection settings to check for errors and make changes","data-testid":"BannerSettingsLink",children:"connection settings"})," ","or"," ",(0,o.jsx)(T.r,{href:"",onClick:e=>{e.preventDefault(),y()},className:_m,variant:"inherit",accessibilityLabel:"Try again to refresh the connection","data-testid":"BannerTryAgainLink",children:"refresh"}),"."]}),testId:"Banner-Timeout"}):(0,o.jsx)(Dm,{severity:Rm.Info,title:`Connecting ${null==u?void 0:u.title}`,content:"When it's done, you can work with the info you connected.",testId:"Banner-Connecting"}):null},Om=e=>{const{controls:t}=e,{agentId:n,closeAssistantPanel:r}=lh(),i=Dh(Qd.AgentHeaderClose,{agentId:n}),a=(0,s.useMemo)((()=>({left:[...r?[{icon:xi.V,label:"Close",onClick:r,trackingRef:i.trackingRef}]:[],...(null==t?void 0:t.left)??[]],right:null==t?void 0:t.right})),[r,null==t?void 0:t.left,null==t?void 0:t.right,i.trackingRef]);return(0,o.jsx)(J.i7,{...e,controls:a})},Pm=e=>{const{agentId:t,selectedAgentId:n}=lh(),{installedAgents:r}=jh(),i=(0,s.useMemo)((()=>r.find((e=>e.id===n))),[r,n]),{message:a,trackImpression:l}=Mh(ep.AgentHeaderNoticeCard,{selectedAgent:i}),c=e.isAgentEmptyState&&a&&t===n;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Om,{...e,state:c?"collapsed":e.state}),c?(0,o.jsx)(O.x,{paddingTop:4,paddingLeft:4,paddingRight:4,paddingBottom:0,children:(0,o.jsx)(jm,{message:a,trackImpression:l})}):null,(0,o.jsx)(Tm,{agentId:t,selectedAgentId:n})]})};const Lm=()=>{if(!(0,s.useContext)(fh))throw new Error("Please ensure this agent is rendered inside the <Assistant /> component. If rendering the agent independently, use transparentMode prop with Assistant component.")};function Nm(e){const t=s.useRef(null),[n,r]=s.useState(""),i=Ih().isFeatureEnabled(Lh.GoBranding),a=""!==n.trim(),l=i?"Ask Go":"Ask AI",c=e.placeholder||l,u=(0,o.jsx)(J.oP,{size:"medium",goBrandingEnabled:i,accessibilityLabel:c});return(0,o.jsx)(J.xg,{textAreaRef:t,value:n,onChange:r,placeholder:c,autoFocus:a,controls:e=>(0,o.jsx)(C.k,{direction:"row",justify:"end",width:"100%",align:"end",children:(0,o.jsx)(J.TH,{hasValue:a,isProcessing:!1,onStop:()=>{},onSubmit:e.handleSubmit})}),disabled:e.disabled,icon:u,onSubmit:e.onSubmit,contextChip:void 0})}const Fm="_separator_g8reo_1",Bm="_inputContainer_g8reo_7";function zm(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:Fm}),(0,o.jsx)(C.k,{direction:"column",justify:"center",className:Bm,children:(0,o.jsx)(Nm,{...e})})]})}const Hm=e=>{const t=function(){var e;return null==(e=(0,s.useContext)(hh))?void 0:e.uphook}(),n=(null==t?void 0:t.isEligibleForUphook(e))??!1,[r,i]=(0,s.useState)(void 0),o=pf((async()=>{if(t&&n)return t.getUphook(e)}),[t,e,n]);return(0,s.useEffect)((()=>{"success"===o.status&&i(o.data)}),[o]),(0,s.useEffect)((()=>{if(!t||!n)return;const r=t.updates.on(e,(e=>{i((t=>t&&{...t,value:{...t.value,...e}}))}));return()=>{null==r||r.dispose()}}),[t,e,n]),(0,s.useMemo)((()=>n?"loading"===o.status?{status:"loading"}:"error"===o.status?{status:"error",error:o.error}:r?{status:"success",data:r}:{status:"not-eligible"}:{status:"not-eligible"}),[n,o,r])};var Um=(e=>(e.ChatInputUphookSlot="ChatInputUphookSlot",e))(Um||{});function $m(){const{id:e}=xh(),{documentContextState:t,insertArtifact:n}=ph((e=>e.contextExtraction));return(0,s.useMemo)((()=>({isEnabled:t.isAvailable,tooltip:t.isAvailable?void 0:t.insertButtonTooltip,execute:({rawArtifactContent:t,html:r,plainText:i,messageId:o})=>{n({rawArtifactContent:t,html:r,plainText:i},e,o)}})),[t,n,e])}const Wm="_debugMarkdown_1lssr_1",Vm="_copyButton_1lssr_12";function Gm({debugInfo:e,debugTitle:t,children:n}){const[r,i]=(0,s.useState)(!1),a=(0,s.useRef)(null),l=(0,s.useCallback)((e=>{if(e.metaKey&&e.altKey){const t=e.target;if(t.closest("button")||t.closest("a")||t.closest('[role="button"]'))return;i((e=>!e))}}),[]),c=e?e.networkMessage:void 0,u=(0,s.useCallback)((()=>{const e=a.current;if(e){const t=e.textContent??"";navigator.clipboard.writeText(t).catch(console.error)}}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{onClick:void 0!==e?l:void 0,children:n}),r&&c&&(0,o.jsxs)(C.k,{direction:"column",marginTop:2,marginBottom:2,children:[(0,o.jsxs)(C.k,{justify:"space-between",align:"center",children:[(0,o.jsx)(R.X,{as:"h2",variant:"heading-xxsmall",children:t}),(0,o.jsx)(C.k,{align:"center",gap:2,children:(0,o.jsx)("button",{onClick:u,title:"Copy debug info",className:Vm,children:(0,o.jsx)(S.J,{icon:bi.c,size:"small",accessibilityLabel:"Copy debug info"})})})]}),(0,o.jsx)("div",{ref:a,className:Wm,children:(0,o.jsx)(J.r4,{children:c})})]})]})}const Zm="_thinkingBox_c7dl5_1";function qm(){return(0,o.jsx)(O.x,{className:Zm,accessibilityLabel:"Assistant is thinking",children:(0,o.jsxs)(C.k,{"aria-hidden":"true",gap:1,padding:.25,children:[(0,o.jsx)(J.Xd,{}),(0,o.jsx)(J.Xd,{}),(0,o.jsx)(J.Xd,{})]})})}const Km=({height:e,width:t})=>(0,o.jsx)("svg",{height:e,width:t,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M8.64642 2.64646C8.84167 2.45121 9.15819 2.45124 9.35346 2.64646C9.54872 2.84172 9.54872 3.15822 9.35346 3.35349L6.70697 5.99997L9.35346 8.64645C9.54872 8.84172 9.54872 9.15822 9.35346 9.35349C9.15819 9.54875 8.84169 9.54875 8.64642 9.35349L5.99994 6.707L3.35346 9.35349C3.15819 9.54875 2.84169 9.54875 2.64642 9.35349C2.45121 9.15822 2.45118 8.8417 2.64642 8.64645L5.29291 5.99997L2.64642 3.35349C2.45121 3.15822 2.45118 2.8417 2.64642 2.64646C2.84167 2.45121 3.15819 2.45124 3.35346 2.64646L5.99994 5.29294L8.64642 2.64646Z",fill:"#707070"})});Km.__brand="nocolor",Km.__source="GDS";const Jm="_comboboxChip_zb0at_1",Ym="_removeButton_zb0at_11";function Xm({display:e,onRemove:t}){const n=`Remove ${e}`;return(0,o.jsxs)(w.x,{as:"span",className:Jm,variant:"text-xsmall",children:[e,t&&(0,o.jsx)("button",{type:"button",onClick:()=>t(),className:Ym,"aria-label":n,children:(0,o.jsx)(S.J,{icon:Km,size:"small",accessibilityLabel:n})})]})}function Qm({account:e}){return(0,o.jsxs)(C.k,{direction:"row",gap:1,align:"center",children:[(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:"Account"}),(0,o.jsx)(Xm,{display:e})]})}const ev="_htmlPropertyValue_1gqrf_4";function tv({html:e}){const t=Gi.sanitize(e);return(0,o.jsx)("span",{className:ev,dangerouslySetInnerHTML:{__html:t}})}const nv="_htmlPropertyEditor_10wyj_1";function rv({value:e,onChange:t}){const n=Gi.sanitize(e||""),r=(0,s.useRef)(null),i=(0,s.useRef)(!1);(0,s.useEffect)((()=>{r.current&&!i.current&&(r.current.innerHTML=n,i.current=!0)}),[n]),function(e,t=!0){(0,s.useEffect)((()=>{const n=e.current;if(!t||!n)return;const r=document.createRange();r.selectNodeContents(n),r.collapse(!1);const i=self.getSelection();null==i||i.removeAllRanges(),null==i||i.addRange(r),n.focus()}),[e,t])}(r);const a=Fi((e=>{const n=Gi.sanitize(e);t(n)}),300);return(0,o.jsx)("span",{ref:r,contentEditable:!0,suppressContentEditableWarning:!0,onInput:e=>{a(e.currentTarget.innerHTML)},className:Pn(nv,ev)})}const iv="_stringPropertyEditor_1117r_1";function ov({value:e,onChange:t}){const n=(0,s.useRef)(null);(0,s.useEffect)((()=>{if(n.current){const e=n.current.value.length;n.current.setSelectionRange(e,e)}}),[]);const r=Fi((e=>{t(e)}),300);return(0,o.jsx)(Zi.Z,{autoFocus:!0,defaultValue:e,ref:n,onChange:e=>r(e.target.value),className:iv})}function sv(e,t){const n=new Map;return e.forEach((e=>{n.set(e.value,e)})),t.forEach((e=>{n.set(e.value,e)})),Array.from(n.values())}function av({toolName:e,parameterName:t,agentInstanceId:n}){const r=function(){var e;return null==(e=(0,s.useContext)(hh))?void 0:e.experimental_toolCallCard}(),i=(e=>{const t=gh(),n=null==t?void 0:t.getAgentIdForInstance(e);if(!n)return void console.error("Error mapping agentInstanceId<>agentId",e);const r=null==t?void 0:t.getAgentInstancesForAgent(n),i=null==r?void 0:r.find((t=>t.agentInstanceId===e));return i||console.error("Error returning agentInstance",e),i})(n),o=(0,s.useRef)(null);return{search:(0,s.useCallback)((async n=>{if(!i)return console.error("Cannot fetch tool call parameters. Missing agentInstance"),[];const s=`${n}-${Date.now()}`;o.current=s;try{const a=await(null==r?void 0:r.search({agentInstance:i,toolName:e,parameterName:t,searchQuery:n}))??[];return o.current!==s?[]:a}catch(e){return o.current!==s||console.error("Failed to fetch tool call parameters:",e),[]}}),[i,r,e,t])}}function lv({toolName:e,parameterName:t,agentInstanceId:n,initialParams:r=[]}){const[i,o]=(0,s.useState)(r),[a,l]=(0,s.useState)(!1),c=(0,s.useRef)(r),u=(0,s.useRef)(new Set),d=(0,s.useRef)(null),{setParameterDisplay:h}=Sh(),{search:g}=av({toolName:e,parameterName:t,agentInstanceId:n}),{search:f}={search:(0,s.useCallback)(((e,t)=>e.trim()?new Bo(t,{keys:["value","display"],threshold:.3,includeScore:!0,minMatchCharLength:1}).search(e).map((e=>e.item)):t),[])};return{search:(0,s.useCallback)((async n=>{const r=`${n}-${Date.now()}`;d.current=r;const i=f(n,c.current);if(d.current===r&&o(i),u.current.has(n))return;l(!0);const s=await g(n);if(d.current!==r||(u.current.add(n),l(!1),0===s.length))return;c.current=sv(c.current,s),s.forEach((n=>{h(e,t,n.value,n.display)}));const a=sv(i,s);o(a)}),[f,g,e,t,h]),params:i,isApiRequestPending:a}}function cv({value:e,display:t,toolName:n,parameterName:r,agentInstanceId:i}){const o=function({value:e,display:t,toolName:n,parameterName:r}){const{getParameterDisplay:i}=Sh();return(0,s.useMemo)((()=>{if(!e)return[];const o=Array.isArray(e);return(o?e:[e]).map((e=>{const s=i(n,r,e);return s?{value:e,display:s}:o||void 0===t?null:{value:e,display:t}})).filter((e=>null!==e))}),[e,t,n,r,i])}({value:e,display:t,toolName:n,parameterName:r}),{search:a,params:l,isApiRequestPending:c}=lv({toolName:n,parameterName:r,agentInstanceId:i,initialParams:o}),u=Fi(a,300);(0,s.useEffect)((()=>{a("")}),[a]);return{params:l,isLoading:c&&0===l.length,onQueryChange:u}}const uv=({width:e,height:t})=>(0,o.jsx)("svg",{height:t,width:e,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M4.86225 7.13794C4.6019 6.87759 4.6019 6.45558 4.86225 6.19523C5.12261 5.93494 5.54463 5.9349 5.80496 6.19523L8.00027 8.39055L10.1956 6.19523L10.2464 6.14966C10.5082 5.93615 10.8942 5.95118 11.1383 6.19523C11.3824 6.43929 11.3974 6.82531 11.1839 7.08716L11.1383 7.13794L8.47163 9.80461C8.21128 10.065 7.78927 10.065 7.52892 9.80461L4.86225 7.13794Z",fill:"#707070"})});uv.__brand="nocolor",uv.__source="GDS";const dv="_button_czjhm_1";function hv(){return(0,o.jsx)(_d,{className:dv,"aria-label":"Show options",children:(0,o.jsx)(S.J,{icon:uv,size:"small",accessibilityLabel:"Show options"})})}const gv="_message_ezwa2_1";function fv({children:e}){return(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"semibold",className:gv,children:e})}const pv={options:"_options_btocv_1",dark:"_dark_btocv_11",option:"_option_btocv_1",focused:"_focused_btocv_18",optionIcon:"_optionIcon_btocv_34",optionText:"_optionText_btocv_44"};function mv({options:e,isLoading:t=!1}){const{scheme:n}=(0,_.t)(),r=0===e.length;let i;return i=t||r?(0,o.jsx)(fv,{children:t?"Loading...":"No results found"}):e.map((e=>(0,o.jsx)(Od,{value:e.value,className:({focus:e,selected:t})=>Pn(pv.option,{[pv.focused]:e,[pv.selected]:t}),children:({selected:t})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:pv.optionIcon,children:t&&(0,o.jsx)(S.J,{size:"small",icon:I.L,accessibilityLabel:"Selected"})}),(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"semibold",className:pv.optionText,children:e.display})]})},e.value))),(0,o.jsx)(Td,{className:Pn(pv.options,pv[n]),anchor:{to:"bottom start",gap:8,offset:-4,padding:16},children:i})}const vv="_combobox_anr7o_1",xv="_picker_anr7o_7",bv="_input_anr7o_14";function yv({value:e,onChange:t,onClose:n,children:r,options:i,isLoading:s=!1,multiple:a=!1}){return(0,o.jsx)(Pd,{value:e,onChange:t,multiple:a,onClose:n,children:(0,o.jsxs)("div",{className:vv,children:[(0,o.jsxs)("div",{className:xv,children:[(0,o.jsx)("div",{className:bv,children:r}),(0,o.jsx)(hv,{})]}),(0,o.jsx)(mv,{options:i,isLoading:s})]})})}const Cv="_input_13xut_1",wv=(0,s.forwardRef)((({value:e,onChange:t,placeholder:n="",autoFocus:r=!1},i)=>(0,o.jsx)(Rd,{ref:i,value:e,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoFocus:r,className:Cv,placeholder:n,onChange:e=>t(e.target.value)})));function kv({value:e,onChange:t,options:n=[],isLoading:r=!1,autoFocus:i=!1,placeholder:a="Select an item...",onQueryChange:l}){const[c,u]=(0,s.useState)(""),d=n.find((t=>t.value===e));return(0,o.jsx)(yv,{value:e??"",onClose:()=>{u(""),null==l||l("")},onChange:e=>{t(e),u(""),null==l||l("")},options:n,isLoading:r,children:(0,o.jsx)(wv,{autoFocus:i,onChange:e=>{u(e),null==l||l(e)},placeholder:d?"":a,value:""!==c?c:(null==d?void 0:d.display)??""})})}function Sv({value:e=[],onChange:t,options:n=[],isLoading:r=!1,autoFocus:i=!1,placeholder:a="Select items...",onQueryChange:l}){const c=(0,s.useRef)(null),[u,d]=(0,s.useState)(),h=(0,s.useRef)(new Map);n.forEach((e=>{h.current.set(e.value,e)}));const g=e.map((e=>h.current.get(e))).filter((e=>void 0!==e));return(0,o.jsx)(yv,{multiple:!0,value:e,options:n,isLoading:r,onChange:e=>{t(e),d(""),null==l||l("")},children:(0,o.jsxs)(o.Fragment,{children:[g.map((n=>(0,o.jsx)(Xm,{display:n.display,onRemove:()=>(n=>{var r;t(e.filter((e=>e!==n))),null==(r=c.current)||r.focus()})(n.value)},n.value))),(0,o.jsx)(wv,{ref:c,autoFocus:i,onChange:e=>{d(e),null==l||l(e)},value:void 0!==u?u:"",placeholder:0===g.length?a:""})]})})}function Iv({agentInstanceId:e,toolName:t,parameterName:n,value:r,display:i,onChange:s}){const{params:a,isLoading:l,onQueryChange:c}=cv({value:r,display:i,toolName:t,parameterName:n,agentInstanceId:e});return(0,o.jsx)(kv,{value:r,options:a,isLoading:l,onChange:s,onQueryChange:c})}function Ev({toolName:e,parameterName:t,value:n,onChange:r,agentInstanceId:i}){const{params:s,isLoading:a,onQueryChange:l}=cv({value:n,toolName:e,parameterName:t,agentInstanceId:i});return(0,o.jsx)(Sv,{value:n,options:s,isLoading:a,onChange:r,onQueryChange:l})}const Av="_markdownValue_1y90z_4";function jv({value:e}){return(0,o.jsx)("div",{className:Av,children:(0,o.jsx)(J.r4,{children:e})})}function Mv({value:e}){const t=JSON.stringify(e,null,2);return(0,o.jsx)(J.dn,{value:t,language:"json"})}function _v({agentInstanceId:e,toolName:t,property:n,onChange:r}){const{label:i}=n;switch(n.type){case"string":return n.searchable?(0,o.jsx)(Iv,{toolName:t,onChange:r,value:n.value,display:n.display,parameterName:i,agentInstanceId:e}):(0,o.jsx)(ov,{value:n.value,onChange:r});case"html":return(0,o.jsx)(rv,{value:n.value,onChange:r});case"array":return"string"===n.itemType&&n.searchable?(0,o.jsx)(Ev,{toolName:t,onChange:r,value:n.value,parameterName:i,agentInstanceId:e}):(console.warn("Editing for array property not supported. Only string arrays with autocomplete are editable.",n),null);default:return console.warn("Editing for property not supported. Ensure the property type is not enabled for editing.",n),null}}function Rv({property:e}){if(void 0===e.value)return null;switch(e.type){case"string":case"email":case"number":case"boolean":return e.display||Ch(e.value);case"array":return"string"===e.itemType?Ch(e.value.join(", ")):(console.warn("Rendering for property not supported",e),null);case"markdown":return(0,o.jsx)(jv,{value:e.value});case"html":return(0,o.jsx)(tv,{html:e.value});case"object":return(0,o.jsx)(Mv,{value:e.value});case"date":return function(e){return new Date(e).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}(e.value);default:return console.warn("Rendering for property not supported",e),null}}function Dv({containerRef:e,property:t}){const[n,r]=(0,s.useState)(!1),i=(0,s.useCallback)((()=>{var t;r(!1),null==(t=e.current)||t.focus()}),[r,e]),o=(0,s.useCallback)((()=>{r(!0)}),[r]);return function(e,t,n="mousedown",r={}){Li(n,(n=>{const r=n.target;r&&r.isConnected&&(Array.isArray(e)?e.filter((e=>Boolean(e.current))).every((e=>e.current&&!e.current.contains(r))):e.current&&!e.current.contains(r))&&t(n)}),void 0,r)}(e,(e=>{const t=e.target;n&&(t.closest('[role="listbox"]')||i())})),(0,s.useEffect)((()=>{if(!n)return;const r=n=>{const r=n.target;if(e.current&&!e.current.contains(r)||"BUTTON"===r.tagName)return;let o=!1;o="Escape"===n.key||("html"===t.type?"Enter"===n.key&&n.altKey:"Enter"===n.key),o&&(n.preventDefault(),i())};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}}),[n,t.type,e,i]),{isEditing:n,handleEdit:o}}const Tv="_propertyValue_e9p1f_1",Ov="_editable_e9p1f_9";function Pv({agentInstanceId:e,toolName:t,property:n,onChange:r}){const i=(0,s.useRef)(null),{isEditing:a,handleEdit:l}=Dv({property:n,containerRef:i}),c=Pn(Tv,a?void 0:Ov);return n.searchable?(0,o.jsx)("div",{className:Tv,children:(0,o.jsx)(_v,{toolName:t,property:n,onChange:r,agentInstanceId:e})}):(0,o.jsx)(w.x,{as:"span",variant:"text-small",color:"base-default",ref:i,className:c,onClick:l,onKeyDown:e=>{!a&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),l())},tabIndex:a?-1:0,role:a?void 0:"button","aria-label":a?void 0:`Edit ${n.label}`,children:a?(0,o.jsx)(_v,{toolName:t,property:n,onChange:r,agentInstanceId:e}):(0,o.jsx)(Rv,{property:n})})}const Lv="_propertyValue_1d1ik_1";function Nv({property:e}){return(0,o.jsx)(w.x,{as:"span",variant:"text-small",color:"base-default",className:Lv,children:(0,o.jsx)(Rv,{property:e})})}function Fv({agentInstanceId:e,toolCallId:t,toolName:n,property:r,editable:i}){const{updateProperty:a}=Sh(),{label:l}=r,c=yh(l),u=(0,s.useCallback)((e=>{a(t,l,e)}),[a,t,l]);return!c||void 0===r.value||!i&&""===r.value?null:function(e){switch(e.type){case"string":case"email":case"number":case"boolean":case"markdown":case"html":case"date":case"object":return!0;case"array":return"string"===e.itemType;default:return!1}}(r)?(0,o.jsxs)(C.k,{direction:"column",gap:1,children:[(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:c}),i?(0,o.jsx)(Pv,{toolName:n,property:r,onChange:u,agentInstanceId:e}):(0,o.jsx)(Nv,{property:r})]}):(console.warn("Rendering for property not supported",r),null)}function Bv({toolName:e,readOnly:t,toolCallId:n,agentInstanceId:r,properties:i}){const s=function(e,t){const n=Ih(),{getStatus:r}=Sh(),i="pending"===r(e);return!(t||!i)&&n.isFeatureEnabled(Lh.ToolCallEditing)}(n,t);return(0,o.jsx)(C.k,{direction:"column",gap:3,children:i.map(((t,i)=>{const a=s&&function(e){switch(e.type){case"string":case"html":return!0;case"array":return!("string"!==e.itemType||!e.searchable);default:return!1}}(t);return(0,o.jsx)(Fv,{editable:a,property:t,toolName:e,toolCallId:n,agentInstanceId:r},i)}))})}const zv="_toolCallContent_1lbp5_1",Hv="_truncated_1lbp5_4";function Uv({children:e,expanded:t,expandable:n,onExpandableChange:r}){const i=(0,s.useRef)(null);(0,s.useEffect)((()=>{if(i.current&&!t){const e=i.current.scrollHeight>272;null==r||r(e)}}),[e,t,r]);const a=t?void 0:{maxHeight:272},l=Pn(n?Hv:void 0,zv);return(0,o.jsx)(O.x,{ref:i,style:a,className:l,children:e})}const $v="_footer_4whtt_1";function Wv({title:e,toolName:t,toolCallId:n}){const{agentId:r}=lh(),{id:i}=xh(),{getStatus:a,approveToolCall:l,rejectToolCall:c}=Sh(),{trackClicked:u}=Oh(Qd.ToolCallApprove,{agentId:r,chatId:i,toolName:t,toolCallId:n}),{trackClicked:d}=Oh(Qd.ToolCallDecline,{agentId:r,chatId:i,toolName:t,toolCallId:n}),h=a(n),g=(0,s.useCallback)((()=>{l(n,t),u()}),[l,n,t,u]),f=(0,s.useCallback)((()=>{c(n,t),d()}),[c,n,t,d]);return(0,o.jsxs)(O.x,{className:$v,children:["pending"===h&&(0,o.jsxs)(C.k,{direction:"row",gap:1,children:[(0,o.jsx)(A.z,{variant:"primary",size:"small",onClick:g,children:"Approve"}),(0,o.jsx)(A.z,{variant:"secondary",size:"small",onClick:f,children:"Decline"})]}),"approved"===h&&(0,o.jsx)(Vv,{title:e,label:"Approved",variant:"success",icon:I.L}),"rejected"===h&&(0,o.jsx)(Vv,{title:e,label:"Declined",variant:"critical",icon:wi})]})}function Vv({title:e,label:t,icon:n,variant:r}){return(0,o.jsxs)(C.k,{direction:"row",gap:1,align:"center",children:[(0,o.jsxs)(w.x,{as:"span",variant:"text-xsmall",color:"base-default",weight:"medium",children:[yh(e),": ",t]}),(0,o.jsx)(C.k,{alignSelf:"start",children:(0,o.jsx)(S.J,{icon:n,accessibilityLabel:t,variant:r,size:"small"})})]})}const Gv=()=>(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M5.65999 13V10.3333H2.99333C2.62514 10.3333 2.32666 10.0349 2.32666 9.66667C2.32666 9.29848 2.62514 9 2.99333 9H6.32666C6.69485 9 6.99333 9.29848 6.99333 9.66667L6.99333 13C6.99333 13.3682 6.69485 13.6667 6.32666 13.6667C5.95847 13.6667 5.65999 13.3682 5.65999 13Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M10.3334 2.99658L10.3334 5.66325L13.0001 5.66325C13.3683 5.66325 13.6667 5.96173 13.6667 6.32992C13.6667 6.69811 13.3683 6.99658 13.0001 6.99658L9.66675 6.99658C9.29856 6.99658 9.00008 6.6981 9.00008 6.32991L9.00008 2.99658C9.00008 2.62839 9.29856 2.32991 9.66675 2.32991C10.0349 2.32991 10.3334 2.62839 10.3334 2.99658Z",fill:"currentColor"})]});Gv.__brand="nocolor",Gv.__source="GDS";const Zv=()=>(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M3.33301 8.66671C3.33301 8.29852 3.63148 8.00004 3.99967 8.00004C4.36786 8.00004 4.66634 8.29852 4.66634 8.66671V11.3334H7.33301C7.7012 11.3334 7.99967 11.6319 7.99967 12C7.99967 12.3682 7.7012 12.6667 7.33301 12.6667H3.99967C3.63148 12.6667 3.33301 12.3682 3.33301 12V8.66671ZM11.333 7.33337V4.66671H8.66634C8.29815 4.66671 7.99967 4.36823 7.99967 4.00004C7.99967 3.63185 8.29815 3.33337 8.66634 3.33337H11.9997C12.3679 3.33337 12.6663 3.63185 12.6663 4.00004V7.33337C12.6663 7.70156 12.3679 8.00004 11.9997 8.00004C11.6315 8.00004 11.333 7.70156 11.333 7.33337Z",fill:"currentColor"})});Zv.__brand="nocolor",Zv.__source="GDS";const qv="_agentIconPlaceholder_1ys7h_1";function Kv({title:e,expanded:t,expandable:n,onToggleExpand:r,agentInstanceId:i}){const{isLoading:s,agentMetadata:a}=_h(i);return(0,o.jsxs)(C.k,{direction:"row",justify:"space-between",align:"center",paddingLeft:4,paddingRight:4,paddingTop:4,children:[(0,o.jsxs)(C.k,{direction:"row",gap:2,align:"center",children:[s&&!a&&(0,o.jsx)("div",{className:qv}),a&&(0,o.jsx)(J.J$,{agent:a,size:"medium"}),(0,o.jsx)(R.X,{as:"h3",variant:"heading-xxsmall",children:yh(e)})]}),n&&(0,o.jsx)(F.h,{size:"small",variant:"tertiary",icon:t?Gv:Zv,onClick:r,accessibilityLabel:t?"Collapse":"Expand",tooltipProps:{openDelay:500,placement:"left"}})]})}const Jv="_pendingToolCallCard_k5rrp_1";function Yv({pendingToolCall:e}){const{toolName:t,toolCallId:n,externalUserAccount:r,title:i,properties:a,agentInstanceId:l,readOnly:c}=e,[u,d]=(0,s.useState)(!1),[h,g]=(0,s.useState)(!1),f=(0,s.useCallback)((()=>{d((e=>!e))}),[]),p=(0,s.useCallback)((e=>{g(e)}),[]);return function(e){const{id:t}=xh(),{agentId:n}=lh(),{getStatus:r}=Sh(),{toolName:i,toolCallId:o}=e,a=r(o),{trackImpression:l}=Dh(Qd.ToolCallCard,{agentId:n,chatId:t,toolName:i,toolCallId:o,status:a}),c=(0,s.useRef)(!1);c.current||(l(),c.current=!0)}(e),(0,o.jsx)(O.x,{className:Jv,children:(0,o.jsxs)(C.k,{direction:"column",children:[(0,o.jsx)(Kv,{title:i,expanded:u,expandable:h,agentInstanceId:l,onToggleExpand:f}),(0,o.jsx)(Uv,{expanded:u,expandable:h,onExpandableChange:p,children:(0,o.jsxs)(C.k,{direction:"column",gap:3,children:[r&&(0,o.jsx)(Qm,{account:r}),(0,o.jsx)(Bv,{toolName:t,readOnly:c,toolCallId:n,properties:a,agentInstanceId:l})]})}),(0,o.jsx)(Wv,{title:i,toolName:t,toolCallId:n})]})})}function Xv({message:e}){const{getResolvedPendingToolCall:t}=Sh(),n=wh(e);if(function(e,t){const{id:n,messages:r}=xh(),{rejectToolCall:i,getStatus:o}=Sh(),{agentId:a}=lh(),l=Rh(),c=o(null==t?void 0:t.toolCallId),u=(0,s.useRef)(!1);(0,s.useEffect)((()=>{if(!t||"pending"!==c||u.current)return;const{toolCallId:o,toolName:s}=t,d=((e,t)=>{const n=e.findIndex((e=>e.id===t));return-1===n?[]:e.slice(n+1)})(r,e);0===d.length||Hf(d).filter((e=>e.toolCallId===o)).length>0||(i(o,s,!0),u.current=!0,null==l||l.trackEvent(eh.ToolCallSkipped,{agentId:a,chatId:n,toolCallId:o,toolName:s}))}),[c,t,e,r,i,a,n,l])}(e.id,n),!n)return null;const r=t(n);return(0,o.jsx)(Yv,{pendingToolCall:r})}const Qv="_citation_nj8l7_1";function ex({href:e,citationIndex:t,recordId:n,searchRequestId:r}){const{trackingRef:i}=Th(Qd.ChatResponseSource,{location:"inline",recordId:n,searchRequestId:r});return(0,o.jsx)("a",{href:e,className:Qv,ref:i,target:"_blank",rel:"noopener noreferrer",children:t})}function tx(e){const{messageId:t,copyableTextId:n,title:r,rawArtifactContent:i}=e,{id:a}=xh(),{agentId:l}=lh(),{responseCopied:c}=bh(),[u,d]=(0,s.useState)("default"),{trackingRef:h,trackClicked:g}=Dh(Qd.CopyArtifactButton,{agentId:l??"",chatId:a,messageId:t??""});(0,s.useEffect)((()=>{if("copied"===u){const e=setTimeout((()=>{d("default")}),1500);return()=>clearTimeout(e)}}),[u]);const f="copied"===u;return(0,o.jsx)(F.h,{ref:h,onClick:()=>{var e;null==(e=document.activeElement)||e.blur(),g(),c({chatId:a,responseLength:i.length,messageId:t}),function(e){const{html:t,text:n}=im(e);if(typeof ClipboardItem<"u"){const e=new Blob([t],{type:"text/html"}),r=new Blob([n],{type:"text/plain"}),i=new ClipboardItem({"text/plain":r,"text/html":e});navigator.clipboard.write([i]).catch(console.error)}else{const e=e=>{var r,i;null==(r=e.clipboardData)||r.setData("text/html",t),null==(i=e.clipboardData)||i.setData("text/plain",n),e.preventDefault()};document.addEventListener("copy",e),document.execCommand("copy"),document.removeEventListener("copy",e)}}(document.getElementById(n)),d("copied")},variant:"tertiary",icon:bi.c,accessibilityLabel:r?`Copy generated content for ${r}`:"Copy generated content",tooltipContentProps:{children:f?"Copied":"Copy"},tooltipProps:{open:!!f||void 0},"aria-describedby":n})}function nx({messageId:e,copyableTextId:t,rawArtifactContent:n,capabilities:i}){var a,l;const{id:c}=xh(),{agentId:u}=lh(),d=null==(a=null==i?void 0:i.insertArtifact)?void 0:a.isEnabled,h=null==(l=null==i?void 0:i.insertArtifact)?void 0:l.tooltip,[g,f]=(0,s.useState)(rx(d,h)),{trackingRef:p,trackClicked:m}=Dh(Qd.InsertArtifactButton,{agentId:u??"",chatId:c,messageId:e??""});switch((0,s.useEffect)((()=>{f(rx(d,h))}),[d,h]),g){case"displayed":return(0,o.jsx)(ix,{trackingRef:p,chatId:c,messageId:e,copyableTextId:t,rawArtifactContent:n,capabilities:i,onClick:()=>{m(),f("inserted")}});case"inserted":return(0,o.jsx)(ox,{trackingRef:p,onTimeout:()=>f("displayed")});case"disabled":return(0,o.jsxs)(k.u,{children:[(0,o.jsx)(k.aJ,{asChild:!0,children:(0,o.jsx)(A.z,{variant:"secondary",text:"Insert",isDisabled:!0})}),(0,o.jsx)(k._v,{root:null,children:h})]});case"hidden":return null;default:(0,r.vE)(g)}}function rx(e,t){return e?"displayed":t?"disabled":"hidden"}function ix(e){const{chatId:t,messageId:n,copyableTextId:r,rawArtifactContent:i,onClick:s,trackingRef:a,capabilities:l}=e,{responseInserted:c}=bh();return(0,o.jsx)(A.z,{ref:a,variant:"secondary",text:"Insert",onClick:()=>{var e;c({chatId:t,responseLength:i.length,messageId:n});const o=document.getElementById(r),{html:a,text:u}=im(o);null==(e=null==l?void 0:l.insertArtifact)||e.execute({html:a,plainText:u,rawArtifactContent:i,messageId:n}),s()}})}function ox(e){const{trackingRef:t,onTimeout:n}=e;return(0,s.useEffect)((()=>{const e=setTimeout(n,3e3);return()=>clearTimeout(e)}),[n]),(0,o.jsx)(A.z,{ref:t,iconStart:I.L,variant:"tertiary",text:"Inserted"})}const sx="_artifactContent_r2gxs_1",ax="_verticalBar_r2gxs_7";function lx(e){const{title:t,content:n,messageId:r,artifactId:i,capabilities:s}=e;return(0,o.jsxs)(C.k,{className:sx,direction:"column",children:[(0,o.jsx)("div",{id:i,children:(0,o.jsx)(J.r4,{children:n})}),(0,o.jsx)("div",{className:ax}),(0,o.jsxs)(C.k,{gap:2,children:[(0,o.jsx)(nx,{messageId:r,copyableTextId:i,rawArtifactContent:n,capabilities:s}),(0,o.jsx)(tx,{messageId:r,copyableTextId:i,title:t,rawArtifactContent:n})]})]})}function cx(e){const{content:t,artifactId:n}=e;return(0,o.jsxs)(C.k,{className:sx,direction:"column",children:[(0,o.jsx)("div",{id:n,children:(0,o.jsx)(J.e5,{content:t,isStreaming:!0})}),(0,o.jsx)("div",{className:ax})]})}function ux(e){const{content:t,isStreaming:n=!1,messageId:r,title:i,capabilities:a}=e,l=(0,s.useId)();return n?(0,o.jsx)(cx,{artifactId:l,content:t}):(0,o.jsx)(lx,{messageId:r,artifactId:l,title:i,content:t,capabilities:a})}function dx(e){const{messageId:t,title:n,tabIndex:r,content:i,isStreaming:s,capabilities:a}=e,{id:l}=xh(),{agentId:c}=lh(),{trackingRef:u}=Dh(Qd.IdeationTabContent,{agentId:c??"",chatId:l,messageId:t??"",tabIndex:r});return(0,o.jsx)("div",{ref:u,children:(0,o.jsx)(ux,{title:n,content:i,isStreaming:s,messageId:t,capabilities:a})})}const hx="_root_1b8kx_1";function gx(e){const{alternatives:t,isStreaming:n=!1,messageId:r,capabilities:i}=e,{id:s}=xh(),{agentId:a}=lh(),{trackingRef:l}=Dh(Qd.IdeationTabs,{agentId:a??"",chatId:s,messageId:r??"",count:t.length});if(1===t.length)return(0,o.jsx)(ux,{messageId:r,isStreaming:n,content:t[0].content,title:t[0].title,capabilities:i});const c=t.map((e=>e.title)).join(";");return(0,o.jsx)(O.x,{children:(0,o.jsxs)(ki.m,{size:"small",className:Pn(hx),children:[(0,o.jsx)(ki.m.TabList,{ref:l,accessibilityLabel:"Ideation tabs",bottomBorder:"none",children:t.map(((e,t)=>(0,o.jsx)(ki.m.Tab,{id:t.toString(),label:e.title},t)))},c),t.map((({content:e,title:t},s)=>(0,o.jsx)(ki.m.Panel,{id:s.toString(),children:(0,o.jsx)(dx,{messageId:r,title:t,tabIndex:s,content:e,isStreaming:n,capabilities:i},s)},s)))]})})}const fx="_interactiveBlockquote_t46os_1",px="_verticalBar_t46os_7";function mx({children:e,isStreaming:t,messageId:n,capabilities:r}){const i=(0,s.useId)(),a=t?"":vx(e);return(0,o.jsxs)(C.k,{className:fx,direction:"column",children:[(0,o.jsx)("div",{id:i,children:e}),(0,o.jsx)("div",{className:px}),!t&&(0,o.jsxs)(C.k,{gap:2,children:[(0,o.jsx)(nx,{messageId:n,copyableTextId:i,rawArtifactContent:a,capabilities:r}),(0,o.jsx)(tx,{messageId:n,copyableTextId:i,title:void 0,rawArtifactContent:a})]})]})}function vx(e){return"string"==typeof e?e:Array.isArray(e)?e.map(vx).join(""):(0,s.isValidElement)(e)&&e.props.children?vx(e.props.children):""}function xx(e,t){return t=>{e.forEach((e=>{"function"==typeof e?e(t):e&&(e.current=t)}))}}function bx(e){const{messageId:t,imageSrc:n,imageAlt:r}=e,{id:i}=xh(),{agentId:a}=lh(),{downloadImageClicked:l}=bh(),{trackingRef:c,trackClicked:u}=Dh(Qd.DownloadImageButton,{agentId:a??"",chatId:i,messageId:t??""}),d=(0,s.useRef)(null);return(0,o.jsx)(F.h,{ref:xx([d,c]),onClick:()=>{var e;null==(e=d.current)||e.blur(),u(),l({chatId:i,messageId:t}),function(e,t){if(void 0===e)return;let n=t;if(void 0===n){const t=e.split("/").pop();void 0!==t&&(n=t.split("?")[0])}const r=document.createElement("a");r.href=e,r.download=n||"image",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(n,r)},variant:"tertiary",icon:Si,accessibilityLabel:"Download image",tooltipContentProps:{children:"Download"}})}const yx="_interactiveImage_19b7c_1",Cx="_verticalBar_19b7c_7",wx="_imageContainer_19b7c_15",kx="_image_19b7c_15";function Sx({src:e,alt:t,title:n,isStreaming:r,messageId:i,capabilities:a}){const l=(0,s.useId)(),c=`![${t}](${e} "${n}")`;return(0,o.jsxs)(C.k,{className:yx,direction:"column",children:[(0,o.jsx)("div",{id:l,className:wx,children:(0,o.jsx)("img",{src:e,alt:t,title:n,className:kx})}),(0,o.jsx)("div",{className:Cx}),!r&&(0,o.jsxs)(C.k,{gap:2,children:[(0,o.jsx)(nx,{messageId:i,copyableTextId:l,rawArtifactContent:c,capabilities:a}),(0,o.jsx)(tx,{messageId:i,copyableTextId:l,title:n,rawArtifactContent:c}),(0,o.jsx)(bx,{messageId:i,imageSrc:e,imageAlt:t})]})]})}function Ix({content:e,isStreaming:t,messageId:n,capabilities:r}){const i=(0,s.useCallback)((e=>({...e,blockquote:e=>{const{children:i}=e;return(0,o.jsx)(mx,{isStreaming:t,messageId:n,capabilities:r,children:i})},img:e=>{const{src:i,alt:s,title:a}=e;return(0,o.jsx)(Sx,{src:i,alt:s,title:a,isStreaming:t,messageId:n,capabilities:r})}})),[t,n,r]);return(0,o.jsx)(J.e5,{content:e,isStreaming:t,updateComponents:i})}const Ex=({icon:e,accessibilityLabel:t=""})=>{const n=Ih().isFeatureEnabled(Lh.GoBranding);if(!e)return null;switch(e){case"aiDetectorAgent":return(0,o.jsx)(J.Fq,{size:"medium",accessibilityLabel:t});case"plagiarismAgent":return(0,o.jsx)(J.PJ,{size:"medium",accessibilityLabel:t});case"proofreaderAgent":return(0,o.jsx)(J.YN,{size:"medium",accessibilityLabel:t});case"aiGraderAgent":return(0,o.jsx)(J.DV,{size:"medium",accessibilityLabel:t});case"citationFinderAgent":return(0,o.jsx)(J.ro,{size:"medium",accessibilityLabel:t});case"expertPanelAgent":return(0,o.jsx)(J.W5,{size:"medium",accessibilityLabel:t});case"humanizerAgent":return(0,o.jsx)(J.bN,{size:"medium",accessibilityLabel:t});case"readerReactionAgent":return(0,o.jsx)(J.f8,{size:"medium",accessibilityLabel:t});default:return(0,o.jsx)(J.oP,{size:"medium",accessibilityLabel:t,goBrandingEnabled:n})}},Ax="_highlight_10ijo_1",jx="_stopHighlight_10ijo_18",Mx=({action:e,onClick:t})=>{const{id:n}=xh(),[r,i]=(0,s.useState)("animating"),{agentId:a}=lh(),{trackingRef:l,trackClicked:c}=Dh(Qd.QuickActionButton,{agentId:a??"",chatId:n,quickAction:e.kind,message:_x(e)?e.message:void 0,systemKind:_x(e)?e.systemMessageKind:void 0});return(0,o.jsx)(J.Kk,{ref:l,iconStart:e.icon?(0,o.jsx)(Ex,{icon:e.icon}):void 0,text:e.label,className:Pn(e.isRecommended&&"animating"===r&&Ax,e.isRecommended&&"stopped"===r&&jx),onClick:()=>{c(),i("stopped"),null==t||t()}})},_x=e=>"chatMessage"===e.kind,Rx="_stack_1air9_1",Dx=({actions:e,title:t,isStreaming:n,isMostRecentMessage:r,capabilities:i})=>n||!r?null:(0,o.jsxs)(C.k,{direction:"column",align:"stretch",gap:3,paddingTop:2,className:Rx,children:[t&&(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"medium",color:"base-subdued",children:t}),(0,o.jsx)(C.k,{direction:"column",align:"stretch",gap:2,children:e.map((e=>(0,o.jsx)(Mx,{action:e,onClick:()=>{var t;return null==(t=null==i?void 0:i.sendQuickAction)?void 0:t.execute(e)}},e.label)))})]});function Tx(e){const{status:t,isStreaming:n}=e;return n?(0,o.jsx)(w.x,{as:"p",color:"base-subdued",italic:!0,variant:"text-small",marginTop:2,marginBottom:2,children:t}):null}function Ox({messageId:e,suggestionIds:t}){const{id:n}=xh(),{agentId:r}=lh(),{applyAllSuggestions:i}=Ah(),s=Ih(),{trackingRef:a,trackClicked:l}=Th(Qd.ApplyAllSuggestionsButton,{agentId:r??"",chatId:n,messageId:e});return s.isFeatureEnabled(Lh.AcceptAllSuggestions)?(0,o.jsx)(A.z,{ref:a,variant:"secondary",size:"small",onClick:()=>{i(t),l()},children:"Apply all"}):null}function Px({messageId:e,suggestionIds:t}){const{id:n}=xh(),{agentId:r}=lh(),{dismissAllSuggestions:i}=Ah(),{trackingRef:s,trackClicked:a}=Th(Qd.DismissAllSuggestionsButton,{agentId:r??"",chatId:n,messageId:e});return(0,o.jsx)(A.z,{ref:s,variant:"secondary",size:"small",onClick:()=>{i(t),a()},children:"Dismiss all"})}function Lx(e){const{messageId:t,availableSuggestionsCount:n}=e,{id:r}=xh(),{agentId:i}=lh(),{focusSuggestions:s}=Ah(),{trackingRef:a,trackClicked:l}=Th(Qd.ShowSuggestionsButton,{agentId:i??"",chatId:r,messageId:t});return(0,o.jsx)(J.WD,{ref:a,title:"Suggestions",suggestions:n,onClick:()=>{s(),l()}})}function Nx(e){const{messageId:t,suggestions:n,isStreaming:r}=e,i=Ih(),a=function(e){const{onUpdate:t,hasSuggestion:n}=Ah(),[r,i]=(0,s.useState)([]),o=(0,s.useCallback)((()=>{const t=e.filter((e=>n(e.contentId))).map((e=>e.contentId));i((e=>e.length===t.length&&e.every(((e,n)=>e===t[n]))?e:t))}),[n,e]);return(0,s.useEffect)((()=>{o()}),[e,n,o]),(0,s.useEffect)((()=>{const e=t(o);return()=>e.dispose()}),[t,o]),r}(n);return!i.isFeatureEnabled(Lh.SuggestionsSummary)||r||0===a.length?null:(0,o.jsxs)(C.k,{direction:"column",gap:2,marginTop:2,marginBottom:2,children:[(0,o.jsx)(Lx,{messageId:t,availableSuggestionsCount:a.length}),a.length>1&&(0,o.jsxs)(C.k,{align:"center",gap:2,children:[(0,o.jsx)(Ox,{messageId:t,suggestionIds:a}),(0,o.jsx)(Px,{messageId:t,suggestionIds:a})]})]})}function Fx({content:e,isStreaming:t=!1,sticky:n=!0}){return n||t?(0,o.jsx)(w.x,{as:"p",color:"base-subdued",italic:!0,variant:"text-small",children:e}):null}function Bx(e){return"string"==typeof e?e:Array.isArray(e)?e.map((e=>Bx(e))).join(""):s.isValidElement(e)?s.Children.toArray(e.props.children).map((e=>Bx(e))).join(""):""}function zx(e,t,n){if(null==n||!n.length||!e)return;const r=Bx(t);if(!r)return;const i=r.match(/^\[(\d+)\]$/),o=i?parseInt(i[1],10):0;if(o<1||o>n.length)return;const s=n[o-1];return(null==s?void 0:s.url)===e?{index:o,source:s}:void 0}function Hx({part:e,isStreaming:t,isMostRecentMessage:n,messageId:i,capabilities:a,sources:l}){const c=(0,s.useCallback)((e=>({...e,a:t=>{var n;const{children:r,node:i,...s}=t,a=zx(s.href,r,l);return a?(0,o.jsx)(ex,{href:a.source.url,citationIndex:a.index,recordId:a.source.recordId,searchRequestId:a.source.searchRequestId}):null==(n=e.a)?void 0:n.call(e,t)}})),[l]);switch(e.kind){case"text":return(0,o.jsx)(J.e5,{content:e.content,isStreaming:t,updateComponents:c});case"interactive-markdown":return(0,o.jsx)(Ix,{content:e.content,isStreaming:t,messageId:i,capabilities:a});case"artifact":return(0,o.jsx)(ux,{messageId:i,content:e.content,isStreaming:t,capabilities:a});case"alt-artifacts":return(0,o.jsx)(gx,{messageId:i,alternatives:e.alts,isStreaming:t,capabilities:a});case"tool-call":return(0,o.jsx)(Fx,{content:e.content,sticky:e.sticky,isStreaming:t});case"suggestions-status":return(0,o.jsx)(Tx,{status:e.status,isStreaming:t});case"suggestions-summary":return(0,o.jsx)(Nx,{messageId:i,suggestions:e.suggestions,isStreaming:t});case"quick-actions":return(0,o.jsx)(Dx,{actions:e.actions,title:e.title,isStreaming:t,isMostRecentMessage:n,capabilities:a});case"widget":case"research-page":return null;default:return(0,r.vE)(e)}}function Ux(e){switch(e.type){case"ai_message":return[{kind:"text",content:e.content}];case"generated_text":return[{kind:"artifact",content:e.content}];case"proposed_edits":return function(e){return e.edits.filter((e=>e.reason)).map((e=>({kind:"suggestions-status",status:e.reason||""})))}(e);case"reading_document":return[{kind:"tool-call",content:"Reading document",sticky:!1}];case"generic_tool_call":return[{kind:"tool-call",content:e.content,sticky:e.sticky}];case"error":default:return[];case"quick_actions":return[{kind:"quick-actions",actions:e.actions,title:e.title}];case"widget":return[{kind:"widget",widget:e.widget_type}];case"research_page":return[{kind:"research-page",...e}]}}const $x="`````artifact",Wx="`````";function Vx(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf($x,n);if(-1===r){const r=e.slice(n);(r.length>0||0===t.length)&&t.push({kind:"text",content:r});break}const i=e.slice(n,r);(i.length>0||0===t.length)&&t.push({kind:"text",content:i});const o=r+$x.length,s=e.indexOf(Wx,o);if(-1===s){const n=e.slice(o);t.push({kind:"artifact",content:n});break}const a=e.slice(o,s);t.push({kind:"artifact",content:a}),n=s+Wx.length}return 0===t.length&&t.push({kind:"text",content:""}),t}function Gx(e){const t=[],n=[];for(const r of e){const[e,i]=Vx(r.content);if(e&&0===t.length&&t.push(e),!i||"artifact"!==i.kind)break;n.push({title:r.title,content:i.content})}return n.length>0&&t.push({kind:"alt-artifacts",alts:n}),t}function Zx(e){return"kind"in e&&"thinking"===e.kind}function qx(e,t,n){if(Zx(e))return[];if(function(e){return"responseFormat"in e&&e.responseFormat===Di.B5.AiEditorOutput}(e))return function(e,t,n,r){const i=e.flatMap(Ux);return t.length>0&&n&&!r&&i.push({kind:"suggestions-summary",suggestions:t.map((e=>({contentId:e.contentId})))}),i}(e.items,e.alerts,t,n);if(function(e){return"responseFormat"in e&&e.responseFormat===Di.B5.PromptOutput}(e)){const t=e.variations;return t?Gx(t):Vx(e.content)}if(function(e){return"responseFormat"in e&&e.responseFormat===Di.B5.AgentOutput}(e))return[{kind:"interactive-markdown",content:e.content}];if(function(e){return!("responseFormat"in e&&void 0!==e.responseFormat||Zx(e))}(e)){const t=e.variations;return t?Gx(t):Vx(e.content)}return function(e){return"responseFormat"in e&&e.responseFormat===Di.B5.Other}(e)?Vx(e.content):[]}function Kx({message:e,isMostRecentMessage:t,isStreaming:n,capabilities:r,externalContentPartHandler:i}){const a=(0,s.useMemo)((()=>qx(e,t,n)),[e,t,n]);return(0,o.jsx)(o.Fragment,{children:a.map(((s,l)=>{const c=n&&l===a.length-1,u={part:s,messageId:e.id,isStreaming:c,isMostRecentMessage:t,capabilities:r,sources:"thinking"!==e.kind?e.sources:void 0},d=null==i?void 0:i.handleContentPart(u);return d&&"handled"===d.kind?d.component:(0,o.jsx)(Gp,{id:"ContentPart",fallback:(0,o.jsx)(J.Tv,{content:"Part of the message cannot be displayed"}),children:(0,o.jsx)(Hx,{...u})},`${s.kind}-${l}`)}))})}const Jx="_hideSourcesButton_1ad1j_1",Yx="_viewSourcesButton_1ad1j_1",Xx="_sourcePill_1ad1j_31",Qx="_index_1ad1j_47",eb="_icon_1ad1j_59",tb="_title_1ad1j_63";function nb(e){const{sources:t}=e,[n,r]=(0,s.useState)(!0),i=(0,s.useCallback)((()=>{r((e=>!e))}),[]);if(null==t||!t.length)return null;const a=(0,Wd._6)(t.length,"source","sources");return(0,o.jsxs)(C.k,{direction:"column",gap:1,children:[(0,o.jsxs)("button",{className:Yx,onClick:i,children:[t.length," ",a,(0,o.jsx)(S.J,{icon:n?Ii.b:Ei,accessibilityLabel:"",size:"small"})]}),n?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.k,{direction:"column",gap:2,children:t.map(((e,t)=>(0,o.jsx)(rb,{source:e,index:t+1},e.url)))}),t.length>5&&(0,o.jsxs)("button",{className:Jx,onClick:i,children:["Hide ",a]})]})]})}function rb({source:e,index:t}){const{trackingRef:n}=Th(Qd.ChatResponseSource,{location:"footer",recordId:e.recordId,searchRequestId:e.searchRequestId});return(0,o.jsxs)("a",{ref:n,className:Xx,href:e.url,target:"_blank",rel:"noopener noreferrer",children:[(0,o.jsx)("div",{className:Qx,children:t}),(0,o.jsx)("img",{className:eb,alt:"",src:e.iconUrl}),(0,o.jsx)("div",{className:tb,children:e.title})]})}const ib="_toggleButton_1xl5v_1",ob="_stepList_1xl5v_6",sb="_step_1xl5v_6",ab="_animatedStep_1xl5v_44",lb="_animatedStepText_1xl5v_52";function cb({message:e}){const t="final"===e.kind,[n,r]=(0,s.useState)(t);(0,s.useEffect)((()=>{r(t)}),[t]);const i=n?"Show thought process":"Hide thought process";if(!("thinking"!==e.kind&&e.planning&&e.planning.length>0))return null;if("final"===e.kind)return(0,o.jsxs)(C.k,{gap:3,direction:"column",children:[(0,o.jsxs)(A.z,{size:"small",variant:"tertiary",onClick:()=>{r(!n)},className:ib,children:[i,(0,o.jsx)(S.J,{icon:n?J.uH:J.p8,accessibilityLabel:i,size:"small"})]}),!n&&(0,o.jsx)("ul",{className:ob,children:e.planning.map(((e,t)=>(0,o.jsx)("li",{className:sb,children:e.title},`index-${t}`)))})]});const a=e.planning[e.planning.length-1];return(0,o.jsx)(C.k,{gap:3,direction:"column",children:(0,o.jsx)("div",{className:ab,children:(0,o.jsx)(w.x,{as:"span",variant:"text-small",className:lb,children:a.title})},a.title)})}function ub(e){const{message:t,capabilities:n,isMostRecentMessage:r,externalContentPartHandler:i}=e,s="final"!==t.kind&&!t.stopped,a="thinking"!==t.kind?t.sources:void 0;return(0,o.jsx)(Gp,{id:"RenderedResponse",fallback:(0,o.jsx)(J.Tv,{content:"Part of the message cannot be displayed"}),children:(0,o.jsxs)(C.k,{direction:"column",gap:2,children:[(0,o.jsx)(cb,{message:t}),(0,o.jsxs)("div",{children:[(0,o.jsx)(Kx,{message:t,isStreaming:s,capabilities:n,isMostRecentMessage:r,externalContentPartHandler:i}),(0,o.jsx)(nb,{sources:a})]}),(0,o.jsx)(Xv,{message:t})]})})}const db="_assistantChatMessage_525qj_1",hb=s.forwardRef(((e,t)=>{const{message:n,isMostRecentMessage:r,capabilities:i}=e;return(0,o.jsx)(Gp,{id:"AssistantChatMessage",fallback:(0,o.jsx)(J.Tv,{title:"Something went wrong",content:"Message cannot be displayed."}),children:(0,o.jsx)(Gm,{debugInfo:n.debugInfo,debugTitle:"Raw Response Message",children:(0,o.jsx)(O.x,{className:db,"data-testid":"AssistantChatMessage","aria-live":"polite",ref:t,children:"thinking"!==n.kind||n.stopped?(0,o.jsx)(ub,{externalContentPartHandler:e.externalContentPartHandler,message:n,capabilities:i,isMostRecentMessage:r}):(0,o.jsx)(qm,{})})})})}));hb.displayName="AssistantChatMessage";const gb="_scrollToBottomButton_hi5xi_1",fb="_scrollToBottomButtonHidden_hi5xi_27",pb=s.forwardRef(((e,t)=>{const{children:n,className:r,padding:i=3,gap:a=6,disableAutoScroll:l=!1}=e,[c,u]=s.useState(!1),d=s.useRef(0),h=s.useRef(!1),g=s.useRef(null),f=s.useCallback((()=>{var e;l||h.current?u(!!g.current&&vb(g.current)):null==(e=g.current)||e.scrollTo({top:g.current.scrollHeight,behavior:"smooth"})}),[l]);s.useEffect((()=>{g.current&&u(vb(g.current))}),[]),function(e,t){s.useEffect((()=>{const n=e.current;if(!n)return;const r=new MutationObserver(t);return r.observe(n,{childList:!0,subtree:!0}),()=>{r.disconnect()}}),[e,t])}(g,f),s.useEffect((()=>{const e=e=>{const t=e.target,n=t.scrollTop;h.current=n<d.current,u(vb(t)),d.current=n};return g.current&&g.current.addEventListener("scroll",e),()=>{g.current&&g.current.removeEventListener("scroll",e)}}),[]);return(0,o.jsxs)(C.k,{direction:"column",style:{overflow:"auto",position:"relative"},children:[(0,o.jsx)(C.k,{"data-testid":"gr-auto-scroll-container",direction:"column",padding:i,className:r,gap:a,ref:e=>{t&&("function"==typeof t?t(e):t.current=e),g.current=e},style:{overflow:"auto"},children:n}),(0,o.jsx)(A.z,{className:mb(gb,!c&&fb),variant:"secondary",onClick:()=>{var e;u(!1),h.current=!1,null==(e=g.current)||e.scrollTo({top:g.current.scrollHeight,behavior:"smooth"})},"aria-label":"Scroll to the bottom",children:(0,o.jsx)(J.Hf,{accessibilityLabel:""})})]})}));function mb(...e){return e.filter(Boolean).join(" ")}pb.displayName="AutoScrollContainer";function vb(e){return e.scrollTop+e.clientHeight<e.scrollHeight-50}function xb(e){return"assistant"===(null==e?void 0:e.type)&&"thinking"===(null==e?void 0:e.kind)}const bb="_chatAutoScrollContainer_8g5xr_1",yb=({children:e,mostRecentMessage:t,mostRecentAssistantMessageRef:n})=>{const r=(0,J.VL)("chatAutoScrollContainer"),i=(({ref:e,mostRecentAssistantMessageRef:t,mostRecentMessage:n})=>{const[r,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(!t.current||!e.current)return;if(xb(n))return void i(!1);const r=new IntersectionObserver((([t])=>{if(!e.current)return;const n=t.boundingClientRect.top<=100;i(n)}),{root:e.current,threshold:[.85,.9,.95,1],rootMargin:"0px"});return r.observe(t.current),()=>{r.disconnect()}}),[e,t,n]),r})({ref:r,mostRecentAssistantMessageRef:n,mostRecentMessage:t});return(0,s.useEffect)((()=>{const e=xb(t);r.current&&e&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})}),[r,t]),(0,o.jsx)(pb,{ref:e=>{r.current=e},gap:4,disableAutoScroll:i,className:bb,children:e})};function Cb({onRetry:e,message:t,previousMessage:n}){const{id:r}=xh(),{agentId:i}=lh(),s=Th(Qd.RetryButton,{chatId:r,agentId:i??""});return(0,o.jsx)("div",{"data-testid":"ChatError",children:(0,o.jsx)(Gm,{debugInfo:t.debugInfo,debugTitle:"Raw Error Message",children:(0,o.jsx)(J.Tv,{title:t.title,content:t.content,action:{onClick:e,label:"Retry",accessibilityLabel:`Retry send message "${n}"`,tracking:s}})})})}function wb({accessibilityLabel:e,className:t,height:n,width:r}){return(0,o.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:r??16,height:n??16,viewBox:"0 0 16 16",fill:"none","aria-hidden":""===e,"aria-label":e,children:[(0,o.jsx)("path",{d:"M8.00003 11.9981C10.2092 11.9981 12.0001 10.2072 12.0001 7.99807C12.0001 5.78892 10.2092 3.99805 8.00003 3.99805C5.79087 3.99805 4 5.78892 4 7.99807C4 10.2072 5.79087 11.9981 8.00003 11.9981Z",fill:"white"}),(0,o.jsx)("path",{d:"M7.99988 4.00004H14.927C14.2251 2.78383 13.2153 1.77386 11.9992 1.07169C10.7831 0.369521 9.40359 -9.79574e-05 7.99935 1.94734e-08C6.59511 9.79964e-05 5.21564 0.369909 3.99966 1.07225C2.78367 1.77459 1.77404 2.7847 1.07227 4.00101L4.53582 10.0001L4.53892 9.99928C4.18659 9.3917 4.00065 8.70197 3.99986 7.99962C3.99907 7.29727 4.18346 6.60713 4.53443 5.99876C4.88539 5.39038 5.39054 4.88529 5.99895 4.53439C6.60736 4.18348 7.29753 3.99918 7.99988 4.00004Z",fill:"url(#paint0_linear_5622_4937)"}),(0,o.jsx)("path",{d:"M8.00018 11.1664C9.7491 11.1664 11.1669 9.74861 11.1669 7.9997C11.1669 6.25078 9.7491 4.83301 8.00018 4.83301C6.25127 4.83301 4.8335 6.25078 4.8335 7.9997C4.8335 9.74861 6.25127 11.1664 8.00018 11.1664Z",fill:"#1A73E8"}),(0,o.jsx)("path",{d:"M11.464 10.0009L8.00046 16C9.40469 16.0002 10.7842 15.6307 12.0004 14.9286C13.2165 14.2265 14.2263 13.2166 14.9284 12.0005C15.6304 10.7843 15.9999 9.40478 15.9996 8.00054C15.9994 6.5963 15.6294 5.21688 14.9269 4.00098H7.99986L7.99902 4.00408C8.70137 4.00272 9.39167 4.18655 10.0003 4.53704C10.609 4.88753 11.1145 5.39228 11.4659 6.00042C11.8172 6.60855 12.0021 7.29858 12.0018 8.00093C12.0014 8.70328 11.816 9.39314 11.464 10.0009Z",fill:"url(#paint1_linear_5622_4937)"}),(0,o.jsx)("path",{d:"M4.53616 10.001L1.0726 4.00195C0.370305 5.21796 0.000540619 6.59744 0.000488287 8.00168C0.000435955 9.40592 0.370098 10.7854 1.0723 12.0015C1.77451 13.2175 2.78451 14.2273 4.00074 14.9292C5.21698 15.6311 6.59657 16.0004 8.00082 16L11.4644 10.001L11.4621 9.99869C11.1121 10.6076 10.6078 11.1135 9.99991 11.4654C9.39205 11.8172 8.70217 12.0026 7.99982 12.0028C7.29747 12.0031 6.60747 11.8182 5.99938 11.4667C5.39128 11.1153 4.88658 10.6097 4.53616 10.001Z",fill:"url(#paint2_linear_5622_4937)"}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{id:"paint0_linear_5622_4937",x1:"1.07227",y1:"5.00005",x2:"14.927",y2:"5.00005",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#D93025"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#EA4335"})]}),(0,o.jsxs)("linearGradient",{id:"paint1_linear_5622_4937",x1:"6.90752",y1:"15.8931",x2:"13.8349",y2:"3.89451",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#FCC934"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#FBBC04"})]}),(0,o.jsxs)("linearGradient",{id:"paint2_linear_5622_4937",x1:"8.86602",y1:"15.5005",x2:"1.93864",y2:"3.50195",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#1E8E3E"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#34A853"})]})]})]})}function kb({accessibilityLabel:e,className:t,width:n=18,height:r=18}){return(0,o.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:r,viewBox:"0 0 18 18",fill:"none","aria-hidden":""===e,"aria-label":e,children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 16.5H13.5C15.1569 16.5 16.5 15.1569 16.5 13.5V11.25H15V13.5C15 14.3284 14.3284 15 13.5 15H11.25V16.5ZM3 11.25V13.5C3 14.3284 3.67157 15 4.5 15H6.75V16.5H4.5C2.84315 16.5 1.5 15.1569 1.5 13.5V11.25H3ZM6.75 3H4.5C3.67157 3 3 3.67157 3 4.5V6.75H1.5V4.5C1.5 2.84315 2.84315 1.5 4.5 1.5H6.75V3ZM15 6.75V4.5C15 3.67157 14.3284 3 13.5 3H11.25V1.5H13.5C15.1569 1.5 16.5 2.84315 16.5 4.5V6.75H15Z",fill:"var(--color-icon-base-default, #707070)"}),(0,o.jsx)("path",{d:"M5.625 7.125H9L12.375 7.125",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5"}),(0,o.jsx)("path",{d:"M5.625 10.875H9L10.875 10.875",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5"})]})}function Sb(e){const t=function(e){return"kind"in e?e:(0,Di.zE)(e.context)||(0,Di._M)(e.context)?{kind:"selection",className:e.className,height:e.height,width:e.width}:(0,Di.Ot)(e.context)&&e.context.icon?{kind:"icon",iconSrc:e.context.icon.src,className:e.className,height:e.height,width:e.width}:{kind:"fallback",className:e.className,height:e.height,width:e.width}}(e);if("selection"===t.kind)return(0,o.jsx)(kb,{accessibilityLabel:"Selected text context",className:t.className,width:t.width,height:t.height});if("icon"===t.kind&&t.iconSrc){const e=t.iconAlt||"Custom icon for context";return(0,o.jsx)(J.bC,{alt:e,className:t.className,src:t.iconSrc,width:t.width??14,height:t.height??14,errorState:()=>(0,o.jsx)(wb,{accessibilityLabel:e,className:t.className})})}return"fallback"===t.kind?(0,o.jsx)(wb,{accessibilityLabel:"Application context",className:t.className,width:t.width,height:t.height}):null}function Ib(e){return(0,Di.zE)(e)?`"${e}"`:(0,Di._M)(e)?e.selectedText:(0,Di.Ot)(e)?e.title:""}const Eb="_truncateLongText_8pr95_1",Ab="_defaultColor_8pr95_7",jb="_subduedColor_8pr95_11";function Mb(e){const{context:t,className:n,height:r,width:i,iconContainerClassName:s,includeSubtitle:a}=e;if(!t)return null;const l=function(e){return(0,Di._M)(e)||(0,Di.zE)(e)?"Selected text":(0,Di.Ot)(e)?e.origin:null}(t),c=(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"medium",className:Pn(Eb,a?Ab:jb),children:Ib(t)});return(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:2,className:Pn(n,Eb),children:[(0,o.jsx)(C.k,{flex:"0 0 auto",className:s,children:(0,o.jsx)(Sb,{context:t,height:r,width:i})}),a&&l?(0,o.jsxs)(C.k,{direction:"column",className:Eb,children:[c,(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"medium",className:Pn(Eb,jb),children:l})]}):c]})}const _b={attachedContextChip:"_attachedContextChip_1cmb2_1",interactive:"_interactive_1cmb2_16",removeSourceButtonContainer:"_removeSourceButtonContainer_1cmb2_20",removeSourceButton:"_removeSourceButton_1cmb2_20",iconContainer:"_iconContainer_1cmb2_42"};function Rb({context:e,onClear:t}){const n=function(e){return"object"==typeof e&&"kind"in e?e.kind:"selection"}(e),[r,i]=(0,s.useState)(null),a=!!t,{trackingRef:l,trackClicked:c}=Dh(Qd.RemoveContextItemButton,{contextType:n});return(0,o.jsxs)(C.k,{className:Pn(_b.attachedContextChip,a&&_b.interactive),gap:1,children:[(0,o.jsx)(Mb,{context:e,className:_b.attachedContextHint,iconContainerClassName:_b.iconContainer,height:16,width:16,includeSubtitle:!0}),(0,o.jsx)("div",{className:_b.removeSourceButtonContainer,ref:i,children:r&&a&&(0,o.jsx)(F.h,{ref:l,onClick:()=>{c(),t()},size:"small",icon:xi.V,className:_b.removeSourceButton,accessibilityLabel:"Remove",variant:"tertiary",tooltipContentProps:{root:r}})})]})}const Db="_userChatMessage_1bbcw_1";function Tb(e){const{message:t,showAttachedContextHint:n=!0}=e;return(0,o.jsx)(Gm,{debugInfo:t.debugInfo,debugTitle:"Raw User Message",children:(0,o.jsxs)(C.k,{gap:2,direction:"column",children:[t.context&&n?(0,o.jsxs)(C.k,{children:[(0,o.jsx)(C.k,{flex:"1 1 auto"}),(0,o.jsx)(Rb,{context:t.context})]}):null,(0,o.jsx)(O.x,{className:Db,"data-testid":"UserChatMessage",children:(0,o.jsx)(w.x,{as:"span",variant:"text-small",children:t.content})})]})})}function Ob(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(t(r,n))return r}}const Pb=({capabilities:e,externalContentPartHandler:t})=>{const{messages:n,retryMessage:i}=xh(),a=(0,s.useRef)(null),l=n[n.length-1],c=(0,s.useMemo)((()=>{const e=Ob(n,(e=>"assistant"===e.type));return null==e?void 0:e.id}),[n]),u=()=>{i()};return(0,o.jsx)(yb,{mostRecentMessage:l,mostRecentAssistantMessageRef:a,children:n.map(((i,s,l)=>{var d;switch(i.type){case"user":{const e=Ob(l,((e,t)=>(0,Di.Z$)(e)&&t<s)),t=e&&(0,Di.Z$)(e)&&!(0,Di.AA)(e.context,i.context);return(0,o.jsx)(Tb,{message:i,showAttachedContextHint:t},i.id)}case"assistant":return(0,o.jsx)(hb,{externalContentPartHandler:t,message:i,isMostRecentMessage:i.id===c,ref:i.id===c?a:null,capabilities:e},i.id);case"error":return(0,o.jsx)(Cb,{message:i,onRetry:u,previousMessage:null==(d=n[s-1])?void 0:d.content},i.id);case"system":return null;default:(0,r.vE)(i)}}))})},Lb="_chatInput_jtdrq_1";function Nb({contextChip:e,contextSwitcher:t,contextId:n,placeholder:r,selectedContext:i,selectedAgentIds:a,agentSelector:l}){const c=Ih(),{installedAgents:u}=jh(),{stopStreamingResponse:d,messages:h,sendMessage:g,id:f}=xh(),{responseStoppedByUser:p}=bh(),m=c.isFeatureEnabled(Lh.GoBranding),v=c.isFeatureEnabled(Lh.ContextSelectorRedesign),x=s.useRef(null),[b,y]=s.useState(""),w=""!==b.trim(),k=s.useMemo((()=>u.filter((e=>e.hasData))),[u]).length>0,S=t||k,I=h[h.length-1],E=(0,Di.qC)(I),A=()=>{var e;d(),p({chatId:f}),null==(e=x.current)||e.focus()},j=m?"Ask Go":"Ask AI";return(0,o.jsx)(J.xg,{className:v?Lb:void 0,alwaysShowControls:!0,textAreaRef:x,value:b,onSubmit:(e,t)=>{if(!E){const r=((null==a?void 0:a.length)??0)>0,o=n||r?{...r&&{scopedThirdPartyAgentIds:a},...n&&{contextId:n}}:void 0,s=null!=t&&t.includeContext?i:void 0;g(e,o,s),y("")}},onChange:e=>{y(e)},controls:({handleSubmit:e})=>v?(0,o.jsxs)(C.k,{direction:"row",justify:t?"space-between":"end",width:"100%",gap:2,align:"center",children:[(0,o.jsx)(C.k,{direction:"row",align:"center",gap:1,children:t}),(0,o.jsx)(J.TH,{hasValue:w,isProcessing:E,onStop:A,onSubmit:e})]}):(0,o.jsxs)(C.k,{direction:"row",justify:S?"space-between":"end",width:"100%",gap:2,align:"center",children:[S?(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:1,children:[t,k&&l]}):null,(0,o.jsx)(J.TH,{hasValue:w,isProcessing:E,onStop:A,onSubmit:e})]}),contextChip:e,placeholder:r||j})}const Fb=({chatId:e,children:t})=>{const{setActiveChat:n,createNewChat:r}=xh();return function(){const{agentId:e}=lh();if(!e)throw new Error("Agent ID is required to use chat subscription");const{subscribeToChatEvents:t,unsubscribeFromChatEvents:n}=ph((e=>e.chat));(0,s.useEffect)((()=>(t(e),()=>{n(e)})),[t,n,e])}(),function(){const{id:e,messages:t}=xh(),{initialize:n}=Sh(),r=(0,s.useRef)();(0,s.useEffect)((()=>{e!==r.current&&t.length>0&&(n(t),r.current=e)}),[e,t,n])}(),(0,s.useEffect)((()=>{void 0!==e?n(e):r()}),[e,n,r]),t};function Bb(e){return(0,Di.Z$)(e)&&!!e.context}function zb(e){return e.filter(Bb).map((({context:e})=>e))}function Hb(){const{contextSources:e,currentAppId:t,selectedContextSourceIds:n,detachCurrentContext:r,attachContext:i,resetContextSource:o,getCurrentAppContext:s,getSelectedContextId:a}=ph((e=>({contextSources:e.contextExtraction.contextSources,currentAppId:e.contextExtraction.currentAppId,selectedContextSourceIds:e.contextExtraction.selectedContextSourceIds,attachContext:e.contextExtraction.attachContext,detachCurrentContext:e.contextExtraction.detachCurrentContext,resetContextSource:e.contextExtraction.resetContextSource,getCurrentAppContext:e.contextExtraction.getCurrentAppContext,getSelectedContextId:e.contextExtraction.getSelectedContextId}))),l=Ih(),{messages:c}=xh(),u=((e,t,n)=>{const r=t[t.length-1],i=n[r===Rg.default?e:r];return(null==i?void 0:i.type)===Dg.AppContent&&"error"===i.status?null:i||null})(t,n,e),d=a(),h=Tg(u),g=zb(c),f=Object.values(e).filter((e=>{const t=Tg(e)??void 0;return(l.isFeatureEnabled(Lh.ContextSelectorRedesign)||e.id!==(null==u?void 0:u.id))&&g.every((e=>!(0,Di.AA)(e,t)))}));return{currentAppId:t,availableContexts:f,selectedContext:h,selectedContextSource:u,attachContext:i,detachCurrentContext:e=>d&&r(e,d),resetContextSource:o,getCurrentAppContext:s}}function Ub(e){return t=>{const{selectedContext:n,selectedContextSource:r}=Hb(),i=null==r?void 0:r.id;return(0,o.jsx)(e,{...t,contextId:i,selectedContext:n??void 0})}}function $b(e){return t=>{const{id:n,messages:r}=xh(),{selectedContext:i,detachCurrentContext:a}=Hb(),l=0===r.length,c=!!i&&(0,Di.vr)(i),u=(0,s.useMemo)((()=>{if(c)return!1;const e=zb(r).some((e=>(0,Di.AA)(e,i??void 0)));return l||!e}),[l,r,i,c]);return(0,o.jsx)(e,{...t,contextChip:i&&u?(0,o.jsx)(C.k,{align:"center",justify:"start",children:(0,o.jsx)(Rb,{context:i,onClear:()=>{a(n)}})}):null})}}const Wb="_agentIcon_9z4ye_1";function Vb({selectedAgents:e}){const t=Ih().isFeatureEnabled(Lh.ContextSelectorRedesign);if(0===e.length)return t?null:(0,o.jsx)(S.J,{icon:Ai.F,accessibilityLabel:"Select agents"});const n=e.length>=4?2:3,r=e.length-n,i={bgColor:"background-base-default",direction:"row",align:"center",justify:"center",borderRadius:1,borderColor:"base-subdued"};return(0,o.jsxs)(C.k,{direction:"row",children:[e.slice(0,n).map(((e,t)=>(0,o.jsx)(C.k,{className:Wb,marginLeft:0===t?0:-2,style:{zIndex:t},...i,children:e.renderIcon({size:"small"})},e.id))),r>0&&(0,o.jsxs)(C.k,{className:Wb,marginLeft:-2,height:16,width:16,color:"base-default",style:{zIndex:n},...i,children:["+",r]},"remaining")]})}const Gb="_popoverContent_1ccss_1",Zb=({children:e,message:t,trackImpression:n})=>(0,o.jsx)(Rp,{title:"Add a source",content:"Go gets smarter when it knows more. Share what you're working on.",placement:"top-start",onDismiss:t.onDismiss,trackImpression:n,className:Gb,children:e}),qb=({isDisabled:e,hasSelectedContext:t,contextSwitcherWasOpened:n,children:r})=>{const{message:i,trackImpression:a}=Mh(ep.AddDataSourcePopover),{agentId:l,selectedAgentId:c}=lh(),u=l===c,[d,h]=(0,s.useState)(!1),g=(0,s.useCallback)((()=>{h(!0),a()}),[a]),f=!!i,p=!n;return f&&!e&&!t&&p&&u||d&&f&&p&&u?(0,o.jsx)(Zb,{message:i,trackImpression:g,children:r}):r},Kb="_contextSwitcherButton_1gg6x_1",Jb=(0,s.forwardRef)((({isDisabled:e,hasSelectedContext:t,onClick:n,...r},i)=>{const{id:a}=xh(),{trackClicked:l}=Dh(Qd.ContextSwitcherButton,{chatId:a}),[c,u]=(0,s.useState)(!1);return(0,o.jsx)(qb,{isDisabled:e,hasSelectedContext:t,contextSwitcherWasOpened:c,children:(0,o.jsx)(F.h,{...r,ref:i,className:Kb,icon:ji.m,accessibilityLabel:"Add sources to chat",tooltipProps:{children:"Add sources to chat"},variant:"tertiary",isDisabled:e,tooltipContentProps:{children:"Add sources to chat"},onClick:e=>{l(),u(!0),setTimeout((()=>null==n?void 0:n(e)),0)}})})})),Yb="_root_1c6vl_1",Xb="_menuItemIcon_1c6vl_9",Qb="_menuItem_1c6vl_9",ey="_mainMenuItemIcon_1c6vl_24",ty="_contextSwitcherMenu_1c6vl_40",ny="_mainMenuItemIconContainer_1c6vl_44",ry="_agentMenuItemTitleContainer_1c6vl_57",iy="_selectedMenuItemIcon_1c6vl_63",oy="_menuItemTitle_1c6vl_67",sy="_menuItemContainer_1c6vl_73",ay="_connectionsButton_1c6vl_77";function ly(e){const{label:t,subLabel:n,onClick:r,icon:i,isDisabled:s,onMouseDown:a,onKeyDown:l}=e;return(0,o.jsx)(H.v.Item,{onClick:r,isDisabled:s,onMouseDown:a,onKeyDown:l,children:(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:2,children:[(0,o.jsx)(C.k,{flex:"0 0 auto",className:ny,children:(0,o.jsx)(S.J,{className:ey,icon:i,size:"small",accessibilityLabel:`${t} external link`})}),(0,o.jsxs)(C.k,{direction:"column",children:[(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"semibold",color:"base-default",children:t}),(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:n})]})]})},t)}function cy(e){var t,n,i;const{contextSource:a,onClick:l,isSelected:c,onKeyDown:u,onMouseDown:d}=e,{id:h}=xh(),{trackingRef:g,trackClicked:f}=Dh(Qd.ContextOption,{chatId:h,contextType:a.type});let p="fallback";a.type===Dg.AppContent?p=null!=(t=a.context)&&t.icon?"icon":"fallback":a.type===Dg.TextSelection?p="selection":(0,r.vE)(a,`Unknown context source type: ${a.type}`);const m=null==(i=null==(n=a.context)?void 0:n.icon)?void 0:i.src,v=(0,s.useCallback)((()=>(0,o.jsx)(Sb,{kind:p,iconSrc:m,className:Xb})),[p,m]),x=Tg(a);return null===x?null:(0,o.jsx)(H.v.Item,{onClick:()=>{f(),l(a)},icon:v,onMouseDown:d,onKeyDown:u,className:Qb,children:(0,o.jsxs)(C.k,{className:sy,direction:"row",align:"center",gap:1,justify:"space-between",children:[(0,o.jsx)("span",{ref:g,className:oy,children:Ib(x)}),c&&(0,o.jsx)(S.J,{className:iy,size:"small",icon:I.L,accessibilityLabel:"Selected"})]})},a.id)}function uy(e){const{agent:t,isSelected:n,onClick:r,onKeyDown:i,onMouseDown:a}=e,l=(0,s.useCallback)((()=>{r(t)}),[r,t]);return(0,o.jsx)(H.v.Item,{className:Qb,onClick:l,onMouseDown:a,onKeyDown:i,children:(0,o.jsxs)(C.k,{className:sy,direction:"row",align:"center",gap:1,justify:"space-between",children:[(0,o.jsxs)(C.k,{className:ry,flex:"0 1 auto",direction:"row",align:"center",gap:1,children:[t.renderIcon({size:"medium"}),(0,o.jsx)("span",{className:oy,children:t.title})]}),n&&(0,o.jsx)(S.J,{className:iy,size:"small",icon:I.L,accessibilityLabel:"Selected"})]})},t.id)}function dy(e){const{label:t,onClick:n,onMouseDown:r,onKeyDown:i}=e;return(0,o.jsx)(H.v.Item,{onClick:n,onMouseDown:r,onKeyDown:i,children:(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:1,children:[(0,o.jsx)(S.J,{size:"small",icon:B.n,accessibilityLabel:"Back to main menu"}),(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",color:"base-subdued",weight:"normal",children:t})]})},"go-back")}function hy(e){const{agent:t,onConnect:n}=e,r=(0,s.useCallback)((()=>{n(t.id)}),[n,t.id]);return(0,o.jsx)(H.v.Item,{className:Qb,onClick:r,children:(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:1,justify:"space-between",style:{width:"100%"},children:[(0,o.jsxs)(C.k,{flex:"0 1 auto",direction:"row",align:"center",gap:1,children:[(0,o.jsx)(J.J$,{agent:t,size:"medium"}),(0,o.jsx)("span",{children:t.name})]}),(0,o.jsx)(C.k,{flex:"0 0 auto",justify:"end",children:(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",color:"base-subdued",children:"Connect"})})]})},t.id)}const gy=[U.Y4.GoogleCalendar,U.Y4.Gmail,U.Y4.OutlookMail,U.Y4.GoogleDrive,U.Y4.Jira,U.Y4.Confluence];function fy(){const e=gh(),[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0),[o,a]=(0,s.useState)(null);return(0,s.useEffect)((()=>{!async function(){if(e)try{i(!0),a(null);const t=(await e.listAgents({packIds:gy})).items.sort(((e,t)=>gy.indexOf(Number(e.id))-gy.indexOf(Number(t.id))));n(t)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch available agents");a(t),console.error("Error fetching promoted connections:",t)}finally{i(!1)}else i(!1)}()}),[e]),{availableAgents:t,isLoading:r,error:o}}function py(){return{getSubMenuKeyDownHandler:(0,s.useCallback)((e=>t=>{("Enter"===t.key||" "===t.key)&&t.stopPropagation(),"ArrowLeft"===t.key&&(t.stopPropagation(),e())}),[]),getNavigateToSubMenuHandler:(0,s.useCallback)((e=>t=>{("Enter"===t.key||" "===t.key||"ArrowRight"===t.key)&&(t.stopPropagation(),e())}),[]),onMouseDownHandler:(0,s.useCallback)((e=>{e.stopPropagation()}),[])}}function my(e){const{resetMenu:t,isAgentSelected:n,handleSelectAgent:r,handleAddAgentClick:i,installedAgentsWithData:s}=e,{onMouseDownHandler:a,getSubMenuKeyDownHandler:l}=py(),{availableAgents:c}=fy(),u=l(t),d=s.length>0;return(0,o.jsxs)(H.v.Section,{label:"Use connections",labelDisplay:"hidden",children:[(0,o.jsx)(dy,{label:"Use connections",onClick:t,onMouseDown:a,onKeyDown:u},"go-back-from-agent-menu"),d?s.map((e=>(0,o.jsx)(uy,{agent:e,isSelected:n(e),onClick:r,onKeyDown:u,onMouseDown:e=>e.stopPropagation()},e.id))):c.map((e=>(0,o.jsx)(hy,{agent:e,onConnect:i},e.id)))]})}function vy(e){const{selectedContext:t,resetMenu:n,remainingContextSources:r,textSelectionContextSources:i,onContextSelect:a,hasAppContentContextSources:l,hasTextSelectionContextSources:c}=e,{onMouseDownHandler:u,getSubMenuKeyDownHandler:d}=py(),h=d(n),g=(0,s.useCallback)((e=>!!t&&e.id===t.id),[t]),f=(0,s.useCallback)((e=>{t&&e.id===t.id?a(null):a(e)}),[t,a]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(H.v.Section,{label:"Select a tab",labelDisplay:"hidden",children:[(0,o.jsx)(dy,{label:"Select a tab",onClick:n,onMouseDown:u,onKeyDown:h},"go-back-from-app-menu"),r.map((e=>(0,o.jsx)(cy,{contextSource:e,onClick:f,isSelected:g(e),onKeyDown:h,onMouseDown:u},e.id)))]}),l&&c&&(0,o.jsx)(H.v.Separator,{}),i.map((e=>(0,o.jsx)(cy,{contextSource:e,onClick:f,isSelected:g(e),onKeyDown:h,onMouseDown:u},e.id)))]})}function xy(e){const{isAgentSelected:t,handleSelectAgent:n,handleAddAgentClick:r,installedAgentsWithData:i}=e,{availableAgents:s}=fy(),a=i.length>0;return(0,o.jsx)(H.v.Section,{label:"Use connections",children:a?i.map((e=>(0,o.jsx)(uy,{agent:e,isSelected:t(e),onClick:n,onKeyDown:J.ZT,onMouseDown:e=>e.stopPropagation()},e.id))):s.map((e=>(0,o.jsx)(hy,{agent:e,onConnect:r},e.id)))})}function by(e){const{isContextMenuDisabled:t,setMenuType:n,enableAgentConnections:r=!0}=e,{getNavigateToSubMenuHandler:i,onMouseDownHandler:a}=py(),l=(0,s.useCallback)((()=>{n("app")}),[n]),c=(0,s.useCallback)((()=>{n("agent")}),[n]),u=i(l),d=i(c);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(H.v.Section,{label:"Add sources to chat",children:(0,o.jsx)(ly,{icon:J.n9,label:"Select a tab",subLabel:"Ask about an open website",onClick:l,onMouseDown:a,onKeyDown:u,isDisabled:t})},"add-sources-to-chat"),r&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(H.v.Separator,{},"separator"),(0,o.jsx)(H.v.Section,{label:"Use connections",labelDisplay:"hidden",children:(0,o.jsx)(ly,{icon:J.d$,label:"Use connections",subLabel:"Work with info from other apps",onClick:c,onMouseDown:a,onKeyDown:d})},"agent-sources")]})]})}const yy=8;function Cy(e){const{availableContexts:t,onContextSelect:n,maxContexts:r=yy,selectedContext:i,selectedAgents:a,onAgentSelect:l,enableAgentConnections:c=!0}=e,u=Ih(),[d,h]=(0,s.useState)("main"),{installedAgents:g}=jh(),f=gh(),p=u.isFeatureEnabled(Lh.ContextSelectorRedesign),m=(0,s.useRef)(null),v=(0,s.useMemo)((()=>g.filter((e=>e.hasData))),[g]),x=(0,s.useCallback)((e=>{m.current={viewType:e?U.Gk.AgentProfile:U.Gk.Directory,agentId:e}}),[]),b=(0,s.useCallback)((()=>{h("main")}),[]),y=(0,s.useCallback)((()=>{if(b(),m.current&&f){const{agentId:e}=m.current;e?f.requestDeeplink({viewType:U.Gk.AgentProfile,agentId:e}):f.requestDeeplink({viewType:U.Gk.Directory}),m.current=null}}),[b,f]),k=(0,s.useCallback)((e=>{a.includes(e)?l((t=>t.filter((t=>t.id!==e.id)))):l((t=>[...t,e]))}),[a,l]),S=(0,s.useCallback)((e=>a.some((t=>t.id===e.id))),[a]),I=Math.max(Math.min(r,yy),1),E=t.filter(Og).sort(((e,t)=>t.lastUpdated.getTime()-e.lastUpdated.getTime())).slice(0,I),A=t.filter(Ng),j=E.length>0,M=A.length>0,_=!j&&!M,R=(0,o.jsx)(Jb,{isDisabled:_,hasSelectedContext:!!i}),D=(0,s.useMemo)((()=>{switch(d){case"main":return(0,o.jsx)(by,{isContextMenuDisabled:!j&&!M,setMenuType:h,enableAgentConnections:c});case"app":return(0,o.jsx)(vy,{selectedContext:i,resetMenu:b,remainingContextSources:E,textSelectionContextSources:A,onContextSelect:n,hasAppContentContextSources:j,hasTextSelectionContextSources:M});case"agent":return(0,o.jsx)(my,{resetMenu:b,isAgentSelected:S,handleSelectAgent:k,installedAgentsWithData:v,handleAddAgentClick:x})}}),[c,x,k,j,M,v,S,d,n,E,b,i,A]);if(p){const e=(0,o.jsx)(Jb,{isDisabled:_,hasSelectedContext:!!i}),t=1===a.length?"Connection":"Connections",n=(0,o.jsxs)("button",{type:"button",className:ay,"aria-label":`Use ${t.toLowerCase()}`,"aria-labelledby":void 0,children:[(0,o.jsx)(Vb,{selectedAgents:a}),(0,o.jsx)(w.x,{as:"span",variant:"text-xsmall",weight:"semibold",color:"base-subdued",children:t})]}),r=(0,o.jsx)(xy,{isAgentSelected:S,handleSelectAgent:k,installedAgentsWithData:v,handleAddAgentClick:x});return(0,o.jsxs)(C.k,{direction:"row",align:"center",justify:"start",gap:1,children:[(0,o.jsx)(H.v,{className:Yb,activator:e,onClose:y,children:(0,o.jsx)(C.k,{className:ty,direction:"column",children:D})}),c&&a.length>0&&(0,o.jsx)(H.v,{className:Yb,activator:n,onClose:b,children:(0,o.jsx)(C.k,{className:ty,direction:"column",children:r})})]})}return(0,o.jsx)(H.v,{className:Yb,activator:R,children:(0,o.jsxs)(C.k,{className:ty,direction:"column",children:[(0,o.jsx)(H.v.Section,{label:"Work with",children:E.map(((e,t)=>(0,o.jsx)(wy,{contextSource:e,onClick:n},t)))}),j&&M&&(0,o.jsx)(H.v.Separator,{}),A.map(((e,t)=>(0,o.jsx)(wy,{contextSource:e,onClick:n},t)))]})})}function wy(e){var t,n,i;const{contextSource:a,onClick:l}=e,{id:c}=xh(),{trackingRef:u,trackClicked:d}=Dh(Qd.ContextOption,{chatId:c,contextType:a.type});let h="fallback";a.type===Dg.AppContent?h=null!=(t=a.context)&&t.icon?"icon":"fallback":a.type===Dg.TextSelection?h="selection":(0,r.vE)(a,`Unknown context source type: ${a.type}`);const g=null==(i=null==(n=a.context)?void 0:n.icon)?void 0:i.src,f=(0,s.useCallback)((()=>(0,o.jsx)(Sb,{kind:h,iconSrc:g,className:Xb})),[h,g]),p=Tg(a);return null===p?null:(0,o.jsx)(H.v.Item,{onClick:()=>{d(),l(a)},icon:f,children:(0,o.jsx)("span",{ref:u,children:Ib(p)})},a.id)}function ky(e){const t=[];for(const n of e)try{t.push((0,U.Oo)(n.id))}catch{}return t}function Sy(e){return t=>{const n=Ih().isFeatureEnabled(Lh.ContextSelectorRedesign),[r,i]=(0,s.useState)([]),{id:a}=xh(),{agentId:l}=lh(),{availableContexts:c,selectedContext:u,selectedContextSource:d,attachContext:h,detachCurrentContext:g}=Hb(),f=!!u&&(0,Di.vr)(u),p="chat"===l,m=(0,s.useMemo)((()=>ky(r)),[r]);return(0,o.jsx)(e,{...t,contextSwitcher:!f&&(0,o.jsx)(Cy,{onContextSelect:e=>{e?n&&e.id===(null==d?void 0:d.id)?g(a):h(a,e.id):g(a)},availableContexts:c,selectedContext:d,selectedAgents:r,onAgentSelect:i,enableAgentConnections:p}),selectedAgentIds:m})}}const Iy=e=>t=>{const n=(()=>{var e;const t=Hm(Um.ChatInputUphookSlot),{messages:n}=xh(),r=0===n.length,{commandExecutor:i}=lh(),{trackClicked:o}=Dh(Qd.ChatInputUphookSecondaryCta,{agentId:"success"===t.status?null==(e=t.data)?void 0:e.value.secondaryCtaTargetAgentId:""}),a=(0,s.useCallback)((()=>{var e;"success"===t.status&&null!=(e=t.data)&&e.value.secondaryCtaTargetAgentId&&(o(),null==i||i.execute({kind:th.OpenAgent,agentId:t.data.value.secondaryCtaTargetAgentId}))}),[i,t,o]);if(r)return{visibilityStatus:"hidden"};if("loading"===t.status)return{visibilityStatus:"loading"};if("success"===t.status&&t.data){const e=t.data;return{visibilityStatus:"visible",data:{...e.value,onClick:e.onClick,onShow:e.onShow,onSecondaryCtaClick:a}}}return{visibilityStatus:"hidden"}})();return(0,o.jsx)(J.v8,{uphook:n,children:(0,o.jsx)(e,{...t})})},Ey="_menu_10z3n_1";function Ay({onChange:e,selectedAgents:t}){const{installedAgents:n}=jh(),r=gh(),i=(0,s.useCallback)((n=>{t.includes(n)?e((e=>e.filter((e=>e.id!==n.id)))):e((e=>[...e,n]))}),[t,e]),a=(0,s.useCallback)((e=>t.some((t=>t.id===e.id))),[t]),l=(0,s.useCallback)((()=>{r&&r.requestDeeplink({viewType:U.Gk.Directory})}),[r]),c=(0,s.useMemo)((()=>n.filter((e=>e.hasData))),[n]);return(0,o.jsxs)(H.v,{className:Ey,activator:(0,o.jsx)(A.z,{variant:"tertiary",size:"small",children:(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:2,borderRadius:1,children:[(0,o.jsx)(Vb,{selectedAgents:t}),"Agent data"]})}),children:[c.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(H.v.Section,{label:"Work with agent data",children:c.map((e=>(0,o.jsx)(H.v.Item,{onClick:()=>i(e),children:(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:1,justify:"space-between",children:[(0,o.jsxs)(C.k,{direction:"row",align:"center",gap:1,children:[e.renderIcon({size:"medium"}),(0,o.jsx)("span",{children:e.title})]}),a(e)&&(0,o.jsx)(S.J,{size:"small",icon:I.L,accessibilityLabel:"Selected"})]})},e.id)))}),(0,o.jsx)(H.v.Separator,{})," "]}):null,(0,o.jsx)(H.v.Item,{icon:ji.m,onClick:l,children:(0,o.jsx)("span",{children:"Add agent"})},"add-agent")]})}function jy(e){return t=>{const[n,r]=(0,s.useState)([]),i=(0,o.jsx)(Ay,{onChange:r,selectedAgents:n}),a=(0,s.useMemo)((()=>ky(n)),[n]);return(0,o.jsx)(e,{...t,agentSelector:i,selectedAgentIds:a})}}function My(){var e;return null==(e=(0,s.useContext)(hh))?void 0:e.experimental_recommendedActions}},70468:(e,t,n)=>{if(n.d(t,{c:()=>i}),6168==n.j)var r=n(64021);function i(e){let[t,n]=(0,r.z)(o(e.value),o(e.defaultValue)||"",e.onChange);return{value:t,setValue:n}}function o(e){if(null!=e)return e.toString()}},17825:(e,t,n)=>{if(n.d(t,{l:()=>i}),6168==n.j)var r=n(64021);function i(e={}){let{isReadOnly:t}=e,[n,i]=(0,r.z)(e.isSelected,e.defaultSelected||!1,e.onChange);return{isSelected:n,setSelected:function(e){t||i(e)},toggle:function(){t||i(!n)}}}},53888:(e,t,n)=>{n.d(t,{XZ:()=>h});var r=n(92379);if(6168==n.j)var i=n(53486);if(6168==n.j)var o=n(89925);if(6168==n.j)var s=n(17825);if(6168==n.j)var a=n(78028);if(6168==n.j)var l=n(69141);if(6168==n.j)var c=n(96175);if(6168==n.j)var u=n(14026);if(6168==n.j)var d=n(47797);const h=6168==n.j?r.forwardRef((function(e,t){var n;const{helperMessage:d,labelDisplay:h="visible",errorMessage:f,isOptional:p,isRequired:m,labelIndicatorForRequired:v="(Required)",labelIndicatorForOptional:x="(Optional)",className:b,style:y,size:C="medium"}=e,w=(0,i.Me)(e.id),k=(0,i.Me)(),S=(0,s.l)(e),I=(0,i.B3)(t),{inputProps:E}=(0,a.O)({...e,validationState:null!=e.errorMessage?"invalid":"valid"},S,I),[A,j]=r.useState(!1),M=!0===e.isDisabled,_=!0===e.isIndeterminate,R=null!=d?k:void 0,D={labelDisplay:h,isDisabled:M,isSelected:S.isSelected||_,isIndeterminate:_,errorMessage:f,size:C};return r.createElement("div",{className:(0,o.W)("gds-checkbox",`gds-checkbox-${C}`,A&&"gds-checkbox-focus-visible",M&&"gds-checkbox-disabled")},r.createElement(l.A,{label:e.children,labelDisplay:h,htmlFor:w,helperMessage:d,errorMessage:f,isOptional:p,isRequired:m,labelIndicatorForOptional:x,labelIndicatorForRequired:v,size:C},r.createElement(u.u,{style:{width:24,height:24}},r.createElement("input",{...null!=(n=e.__inputProps)?n:E,onFocus:()=>j(!0),onBlur:()=>j(!1),id:w,ref:I,tabIndex:M?-1:0,"aria-describedby":null!=R?R:E["aria-describedby"],className:(0,o.W)("gds-checkbox-input",`gds-checkbox-input-${C}`,b),style:y})),r.createElement(g,{...D})),r.createElement(c.f,{size:C,errorMessage:f,className:"gds-checkbox-label-margin"}))})):null,g=e=>{const{labelDisplay:t,isDisabled:n,isSelected:i,isIndeterminate:s,errorMessage:a,size:l="medium"}=e,c=null!=a?d.I.Border.Critical.Default:d.I.Border.Base.Default;return r.createElement("svg",{className:(0,o.W)("gds-checkbox-icon",`gds-checkbox-icon-${l}`,"visible"===t&&"gds-checkbox-icon-label",n&&"gds-checkbox-element-disabled"),viewBox:"0 0 16 16","aria-hidden":"true",style:{backgroundColor:i?d.I.Background.Interactive.Default:void 0,border:`1px solid ${i?d.I.Background.Interactive.Default:c}`}},i&&!s&&r.createElement("path",{transform:"translate(2 4)",strokeWidth:0,fill:"var(--color-icon-base-inverse)",d:"M11.7071 1.41421L4.49995 8.62132L0.292847 4.41421L1.70706 3L4.49995 5.79289L10.2928 0L11.7071 1.41421Z"}),s&&r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",transform:"translate(2.5 7)",d:"M10.5 2H0.5V0H10.5V2Z",fill:"white"}))}},11182:(e,t,n)=>{n.d(t,{U:()=>g});var r=n(92379);if(6168==n.j)var i=n(89925);if(6168==n.j)var o=n(7061);if(6168==n.j)var s=n(70468);if(6168==n.j)var a=n(75821);if(6168==n.j)var l=n(95432);if(6168==n.j)var c=n(38985);if(6168==n.j)var u=n(21742);if(6168==n.j)var d=n(69141);if(6168==n.j)var h=n(64995);const g=6168==n.j?r.forwardRef((function(e,t){const{labelDisplay:n="hidden",accessibilityLabelClearButton:u="Clear search",className:g,label:p,placeholder:m,onClear:v,style:x,size:b="medium"}=e,y=(0,s.c)(e),C=r.useRef(null);r.useImperativeHandle(t,(()=>C.current));const{labelProps:w,inputProps:k,clearButtonProps:S}=(0,a.t)(e,y,C);(0,o.j)(k,e);const I={...S,excludeFromTabOrder:!1,"aria-label":u,onKeyDown:e=>{var t;"Enter"!==e.key&&"Space"!==e.key||(y.setValue(""),null==(t=C.current)||t.focus(),null==v||v())}};return r.createElement("div",{className:(0,i.W)("gds-text-field",`gds-text-field-${b}`)},r.createElement(d.A,{label:p,labelDisplay:n,...w,size:b}),r.createElement("div",{className:"gds-text-field-container"},r.createElement("div",{className:"gds-text-field-icon-start"},r.createElement(h.J,{icon:l.D,accessibilityLabel:""})),r.createElement("input",{ref:C,className:(0,i.W)("gds-text-field-input",g),...k,placeholder:m,spellCheck:!1,style:x}),""!==y.value&&r.createElement(f,{...I},r.createElement(h.J,{icon:c.L,accessibilityLabel:"",size:"medium"===b?"small":"medium"}))))})):null,f=e=>{const t=r.useRef(null),{buttonProps:n}=(0,u.U)(e,t);return r.createElement("button",{...n,ref:t},e.children)}},17940:(e,t,n)=>{n.d(t,{P:()=>h});var r=n(92379),i=n(89925),o=n(13221);var s=n(53486),a=n(45580),l=n(69141),c=n(64995),u=n(96175);const d=r.forwardRef((function(e,t){const n=(0,s.Me)(e.id),{label:o,labelIndicatorForOptional:d,labelIndicatorForRequired:h,labelDisplay:g="visible",errorMessage:f,helperMessage:p,isOptional:m,isRequired:v,isDisabled:x,className:b,onChange:y,...C}=e;return r.createElement("div",{className:"gds-select"},r.createElement(l.A,{label:o,labelDisplay:g,htmlFor:n,className:"gds-select-label",helperMessage:p,errorMessage:f,isOptional:m,isRequired:v,labelIndicatorForOptional:d,labelIndicatorForRequired:h}),r.createElement("div",{className:"gds-select-container"},r.createElement("select",{ref:t,id:n,className:(0,i.W)("gds-select-inner",b),disabled:x,required:v,"aria-invalid":null!=f?Boolean(f):void 0,onChange:null!=y?e=>y(e.target.value):void 0,...C}),r.createElement(c.J,{accessibilityLabel:"",icon:a.b,size:"small",className:"gds-select-icon"})),r.createElement(u.f,{errorMessage:f}))})),h=(0,o.o)(d,"Select",{Option:e=>r.createElement("option",{...e})})},55711:(e,t,n)=>{n.d(t,{r:()=>h});var r=n(92379);if(6168==n.j)var i=n(53486);var o=n(89925);if(6168==n.j)var s=n(99586);if(6168==n.j)var a=n(23878);if(6168==n.j)var l=n(14026);if(6168==n.j)var c=n(31127);if(6168==n.j)var u=n(56765);var d=n(47797);const h=6168==n.j?r.forwardRef((function(e,t){const{label:n,labelDisplay:o="left",isSelected:s,defaultSelected:l,helperMessage:c,isDisabled:u,onChange:d,size:h="medium",id:g,...f}=e,m=(0,i.Me)(),x=g||m,b=(0,i.B3)(t),y=void 0!==s,[C,w]=r.useState(l||!1);r.useEffect((()=>{y&&w(s)}),[s,y]);const k=(0,a.T)(),S=(0,i.Me)(),I=c?S:void 0;return r.createElement("div",{className:"gds-switch","data-disabled":u,"data-label-display":o},r.createElement(p,{label:n,labelDisplay:o,helperMessage:c,helperMessageId:I,inputId:x,size:h}),r.createElement(v,{label:e.label,labelDisplay:o,ref:b,size:h,isDisabled:e.isDisabled,isSelected:C,onChange:function(e){const t=e.target.checked;y||w(t),d&&d(t)},prefersReducedMotion:k,maybeHelperId:I,inputProps:{id:x,...f}}))})):null,g={small:"text-xsmall",medium:"text-small",large:"text-medium",xlarge:"text-large"},f={small:"text-xsmall",medium:"text-xsmall",large:"text-small",xlarge:"text-medium"};function p({label:e,labelDisplay:t,inputId:n,helperMessage:i,helperMessageId:o,size:a}){if("hidden"===t)return r.createElement(l.u,null,r.createElement("label",{htmlFor:n},r.createElement(c.x,{as:"span"},e)),i&&r.createElement(c.x,{as:"p",id:o},i));let d;return"top"===t?d="1 1 100%":"left"===t||"right"===t?d="1 1 auto":(0,s.v)(t),r.createElement(u.k,{direction:"column",gap:1,flex:d},r.createElement("label",{htmlFor:n,className:"gds-switch-label"},r.createElement(c.x,{as:"span",variant:g[a],weight:"medium"},e)),i&&r.createElement(c.x,{as:"p",id:o,variant:f[a],color:"base-subdued"},i))}const m={small:{height:18,width:34,selectedKnobRadius:7,deselectedKnobRadius:5,rectRadius:10,checkmarkScale:.75,checkmarkTranslation:"27 6.5"},medium:{height:21,width:40,selectedKnobRadius:8,deselectedKnobRadius:6,rectRadius:10.5,checkmarkScale:1,checkmarkTranslation:"24 5"},large:{height:24,width:44,selectedKnobRadius:9,deselectedKnobRadius:7,rectRadius:14,checkmarkScale:1.2,checkmarkTranslation:"21.5 4.5"},xlarge:{height:32,width:60,selectedKnobRadius:12,deselectedKnobRadius:10,rectRadius:16,checkmarkScale:1.5,checkmarkTranslation:"25 5.5"}},v=r.forwardRef((function({isDisabled:e,isSelected:t,maybeHelperId:n,prefersReducedMotion:i,size:s,onChange:a,inputProps:{className:l,"aria-describedby":c,tabIndex:u=0,...h}},g){return r.createElement("div",{"data-size":s},r.createElement("input",{...h,tabIndex:u,role:"switch",ref:g,className:(0,o.W)("gds-switch-input",l),"aria-describedby":n&&c?`${c} ${n}`:c||n,value:t?"on":"off",type:"checkbox",onChange:a,checked:t,disabled:e,"data-size":s}),r.createElement("svg",{width:m[s].width+2,height:m[s].height+2,"aria-hidden":"true",className:"gds-switch-indicator"},r.createElement("rect",{x:1,y:1,width:m[s].width,height:m[s].height,rx:m[s].rectRadius,stroke:t?d.I.Border.Interactive.Default:d.I.Border.Base.Default,strokeWidth:"1",fill:t?d.I.Background.Interactive.Default:d.I.Background.Base.Subdued,className:(0,o.W)(!i&&"gds-switch-animation")}),r.createElement("circle",{cx:t?m[s].width-m[s].selectedKnobRadius-2:2*m[s].deselectedKnobRadius,cy:(m[s].height+2)/2,r:t?m[s].selectedKnobRadius:m[s].deselectedKnobRadius,fill:t?d.I.Background.Base.Default:d.I.Background.Neutral.Default,className:(0,o.W)(!i&&"gds-switch-animation")}),r.createElement("path",{transform:`scale(${m[s].checkmarkScale}) translate(${m[s].checkmarkTranslation})`,opacity:t?"100":"0",fill:"none",d:"M1.5 6.83333L4.26923 9.5L10.5 3.5",stroke:d.I.Icon.Interactive.Default,strokeWidth:"1.5",strokeLinecap:"round",className:(0,o.W)(!i&&"gds-switch-check-animation-turning-"+(t?"on":"off"))})))}))},28698:(e,t,n)=>{n.d(t,{m:()=>b});var r=n(92379),i=n(53486),o=n(89925),s=n(13221);const a=()=>{};var l=n(44155),c=n(14278),u=n(31127),d=n(3664),h=n(56765);const g=r.createContext({selectedTab:"",setSelectedTab(){},focusedTab:"",setFocusedTab(){},onChangeHandler(){},tabIds:[""],size:"medium"}),f=e=>`gds-tab-${e}`,p=e=>`gds-tab-panel-${e}`;const m=r.forwardRef((function(e,t){const{bottomBorder:n="default",width:s}=e,u=(0,i.B3)(t),f=r.useRef(null),{hasHiddenLeftContent:p,hasHiddenRightContent:m}=(e=>{const[t,n]=r.useState(!1),[i,o]=r.useState(!1),s=r.useCallback((()=>{const t=e.current;null!==t&&(n(!(t.scrollLeft+t.clientWidth>=t.scrollWidth)),o(t.scrollLeft>0))}),[]);return r.useEffect((()=>{if("undefined"!=typeof self&&void 0!==self.ResizeObserver){const t=new ResizeObserver(s);return null!==e.current&&t.observe(e.current),()=>{t.disconnect()}}return a}),[e,s]),r.useEffect((()=>{var t;return"undefined"!=typeof self&&void 0!==self?(null==(t=e.current)||t.addEventListener("scroll",s),()=>{var t;null==(t=e.current)||t.removeEventListener("scroll",s)}):a}),[e]),r.useEffect((()=>{s()}),[s]),{hasHiddenRightContent:t,hasHiddenLeftContent:i}})(f),{setSelectedTab:v,setFocusedTab:x,onChangeHandler:b,focusedTab:y,tabIds:C,size:w}=r.useContext(g),[k,S]=r.useState(!1),[I,E]=r.useState(!1);return r.useEffect((()=>{S(m),E(p)}),[k,I,p,m]),r.createElement("div",{ref:u,role:"tablist","aria-orientation":"horizontal","aria-label":e.accessibilityLabel,className:(0,o.W)("gds-tabs-list-container","none"===n&&"gds-tabs-border-none","full"===s&&"gds-tabs-full-width",`gds-tabs-list-container-${w}`),onKeyDown:e=>{const t=C.length,n=C.indexOf(y),r=e=>{var t;x(e),null==(t=document.getElementById(e))||t.focus()},i={ArrowRight:()=>{const e=C[(n+1)%t];r(e)},ArrowLeft:()=>{const e=C[(n-1+t)%t];r(e)},Enter:()=>{v(y),b(y)}}[e.key];i&&(e.preventDefault(),i())}},I&&r.createElement(d.h,{"aria-hidden":!0,accessibilityLabel:"Show more tabs",className:"gds-tabs-list-overflow-button-left",size:"small"===w?"small":"medium",variant:"tertiary",icon:l.n,tabIndex:-1,onClick:()=>{null!==f.current&&(f.current.scrollLeft-=500)}}),r.createElement(h.k,{gap:3,align:"center",className:"gds-tabs-list",ref:f},e.children),k&&r.createElement(d.h,{"aria-hidden":!0,accessibilityLabel:"Show more tabs",className:"gds-tabs-list-overflow-button-right",size:"small"===w?"small":"medium",variant:"tertiary",icon:c.M,tabIndex:-1,onClick:()=>{null!==f.current&&(f.current.scrollLeft+=500)}}))})),v=r.forwardRef((function(e,t){const{selectedTab:n,setSelectedTab:s,setFocusedTab:a,onChangeHandler:l,size:c}=r.useContext(g),d=f(e.id),h=p(e.id),m=(0,i.B3)(t),v=n===d;return r.createElement("button",{"aria-selected":v,"aria-controls":h,className:(0,o.W)("gds-tabs-tab-container",e.className),id:d,ref:m,role:"tab",tabIndex:v?0:-1,onClick:()=>{s(d),a(d),l(d)},onFocus:()=>{a(d)}},r.createElement("div",{className:(0,o.W)("gds-tabs-tab",v&&"gds-tabs-tab-selected"),"data-text":e.label},null!=e.label?r.createElement(u.x,{weight:v?"semibold":"normal",as:"span",variant:{small:"text-xsmall",medium:"text-small",large:"text-medium",xlarge:"text-large",auto:"text-medium"}[c]},e.label):e.children))})),x=r.forwardRef((function(e,t){const{selectedTab:n}=r.useContext(g),o=(0,i.B3)(t),s=f(e.id),a=p(e.id);let l=n===s;return r.useEffect((()=>{l=n===s}),[n]),l?r.createElement("div",{className:"gds-tabs-panel",role:"tabpanel",id:a,"aria-labelledby":s,ref:o,tabIndex:0},e.children):null})),b=(0,s.o)((e=>{const t=function(e){const t=[];return r.Children.forEach(e.children,(e=>{r.isValidElement(e)&&e.type===m&&r.Children.forEach(e.props.children,(e=>{r.isValidElement(e)&&e.type===v&&t.push(f(e.props.id))}))})),t}(e),{defaultSelectedTab:n,children:i,size:o="medium",onChange:s,...a}=e,l=n?f(n):t[0],[c,u]=r.useState(l),[d,h]=r.useState(l);return r.createElement("div",{className:"gds-tabs",...a},r.createElement(g.Provider,{value:{selectedTab:c,setSelectedTab:u,setFocusedTab:h,onChangeHandler:e=>{s&&s(e.replace(/gds-tab-/,""))},focusedTab:d,tabIds:t,size:o}},i))}),"Tabs",{Panel:x,TabList:m,Tab:v})},99586:(e,t,n)=>{function r(e){throw new Error("Unexpected object: "+e)}n.d(t,{v:()=>r})},23878:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(92379);function i(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if("undefined"==typeof self||!self.matchMedia)return void t(!1);const e=self.matchMedia("(prefers-reduced-motion: reduce)");function n(e){t(e.matches)}return t(e.matches),e.addEventListener?(e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}):(e.addListener(n),()=>{e.removeListener(n)})}),[]),e}},27988:(e,t,n)=>{n.d(t,{i:()=>s});var r=n(92379),i=n(21886),o=n(45981);const s=(0,i.I)("nocolor",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"AgentsExplainer",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"var(--color-icon-agent-default)",d:"M7.2 11.4a.7.7 90 1 1 0 1.4h-.7a.7.7 90 1 1 0-1.4zm0-2.8a.7.7 90 1 1 0 1.4h-.7a.7.7 90 1 1 0-1.4zm0-2.8a.7.7 90 0 1 0 1.4h-.7a.7.7 90 0 1 0-1.4zm6.3 2.8a.7.7 90 1 1 0 1.4h-.7a.7.7 90 1 1 0-1.4zm0-2.8a.7.7 90 1 1 0 1.4h-.7a.7.7 90 1 1 0-1.4z"}),r.createElement("path",{fill:"var(--color-icon-agent-default)",fillRule:"evenodd",d:"M8.6 3c.539 0 1.029.21 1.4.539A2.1 2.1 90 0 1 11.4 3h3.5A2.1 2.1 90 0 1 17 5.1v8.4a2.1 2.1 90 0 1-2.1 2.1h-4.2v.7a.7.7 90 1 1-1.4 0v-.7H5.1A2.1 2.1 90 0 1 3 13.5V5.1A2.1 2.1 90 0 1 5.1 3zM5.1 4.4a.7.7 90 0 0-.7.7v8.4a.7.7 90 0 0 .7.7h4.2V5.1a.7.7 90 0 0-.7-.7zm6.3 0a.7.7 90 0 0-.7.7v9.1h4.2a.7.7 90 0 0 .7-.7V5.1a.7.7 90 0 0-.7-.7z",clipRule:"evenodd"}))))},55678:(e,t,n)=>{n.d(t,{y:()=>s});var r=n(92379),i=n(21886),o=n(45981);const s=(0,i.I)("nocolor",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"AgentsTranslator",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"var(--color-icon-agent-default)",fillRule:"evenodd",d:"M10.259 3A7 7 90 0 1 17 10l-.007.35a7 7 90 0 1-6.734 6.643L10 17l-.259-.007A7 7 90 0 1 3 10.343V10a7 7 90 0 1 7.259-7m-1.358 9.8A11.2 11.2 90 0 0 10 15.516a11.2 11.2 90 0 0 1.099-2.716zm3.64 0a12.6 12.6 90 0 1-.882 2.548 5.6 5.6 90 0 0 3.192-2.548zm-7.392 0a5.6 5.6 90 0 0 3.192 2.548 12.6 12.6 90 0 1-.882-2.548zm-.574-4.2A5.6 5.6 90 0 0 4.4 10l.007.28a5.6 5.6 90 0 0 .175 1.12h2.646q-.07-.476-.07-.959L7.137 10a13 13 90 0 1 .084-1.4zm8.197 0a12.6 12.6 90 0 1 0 2.8h2.646A5.6 5.6 90 0 0 15.6 10l-.007-.28a5.6 5.6 90 0 0-.175-1.12zm-4.137 0a11 11 90 0 0-.091 1.4l.007.392q.021.504.084 1.008h2.73a11.2 11.2 90 0 0 0-2.8zm-.294-3.948A5.6 5.6 90 0 0 5.149 7.2h2.31a12.6 12.6 90 0 1 .882-2.548m3.318 0a12.6 12.6 90 0 1 .882 2.548h2.31a5.6 5.6 90 0 0-3.192-2.548M10 4.484A11.2 11.2 90 0 0 8.901 7.2h2.198A11.2 11.2 90 0 0 10 4.484",clipRule:"evenodd"}))))},2381:(e,t,n)=>{n.d(t,{F:()=>s});var r=n(92379);if(5526!=n.j)var i=n(21886);if(5526!=n.j)var o=n(45981);const s=5526!=n.j?(0,i.I)("color",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceControls",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M8.5 4H14M2 4h2.667m0 0a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM2 8h5.5m3.833 0H14m-2.667 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM10 12h4M2 12h4m0 0a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z"})))):null},45580:(e,t,n)=>{n.d(t,{b:()=>s});var r=n(92379),i=n(21886),o=n(45981);const s=(0,i.I)("color",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceDown",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m2 5 6 6 6-6"}))))},44155:(e,t,n)=>{n.d(t,{n:()=>s});var r=n(92379),i=n(21886),o=n(45981);const s=(0,i.I)("color",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceLeft",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M11 2 5 8l6 6"}))))},73520:(e,t,n)=>{n.d(t,{j:()=>s});var r=n(92379),i=n(21886),o=n(45981);const s=(0,i.I)("nocolor",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceOk",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#05735A",fillRule:"evenodd",d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12m3.498-7.44a.75.75 0 1 0-.996-1.12L6.5 8.996l-1.002-.89a.75.75 0 0 0-.996 1.12L6.5 11.004z",clipRule:"evenodd"}))))},38985:(e,t,n)=>{n.d(t,{L:()=>s});var r=n(92379);if(6168==n.j)var i=n(21886);if(6168==n.j)var o=n(45981);const s=6168==n.j?(0,i.I)("color",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceRemove",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#646B81",fillRule:"evenodd",d:"M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0M6.53 5.47a.75.75 0 0 0-1.06 1.06L6.94 8 5.47 9.47a.75.75 0 1 0 1.06 1.06L8 9.06l1.47 1.47a.75.75 0 1 0 1.06-1.06L9.06 8l1.47-1.47a.75.75 0 1 0-1.06-1.06L8 6.94z",clipRule:"evenodd"})))):null},95432:(e,t,n)=>{n.d(t,{D:()=>s});var r=n(92379);if(6168==n.j)var i=n(21886);if(6168==n.j)var o=n(45981);const s=6168==n.j?(0,i.I)("color",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceSearch",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M9.784 9.784 14 14m-2.919-7.46A4.54 4.54 0 1 1 2 6.54a4.54 4.54 0 0 1 9.081 0Z"})))):null},26306:(e,t,n)=>{n.d(t,{t:()=>s});var r=n(92379);if(5526!=n.j)var i=n(21886);if(5526!=n.j)var o=n(45981);const s=5526!=n.j?(0,i.I)("color",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"InterfaceStatusCheck",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#707070",d:"M10 2a8 8 0 1 1 0 16 8 8 0 0 1 0-16m0 1a7 7 0 1 0 0 14 7 7 0 0 0 0-14m3.153 4.64a.5.5 0 0 1 .694.72L9 13.027l-2.347-2.26a.5.5 0 0 1 .694-.72L9 11.64z"})))):null},42354:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(92379);if(6168==n.j)var i=n(21886);if(6168==n.j)var o=n(45981);const s=6168==n.j?(0,i.I)("color",(({title:e,titleId:t,desc:n,descId:i,resourcePrefix:s=(0,o.O)(),...a})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceUser",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",d:"m3.714 12 2.11-.88a2.14 2.14 0 0 0 1.319-1.977M12.286 12l-2.11-.88a2.14 2.14 0 0 1-1.319-1.977M6 6.286v1.143a2 2 0 1 0 4 0V6.286a2 2 0 1 0-4 0ZM14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0Z"})))):null},62220:(e,t,n)=>{n.d(t,{v:()=>r});class r{listeners=new Map;on(e,t){return this._getOrInitializeListeners(e).add(t),{dispose:()=>{this.listeners.get(e)?.delete(t)}}}emit(e,t){const n=this.listeners.get(e);if(n)for(const r of n)try{r(t)}catch(t){console.error(`Error in event listener for event "${String(e)}":`,t)}}_getOrInitializeListeners(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}}},53922:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(92379);const i=5526!=n.j?[.03125,.0625,.125,.25,.5,1]:null;function o(e){var t;let{attempt:n,minMs:r,maxMs:o,addFuzz:s,rng:a=Math.random}=e;const l=(o-r)*(null!==(t=i[n-1])&&void 0!==t?t:1)+r;if(!s)return Math.min(o,l);const c=.25*l*(a()-.5)*2;return Math.max(r,Math.min(o,l+c))}const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{minIntervalSec:n=1,maxIntervalSec:i=30,maxDurationSec:s=360,enabled:a=!0,addFuzz:l=!0,random:c,shouldContinuePolling:u}=t,d=1e3*Math.max(0,n),h=1e3*Math.max(0,i),g=1e3*Math.max(0,s),f=Math.min(d,h),p=Math.max(d,h),m=(0,r.useRef)(null),v=(0,r.useRef)(0),x=(0,r.useRef)(null),b=(0,r.useRef)(!1),[y,C]=(0,r.useState)(0),[w,k]=(0,r.useState)(0),S=(0,r.useRef)(e),I=(0,r.useRef)(u);(0,r.useEffect)((()=>{S.current=e}),[e]),(0,r.useEffect)((()=>{I.current=u}),[u]);const E=(0,r.useCallback)((()=>{m.current&&(clearTimeout(m.current),m.current=null),v.current=0,x.current=null,b.current=!1,C(0),k(0)}),[]);return(0,r.useEffect)((()=>{let e=!1;if(m.current&&(clearTimeout(m.current),m.current=null),!a||!S.current)return b.current=!1,void(x.current=null);null===x.current&&(x.current=Date.now(),v.current=0,C(0),k(0));const t=()=>{var n;if(e)return;if(b.current)return;const r=Date.now(),i=r-(null!==(n=x.current)&&void 0!==n?n:r);if(i>=g)return k(i),void(b.current=!1);const s=v.current+1;if(v.current=s,C(s),k(i),I.current&&!I.current(s))return void(b.current=!1);b.current=!0;const a=S.current;a?Promise.resolve(a()).finally((()=>{var n;if(e)return;b.current=!1;const r=Date.now(),i=r-(null!==(n=x.current)&&void 0!==n?n:r);if(i>=g)return void k(i);const a=o({attempt:s,minMs:f,maxMs:p,addFuzz:l,...c&&{rng:c}});e||(m.current=setTimeout(t,a))})):b.current=!1};return setTimeout(t,0),()=>{e=!0,m.current&&(clearTimeout(m.current),m.current=null),b.current=!1}}),[a,f,p,g,l,c]),{attemptCount:y,elapsedTimeMs:w,hasReachedMaxDuration:w>=g,reset:E}}},81349:(e,t,n)=>{n.d(t,{D:()=>i});var r=n(92379);function i(e){const t=(0,r.useRef)(void 0);return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}},78028:(e,t,n)=>{n.d(t,{O:()=>o});var r=n(92379);if(6168==n.j)var i=n(37678);function o(e,t,n){let{inputProps:o,isSelected:s,isPressed:a,isDisabled:l,isReadOnly:c}=(0,i.O)(e,t,n),{isIndeterminate:u}=e;return(0,r.useEffect)((()=>{n.current&&(n.current.indeterminate=u)})),{inputProps:Object.assign(Object.assign({},o),{checked:s}),isSelected:s,isPressed:a,isDisabled:l,isReadOnly:c}}},75821:(e,t,n)=>{if(n.d(t,{t:()=>l}),6168==n.j)var r=n(53486);if(6168==n.j)var i=n(57014);if(6168==n.j)var o=n(71467);function s(e){return e&&e.__esModule?e.default:e}var a;function l(e,t,n){let l=(0,o.qb)(s(a)),{isDisabled:c,isReadOnly:u,onSubmit:d=(()=>{}),onClear:h,type:g="search"}=e,{labelProps:f,inputProps:p,descriptionProps:m,errorMessageProps:v}=(0,i.h)(Object.assign(Object.assign({},e),{value:t.value,onChange:t.setValue,onKeyDown:(0,r.tS)((e=>{const n=e.key;"Enter"!==n&&"Escape"!==n||e.preventDefault(),c||u||("Enter"===n&&d(t.value),"Escape"===n&&(t.setValue(""),h&&h()))}),e.onKeyDown),type:g}),n);return{labelProps:f,inputProps:Object.assign(Object.assign({},p),{defaultValue:void 0}),clearButtonProps:{"aria-label":l.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:c||u,onPress:()=>{t.setValue(""),h&&h()},onPressStart:()=>{n.current.focus()}},descriptionProps:m,errorMessageProps:v}}a={"ar-AE":{"Clear search":" "},"bg-BG":{"Clear search":"  "},"cs-CZ":{"Clear search":"Vymazat hledn"},"da-DK":{"Clear search":"Ryd sgning"},"de-DE":{"Clear search":"Suche zurcksetzen"},"el-GR":{"Clear search":" "},"en-US":{"Clear search":"Clear search"},"es-ES":{"Clear search":"Borrar bsqueda"},"et-EE":{"Clear search":"Thjenda otsing"},"fi-FI":{"Clear search":"Tyhjenn haku"},"fr-FR":{"Clear search":"Effacer la recherche"},"he-IL":{"Clear search":" "},"hr-HR":{"Clear search":"Obrii pretragu"},"hu-HU":{"Clear search":"Keress trlse"},"it-IT":{"Clear search":"Cancella ricerca"},"ja-JP":{"Clear search":""},"ko-KR":{"Clear search":" "},"lt-LT":{"Clear search":"Ivalyti iek"},"lv-LV":{"Clear search":"Notrt meklanu"},"nb-NO":{"Clear search":"Tm sk"},"nl-NL":{"Clear search":"Zoekactie wissen"},"pl-PL":{"Clear search":"Wyczy zawarto wyszukiwania"},"pt-BR":{"Clear search":"Limpar pesquisa"},"pt-PT":{"Clear search":"Limpar pesquisa"},"ro-RO":{"Clear search":"tergei cutarea"},"ru-RU":{"Clear search":" "},"sk-SK":{"Clear search":"Vymaza vyhadvanie"},"sl-SI":{"Clear search":"Poisti iskanje"},"sr-SP":{"Clear search":"Obrii pretragu"},"sv-SE":{"Clear search":"Rensa skning"},"tr-TR":{"Clear search":"Aramay temizle"},"uk-UA":{"Clear search":" "},"zh-CN":{"Clear search":""},"zh-TW":{"Clear search":""}}},37678:(e,t,n)=>{if(n.d(t,{O:()=>s}),6168==n.j)var r=n(53486);if(6168==n.j)var i=n(36595);if(6168==n.j)var o=n(85264);function s(e,t,n){let{isDisabled:s=!1,isRequired:a=!1,isReadOnly:l=!1,value:c,name:u,children:d,"aria-label":h,"aria-labelledby":g,validationState:f="valid"}=e;null!=d||(null!=h||null!=g)||console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:p,isPressed:m}=(0,o.r7)({isDisabled:s}),{focusableProps:v}=(0,i.kc)(e,n),x=(0,r.dG)(p,v),b=(0,r.zL)(e,{labelable:!0});return(0,r.y$)(n,t.isSelected,t.setSelected),{inputProps:(0,r.dG)(b,Object.assign(Object.assign(Object.assign({"aria-invalid":"invalid"===f||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":l||void 0,"aria-required":a||void 0,onChange:e=>{e.stopPropagation(),t.setSelected(e.target.checked)},disabled:s},null==c?{}:{value:c}),{name:u,type:"checkbox"}),x)),isSelected:t.isSelected,isPressed:m,isDisabled:s,isReadOnly:l}}},7368:(e,t,n)=>{n.d(t,{oR:()=>c});var r=n(92379),i=n(24658);const{useDebugValue:o}=r,{useSyncExternalStoreWithSelector:s}=i;let a=!1;const l=e=>e;function c(e,t=l,n){n&&!a&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),a=!0);const r=s(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return o(r),r}},33171:(e,t,n)=>{n.d(t,{M:()=>i});const r=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,i,o);return o},i=e=>e?r(e):r}}]);