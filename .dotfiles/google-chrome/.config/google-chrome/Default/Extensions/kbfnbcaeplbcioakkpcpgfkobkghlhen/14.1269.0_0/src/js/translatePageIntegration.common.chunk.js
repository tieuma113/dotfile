(self.webpackChunk=self.webpackChunk||[]).push([[7444],{90342:(e,t,s)=>{s.r(t),s.d(t,{TranslatePageIntegration:()=>g});var i,a=s(90023),n=s(13391),r=s(32073),o=s(58303),d=s(70843),h=s(2206);!function(e){e.create=function(e,t){return(0,a.zG)({domain:e,disableTranslateOnboarding:()=>{t.toggleTranslateOnboardingForDomain({domain:e,enabled:!1})}},o.G)}}(i||(i={}));var l=s(90189),_=s(16381),c=s(33976),p=s(40594);class g{constructor(e,t,s,i,a){this._context=e,this._state=t,this._actions=s,this._telemetry=i,this._gnar=a,this._disposed=n.h.create(!1),this.disposed=this._disposed,this._subscriptions=new r.w0,this._disposables=[];new URL(this._context.url).searchParams.get("resetTranslate")&&(p.Y.create("TranslateOnboarding").trace("Reset Translation Onboarding"),this._actions.patchCommonSettings({translateOnboarding:c.aK.empty})),this._builderCSState=n.h.create(this._state.page.translateOnboarding||c.aK.empty)}async init(){return await(0,l.OB)().bgRpc.api.translateCheckAvailability(this._state.user.id)&&!(0,_.n_)()&&(0,h.jd)(this._state.page.domain,this._state.page)&&"test"===this._context.experimentClient.getTreatment(d.p.TranslationDiscoverability)?(this._model=i.create(this._state.page.domain,this._actions),(0,a.zG)(this._model,o.g_((()=>(this.dispose(),Promise.resolve())),(e=>this._inject(e,this._telemetry,(0,h.sh)(this._gnar)).catch((e=>{this._telemetry.translateOnboarding.error("unexpectedInjected","Unexpected error while injecting",(0,h.js)(),e)})))))):Promise.resolve()}_inject(e,t,i){return Promise.all([Promise.all([s.e(6904),s.e(7949),s.e(1798),s.e(9003),s.e(6806),s.e(6238),s.e(7172)]).then(s.bind(s,4694)),Promise.all([s.e(6904),s.e(7949),s.e(1798),s.e(9003),s.e(6806),s.e(6238),s.e(7172)]).then(s.bind(s,3123)),Promise.all([s.e(6904),s.e(7949),s.e(1798),s.e(9003),s.e(6806),s.e(6238),s.e(7172)]).then(s.bind(s,97492))]).then((([{createTranslateOnboardingViewModel:s},{TranslateIntegrationLayout:a},{TranslateOnboardingView:n}])=>{this._viewModel=s({csState:this._state,model:e,gnar:i}),this._disposables.push(this._viewModel),this._layout=new a,this._disposables.push(this._layout.render(n,this._viewModel,(0,l.OB)())),t.translateOnboarding.info("init","Translate onboarding initiated",(0,h.js)())}))}update(e){e.page.translateOnboarding&&this._builderCSState.set(e.page.translateOnboarding),(0,h.jd)(e.page.domain,e.page)||this.dispose()}dispose(){this._disposables.forEach((e=>e.dispose())),this._disposed.set(!0),this._subscriptions.unsubscribe()}}}}]);