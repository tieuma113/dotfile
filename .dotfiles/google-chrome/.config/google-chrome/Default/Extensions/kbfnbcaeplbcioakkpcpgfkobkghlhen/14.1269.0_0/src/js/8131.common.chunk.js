(self.webpackChunk=self.webpackChunk||[]).push([[8131],{71206:(e,t,i)=>{i.d(t,{K:()=>s});class s{constructor(){this._pendingRevision=0,this._finishedRevisions={regular:-1,plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1},this._wasChecked={regular:!1,plagiarism:!1,ai_detector:!1,writing_expert_check:!1,ai_studio:!1,audience_adapt:!1},this.reset()}getCheckState(e){return this._pendingRevision>this._finishedRevisions[e]?this._wasChecked[e]?"checking":"full":"idle"}getRevisionCheckState(){return this.getCheckState("regular")}getAsyncChecksState(){return{plagiarism:this.getCheckState("plagiarism"),ai_detector:this.getCheckState("ai_detector"),writing_expert_check:this.getCheckState("writing_expert_check"),ai_studio:this.getCheckState("ai_studio"),audience_adapt:this.getCheckState("audience_adapt")}}stage(e){this._pendingRevision=Math.max(this._pendingRevision,e)}finishRevision(e){this._finishedRevisions.regular=Math.max(this._finishedRevisions.regular,e),this._wasChecked.regular=!0}finishAsyncCheck(e,t){this._finishedRevisions[e]=Math.max(this._finishedRevisions[e],t),this._wasChecked[e]=!0}reset(){this._pendingRevision=0,this._finishedRevisions={regular:-1,plagiarism:-1,ai_detector:-1,writing_expert_check:-1,ai_studio:-1,audience_adapt:-1}}}},2104:(e,t,i)=>{if(i.d(t,{N:()=>n}),/^6(052|168)$/.test(i.j))var s=i(8867);function n(e){return new s.y((t=>{const i=new DisposableStack,s=i.use(e());return i.adopt(s.subscribe((e=>t.next(e))),(e=>e.unsubscribe())),()=>i.dispose()}))}},12898:(e,t,i)=>{i.d(t,{Kf:()=>m.K,TJ:()=>p.T,D8:()=>p.D,kX:()=>l,N4:()=>v.N});var s=i(64152),n=i(81484),a=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,i)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;function l(e){return(0,s.t)(((e,t)=>r(e,o(t)))(((e,t)=>{for(var i in t||(t={}))h.call(t,i)&&u(e,i,t[i]);if(c)for(var i of c(t))d.call(t,i)&&u(e,i,t[i]);return e})({},e),{schema:e.protocol,factories:n.i}))}var p=i(88257);if(/^6(052|168)$/.test(i.j))var v=i(2104);if(/^(1388|3075)$/.test(i.j))var m=i(71206)},88131:(e,t,i)=>{i.r(t),i.d(t,{activate:()=>M});var s,n,a,r,o,c,h,d=i(651),u=i(90572),l=i(33885),p=i(42203),v=i(12898),m=i(46155),g=i(13391),w=i(74170),k=i(25494),f=i(4464),_=e=>{throw TypeError(e)},b=(e,t,i)=>t.has(e)||_("Cannot "+i),S=(e,t,i)=>(b(e,t,"read from private field"),i?i.call(e):t.get(e)),y=(e,t,i)=>t.has(e)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),x=(e,t,i,s)=>(b(e,t,"write to private field"),s?s.call(e,i):t.set(e,i),i),A=(e,t,i)=>(b(e,t,"access private method"),i);class C{constructor(e){y(this,c),y(this,s),y(this,n),y(this,a),y(this,r),y(this,o),x(this,s,new DisposableStack),x(this,n,g.h.create({kind:k.x.State.Kind.Initial})),x(this,a,g.h.create(null)),this.title=f.K_,this.state=S(this,n).view(),this.audience=S(this,a).view((e=>null!=e?e:void 0)),this.loadReactions=()=>(A(this,c,h).call(this,{kind:"loadReactionsAction"}),Promise.resolve()),this.goBack=()=>{A(this,c,h).call(this,{kind:"goBackAction"})},this.selectAudience=()=>{A(this,c,h).call(this,{kind:"selectAudienceAction"})},this.setAudience=e=>(A(this,c,h).call(this,{kind:"setAudienceAction",audience:e}),Promise.resolve()),this.editAudience=()=>{A(this,c,h).call(this,{kind:"editAudienceAction"})},this.saveAudience=e=>(A(this,c,h).call(this,{kind:"saveAudienceAction",name:e}),Promise.resolve()),this.removeAudience=e=>(A(this,c,h).call(this,{kind:"removeAudienceAction",audience:e}),Promise.resolve()),x(this,r,e.documentId),x(this,o,e.bus),S(this,s).adopt(e.agentState.subscribe((e=>S(this,n).set(e))),(e=>e.unsubscribe())),S(this,s).adopt(e.audience.subscribe((e=>S(this,a).set(e))),(e=>e.unsubscribe())),this.textWordsCount=S(this,s).use(S(this,o).state.textInfo.view(S(this,r),null)),this.capiSessionId=S(this,s).use(S(this,o).state.capiSessionId.view(S(this,r),null)),this.context={tracking:{trackEvent:(e,t)=>S(this,o).events.trackingEvent.emit(S(this,r),{event:e,detail:t})},textWordsCount:this.textWordsCount.view((e=>{var t;return null!=(t=null==e?void 0:e.wordsCount)?t:0})),capiSessionId:this.capiSessionId.view((e=>null!=e?e:void 0))},this.featureFlags={customAudiences:e.experimentation.isAssigned(w.AIEditorReaderReactionsCustomAudience),removeCustomAudiences:e.experimentation.isAssigned(w.AIEditorReaderReactionsRemoveCustomAudience)},this.hasTextChanges=S(this,s).use(S(this,o).state.hasTextChanges.view(S(this,r),!1))}[Symbol.dispose](){S(this,s).dispose()}dispose(){S(this,s).dispose()}}s=new WeakMap,n=new WeakMap,a=new WeakMap,r=new WeakMap,o=new WeakMap,c=new WeakSet,h=function(e){S(this,o).events.panelUIAction.emit(S(this,r),e)};i(24089);var R=i(68885),j=i(75752),D=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),P=e=>{throw TypeError(e)},I=(e,t,i)=>{var s;null!=t?("object"!=typeof t&&"function"!=typeof t&&P("Object expected"),i&&(s=t[D("asyncDispose")]),void 0===s&&(s=t[D("dispose")]),"function"!=typeof s&&P("Object not disposable"),e.push([i,s,t])):i&&e.push([i]);return t},E=(e,t,i)=>{var s="function"==typeof SuppressedError?SuppressedError:function(e,t,i,s){return(s=Error(i)).name="SuppressedError",s.error=e,s.suppressed=t,s},n=e=>t=i?new s(e,t,"An error was suppressed during disposal"):(i=!0,e),a=s=>{for(;s=e.pop();)try{var r=s[1]&&s[1].call(s[2]);if(s[0])return Promise.resolve(r).then(a,(e=>(n(e),a())))}catch(e){n(e)}if(i)throw t};return a()};const M=e=>((e,t,i)=>new Promise(((s,n)=>{var a=e=>{try{o(i.next(e))}catch(e){n(e)}},r=e=>{try{o(i.throw(e))}catch(e){n(e)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,r);o((i=i.apply(e,t)).next())})))(void 0,[e],(function*({bus:e,documents:t,experimentation:i}){var s=[];try{const r=I(s,new DisposableStack),o=r.use(new v.D8({activeDocument:t.activeDocument,documentSessionDisposed:t.documentSessionDisposed,createNewSession:t=>{var s=[];try{const r=I(s,new DisposableStack),o=r.use(e.state.agentState.view(t,{kind:k.x.State.Kind.Initial})),c=r.use(e.state.audience.view(t,null)),h=r.use(new C({bus:e,experimentation:i,agentState:o,audience:c.pipe(u.h(p.C_)),documentId:t})),d=r.move();return{viewModel:h,[Symbol.dispose]:()=>d.dispose()}}catch(e){var n=e,a=!0}finally{E(s,n,a)}}})),c=r.move();return{title:f.K_,renderPanel:e=>(0,d.jsx)(l.F.Fragment,{children:o.activeSession.view(v.TJ.match({activeSession:t=>(0,d.jsx)(j.n,{viewModel:t.viewModel,onClosePanel:e.onClosePanel}),noActiveSession:()=>(0,d.jsx)(m.ZD,{agentName:f.K_}),documentNotSupported:()=>(0,d.jsx)(m.Di,{agentName:f.K_})}))}),renderIcon:e=>(0,d.jsx)(R.b,{size:e.size}),[Symbol.dispose]:()=>c.dispose()}}catch(e){var n=e,a=!0}finally{E(s,n,a)}}))}}]);