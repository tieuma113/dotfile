(self.webpackChunk=self.webpackChunk||[]).push([[5058],{86255:(e,t,n)=>{n.d(t,{v:()=>F});var i=n(18647),o=n(78767),r=n(40594),s=n(96379),a=n(90023),c=n(13391),l=n(32073),u=n(59179),d=n(20161),h=n(84714),m=n(81933),g=n(954),p=n(24666),f=n(2187),x=n(58303),_=n(93865);const v=n(20905).E0;class b{constructor(e){this._params=e,this._subscription=new l.w0,this._selection=c.h.create(null),this.selection=this._selection.view(),this._subscription.add(e.selectionOrCaretPosition.pipe(u.U((e=>x.WG(e))),d.w((e=>e?h.of(e):m.timer(v).pipe(u.U((()=>this._getCurrentSelection())),g.O(this._getCurrentSelection()),p.x())))).subscribe(f.wW(this._selection)))}_getCurrentSelection(){return(0,a.zG)(this._params.selectionService.getCurrentSelection(),_.Ey)}setSelection(e){this._params.selectionService.setSelection(e)}dispose(){this._subscription.unsubscribe()}}var y=n(39214),C=n(67612);class D{constructor(e){this._params=e,this.getDocumentText=()=>this._params.getCurrentTextMap().getRichText(),this.getDocumentGeometry=()=>{const e=C.i.getVisibleTextRange(this._params.getCurrentTextMap(),this._params.textFieldLayout,this._params.geometryProvider,this._params.geometryLayout),t=C.i.getTextFieldBoundingBox(this._params.textField,this._params.textFieldLayout);return e?{visibleTextRange:e,documentFrame:t}:{documentFrame:t}},this.getBoundingBoxesForTextRanges=e=>C.i.getBoundingBoxesForTextRanges(e,this._params.textField,this._params.originalTextField,this._params.doc,this._params.getCurrentTextMap(),this._params.textFieldLayout,this._params.geometryLayout,this._params.geometryProvider),this.setDocumentSelectedTextRange=e=>this._params.selectionService.setSelection(e),this.applyChangesToDocument=e=>{const t=(0,y.g)(e,!0);return this._params.replacementService.performBatchReplacements(t).then((t=>({changes:e,status:t})))}}}class F{constructor(e){var t;this._log=r.Y.create("ConnectorDependenciesImpl"),this._disposableList=[];const n=(0,i.Me)(e.textField);this.target={documentID:o.iy.create(),documentUrl:n.location.href,textField:e.textField,originalTextField:e.originalTextField},this.textRevisionManager=s.X.create(e.textObserver,e.createTextRevisionManager),this.selectionService=new b({selectionService:e.selectionService,selectionOrCaretPosition:e.selectionOrCaretPosition});const a=null!==(t=e.geometryLayout)&&void 0!==t?t:e.integrationLayout.createGeometryLayout();this.connectorHandler=new D({doc:n,replacementService:e.replacementService,textRevisionManager:this.textRevisionManager,geometryLayout:a,selectionService:this.selectionService,textField:e.textField,textFieldLayout:e.integrationLayout.textField,originalTextField:e.originalTextField,geometryProvider:e.geometryProvider,getCurrentTextMap:()=>e.textObserver.getCurrentTextMap()}),this._disposableList.push(this.selectionService)}dispose(){(0,o.jD)(this._disposableList,this._log)}}},67612:(e,t,n)=>{n.d(t,{i:()=>i});var i,o=n(90023),r=n(90646),s=n(63310),a=n(3944),c=n(78767),l=n(82485);!function(e){function t(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}function n(e){const t=e.rect.getCurrent();return{left:t.client.left,top:t.client.top,width:t.size.width,height:t.size.height}}function i(e){const t=e.visibleRect.getCurrent(),n=e.rect.getCurrent(),i=e.scroll.getCurrent(),o=(0,r.jg)(t,n);return o?(0,r.Li)(o,n,i):null}function u(e,t,n,i,o){var r;const a=i.create(e,t);return a?Array.from(null!==(r=i.getClientRects(a))&&void 0!==r?r:[]).filter((e=>e.height>0&&e.width>0)).map((e=>s.UL.setPosition(o.clientToRelative(e),e))).filter((e=>s.UL.contains(e,n))):[]}function d(e,t,n){return[[e.left,e.top+e.height],[e.left+e.width,e.top+e.height]].map((([e,n])=>t.elementFromPoint(e,n))).every((e=>n.some((t=>e===t||t.contains(e)))))}function h(e){return Object.fromEntries(Object.keys(e).map((e=>[e,[]])))}e.getZoomedBoundingBox=function(e,t){return{x:e.x*t,y:e.y*t,width:e.width*t,height:e.height*t}},e.getTextFieldBoundingBox=function(e,i){const o=n(i),r=(0,a.k6)(e);if(!r)return t(o);const c=s.UL.getIntersection(o,r);return t(c?{...c,top:o.top,height:o.height}:o)},e.getRelativeVisibleTextFieldRect=i,e.getVisibleRelativeRectsForTextRange=u,e.getVisibleTextRange=function(e,t,n,o){let r=null;const s=e.getPlainText(),a=i(t);if(!a||!s.length)return r;const c=o.getCurrentConversionContext();for(let t=0;t<s.length;t++){if(u({start:t,end:t+1},e,a,n,c).length>0)r={start:null===r?t:r.start,end:t+1};else if(r&&(0,l.qE)(s.substring(t,t+1)))break}return r},e.isRectElementOnDocumentTop=d,e.createEmptyBoundingBoxesForTextField=h,e.getBoundingBoxesForTextRanges=function(e,r,a,l,m,g,p,f){const x=i(g);if(!x)return h(e);const _=p.getCurrentConversionContext(),v=n(g),b=t(v),y=g.scroll.getCurrent(),C={left:v.left-y.left,top:v.top-y.top},D={left:b.x-y.left,top:b.y-y.top};return Object.fromEntries(Object.entries(e).map((([e,n])=>[e,u(n,m,x,f,_).filter((e=>d(s.UL.shift(e,C),l,[r,a].filter(c.fQ)))).map((e=>(0,o.zG)(s.UL.shift(e,D),t)))])))}}(i||(i={}))},34638:(e,t,n)=>{n.d(t,{n:()=>x,r:()=>f});var i,o=n(29479),r=n(20161),s=n(81933),a=n(954),c=n(24666),l=n(8867),u=n(64271),d=n(31603),h=n(90572),m=n(3199),g=n(59179);!function(e){e.WindowFrameChanged="WindowFrameChanged",e.ViewportFrameChanged="ViewportFrameChanged",e.DocumentFrameChanged="DocumentFrameChanged",e.DocumentFrameScrolled="DocumentFrameScrolled",e.DocumentTextReflow="DocumentTextReflow"}(i||(i={}));var p,f,x,_=n(27250),v=n(20905),b=n(78767),y=n(84308),C=n(44071),D=n(84714),F=n(18647);!function(e){function t(e,n=[]){const i=e.parentElement;if(!i)return n;const o=i.scrollWidth>i.clientWidth,r=i.scrollHeight>i.clientHeight;return(o||r)&&n.push(i),t(i,n)}e.getScrollableParents=t,e.getParentsScrollObs=function(e){const n=t(e);return y.a(n.map((e=>C.R(e,"scroll").pipe(a.O(null))))).pipe(d.J(),h.h((e=>(0,b.fQ)(e))))},e.getGlobalScrollObs=function(e){const t=(0,F.Jj)(e);return y.a([C.R(t,"scroll").pipe(a.O(null)),t.top&&t.top!==t?C.R(t.top,"scroll").pipe(a.O(null)):D.of(null)]).pipe(d.J(),h.h((e=>(0,b.fQ)(e))))}}(p||(p={})),function(e){e.documentGeometryWillChange="documentGeometryWillChange",e.documentGeometryDidChange="documentGeometryDidChange"}(f||(f={})),function(e){function t(e,t=v.E0){return n=>n.pipe(o.h(e),r.w((e=>s.timer(t).pipe(o.h([f.documentGeometryDidChange,e]),a.O([f.documentGeometryWillChange,e])))),c.x((([e],[t])=>e===t)),a.O(null))}function n(e,[t,n]){if(t===f.documentGeometryWillChange)return e.willChangeBuffer.has(n)?x(e):(e.willChangeBuffer.add(n),{...e,event:{eventName:t,reasons:[n]}});if(!(e.willChangeBuffer.size>0))return x(e);e.didChangeBuffer.add(n),e.willChangeBuffer.delete(n);if(e.didChangeBuffer.size>0&&0===e.willChangeBuffer.size){const n=Array.from(e.didChangeBuffer);return e.didChangeBuffer.clear(),{...e,event:{eventName:t,reasons:n}}}return x(e)}function x({willChangeBuffer:e,didChangeBuffer:t}){return{willChangeBuffer:e,didChangeBuffer:t}}function y(){return x({willChangeBuffer:new Set,didChangeBuffer:new Set})}function C(){const e=(0,_.T)();return new l.y((t=>{const n=new ResizeObserver((e=>{t.next(e)}));return n.observe(e.document.body),()=>n.unobserve(e.document.body)}))}e.debounceGeometryUpdateReason=t,e.updateGeometryState=n,e.createInitialGeometryState=y,e.createViewportZoomChangeObs=C,e.createGeometryChangeObs=function(e,o){return u.T([C().pipe(t(i.ViewportFrameChanged)),u.T(p.getGlobalScrollObs(e),p.getParentsScrollObs(e),o.scroll.changes).pipe(t(i.DocumentFrameScrolled)),o.rect.changes.pipe(t(i.DocumentFrameChanged))]).pipe(d.J(),h.h(b.fQ),m.R(n,y()),g.U((e=>e.event)),h.h(b.fQ))}}(x||(x={}))},96379:(e,t,n)=>{n.d(t,{X:()=>i});var i,o=n(90572),r=n(15213),s=n(40866);!function(e){e.create=function(e,t=r.n.create){const n=t({getTextSource:()=>e.getTextSource(),getCurrentTextMap:()=>e.getCurrentTextMap(),dispose:()=>e.dispose(),textMapChanged:e.textMapChanged,contentChanges:{async:e.contentChanges.async.pipe(o.h((e=>e.changes.length>0))),immediate:e.contentChanges.immediate.pipe(o.h((e=>e.changes.length>0)))}});return{revisionChanges:n.revisionChanges,getLatestVersionNumber:()=>s.Q.getRevisionNumber(n.getLatestRevision().id),dispose:()=>n.dispose()}}}(i||(i={}))},70177:(e,t,n)=>{n.r(t),n.d(t,{ConnectorFieldIntegration:()=>V,ConnectorFocusFieldManagerImpl:()=>h});var i=n(13391),o=n(84308),r=n(954),s=n(59179),a=n(24666),c=n(32734),l=n(13101),u=n(45523),d=n(78767);class h{constructor(e){this._params=e,this._fieldRegistry=i.h.create([]),this._textFieldsObservable=l.S.createFocusObservable(this._params.doc,u.x.createFlattenHot(this._params.doc,{childList:!0,subtree:!0})),this._focusedTextField=o.a([this._fieldRegistry,this._textFieldsObservable.pipe(r.O(null))]).pipe(s.U((([e,t])=>{var n;const[i]=e;if(!t)return null==i?void 0:i.documentID;const o=e.find((e=>{var n;return t.element instanceof HTMLElement&&([e.textField,e.originalTextField].includes(t.element)||e.textField.contains(t.element)||(0,d.fQ)(null===(n=e.originalTextField)||void 0===n?void 0:n.contains(t.element)))}));return null!==(n=null==o?void 0:o.documentID)&&void 0!==n?n:null==i?void 0:i.documentID})),a.x(),c.B())}createFocusFieldIntegration(e){return this._fieldRegistry.modify((t=>[...t,e])),{isFocused:this._focusedTextField.pipe(s.U((t=>t===e.documentID)),a.x(),r.O(!0)),dispose:()=>this._fieldRegistry.modify((t=>t.filter((t=>t!==e))))}}}var m=n(58303),g=n(81012),p=n(17159),f=n(18647),x=n(77642),_=n(79985),v=n(5388),b=n(40594),y=n(91957),C=n(86255),D=n(36807),F=n(32073),S=n(20161),T=n(81933),w=n(29479),R=n(84714),B=n(20905),O=n(25714);class L{constructor(e,t=b.Y.create("ConnectorApi")){this._params=e,this._log=t,this._subscription=new F.w0;const n={id:e.documentID,getDocumentText:this._getDocumentText.bind(this),getDocumentGeometry:this._getDocumentGeometry.bind(this),getBoundingBoxesForTextRanges:this._getBoundingBoxesForTextRanges.bind(this),setDocumentSelectedTextRanges:this._setDocumentSelectedTextRanges.bind(this),applyChangesToDocument:this._applyChangesToDocument.bind(this),dispose:e.disposeConnection,cancel:d.EI};[e.connectorServer.createConnectorSession(e.documentID,n),this._listenDocumentFocuseChange(),this._listenDocumentTextDidChange(),this._listenDocumentSelectedTextRangesDidChange(),this._listenDocumentGeometryChange()].forEach((e=>this._subscription.add(e)))}_getDocumentText(e){const t={...this._documentState,document:this._params.connectorHandler.getDocumentText()};return this._log.trace(`[${this._params.documentID}] handle getDocumentText:`,t),Promise.resolve(t)}_getDocumentGeometry(e){const t={...this._documentState,...this._params.connectorHandler.getDocumentGeometry()};return this._log.trace(`[${this._params.documentID}] handle getDocumentGeometry:`,t),Promise.resolve(t)}_getBoundingBoxesForTextRanges(e){const{ranges:t}=e,n={...this._documentState,boundingBoxes:this._params.connectorHandler.getBoundingBoxesForTextRanges(t)};return this._log.trace(`[${this._params.documentID}] handle getBoundingBoxesForTextRanges:`,{ranges:t,result:n}),Promise.resolve(n)}_setDocumentSelectedTextRanges(e){const[t]=e.ranges;return this._params.connectorHandler.setDocumentSelectedTextRange(t),this._log.trace(`[${this._params.documentID}] handle setDocumentSelectedTextRange:`,{range:t}),Promise.resolve()}_applyChangesToDocument(e){return this._params.connectorHandler.applyChangesToDocument(new D.i(e.changes)).then((t=>{this._log.trace(`[${this._params.documentID}] handle applyChangesToDocument:`,{changes:e.changes,result:t})}))}_listenDocumentFocuseChange(){this._params.connectorListener.focusChangeObs.pipe(S.w((e=>e?T.timer(B.Xd(4)).pipe(w.h(e)):R.of(e))),(0,O.i6)(!1,((e,t)=>t||e))).subscribe((e=>{const t=e?{...this._documentState,documentURL:this._params.documentURL}:null;this._params.connectorServer.client.api.documentDidFocus(t),this._log.trace(`[${this._params.documentID}] documentDidFocus:`,t)}))}_listenDocumentTextDidChange(){return this._params.connectorListener.textChangeObs.subscribe((e=>{const t={...this._documentState,changes:e};this._params.connectorServer.client.api.documentTextDidChange(t),this._log.trace(`[${this._params.documentID}] documentTextDidChange:`,t)}))}_listenDocumentSelectedTextRangesDidChange(){return this._params.connectorListener.selectionChangeObs.subscribe((e=>{const t={...this._documentState,ranges:e?[e]:[]};this._params.connectorServer.client.api.documentSelectedTextRangesDidChange(t),this._log.trace(`[${this._params.documentID}] documentSelectedTextRangesDidChange:`,t)}))}_listenDocumentGeometryChange(){return this._params.connectorListener.geometryChangeObs.subscribe((e=>{const t={...this._documentState,reasons:e.reasons};this._params.connectorServer.client.api[e.eventName](t),this._log.trace(`[${this._params.documentID}] ${e.eventName}:`,t)}))}_documentDidDestroy(){const e=this._documentState;return this._log.trace(`[${this._params.documentID}] documentDidDestroy:`,e),this._params.connectorServer.client.api.documentDidDestroy(e)}get _documentState(){return{documentID:this._params.documentID,revision:this._params.textRevisionManager.getLatestVersionNumber()}}dispose(){this._documentDidDestroy(),this._subscription.unsubscribe()}}var E=n(44071),k=n(49629),G=n(81743),H=n(34638);class I{constructor(e){this._params=e,this.focusChangeObs=o.a([this._params.isCurrentFieldFocused,E.R(this._params.doc,"visibilitychange",{passive:!0}).pipe(s.U((()=>"visible"===this._params.doc.visibilityState)),a.x(),r.O("visible"===this._params.doc.visibilityState)),G.N.create((()=>this._params.doc.hasFocus()),k.S.hz10,d.fS).changes.pipe(a.x(),r.O(this._params.doc.hasFocus()))]).pipe(s.U((([e,t,n])=>e&&t&&n)),a.x()),this.textChangeObs=(0,O.xy)(this.focusChangeObs,this._params.textRevisionManager.revisionChanges.pipe(s.U((e=>e.deltaChanges.delta)))),this.selectionChangeObs=(0,O.xy)(this.focusChangeObs,this._params.selectionService.selection),this.geometryChangeObs=(0,O.xy)(this.focusChangeObs,H.n.createGeometryChangeObs(this._params.textField,this._params.textFieldLayout))}}var M=n(96379),q=n(64271),j=n(50750),z=n(29416),$=n(90189),A=n(67612);class U{constructor(e){this._params=e,this._zoom=1,this._subs=new F.w0,this.getDocumentText=this._params.connectorHandler.getDocumentText,this.setDocumentSelectedTextRange=this._params.connectorHandler.setDocumentSelectedTextRange,this.applyChangesToDocument=this._params.connectorHandler.applyChangesToDocument,this.getDocumentGeometry=()=>{const e=this._params.connectorHandler.getDocumentGeometry();return{...e,documentFrame:A.i.getZoomedBoundingBox(e.documentFrame,this._zoom)}},this.getBoundingBoxesForTextRanges=e=>{const t=this._params.connectorHandler.getBoundingBoxesForTextRanges(e);return Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.map((e=>A.i.getZoomedBoundingBox(e,this._zoom)))])))},this._init()}_init(){this._subs.add(q.T(j.D((0,$.OB)().bgRpc.api.getActiveTabZoom()),H.n.createViewportZoomChangeObs().pipe(z.b(B.E0),S.w((()=>(0,$.OB)().bgRpc.api.getActiveTabZoom())))).subscribe((e=>{this._zoom=null!=e?e:1})))}dispose(){this._subs.unsubscribe()}}var W=n(63189);class P{constructor(e){this._params=e,this.show=()=>{const e=this._params.getBoundingBox();this.hide(),this._element.style.position="absolute",this._element.style.background=this._params.background,this._element.style.opacity="0.2",this._element.style.left=`${e.x}px`,this._element.style.top=`${e.y}px`,this._element.style.width=`${e.width}px`,this._element.style.height=`${e.height}px`,this._element.style.zIndex="100000",this._element.style.pointerEvents="none",document.body.appendChild(this._element)},this.hide=()=>{document.body.contains(this._element)&&document.body.removeChild(this._element)},this._element=e.doc.createElement("div")}}class N{constructor(e){this._params=e,this._sub=new F.w0,this._showDocumentFrameRect=()=>{const e=[new P({doc:this._params.doc,background:"blue",getBoundingBox:()=>{const{documentFrame:e}=this._params.browserConnectorHandler.getDocumentGeometry();return e}}),new P({doc:this._params.doc,background:"red",getBoundingBox:()=>{const{documentFrame:e}=this._params.nativeConnectorHandler.getDocumentGeometry();return e}})];this._sub.add(this._params.connectorListener.geometryChangeObs.subscribe((t=>t.eventName===H.r.documentGeometryDidChange?e.forEach((e=>e.show())):e.forEach((e=>e.hide()))))),e.forEach((e=>e.show())),this._sub.add((()=>e.forEach((e=>e.hide()))))};const t={getDocumentText:this._params.nativeConnectorHandler.getDocumentText,getDocumentGeometry:this._params.nativeConnectorHandler.getDocumentGeometry,getBoundingBoxesForTextRanges:this._params.nativeConnectorHandler.getBoundingBoxesForTextRanges,setDocumentSelectedTextRanges:this._params.nativeConnectorHandler.setDocumentSelectedTextRange,applyChangesToDocument:this._params.nativeConnectorHandler.applyChangesToDocument,showDocumentFrameRect:this._showDocumentFrameRect};(0,W.X)("connectorApi",t)}dispose(){this._sub.unsubscribe()}}class V{constructor(e,t){var n,o,r,s;this._params=e,this._disposableList=[],this._log=b.Y.create("ConnectorFieldIntegration");const a=(0,f.Me)(e.textField),c=a.location.href,l=d.iy.create(),u=null!==(n=e.sessionStatsManager)&&void 0!==n?n:new p.J({domain:e.domain,pathname:a.location.pathname},(()=>i.h.create(null)),(()=>m.YP),e.textObserver,e.gnar,e.productMetricsCSClient,e.felog,e.experimentClient),h=x.L.create(e.createReplacementService,e.textObserver,e.domain,e.integrationName,e.felog,u,null!==(o=e.layout.isIframeHost)&&void 0!==o&&o,e.experimentClient,e.state.view("dynamicConfig").get(),new _.M,e.productMetricsCSClient).create(v.P.connector),D=M.X.create(e.textObserver,e.createTextRevisionManager),F=t.connectorFocusFieldManager.createFocusFieldIntegration({documentID:l,textField:e.textField,originalTextField:e.originalTextField}),S=new C.v({...e,replacementService:h,integrationLayout:e.layout}),T=new U({connectorHandler:S.connectorHandler}),w=new I({doc:a,selectionService:S.selectionService,textRevisionManager:D,textField:e.textField,textFieldLayout:e.layout.textField,isCurrentFieldFocused:F.isFocused}),R=new L({documentID:l,documentURL:c,textRevisionManager:D,connectorListener:w,connectorHandler:T,connectorServer:t.connectorServer,disposeConnection:t.disposeConnection}),B=new N({doc:a,connectorListener:w,nativeConnectorHandler:T,browserConnectorHandler:S.connectorHandler});this._disposableList.push(e.fieldIntegrationStore.registerFieldIntegration(g.O.connector,null!==(s=null!==(r=e.textEventsTarget)&&void 0!==r?r:e.originalTextField)&&void 0!==s?s:e.textField,e.integrationName,e.textObserver)),this._disposableList.push(R,T,u,D,F,S,B),this._log.debug("Initialized Connector Field Integration!"),this._params.felog.connector.textFieldIntegrated((0,y.Cg)(this._params.domain),this._params.integrationName)}update(e){this._params.state.set(e)}dispose(){(0,d.jD)(this._disposableList,this._log)}}},25009:(e,t,n)=>{if(n.d(t,{Fb:()=>g,PF:()=>m,TY:()=>l,_V:()=>h,eg:()=>d,um:()=>c,yj:()=>u}),3075==n.j)var i=n(59179);if(3075==n.j)var o=n(24666);if(3075==n.j)var r=n(32103);if(3075==n.j)var s=n(49629);if(3075==n.j)var a=n(3944);var c,l,u;function d(e){if((0,a.uz)(e))return{mode:c.view};const t=(0,a.lW)(e);return t||((0,a.e$)(e)?{mode:c.noEditAccess}:{mode:c.edit})}!function(e){e.view="view",e.noEditAccess="noEditAccess",e.history="history",e.edit="edit"}(c||(c={})),function(e){e[e.ownDoc=0]="ownDoc",e[e.sharedDoc=1]="sharedDoc",e[e.noEditAccessDoc=2]="noEditAccessDoc"}(l||(l={})),function(e){e.read="read",e.write="write"}(u||(u={}));function h(e){return s.S.hz4.pipe((0,i.U)((()=>d(e))),(0,o.x)(((e,t)=>{return i=t,(n=e).mode===c.history&&i.mode===n.mode?n.subtype===i.subtype:n.mode===i.mode;var n,i})))}function m(e,t){return e?l.ownDoc:t?l.noEditAccessDoc:l.sharedDoc}function g(e,t,n,i){if(e.mode!==c.edit)return u.read;switch(t){case l.ownDoc:return u.write;case l.noEditAccessDoc:return u.read;case l.sharedDoc:return function(e,t,n){const i=!t&&!n;if(e.mode!==c.edit||i)return u.read;return u.write}(e,n,i);default:return(0,r.L0)(t)}}},3944:(e,t,n)=>{if(n.d(t,{LJ:()=>v,Nd:()=>u,Ov:()=>_,TW:()=>S,Ur:()=>d,Xs:()=>T,e$:()=>D,eg:()=>F,fN:()=>g,k6:()=>f,kh:()=>m,lW:()=>C,lz:()=>p,qg:()=>l,uj:()=>c,uz:()=>x}),3075==n.j)var i=n(90189);if(3075==n.j)var o=n(90595);if(3075==n.j)var r=n(36769);if(3075==n.j)var s=n(25009);var a=n(7833);function c(e){const t=(0,r.Cq)(e.querySelector(a.XG),"text buffer iframe");return(0,r.Cq)(t.nodeType===Node.ELEMENT_NODE&&"IFRAME"===t.tagName?t.contentDocument:void 0,"text buffer iframe document")}function l(e){const t=u(e);return{width:t?t.offsetWidth-t.clientWidth:0,height:t?t.offsetHeight-t.clientHeight:0}}function u(e){return e.querySelector(a.Wp)}function d(e,t,n){return t?function(e,t){if(t&&h(t))return t;const n=e.querySelectorAll(a.Qy);for(const e of n)if(h(e))return e;return null}(e,n):e.querySelector(a.Qy)}const h=e=>e.checkVisibility?e.checkVisibility():e.parentElement&&"none"!==e.parentElement.style.display;function m(e){return e.querySelectorAll(a.gH)}function g(e){return e.querySelector(a.gH)}function p(e){return Boolean(e.querySelector(a.gH))}function f(e){let t=e.querySelector(a.os);return t||(t=document.querySelector(a.gH)),t?t.getBoundingClientRect():null}const x=e=>!!e.querySelector(a.Lq);function _(e){return e.querySelector(a.$x)}function v(e){return null==e?void 0:e.querySelector(a.y1)}var b;!function(e){e.legacy="legacy",e.modern="modern"}(b||(b={}));const y=e=>"versionHistorySidebarWizSelector"===e.id||e.getBoundingClientRect().top>0?b.modern:b.legacy;function C(e){let t=e.querySelector(a.f);const n=(0,i.OB)().experimentClient.isGateEnabled(o.K.GDocsVersionHistorySidebarSelector);!t&&n&&(t=e.querySelector(a.q6));return!!t&&t.offsetHeight>0&&t.offsetWidth>0&&t?{mode:s.um.history,subtype:y(t)}:null}function D(e){return!!e.querySelector(`${a.jW}, ${a.F8}`)}function F(){const e=document.querySelector(a.d0),t=(null==e?void 0:e.classList.contains(a.uj))?"edit":void 0,n=(null==e?void 0:e.classList.contains(a._m))?"suggesting":void 0;return t||n||"other"}function S(e){return e.querySelector(a.QR)}function T(e){return e.querySelector(a.ij)}},7833:(e,t,n)=>{n.d(t,{$:()=>M,$x:()=>s,Cw:()=>A,F8:()=>_,Fh:()=>j,G$:()=>q,Go:()=>o,Jk:()=>$,Kt:()=>F,Lq:()=>h,Q:()=>G,Q6:()=>c,QO:()=>L,QR:()=>O,Qy:()=>b,Vk:()=>S,Wp:()=>i,XG:()=>r,_m:()=>p,d0:()=>m,f:()=>u,fD:()=>I,gH:()=>v,gL:()=>T,gv:()=>l,ij:()=>B,j5:()=>D,jW:()=>x,l$:()=>f,lO:()=>R,os:()=>C,q6:()=>d,qz:()=>E,rx:()=>w,tN:()=>H,uj:()=>g,wY:()=>z,y1:()=>a,yv:()=>k,yw:()=>y});const i=".kix-appview-editor",o=".docos-input",r=".docs-texteventtarget-iframe",s=".kix-cursor",a=".kix-cursor-caret",c="#docs-butterbar-container",l="docs-butterbar-container-compact",u="#docs-revisions-sidebar",d="#docs-wiz-sidebar-placeholder",h='#docs-toolbar-mode-switcher[aria-label="Viewing mode"]',m="#docs-toolbar-mode-switcher",g="edit-mode",p="suggest-mode",f="titlebar-mode-indicator-container",x="#titlebar-mode-indicator-container .titlebar-request-access-button",_="#titlebar-mode-indicator-container .kix-titlebar-request-access-button",v="canvas.kix-canvas-tile-content:not(.docs-ui-unprintable *)",b=".kix-rotatingtilemanager:not(.docs-ui-unprintable *)",y=".kix-page-paginated",C=".kix-page-paginated.canvas-first-page",D=".docs-horizontal-ruler",F=".docs-vertical-ruler",S="#fontSizeSelect input",T=".docs-ruler-background",w=".docs-ruler-background-inner",R=".docs-ruler-indent-first-line",B=".modal-dialog.docs-dialog .fatal-error-message",O='#docs-titlebar-share-client-button div[role="button"]',L=".kix-ai-text-generator-preview-view-insert-button",E=".kix-ai-text-generator-preview-view",k=".kix-ai-text-generator-prompt-view",G="textarea.kix-ai-text-generator-prompt-view-input",H=".kix-ai-text-generator-preview-view-generated-text",I=".appsElementsSidekickFeedContainer",M=".appsElementsSidekickUserMessageBubbleContent",q=".appsElementsSidekickUserMessageRoot",j=".appsElementsSidekickAgentMessageBubbleContent",z=".appsElementsSidekickAgentMessageRoot",$="li.appsElementsGenerativeaiAstAnimated",A="span.appsElementsGenerativeaiAstAnimated:not(li span)"}}]);